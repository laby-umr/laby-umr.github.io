---
sidebar_position: 1
title: å‰ç«¯æ€§èƒ½ä¼˜åŒ–å…¨é¢æŒ‡å—
description: æ·±å…¥è§£æå‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒæ¦‚å¿µã€å…³é”®æŒ‡æ ‡ä¸å®æˆ˜ç­–ç•¥ï¼ŒåŠ©åŠ›æ„å»ºé«˜æ€§èƒ½Webåº”ç”¨
authors: [Laby]
tags: [æ€§èƒ½ä¼˜åŒ–, Web Vitals, ç”¨æˆ·ä½“éªŒ, æ€§èƒ½ç›‘æ§, æœ€ä½³å®è·µ]
last_update:
  date: 2025-08-14
  author: Laby
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';

# å‰ç«¯æ€§èƒ½ä¼˜åŒ–å…¨é¢æŒ‡å—

å‰ç«¯æ€§èƒ½ä¼˜åŒ–æ˜¯ç°ä»£Webå¼€å‘çš„æ ¸å¿ƒç«äº‰åŠ›ï¼Œç›´æ¥å½±å“ç”¨æˆ·ä½“éªŒã€ä¸šåŠ¡è½¬åŒ–ç‡å’Œæœç´¢å¼•æ“æ’åã€‚åœ¨ç§»åŠ¨äº’è”ç½‘æ—¶ä»£ï¼Œç”¨æˆ·å¯¹é¡µé¢åŠ è½½é€Ÿåº¦çš„æœŸæœ›è¶Šæ¥è¶Šé«˜ï¼Œæ€§èƒ½ä¼˜åŒ–å·²æˆä¸ºå†³å®šäº§å“æˆè´¥çš„å…³é”®å› ç´ ã€‚

:::tip æ ¸å¿ƒä»·å€¼
**æ€§èƒ½ä¼˜åŒ– = ç”¨æˆ·ä½“éªŒ + ä¸šåŠ¡ä»·å€¼ + æŠ€æœ¯å“è¶Š**
- ğŸš€ **ç”¨æˆ·ä½“éªŒ**ï¼šå¿«é€Ÿå“åº”ï¼Œæµç•…äº¤äº’ï¼Œé™ä½è·³å‡ºç‡
- ğŸ’° **ä¸šåŠ¡ä»·å€¼**ï¼šæå‡è½¬åŒ–ç‡ï¼Œå¢åŠ ç”¨æˆ·ç•™å­˜ï¼Œé™ä½æˆæœ¬
- ğŸ¯ **æŠ€æœ¯å“è¶Š**ï¼šä»£ç è´¨é‡ï¼Œæ¶æ„ä¼˜åŒ–ï¼Œå¯ç»´æŠ¤æ€§
- ğŸ“Š **æ•°æ®é©±åŠ¨**ï¼šæ€§èƒ½ç›‘æ§ï¼ŒæŒç»­ä¼˜åŒ–ï¼Œé‡åŒ–æ”¹è¿›
- ğŸŒ **SEOå‹å¥½**ï¼šæœç´¢å¼•æ“æ’åï¼Œå¯è®¿é—®æ€§ï¼Œç”¨æˆ·è¦†ç›–
:::

## 1. æ€§èƒ½ä¼˜åŒ–çš„å•†ä¸šä»·å€¼

### 1.1 æ€§èƒ½ä¸ä¸šåŠ¡æŒ‡æ ‡çš„å…³ç³»

æ€§èƒ½ä¼˜åŒ–ä¸ä»…æ˜¯æŠ€æœ¯é—®é¢˜ï¼Œæ›´æ˜¯å•†ä¸šé—®é¢˜ã€‚ç ”ç©¶è¡¨æ˜ï¼Œé¡µé¢æ€§èƒ½ä¸å…³é”®ä¸šåŠ¡æŒ‡æ ‡å­˜åœ¨å¼ºç›¸å…³æ€§ã€‚

```mermaid
graph TB
    subgraph "æ€§èƒ½ä¼˜åŒ–ä»·å€¼é“¾"
        A[é¡µé¢åŠ è½½é€Ÿåº¦] --> B[ç”¨æˆ·ä½“éªŒæå‡]
        B --> C[ç”¨æˆ·è¡Œä¸ºæ”¹å–„]
        C --> D[ä¸šåŠ¡æŒ‡æ ‡æå‡]
        
        B --> B1[é™ä½è·³å‡ºç‡]
        B --> B2[å¢åŠ é¡µé¢æµè§ˆé‡]
        B --> B3[æé«˜ç”¨æˆ·æ»¡æ„åº¦]
        
        C --> C1[å»¶é•¿åœç•™æ—¶é—´]
        C --> C2[å¢åŠ äº’åŠ¨é¢‘ç‡]
        C --> C3[æé«˜è½¬åŒ–æ„æ„¿]
        
        D --> D1[è½¬åŒ–ç‡æå‡]
        D --> D2[æ”¶å…¥å¢é•¿]
        D --> D3[ç”¨æˆ·ç•™å­˜]
    end
```

#### æ€§èƒ½å½±å“æ•°æ®ç»Ÿè®¡

| æ€§èƒ½æ”¹è¿› | ä¸šåŠ¡å½±å“ | å…¸å‹æ¡ˆä¾‹ | æå‡å¹…åº¦ |
|---------|----------|----------|----------|
| **é¡µé¢åŠ è½½æ—¶é—´å‡å°‘1ç§’** | è½¬åŒ–ç‡æå‡ | Amazon | 7% |
| **é¦–å±æ—¶é—´ä¼˜åŒ–** | è·³å‡ºç‡é™ä½ | BBC | 10% |
| **ç§»åŠ¨ç«¯æ€§èƒ½æå‡** | ç”¨æˆ·å‚ä¸åº¦ | Pinterest | 15% |
| **Core Web Vitalsä¼˜åŒ–** | SEOæ’å | Googleæœç´¢ | æ˜¾è‘—æå‡ |
| **èµ„æºåŠ è½½ä¼˜åŒ–** | æœåŠ¡å™¨æˆæœ¬ | Netflix | é™ä½43% |

<Tabs>
<TabItem value="user-experience" label="ç”¨æˆ·ä½“éªŒå½±å“">

### ç”¨æˆ·ä½“éªŒä¸æ€§èƒ½çš„å…³ç³»

```mermaid
graph LR
    subgraph "ç”¨æˆ·ä½“éªŒå½±å“é“¾"
        A[é¡µé¢åŠ è½½] --> B{3ç§’å†…åŠ è½½?}
        B -->|æ˜¯| C[ç”¨æˆ·ç»§ç»­æµè§ˆ]
        B -->|å¦| D[ç”¨æˆ·ç¦»å¼€]
        
        C --> E[è‰¯å¥½ä½“éªŒ]
        E --> F[ç”¨æˆ·ç•™å­˜]
        F --> G[ä¸šåŠ¡æˆåŠŸ]
        
        D --> H[ç³Ÿç³•ä½“éªŒ]
        H --> I[ç”¨æˆ·æµå¤±]
        I --> J[ä¸šåŠ¡æŸå¤±]
    end
```

#### ç”¨æˆ·æœŸæœ›ä¸ç°å®

- **ç§»åŠ¨ç«¯ç”¨æˆ·æœŸæœ›**ï¼šé¡µé¢åœ¨2ç§’å†…å®ŒæˆåŠ è½½
- **æ¡Œé¢ç«¯ç”¨æˆ·æœŸæœ›**ï¼šé¡µé¢åœ¨1ç§’å†…å¼€å§‹æ¸²æŸ“
- **äº¤äº’å“åº”æœŸæœ›**ï¼šç‚¹å‡»å100mså†…æœ‰è§†è§‰åé¦ˆ
- **æ»šåŠ¨æµç•…åº¦æœŸæœ›**ï¼šä¿æŒ60fpsçš„å¸§ç‡

</TabItem>
<TabItem value="business-impact" label="å•†ä¸šå½±å“">

### æ€§èƒ½å¯¹ä¸šåŠ¡çš„ç›´æ¥å½±å“

#### ç”µå•†è¡Œä¸šæ¡ˆä¾‹åˆ†æ

```javascript title="æ€§èƒ½ä¼˜åŒ–ROIè®¡ç®—å™¨"
class PerformanceROICalculator {
  constructor(currentMetrics) {
    this.currentMetrics = currentMetrics;
  }
  
  calculateImpact(improvements) {
    const results = {};
    
    // è½¬åŒ–ç‡å½±å“è®¡ç®—
    if (improvements.loadTimeReduction) {
      const conversionIncrease = improvements.loadTimeReduction * 0.07; // æ¯ç§’7%æå‡
      results.conversionRate = {
        current: this.currentMetrics.conversionRate,
        improved: this.currentMetrics.conversionRate * (1 + conversionIncrease),
        increase: conversionIncrease * 100
      };
    }
    
    // è·³å‡ºç‡å½±å“è®¡ç®—
    if (improvements.firstContentfulPaint) {
      const bounceRateReduction = Math.min(improvements.firstContentfulPaint * 0.05, 0.3);
      results.bounceRate = {
        current: this.currentMetrics.bounceRate,
        improved: this.currentMetrics.bounceRate * (1 - bounceRateReduction),
        reduction: bounceRateReduction * 100
      };
    }
    
    // æ”¶å…¥å½±å“è®¡ç®—
    if (results.conversionRate && this.currentMetrics.monthlyRevenue) {
      const revenueIncrease = this.currentMetrics.monthlyRevenue * 
        (results.conversionRate.improved / results.conversionRate.current - 1);
      results.revenue = {
        monthlyIncrease: revenueIncrease,
        yearlyIncrease: revenueIncrease * 12
      };
    }
    
    return results;
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const calculator = new PerformanceROICalculator({
  conversionRate: 0.025, // 2.5%
  bounceRate: 0.45, // 45%
  monthlyRevenue: 1000000 // 100ä¸‡
});

const impact = calculator.calculateImpact({
  loadTimeReduction: 2, // å‡å°‘2ç§’
  firstContentfulPaint: 1.5 // FCPæå‡1.5ç§’
});

console.log('æ€§èƒ½ä¼˜åŒ–é¢„æœŸå½±å“:', impact);
```

</TabItem>
<TabItem value="seo-benefits" label="SEOæ”¶ç›Š">

### æ€§èƒ½ä¼˜åŒ–å¯¹SEOçš„å½±å“

#### Core Web Vitalsä¸æœç´¢æ’å

Googleå·²å°†Core Web Vitalsä½œä¸ºæœç´¢æ’åçš„é‡è¦å› ç´ ï¼Œæ€§èƒ½ä¼˜åŒ–ç›´æ¥å½±å“ç½‘ç«™çš„æœç´¢å¯è§æ€§ã€‚

```javascript title="SEOæ€§èƒ½ç›‘æ§"
class SEOPerformanceMonitor {
  constructor() {
    this.metrics = {};
    this.thresholds = {
      LCP: 2500, // 2.5ç§’
      FID: 100,  // 100æ¯«ç§’
      CLS: 0.1   // 0.1
    };
  }
  
  async measureCoreWebVitals() {
    // åŠ¨æ€å¯¼å…¥web-vitalsåº“
    const { getCLS, getFID, getLCP } = await import('web-vitals');
    
    return new Promise((resolve) => {
      const metrics = {};
      let collected = 0;
      const total = 3;
      
      const checkComplete = () => {
        collected++;
        if (collected === total) {
          resolve(this.generateSEOScore(metrics));
        }
      };
      
      getCLS((metric) => {
        metrics.CLS = metric.value;
        checkComplete();
      });
      
      getFID((metric) => {
        metrics.FID = metric.value;
        checkComplete();
      });
      
      getLCP((metric) => {
        metrics.LCP = metric.value;
        checkComplete();
      });
    });
  }
  
  generateSEOScore(metrics) {
    let score = 0;
    let maxScore = 300; // æ¯ä¸ªæŒ‡æ ‡100åˆ†
    
    // LCPè¯„åˆ†
    if (metrics.LCP <= this.thresholds.LCP) {
      score += 100;
    } else if (metrics.LCP <= 4000) {
      score += 50;
    }
    
    // FIDè¯„åˆ†
    if (metrics.FID <= this.thresholds.FID) {
      score += 100;
    } else if (metrics.FID <= 300) {
      score += 50;
    }
    
    // CLSè¯„åˆ†
    if (metrics.CLS <= this.thresholds.CLS) {
      score += 100;
    } else if (metrics.CLS <= 0.25) {
      score += 50;
    }
    
    return {
      metrics,
      score,
      maxScore,
      percentage: (score / maxScore) * 100,
      grade: this.getGrade(score / maxScore),
      recommendations: this.getRecommendations(metrics)
    };
  }
  
  getGrade(percentage) {
    if (percentage >= 0.9) return 'A';
    if (percentage >= 0.8) return 'B';
    if (percentage >= 0.7) return 'C';
    if (percentage >= 0.6) return 'D';
    return 'F';
  }
  
  getRecommendations(metrics) {
    const recommendations = [];
    
    if (metrics.LCP > this.thresholds.LCP) {
      recommendations.push({
        metric: 'LCP',
        issue: 'æœ€å¤§å†…å®¹ç»˜åˆ¶æ—¶é—´è¿‡é•¿',
        solutions: [
          'ä¼˜åŒ–æœåŠ¡å™¨å“åº”æ—¶é—´',
          'ä½¿ç”¨CDNåŠ é€Ÿèµ„æºåŠ è½½',
          'å‹ç¼©å’Œä¼˜åŒ–å›¾ç‰‡',
          'é¢„åŠ è½½å…³é”®èµ„æº'
        ]
      });
    }
    
    if (metrics.FID > this.thresholds.FID) {
      recommendations.push({
        metric: 'FID',
        issue: 'é¦–æ¬¡è¾“å…¥å»¶è¿Ÿè¿‡é•¿',
        solutions: [
          'å‡å°‘JavaScriptæ‰§è¡Œæ—¶é—´',
          'ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½',
          'ä¼˜åŒ–ç¬¬ä¸‰æ–¹è„šæœ¬',
          'ä½¿ç”¨Web Workerså¤„ç†å¤æ‚è®¡ç®—'
        ]
      });
    }
    
    if (metrics.CLS > this.thresholds.CLS) {
      recommendations.push({
        metric: 'CLS',
        issue: 'ç´¯ç§¯å¸ƒå±€åç§»è¿‡å¤§',
        solutions: [
          'ä¸ºå›¾ç‰‡å’Œè§†é¢‘è®¾ç½®å°ºå¯¸å±æ€§',
          'é¿å…åœ¨ç°æœ‰å†…å®¹ä¸Šæ–¹æ’å…¥å†…å®¹',
          'ä½¿ç”¨transformåŠ¨ç”»ä»£æ›¿æ”¹å˜å¸ƒå±€çš„åŠ¨ç”»',
          'é¢„ç•™å¹¿å‘Šå’ŒåµŒå…¥å†…å®¹çš„ç©ºé—´'
        ]
      });
    }
    
    return recommendations;
  }
}
```

</TabItem>
</Tabs>

## 2. æ ¸å¿ƒæ€§èƒ½æŒ‡æ ‡è¯¦è§£

### 2.1 Core Web Vitalsæ·±åº¦è§£æ

Core Web Vitalsæ˜¯Googleæ¨å‡ºçš„ç”¨æˆ·ä½“éªŒæ ¸å¿ƒæŒ‡æ ‡ï¼Œç›´æ¥å½±å“æœç´¢æ’åå’Œç”¨æˆ·ä½“éªŒã€‚

```mermaid
graph TB
    subgraph "Core Web VitalsæŒ‡æ ‡ä½“ç³»"
        A[Core Web Vitals] --> B[LCP æœ€å¤§å†…å®¹ç»˜åˆ¶]
        A --> C[FID é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ]
        A --> D[CLS ç´¯ç§¯å¸ƒå±€åç§»]
        
        B --> B1[åŠ è½½æ€§èƒ½]
        B --> B2[â‰¤ 2.5ç§’ ä¼˜ç§€]
        B --> B3[â‰¤ 4.0ç§’ éœ€è¦æ”¹è¿›]
        
        C --> C1[äº¤äº’æ€§èƒ½]
        C --> C2[â‰¤ 100ms ä¼˜ç§€]
        C --> C3[â‰¤ 300ms éœ€è¦æ”¹è¿›]
        
        D --> D1[è§†è§‰ç¨³å®šæ€§]
        D --> D2[â‰¤ 0.1 ä¼˜ç§€]
        D --> D3[â‰¤ 0.25 éœ€è¦æ”¹è¿›]
    end
```

<Tabs>
<TabItem value="lcp" label="LCP - æœ€å¤§å†…å®¹ç»˜åˆ¶">

### LCP (Largest Contentful Paint)

LCPæµ‹é‡é¡µé¢ä¸»è¦å†…å®¹çš„åŠ è½½æ—¶é—´ï¼Œåæ˜ ç”¨æˆ·æ„ŸçŸ¥çš„åŠ è½½é€Ÿåº¦ã€‚

#### LCPä¼˜åŒ–ç­–ç•¥

```javascript title="LCPä¼˜åŒ–å®è·µ"
// 1. å…³é”®èµ„æºé¢„åŠ è½½
class LCPOptimizer {
  constructor() {
    this.criticalResources = [];
    this.observer = null;
  }
  
  // è¯†åˆ«LCPå…ƒç´ 
  identifyLCPElement() {
    return new Promise((resolve) => {
      const observer = new PerformanceObserver((list) => {
        const entries = list.getEntries();
        const lastEntry = entries[entries.length - 1];
        
        if (lastEntry) {
          resolve({
            element: lastEntry.element,
            loadTime: lastEntry.loadTime,
            size: lastEntry.size
          });
        }
      });
      
      observer.observe({ entryTypes: ['largest-contentful-paint'] });
      
      // 10ç§’ååœæ­¢è§‚å¯Ÿ
      setTimeout(() => {
        observer.disconnect();
        resolve(null);
      }, 10000);
    });
  }
  
  // é¢„åŠ è½½å…³é”®èµ„æº
  preloadCriticalResources() {
    const criticalImages = document.querySelectorAll('img[data-critical="true"]');
    
    criticalImages.forEach(img => {
      const link = document.createElement('link');
      link.rel = 'preload';
      link.as = 'image';
      link.href = img.src;
      
      // å“åº”å¼å›¾ç‰‡é¢„åŠ è½½
      if (img.srcset) {
        link.imagesrcset = img.srcset;
        link.imagesizes = img.sizes || '100vw';
      }
      
      document.head.appendChild(link);
    });
  }
  
  // ä¼˜åŒ–å›¾ç‰‡åŠ è½½
  optimizeImageLoading() {
    const images = document.querySelectorAll('img');
    
    images.forEach(img => {
      // æ·»åŠ loadingå±æ€§
      if (!img.hasAttribute('loading')) {
        img.loading = img.dataset.critical === 'true' ? 'eager' : 'lazy';
      }
      
      // æ·»åŠ fetchpriorityå±æ€§
      if (img.dataset.critical === 'true') {
        img.fetchPriority = 'high';
      }
      
      // å›¾ç‰‡åŠ è½½é”™è¯¯å¤„ç†
      img.addEventListener('error', () => {
        console.warn('å›¾ç‰‡åŠ è½½å¤±è´¥:', img.src);
        // å¯ä»¥è®¾ç½®é»˜è®¤å›¾ç‰‡
        img.src = '/images/placeholder.jpg';
      });
    });
  }
  
  // ç›‘æ§LCPæ€§èƒ½
  async monitorLCP() {
    const lcpData = await this.identifyLCPElement();
    
    if (lcpData) {
      console.log('LCPå…ƒç´ ä¿¡æ¯:', lcpData);
      
      // å‘é€æ€§èƒ½æ•°æ®
      this.sendPerformanceData({
        metric: 'LCP',
        value: lcpData.loadTime,
        element: lcpData.element.tagName,
        url: window.location.href
      });
      
      // å¦‚æœLCPæ—¶é—´è¿‡é•¿ï¼Œç»™å‡ºä¼˜åŒ–å»ºè®®
      if (lcpData.loadTime > 2500) {
        this.suggestOptimizations(lcpData);
      }
    }
  }
  
  suggestOptimizations(lcpData) {
    const suggestions = [];
    
    if (lcpData.element.tagName === 'IMG') {
      suggestions.push('è€ƒè™‘ä½¿ç”¨WebPæ ¼å¼å›¾ç‰‡');
      suggestions.push('æ·»åŠ é€‚å½“çš„å›¾ç‰‡å°ºå¯¸å±æ€§');
      suggestions.push('ä½¿ç”¨CDNåŠ é€Ÿå›¾ç‰‡åŠ è½½');
    }
    
    if (lcpData.loadTime > 4000) {
      suggestions.push('æ£€æŸ¥æœåŠ¡å™¨å“åº”æ—¶é—´');
      suggestions.push('å¯ç”¨Gzipå‹ç¼©');
      suggestions.push('ä¼˜åŒ–å…³é”®æ¸²æŸ“è·¯å¾„');
    }
    
    console.log('LCPä¼˜åŒ–å»ºè®®:', suggestions);
  }
  
  sendPerformanceData(data) {
    // å‘é€åˆ°åˆ†ææœåŠ¡
    if (navigator.sendBeacon) {
      navigator.sendBeacon('/api/performance', JSON.stringify(data));
    }
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const lcpOptimizer = new LCPOptimizer();
lcpOptimizer.preloadCriticalResources();
lcpOptimizer.optimizeImageLoading();
lcpOptimizer.monitorLCP();
```

#### LCPä¼˜åŒ–æ£€æŸ¥æ¸…å•

- âœ… **æœåŠ¡å™¨å“åº”æ—¶é—´** < 200ms
- âœ… **å…³é”®èµ„æºé¢„åŠ è½½** ä½¿ç”¨ `<link rel="preload">`
- âœ… **å›¾ç‰‡ä¼˜åŒ–** WebPæ ¼å¼ï¼Œé€‚å½“å‹ç¼©
- âœ… **CDNä½¿ç”¨** å…¨çƒåˆ†å¸ƒå¼å†…å®¹åˆ†å‘
- âœ… **å…³é”®CSSå†…è”** é¿å…æ¸²æŸ“é˜»å¡

</TabItem>
<TabItem value="fid" label="FID - é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ">

### FID (First Input Delay)

FIDæµ‹é‡ç”¨æˆ·é¦–æ¬¡ä¸é¡µé¢äº¤äº’æ—¶çš„å»¶è¿Ÿï¼Œåæ˜ é¡µé¢çš„äº¤äº’å“åº”æ€§ã€‚

#### FIDä¼˜åŒ–ç­–ç•¥

```javascript title="FIDä¼˜åŒ–å®è·µ"
// 1. JavaScriptæ‰§è¡Œä¼˜åŒ–
class FIDOptimizer {
  constructor() {
    this.taskQueue = [];
    this.isProcessing = false;
  }
  
  // ä»»åŠ¡è°ƒåº¦å™¨ - é¿å…é•¿ä»»åŠ¡é˜»å¡ä¸»çº¿ç¨‹
  scheduleTask(task, priority = 'normal') {
    return new Promise((resolve, reject) => {
      this.taskQueue.push({
        task,
        priority,
        resolve,
        reject,
        timestamp: performance.now()
      });
      
      this.processQueue();
    });
  }
  
  async processQueue() {
    if (this.isProcessing) return;
    
    this.isProcessing = true;
    
    while (this.taskQueue.length > 0) {
      // æŒ‰ä¼˜å…ˆçº§æ’åº
      this.taskQueue.sort((a, b) => {
        const priorityOrder = { high: 3, normal: 2, low: 1 };
        return priorityOrder[b.priority] - priorityOrder[a.priority];
      });
      
      const { task, resolve, reject } = this.taskQueue.shift();
      
      try {
        // ä½¿ç”¨ scheduler.postTask (å¦‚æœæ”¯æŒ) æˆ– MessageChannel
        if ('scheduler' in window && 'postTask' in scheduler) {
          await scheduler.postTask(() => {
            const result = task();
            resolve(result);
          });
        } else {
          // é™çº§æ–¹æ¡ˆï¼šä½¿ç”¨ MessageChannel å®ç°æ—¶é—´åˆ‡ç‰‡
          await this.executeWithTimeSlicing(task, resolve);
        }
      } catch (error) {
        reject(error);
      }
      
      // è®©å‡ºæ§åˆ¶æƒï¼Œé¿å…é˜»å¡ç”¨æˆ·äº¤äº’
      await this.yieldToMain();
    }
    
    this.isProcessing = false;
  }
  
  executeWithTimeSlicing(task, resolve) {
    return new Promise((resolveSlice) => {
      const channel = new MessageChannel();
      
      channel.port2.onmessage = () => {
        const result = task();
        resolve(result);
        resolveSlice();
      };
      
      channel.port1.postMessage(null);
    });
  }
  
  yieldToMain() {
    return new Promise(resolve => {
      setTimeout(resolve, 0);
    });
  }
  
  // ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½
  async loadModuleOnDemand(modulePath) {
    try {
      const startTime = performance.now();
      const module = await import(modulePath);
      const loadTime = performance.now() - startTime;
      
      console.log(`æ¨¡å— ${modulePath} åŠ è½½æ—¶é—´: ${loadTime}ms`);
      
      return module;
    } catch (error) {
      console.error('æ¨¡å—åŠ è½½å¤±è´¥:', error);
      throw error;
    }
  }
  
  // äº‹ä»¶å¤„ç†ä¼˜åŒ–
  optimizeEventHandlers() {
    // ä½¿ç”¨äº‹ä»¶å§”æ‰˜å‡å°‘äº‹ä»¶ç›‘å¬å™¨æ•°é‡
    document.addEventListener('click', this.handleClick.bind(this), {
      passive: true,
      capture: false
    });
    
    // ä¼˜åŒ–æ»šåŠ¨äº‹ä»¶
    let scrollTimeout;
    document.addEventListener('scroll', () => {
      if (scrollTimeout) {
        cancelAnimationFrame(scrollTimeout);
      }
      
      scrollTimeout = requestAnimationFrame(() => {
        this.handleScroll();
      });
    }, { passive: true });
  }
  
  handleClick(event) {
    const target = event.target.closest('[data-action]');
    if (!target) return;
    
    const action = target.dataset.action;
    
    // ä½¿ç”¨ä»»åŠ¡è°ƒåº¦å™¨å¤„ç†ç‚¹å‡»äº‹ä»¶
    this.scheduleTask(() => {
      this.executeAction(action, target);
    }, 'high');
  }
  
  executeAction(action, element) {
    switch (action) {
      case 'load-content':
        return this.loadContent(element);
      case 'submit-form':
        return this.submitForm(element);
      default:
        console.warn('æœªçŸ¥æ“ä½œ:', action);
    }
  }
  
  async loadContent(element) {
    const contentId = element.dataset.contentId;
    
    // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
    element.classList.add('loading');
    
    try {
      const content = await fetch(`/api/content/${contentId}`);
      const data = await content.json();
      
      // æ›´æ–°UI
      this.updateContent(data);
    } catch (error) {
      console.error('å†…å®¹åŠ è½½å¤±è´¥:', error);
    } finally {
      element.classList.remove('loading');
    }
  }
  
  // Web Workerså¤„ç†å¤æ‚è®¡ç®—
  createWorker(workerScript) {
    return new Promise((resolve, reject) => {
      const worker = new Worker(workerScript);
      
      worker.onmessage = (event) => {
        resolve(event.data);
        worker.terminate();
      };
      
      worker.onerror = (error) => {
        reject(error);
        worker.terminate();
      };
      
      return worker;
    });
  }
  
  async processDataInWorker(data) {
    const worker = await this.createWorker('/workers/data-processor.js');
    
    return new Promise((resolve, reject) => {
      worker.onmessage = (event) => {
        resolve(event.data);
      };
      
      worker.onerror = reject;
      worker.postMessage(data);
    });
  }
}

// Web Worker ç¤ºä¾‹ (data-processor.js)
/*
self.onmessage = function(event) {
  const data = event.data;
  
  // æ‰§è¡Œå¤æ‚è®¡ç®—
  const result = processLargeDataset(data);
  
  // è¿”å›ç»“æœ
  self.postMessage(result);
};

function processLargeDataset(data) {
  // æ¨¡æ‹Ÿå¤æ‚è®¡ç®—
  let result = [];
  for (let i = 0; i < data.length; i++) {
    result.push(data[i] * 2);
  }
  return result;
}
*/

// ä½¿ç”¨ç¤ºä¾‹
const fidOptimizer = new FIDOptimizer();
fidOptimizer.optimizeEventHandlers();

// è°ƒåº¦ä»»åŠ¡ç¤ºä¾‹
fidOptimizer.scheduleTask(() => {
  console.log('æ‰§è¡Œä½ä¼˜å…ˆçº§ä»»åŠ¡');
}, 'low');
```

</TabItem>
<TabItem value="cls" label="CLS - ç´¯ç§¯å¸ƒå±€åç§»">

### CLS (Cumulative Layout Shift)

CLSæµ‹é‡é¡µé¢å¸ƒå±€çš„ç¨³å®šæ€§ï¼Œé¿å…æ„å¤–çš„å¸ƒå±€åç§»å½±å“ç”¨æˆ·ä½“éªŒã€‚

#### CLSä¼˜åŒ–ç­–ç•¥

```javascript title="CLSä¼˜åŒ–å®è·µ"
// 1. å¸ƒå±€ç¨³å®šæ€§ä¼˜åŒ–
class CLSOptimizer {
  constructor() {
    this.layoutShifts = [];
    this.observer = null;
    this.init();
  }
  
  init() {
    this.observeLayoutShifts();
    this.optimizeImages();
    this.optimizeFonts();
    this.reserveSpaceForAds();
  }
  
  // ç›‘æ§å¸ƒå±€åç§»
  observeLayoutShifts() {
    if (!('LayoutShift' in window)) {
      console.warn('æµè§ˆå™¨ä¸æ”¯æŒLayout Shift API');
      return;
    }
    
    this.observer = new PerformanceObserver((list) => {
      for (const entry of list.getEntries()) {
        if (!entry.hadRecentInput) {
          this.layoutShifts.push({
            value: entry.value,
            sources: entry.sources,
            timestamp: entry.startTime
          });
          
          console.log('æ£€æµ‹åˆ°å¸ƒå±€åç§»:', {
            value: entry.value,
            sources: entry.sources?.map(source => ({
              element: source.node,
              previousRect: source.previousRect,
              currentRect: source.currentRect
            }))
          });
          
          // å¦‚æœåç§»å€¼è¿‡å¤§ï¼Œå‘å‡ºè­¦å‘Š
          if (entry.value > 0.1) {
            this.handleLargeShift(entry);
          }
        }
      }
    });
    
    this.observer.observe({ entryTypes: ['layout-shift'] });
  }
  
  handleLargeShift(entry) {
    console.warn('æ£€æµ‹åˆ°å¤§å¹…å¸ƒå±€åç§»:', entry.value);
    
    // åˆ†æåç§»åŸå› 
    if (entry.sources) {
      entry.sources.forEach(source => {
        const element = source.node;
        console.log('åç§»å…ƒç´ :', element);
        
        // ç»™å‡ºä¼˜åŒ–å»ºè®®
        this.suggestFix(element);
      });
    }
  }
  
  suggestFix(element) {
    const suggestions = [];
    
    if (element.tagName === 'IMG') {
      if (!element.width || !element.height) {
        suggestions.push('ä¸ºå›¾ç‰‡æ·»åŠ widthå’Œheightå±æ€§');
      }
      if (!element.style.aspectRatio) {
        suggestions.push('ä½¿ç”¨aspect-ratio CSSå±æ€§');
      }
    }
    
    if (element.tagName === 'IFRAME') {
      suggestions.push('ä¸ºiframeé¢„ç•™ç©ºé—´');
    }
    
    if (element.classList.contains('ad-container')) {
      suggestions.push('ä¸ºå¹¿å‘Šå®¹å™¨é¢„ç•™å›ºå®šå°ºå¯¸');
    }
    
    console.log('ä¼˜åŒ–å»ºè®®:', suggestions);
  }
  
  // å›¾ç‰‡ä¼˜åŒ–
  optimizeImages() {
    const images = document.querySelectorAll('img');
    
    images.forEach(img => {
      // å¦‚æœå›¾ç‰‡æ²¡æœ‰å°ºå¯¸å±æ€§ï¼Œå°è¯•ä»CSSè·å–
      if (!img.width || !img.height) {
        const computedStyle = getComputedStyle(img);
        const aspectRatio = this.calculateAspectRatio(img);
        
        if (aspectRatio) {
          img.style.aspectRatio = aspectRatio;
        }
      }
      
      // æ·»åŠ åŠ è½½å ä½ç¬¦
      if (!img.complete) {
        this.addImagePlaceholder(img);
      }
    });
  }
  
  calculateAspectRatio(img) {
    if (img.naturalWidth && img.naturalHeight) {
      return `${img.naturalWidth} / ${img.naturalHeight}`;
    }
    return null;
  }
  
  addImagePlaceholder(img) {
    const placeholder = document.createElement('div');
    placeholder.className = 'image-placeholder';
    placeholder.style.cssText = `
      background-color: #f0f0f0;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #999;
      font-size: 14px;
    `;
    
    // å¤åˆ¶å›¾ç‰‡çš„å°ºå¯¸æ ·å¼
    const computedStyle = getComputedStyle(img);
    placeholder.style.width = computedStyle.width;
    placeholder.style.height = computedStyle.height;
    placeholder.textContent = 'åŠ è½½ä¸­...';
    
    // æ’å…¥å ä½ç¬¦
    img.parentNode.insertBefore(placeholder, img);
    img.style.display = 'none';
    
    // å›¾ç‰‡åŠ è½½å®Œæˆåç§»é™¤å ä½ç¬¦
    img.addEventListener('load', () => {
      img.style.display = '';
      placeholder.remove();
    });
  }
  
  // å­—ä½“ä¼˜åŒ–
  optimizeFonts() {
    // é¢„åŠ è½½å…³é”®å­—ä½“
    const criticalFonts = [
      '/fonts/main-font.woff2',
      '/fonts/heading-font.woff2'
    ];
    
    criticalFonts.forEach(fontUrl => {
      const link = document.createElement('link');
      link.rel = 'preload';
      link.as = 'font';
      link.type = 'font/woff2';
      link.crossOrigin = 'anonymous';
      link.href = fontUrl;
      document.head.appendChild(link);
    });
    
    // ä½¿ç”¨font-displayä¼˜åŒ–å­—ä½“åŠ è½½
    const style = document.createElement('style');
    style.textContent = `
      @font-face {
        font-family: 'MainFont';
        src: url('/fonts/main-font.woff2') format('woff2');
        font-display: swap;
      }
    `;
    document.head.appendChild(style);
  }
  
  // ä¸ºå¹¿å‘Šé¢„ç•™ç©ºé—´
  reserveSpaceForAds() {
    const adContainers = document.querySelectorAll('.ad-container');
    
    adContainers.forEach(container => {
      const adSize = container.dataset.adSize || '300x250';
      const [width, height] = adSize.split('x');
      
      // è®¾ç½®æœ€å°å°ºå¯¸
      container.style.minWidth = `${width}px`;
      container.style.minHeight = `${height}px`;
      
      // æ·»åŠ åŠ è½½çŠ¶æ€
      container.classList.add('ad-loading');
      
      // æ¨¡æ‹Ÿå¹¿å‘ŠåŠ è½½
      setTimeout(() => {
        container.classList.remove('ad-loading');
        container.classList.add('ad-loaded');
      }, 1000);
    });
  }
  
  // åŠ¨æ€å†…å®¹æ’å…¥ä¼˜åŒ–
  insertContentSafely(container, content, position = 'beforeend') {
    // è®°å½•æ’å…¥å‰çš„å¸ƒå±€ä¿¡æ¯
    const beforeRect = container.getBoundingClientRect();
    
    // æ’å…¥å†…å®¹
    container.insertAdjacentHTML(position, content);
    
    // æ£€æŸ¥æ˜¯å¦é€ æˆå¸ƒå±€åç§»
    requestAnimationFrame(() => {
      const afterRect = container.getBoundingClientRect();
      
      if (beforeRect.height !== afterRect.height) {
        console.log('å†…å®¹æ’å…¥å¯¼è‡´å¸ƒå±€å˜åŒ–:', {
          before: beforeRect.height,
          after: afterRect.height,
          diff: afterRect.height - beforeRect.height
        });
      }
    });
  }
  
  // è·å–CLSåˆ†æ•°
  getCLSScore() {
    const totalShift = this.layoutShifts.reduce((sum, shift) => sum + shift.value, 0);
    return {
      score: totalShift,
      grade: this.getGrade(totalShift),
      shifts: this.layoutShifts.length,
      details: this.layoutShifts
    };
  }
  
  getGrade(score) {
    if (score <= 0.1) return 'Good';
    if (score <= 0.25) return 'Needs Improvement';
    return 'Poor';
  }
  
  // æ¸…ç†è§‚å¯Ÿå™¨
  disconnect() {
    if (this.observer) {
      this.observer.disconnect();
    }
  }
}

// CSSä¼˜åŒ–ç¤ºä¾‹
const clsOptimizationCSS = `
/* 1. ä¸ºå›¾ç‰‡è®¾ç½®aspect-ratio */
.responsive-image {
  width: 100%;
  height: auto;
  aspect-ratio: 16 / 9;
}

/* 2. ä¸ºå¹¿å‘Šå®¹å™¨é¢„ç•™ç©ºé—´ */
.ad-container {
  min-height: 250px;
  background-color: #f5f5f5;
  display: flex;
  align-items: center;
  justify-content: center;
}

.ad-container.ad-loading::before {
  content: "å¹¿å‘ŠåŠ è½½ä¸­...";
  color: #999;
}

/* 3. å­—ä½“åŠ è½½ä¼˜åŒ– */
@font-face {
  font-family: 'CustomFont';
  src: url('/fonts/custom-font.woff2') format('woff2');
  font-display: swap; /* é¿å…å­—ä½“åŠ è½½æ—¶çš„å¸ƒå±€åç§» */
}

/* 4. åŠ¨ç”»ä½¿ç”¨transformè€Œä¸æ˜¯æ”¹å˜å¸ƒå±€å±æ€§ */
.slide-in {
  transform: translateX(-100%);
  transition: transform 0.3s ease;
}

.slide-in.active {
  transform: translateX(0);
}

/* 5. ä¸ºåŠ¨æ€å†…å®¹é¢„ç•™ç©ºé—´ */
.dynamic-content-container {
  min-height: 200px;
  transition: min-height 0.3s ease;
}
`;

// ä½¿ç”¨ç¤ºä¾‹
const clsOptimizer = new CLSOptimizer();

// 5ç§’åè·å–CLSåˆ†æ•°
setTimeout(() => {
  const clsScore = clsOptimizer.getCLSScore();
  console.log('CLSè¯„åˆ†:', clsScore);
}, 5000);
```

</TabItem>
</Tabs>

### 2.2 å…¶ä»–é‡è¦æ€§èƒ½æŒ‡æ ‡

### æ ¸å¿ƒWebæŒ‡æ ‡ï¼ˆCore Web Vitalsï¼‰
- **LCPï¼ˆLargest Contentful Paintï¼‰**ï¼šæœ€å¤§å†…å®¹ç»˜åˆ¶æ—¶é—´ï¼Œåº”å°äº2.5ç§’
- **FIDï¼ˆFirst Input Delayï¼‰**ï¼šé¦–æ¬¡è¾“å…¥å»¶è¿Ÿï¼Œåº”å°äº100æ¯«ç§’
- **CLSï¼ˆCumulative Layout Shiftï¼‰**ï¼šç´¯ç§¯å¸ƒå±€åç§»ï¼Œåº”å°äº0.1

### å…¶ä»–é‡è¦æŒ‡æ ‡
- **TTFBï¼ˆTime to First Byteï¼‰**ï¼šé¦–å­—èŠ‚æ—¶é—´
- **FCPï¼ˆFirst Contentful Paintï¼‰**ï¼šé¦–æ¬¡å†…å®¹ç»˜åˆ¶
- **TTIï¼ˆTime to Interactiveï¼‰**ï¼šå¯äº¤äº’æ—¶é—´

## æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 1. èµ„æºä¼˜åŒ–
- **å‹ç¼©å’Œåˆå¹¶**ï¼šå‡å°‘HTTPè¯·æ±‚æ•°é‡
- **CDNä½¿ç”¨**ï¼šåˆ©ç”¨å…¨çƒåˆ†å¸ƒå¼ç½‘ç»œåŠ é€Ÿ
- **å›¾ç‰‡ä¼˜åŒ–**ï¼šé€‰æ‹©åˆé€‚çš„æ ¼å¼å’Œå‹ç¼©ç®—æ³•

### 2. ä»£ç ä¼˜åŒ–
- **ä»£ç åˆ†å‰²**ï¼šæŒ‰éœ€åŠ è½½å‡å°‘åˆå§‹åŒ…å¤§å°
- **æ‡’åŠ è½½**ï¼šå»¶è¿ŸåŠ è½½éå…³é”®èµ„æº
- **ç¼“å­˜ç­–ç•¥**ï¼šåˆç†åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜

### 3. æ¸²æŸ“ä¼˜åŒ–
- **å…³é”®è·¯å¾„ä¼˜åŒ–**ï¼šä¼˜å…ˆåŠ è½½å…³é”®èµ„æº
- **CSSä¼˜åŒ–**ï¼šé¿å…é˜»å¡æ¸²æŸ“çš„CSS
- **JavaScriptä¼˜åŒ–**ï¼šå¼‚æ­¥åŠ è½½éå…³é”®è„šæœ¬

## æ€§èƒ½ç›‘æ§

### å·¥å…·é€‰æ‹©
- **Lighthouse**ï¼šGoogleæä¾›çš„æ€§èƒ½å®¡è®¡å·¥å…·
- **WebPageTest**ï¼šè¯¦ç»†çš„æ€§èƒ½åˆ†æ
- **Chrome DevTools**ï¼šæµè§ˆå™¨å†…ç½®çš„æ€§èƒ½åˆ†æå·¥å…·
- **Real User Monitoring (RUM)**ï¼šçœŸå®ç”¨æˆ·æ€§èƒ½æ•°æ®

### ç›‘æ§æŒ‡æ ‡
- **æŠ€æœ¯æŒ‡æ ‡**ï¼šåŠ è½½æ—¶é—´ã€æ¸²æŸ“æ—¶é—´ç­‰
- **ä¸šåŠ¡æŒ‡æ ‡**ï¼šè½¬åŒ–ç‡ã€ç”¨æˆ·è¡Œä¸ºç­‰
- **é”™è¯¯ç›‘æ§**ï¼šJavaScripté”™è¯¯ã€èµ„æºåŠ è½½å¤±è´¥ç­‰

## æœ€ä½³å®è·µ

### å¼€å‘é˜¶æ®µ
- åœ¨å¼€å‘è¿‡ç¨‹ä¸­æŒç»­å…³æ³¨æ€§èƒ½
- ä½¿ç”¨æ€§èƒ½é¢„ç®—æ¥çº¦æŸèµ„æºå¤§å°
- å®šæœŸè¿›è¡Œæ€§èƒ½æµ‹è¯•å’Œä¼˜åŒ–

### éƒ¨ç½²é˜¶æ®µ
- ä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·è¿›è¡Œæ€§èƒ½æ£€æŸ¥
- å»ºç«‹æ€§èƒ½å›å½’æµ‹è¯•
- ç›‘æ§ç”Ÿäº§ç¯å¢ƒçš„æ€§èƒ½è¡¨ç°

### æŒç»­ä¼˜åŒ–
- åˆ†æç”¨æˆ·è¡Œä¸ºæ•°æ®
- æ ¹æ®ä¸šåŠ¡éœ€æ±‚è°ƒæ•´ä¼˜åŒ–ç­–ç•¥
- å…³æ³¨æ–°æŠ€æœ¯å’Œä¼˜åŒ–æ–¹æ³•

## æ€§èƒ½ä¼˜åŒ–å®è·µ

### 1. èµ„æºåŠ è½½ä¼˜åŒ–

#### å›¾ç‰‡ä¼˜åŒ–
```html
<!-- å“åº”å¼å›¾ç‰‡ -->
<img src="small.jpg"
     srcset="medium.jpg 1000w, large.jpg 2000w"
     sizes="(max-width: 500px) 100vw, 50vw"
     alt="å“åº”å¼å›¾ç‰‡"
     loading="lazy">

<!-- ç°ä»£å›¾ç‰‡æ ¼å¼ -->
<picture>
  <source srcset="image.webp" type="image/webp">
  <source srcset="image.avif" type="image/avif">
  <img src="image.jpg" alt="ä¼˜åŒ–åçš„å›¾ç‰‡">
</picture>
```

#### èµ„æºé¢„åŠ è½½
```html
<!-- é¢„åŠ è½½å…³é”®èµ„æº -->
<link rel="preload" href="critical.css" as="style">
<link rel="preload" href="hero-image.jpg" as="image">
<link rel="preload" href="main.js" as="script">

<!-- é¢„è¿æ¥å¤–éƒ¨åŸŸå -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="dns-prefetch" href="https://api.example.com">

<!-- é¢„è·å–ä¸‹ä¸€é¡µèµ„æº -->
<link rel="prefetch" href="/next-page.html">
```

### 2. JavaScriptæ€§èƒ½ä¼˜åŒ–

#### ä»£ç åˆ†å‰²
```javascript
// åŠ¨æ€å¯¼å…¥å®ç°ä»£ç åˆ†å‰²
const LazyComponent = React.lazy(() => import('./LazyComponent'));

// è·¯ç”±çº§åˆ«çš„ä»£ç åˆ†å‰²
const Home = React.lazy(() => import('./pages/Home'));
const About = React.lazy(() => import('./pages/About'));

function App() {
  return (
    <Router>
      <Suspense fallback={<div>Loading...</div>}>
        <Routes>
          <Route path="/" element={<Home />} />
          <Route path="/about" element={<About />} />
        </Routes>
      </Suspense>
    </Router>
  );
}
```

#### é˜²æŠ–å’ŒèŠ‚æµ
```javascript
// é˜²æŠ–å‡½æ•°
function debounce(func, wait) {
  let timeout;
  return function executedFunction(...args) {
    const later = () => {
      clearTimeout(timeout);
      func(...args);
    };
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
  };
}

// èŠ‚æµå‡½æ•°
function throttle(func, limit) {
  let inThrottle;
  return function(...args) {
    if (!inThrottle) {
      func.apply(this, args);
      inThrottle = true;
      setTimeout(() => inThrottle = false, limit);
    }
  };
}

// ä½¿ç”¨ç¤ºä¾‹
const debouncedSearch = debounce((query) => {
  // æ‰§è¡Œæœç´¢
  searchAPI(query);
}, 300);

const throttledScroll = throttle(() => {
  // å¤„ç†æ»šåŠ¨äº‹ä»¶
  handleScroll();
}, 100);
```

#### è™šæ‹Ÿæ»šåŠ¨
```javascript
// è™šæ‹Ÿæ»šåŠ¨ç»„ä»¶ç¤ºä¾‹
function VirtualList({ items, itemHeight, containerHeight }) {
  const [scrollTop, setScrollTop] = useState(0);
  
  const visibleCount = Math.ceil(containerHeight / itemHeight);
  const startIndex = Math.floor(scrollTop / itemHeight);
  const endIndex = Math.min(startIndex + visibleCount, items.length);
  
  const visibleItems = items.slice(startIndex, endIndex);
  const offsetY = startIndex * itemHeight;
  
  return (
    <div 
      style={{ height: containerHeight, overflow: 'auto' }}
      onScroll={(e) => setScrollTop(e.target.scrollTop)}
    >
      <div style={{ height: items.length * itemHeight, position: 'relative' }}>
        <div style={{ transform: `translateY(${offsetY}px)` }}>
          {visibleItems.map((item, index) => (
            <div key={startIndex + index} style={{ height: itemHeight }}>
              {item.content}
            </div>
          ))}
        </div>
      </div>
    </div>
  );
}
```

### 3. CSSæ€§èƒ½ä¼˜åŒ–

#### å…³é”®CSSå†…è”
```html
<head>
  <style>
    /* å…³é”®CSSå†…è”åˆ°HTMLä¸­ */
    .header { background: #fff; height: 60px; }
    .hero { min-height: 400px; background: #f0f0f0; }
  </style>
  
  <!-- éå…³é”®CSSå¼‚æ­¥åŠ è½½ -->
  <link rel="preload" href="styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="styles.css"></noscript>
</head>
```

#### CSSä¼˜åŒ–æŠ€å·§
```css
/* é¿å…å¤æ‚é€‰æ‹©å™¨ */
/* ä¸å¥½ */
.container .sidebar .widget .title h3 { }

/* å¥½ */
.widget-title { }

/* ä½¿ç”¨transformå’Œopacityè¿›è¡ŒåŠ¨ç”» */
.element {
  transition: transform 0.3s ease, opacity 0.3s ease;
}

.element:hover {
  transform: translateY(-2px);
  opacity: 0.8;
}

/* ä½¿ç”¨containå±æ€§ä¼˜åŒ–æ¸²æŸ“ */
.card {
  contain: layout style paint;
}
```

### 4. ç¼“å­˜ç­–ç•¥

#### HTTPç¼“å­˜
```javascript
// Service Workerç¼“å­˜ç­–ç•¥
self.addEventListener('fetch', (event) => {
  if (event.request.destination === 'image') {
    // å›¾ç‰‡ä½¿ç”¨ç¼“å­˜ä¼˜å…ˆç­–ç•¥
    event.respondWith(
      caches.match(event.request).then((response) => {
        return response || fetch(event.request).then((fetchResponse) => {
          const responseClone = fetchResponse.clone();
          caches.open('images').then((cache) => {
            cache.put(event.request, responseClone);
          });
          return fetchResponse;
        });
      })
    );
  }
});
```

#### æµè§ˆå™¨ç¼“å­˜
```javascript
// æœ¬åœ°å­˜å‚¨ç¼“å­˜
class CacheManager {
  static set(key, data, ttl = 3600000) { // é»˜è®¤1å°æ—¶
    const item = {
      data,
      timestamp: Date.now(),
      ttl
    };
    localStorage.setItem(key, JSON.stringify(item));
  }
  
  static get(key) {
    const item = localStorage.getItem(key);
    if (!item) return null;
    
    const { data, timestamp, ttl } = JSON.parse(item);
    if (Date.now() - timestamp > ttl) {
      localStorage.removeItem(key);
      return null;
    }
    
    return data;
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const cachedData = CacheManager.get('user-data');
if (!cachedData) {
  const userData = await fetchUserData();
  CacheManager.set('user-data', userData, 1800000); // 30åˆ†é’Ÿ
}
```

## æ€§èƒ½ç›‘æ§å®ç°

### Web Vitalsç›‘æ§
```javascript
// ç›‘æ§Core Web Vitals
import { getCLS, getFID, getFCP, getLCP, getTTFB } from 'web-vitals';

function sendToAnalytics(metric) {
  // å‘é€åˆ°åˆ†ææœåŠ¡
  analytics.track('web_vital', {
    name: metric.name,
    value: metric.value,
    id: metric.id,
    url: window.location.href
  });
}

// ç›‘æ§å„é¡¹æŒ‡æ ‡
getCLS(sendToAnalytics);
getFID(sendToAnalytics);
getFCP(sendToAnalytics);
getLCP(sendToAnalytics);
getTTFB(sendToAnalytics);
```

### æ€§èƒ½APIä½¿ç”¨
```javascript
// ä½¿ç”¨Performance APIç›‘æ§
class PerformanceMonitor {
  static measurePageLoad() {
    window.addEventListener('load', () => {
      const navigation = performance.getEntriesByType('navigation')[0];
      const metrics = {
        dns: navigation.domainLookupEnd - navigation.domainLookupStart,
        tcp: navigation.connectEnd - navigation.connectStart,
        request: navigation.responseStart - navigation.requestStart,
        response: navigation.responseEnd - navigation.responseStart,
        dom: navigation.domContentLoadedEventEnd - navigation.responseEnd,
        load: navigation.loadEventEnd - navigation.loadEventStart
      };
      
      console.log('é¡µé¢åŠ è½½æ€§èƒ½æŒ‡æ ‡:', metrics);
    });
  }
  
  static measureResource() {
    const resources = performance.getEntriesByType('resource');
    resources.forEach(resource => {
      if (resource.transferSize > 100000) { // å¤§äº100KBçš„èµ„æº
        console.warn('å¤§èµ„æºæ–‡ä»¶:', resource.name, resource.transferSize);
      }
    });
  }
  
  static measureCustom(name, fn) {
    performance.mark(`${name}-start`);
    const result = fn();
    performance.mark(`${name}-end`);
    performance.measure(name, `${name}-start`, `${name}-end`);
    
    const measure = performance.getEntriesByName(name)[0];
    console.log(`${name} æ‰§è¡Œæ—¶é—´:`, measure.duration);
    
    return result;
  }
}
```

### é”™è¯¯ç›‘æ§
```javascript
// å…¨å±€é”™è¯¯ç›‘æ§
class ErrorMonitor {
  static init() {
    // JavaScripté”™è¯¯
    window.addEventListener('error', (event) => {
      this.reportError({
        type: 'javascript',
        message: event.message,
        filename: event.filename,
        lineno: event.lineno,
        colno: event.colno,
        stack: event.error?.stack
      });
    });
    
    // Promiseé”™è¯¯
    window.addEventListener('unhandledrejection', (event) => {
      this.reportError({
        type: 'promise',
        message: event.reason?.message || 'Unhandled Promise Rejection',
        stack: event.reason?.stack
      });
    });
    
    // èµ„æºåŠ è½½é”™è¯¯
    window.addEventListener('error', (event) => {
      if (event.target !== window) {
        this.reportError({
          type: 'resource',
          message: `Failed to load ${event.target.tagName}`,
          source: event.target.src || event.target.href
        });
      }
    }, true);
  }
  
  static reportError(error) {
    // å‘é€é”™è¯¯æŠ¥å‘Šåˆ°ç›‘æ§æœåŠ¡
    fetch('/api/errors', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        ...error,
        url: window.location.href,
        userAgent: navigator.userAgent,
        timestamp: Date.now()
      })
    });
  }
}
```

## æ€§èƒ½ä¼˜åŒ–å·¥å…·

### æ„å»ºä¼˜åŒ–
```javascript
// Webpackæ€§èƒ½ä¼˜åŒ–é…ç½®
module.exports = {
  optimization: {
    splitChunks: {
      chunks: 'all',
      cacheGroups: {
        vendor: {
          test: /[\\/]node_modules[\\/]/,
          name: 'vendors',
          chunks: 'all',
        },
        common: {
          name: 'common',
          minChunks: 2,
          chunks: 'all',
          enforce: true
        }
      }
    },
    usedExports: true,
    sideEffects: false
  },
  resolve: {
    alias: {
      '@': path.resolve(__dirname, 'src')
    }
  }
};
```

### æ€§èƒ½é¢„ç®—
```javascript
// æ€§èƒ½é¢„ç®—é…ç½®
module.exports = {
  performance: {
    maxAssetSize: 250000, // 250KB
    maxEntrypointSize: 250000,
    hints: 'warning'
  },
  // Lighthouse CIé…ç½®
  ci: {
    collect: {
      numberOfRuns: 3
    },
    assert: {
      assertions: {
        'categories:performance': ['warn', { minScore: 0.9 }],
        'categories:accessibility': ['error', { minScore: 0.9 }]
      }
    }
  }
};
```

é€šè¿‡ç³»ç»ŸåŒ–çš„æ€§èƒ½ä¼˜åŒ–å®è·µï¼Œå¯ä»¥æ˜¾è‘—æå‡Webåº”ç”¨çš„ç”¨æˆ·ä½“éªŒï¼Œé™ä½è·³å‡ºç‡ï¼Œæé«˜è½¬åŒ–ç‡å’Œç”¨æˆ·æ»¡æ„åº¦ã€‚ 