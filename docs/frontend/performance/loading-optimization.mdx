---
sidebar_position: 2
title: å‰ç«¯åŠ è½½ä¼˜åŒ–ç­–ç•¥è¯¦è§£
description: æ·±å…¥è§£æå‰ç«¯èµ„æºåŠ è½½ä¼˜åŒ–ã€ä»£ç åˆ†å‰²ã€ç¼“å­˜ç­–ç•¥ä¸æ€§èƒ½ç›‘æ§æœ€ä½³å®è·µ
authors: [Laby]
tags: [æ€§èƒ½ä¼˜åŒ–, åŠ è½½ä¼˜åŒ–, ä»£ç åˆ†å‰², ç¼“å­˜ç­–ç•¥, æ‡’åŠ è½½, é¢„åŠ è½½]
last_update:
  date: 2025-08-14
  author: Laby
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';

# å‰ç«¯åŠ è½½ä¼˜åŒ–ç­–ç•¥è¯¦è§£

åŠ è½½ä¼˜åŒ–æ˜¯å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒç¯èŠ‚ï¼Œç›´æ¥å½±å“ç”¨æˆ·çš„é¦–æ¬¡ä½“éªŒå’Œé¡µé¢å¯äº¤äº’æ—¶é—´ã€‚é€šè¿‡ç³»ç»ŸåŒ–çš„åŠ è½½ä¼˜åŒ–ç­–ç•¥ï¼Œå¯ä»¥æ˜¾è‘—æå‡é¡µé¢æ€§èƒ½ï¼Œæ”¹å–„ç”¨æˆ·ä½“éªŒï¼Œæé«˜ä¸šåŠ¡è½¬åŒ–ç‡ã€‚

:::tip æ ¸å¿ƒä»·å€¼
**åŠ è½½ä¼˜åŒ– = èµ„æºå‹ç¼© + ä»£ç åˆ†å‰² + ç¼“å­˜ç­–ç•¥ + é¢„åŠ è½½æŠ€æœ¯**
- ğŸ“¦ **èµ„æºå‹ç¼©**ï¼šå‡å°‘æ–‡ä»¶ä½“ç§¯ï¼Œé™ä½ä¼ è¾“æ—¶é—´
- âœ‚ï¸ **ä»£ç åˆ†å‰²**ï¼šæŒ‰éœ€åŠ è½½ï¼Œå‡å°‘åˆå§‹åŒ…å¤§å°
- ğŸ—„ï¸ **ç¼“å­˜ç­–ç•¥**ï¼šåˆç†åˆ©ç”¨æµè§ˆå™¨å’ŒCDNç¼“å­˜
- âš¡ **é¢„åŠ è½½æŠ€æœ¯**ï¼šæå‰åŠ è½½å…³é”®èµ„æº
- ğŸ”„ **æ‡’åŠ è½½**ï¼šå»¶è¿ŸåŠ è½½éå…³é”®èµ„æº
- ğŸ“Š **æ€§èƒ½ç›‘æ§**ï¼šæŒç»­ç›‘æ§å’Œä¼˜åŒ–åŠ è½½æ€§èƒ½
:::

## 1. èµ„æºä¼˜åŒ–ç­–ç•¥

### 1.1 èµ„æºå‹ç¼©ä¸åˆå¹¶

èµ„æºå‹ç¼©æ˜¯å‡å°‘æ–‡ä»¶ä½“ç§¯çš„åŸºç¡€æ‰‹æ®µï¼ŒåŒ…æ‹¬JavaScriptã€CSSã€å›¾ç‰‡ç­‰å„ç±»èµ„æºçš„ä¼˜åŒ–ã€‚

```mermaid
graph TB
    subgraph "èµ„æºä¼˜åŒ–æµç¨‹"
        A[åŸå§‹èµ„æº] --> B[å‹ç¼©å¤„ç†]
        B --> C[æ ¼å¼è½¬æ¢]
        C --> D[CDNåˆ†å‘]
        D --> E[æµè§ˆå™¨ç¼“å­˜]
        
        B --> B1[JavaScriptå‹ç¼©]
        B --> B2[CSSå‹ç¼©]
        B --> B3[å›¾ç‰‡å‹ç¼©]
        
        C --> C1[WebP/AVIF]
        C --> C2[Gzip/Brotli]
        C --> C3[Tree Shaking]
    end
```

#### èµ„æºå‹ç¼©å¯¹æ¯”è¡¨

| èµ„æºç±»å‹ | å‹ç¼©æŠ€æœ¯ | å‹ç¼©ç‡ | å·¥å…·æ¨è | é€‚ç”¨åœºæ™¯ |
|---------|----------|--------|----------|----------|
| **JavaScript** | Terser/UglifyJS | 60-80% | Webpack, Rollup | ç”Ÿäº§ç¯å¢ƒå¿…å¤‡ |
| **CSS** | cssnano/clean-css | 40-60% | PostCSS, Webpack | æ ·å¼æ–‡ä»¶ä¼˜åŒ– |
| **HTML** | html-minifier | 20-40% | Webpackæ’ä»¶ | æ¨¡æ¿æ–‡ä»¶å‹ç¼© |
| **å›¾ç‰‡** | WebP/AVIF | 25-50% | imagemin, squoosh | ç°ä»£æµè§ˆå™¨ |
| **å­—ä½“** | WOFF2 | 30-50% | fonttools | Webå­—ä½“ä¼˜åŒ– |

<Tabs>
<TabItem value="js-compression" label="JavaScriptå‹ç¼©">

#### JavaScriptå‹ç¼©ä¼˜åŒ–

```javascript title="Webpack JavaScriptå‹ç¼©é…ç½®"
const TerserPlugin = require('terser-webpack-plugin');
const CompressionPlugin = require('compression-webpack-plugin');

module.exports = {
  mode: 'production',
  optimization: {
    minimize: true,
    minimizer: [
      new TerserPlugin({
        terserOptions: {
          compress: {
            // ç§»é™¤consoleè¯­å¥
            drop_console: true,
            drop_debugger: true,
            // ç§»é™¤æœªä½¿ç”¨çš„ä»£ç 
            pure_funcs: ['console.log', 'console.info'],
            // å‹ç¼©æ¡ä»¶è¯­å¥
            conditionals: true,
            // ç§»é™¤æ­»ä»£ç 
            dead_code: true,
            // ä¼˜åŒ–ifè¯­å¥
            if_return: true,
            // åˆå¹¶å˜é‡å£°æ˜
            join_vars: true,
            // å‹ç¼©å¾ªç¯
            loops: true
          },
          mangle: {
            // æ··æ·†å˜é‡å
            toplevel: true,
            // ä¿ç•™ç±»å
            keep_classnames: true,
            // ä¿ç•™å‡½æ•°å
            keep_fnames: false
          },
          format: {
            // ç§»é™¤æ³¨é‡Š
            comments: false
          }
        },
        // å¹¶è¡Œå‹ç¼©
        parallel: true,
        // æå–æ³¨é‡Šåˆ°å•ç‹¬æ–‡ä»¶
        extractComments: false
      })
    ],
    // ä»£ç åˆ†å‰²
    splitChunks: {
      chunks: 'all',
      cacheGroups: {
        vendor: {
          test: /[\\/]node_modules[\\/]/,
          name: 'vendors',
          chunks: 'all',
          priority: 10
        },
        common: {
          name: 'common',
          minChunks: 2,
          chunks: 'all',
          priority: 5,
          reuseExistingChunk: true
        }
      }
    }
  },
  plugins: [
    // Gzipå‹ç¼©
    new CompressionPlugin({
      algorithm: 'gzip',
      test: /\.(js|css|html|svg)$/,
      threshold: 8192,
      minRatio: 0.8
    }),
    // Brotliå‹ç¼©
    new CompressionPlugin({
      filename: '[path][base].br',
      algorithm: 'brotliCompress',
      test: /\.(js|css|html|svg)$/,
      compressionOptions: {
        params: {
          [require('zlib').constants.BROTLI_PARAM_QUALITY]: 11,
        },
      },
      threshold: 8192,
      minRatio: 0.8
    })
  ]
};

// è‡ªå®šä¹‰å‹ç¼©å‡½æ•°
class CustomMinifier {
  static minifyJS(code, options = {}) {
    const defaultOptions = {
      removeComments: true,
      removeConsole: true,
      minifyVariables: true,
      ...options
    };
    
    let minified = code;
    
    if (defaultOptions.removeComments) {
      // ç§»é™¤å•è¡Œæ³¨é‡Š
      minified = minified.replace(/\/\/.*$/gm, '');
      // ç§»é™¤å¤šè¡Œæ³¨é‡Š
      minified = minified.replace(/\/\*[\s\S]*?\*\//g, '');
    }
    
    if (defaultOptions.removeConsole) {
      // ç§»é™¤consoleè¯­å¥
      minified = minified.replace(/console\.(log|info|warn|error|debug)\([^)]*\);?/g, '');
    }
    
    if (defaultOptions.minifyVariables) {
      // ç®€å•çš„å˜é‡åå‹ç¼©ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ä¸“ä¸šå·¥å…·ï¼‰
      const varMap = new Map();
      let varCounter = 0;
      
      minified = minified.replace(/\b(var|let|const)\s+([a-zA-Z_$][a-zA-Z0-9_$]*)/g, (match, keyword, varName) => {
        if (!varMap.has(varName)) {
          varMap.set(varName, `v${varCounter++}`);
        }
        return `${keyword} ${varMap.get(varName)}`;
      });
    }
    
    // ç§»é™¤å¤šä½™ç©ºç™½
    minified = minified.replace(/\s+/g, ' ').trim();
    
    return minified;
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const originalCode = `
// è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹å‡½æ•°
function calculateTotal(items) {
  console.log('Calculating total for items:', items);
  let total = 0;
  for (let i = 0; i < items.length; i++) {
    total += items[i].price;
  }
  return total;
}
`;

const minifiedCode = CustomMinifier.minifyJS(originalCode);
console.log('å‹ç¼©åä»£ç :', minifiedCode);
```

</TabItem>
<TabItem value="css-compression" label="CSSå‹ç¼©">

#### CSSå‹ç¼©ä¼˜åŒ–

```javascript title="CSSå‹ç¼©é…ç½®ä¸å®ç°"
// PostCSSé…ç½®
module.exports = {
  plugins: [
    require('autoprefixer'),
    require('cssnano')({
      preset: ['default', {
        // ç§»é™¤æ³¨é‡Š
        discardComments: {
          removeAll: true
        },
        // ç§»é™¤æœªä½¿ç”¨çš„è§„åˆ™
        discardUnused: true,
        // åˆå¹¶ç›¸åŒè§„åˆ™
        mergeRules: true,
        // å‹ç¼©é¢œè‰²å€¼
        colormin: true,
        // å‹ç¼©å­—ä½“
        minifyFontValues: true,
        // å‹ç¼©é€‰æ‹©å™¨
        minifySelectors: true,
        // æ ‡å‡†åŒ–ç©ºç™½
        normalizeWhitespace: true,
        // ç§»é™¤é‡å¤è§„åˆ™
        uniqueSelectors: true
      }]
    })
  ]
};

// Webpack CSSå‹ç¼©é…ç½®
const MiniCssExtractPlugin = require('mini-css-extract-plugin');
const CssMinimizerPlugin = require('css-minimizer-webpack-plugin');

module.exports = {
  module: {
    rules: [
      {
        test: /\.css$/,
        use: [
          MiniCssExtractPlugin.loader,
          'css-loader',
          {
            loader: 'postcss-loader',
            options: {
              postcssOptions: {
                plugins: [
                  ['autoprefixer'],
                  ['cssnano', { preset: 'default' }]
                ]
              }
            }
          }
        ]
      }
    ]
  },
  plugins: [
    new MiniCssExtractPlugin({
      filename: '[name].[contenthash].css',
      chunkFilename: '[id].[contenthash].css'
    })
  ],
  optimization: {
    minimizer: [
      new CssMinimizerPlugin({
        minimizerOptions: {
          preset: [
            'default',
            {
              discardComments: { removeAll: true },
              normalizeUnicode: false
            }
          ]
        }
      })
    ]
  }
};

// è‡ªå®šä¹‰CSSå‹ç¼©å·¥å…·
class CSSMinifier {
  static minifyCSS(css) {
    return css
      // ç§»é™¤æ³¨é‡Š
      .replace(/\/\*[\s\S]*?\*\//g, '')
      // ç§»é™¤å¤šä½™ç©ºç™½
      .replace(/\s+/g, ' ')
      // ç§»é™¤åˆ†å·å‰çš„ç©ºæ ¼
      .replace(/\s*;\s*/g, ';')
      // ç§»é™¤èŠ±æ‹¬å·å‰åçš„ç©ºæ ¼
      .replace(/\s*{\s*/g, '{')
      .replace(/\s*}\s*/g, '}')
      // ç§»é™¤å†’å·åçš„ç©ºæ ¼
      .replace(/:\s+/g, ':')
      // ç§»é™¤é€—å·åçš„ç©ºæ ¼
      .replace(/,\s+/g, ',')
      // å‹ç¼©é¢œè‰²å€¼
      .replace(/#([0-9a-f])\1([0-9a-f])\2([0-9a-f])\3/gi, '#$1$2$3')
      // ç§»é™¤0å€¼çš„å•ä½
      .replace(/\b0(px|em|rem|%|vh|vw|pt|pc|in|cm|mm|ex|ch|vmin|vmax)\b/g, '0')
      // å‹ç¼©margin/paddingç®€å†™
      .replace(/margin:\s*0\s+0\s+0\s+0/g, 'margin:0')
      .replace(/padding:\s*0\s+0\s+0\s+0/g, 'padding:0')
      .trim();
  }
  
  static optimizeSelectors(css) {
    // åˆå¹¶ç›¸åŒçš„é€‰æ‹©å™¨
    const rules = new Map();
    
    css.replace(/([^{}]+)\{([^{}]*)\}/g, (match, selector, declarations) => {
      const cleanSelector = selector.trim();
      const cleanDeclarations = declarations.trim();
      
      if (rules.has(cleanDeclarations)) {
        rules.set(cleanDeclarations, rules.get(cleanDeclarations) + ',' + cleanSelector);
      } else {
        rules.set(cleanDeclarations, cleanSelector);
      }
    });
    
    let optimizedCSS = '';
    rules.forEach((selectors, declarations) => {
      optimizedCSS += `${selectors}{${declarations}}`;
    });
    
    return optimizedCSS;
  }
}

// å…³é”®CSSæå–
class CriticalCSSExtractor {
  static extractCritical(html, css) {
    const usedSelectors = new Set();
    const dom = new DOMParser().parseFromString(html, 'text/html');
    
    // è§£æCSSè§„åˆ™
    const styleSheet = new CSSStyleSheet();
    styleSheet.replaceSync(css);
    
    for (const rule of styleSheet.cssRules) {
      if (rule.type === CSSRule.STYLE_RULE) {
        try {
          if (dom.querySelector(rule.selectorText)) {
            usedSelectors.add(rule.cssText);
          }
        } catch (e) {
          // å¿½ç•¥æ— æ•ˆé€‰æ‹©å™¨
        }
      }
    }
    
    return Array.from(usedSelectors).join('\n');
  }
}
```

</TabItem>
<TabItem value="image-optimization" label="å›¾ç‰‡ä¼˜åŒ–">

#### å›¾ç‰‡ä¼˜åŒ–ç­–ç•¥

```javascript title="å›¾ç‰‡ä¼˜åŒ–å®Œæ•´æ–¹æ¡ˆ"
// å›¾ç‰‡å‹ç¼©é…ç½®
const ImageMinimizerPlugin = require('image-minimizer-webpack-plugin');

module.exports = {
  module: {
    rules: [
      {
        test: /\.(jpe?g|png|gif|svg)$/i,
        type: 'asset',
        parser: {
          dataUrlCondition: {
            maxSize: 8 * 1024 // 8KBä»¥ä¸‹è½¬ä¸ºbase64
          }
        },
        generator: {
          filename: 'images/[name].[hash:8][ext]'
        }
      }
    ]
  },
  plugins: [
    new ImageMinimizerPlugin({
      minimizer: {
        implementation: ImageMinimizerPlugin.imageminMinify,
        options: {
          plugins: [
            ['imagemin-mozjpeg', { quality: 80 }],
            ['imagemin-pngquant', { quality: [0.6, 0.8] }],
            ['imagemin-svgo', {
              plugins: [
                { name: 'removeViewBox', active: false },
                { name: 'removeDimensions', active: true }
              ]
            }]
          ]
        }
      },
      generator: [
        {
          type: 'asset',
          preset: 'webp-custom-name',
          implementation: ImageMinimizerPlugin.imageminGenerate,
          options: {
            plugins: ['imagemin-webp']
          }
        }
      ]
    })
  ]
};

// å“åº”å¼å›¾ç‰‡ç»„ä»¶
class ResponsiveImage {
  constructor(options) {
    this.src = options.src;
    this.alt = options.alt;
    this.sizes = options.sizes || '100vw';
    this.loading = options.loading || 'lazy';
    this.formats = options.formats || ['webp', 'jpg'];
  }
  
  generateSrcSet(basePath, sizes) {
    return sizes.map(size => `${basePath}-${size}w.jpg ${size}w`).join(', ');
  }
  
  generatePicture() {
    const basePath = this.src.replace(/\.[^/.]+$/, '');
    const sizes = [400, 800, 1200, 1600];
    
    let pictureHTML = '<picture>';
    
    // æ·»åŠ ç°ä»£æ ¼å¼
    this.formats.forEach(format => {
      if (format !== 'jpg' && format !== 'jpeg') {
        const srcSet = sizes.map(size => 
          `${basePath}-${size}w.${format} ${size}w`
        ).join(', ');
        
        pictureHTML += `<source srcset="${srcSet}" sizes="${this.sizes}" type="image/${format}">`;
      }
    });
    
    // æ·»åŠ fallback
    const fallbackSrcSet = this.generateSrcSet(basePath, sizes);
    pictureHTML += `<img src="${basePath}-800w.jpg" srcset="${fallbackSrcSet}" sizes="${this.sizes}" alt="${this.alt}" loading="${this.loading}">`;
    pictureHTML += '</picture>';
    
    return pictureHTML;
  }
}

// å›¾ç‰‡æ‡’åŠ è½½å®ç°
class LazyImageLoader {
  constructor(options = {}) {
    this.rootMargin = options.rootMargin || '50px';
    this.threshold = options.threshold || 0.1;
    this.loadingClass = options.loadingClass || 'lazy-loading';
    this.loadedClass = options.loadedClass || 'lazy-loaded';
    this.errorClass = options.errorClass || 'lazy-error';
    
    this.observer = new IntersectionObserver(
      this.handleIntersection.bind(this),
      {
        rootMargin: this.rootMargin,
        threshold: this.threshold
      }
    );
  }
  
  observe(img) {
    this.observer.observe(img);
  }
  
  handleIntersection(entries) {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        this.loadImage(entry.target);
        this.observer.unobserve(entry.target);
      }
    });
  }
  
  loadImage(img) {
    img.classList.add(this.loadingClass);
    
    const imageLoader = new Image();
    
    imageLoader.onload = () => {
      img.src = img.dataset.src;
      img.classList.remove(this.loadingClass);
      img.classList.add(this.loadedClass);
      
      // å¦‚æœæ˜¯pictureå…ƒç´ ï¼Œå¤„ç†srcset
      if (img.dataset.srcset) {
        img.srcset = img.dataset.srcset;
      }
    };
    
    imageLoader.onerror = () => {
      img.classList.remove(this.loadingClass);
      img.classList.add(this.errorClass);
    };
    
    imageLoader.src = img.dataset.src;
  }
  
  // æ‰¹é‡åˆå§‹åŒ–
  static init(selector = 'img[data-src]', options = {}) {
    const loader = new LazyImageLoader(options);
    const images = document.querySelectorAll(selector);
    
    images.forEach(img => loader.observe(img));
    
    return loader;
  }
}

// å›¾ç‰‡æ ¼å¼æ£€æµ‹å’Œé€‰æ‹©
class ImageFormatDetector {
  static supportsWebP() {
    return new Promise(resolve => {
      const webP = new Image();
      webP.onload = webP.onerror = () => {
        resolve(webP.height === 2);
      };
      webP.src = 'data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA';
    });
  }
  
  static supportsAVIF() {
    return new Promise(resolve => {
      const avif = new Image();
      avif.onload = avif.onerror = () => {
        resolve(avif.height === 2);
      };
      avif.src = 'data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgABogQEAwgMg8f8D///8WfhwB8+ErK42A=';
    });
  }
  
  static async getBestFormat(formats = ['avif', 'webp', 'jpg']) {
    const support = await Promise.all([
      this.supportsAVIF(),
      this.supportsWebP()
    ]);
    
    if (support[0] && formats.includes('avif')) return 'avif';
    if (support[1] && formats.includes('webp')) return 'webp';
    return 'jpg';
  }
}

// ä½¿ç”¨ç¤ºä¾‹
document.addEventListener('DOMContentLoaded', async () => {
  // åˆå§‹åŒ–æ‡’åŠ è½½
  LazyImageLoader.init('img[data-src]', {
    rootMargin: '100px',
    loadingClass: 'img-loading',
    loadedClass: 'img-loaded'
  });
  
  // æ£€æµ‹æœ€ä½³å›¾ç‰‡æ ¼å¼
  const bestFormat = await ImageFormatDetector.getBestFormat();
  console.log('æœ€ä½³å›¾ç‰‡æ ¼å¼:', bestFormat);
  
  // åŠ¨æ€åˆ›å»ºå“åº”å¼å›¾ç‰‡
  const responsiveImg = new ResponsiveImage({
    src: '/images/hero.jpg',
    alt: 'è‹±é›„å›¾ç‰‡',
    sizes: '(max-width: 768px) 100vw, 50vw',
    formats: [bestFormat, 'jpg']
  });
  
  document.getElementById('hero-container').innerHTML = responsiveImg.generatePicture();
});
```

</TabItem>
</Tabs>

### CSSå‹ç¼©
- ç§»é™¤ä¸å¿…è¦çš„ç©ºæ ¼å’Œæ³¨é‡Š
- åˆå¹¶ç›¸åŒçš„CSSè§„åˆ™
- ä½¿ç”¨CSSå‹ç¼©å·¥å…·å¦‚cssnano

### å›¾ç‰‡ä¼˜åŒ–
- **æ ¼å¼é€‰æ‹©**ï¼šWebPã€AVIFç­‰ç°ä»£æ ¼å¼
- **å“åº”å¼å›¾ç‰‡**ï¼šä½¿ç”¨srcsetå’Œsizeså±æ€§
- **æ‡’åŠ è½½**ï¼šå»¶è¿ŸåŠ è½½éé¦–å±å›¾ç‰‡

```html
<!-- å“åº”å¼å›¾ç‰‡ç¤ºä¾‹ -->
<img src="image-800w.jpg" 
     srcset="image-400w.jpg 400w,
             image-800w.jpg 800w,
             image-1200w.jpg 1200w"
     sizes="(max-width: 600px) 400px,
            (max-width: 1200px) 800px,
            1200px"
     alt="å“åº”å¼å›¾ç‰‡">
```

## ä»£ç åˆ†å‰²

### è·¯ç”±çº§åˆ†å‰²
```javascript
// React Routerä»£ç åˆ†å‰²
import { lazy, Suspense } from 'react';

const Home = lazy(() => import('./pages/Home'));
const About = lazy(() => import('./pages/About'));

function App() {
  return (
    <Suspense fallback={<div>Loading...</div>}>
      <Routes>
        <Route path="/" element={<Home />} />
        <Route path="/about" element={<About />} />
      </Routes>
    </Suspense>
  );
}
```

### ç»„ä»¶çº§åˆ†å‰²
```javascript
// åŠ¨æ€å¯¼å…¥ç»„ä»¶
const HeavyComponent = lazy(() => import('./HeavyComponent'));

function MyComponent() {
  const [showHeavy, setShowHeavy] = useState(false);
  
  return (
    <div>
      <button onClick={() => setShowHeavy(true)}>
        åŠ è½½é‡å‹ç»„ä»¶
      </button>
      {showHeavy && (
        <Suspense fallback={<div>åŠ è½½ä¸­...</div>}>
          <HeavyComponent />
        </Suspense>
      )}
    </div>
  );
}
```

## ç¼“å­˜ç­–ç•¥

### æµè§ˆå™¨ç¼“å­˜
```javascript
// Service Workerç¼“å­˜ç­–ç•¥
const CACHE_NAME = 'my-app-cache-v1';
const urlsToCache = [
  '/',
  '/styles/main.css',
  '/scripts/main.js'
];

self.addEventListener('install', event => {
  event.waitUntil(
    caches.open(CACHE_NAME)
      .then(cache => cache.addAll(urlsToCache))
  );
});
```

### HTTPç¼“å­˜å¤´
```nginx
# Nginxç¼“å­˜é…ç½®
location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
    expires 1y;
    add_header Cache-Control "public, immutable";
}

location ~* \.(html)$ {
    expires 1h;
    add_header Cache-Control "public, must-revalidate";
}
```

## é¢„åŠ è½½ä¸é¢„å–

### å…³é”®èµ„æºé¢„åŠ è½½
```html
<!-- é¢„åŠ è½½å…³é”®CSS -->
<link rel="preload" href="critical.css" as="style" onload="this.onload=null;this.rel='stylesheet'">

<!-- é¢„åŠ è½½å­—ä½“ -->
<link rel="preload" href="font.woff2" as="font" type="font/woff2" crossorigin>

<!-- DNSé¢„è§£æ -->
<link rel="dns-prefetch" href="//cdn.example.com">
```

### é¢„å–éå…³é”®èµ„æº
```html
<!-- é¢„å–ä¸‹ä¸€é¡µèµ„æº -->
<link rel="prefetch" href="/next-page">

<!-- é¢„å–å›¾ç‰‡ -->
<link rel="prefetch" href="hero-image.jpg">
```

## æ‡’åŠ è½½å®ç°

### å›¾ç‰‡æ‡’åŠ è½½
```javascript
// Intersection Observer API
const imageObserver = new IntersectionObserver((entries, observer) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      const img = entry.target;
      img.src = img.dataset.src;
      img.classList.remove('lazy');
      observer.unobserve(img);
    }
  });
});

document.querySelectorAll('img[data-src]').forEach(img => {
  imageObserver.observe(img);
});
```

### ç»„ä»¶æ‡’åŠ è½½
```javascript
// Reactç»„ä»¶æ‡’åŠ è½½
import { lazy, Suspense } from 'react';

const LazyComponent = lazy(() => 
  import('./LazyComponent').then(module => ({
    default: module.LazyComponent
  }))
);

function App() {
  return (
    <Suspense fallback={<div>Loading...</div>}>
      <LazyComponent />
    </Suspense>
  );
}
```

## å…³é”®æ¸²æŸ“è·¯å¾„ä¼˜åŒ–

### CSSä¼˜åŒ–
```html
<!-- å†…è”å…³é”®CSS -->
<style>
  .critical-styles { /* å…³é”®æ ·å¼ */ }
</style>

<!-- å¼‚æ­¥åŠ è½½éå…³é”®CSS -->
<link rel="preload" href="non-critical.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
```

### JavaScriptä¼˜åŒ–
```html
<!-- å¼‚æ­¥åŠ è½½JavaScript -->
<script src="app.js" async></script>

<!-- å»¶è¿ŸåŠ è½½JavaScript -->
<script src="analytics.js" defer></script>
```

## æ€§èƒ½ç›‘æ§

### åŠ è½½æ—¶é—´ç›‘æ§
```javascript
// ç›‘æ§é¡µé¢åŠ è½½æ€§èƒ½
window.addEventListener('load', () => {
  const navigation = performance.getEntriesByType('navigation')[0];
  
  console.log('é¡µé¢åŠ è½½æ—¶é—´:', navigation.loadEventEnd - navigation.loadEventStart);
  console.log('DOMå†…å®¹åŠ è½½æ—¶é—´:', navigation.domContentLoadedEventEnd - navigation.domContentLoadedEventStart);
});
```

### èµ„æºåŠ è½½ç›‘æ§
```javascript
// ç›‘æ§èµ„æºåŠ è½½æ€§èƒ½
const observer = new PerformanceObserver((list) => {
  list.getEntries().forEach((entry) => {
    if (entry.entryType === 'resource') {
      console.log(`${entry.name} åŠ è½½æ—¶é—´:`, entry.duration);
    }
  });
});

observer.observe({ entryTypes: ['resource'] });
``` 