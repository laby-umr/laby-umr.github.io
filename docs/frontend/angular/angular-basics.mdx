---
sidebar_position: 1
title: AngularåŸºç¡€æ•™ç¨‹
description: Angularæ¡†æ¶åŸºç¡€æ¦‚å¿µã€æ¶æ„ä¸æœ€ä½³å®è·µæŒ‡å—
authors: [Laby]
tags: [Angular, å‰ç«¯æ¡†æ¶, TypeScript, ç»„ä»¶, æŒ‡ä»¤]
last_update:
  date: 2025-08-15
  author: Laby
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';

# AngularåŸºç¡€æ•™ç¨‹

Angularæ˜¯ç”±Googleç»´æŠ¤çš„ä¸€ä¸ªå¼€æºå‰ç«¯æ¡†æ¶ï¼Œå®ƒæä¾›äº†å®Œæ•´çš„è§£å†³æ–¹æ¡ˆç”¨äºæ„å»ºå¤æ‚çš„ä¼ä¸šçº§å•é¡µé¢åº”ç”¨ç¨‹åº(SPA)ã€‚Angularé‡‡ç”¨TypeScriptè¯­è¨€å¼€å‘ï¼Œæä¾›äº†ç»„ä»¶åŒ–æ¶æ„ã€ä¾èµ–æ³¨å…¥ã€å“åº”å¼ç¼–ç¨‹å’Œå…¨é¢çš„å·¥å…·ç”Ÿæ€ç³»ç»Ÿã€‚

:::tip æ ¸å¿ƒä»·å€¼
**Angularæ¡†æ¶ä¼˜åŠ¿**
- ğŸ—ï¸ **å®Œæ•´æ¡†æ¶**ï¼šæä¾›ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆï¼Œä¸éœ€è¦é€‰æ‹©é¢å¤–åº“
- ğŸ“¦ **ç»„ä»¶åŒ–æ¶æ„**ï¼šåŸºäºç»„ä»¶çš„æ¨¡å—åŒ–å¼€å‘æ–¹å¼
- ğŸ§° **ä¾èµ–æ³¨å…¥**ï¼šå¼ºå¤§çš„ä¾èµ–æ³¨å…¥ç³»ç»Ÿç®€åŒ–æµ‹è¯•å’Œç®¡ç†
- ğŸ“‹ **TypeScriptæ”¯æŒ**ï¼šå†…ç½®TypeScriptæ”¯æŒï¼Œæä¾›ç±»å‹å®‰å…¨
- ğŸ› ï¸ **å·¥å…·ç”Ÿæ€**ï¼šAngular CLIæä¾›å®Œå–„çš„å¼€å‘å·¥å…·é“¾
- ğŸ”„ **åŒå‘ç»‘å®š**ï¼šçµæ´»çš„æ•°æ®ç»‘å®šæœºåˆ¶
:::

## 1. Angularæ¶æ„æ¦‚è§ˆ

Angularåº”ç”¨æ˜¯ç”±æ¨¡å—ã€ç»„ä»¶å’ŒæœåŠ¡ç­‰æ„å»ºå—ç»„æˆçš„ï¼š

```mermaid
graph TD
    A[Angularåº”ç”¨] --> B[æ¨¡å—NgModule]
    B --> C[ç»„ä»¶Component]
    B --> D[æœåŠ¡Service]
    B --> E[æŒ‡ä»¤Directive]
    B --> F[ç®¡é“Pipe]
    
    C --> G[æ¨¡æ¿Template]
    C --> H[ç±»Class]
    C --> I[å…ƒæ•°æ®Metadata]
    
    D --> J[ä¾èµ–æ³¨å…¥DI]
    
    subgraph "æ•°æ®æµå‘"
        K["è¾“å…¥å±æ€§@Input"]
        L["è¾“å‡ºäº‹ä»¶@Output"]
        K --> C
        C --> L
    end
    
    subgraph "å˜æ›´æ£€æµ‹"
        M[Zone.js] --> N[å˜æ›´æ£€æµ‹å™¨]
        N --> O[DOMæ›´æ–°]
    end
```

### 1.1 æ ¸å¿ƒæ„å»ºå—

- **æ¨¡å—(NgModule)**: ç›¸å…³ç»„ä»¶ã€æŒ‡ä»¤ã€ç®¡é“å’ŒæœåŠ¡çš„å®¹å™¨
- **ç»„ä»¶(Component)**: æ§åˆ¶è§†å›¾çš„ç±»ï¼Œè´Ÿè´£æ•°æ®å’ŒUIäº¤äº’
- **æ¨¡æ¿(Template)**: å®šä¹‰ç»„ä»¶è§†å›¾çš„HTML
- **å…ƒæ•°æ®(Metadata)**: é€šè¿‡è£…é¥°å™¨å®šä¹‰ç±»çš„è¡Œä¸º
- **æœåŠ¡(Service)**: å…±äº«æ•°æ®å’ŒåŠŸèƒ½çš„å¯å¤ç”¨ç±»
- **ä¾èµ–æ³¨å…¥(DI)**: ç®¡ç†ç»„ä»¶å’ŒæœåŠ¡ä¾èµ–å…³ç³»çš„è®¾è®¡æ¨¡å¼

## 2. å¼€å§‹ä½¿ç”¨Angular

### 2.1 å®‰è£…Angular CLI

Angular CLIæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºåˆå§‹åŒ–ã€å¼€å‘ã€æ„å»ºå’Œç»´æŠ¤Angularåº”ç”¨ï¼š

```bash
# å®‰è£…Angular CLI
npm install -g @angular/cli

# æŸ¥çœ‹ç‰ˆæœ¬
ng version
```

### 2.2 åˆ›å»ºæ–°é¡¹ç›®

ä½¿ç”¨Angular CLIåˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ï¼š

```bash
# åˆ›å»ºæ–°é¡¹ç›®
ng new my-angular-app

# é€‰é¡¹è¯´æ˜:
# --strict: å¯ç”¨ä¸¥æ ¼æ¨¡å¼
# --routing: æ·»åŠ è·¯ç”±æ¨¡å—
# --style=scss: ä½¿ç”¨SCSSé¢„å¤„ç†å™¨

cd my-angular-app
ng serve
```

### 2.3 Angularé¡¹ç›®ç»“æ„

```
my-angular-app/
â”œâ”€â”€ src/                     # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ app/                 # åº”ç”¨ç¨‹åºç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ app.component.ts # æ ¹ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ app.component.html
â”‚   â”‚   â”œâ”€â”€ app.component.scss
â”‚   â”‚   â”œâ”€â”€ app.component.spec.ts
â”‚   â”‚   â”œâ”€â”€ app.module.ts    # æ ¹æ¨¡å—
â”‚   â”‚   â””â”€â”€ app-routing.module.ts
â”‚   â”œâ”€â”€ assets/              # é™æ€èµ„æº
â”‚   â”œâ”€â”€ environments/        # ç¯å¢ƒé…ç½®
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â”œâ”€â”€ index.html           # ä¸»HTMLæ–‡ä»¶
â”‚   â”œâ”€â”€ main.ts              # åº”ç”¨å…¥å£ç‚¹
â”‚   â”œâ”€â”€ polyfills.ts         # æµè§ˆå™¨å…¼å®¹æ€§è„šæœ¬
â”‚   â””â”€â”€ styles.scss          # å…¨å±€æ ·å¼
â”œâ”€â”€ angular.json             # Angularå·¥ä½œåŒºé…ç½®
â”œâ”€â”€ package.json             # NPMä¾èµ–
â”œâ”€â”€ tsconfig.json            # TypeScripté…ç½®
â””â”€â”€ README.md
```

## 3. ç»„ä»¶åŸºç¡€

ç»„ä»¶æ˜¯Angularåº”ç”¨çš„æ ¸å¿ƒæ„å»ºå—ï¼Œæ¯ä¸ªç»„ä»¶åŒ…å«ï¼š
- ä¸€ä¸ªHTMLæ¨¡æ¿å®šä¹‰è§†å›¾
- ä¸€ä¸ªTypeScriptç±»æ§åˆ¶é€»è¾‘å’Œæ•°æ®
- CSSæ ·å¼å®šä¹‰å¤–è§‚

### 3.1 åˆ›å»ºç»„ä»¶

ä½¿ç”¨Angular CLIåˆ›å»ºç»„ä»¶ï¼š

```bash
ng generate component hero
# ç®€å†™å½¢å¼
ng g c hero
```

ç»„ä»¶æ–‡ä»¶ç»“æ„ï¼š

```
src/app/hero/
â”œâ”€â”€ hero.component.ts       # ç»„ä»¶ç±»å’Œå…ƒæ•°æ®
â”œâ”€â”€ hero.component.html     # HTMLæ¨¡æ¿
â”œâ”€â”€ hero.component.scss     # æ ·å¼(SCSS)
â””â”€â”€ hero.component.spec.ts  # å•å…ƒæµ‹è¯•
```

åŸºæœ¬ç»„ä»¶ç»“æ„ï¼š

```typescript title="hero.component.ts"
import { Component, OnInit } from '@angular/core';

@Component({
  selector: 'app-hero',
  templateUrl: './hero.component.html',
  styleUrls: ['./hero.component.scss']
})
export class HeroComponent implements OnInit {
  // ç»„ä»¶å±æ€§
  name: string = 'Windstorm';
  
  constructor() { }

  ngOnInit(): void {
    // ç»„ä»¶åˆå§‹åŒ–é€»è¾‘
  }
  
  // ç»„ä»¶æ–¹æ³•
  greet(): string {
    return `Hello, ${this.name}!`;
  }
}
```

### 3.2 ç»„ä»¶æ¨¡æ¿è¯­æ³•

Angularæ¨¡æ¿æ”¯æŒå¤šç§ç»‘å®šè¯­æ³•ï¼š

```html title="hero.component.html"
<div class="hero-card">
  <!-- æ’å€¼è¡¨è¾¾å¼ -->
  <h2>{{ name }}</h2>
  
  <!-- å±æ€§ç»‘å®š -->
  <img [src]="heroImageUrl" [alt]="name">
  
  <!-- äº‹ä»¶ç»‘å®š -->
  <button (click)="onSelect()">é€‰æ‹©</button>
  
  <!-- åŒå‘ç»‘å®š (éœ€è¦FormsModule) -->
  <input [(ngModel)]="name">
  
  <!-- æ¨¡æ¿å¼•ç”¨å˜é‡ -->
  <input #heroInput>
  <button (click)="updateName(heroInput.value)">æ›´æ–°åç§°</button>
  
  <!-- æ¡ä»¶æ¸²æŸ“ -->
  <div *ngIf="isSelected">å·²é€‰æ‹©!</div>
  
  <!-- åˆ—è¡¨æ¸²æŸ“ -->
  <ul>
    <li *ngFor="let power of powers; let i = index">
      {{ i + 1 }}. {{ power }}
    </li>
  </ul>
  
  <!-- ç±»ç»‘å®š -->
  <div [class.selected]="isSelected">çŠ¶æ€å±•ç¤º</div>
  
  <!-- æ ·å¼ç»‘å®š -->
  <div [style.color]="isActive ? 'green' : 'red'">çŠ¶æ€é¢œè‰²</div>
</div>
```

### 3.3 ç”Ÿå‘½å‘¨æœŸé’©å­

Angularç»„ä»¶æœ‰ä¸€ç³»åˆ—ç”Ÿå‘½å‘¨æœŸé’©å­ï¼š

| é’©å­ | æ—¶æœº | ç”¨é€” |
|------|------|------|
| `ngOnChanges` | è¾“å…¥å±æ€§å˜åŒ–æ—¶ | å“åº”è¾“å…¥å±æ€§å˜åŒ– |
| `ngOnInit` | ç»„ä»¶åˆå§‹åŒ–æ—¶ | æ‰§è¡Œåˆå§‹åŒ–é€»è¾‘ |
| `ngDoCheck` | å˜æ›´æ£€æµ‹è¿è¡Œæ—¶ | è‡ªå®šä¹‰å˜æ›´æ£€æµ‹ |
| `ngAfterContentInit` | å†…å®¹æŠ•å½±åˆå§‹åŒ–å | å¤„ç†æŠ•å½±å†…å®¹ |
| `ngAfterContentChecked` | å†…å®¹æŠ•å½±æ£€æŸ¥å | æ£€æŸ¥æŠ•å½±å†…å®¹å˜åŒ– |
| `ngAfterViewInit` | è§†å›¾åˆå§‹åŒ–å | å¤„ç†å­è§†å›¾é€»è¾‘ |
| `ngAfterViewChecked` | è§†å›¾æ£€æŸ¥å | æ£€æŸ¥è§†å›¾å˜åŒ– |
| `ngOnDestroy` | ç»„ä»¶é”€æ¯å‰ | æ¸…ç†èµ„æº |

ç¤ºä¾‹å®ç°ï¼š

```typescript
import { Component, OnInit, OnDestroy, OnChanges, SimpleChanges, Input } from '@angular/core';

@Component({
  selector: 'app-lifecycle',
  template: `<div>{{ data }}</div>`
})
export class LifecycleComponent implements OnInit, OnChanges, OnDestroy {
  @Input() data: string;
  
  constructor() {
    console.log('Constructor called');
  }
  
  ngOnChanges(changes: SimpleChanges) {
    console.log('ngOnChanges called', changes);
  }
  
  ngOnInit() {
    console.log('ngOnInit called');
  }
  
  ngOnDestroy() {
    console.log('ngOnDestroy called');
    // æ¸…ç†ä»£ç ï¼ˆå–æ¶ˆè®¢é˜…ã€æ¸…é™¤å®šæ—¶å™¨ç­‰ï¼‰
  }
}
```

## 4. æŒ‡ä»¤åŸºç¡€

Angularæœ‰ä¸‰ç§ç±»å‹çš„æŒ‡ä»¤ï¼š

1. **ç»„ä»¶æŒ‡ä»¤**: å¸¦æœ‰æ¨¡æ¿çš„æŒ‡ä»¤
2. **ç»“æ„å‹æŒ‡ä»¤**: ä¿®æ”¹DOMç»“æ„ï¼ˆ*ngIf, *ngFor, *ngSwitchï¼‰
3. **å±æ€§å‹æŒ‡ä»¤**: ä¿®æ”¹å…ƒç´ çš„å¤–è§‚æˆ–è¡Œä¸ºï¼ˆngClass, ngStyleï¼‰

### 4.1 å†…ç½®æŒ‡ä»¤

```html title="å†…ç½®æŒ‡ä»¤ç¤ºä¾‹"
<!-- NgIf -->
<div *ngIf="isLoggedIn; else loginBlock">
  æ¬¢è¿å›æ¥ï¼Œ{{ username }}!
</div>
<ng-template #loginBlock>
  è¯·ç™»å½•ä»¥ç»§ç»­
</ng-template>

<!-- NgFor -->
<ul>
  <li *ngFor="let item of items; let i = index; trackBy: trackByFn">
    {{ i + 1 }} - {{ item.name }}
  </li>
</ul>

<!-- NgSwitch -->
<div [ngSwitch]="userRole">
  <div *ngSwitchCase="'admin'">ç®¡ç†å‘˜é¢æ¿</div>
  <div *ngSwitchCase="'editor'">ç¼–è¾‘é¢æ¿</div>
  <div *ngSwitchDefault>ç”¨æˆ·é¢æ¿</div>
</div>

<!-- NgClass -->
<div [ngClass]="{
  'active': isActive,
  'disabled': isDisabled,
  'highlight': isHighlighted
}">æ ·å¼æ§åˆ¶</div>

<!-- NgStyle -->
<div [ngStyle]="{
  'color': textColor,
  'font-size.px': fontSize,
  'background-color': isImportant ? 'red' : 'transparent'
}">æ ·å¼æ§åˆ¶</div>
```

### 4.2 è‡ªå®šä¹‰æŒ‡ä»¤

åˆ›å»ºè‡ªå®šä¹‰æŒ‡ä»¤ï¼š

```bash
ng generate directive highlight
# ç®€å†™
ng g d highlight
```

å®ç°è‡ªå®šä¹‰æŒ‡ä»¤ï¼š

```typescript title="highlight.directive.ts"
import { Directive, ElementRef, HostListener, Input } from '@angular/core';

@Directive({
  selector: '[appHighlight]'
})
export class HighlightDirective {
  @Input('appHighlight') highlightColor: string = 'yellow';
  @Input() defaultColor: string = '';
  
  constructor(private el: ElementRef) {}
  
  @HostListener('mouseenter') onMouseEnter() {
    this.highlight(this.highlightColor || 'yellow');
  }
  
  @HostListener('mouseleave') onMouseLeave() {
    this.highlight(this.defaultColor);
  }
  
  private highlight(color: string) {
    this.el.nativeElement.style.backgroundColor = color;
  }
}
```

ä½¿ç”¨è‡ªå®šä¹‰æŒ‡ä»¤ï¼š

```html
<p appHighlight="lightblue" defaultColor="white">
  é¼ æ ‡æ‚¬åœæ—¶ä¼šé«˜äº®æ˜¾ç¤º
</p>
```

## 5. æ¨¡å—ç³»ç»Ÿ

Angularåº”ç”¨ç”±æ¨¡å—ç»„æˆï¼Œä¸»è¦æ¨¡å—ç±»å‹åŒ…æ‹¬ï¼š

1. **æ ¹æ¨¡å—(AppModule)**: åº”ç”¨çš„å¼•å¯¼æ¨¡å—
2. **åŠŸèƒ½æ¨¡å—**: å…³æ³¨ç‰¹å®šåŠŸèƒ½çš„æ¨¡å—
3. **å…±äº«æ¨¡å—**: æä¾›å…±äº«ç»„ä»¶/æŒ‡ä»¤/ç®¡é“çš„æ¨¡å—
4. **æ ¸å¿ƒæ¨¡å—**: æä¾›å•ä¾‹æœåŠ¡çš„æ¨¡å—
5. **è·¯ç”±æ¨¡å—**: é…ç½®è·¯ç”±çš„æ¨¡å—

### 5.1 åˆ›å»ºåŠŸèƒ½æ¨¡å—

```bash
ng generate module admin
# ç®€å†™
ng g m admin
```

æ¨¡å—å®šä¹‰ç¤ºä¾‹ï¼š

```typescript title="admin.module.ts"
import { NgModule } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';

import { AdminRoutingModule } from './admin-routing.module';
import { AdminDashboardComponent } from './admin-dashboard/admin-dashboard.component';
import { UserManagementComponent } from './user-management/user-management.component';

@NgModule({
  imports: [
    CommonModule,
    FormsModule,
    AdminRoutingModule
  ],
  declarations: [
    AdminDashboardComponent,
    UserManagementComponent
  ],
  exports: [
    AdminDashboardComponent // å¯¼å‡ºç»™å…¶ä»–æ¨¡å—ä½¿ç”¨
  ]
})
export class AdminModule { }
```

### 5.2 å…±äº«æ¨¡å—

åˆ›å»ºå…±äº«æ¨¡å—ï¼š

```typescript title="shared.module.ts"
import { NgModule } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';

import { HighlightDirective } from './directives/highlight.directive';
import { ButtonComponent } from './components/button/button.component';
import { CardComponent } from './components/card/card.component';
import { TruncatePipe } from './pipes/truncate.pipe';

@NgModule({
  imports: [
    CommonModule
  ],
  declarations: [
    HighlightDirective,
    ButtonComponent,
    CardComponent,
    TruncatePipe
  ],
  exports: [
    CommonModule,
    FormsModule,
    HighlightDirective,
    ButtonComponent,
    CardComponent,
    TruncatePipe
  ]
})
export class SharedModule { }
```

## 6. æœåŠ¡ä¸ä¾èµ–æ³¨å…¥

æœåŠ¡æ˜¯ä¸€ä¸ªå¹¿ä¹‰çš„ç±»åˆ«ï¼Œç”¨äºå°è£…å¯é‡ç”¨çš„é€»è¾‘ï¼Œå¦‚æ•°æ®è®¿é—®ã€æ—¥å¿—è®°å½•å’Œä¸šåŠ¡è§„åˆ™ã€‚

### 6.1 åˆ›å»ºæœåŠ¡

```bash
ng generate service hero
# ç®€å†™
ng g s hero
```

æœåŠ¡å®ç°ï¼š

```typescript title="hero.service.ts"
import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { Observable, of } from 'rxjs';
import { catchError, map, tap } from 'rxjs/operators';

import { Hero } from './hero.model';
import { LoggingService } from './logging.service';

@Injectable({
  providedIn: 'root' // æ³¨å†Œä¸ºåº”ç”¨çº§å•ä¾‹
})
export class HeroService {
  private apiUrl = 'api/heroes';
  
  constructor(
    private http: HttpClient,
    private loggingService: LoggingService
  ) { }
  
  getHeroes(): Observable<Hero[]> {
    return this.http.get<Hero[]>(this.apiUrl).pipe(
      tap(_ => this.log('fetched heroes')),
      catchError(this.handleError<Hero[]>('getHeroes', []))
    );
  }
  
  getHero(id: number): Observable<Hero> {
    const url = `${this.apiUrl}/${id}`;
    return this.http.get<Hero>(url).pipe(
      tap(_ => this.log(`fetched hero id=${id}`)),
      catchError(this.handleError<Hero>(`getHero id=${id}`))
    );
  }
  
  private log(message: string) {
    this.loggingService.log(`HeroService: ${message}`);
  }
  
  private handleError<T>(operation = 'operation', result?: T) {
    return (error: any): Observable<T> => {
      console.error(error);
      this.log(`${operation} failed: ${error.message}`);
      return of(result as T);
    };
  }
}
```

### 6.2 ä¾èµ–æ³¨å…¥

ä¾èµ–æ³¨å…¥(DI)æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œç”¨äºå®ç°æ§åˆ¶åè½¬ã€‚Angularçš„DIç³»ç»Ÿé€šè¿‡ä»¥ä¸‹æ–¹å¼å·¥ä½œï¼š

1. **æä¾›è€…(Provider)**: å‘Šè¯‰Angularå¦‚ä½•åˆ›å»ºæœåŠ¡å®ä¾‹
2. **æ³¨å…¥å™¨(Injector)**: ç»´æŠ¤æœåŠ¡å®ä¾‹å¹¶åœ¨éœ€è¦æ—¶åˆ›å»º
3. **ä¾èµ–(Dependency)**: æœåŠ¡æˆ–å¯¹è±¡ï¼Œæ³¨å…¥åˆ°ç±»ä¸­

æä¾›æœåŠ¡çš„æ–¹å¼ï¼š

```typescript
// 1. åœ¨@Injectableè£…é¥°å™¨ä¸­æä¾›
@Injectable({
  providedIn: 'root' // åº”ç”¨çº§å•ä¾‹
})
export class LoggingService { }

// 2. åœ¨æ¨¡å—ä¸­æä¾›
@NgModule({
  providers: [HeroService]
})
export class AppModule { }

// 3. åœ¨ç»„ä»¶ä¸­æä¾›(ç»„ä»¶åŠå…¶å­ç»„ä»¶å¯ç”¨)
@Component({
  providers: [UserService]
})
export class UserComponent { }
```

## 7. è¡¨å•å¤„ç†

Angularæä¾›ä¸¤ç§è¡¨å•å¤„ç†æ–¹æ³•ï¼šæ¨¡æ¿é©±åŠ¨è¡¨å•å’Œå“åº”å¼è¡¨å•ã€‚

### 7.1 æ¨¡æ¿é©±åŠ¨è¡¨å•

åŸºäºæ¨¡æ¿æŒ‡ä»¤ï¼Œç®€å•ç›´è§‚ï¼Œé€‚åˆç®€å•åœºæ™¯ï¼š

```typescript title="contact-form.component.ts"
import { Component } from '@angular/core';
import { NgForm } from '@angular/forms';

interface ContactForm {
  name: string;
  email: string;
  message: string;
}

@Component({
  selector: 'app-contact-form',
  templateUrl: './contact-form.component.html'
})
export class ContactFormComponent {
  model: ContactForm = {
    name: '',
    email: '',
    message: ''
  };
  
  submitted = false;
  
  onSubmit(form: NgForm) {
    if (form.valid) {
      console.log('Form submitted', this.model);
      this.submitted = true;
      // å¤„ç†è¡¨å•æäº¤...
    }
  }
}
```

```html title="contact-form.component.html"
<div class="container">
  <div *ngIf="submitted" class="alert alert-success">
    è¡¨å•å·²æäº¤æˆåŠŸï¼
  </div>

  <form #contactForm="ngForm" (ngSubmit)="onSubmit(contactForm)" novalidate>
    <div class="form-group">
      <label for="name">å§“å</label>
      <input
        type="text"
        class="form-control"
        id="name"
        name="name"
        [(ngModel)]="model.name"
        required
        #name="ngModel">
      <div [hidden]="name.valid || name.pristine" class="alert alert-danger">
        å§“åæ˜¯å¿…å¡«é¡¹
      </div>
    </div>

    <div class="form-group">
      <label for="email">ç”µå­é‚®ç®±</label>
      <input
        type="email"
        class="form-control"
        id="email"
        name="email"
        [(ngModel)]="model.email"
        required
        email
        #email="ngModel">
      <div [hidden]="email.valid || email.pristine" class="alert alert-danger">
        è¯·è¾“å…¥æœ‰æ•ˆçš„ç”µå­é‚®ç®±
      </div>
    </div>

    <div class="form-group">
      <label for="message">ç•™è¨€</label>
      <textarea
        class="form-control"
        id="message"
        name="message"
        rows="5"
        [(ngModel)]="model.message"
        required
        minlength="10"
        #message="ngModel"></textarea>
      <div [hidden]="message.valid || message.pristine" class="alert alert-danger">
        ç•™è¨€è‡³å°‘éœ€è¦10ä¸ªå­—ç¬¦
      </div>
    </div>

    <button type="submit" class="btn btn-primary" [disabled]="!contactForm.form.valid">
      æäº¤
    </button>
  </form>
</div>
```

### 7.2 å“åº”å¼è¡¨å•

åŸºäºæ˜¾å¼æ¨¡å‹å®šä¹‰ï¼Œæ›´åŠ çµæ´»å¼ºå¤§ï¼Œé€‚åˆå¤æ‚åœºæ™¯ï¼š

```typescript title="registration.component.ts"
import { Component, OnInit } from '@angular/core';
import { FormBuilder, FormGroup, FormControl, Validators, AbstractControl, ValidationErrors } from '@angular/forms';

@Component({
  selector: 'app-registration',
  templateUrl: './registration.component.html'
})
export class RegistrationComponent implements OnInit {
  registrationForm: FormGroup;
  submitted = false;
  
  constructor(private fb: FormBuilder) { }
  
  ngOnInit() {
    this.registrationForm = this.fb.group({
      name: ['', [Validators.required, Validators.minLength(3)]],
      email: ['', [Validators.required, Validators.email]],
      password: ['', [Validators.required, Validators.minLength(8)]],
      confirmPassword: ['', Validators.required],
      terms: [false, Validators.requiredTrue]
    }, {
      validators: this.passwordMatchValidator
    });
  }
  
  // è‡ªå®šä¹‰éªŒè¯å™¨
  passwordMatchValidator(control: AbstractControl): ValidationErrors | null {
    const password = control.get('password');
    const confirmPassword = control.get('confirmPassword');
    
    if (password?.value !== confirmPassword?.value) {
      return { 'passwordMismatch': true };
    }
    
    return null;
  }
  
  get f() {
    return this.registrationForm.controls;
  }
  
  onSubmit() {
    this.submitted = true;
    
    if (this.registrationForm.invalid) {
      return;
    }
    
    console.log('Registration form submitted', this.registrationForm.value);
    // å¤„ç†è¡¨å•æäº¤...
  }
}
```

```html title="registration.component.html"
<div class="container">
  <h2>ç”¨æˆ·æ³¨å†Œ</h2>
  
  <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="name">å§“å</label>
      <input
        type="text"
        id="name"
        formControlName="name"
        class="form-control"
        [ngClass]="{ 'is-invalid': submitted && f.name.errors }">
      <div *ngIf="submitted && f.name.errors" class="invalid-feedback">
        <div *ngIf="f.name.errors.required">å§“åæ˜¯å¿…å¡«é¡¹</div>
        <div *ngIf="f.name.errors.minlength">å§“åè‡³å°‘éœ€è¦3ä¸ªå­—ç¬¦</div>
      </div>
    </div>
    
    <div class="form-group">
      <label for="email">ç”µå­é‚®ç®±</label>
      <input
        type="email"
        id="email"
        formControlName="email"
        class="form-control"
        [ngClass]="{ 'is-invalid': submitted && f.email.errors }">
      <div *ngIf="submitted && f.email.errors" class="invalid-feedback">
        <div *ngIf="f.email.errors.required">ç”µå­é‚®ç®±æ˜¯å¿…å¡«é¡¹</div>
        <div *ngIf="f.email.errors.email">è¯·è¾“å…¥æœ‰æ•ˆçš„ç”µå­é‚®ç®±åœ°å€</div>
      </div>
    </div>
    
    <div class="form-group">
      <label for="password">å¯†ç </label>
      <input
        type="password"
        id="password"
        formControlName="password"
        class="form-control"
        [ngClass]="{ 'is-invalid': submitted && f.password.errors }">
      <div *ngIf="submitted && f.password.errors" class="invalid-feedback">
        <div *ngIf="f.password.errors.required">å¯†ç æ˜¯å¿…å¡«é¡¹</div>
        <div *ngIf="f.password.errors.minlength">å¯†ç è‡³å°‘éœ€è¦8ä¸ªå­—ç¬¦</div>
      </div>
    </div>
    
    <div class="form-group">
      <label for="confirmPassword">ç¡®è®¤å¯†ç </label>
      <input
        type="password"
        id="confirmPassword"
        formControlName="confirmPassword"
        class="form-control"
        [ngClass]="{ 'is-invalid': submitted && (f.confirmPassword.errors || registrationForm.errors?.passwordMismatch) }">
      <div *ngIf="submitted && (f.confirmPassword.errors || registrationForm.errors?.passwordMismatch)" class="invalid-feedback">
        <div *ngIf="f.confirmPassword.errors?.required">ç¡®è®¤å¯†ç æ˜¯å¿…å¡«é¡¹</div>
        <div *ngIf="registrationForm.errors?.passwordMismatch">ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸åŒ¹é…</div>
      </div>
    </div>
    
    <div class="form-group form-check">
      <input
        type="checkbox"
        id="terms"
        formControlName="terms"
        class="form-check-input"
        [ngClass]="{ 'is-invalid': submitted && f.terms.errors }">
      <label for="terms" class="form-check-label">æˆ‘åŒæ„æ‰€æœ‰æ¡æ¬¾å’Œæ¡ä»¶</label>
      <div *ngIf="submitted && f.terms.errors" class="invalid-feedback">
        <div *ngIf="f.terms.errors.required">å¿…é¡»åŒæ„æ¡æ¬¾å’Œæ¡ä»¶æ‰èƒ½ç»§ç»­</div>
      </div>
    </div>
    
    <button type="submit" class="btn btn-primary">æ³¨å†Œ</button>
  </form>
</div>
```

## 8. HTTPé€šä¿¡

Angularæä¾›`HttpClient`ç”¨äºä¸æœåŠ¡å™¨é€šä¿¡ã€‚

```typescript title="data.service.ts"
import { Injectable } from '@angular/core';
import { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';
import { Observable, throwError } from 'rxjs';
import { catchError, retry, map } from 'rxjs/operators';

import { Product } from './product.model';

@Injectable({
  providedIn: 'root'
})
export class DataService {
  private apiUrl = 'https://api.example.com/products';
  
  constructor(private http: HttpClient) { }
  
  getProducts(category?: string): Observable<Product[]> {
    let params = new HttpParams();
    if (category) {
      params = params.set('category', category);
    }
    
    return this.http.get<Product[]>(this.apiUrl, { params }).pipe(
      retry(2), // å¤±è´¥æ—¶é‡è¯•
      catchError(this.handleError)
    );
  }
  
  getProduct(id: number): Observable<Product> {
    return this.http.get<Product>(`${this.apiUrl}/${id}`).pipe(
      catchError(this.handleError)
    );
  }
  
  createProduct(product: Product): Observable<Product> {
    const httpOptions = {
      headers: new HttpHeaders({
        'Content-Type': 'application/json'
      })
    };
    
    return this.http.post<Product>(this.apiUrl, product, httpOptions).pipe(
      catchError(this.handleError)
    );
  }
  
  updateProduct(product: Product): Observable<Product> {
    return this.http.put<Product>(`${this.apiUrl}/${product.id}`, product).pipe(
      catchError(this.handleError)
    );
  }
  
  deleteProduct(id: number): Observable<void> {
    return this.http.delete<void>(`${this.apiUrl}/${id}`).pipe(
      catchError(this.handleError)
    );
  }
  
  private handleError(error: any) {
    let errorMessage = '';
    if (error.error instanceof ErrorEvent) {
      // å®¢æˆ·ç«¯é”™è¯¯
      errorMessage = `Error: ${error.error.message}`;
    } else {
      // æœåŠ¡å™¨ç«¯é”™è¯¯
      errorMessage = `Error Code: ${error.status}\nMessage: ${error.message}`;
    }
    console.error(errorMessage);
    return throwError(() => new Error(errorMessage));
  }
}
```

åœ¨ç»„ä»¶ä¸­ä½¿ç”¨HTTPæœåŠ¡ï¼š

```typescript title="product-list.component.ts"
import { Component, OnInit } from '@angular/core';
import { DataService } from '../services/data.service';
import { Product } from '../models/product.model';

@Component({
  selector: 'app-product-list',
  templateUrl: './product-list.component.html'
})
export class ProductListComponent implements OnInit {
  products: Product[] = [];
  loading = false;
  error = '';
  
  constructor(private dataService: DataService) { }
  
  ngOnInit(): void {
    this.getProducts();
  }
  
  getProducts(): void {
    this.loading = true;
    this.dataService.getProducts()
      .subscribe({
        next: (data) => {
          this.products = data;
          this.loading = false;
        },
        error: (error) => {
          this.error = error;
          this.loading = false;
        }
      });
  }
  
  deleteProduct(id: number): void {
    if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªäº§å“å—?')) {
      this.dataService.deleteProduct(id)
        .subscribe({
          next: () => {
            this.products = this.products.filter(p => p.id !== id);
          },
          error: (error) => {
            this.error = error;
          }
        });
    }
  }
}
```

## 9. Angularæœ€ä½³å®è·µ

### 9.1 ç›®å½•ç»“æ„

æ¨èæŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡ç›®å½•ï¼š

```
app/
â”œâ”€â”€ core/                    # æ ¸å¿ƒåŠŸèƒ½(å•ä¾‹æœåŠ¡ã€æ‹¦æˆªå™¨ç­‰)
â”‚   â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ interceptors/
â”‚   â””â”€â”€ core.module.ts
â”œâ”€â”€ shared/                  # å…±äº«ç»„ä»¶ã€æŒ‡ä»¤ã€ç®¡é“
â”‚   â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ directives/
â”‚   â”œâ”€â”€ pipes/
â”‚   â””â”€â”€ shared.module.ts
â”œâ”€â”€ features/                # æŒ‰åŠŸèƒ½åˆ’åˆ†çš„æ¨¡å—
â”‚   â”œâ”€â”€ home/
â”‚   â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ products/
â”‚   â””â”€â”€ admin/
â”œâ”€â”€ models/                  # æ•°æ®æ¨¡å‹/æ¥å£
â”œâ”€â”€ utils/                   # å·¥å…·å‡½æ•°
â”œâ”€â”€ app-routing.module.ts
â”œâ”€â”€ app.component.ts
â””â”€â”€ app.module.ts
```

### 9.2 æ€§èƒ½ä¼˜åŒ–

1. **ä½¿ç”¨OnPushå˜æ›´æ£€æµ‹**ï¼šå‡å°‘ä¸å¿…è¦çš„å˜æ›´æ£€æµ‹
2. **å»¶è¿ŸåŠ è½½æ¨¡å—**ï¼šæé«˜åˆå§‹åŠ è½½æ€§èƒ½
3. **è¿½è¸ªNgFor**ï¼šä¸ºå¤§åˆ—è¡¨ä½¿ç”¨trackByå‡½æ•°
4. **çº¯ç®¡é“**ï¼šä½¿ç”¨çº¯ç®¡é“è¿›è¡Œæ•°æ®è½¬æ¢
5. **ä½¿ç”¨AOTç¼–è¯‘**ï¼šæå‰ç¼–è¯‘æé«˜æ€§èƒ½

```typescript
// OnPushå˜æ›´æ£€æµ‹
@Component({
  changeDetection: ChangeDetectionStrategy.OnPush
})

// NgForä¼˜åŒ–
<div *ngFor="let item of items; trackBy: trackById"></div>

trackById(index: number, item: any): number {
  return item.id;
}
```

### 9.3 ä»£ç é£æ ¼æŒ‡å—

- éµå¾ªå®˜æ–¹Angularé£æ ¼æŒ‡å—
- ä½¿ç”¨ç±»å‹å®‰å…¨(TypeScriptæ¥å£å’Œç±»å‹)
- å°†ä¸šåŠ¡é€»è¾‘ä»ç»„ä»¶ç§»è‡³æœåŠ¡
- é¿å…åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨å¤æ‚è¡¨è¾¾å¼
- ç»„ä»¶ä¿æŒå°å·§ã€èšç„¦ä¸”å¯é‡ç”¨
- ä½¿ç”¨RxJSæ“ä½œç¬¦ç®€åŒ–å¼‚æ­¥ä»£ç  