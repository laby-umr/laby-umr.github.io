---
sidebar_position: 3
title: ES6+ç°ä»£JavaScriptç‰¹æ€§å…¨è§£æ
description: æ·±å…¥è§£æES6åˆ°ES2023çš„ç°ä»£JavaScriptç‰¹æ€§ã€è¯­æ³•ç³–ä¸æœ€ä½³å®è·µ
authors: [Laby]
tags: [ES6+, ç°ä»£JavaScript, ç®­å¤´å‡½æ•°, è§£æ„èµ‹å€¼, æ¨¡å—ç³»ç»Ÿ, å¼‚æ­¥ç¼–ç¨‹, ç±»]
last_update:
  date: 2025-08-14
  author: Laby
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';

# ES6+ç°ä»£JavaScriptç‰¹æ€§å…¨è§£æ

ES6ï¼ˆECMAScript 2015ï¼‰åŠåç»­ç‰ˆæœ¬ä¸ºJavaScriptå¸¦æ¥äº†é©å‘½æ€§çš„æ”¹è¿›ï¼Œå¼•å…¥äº†ç±»ã€æ¨¡å—ã€ç®­å¤´å‡½æ•°ã€Promiseç­‰ç°ä»£ç¼–ç¨‹ç‰¹æ€§ã€‚è¿™äº›ç‰¹æ€§ä¸ä»…æå‡äº†å¼€å‘æ•ˆç‡ï¼Œè¿˜ä½¿JavaScriptæˆä¸ºäº†æ›´å¼ºå¤§ã€æ›´ä¼˜é›…çš„ç¼–ç¨‹è¯­è¨€ã€‚

:::tip æ ¸å¿ƒä»·å€¼
**ES6+ = ç°ä»£è¯­æ³• + æ¨¡å—åŒ– + å¼‚æ­¥ç¼–ç¨‹ + å‡½æ•°å¼ç¼–ç¨‹**
- ğŸ¯ **ç°ä»£è¯­æ³•**ï¼šç®­å¤´å‡½æ•°ã€æ¨¡æ¿å­—ç¬¦ä¸²ã€è§£æ„èµ‹å€¼ç­‰ç®€æ´è¯­æ³•
- ğŸ“¦ **æ¨¡å—åŒ–ç³»ç»Ÿ**ï¼šimport/exportæ¨¡å—ç³»ç»Ÿï¼Œå‘Šåˆ«å…¨å±€æ±¡æŸ“
- âš¡ **å¼‚æ­¥ç¼–ç¨‹**ï¼šPromiseã€async/awaitï¼Œä¼˜é›…å¤„ç†å¼‚æ­¥æ“ä½œ
- ğŸ”§ **å‡½æ•°å¼ç¼–ç¨‹**ï¼šé«˜é˜¶å‡½æ•°ã€çº¯å‡½æ•°ã€ä¸å¯å˜æ•°æ®
- ğŸ—ï¸ **é¢å‘å¯¹è±¡å¢å¼º**ï¼šclassè¯­æ³•ã€ç»§æ‰¿ã€ç§æœ‰å­—æ®µ
- ğŸŒŸ **æ–°æ•°æ®ç»“æ„**ï¼šMapã€Setã€WeakMapã€WeakSetç­‰
:::

## 1. å˜é‡å£°æ˜ä¸ä½œç”¨åŸŸ

### 1.1 letã€const vs var

ES6å¼•å…¥çš„`let`å’Œ`const`è§£å†³äº†`var`çš„è¯¸å¤šé—®é¢˜ï¼Œæä¾›äº†æ›´å®‰å…¨çš„å˜é‡å£°æ˜æ–¹å¼ã€‚

```mermaid
graph TB
    subgraph "å˜é‡å£°æ˜å¯¹æ¯”"
        subgraph "varç‰¹æ€§"
            V1[å‡½æ•°ä½œç”¨åŸŸ]
            V2[å˜é‡æå‡]
            V3[å¯é‡å¤å£°æ˜]
            V4[å¯é‡æ–°èµ‹å€¼]
            V5[å…¨å±€å¯¹è±¡å±æ€§]
        end
        
        subgraph "letç‰¹æ€§"
            L1[å—çº§ä½œç”¨åŸŸ]
            L2[æš‚æ—¶æ€§æ­»åŒº]
            L3[ä¸å¯é‡å¤å£°æ˜]
            L4[å¯é‡æ–°èµ‹å€¼]
            L5[ä¸æ˜¯å…¨å±€å¯¹è±¡å±æ€§]
        end
        
        subgraph "constç‰¹æ€§"
            C1[å—çº§ä½œç”¨åŸŸ]
            C2[æš‚æ—¶æ€§æ­»åŒº]
            C3[ä¸å¯é‡å¤å£°æ˜]
            C4[ä¸å¯é‡æ–°èµ‹å€¼]
            C5[å£°æ˜æ—¶å¿…é¡»åˆå§‹åŒ–]
        end
    end
```

#### å˜é‡å£°æ˜å¯¹æ¯”è¡¨

| ç‰¹æ€§ | var | let | const | æ¨èä½¿ç”¨ |
|------|-----|-----|-------|----------|
| **ä½œç”¨åŸŸ** | å‡½æ•°ä½œç”¨åŸŸ | å—çº§ä½œç”¨åŸŸ | å—çº§ä½œç”¨åŸŸ | let/const |
| **å˜é‡æå‡** | æ˜¯ | å¦ï¼ˆæš‚æ—¶æ€§æ­»åŒºï¼‰ | å¦ï¼ˆæš‚æ—¶æ€§æ­»åŒºï¼‰ | let/const |
| **é‡å¤å£°æ˜** | å…è®¸ | ä¸å…è®¸ | ä¸å…è®¸ | let/const |
| **é‡æ–°èµ‹å€¼** | å…è®¸ | å…è®¸ | ä¸å…è®¸ | æ ¹æ®éœ€æ±‚ |
| **å…¨å±€å¯¹è±¡å±æ€§** | æ˜¯ | å¦ | å¦ | let/const |

<Tabs>
<TabItem value="scope-examples" label="ä½œç”¨åŸŸç¤ºä¾‹">

#### ä½œç”¨åŸŸä¸å˜é‡æå‡è¯¦è§£

```javascript title="ä½œç”¨åŸŸä¸å˜é‡æå‡å®Œæ•´ç¤ºä¾‹"
// 1. varçš„å‡½æ•°ä½œç”¨åŸŸé—®é¢˜
function varScopeExample() {
  console.log(x); // undefined (å˜é‡æå‡ï¼Œä½†æœªèµ‹å€¼)
  
  if (true) {
    var x = 1;
    console.log(x); // 1
  }
  
  console.log(x); // 1 (varæ²¡æœ‰å—çº§ä½œç”¨åŸŸ)
}

// 2. letçš„å—çº§ä½œç”¨åŸŸ
function letScopeExample() {
  // console.log(y); // ReferenceError: Cannot access 'y' before initialization
  
  if (true) {
    let y = 1;
    console.log(y); // 1
  }
  
  // console.log(y); // ReferenceError: y is not defined
}

// 3. constçš„ç‰¹æ€§
function constExample() {
  const PI = 3.14159;
  // PI = 3.14; // TypeError: Assignment to constant variable
  
  // å¯¹è±¡å’Œæ•°ç»„çš„const
  const user = { name: 'John', age: 30 };
  user.age = 31; // å¯ä»¥ä¿®æ”¹å¯¹è±¡å±æ€§
  user.city = 'New York'; // å¯ä»¥æ·»åŠ å±æ€§
  // user = {}; // TypeError: Assignment to constant variable
  
  const numbers = [1, 2, 3];
  numbers.push(4); // å¯ä»¥ä¿®æ”¹æ•°ç»„å†…å®¹
  // numbers = []; // TypeError: Assignment to constant variable
}

// 4. å¾ªç¯ä¸­çš„ä½œç”¨åŸŸé—®é¢˜
// varçš„é—®é¢˜
for (var i = 0; i < 3; i++) {
  setTimeout(() => {
    console.log('var:', i); // è¾“å‡º: 3, 3, 3
  }, 100);
}

// letçš„è§£å†³æ–¹æ¡ˆ
for (let i = 0; i < 3; i++) {
  setTimeout(() => {
    console.log('let:', i); // è¾“å‡º: 0, 1, 2
  }, 100);
}

// 5. æš‚æ—¶æ€§æ­»åŒºï¼ˆTemporal Dead Zoneï¼‰
function temporalDeadZoneExample() {
  console.log(typeof x); // "undefined" (var)
  // console.log(typeof y); // ReferenceError (let)
  
  var x = 1;
  let y = 2;
}

// 6. å…¨å±€å¯¹è±¡å±æ€§
var globalVar = 'I am global';
let globalLet = 'I am also global';
const globalConst = 'I am global too';

console.log(window.globalVar); // "I am global"
console.log(window.globalLet); // undefined
console.log(window.globalConst); // undefined
```

</TabItem>
<TabItem value="best-practices" label="æœ€ä½³å®è·µ">

#### å˜é‡å£°æ˜æœ€ä½³å®è·µ

```javascript title="å˜é‡å£°æ˜æœ€ä½³å®è·µ"
// 1. ä¼˜å…ˆä½¿ç”¨constï¼Œéœ€è¦é‡æ–°èµ‹å€¼æ—¶ä½¿ç”¨let
const API_URL = 'https://api.example.com';
const users = [];
let currentUser = null;

// 2. é¿å…ä½¿ç”¨var
// ä¸æ¨è
var count = 0;

// æ¨è
let count = 0;

// 3. åœ¨æœ€å°ä½œç”¨åŸŸå†…å£°æ˜å˜é‡
function processUsers(userList) {
  const processedUsers = [];
  
  for (let i = 0; i < userList.length; i++) {
    const user = userList[i];
    
    if (user.active) {
      const processedUser = {
        id: user.id,
        name: user.name.toUpperCase(),
        email: user.email.toLowerCase()
      };
      processedUsers.push(processedUser);
    }
  }
  
  return processedUsers;
}

// 4. ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡å
// ä¸æ¨è
const d = new Date();
const u = users.filter(x => x.a);

// æ¨è
const currentDate = new Date();
const activeUsers = users.filter(user => user.active);

// 5. å¸¸é‡ä½¿ç”¨å¤§å†™å­—æ¯å’Œä¸‹åˆ’çº¿
const MAX_RETRY_COUNT = 3;
const API_ENDPOINTS = {
  USERS: '/api/users',
  POSTS: '/api/posts'
};

// 6. å¯¹è±¡å’Œæ•°ç»„çš„ä¸å¯å˜æ“ä½œ
const originalArray = [1, 2, 3];

// ä¸æ¨èï¼šç›´æ¥ä¿®æ”¹åŸæ•°ç»„
originalArray.push(4);

// æ¨èï¼šåˆ›å»ºæ–°æ•°ç»„
const newArray = [...originalArray, 4];

const originalObject = { name: 'John', age: 30 };

// ä¸æ¨èï¼šç›´æ¥ä¿®æ”¹åŸå¯¹è±¡
originalObject.city = 'New York';

// æ¨èï¼šåˆ›å»ºæ–°å¯¹è±¡
const newObject = { ...originalObject, city: 'New York' };
```

</TabItem>
</Tabs>

## 2. ç®­å¤´å‡½æ•°ä¸å‡½æ•°å¢å¼º

### 2.1 ç®­å¤´å‡½æ•°è¯­æ³•

ç®­å¤´å‡½æ•°æ˜¯ES6å¼•å…¥çš„ç®€æ´å‡½æ•°è¯­æ³•ï¼Œä¸ä»…è¯­æ³•æ›´ç®€æ´ï¼Œè¿˜è§£å†³äº†ä¼ ç»Ÿå‡½æ•°ä¸­`this`ç»‘å®šçš„é—®é¢˜ã€‚

```mermaid
graph LR
    subgraph "ç®­å¤´å‡½æ•°ç‰¹æ€§"
        A[ç®€æ´è¯­æ³•] --> B[è¯æ³•thisç»‘å®š]
        B --> C[ä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°]
        C --> D[æ²¡æœ‰argumentså¯¹è±¡]
        D --> E[ä¸èƒ½ä½¿ç”¨yield]
    end
```

<Tabs>
<TabItem value="arrow-syntax" label="ç®­å¤´å‡½æ•°è¯­æ³•">

#### ç®­å¤´å‡½æ•°å®Œæ•´è¯­æ³•

```javascript title="ç®­å¤´å‡½æ•°è¯­æ³•è¯¦è§£"
// 1. åŸºç¡€è¯­æ³•å¯¹æ¯”
// ä¼ ç»Ÿå‡½æ•°
function add(a, b) {
  return a + b;
}

// ç®­å¤´å‡½æ•°
const add = (a, b) => a + b;

// 2. ä¸åŒå‚æ•°æƒ…å†µ
// æ— å‚æ•°
const greet = () => 'Hello World';

// å•ä¸ªå‚æ•°ï¼ˆå¯çœç•¥æ‹¬å·ï¼‰
const double = x => x * 2;
const square = (x) => x * x; // ä¹Ÿå¯ä»¥ä¿ç•™æ‹¬å·

// å¤šä¸ªå‚æ•°
const multiply = (a, b) => a * b;

// é»˜è®¤å‚æ•°
const greetUser = (name = 'Guest') => `Hello, ${name}!`;

// å‰©ä½™å‚æ•°
const sum = (...numbers) => numbers.reduce((acc, num) => acc + num, 0);

// è§£æ„å‚æ•°
const getFullName = ({ firstName, lastName }) => `${firstName} ${lastName}`;

// 3. å‡½æ•°ä½“è¯­æ³•
// è¡¨è¾¾å¼ä½“ï¼ˆéšå¼è¿”å›ï¼‰
const isEven = n => n % 2 === 0;

// è¯­å¥ä½“ï¼ˆéœ€è¦æ˜¾å¼returnï¼‰
const processData = (data) => {
  const processed = data.map(item => item.toUpperCase());
  const filtered = processed.filter(item => item.length > 3);
  return filtered;
};

// è¿”å›å¯¹è±¡å­—é¢é‡ï¼ˆéœ€è¦æ‹¬å·ï¼‰
const createUser = (name, age) => ({ name, age, id: Date.now() });

// 4. é«˜é˜¶å‡½æ•°ä¸­çš„ç®­å¤´å‡½æ•°
const numbers = [1, 2, 3, 4, 5];

// ä¼ ç»Ÿå†™æ³•
const doubled = numbers.map(function(n) {
  return n * 2;
});

// ç®­å¤´å‡½æ•°å†™æ³•
const doubled = numbers.map(n => n * 2);

// é“¾å¼è°ƒç”¨
const result = numbers
  .filter(n => n > 2)
  .map(n => n * 2)
  .reduce((acc, n) => acc + n, 0);

// 5. å¤æ‚çš„å‡½æ•°å¼ç¼–ç¨‹ç¤ºä¾‹
const users = [
  { name: 'Alice', age: 25, active: true },
  { name: 'Bob', age: 30, active: false },
  { name: 'Charlie', age: 35, active: true }
];

// å‡½æ•°ç»„åˆ
const pipe = (...fns) => (value) => fns.reduce((acc, fn) => fn(acc), value);

const processUsers = pipe(
  users => users.filter(user => user.active),
  users => users.map(user => ({ ...user, ageGroup: user.age < 30 ? 'young' : 'adult' })),
  users => users.sort((a, b) => a.age - b.age)
);

const processedUsers = processUsers(users);

// 6. æŸ¯é‡ŒåŒ–å‡½æ•°
const curry = (fn) => {
  return function curried(...args) {
    if (args.length >= fn.length) {
      return fn.apply(this, args);
    } else {
      return (...nextArgs) => curried(...args, ...nextArgs);
    }
  };
};

// ä½¿ç”¨ç®­å¤´å‡½æ•°çš„æŸ¯é‡ŒåŒ–
const add = (a, b, c) => a + b + c;
const curriedAdd = curry(add);

const add5 = curriedAdd(5);
const add5And3 = add5(3);
const result = add5And3(2); // 10

// 7. å¼‚æ­¥ç®­å¤´å‡½æ•°
const fetchUserData = async (userId) => {
  try {
    const response = await fetch(`/api/users/${userId}`);
    const userData = await response.json();
    return userData;
  } catch (error) {
    console.error('Failed to fetch user:', error);
    throw error;
  }
};

// Promiseé“¾ä¸­çš„ç®­å¤´å‡½æ•°
fetchUserData(123)
  .then(user => ({ ...user, processed: true }))
  .then(user => console.log('Processed user:', user))
  .catch(error => console.error('Error:', error));
```

</TabItem>
<TabItem value="this-binding" label="thisç»‘å®š">

#### thisç»‘å®šæœºåˆ¶å¯¹æ¯”

```javascript title="thisç»‘å®šè¯¦è§£"
// 1. ä¼ ç»Ÿå‡½æ•° vs ç®­å¤´å‡½æ•°çš„this
const obj = {
  name: 'MyObject',
  
  // ä¼ ç»Ÿå‡½æ•°æ–¹æ³•
  traditionalMethod: function() {
    console.log('Traditional:', this.name); // 'MyObject'
    
    setTimeout(function() {
      console.log('Traditional setTimeout:', this.name); // undefined (å…¨å±€this)
    }, 100);
  },
  
  // ç®­å¤´å‡½æ•°æ–¹æ³•
  arrowMethod: () => {
    console.log('Arrow method:', this.name); // undefined (è¯æ³•thisï¼ŒæŒ‡å‘å…¨å±€)
  },
  
  // æ··åˆä½¿ç”¨
  mixedMethod: function() {
    console.log('Mixed outer:', this.name); // 'MyObject'
    
    setTimeout(() => {
      console.log('Mixed arrow setTimeout:', this.name); // 'MyObject' (ç»§æ‰¿å¤–å±‚this)
    }, 100);
  }
};

// 2. ç±»ä¸­çš„ç®­å¤´å‡½æ•°
class EventHandler {
  constructor(name) {
    this.name = name;
    this.clickCount = 0;
  }
  
  // ä¼ ç»Ÿæ–¹æ³•
  handleClickTraditional() {
    this.clickCount++;
    console.log(`${this.name} clicked ${this.clickCount} times`);
  }
  
  // ç®­å¤´å‡½æ•°æ–¹æ³•ï¼ˆç±»å­—æ®µè¯­æ³•ï¼‰
  handleClickArrow = () => {
    this.clickCount++;
    console.log(`${this.name} clicked ${this.clickCount} times`);
  }
  
  setupEventListeners() {
    const button1 = document.getElementById('btn1');
    const button2 = document.getElementById('btn2');
    
    // ä¼ ç»Ÿæ–¹æ³•éœ€è¦ç»‘å®šthis
    button1.addEventListener('click', this.handleClickTraditional.bind(this));
    
    // ç®­å¤´å‡½æ•°è‡ªåŠ¨ç»‘å®šthis
    button2.addEventListener('click', this.handleClickArrow);
  }
}

// 3. Reactç»„ä»¶ä¸­çš„åº”ç”¨
class ReactComponent extends React.Component {
  constructor(props) {
    super(props);
    this.state = { count: 0 };
  }
  
  // ä¼ ç»Ÿæ–¹æ³•éœ€è¦åœ¨constructorä¸­ç»‘å®š
  handleClickTraditional() {
    this.setState({ count: this.state.count + 1 });
  }
  
  // ç®­å¤´å‡½æ•°è‡ªåŠ¨ç»‘å®š
  handleClickArrow = () => {
    this.setState({ count: this.state.count + 1 });
  }
  
  render() {
    return (
      <div>
        <button onClick={this.handleClickTraditional.bind(this)}>
          Traditional: {this.state.count}
        </button>
        <button onClick={this.handleClickArrow}>
          Arrow: {this.state.count}
        </button>
      </div>
    );
  }
}

// 4. å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„this
const calculator = {
  value: 0,
  
  add: function(n) {
    this.value += n;
    return this;
  },
  
  multiply: function(n) {
    this.value *= n;
    return this;
  },
  
  // ç®­å¤´å‡½æ•°ä¸é€‚åˆé“¾å¼è°ƒç”¨
  // subtract: (n) => {
  //   this.value -= n; // thisä¸æŒ‡å‘calculator
  //   return this;
  // },
  
  subtract: function(n) {
    this.value -= n;
    return this;
  },
  
  getValue: function() {
    return this.value;
  }
};

// é“¾å¼è°ƒç”¨
const result = calculator
  .add(10)
  .multiply(2)
  .subtract(5)
  .getValue(); // 15

// 5. ç®­å¤´å‡½æ•°çš„é™åˆ¶
// ä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°
const ArrowConstructor = () => {};
// new ArrowConstructor(); // TypeError: ArrowConstructor is not a constructor

// æ²¡æœ‰argumentså¯¹è±¡
function traditionalFunction() {
  console.log(arguments); // Argumentså¯¹è±¡
}

const arrowFunction = () => {
  // console.log(arguments); // ReferenceError: arguments is not defined
  // ä½¿ç”¨å‰©ä½™å‚æ•°ä»£æ›¿
  console.log(...args);
};

// ä¸èƒ½ä½¿ç”¨callã€applyã€bindæ”¹å˜this
const arrowFunc = () => console.log(this);
const obj2 = { name: 'test' };

arrowFunc.call(obj2); // thisä»ç„¶æ˜¯è¯æ³•thisï¼Œä¸æ˜¯obj2
```

</TabItem>
<TabItem value="function-enhancements" label="å‡½æ•°å¢å¼ºç‰¹æ€§">

#### ES6+å‡½æ•°å¢å¼ºç‰¹æ€§

```javascript title="å‡½æ•°å¢å¼ºç‰¹æ€§è¯¦è§£"
// 1. é»˜è®¤å‚æ•°
function greet(name = 'World', greeting = 'Hello') {
  return `${greeting}, ${name}!`;
}

// é»˜è®¤å‚æ•°å¯ä»¥æ˜¯è¡¨è¾¾å¼
function createId(prefix = 'id', suffix = Date.now()) {
  return `${prefix}_${suffix}`;
}

// é»˜è®¤å‚æ•°å¯ä»¥å¼•ç”¨å‰é¢çš„å‚æ•°
function createUser(name, role = 'user', permissions = getDefaultPermissions(role)) {
  return { name, role, permissions };
}

function getDefaultPermissions(role) {
  const permissionMap = {
    admin: ['read', 'write', 'delete'],
    user: ['read'],
    guest: []
  };
  return permissionMap[role] || [];
}

// 2. å‰©ä½™å‚æ•°
function sum(...numbers) {
  return numbers.reduce((total, num) => total + num, 0);
}

// å‰©ä½™å‚æ•°ä¸æ™®é€šå‚æ•°ç»“åˆ
function logMessage(level, ...messages) {
  const timestamp = new Date().toISOString();
  console.log(`[${timestamp}] ${level.toUpperCase()}:`, ...messages);
}

logMessage('info', 'User logged in', { userId: 123 });

// 3. æ‰©å±•è¿ç®—ç¬¦
const arr1 = [1, 2, 3];
const arr2 = [4, 5, 6];

// æ•°ç»„åˆå¹¶
const combined = [...arr1, ...arr2]; // [1, 2, 3, 4, 5, 6]

// æ•°ç»„å¤åˆ¶
const copied = [...arr1]; // [1, 2, 3]

// å‡½æ•°è°ƒç”¨
function multiply(a, b, c) {
  return a * b * c;
}

const numbers = [2, 3, 4];
const result = multiply(...numbers); // 24

// 4. å‡½æ•°åå±æ€§
function namedFunction() {}
const anonymousFunction = function() {};
const arrowFunction = () => {};

console.log(namedFunction.name); // 'namedFunction'
console.log(anonymousFunction.name); // 'anonymousFunction'
console.log(arrowFunction.name); // 'arrowFunction'

// 5. å°¾è°ƒç”¨ä¼˜åŒ–ï¼ˆç†è®ºä¸Šæ”¯æŒï¼Œå®é™…æ”¯æŒæœ‰é™ï¼‰
function factorial(n, acc = 1) {
  if (n <= 1) return acc;
  return factorial(n - 1, n * acc); // å°¾è°ƒç”¨
}

// 6. å‡½æ•°å‚æ•°è§£æ„
function processUser({ name, age, email = 'unknown' }) {
  console.log(`Processing ${name}, age ${age}, email ${email}`);
}

processUser({ name: 'John', age: 30 });

// æ•°ç»„å‚æ•°è§£æ„
function getCoordinates([x, y, z = 0]) {
  return { x, y, z };
}

getCoordinates([10, 20]); // { x: 10, y: 20, z: 0 }

// 7. é«˜çº§å‡½æ•°æ¨¡å¼
// å‡½æ•°ç»„åˆ
const compose = (...fns) => (value) => fns.reduceRight((acc, fn) => fn(acc), value);

const addOne = x => x + 1;
const double = x => x * 2;
const square = x => x * x;

const composedFunction = compose(square, double, addOne);
console.log(composedFunction(3)); // ((3 + 1) * 2)Â² = 64

// ç®¡é“æ“ä½œ
const pipe = (...fns) => (value) => fns.reduce((acc, fn) => fn(acc), value);

const pipedFunction = pipe(addOne, double, square);
console.log(pipedFunction(3)); // ((3 + 1) * 2)Â² = 64

// åå‡½æ•°åº”ç”¨
const partial = (fn, ...presetArgs) => {
  return (...laterArgs) => fn(...presetArgs, ...laterArgs);
};

const multiply = (a, b, c) => a * b * c;
const multiplyBy2 = partial(multiply, 2);
const multiplyBy2And3 = partial(multiply, 2, 3);

console.log(multiplyBy2(3, 4)); // 24
console.log(multiplyBy2And3(4)); // 24

// 8. è®°å¿†åŒ–å‡½æ•°
const memoize = (fn) => {
  const cache = new Map();
  
  return (...args) => {
    const key = JSON.stringify(args);
    
    if (cache.has(key)) {
      return cache.get(key);
    }
    
    const result = fn(...args);
    cache.set(key, result);
    return result;
  };
};

const expensiveFunction = (n) => {
  console.log(`Computing for ${n}`);
  return n * n;
};

const memoizedFunction = memoize(expensiveFunction);

console.log(memoizedFunction(5)); // Computing for 5, returns 25
console.log(memoizedFunction(5)); // returns 25 (from cache)

// 9. å‡½æ•°é‡è½½æ¨¡æ‹Ÿ
function createOverloadedFunction(...implementations) {
  return function(...args) {
    const implementation = implementations.find(impl => 
      impl.length === args.length
    );
    
    if (implementation) {
      return implementation.apply(this, args);
    }
    
    throw new Error(`No implementation found for ${args.length} arguments`);
  };
}

const overloadedAdd = createOverloadedFunction(
  (a) => a,
  (a, b) => a + b,
  (a, b, c) => a + b + c
);

console.log(overloadedAdd(5)); // 5
console.log(overloadedAdd(2, 3)); // 5
console.log(overloadedAdd(1, 2, 3)); // 6
```

</TabItem>
</Tabs>

## 3. è§£æ„èµ‹å€¼ä¸æ‰©å±•è¿ç®—ç¬¦

### 3.1 è§£æ„èµ‹å€¼è¯­æ³•

è§£æ„èµ‹å€¼å…è®¸ä»æ•°ç»„æˆ–å¯¹è±¡ä¸­æå–å€¼ï¼Œå¹¶èµ‹ç»™å˜é‡ï¼Œæ˜¯ES6ä¸­æœ€å®ç”¨çš„ç‰¹æ€§ä¹‹ä¸€ã€‚

```mermaid
graph TB
    subgraph "è§£æ„èµ‹å€¼ç±»å‹"
        A[æ•°ç»„è§£æ„] --> A1[åŸºç¡€è§£æ„]
        A --> A2[é»˜è®¤å€¼]
        A --> A3[å‰©ä½™å…ƒç´ ]
        A --> A4[åµŒå¥—è§£æ„]
        
        B[å¯¹è±¡è§£æ„] --> B1[å±æ€§è§£æ„]
        B --> B2[é‡å‘½å]
        B --> B3[é»˜è®¤å€¼]
        B --> B4[åµŒå¥—è§£æ„]
        
        C[å‚æ•°è§£æ„] --> C1[å‡½æ•°å‚æ•°]
        C --> C2[é»˜è®¤å‚æ•°]
    end
```

<Tabs>
<TabItem value="array-destructuring" label="æ•°ç»„è§£æ„">

#### æ•°ç»„è§£æ„è¯¦è§£

```javascript title="æ•°ç»„è§£æ„å®Œæ•´ç¤ºä¾‹"
// 1. åŸºç¡€æ•°ç»„è§£æ„
const colors = ['red', 'green', 'blue'];
const [first, second, third] = colors;
console.log(first, second, third); // 'red', 'green', 'blue'

// 2. è·³è¿‡å…ƒç´ 
const [primary, , tertiary] = colors;
console.log(primary, tertiary); // 'red', 'blue'

// 3. é»˜è®¤å€¼
const [a, b, c, d = 'yellow'] = colors;
console.log(d); // 'yellow'

// 4. å‰©ä½™å…ƒç´ 
const numbers = [1, 2, 3, 4, 5];
const [head, ...tail] = numbers;
console.log(head); // 1
console.log(tail); // [2, 3, 4, 5]

// 5. åµŒå¥—æ•°ç»„è§£æ„
const nested = [[1, 2], [3, 4], [5, 6]];
const [[x1, y1], [x2, y2]] = nested;
console.log(x1, y1, x2, y2); // 1, 2, 3, 4

// 6. äº¤æ¢å˜é‡
let x = 1, y = 2;
[x, y] = [y, x];
console.log(x, y); // 2, 1

// 7. å‡½æ•°è¿”å›å¤šä¸ªå€¼
function getCoordinates() {
  return [10, 20, 30];
}

const [x, y, z] = getCoordinates();

// 8. å­—ç¬¦ä¸²è§£æ„
const str = 'hello';
const [h, e, l1, l2, o] = str;
console.log(h, e, l1, l2, o); // 'h', 'e', 'l', 'l', 'o'

// 9. å®é™…åº”ç”¨ç¤ºä¾‹
// å¤„ç†APIå“åº”
async function fetchUserData() {
  const response = await fetch('/api/user');
  const [user, posts, comments] = await Promise.all([
    response.json(),
    fetch('/api/posts').then(r => r.json()),
    fetch('/api/comments').then(r => r.json())
  ]);
  
  return { user, posts, comments };
}

// æ•°ç»„æ–¹æ³•é“¾å¼è°ƒç”¨
const processNumbers = (nums) => {
  const [evens, odds] = nums.reduce(
    ([evens, odds], num) => 
      num % 2 === 0 
        ? [[...evens, num], odds]
        : [evens, [...odds, num]],
    [[], []]
  );
  
  return { evens, odds };
};

console.log(processNumbers([1, 2, 3, 4, 5])); 
// { evens: [2, 4], odds: [1, 3, 5] }

// 10. é«˜çº§æ¨¡å¼
// é€’å½’è§£æ„
function flattenArray([head, ...tail]) {
  if (tail.length === 0) return [head];
  
  return Array.isArray(head) 
    ? [...flattenArray(head), ...flattenArray(tail)]
    : [head, ...flattenArray(tail)];
}

const nestedArray = [1, [2, 3], [4, [5, 6]]];
console.log(flattenArray(nestedArray)); // [1, 2, 3, 4, 5, 6]

// æ¨¡å¼åŒ¹é…æ¨¡æ‹Ÿ
function processCommand([command, ...args]) {
  switch (command) {
    case 'create':
      const [type, name] = args;
      return `Creating ${type}: ${name}`;
    
    case 'delete':
      const [id] = args;
      return `Deleting item with id: ${id}`;
    
    case 'update':
      const [targetId, ...updates] = args;
      return `Updating ${targetId} with: ${updates.join(', ')}`;
    
    default:
      return 'Unknown command';
  }
}

console.log(processCommand(['create', 'user', 'john'])); 
// "Creating user: john"
```

</TabItem>
<TabItem value="object-destructuring" label="å¯¹è±¡è§£æ„">

#### å¯¹è±¡è§£æ„è¯¦è§£

```javascript title="å¯¹è±¡è§£æ„å®Œæ•´ç¤ºä¾‹"
// 1. åŸºç¡€å¯¹è±¡è§£æ„
const user = {
  name: 'John Doe',
  age: 30,
  email: 'john@example.com'
};

const { name, age, email } = user;
console.log(name, age, email); // 'John Doe', 30, 'john@example.com'

// 2. é‡å‘½åå˜é‡
const { name: userName, age: userAge } = user;
console.log(userName, userAge); // 'John Doe', 30

// 3. é»˜è®¤å€¼
const { name, age, city = 'Unknown' } = user;
console.log(city); // 'Unknown'

// 4. é‡å‘½å + é»˜è®¤å€¼
const { email: userEmail = 'no-email' } = user;

// 5. åµŒå¥—å¯¹è±¡è§£æ„
const userProfile = {
  personal: {
    name: 'Alice',
    age: 25
  },
  contact: {
    email: 'alice@example.com',
    phone: '123-456-7890'
  },
  preferences: {
    theme: 'dark',
    notifications: {
      email: true,
      push: false
    }
  }
};

const {
  personal: { name: fullName, age: years },
  contact: { email: contactEmail },
  preferences: {
    theme,
    notifications: { email: emailNotifications }
  }
} = userProfile;

// 6. å‰©ä½™å±æ€§
const settings = {
  theme: 'dark',
  fontSize: 14,
  showLineNumbers: true,
  autoSave: true,
  tabSize: 2
};

const { theme, fontSize, ...otherSettings } = settings;
console.log(otherSettings); 
// { showLineNumbers: true, autoSave: true, tabSize: 2 }

// 7. åŠ¨æ€å±æ€§å
const key = 'dynamicKey';
const obj = { [key]: 'dynamicValue', staticKey: 'staticValue' };
const { [key]: dynamicValue, staticKey } = obj;

// 8. å‡½æ•°å‚æ•°è§£æ„
function createUser({ name, age, email = 'unknown' }) {
  return {
    id: Date.now(),
    name,
    age,
    email,
    createdAt: new Date()
  };
}

const newUser = createUser({ name: 'Bob', age: 25 });

// 9. å¤æ‚çš„å‚æ•°è§£æ„
function processApiResponse({
  data: { users = [], posts = [] } = {},
  meta: { page = 1, limit = 10, total = 0 } = {},
  error = null
} = {}) {
  if (error) {
    throw new Error(`API Error: ${error.message}`);
  }
  
  return {
    users: users.slice(0, limit),
    posts: posts.slice(0, limit),
    pagination: { page, limit, total }
  };
}

// 10. å®é™…åº”ç”¨ç¤ºä¾‹
// Reactç»„ä»¶propsè§£æ„
function UserCard({ 
  user: { name, avatar, email }, 
  onEdit, 
  onDelete,
  className = 'user-card' 
}) {
  return (
    <div className={className}>
      <img src={avatar} alt={name} />
      <h3>{name}</h3>
      <p>{email}</p>
      <button onClick={() => onEdit(user)}>Edit</button>
      <button onClick={() => onDelete(user.id)}>Delete</button>
    </div>
  );
}

// APIæ•°æ®å¤„ç†
async function fetchAndProcessUser(userId) {
  const response = await fetch(`/api/users/${userId}`);
  const {
    data: {
      id,
      profile: { firstName, lastName, avatar },
      settings: { theme, language = 'en' },
      stats: { postsCount, followersCount }
    },
    meta: { lastUpdated }
  } = await response.json();
  
  return {
    id,
    fullName: `${firstName} ${lastName}`,
    avatar,
    preferences: { theme, language },
    statistics: { posts: postsCount, followers: followersCount },
    lastUpdated: new Date(lastUpdated)
  };
}

// é…ç½®å¯¹è±¡å¤„ç†
function initializeApp(config = {}) {
  const {
    api: {
      baseURL = 'http://localhost:3000',
      timeout = 5000,
      retries = 3
    } = {},
    ui: {
      theme = 'light',
      animations = true,
      sidebar = { collapsed: false, width: 250 }
    } = {},
    features: {
      analytics = false,
      notifications = true,
      ...otherFeatures
    } = {}
  } = config;
  
  return {
    apiConfig: { baseURL, timeout, retries },
    uiConfig: { theme, animations, sidebar },
    featureFlags: { analytics, notifications, ...otherFeatures }
  };
}

// 11. é«˜çº§æ¨¡å¼
// æ¡ä»¶è§£æ„
function processUserData(userData) {
  const isAdmin = userData.role === 'admin';
  
  const {
    name,
    email,
    ...(isAdmin && { 
      adminLevel: adminLevel = 1,
      permissions: permissions = []
    })
  } = userData;
  
  return isAdmin 
    ? { name, email, adminLevel, permissions }
    : { name, email };
}

// è§£æ„èµ‹å€¼ä¸æ•°ç»„æ–¹æ³•ç»“åˆ
const users = [
  { name: 'Alice', age: 25, city: 'New York' },
  { name: 'Bob', age: 30, city: 'London' },
  { name: 'Charlie', age: 35, city: 'Tokyo' }
];

// æå–ç‰¹å®šå±æ€§
const names = users.map(({ name }) => name);
const cities = users.map(({ city }) => city);

// è¿‡æ»¤å’Œè§£æ„
const youngUsers = users
  .filter(({ age }) => age < 30)
  .map(({ name, city }) => ({ name, city }));

// åˆ†ç»„
const usersByCity = users.reduce((acc, { city, ...user }) => {
  acc[city] = acc[city] || [];
  acc[city].push(user);
  return acc;
}, {});
```

</TabItem>
<TabItem value="spread-operator" label="æ‰©å±•è¿ç®—ç¬¦">

#### æ‰©å±•è¿ç®—ç¬¦åº”ç”¨

```javascript title="æ‰©å±•è¿ç®—ç¬¦å®Œæ•´åº”ç”¨"
// 1. æ•°ç»„æ‰©å±•
const arr1 = [1, 2, 3];
const arr2 = [4, 5, 6];

// æ•°ç»„åˆå¹¶
const combined = [...arr1, ...arr2]; // [1, 2, 3, 4, 5, 6]
const withExtra = [0, ...arr1, 3.5, ...arr2, 7]; // [0, 1, 2, 3, 3.5, 4, 5, 6, 7]

// æ•°ç»„å¤åˆ¶ï¼ˆæµ…æ‹·è´ï¼‰
const copied = [...arr1]; // [1, 2, 3]

// æ•°ç»„è½¬æ¢
const str = 'hello';
const chars = [...str]; // ['h', 'e', 'l', 'l', 'o']

const nodeList = document.querySelectorAll('div');
const divArray = [...nodeList]; // å°†NodeListè½¬ä¸ºæ•°ç»„

// 2. å¯¹è±¡æ‰©å±•
const obj1 = { a: 1, b: 2 };
const obj2 = { c: 3, d: 4 };

// å¯¹è±¡åˆå¹¶
const merged = { ...obj1, ...obj2 }; // { a: 1, b: 2, c: 3, d: 4 }

// å¯¹è±¡å¤åˆ¶ï¼ˆæµ…æ‹·è´ï¼‰
const objCopy = { ...obj1 }; // { a: 1, b: 2 }

// å±æ€§è¦†ç›–
const updated = { ...obj1, b: 20, e: 5 }; // { a: 1, b: 20, e: 5 }

// 3. å‡½æ•°è°ƒç”¨ä¸­çš„æ‰©å±•
function sum(a, b, c) {
  return a + b + c;
}

const numbers = [1, 2, 3];
const result = sum(...numbers); // ç­‰åŒäº sum(1, 2, 3)

// Mathå¯¹è±¡æ–¹æ³•
const nums = [5, 2, 8, 1, 9];
const max = Math.max(...nums); // 9
const min = Math.min(...nums); // 1

// 4. å®ç”¨å·¥å…·å‡½æ•°
// æ•°ç»„å»é‡
const removeDuplicates = (arr) => [...new Set(arr)];
console.log(removeDuplicates([1, 2, 2, 3, 3, 4])); // [1, 2, 3, 4]

// æ•°ç»„æ‰å¹³åŒ–ï¼ˆä¸€å±‚ï¼‰
const flatten = (arr) => [].concat(...arr);
console.log(flatten([[1, 2], [3, 4], [5]])); // [1, 2, 3, 4, 5]

// æ·±åº¦æ‰å¹³åŒ–
const deepFlatten = (arr) => 
  arr.reduce((acc, val) => 
    Array.isArray(val) 
      ? acc.concat(deepFlatten(val))
      : acc.concat(val), 
    []
  );

// å¯¹è±¡æ·±åº¦åˆå¹¶
const deepMerge = (target, source) => {
  const result = { ...target };
  
  for (const key in source) {
    if (source[key] && typeof source[key] === 'object' && !Array.isArray(source[key])) {
      result[key] = deepMerge(result[key] || {}, source[key]);
    } else {
      result[key] = source[key];
    }
  }
  
  return result;
};

// 5. Reactä¸­çš„åº”ç”¨
// çŠ¶æ€æ›´æ–°
const [state, setState] = useState({
  user: { name: 'John', age: 30 },
  settings: { theme: 'dark' }
});

// æ›´æ–°åµŒå¥—çŠ¶æ€
const updateUserAge = (newAge) => {
  setState(prevState => ({
    ...prevState,
    user: {
      ...prevState.user,
      age: newAge
    }
  }));
};

// Propsä¼ é€’
const UserComponent = (props) => {
  const commonProps = { className: 'user', role: 'button' };
  
  return (
    <div {...commonProps} {...props}>
      {props.children}
    </div>
  );
};

// 6. æ•°ç»„æ“ä½œæ¨¡å¼
const todos = [
  { id: 1, text: 'Learn React', completed: false },
  { id: 2, text: 'Build an app', completed: true }
];

// æ·»åŠ æ–°é¡¹
const addTodo = (newTodo) => [...todos, newTodo];

// æ›´æ–°é¡¹
const updateTodo = (id, updates) =>
  todos.map(todo => 
    todo.id === id 
      ? { ...todo, ...updates }
      : todo
  );

// åˆ é™¤é¡¹
const deleteTodo = (id) => todos.filter(todo => todo.id !== id);

// 7. é«˜çº§æ¨¡å¼
// æ¡ä»¶æ‰©å±•
const createUser = (userData, isAdmin = false) => ({
  ...userData,
  role: 'user',
  ...(isAdmin && { 
    role: 'admin',
    permissions: ['read', 'write', 'delete']
  })
});

// åŠ¨æ€å¯¹è±¡æ„å»º
const buildApiRequest = (endpoint, options = {}) => ({
  url: endpoint,
  method: 'GET',
  headers: {
    'Content-Type': 'application/json',
    ...options.headers
  },
  ...options
});

// å‡½æ•°å‚æ•°æ”¶é›†
const createLogger = (level, ...formatters) => {
  return (message, ...args) => {
    const formattedMessage = formatters.reduce(
      (msg, formatter) => formatter(msg),
      message
    );
    console[level](formattedMessage, ...args);
  };
};

const logger = createLogger('log', 
  msg => `[${new Date().toISOString()}]`,
  msg => msg.toUpperCase()
);

// 8. æ€§èƒ½è€ƒè™‘
// é¿å…åœ¨æ¸²æŸ“å‡½æ•°ä¸­ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦
// ä¸å¥½çš„åšæ³•
const BadComponent = ({ items }) => (
  <div>
    {[...items].map(item => <Item key={item.id} {...item} />)}
  </div>
);

// å¥½çš„åšæ³•
const GoodComponent = ({ items }) => {
  const itemsCopy = useMemo(() => [...items], [items]);
  
  return (
    <div>
      {itemsCopy.map(item => <Item key={item.id} {...item} />)}
    </div>
  );
};

// å¤§å¯¹è±¡çš„æµ…æ‹·è´ä¼˜åŒ–
const optimizedCopy = (obj) => {
  if (Object.keys(obj).length > 1000) {
    // å¯¹äºå¤§å¯¹è±¡ï¼Œè€ƒè™‘ä½¿ç”¨å…¶ä»–æ–¹æ³•
    return Object.assign({}, obj);
  }
  return { ...obj };
};
```

</TabItem>
</Tabs> 
#
# 4. æ¨¡å—ç³»ç»Ÿ(ES Modules)

### 4.1 æ¨¡å—å¯¼å…¥å¯¼å‡º

ES6å¼•å…¥çš„æ¨¡å—ç³»ç»Ÿæä¾›äº†æ ‡å‡†åŒ–çš„ä»£ç ç»„ç»‡å’Œå¤ç”¨æ–¹å¼ã€‚

```mermaid
graph LR
    subgraph "ESæ¨¡å—ç³»ç»Ÿ"
        A[export å¯¼å‡º] --> A1[å‘½åå¯¼å‡º]
        A --> A2[é»˜è®¤å¯¼å‡º]
        A --> A3[é‡æ–°å¯¼å‡º]
        
        B[import å¯¼å…¥] --> B1[å‘½åå¯¼å…¥]
        B --> B2[é»˜è®¤å¯¼å…¥]
        B --> B3[åŠ¨æ€å¯¼å…¥]
        B --> B4[å‘½åç©ºé—´å¯¼å…¥]
    end
```

<Tabs>
<TabItem value="export-import" label="å¯¼å…¥å¯¼å‡ºè¯­æ³•">

#### æ¨¡å—å¯¼å…¥å¯¼å‡ºè¯¦è§£

```javascript title="æ¨¡å—å¯¼å‡ºç¤ºä¾‹"
// utils.js - å·¥å…·å‡½æ•°æ¨¡å—
// 1. å‘½åå¯¼å‡º
export const PI = 3.14159;
export const E = 2.71828;

export function add(a, b) {
  return a + b;
}

export function multiply(a, b) {
  return a * b;
}

// æ‰¹é‡å¯¼å‡º
const subtract = (a, b) => a - b;
const divide = (a, b) => a / b;

export { subtract, divide };

// é‡å‘½åå¯¼å‡º
const power = (base, exponent) => Math.pow(base, exponent);
export { power as pow };

// 2. é»˜è®¤å¯¼å‡º
class Calculator {
  constructor() {
    this.result = 0;
  }
  
  add(value) {
    this.result += value;
    return this;
  }
  
  subtract(value) {
    this.result -= value;
    return this;
  }
  
  multiply(value) {
    this.result *= value;
    return this;
  }
  
  divide(value) {
    this.result /= value;
    return this;
  }
  
  getValue() {
    return this.result;
  }
  
  reset() {
    this.result = 0;
    return this;
  }
}

export default Calculator;

// åŒæ—¶æœ‰å‘½åå¯¼å‡ºå’Œé»˜è®¤å¯¼å‡º
export { Calculator as Calc };
```

```javascript title="æ¨¡å—å¯¼å…¥ç¤ºä¾‹"
// main.js - ä¸»åº”ç”¨æ–‡ä»¶
// 1. å‘½åå¯¼å…¥
import { add, multiply, PI } from './utils.js';

console.log(add(2, 3)); // 5
console.log(multiply(4, 5)); // 20
console.log(PI); // 3.14159

// 2. é‡å‘½åå¯¼å…¥
import { subtract as minus, pow } from './utils.js';

console.log(minus(10, 3)); // 7
console.log(pow(2, 3)); // 8

// 3. é»˜è®¤å¯¼å…¥
import Calculator from './utils.js';

const calc = new Calculator();
const result = calc.add(10).multiply(2).subtract(5).getValue();
console.log(result); // 15

// 4. æ··åˆå¯¼å…¥
import Calculator, { add, PI } from './utils.js';

// 5. å‘½åç©ºé—´å¯¼å…¥
import * as MathUtils from './utils.js';

console.log(MathUtils.add(1, 2)); // 3
console.log(MathUtils.PI); // 3.14159
const calculator = new MathUtils.default();

// 6. åŠ¨æ€å¯¼å…¥
async function loadModule() {
  try {
    const module = await import('./utils.js');
    console.log(module.add(1, 2)); // 3
    
    const Calculator = module.default;
    const calc = new Calculator();
    console.log(calc.add(5).getValue()); // 5
  } catch (error) {
    console.error('æ¨¡å—åŠ è½½å¤±è´¥:', error);
  }
}

loadModule();

// æ¡ä»¶åŠ¨æ€å¯¼å…¥
async function conditionalImport(condition) {
  if (condition) {
    const { heavyFunction } = await import('./heavy-module.js');
    return heavyFunction();
  }
  return null;
}
```

</TabItem>
<TabItem value="module-patterns" label="æ¨¡å—æ¨¡å¼">

#### é«˜çº§æ¨¡å—æ¨¡å¼

```javascript title="é«˜çº§æ¨¡å—æ¨¡å¼"
// config.js - é…ç½®æ¨¡å—
const config = {
  development: {
    apiUrl: 'http://localhost:3000/api',
    debug: true,
    logLevel: 'debug'
  },
  production: {
    apiUrl: 'https://api.example.com',
    debug: false,
    logLevel: 'error'
  }
};

const environment = process.env.NODE_ENV || 'development';
export default config[environment];

// logger.js - æ—¥å¿—æ¨¡å—
class Logger {
  constructor(level = 'info') {
    this.level = level;
    this.levels = {
      debug: 0,
      info: 1,
      warn: 2,
      error: 3
    };
  }
  
  log(level, message, ...args) {
    if (this.levels[level] >= this.levels[this.level]) {
      console[level](`[${level.toUpperCase()}]`, message, ...args);
    }
  }
  
  debug(message, ...args) {
    this.log('debug', message, ...args);
  }
  
  info(message, ...args) {
    this.log('info', message, ...args);
  }
  
  warn(message, ...args) {
    this.log('warn', message, ...args);
  }
  
  error(message, ...args) {
    this.log('error', message, ...args);
  }
}

// å•ä¾‹æ¨¡å¼
let instance = null;

export function createLogger(level) {
  if (!instance) {
    instance = new Logger(level);
  }
  return instance;
}

export { Logger };

// api.js - APIæ¨¡å—
import config from './config.js';
import { createLogger } from './logger.js';

const logger = createLogger(config.logLevel);

class ApiClient {
  constructor(baseURL = config.apiUrl) {
    this.baseURL = baseURL;
    this.interceptors = {
      request: [],
      response: []
    };
  }
  
  addRequestInterceptor(interceptor) {
    this.interceptors.request.push(interceptor);
  }
  
  addResponseInterceptor(interceptor) {
    this.interceptors.response.push(interceptor);
  }
  
  async request(url, options = {}) {
    let config = {
      ...options,
      url: `${this.baseURL}${url}`,
      headers: {
        'Content-Type': 'application/json',
        ...options.headers
      }
    };
    
    // åº”ç”¨è¯·æ±‚æ‹¦æˆªå™¨
    for (const interceptor of this.interceptors.request) {
      config = await interceptor(config);
    }
    
    logger.debug('APIè¯·æ±‚:', config);
    
    try {
      let response = await fetch(config.url, config);
      
      // åº”ç”¨å“åº”æ‹¦æˆªå™¨
      for (const interceptor of this.interceptors.response) {
        response = await interceptor(response);
      }
      
      if (!response.ok) {
        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
      }
      
      const data = await response.json();
      logger.debug('APIå“åº”:', data);
      
      return data;
    } catch (error) {
      logger.error('APIè¯·æ±‚å¤±è´¥:', error);
      throw error;
    }
  }
  
  get(url, options) {
    return this.request(url, { ...options, method: 'GET' });
  }
  
  post(url, data, options) {
    return this.request(url, {
      ...options,
      method: 'POST',
      body: JSON.stringify(data)
    });
  }
  
  put(url, data, options) {
    return this.request(url, {
      ...options,
      method: 'PUT',
      body: JSON.stringify(data)
    });
  }
  
  delete(url, options) {
    return this.request(url, { ...options, method: 'DELETE' });
  }
}

// å¯¼å‡ºå•ä¾‹å®ä¾‹
export default new ApiClient();

// ä¹Ÿå¯¼å‡ºç±»ï¼Œå…è®¸åˆ›å»ºå¤šä¸ªå®ä¾‹
export { ApiClient };

// store.js - çŠ¶æ€ç®¡ç†æ¨¡å—
class Store {
  constructor(initialState = {}) {
    this.state = { ...initialState };
    this.listeners = [];
    this.middlewares = [];
  }
  
  getState() {
    return { ...this.state };
  }
  
  setState(newState) {
    const prevState = { ...this.state };
    this.state = { ...this.state, ...newState };
    
    // åº”ç”¨ä¸­é—´ä»¶
    for (const middleware of this.middlewares) {
      middleware(prevState, this.state);
    }
    
    // é€šçŸ¥ç›‘å¬å™¨
    this.listeners.forEach(listener => {
      listener(this.state, prevState);
    });
  }
  
  subscribe(listener) {
    this.listeners.push(listener);
    
    // è¿”å›å–æ¶ˆè®¢é˜…å‡½æ•°
    return () => {
      const index = this.listeners.indexOf(listener);
      if (index > -1) {
        this.listeners.splice(index, 1);
      }
    };
  }
  
  use(middleware) {
    this.middlewares.push(middleware);
  }
}

// åˆ›å»ºå…¨å±€store
const store = new Store({
  user: null,
  theme: 'light',
  language: 'zh-CN'
});

// æ·»åŠ æ—¥å¿—ä¸­é—´ä»¶
store.use((prevState, nextState) => {
  logger.debug('çŠ¶æ€å˜åŒ–:', { prevState, nextState });
});

export default store;
export { Store };

// app.js - åº”ç”¨å…¥å£
import config from './config.js';
import { createLogger } from './logger.js';
import apiClient from './api.js';
import store from './store.js';

const logger = createLogger(config.logLevel);

class App {
  constructor() {
    this.initialized = false;
  }
  
  async init() {
    if (this.initialized) return;
    
    logger.info('åº”ç”¨åˆå§‹åŒ–å¼€å§‹');
    
    try {
      // è®¾ç½®APIæ‹¦æˆªå™¨
      apiClient.addRequestInterceptor(async (config) => {
        const token = store.getState().user?.token;
        if (token) {
          config.headers.Authorization = `Bearer ${token}`;
        }
        return config;
      });
      
      // åŠ è½½ç”¨æˆ·ä¿¡æ¯
      await this.loadUser();
      
      // è®¢é˜…çŠ¶æ€å˜åŒ–
      store.subscribe((state, prevState) => {
        if (state.theme !== prevState.theme) {
          this.updateTheme(state.theme);
        }
      });
      
      this.initialized = true;
      logger.info('åº”ç”¨åˆå§‹åŒ–å®Œæˆ');
      
    } catch (error) {
      logger.error('åº”ç”¨åˆå§‹åŒ–å¤±è´¥:', error);
      throw error;
    }
  }
  
  async loadUser() {
    try {
      const user = await apiClient.get('/user/profile');
      store.setState({ user });
    } catch (error) {
      logger.warn('ç”¨æˆ·ä¿¡æ¯åŠ è½½å¤±è´¥:', error);
    }
  }
  
  updateTheme(theme) {
    document.documentElement.setAttribute('data-theme', theme);
    logger.info('ä¸»é¢˜å·²æ›´æ–°:', theme);
  }
  
  async login(credentials) {
    try {
      const response = await apiClient.post('/auth/login', credentials);
      store.setState({ user: response.user });
      logger.info('ç”¨æˆ·ç™»å½•æˆåŠŸ');
      return response;
    } catch (error) {
      logger.error('ç™»å½•å¤±è´¥:', error);
      throw error;
    }
  }
  
  logout() {
    store.setState({ user: null });
    logger.info('ç”¨æˆ·å·²ç™»å‡º');
  }
}

export default new App();
```

</TabItem>
<TabItem value="tree-shaking" label="Tree Shakingä¼˜åŒ–">

#### Tree Shakingä¸æ¨¡å—ä¼˜åŒ–

```javascript title="Tree Shakingä¼˜åŒ–ç¤ºä¾‹"
// utils/math.js - æ•°å­¦å·¥å…·å‡½æ•°
export const add = (a, b) => a + b;
export const subtract = (a, b) => a - b;
export const multiply = (a, b) => a * b;
export const divide = (a, b) => a / b;
export const power = (base, exp) => Math.pow(base, exp);
export const sqrt = (n) => Math.sqrt(n);

// å¤æ‚å‡½æ•°ï¼Œå¯èƒ½ä¸ä¼šè¢«ä½¿ç”¨
export const complexCalculation = (data) => {
  // å¤§é‡è®¡ç®—é€»è¾‘
  return data.reduce((acc, val) => acc + val * val, 0);
};

// utils/string.js - å­—ç¬¦ä¸²å·¥å…·å‡½æ•°
export const capitalize = (str) => str.charAt(0).toUpperCase() + str.slice(1);
export const camelCase = (str) => str.replace(/-([a-z])/g, (g) => g[1].toUpperCase());
export const kebabCase = (str) => str.replace(/([A-Z])/g, '-$1').toLowerCase();
export const truncate = (str, length) => str.length > length ? str.slice(0, length) + '...' : str;

// å¤§å‹å·¥å…·å‡½æ•°ï¼Œå¯èƒ½ä¸ä¼šè¢«ä½¿ç”¨
export const advancedStringProcessing = (str) => {
  // å¤æ‚çš„å­—ç¬¦ä¸²å¤„ç†é€»è¾‘
  return str.split('').reverse().join('').toUpperCase();
};

// utils/index.js - ç»Ÿä¸€å¯¼å‡ºï¼ˆé¿å…è¿™ç§åšæ³•ï¼Œä¸åˆ©äºTree Shakingï¼‰
// ä¸æ¨èçš„åšæ³•
export * from './math.js';
export * from './string.js';

// æ¨èçš„åšæ³• - æ˜ç¡®å¯¼å‡ºéœ€è¦çš„å‡½æ•°
export { add, subtract, multiply, divide } from './math.js';
export { capitalize, camelCase, kebabCase } from './string.js';

// main.js - ä¸»åº”ç”¨æ–‡ä»¶
// Tree Shakingå‹å¥½çš„å¯¼å…¥æ–¹å¼
import { add, multiply } from './utils/math.js';
import { capitalize } from './utils/string.js';

// åªæœ‰è¿™äº›å‡½æ•°ä¼šè¢«åŒ…å«åœ¨æœ€ç»ˆçš„bundleä¸­
console.log(add(2, 3)); // 5
console.log(multiply(4, 5)); // 20
console.log(capitalize('hello')); // "Hello"

// åŠ¨æ€å¯¼å…¥ä¼˜åŒ–
async function loadHeavyModule() {
  // åªåœ¨éœ€è¦æ—¶åŠ è½½å¤§å‹æ¨¡å—
  const { heavyFunction } = await import('./heavy-module.js');
  return heavyFunction();
}

// æ¡ä»¶åŠ è½½
if (process.env.NODE_ENV === 'development') {
  import('./dev-tools.js').then(devTools => {
    devTools.init();
  });
}

// webpack.config.js - Webpacké…ç½®ç¤ºä¾‹
module.exports = {
  mode: 'production', // å¯ç”¨Tree Shaking
  optimization: {
    usedExports: true, // æ ‡è®°æœªä½¿ç”¨çš„å¯¼å‡º
    sideEffects: false, // å£°æ˜ä»£ç æ— å‰¯ä½œç”¨
    // æˆ–è€…æŒ‡å®šæœ‰å‰¯ä½œç”¨çš„æ–‡ä»¶
    // sideEffects: ['*.css', './src/polyfills.js']
  },
  resolve: {
    // ä¼˜å…ˆä½¿ç”¨ESæ¨¡å—ç‰ˆæœ¬
    mainFields: ['module', 'main']
  }
};

// package.json - åŒ…é…ç½®
{
  "name": "my-package",
  "version": "1.0.0",
  "main": "dist/index.js",
  "module": "dist/index.esm.js", // ESæ¨¡å—ç‰ˆæœ¬
  "sideEffects": false, // å£°æ˜åŒ…æ— å‰¯ä½œç”¨
  "exports": {
    ".": {
      "import": "./dist/index.esm.js",
      "require": "./dist/index.js"
    },
    "./math": {
      "import": "./dist/math.esm.js",
      "require": "./dist/math.js"
    }
  }
}

// æ¨¡å—åˆ†æå·¥å…·
class BundleAnalyzer {
  static analyzeImports(code) {
    const importRegex = /import\s+(?:(?:\{[^}]*\}|\*\s+as\s+\w+|\w+)\s+from\s+)?['"]([^'"]+)['"]/g;
    const imports = [];
    let match;
    
    while ((match = importRegex.exec(code)) !== null) {
      imports.push(match[1]);
    }
    
    return imports;
  }
  
  static findUnusedExports(exports, imports) {
    return exports.filter(exp => !imports.includes(exp));
  }
  
  static generateReport(modules) {
    const report = {
      totalModules: modules.length,
      unusedExports: [],
      circularDependencies: [],
      bundleSize: 0
    };
    
    // åˆ†æé€»è¾‘
    modules.forEach(module => {
      // æ£€æŸ¥æœªä½¿ç”¨çš„å¯¼å‡º
      // æ£€æŸ¥å¾ªç¯ä¾èµ–
      // è®¡ç®—bundleå¤§å°
    });
    
    return report;
  }
}
```

</TabItem>
</Tabs>

## 5. ç±»ä¸ç»§æ‰¿

### 5.1 ES6ç±»è¯­æ³•

ES6å¼•å…¥çš„classè¯­æ³•æä¾›äº†æ›´æ¸…æ™°çš„é¢å‘å¯¹è±¡ç¼–ç¨‹æ–¹å¼ã€‚

<Tabs>
<TabItem value="class-basics" label="ç±»åŸºç¡€">

#### ç±»çš„åŸºæœ¬è¯­æ³•

```javascript title="ES6ç±»è¯¦è§£"
// åŸºç¡€ç±»å®šä¹‰
class Person {
  // é™æ€å±æ€§
  static species = 'Homo sapiens';
  
  // ç§æœ‰å­—æ®µï¼ˆES2022ï¼‰
  #id = Math.random().toString(36);
  
  // æ„é€ å‡½æ•°
  constructor(name, age) {
    this.name = name;
    this.age = age;
    this._email = ''; // çº¦å®šçš„ç§æœ‰å±æ€§
  }
  
  // å®ä¾‹æ–¹æ³•
  introduce() {
    return `Hello, I'm ${this.name}, ${this.age} years old.`;
  }
  
  // Getter
  get email() {
    return this._email;
  }
  
  // Setter
  set email(value) {
    if (this.validateEmail(value)) {
      this._email = value;
    } else {
      throw new Error('Invalid email format');
    }
  }
  
  // ç§æœ‰æ–¹æ³•
  #generateId() {
    return Math.random().toString(36).substr(2, 9);
  }
  
  // å…¬å…±æ–¹æ³•è°ƒç”¨ç§æœ‰æ–¹æ³•
  getId() {
    return this.#id;
  }
  
  // é™æ€æ–¹æ³•
  static createFromString(str) {
    const [name, age] = str.split(',');
    return new Person(name.trim(), parseInt(age.trim()));
  }
  
  static compareAge(person1, person2) {
    return person1.age - person2.age;
  }
  
  // éªŒè¯æ–¹æ³•
  validateEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
  }
  
  // è½¬æ¢ä¸ºJSON
  toJSON() {
    return {
      name: this.name,
      age: this.age,
      email: this._email
    };
  }
  
  // å­—ç¬¦ä¸²è¡¨ç¤º
  toString() {
    return `Person(${this.name}, ${this.age})`;
  }
}

// ä½¿ç”¨ç±»
const person1 = new Person('Alice', 25);
console.log(person1.introduce()); // "Hello, I'm Alice, 25 years old."

person1.email = 'alice@example.com';
console.log(person1.email); // "alice@example.com"

console.log(person1.getId()); // ç§æœ‰ID

// é™æ€æ–¹æ³•ä½¿ç”¨
const person2 = Person.createFromString('Bob, 30');
console.log(Person.compareAge(person1, person2)); // -5

console.log(Person.species); // "Homo sapiens"
```

</TabItem>
<TabItem value="inheritance" label="ç»§æ‰¿">

#### ç±»ç»§æ‰¿è¯¦è§£

```javascript title="ç±»ç»§æ‰¿ç¤ºä¾‹"
// åŸºç±»
class Animal {
  constructor(name, species) {
    this.name = name;
    this.species = species;
    this.energy = 100;
  }
  
  eat(food) {
    console.log(`${this.name} is eating ${food}`);
    this.energy += 10;
  }
  
  sleep() {
    console.log(`${this.name} is sleeping`);
    this.energy += 20;
  }
  
  move() {
    console.log(`${this.name} is moving`);
    this.energy -= 5;
  }
  
  getStatus() {
    return `${this.name} (${this.species}) - Energy: ${this.energy}`;
  }
}

// ç»§æ‰¿ç±»
class Dog extends Animal {
  constructor(name, breed) {
    super(name, 'Canine'); // è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°
    this.breed = breed;
    this.tricks = [];
  }
  
  // é‡å†™çˆ¶ç±»æ–¹æ³•
  move() {
    console.log(`${this.name} is running`);
    this.energy -= 3; // ç‹—è·‘æ­¥æ¶ˆè€—æ›´å°‘èƒ½é‡
  }
  
  // æ–°å¢æ–¹æ³•
  bark() {
    console.log(`${this.name} says: Woof!`);
    this.energy -= 2;
  }
  
  learnTrick(trick) {
    this.tricks.push(trick);
    console.log(`${this.name} learned ${trick}`);
  }
  
  performTrick(trick) {
    if (this.tricks.includes(trick)) {
      console.log(`${this.name} performs ${trick}`);
      this.energy -= 5;
    } else {
      console.log(`${this.name} doesn't know ${trick}`);
    }
  }
  
  // é‡å†™getStatusæ–¹æ³•
  getStatus() {
    const baseStatus = super.getStatus(); // è°ƒç”¨çˆ¶ç±»æ–¹æ³•
    return `${baseStatus} - Breed: ${this.breed} - Tricks: ${this.tricks.length}`;
  }
}

// å¤šå±‚ç»§æ‰¿
class ServiceDog extends Dog {
  constructor(name, breed, certification) {
    super(name, breed);
    this.certification = certification;
    this.isWorking = false;
  }
  
  startWork() {
    this.isWorking = true;
    console.log(`${this.name} is now working`);
  }
  
  stopWork() {
    this.isWorking = false;
    console.log(`${this.name} is off duty`);
  }
  
  // é‡å†™moveæ–¹æ³•
  move() {
    if (this.isWorking) {
      console.log(`${this.name} is carefully guiding`);
      this.energy -= 2;
    } else {
      super.move(); // è°ƒç”¨çˆ¶ç±»çš„moveæ–¹æ³•
    }
  }
  
  getStatus() {
    const baseStatus = super.getStatus();
    return `${baseStatus} - Certification: ${this.certification} - Working: ${this.isWorking}`;
  }
}

// ä½¿ç”¨ç»§æ‰¿
const dog = new Dog('Buddy', 'Golden Retriever');
dog.eat('kibble');
dog.bark();
dog.learnTrick('sit');
dog.learnTrick('fetch');
dog.performTrick('sit');
console.log(dog.getStatus());

const serviceDog = new ServiceDog('Max', 'German Shepherd', 'Guide Dog');
serviceDog.startWork();
serviceDog.move();
serviceDog.stopWork();
serviceDog.move();
console.log(serviceDog.getStatus());

// Mixinæ¨¡å¼ - å¤šé‡ç»§æ‰¿çš„æ›¿ä»£æ–¹æ¡ˆ
const Flyable = {
  fly() {
    console.log(`${this.name} is flying`);
    this.energy -= 10;
  },
  
  land() {
    console.log(`${this.name} has landed`);
  }
};

const Swimmable = {
  swim() {
    console.log(`${this.name} is swimming`);
    this.energy -= 8;
  },
  
  dive() {
    console.log(`${this.name} is diving`);
    this.energy -= 12;
  }
};

// åº”ç”¨Mixin
class Bird extends Animal {
  constructor(name, species) {
    super(name, species);
  }
}

// å°†Mixinæ··å…¥åˆ°ç±»ä¸­
Object.assign(Bird.prototype, Flyable);

class Duck extends Bird {
  constructor(name) {
    super(name, 'Duck');
  }
}

// é¸­å­æ—¢èƒ½é£åˆèƒ½æ¸¸æ³³
Object.assign(Duck.prototype, Flyable, Swimmable);

const duck = new Duck('Donald');
duck.fly();
duck.swim();
duck.dive();
duck.land();

// æŠ½è±¡ç±»æ¨¡æ‹Ÿ
class AbstractShape {
  constructor() {
    if (new.target === AbstractShape) {
      throw new Error('Cannot instantiate abstract class');
    }
  }
  
  // æŠ½è±¡æ–¹æ³•
  getArea() {
    throw new Error('Abstract method must be implemented');
  }
  
  getPerimeter() {
    throw new Error('Abstract method must be implemented');
  }
  
  // å…·ä½“æ–¹æ³•
  describe() {
    return `This shape has an area of ${this.getArea()} and perimeter of ${this.getPerimeter()}`;
  }
}

class Rectangle extends AbstractShape {
  constructor(width, height) {
    super();
    this.width = width;
    this.height = height;
  }
  
  getArea() {
    return this.width * this.height;
  }
  
  getPerimeter() {
    return 2 * (this.width + this.height);
  }
}

class Circle extends AbstractShape {
  constructor(radius) {
    super();
    this.radius = radius;
  }
  
  getArea() {
    return Math.PI * this.radius * this.radius;
  }
  
  getPerimeter() {
    return 2 * Math.PI * this.radius;
  }
}

// ä½¿ç”¨æŠ½è±¡ç±»
const rectangle = new Rectangle(5, 3);
console.log(rectangle.describe()); // "This shape has an area of 15 and perimeter of 16"

const circle = new Circle(4);
console.log(circle.describe()); // "This shape has an area of 50.26... and perimeter of 25.13..."

// å°è¯•å®ä¾‹åŒ–æŠ½è±¡ç±»ä¼šæŠ›å‡ºé”™è¯¯
// const shape = new AbstractShape(); // Error: Cannot instantiate abstract class
```

</TabItem>
<TabItem value="advanced-patterns" label="é«˜çº§æ¨¡å¼">

#### é«˜çº§ç±»æ¨¡å¼

```javascript title="é«˜çº§ç±»æ¨¡å¼ç¤ºä¾‹"
// 1. è£…é¥°å™¨æ¨¡å¼ï¼ˆä½¿ç”¨ç±»ï¼‰
class Component {
  operation() {
    return 'Component';
  }
}

class Decorator extends Component {
  constructor(component) {
    super();
    this.component = component;
  }
  
  operation() {
    return this.component.operation();
  }
}

class ConcreteDecoratorA extends Decorator {
  operation() {
    return `ConcreteDecoratorA(${super.operation()})`;
  }
}

class ConcreteDecoratorB extends Decorator {
  operation() {
    return `ConcreteDecoratorB(${super.operation()})`;
  }
}

// ä½¿ç”¨è£…é¥°å™¨
let component = new Component();
component = new ConcreteDecoratorA(component);
component = new ConcreteDecoratorB(component);
console.log(component.operation()); // "ConcreteDecoratorB(ConcreteDecoratorA(Component))"

// 2. è§‚å¯Ÿè€…æ¨¡å¼
class EventEmitter {
  constructor() {
    this.events = {};
  }
  
  on(event, listener) {
    if (!this.events[event]) {
      this.events[event] = [];
    }
    this.events[event].push(listener);
  }
  
  off(event, listenerToRemove) {
    if (!this.events[event]) return;
    
    this.events[event] = this.events[event].filter(
      listener => listener !== listenerToRemove
    );
  }
  
  emit(event, ...args) {
    if (!this.events[event]) return;
    
    this.events[event].forEach(listener => {
      listener.apply(this, args);
    });
  }
  
  once(event, listener) {
    const onceListener = (...args) => {
      listener.apply(this, args);
      this.off(event, onceListener);
    };
    this.on(event, onceListener);
  }
}

class Model extends EventEmitter {
  constructor(data = {}) {
    super();
    this.data = { ...data };
  }
  
  set(key, value) {
    const oldValue = this.data[key];
    this.data[key] = value;
    this.emit('change', key, value, oldValue);
    this.emit(`change:${key}`, value, oldValue);
  }
  
  get(key) {
    return this.data[key];
  }
  
  toJSON() {
    return { ...this.data };
  }
}

// ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼
const model = new Model({ name: 'John', age: 25 });

model.on('change', (key, newValue, oldValue) => {
  console.log(`${key} changed from ${oldValue} to ${newValue}`);
});

model.on('change:name', (newValue, oldValue) => {
  console.log(`Name specifically changed from ${oldValue} to ${newValue}`);
});

model.set('name', 'Jane'); // è§¦å‘ä¸¤ä¸ªäº‹ä»¶
model.set('age', 26); // è§¦å‘changeäº‹ä»¶

// 3. å•ä¾‹æ¨¡å¼
class Singleton {
  constructor() {
    if (Singleton.instance) {
      return Singleton.instance;
    }
    
    this.data = {};
    Singleton.instance = this;
  }
  
  static getInstance() {
    if (!Singleton.instance) {
      Singleton.instance = new Singleton();
    }
    return Singleton.instance;
  }
  
  setData(key, value) {
    this.data[key] = value;
  }
  
  getData(key) {
    return this.data[key];
  }
}

// ä½¿ç”¨å•ä¾‹
const singleton1 = new Singleton();
const singleton2 = new Singleton();
const singleton3 = Singleton.getInstance();

console.log(singleton1 === singleton2); // true
console.log(singleton2 === singleton3); // true

singleton1.setData('test', 'value');
console.log(singleton2.getData('test')); // 'value'

// 4. å·¥å‚æ¨¡å¼
class Product {
  constructor(name) {
    this.name = name;
  }
}

class ConcreteProductA extends Product {
  constructor() {
    super('Product A');
  }
  
  operation() {
    return 'ConcreteProductA operation';
  }
}

class ConcreteProductB extends Product {
  constructor() {
    super('Product B');
  }
  
  operation() {
    return 'ConcreteProductB operation';
  }
}

class ProductFactory {
  static createProduct(type) {
    switch (type) {
      case 'A':
        return new ConcreteProductA();
      case 'B':
        return new ConcreteProductB();
      default:
        throw new Error('Unknown product type');
    }
  }
}

// ä½¿ç”¨å·¥å‚æ¨¡å¼
const productA = ProductFactory.createProduct('A');
const productB = ProductFactory.createProduct('B');

console.log(productA.operation()); // "ConcreteProductA operation"
console.log(productB.operation()); // "ConcreteProductB operation"

// 5. å»ºé€ è€…æ¨¡å¼
class User {
  constructor() {
    this.name = '';
    this.email = '';
    this.age = 0;
    this.address = '';
    this.phone = '';
  }
}

class UserBuilder {
  constructor() {
    this.user = new User();
  }
  
  setName(name) {
    this.user.name = name;
    return this;
  }
  
  setEmail(email) {
    this.user.email = email;
    return this;
  }
  
  setAge(age) {
    this.user.age = age;
    return this;
  }
  
  setAddress(address) {
    this.user.address = address;
    return this;
  }
  
  setPhone(phone) {
    this.user.phone = phone;
    return this;
  }
  
  build() {
    return this.user;
  }
}

// ä½¿ç”¨å»ºé€ è€…æ¨¡å¼
const user = new UserBuilder()
  .setName('John Doe')
  .setEmail('john@example.com')
  .setAge(30)
  .setAddress('123 Main St')
  .setPhone('555-1234')
  .build();

console.log(user);

// 6. ç­–ç•¥æ¨¡å¼
class Strategy {
  execute(data) {
    throw new Error('Strategy execute method must be implemented');
  }
}

class ConcreteStrategyA extends Strategy {
  execute(data) {
    return data.sort((a, b) => a - b); // å‡åºæ’åº
  }
}

class ConcreteStrategyB extends Strategy {
  execute(data) {
    return data.sort((a, b) => b - a); // é™åºæ’åº
  }
}

class ConcreteStrategyC extends Strategy {
  execute(data) {
    return data.filter(item => item % 2 === 0); // è¿‡æ»¤å¶æ•°
  }
}

class Context {
  constructor(strategy) {
    this.strategy = strategy;
  }
  
  setStrategy(strategy) {
    this.strategy = strategy;
  }
  
  executeStrategy(data) {
    return this.strategy.execute(data);
  }
}

// ä½¿ç”¨ç­–ç•¥æ¨¡å¼
const data = [5, 2, 8, 1, 9, 3];
const context = new Context(new ConcreteStrategyA());

console.log(context.executeStrategy([...data])); // [1, 2, 3, 5, 8, 9]

context.setStrategy(new ConcreteStrategyB());
console.log(context.executeStrategy([...data])); // [9, 8, 5, 3, 2, 1]

context.setStrategy(new ConcreteStrategyC());
console.log(context.executeStrategy([...data])); // [2, 8]
```

</TabItem>
</Tabs>

## é¢è¯•é¢˜

### 1. letã€constå’Œvarçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ

**ç­”æ¡ˆï¼š**
- **ä½œç”¨åŸŸ**ï¼švaræ˜¯å‡½æ•°ä½œç”¨åŸŸï¼Œletå’Œconstæ˜¯å—çº§ä½œç”¨åŸŸ
- **å˜é‡æå‡**ï¼švarä¼šæå‡å¹¶åˆå§‹åŒ–ä¸ºundefinedï¼Œletå’Œconstä¼šæå‡ä½†ä¸åˆå§‹åŒ–ï¼ˆæš‚æ—¶æ€§æ­»åŒºï¼‰
- **é‡å¤å£°æ˜**ï¼švarå…è®¸é‡å¤å£°æ˜ï¼Œletå’Œconstä¸å…è®¸
- **é‡æ–°èµ‹å€¼**ï¼švarå’Œletå¯ä»¥é‡æ–°èµ‹å€¼ï¼Œconstä¸å¯ä»¥
- **å…¨å±€å¯¹è±¡å±æ€§**ï¼švarå£°æ˜çš„å…¨å±€å˜é‡ä¼šæˆä¸ºå…¨å±€å¯¹è±¡çš„å±æ€§ï¼Œletå’Œconstä¸ä¼š

### 2. ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°çš„åŒºåˆ«ï¼Ÿ

**ç­”æ¡ˆï¼š**
- **thisç»‘å®š**ï¼šç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisï¼Œç»§æ‰¿å¤–å±‚ä½œç”¨åŸŸçš„thisï¼›æ™®é€šå‡½æ•°çš„thisç”±è°ƒç”¨æ–¹å¼å†³å®š
- **argumentså¯¹è±¡**ï¼šç®­å¤´å‡½æ•°æ²¡æœ‰argumentså¯¹è±¡ï¼Œæ™®é€šå‡½æ•°æœ‰
- **æ„é€ å‡½æ•°**ï¼šç®­å¤´å‡½æ•°ä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°ï¼Œæ™®é€šå‡½æ•°å¯ä»¥
- **åŸå‹**ï¼šç®­å¤´å‡½æ•°æ²¡æœ‰prototypeå±æ€§ï¼Œæ™®é€šå‡½æ•°æœ‰
- **yieldå…³é”®å­—**ï¼šç®­å¤´å‡½æ•°ä¸èƒ½ä½¿ç”¨yieldï¼Œä¸èƒ½ä½œä¸ºç”Ÿæˆå™¨å‡½æ•°

### 3. ä»€ä¹ˆæ˜¯è§£æ„èµ‹å€¼ï¼Ÿæœ‰å“ªäº›åº”ç”¨åœºæ™¯ï¼Ÿ

**ç­”æ¡ˆï¼š**
è§£æ„èµ‹å€¼æ˜¯ä¸€ç§JavaScriptè¡¨è¾¾å¼ï¼Œå¯ä»¥å°†æ•°ç»„æˆ–å¯¹è±¡çš„å±æ€§è§£åŒ…åˆ°ä¸åŒçš„å˜é‡ä¸­ã€‚

åº”ç”¨åœºæ™¯ï¼š
- äº¤æ¢å˜é‡ï¼š`[a, b] = [b, a]`
- å‡½æ•°å‚æ•°ï¼š`function({name, age}) {}`
- æå–æ•°ç»„å…ƒç´ ï¼š`const [first, second] = array`
- æå–å¯¹è±¡å±æ€§ï¼š`const {name, age} = person`
- è®¾ç½®é»˜è®¤å€¼ï¼š`const {name = 'Unknown'} = person`

### 4. ES6æ¨¡å—ä¸CommonJSæ¨¡å—çš„åŒºåˆ«ï¼Ÿ

**ç­”æ¡ˆï¼š**
- **åŠ è½½æ—¶æœº**ï¼šES6æ¨¡å—æ˜¯ç¼–è¯‘æ—¶åŠ è½½ï¼ŒCommonJSæ˜¯è¿è¡Œæ—¶åŠ è½½
- **è¾“å‡º**ï¼šES6æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ï¼ŒCommonJSè¾“å‡ºçš„æ˜¯å€¼çš„æ‹·è´
- **thisæŒ‡å‘**ï¼šES6æ¨¡å—é¡¶å±‚thisæ˜¯undefinedï¼ŒCommonJSé¡¶å±‚thisæŒ‡å‘å½“å‰æ¨¡å—
- **å¾ªç¯ä¾èµ–**ï¼šES6æ¨¡å—æ”¯æŒå¾ªç¯ä¾èµ–ï¼ŒCommonJSå¯èƒ½å‡ºç°é—®é¢˜
- **Tree Shaking**ï¼šES6æ¨¡å—æ”¯æŒé™æ€åˆ†æï¼Œå¯ä»¥è¿›è¡ŒTree Shakingä¼˜åŒ–

### 5. ä»€ä¹ˆæ˜¯Promiseï¼Ÿå¦‚ä½•å¤„ç†Promiseé“¾ï¼Ÿ

**ç­”æ¡ˆï¼š**
Promiseæ˜¯å¼‚æ­¥ç¼–ç¨‹çš„è§£å†³æ–¹æ¡ˆï¼Œä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå®Œæˆæˆ–å¤±è´¥ã€‚

Promiseæœ‰ä¸‰ç§çŠ¶æ€ï¼š
- pendingï¼ˆè¿›è¡Œä¸­ï¼‰
- fulfilledï¼ˆå·²æˆåŠŸï¼‰
- rejectedï¼ˆå·²å¤±è´¥ï¼‰

Promiseé“¾å¤„ç†ï¼š
```javascript
promise
  .then(result => {
    // å¤„ç†æˆåŠŸç»“æœ
    return nextPromise;
  })
  .then(result => {
    // å¤„ç†ä¸‹ä¸€ä¸ªç»“æœ
  })
  .catch(error => {
    // å¤„ç†é”™è¯¯
  })
  .finally(() => {
    // æ— è®ºæˆåŠŸå¤±è´¥éƒ½æ‰§è¡Œ
  });
```

é€šè¿‡æŒæ¡è¿™äº›ES6+ç‰¹æ€§ï¼Œå¯ä»¥ç¼–å†™æ›´ç°ä»£ã€æ›´ç®€æ´ã€æ›´å¼ºå¤§çš„JavaScriptä»£ç ï¼Œæå‡å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚