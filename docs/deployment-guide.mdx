---
sidebar_position: 2
title: ğŸš€ è‡ªåŠ¨éƒ¨ç½²æŒ‡å—
description: å®Œæ•´çš„ GitHub Actions è‡ªåŠ¨éƒ¨ç½²ä½¿ç”¨è¯´æ˜
tags: [éƒ¨ç½², GitHub Actions, CI/CD]
---

# ğŸš€ è‡ªåŠ¨éƒ¨ç½²å®Œæ•´æŒ‡å—

æœ¬é¡¹ç›®å·²é…ç½® **GitHub Actions è‡ªåŠ¨éƒ¨ç½²**ï¼Œæ¯æ¬¡æ¨é€ä»£ç éƒ½ä¼šè‡ªåŠ¨æ„å»ºå¹¶å‘å¸ƒåˆ° GitHub Pagesã€‚

## ğŸ“‹ éƒ¨ç½²ç³»ç»Ÿæ¦‚è§ˆ

### è‡ªåŠ¨åŒ–æµç¨‹

```mermaid
graph LR
    A[æœ¬åœ°ä¿®æ”¹ä»£ç ] --> B[Git Commit]
    B --> C[Git Push]
    C --> D[è§¦å‘ GitHub Actions]
    D --> E[å®‰è£…ä¾èµ–]
    E --> F[æ„å»ºç½‘ç«™]
    F --> G[éƒ¨ç½²åˆ° gh-pages]
    G --> H[ç½‘ç«™è‡ªåŠ¨æ›´æ–°]
    
    style D fill:#667eea
    style H fill:#4ade80
```

### æŠ€æœ¯æ ˆ

- **CI/CD**: GitHub Actions
- **æ„å»ºå·¥å…·**: Docusaurus 3.9.2
- **æ‰˜ç®¡å¹³å°**: GitHub Pages
- **Node ç‰ˆæœ¬**: 20.x

## ğŸ¯ æ—¥å¸¸ä½¿ç”¨æµç¨‹

### 1ï¸âƒ£ ä¿®æ”¹å†…å®¹

ç¼–è¾‘ä»»ä½•æ–‡ä»¶ï¼š
- ğŸ“ å†™åšå®¢æ–‡ç« 
- ğŸ“š æ›´æ–°æ–‡æ¡£
- ğŸ¨ ä¿®æ”¹æ ·å¼
- âš™ï¸ è°ƒæ•´é…ç½®

### 2ï¸âƒ£ æäº¤æ›´æ”¹

```bash
# æŸ¥çœ‹ä¿®æ”¹çš„æ–‡ä»¶
git status

# æ·»åŠ æ‰€æœ‰ä¿®æ”¹
git add .

# æäº¤æ›´æ”¹ï¼ˆå†™æ¸…æ¥šæ”¹äº†ä»€ä¹ˆï¼‰
git commit -m "ä½ çš„æäº¤ä¿¡æ¯"
```

**æäº¤ä¿¡æ¯è§„èŒƒ**ï¼š
```bash
# æ–°åŠŸèƒ½
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½è¯´æ˜"

# ä¿®å¤é—®é¢˜
git commit -m "fix: ä¿®å¤æŸä¸ªbug"

# æ–‡æ¡£æ›´æ–°
git commit -m "docs: æ›´æ–°æ–‡æ¡£å†…å®¹"

# æ ·å¼è°ƒæ•´
git commit -m "style: ä¼˜åŒ–é¡µé¢æ ·å¼"

# é…ç½®ä¿®æ”¹
git commit -m "chore: æ›´æ–°é…ç½®æ–‡ä»¶"
```

### 3ï¸âƒ£ æ¨é€åˆ° GitHub

```bash
# æ¨é€åˆ°è¿œç¨‹ä»“åº“
git push origin main
```

### 4ï¸âƒ£ è‡ªåŠ¨éƒ¨ç½²å¼€å§‹ ğŸ‰

**æ¨é€åä¼šç«‹å³è‡ªåŠ¨è§¦å‘éƒ¨ç½²ï¼Œæ— éœ€ä»»ä½•æ‰‹åŠ¨æ“ä½œï¼**

## ğŸ“Š ç›‘æ§éƒ¨ç½²çŠ¶æ€

### æŸ¥çœ‹éƒ¨ç½²è¿›åº¦

è®¿é—® GitHub Actions é¡µé¢ï¼š
```
https://github.com/laby-umr/laby-blog-private/actions
```

### çŠ¶æ€æ ‡è¯†

| å›¾æ ‡ | çŠ¶æ€ | è¯´æ˜ |
|-----|------|------|
| ğŸŸ¡ é»„è‰²åœ†ç‚¹ | è¿›è¡Œä¸­ | æ­£åœ¨æ„å»ºå’Œéƒ¨ç½² |
| âœ… ç»¿è‰²å‹¾ | æˆåŠŸ | éƒ¨ç½²å®Œæˆï¼Œç½‘ç«™å·²æ›´æ–° |
| âŒ çº¢è‰²å‰ | å¤±è´¥ | éƒ¨ç½²å‡ºé”™ï¼Œéœ€è¦æ£€æŸ¥æ—¥å¿— |

### éƒ¨ç½²æ—¶é—´

- **æ„å»ºæ—¶é—´**: 2-4 åˆ†é’Ÿ
- **å‘å¸ƒæ—¶é—´**: 1-2 åˆ†é’Ÿ
- **æ€»æ—¶é—´**: çº¦ 3-6 åˆ†é’Ÿ

## ğŸ” éƒ¨ç½²è¯¦ç»†æ­¥éª¤

### è‡ªåŠ¨æ‰§è¡Œçš„ä»»åŠ¡

#### æ­¥éª¤ 1: æ£€å‡ºä»£ç 
```yaml
- uses: actions/checkout@v4
  with:
    fetch-depth: 0
```
è·å–å®Œæ•´çš„ Git å†å²è®°å½•ã€‚

#### æ­¥éª¤ 2: è®¾ç½® Node.js
```yaml
- name: Setup Node
  uses: actions/setup-node@v4
  with:
    node-version: 20
    cache: npm
```
ä½¿ç”¨ Node.js 20ï¼Œå¹¶ç¼“å­˜ä¾èµ–åŠ é€Ÿæ„å»ºã€‚

#### æ­¥éª¤ 3: å®‰è£…ä¾èµ–
```bash
npm ci
```
ä½¿ç”¨ `npm ci` ç¡®ä¿ä¾èµ–ç‰ˆæœ¬ä¸€è‡´ã€‚

#### æ­¥éª¤ 4: æ„å»ºç½‘ç«™
```bash
npm run build
```
ç”Ÿæˆé™æ€ç½‘ç«™æ–‡ä»¶åˆ° `build/` ç›®å½•ã€‚

#### æ­¥éª¤ 5: éƒ¨ç½²åˆ° GitHub Pages
```yaml
- uses: peaceiris/actions-gh-pages@v3
  with:
    github_token: ${{ secrets.GITHUB_TOKEN }}
    publish_dir: ./build
```
å°†æ„å»ºäº§ç‰©æ¨é€åˆ° `gh-pages` åˆ†æ”¯ã€‚

## ğŸŒ è®¿é—®ç½‘ç«™

### ç”Ÿäº§ç¯å¢ƒ
```
https://laby-umr.github.io
```

### æœ¬åœ°å¼€å‘
```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm start

# è®¿é—®
http://localhost:3000
```

## âš™ï¸ é…ç½®æ–‡ä»¶è¯´æ˜

### GitHub Actions å·¥ä½œæµ

**ä½ç½®**: `.github/workflows/deploy.yml`

**è§¦å‘æ¡ä»¶**:
```yaml
on:
  push:
    branches:
      - main      # æ¨é€åˆ° main åˆ†æ”¯
      - master    # æ¨é€åˆ° master åˆ†æ”¯
  workflow_dispatch:  # æ‰‹åŠ¨è§¦å‘
```

### ç½‘ç«™é…ç½®

**ä½ç½®**: `docusaurus.config.js`

**å…³é”®é…ç½®**:
```javascript
{
  url: 'https://laby-umr.github.io',
  baseUrl: '/',
  organizationName: 'laby-umr',
  projectName: 'laby-blog-private',
}
```

## ğŸ› ï¸ æ‰‹åŠ¨è§¦å‘éƒ¨ç½²

### ä» GitHub ç•Œé¢

1. è®¿é—® Actions é¡µé¢
2. é€‰æ‹© "Deploy to GitHub Pages" å·¥ä½œæµ
3. ç‚¹å‡» "Run workflow"
4. é€‰æ‹©åˆ†æ”¯ï¼ˆé€šå¸¸æ˜¯ mainï¼‰
5. ç‚¹å‡»ç»¿è‰²çš„ "Run workflow" æŒ‰é’®

### ä½¿ç”¨ GitHub CLI

```bash
# å®‰è£… GitHub CLIï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
# Windows: winget install GitHub.cli

# æ‰‹åŠ¨è§¦å‘éƒ¨ç½²
gh workflow run deploy.yml
```

## âŒ å¸¸è§é—®é¢˜è§£å†³

### é—®é¢˜ 1: éƒ¨ç½²å¤±è´¥ - æ„å»ºé”™è¯¯

**ç—‡çŠ¶**: Actions æ˜¾ç¤ºçº¢è‰² âŒ

**åŸå› **: ä»£ç æœ‰è¯­æ³•é”™è¯¯æˆ–æ„å»ºå¤±è´¥

**è§£å†³**:
```bash
# æœ¬åœ°æµ‹è¯•æ„å»º
npm run build

# å¦‚æœæœ¬åœ°æ„å»ºæˆåŠŸï¼Œæ£€æŸ¥ Actions æ—¥å¿—
# è®¿é—®: https://github.com/laby-umr/laby-blog-private/actions
```

### é—®é¢˜ 2: ç½‘ç«™æ²¡æœ‰æ›´æ–°

**ç—‡çŠ¶**: æ¨é€åç½‘ç«™å†…å®¹æ²¡å˜

**åŸå› **: 
1. æµè§ˆå™¨ç¼“å­˜
2. GitHub Pages å‘å¸ƒå»¶è¿Ÿ
3. éƒ¨ç½²æœªæˆåŠŸ

**è§£å†³**:
```bash
# 1. å¼ºåˆ¶åˆ·æ–°æµè§ˆå™¨
# Windows: Ctrl + F5
# Mac: Cmd + Shift + R

# 2. æ£€æŸ¥ Actions æ˜¯å¦æˆåŠŸ
# 3. ç­‰å¾… 5-10 åˆ†é’Ÿå†è®¿é—®
```

### é—®é¢˜ 3: ä¾èµ–å®‰è£…å¤±è´¥

**ç—‡çŠ¶**: Actions åœ¨å®‰è£…ä¾èµ–æ—¶å¤±è´¥

**è§£å†³**:
```bash
# ç¡®ä¿æœ¬åœ°ä¾èµ–æ­£å¸¸
npm ci

# æ›´æ–° package-lock.json
npm install

# æäº¤æ›´æ–°
git add package-lock.json
git commit -m "chore: æ›´æ–°ä¾èµ–é”æ–‡ä»¶"
git push
```

### é—®é¢˜ 4: æƒé™é”™è¯¯

**ç—‡çŠ¶**: éƒ¨ç½²æ—¶æç¤ºæƒé™ä¸è¶³

**æ£€æŸ¥**:
1. ä»“åº“æ˜¯å¦å…¬å¼€ï¼ˆæˆ–ä½¿ç”¨ GitHub Proï¼‰
2. Actions æƒé™æ˜¯å¦å¯ç”¨

**è®¾ç½® Actions æƒé™**:
- è®¿é—®: `Settings` â†’ `Actions` â†’ `General`
- æ‰¾åˆ° "Workflow permissions"
- é€‰æ‹© "Read and write permissions"
- ä¿å­˜

## ğŸ“ˆ éƒ¨ç½²ç»Ÿè®¡

### æŸ¥çœ‹éƒ¨ç½²å†å²

```bash
# æŸ¥çœ‹æœ€è¿‘çš„æäº¤
git log --oneline -10

# æŸ¥çœ‹æŸä¸ªæäº¤çš„è¯¦ç»†ä¿¡æ¯
git show <commit-hash>
```

### éƒ¨ç½²é¢‘ç‡å»ºè®®

- ğŸ“ **å†™ä½œå†…å®¹**: éšæ—¶æäº¤ï¼Œè‡ªåŠ¨éƒ¨ç½²
- ğŸ› **Bug ä¿®å¤**: ç«‹å³éƒ¨ç½²
- âœ¨ **æ–°åŠŸèƒ½**: æµ‹è¯•åéƒ¨ç½²
- ğŸ¨ **æ ·å¼è°ƒæ•´**: æ‰¹é‡æäº¤ï¼Œå‡å°‘éƒ¨ç½²æ¬¡æ•°

## ğŸ” å®‰å…¨æœ€ä½³å®è·µ

### æ•æ„Ÿä¿¡æ¯ç®¡ç†

âŒ **ä¸è¦æäº¤**:
- API å¯†é’¥
- å¯†ç 
- ç§é’¥
- ç¯å¢ƒå˜é‡ï¼ˆå¸¦å¯†é’¥çš„ï¼‰

âœ… **åº”è¯¥ä½¿ç”¨**:
- GitHub Secretsï¼ˆä»“åº“è®¾ç½®ä¸­ï¼‰
- ç¯å¢ƒå˜é‡
- `.gitignore` å¿½ç•¥æ•æ„Ÿæ–‡ä»¶

### æ£€æŸ¥æ•æ„Ÿä¿¡æ¯

```bash
# æœç´¢å¯èƒ½çš„æ•æ„Ÿä¿¡æ¯
git grep -i "password\|secret\|api_key\|private_key"

# å¦‚æœå‘ç°ï¼Œç«‹å³ä»å†å²ä¸­ç§»é™¤
git filter-branch --force --index-filter \
  'git rm --cached --ignore-unmatch <æ–‡ä»¶è·¯å¾„>' \
  --prune-empty --tag-name-filter cat -- --all
```

## ğŸ“ å­¦ä¹ èµ„æº

### GitHub Actions
- [GitHub Actions å®˜æ–¹æ–‡æ¡£](https://docs.github.com/actions)
- [å·¥ä½œæµè¯­æ³•](https://docs.github.com/actions/using-workflows/workflow-syntax-for-github-actions)

### Docusaurus
- [Docusaurus éƒ¨ç½²æ–‡æ¡£](https://docusaurus.io/docs/deployment)
- [é…ç½®å‚è€ƒ](https://docusaurus.io/docs/api/docusaurus-config)

### Git
- [Git åŸºç¡€æ•™ç¨‹](https://git-scm.com/book/zh/v2)
- [æäº¤ä¿¡æ¯è§„èŒƒ](https://www.conventionalcommits.org/)

## ğŸ“ è·å–å¸®åŠ©

### æ£€æŸ¥æ—¥å¿—

1. **GitHub Actions æ—¥å¿—**
   - è®¿é—® Actions é¡µé¢
   - ç‚¹å‡»å¤±è´¥çš„å·¥ä½œæµ
   - æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

2. **æœ¬åœ°æ„å»ºæ—¥å¿—**
   ```bash
   npm run build 2>&1 | tee build.log
   ```

### å›æ»šæ“ä½œ

å¦‚æœéƒ¨ç½²å‡ºç°ä¸¥é‡é—®é¢˜ï¼š

```bash
# å›æ»šåˆ°ä¸Šä¸€ä¸ªæäº¤
git revert HEAD
git push origin main

# æˆ–è€…å›æ»šåˆ°ç‰¹å®šæäº¤
git revert <commit-hash>
git push origin main
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### åŠ é€Ÿéƒ¨ç½²

1. **ä½¿ç”¨ npm ci è€Œé npm install**
   - å·²é…ç½® âœ…

2. **å¯ç”¨ä¾èµ–ç¼“å­˜**
   - å·²é…ç½® âœ…

3. **å‡å°‘æ„å»ºäº§ç‰©å¤§å°**
   ```javascript
   // docusaurus.config.js
   future: {
     experimental_faster: true,  // å·²å¯ç”¨ âœ…
   }
   ```

### ç›‘æ§æ„å»ºæ—¶é—´

æŸ¥çœ‹æ¯æ¬¡éƒ¨ç½²çš„æ—¶é—´ï¼š
- Actions é¡µé¢æ˜¾ç¤ºæ¯ä¸ªæ­¥éª¤çš„è€—æ—¶
- ä¼˜åŒ–æœ€è€—æ—¶çš„æ­¥éª¤

## âœ… éƒ¨ç½²æ£€æŸ¥æ¸…å•

æ¯æ¬¡é‡å¤§æ›´æ–°åï¼š

- [ ] æœ¬åœ°æµ‹è¯•æ„å»ºæˆåŠŸ (`npm run build`)
- [ ] æœ¬åœ°é¢„è§ˆæ­£å¸¸ (`npm start`)
- [ ] æäº¤ä¿¡æ¯æ¸…æ™°æ˜ç¡®
- [ ] Actions å·¥ä½œæµæˆåŠŸè¿è¡Œ
- [ ] ç½‘ç«™å†…å®¹æ­£ç¡®æ›´æ–°
- [ ] æ‰€æœ‰é“¾æ¥æ­£å¸¸å·¥ä½œ
- [ ] å›¾ç‰‡èµ„æºæ­£ç¡®åŠ è½½
- [ ] å“åº”å¼å¸ƒå±€æ­£å¸¸

---

## ğŸ‰ å¿«é€Ÿå‚è€ƒ

### å®Œæ•´éƒ¨ç½²å‘½ä»¤

```bash
# ä¸€é”®éƒ¨ç½²æµç¨‹
git add .
git commit -m "ä½ çš„æäº¤ä¿¡æ¯"
git push origin main
```

### é‡è¦é“¾æ¥

| åç§° | é“¾æ¥ |
|------|------|
| ç”Ÿäº§ç½‘ç«™ | https://laby-umr.github.io |
| GitHub ä»“åº“ | https://github.com/laby-umr/laby-blog-private |
| Actions é¡µé¢ | https://github.com/laby-umr/laby-blog-private/actions |
| ä»“åº“è®¾ç½® | https://github.com/laby-umr/laby-blog-private/settings |

---

**æœ€åæ›´æ–°**: 2025-12-12  
**Docusaurus ç‰ˆæœ¬**: 3.9.2  
**Node.js ç‰ˆæœ¬**: 20.x
