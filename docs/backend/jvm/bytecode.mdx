---
sidebar_position: 1
title: Javaå­—èŠ‚ç è¯¦è§£
description: æ·±å…¥ç†è§£Javaå­—èŠ‚ç æ ¼å¼ã€æŒ‡ä»¤é›†ä¸JVMæ‰§è¡ŒåŸç†
authors: [Laby]
tags: [Java, JVM, å­—èŠ‚ç , åç¼–è¯‘, æ€§èƒ½ä¼˜åŒ–]
last_update:
  date: 2023-08-15
  author: Laby
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';

# Javaå­—èŠ‚ç è¯¦è§£

Javaå­—èŠ‚ç æ˜¯JVMæ‰§è¡Œçš„ä¸­é—´ä»£ç ï¼Œä»‹äºJavaæºç å’Œæœºå™¨ç ä¹‹é—´ã€‚æ·±å…¥ç†è§£å­—èŠ‚ç æœ‰åŠ©äºæˆ‘ä»¬åˆ†æç¨‹åºè¡Œä¸ºã€æ’æŸ¥æ€§èƒ½é—®é¢˜ã€ç†è§£JVMä¼˜åŒ–ç­–ç•¥ï¼Œæ˜¯Javaé«˜çº§å¼€å‘è€…å¿…å¤‡çš„æŠ€èƒ½ã€‚

:::tip æ ¸å¿ƒè¦ç‚¹
**å­—èŠ‚ç  = Javaç¨‹åºçš„çµé­‚ + JVMçš„è¯­è¨€**
- ğŸ” **å­—èŠ‚ç æœ¬è´¨**ï¼šJVMæ‰§è¡Œçš„æŒ‡ä»¤é›†ï¼Œä¿è¯äº†Javaçš„"ä¸€æ¬¡ç¼–è¯‘ï¼Œåˆ°å¤„è¿è¡Œ"
- ğŸ“¦ **ç±»æ–‡ä»¶ç»“æ„**ï¼šè§„èŒƒçš„äºŒè¿›åˆ¶æ ¼å¼ï¼ŒåŒ…å«å®Œæ•´çš„ç±»ä¿¡æ¯
- ğŸ› ï¸ **æŒ‡ä»¤é›†åˆ†ç±»**ï¼šå †æ ˆæ“ä½œã€è¿ç®—ã€æ§åˆ¶è½¬ç§»ã€æ–¹æ³•è°ƒç”¨ç­‰æ ¸å¿ƒæŒ‡ä»¤
- ğŸ”„ **æ‰§è¡Œæ¨¡å‹**ï¼šåŸºäºæ“ä½œæ•°æ ˆå’Œå±€éƒ¨å˜é‡è¡¨çš„æ‰§è¡Œæ¨¡å¼
- ğŸ’¡ **ä¼˜åŒ–æŠ€æœ¯**ï¼šJITå³æ—¶ç¼–è¯‘ã€æ–¹æ³•å†…è”ã€é€ƒé€¸åˆ†æç­‰æå‡æ€§èƒ½çš„æŠ€æœ¯
:::

## 1. å­—èŠ‚ç åŸºç¡€

### 1.1 ä»€ä¹ˆæ˜¯å­—èŠ‚ç 

å­—èŠ‚ç (Bytecode)æ˜¯Javaæºä»£ç ç¼–è¯‘åçš„ä¸­é—´è¡¨ç¤ºå½¢å¼ï¼Œå®ƒç”±JVMæ‰§è¡Œã€‚å­—èŠ‚ç ä¸åŒäºæœºå™¨ç ï¼Œå®ƒæ˜¯å¹³å°æ— å…³çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œéœ€è¦é€šè¿‡JVMè§£é‡Šæˆ–ç¼–è¯‘åæ‰èƒ½åœ¨å…·ä½“å¹³å°ä¸Šè¿è¡Œã€‚

```mermaid
graph LR
    A[Javaæºä»£ç .java] -->|javacç¼–è¯‘| B[å­—èŠ‚ç .class]
    B -->|JVMè§£é‡Šæ‰§è¡Œ| C[æœºå™¨ç ]
    B -->|JITå³æ—¶ç¼–è¯‘| C
    C -->|CPUæ‰§è¡Œ| D[ç¨‹åºè¿è¡Œ]
    
    style A fill:#f9f9f9,stroke:#333,stroke-width:1px
    style B fill:#e6f3ff,stroke:#333,stroke-width:2px
    style C fill:#f9f9f9,stroke:#333,stroke-width:1px
    style D fill:#f9f9f9,stroke:#333,stroke-width:1px
```

### 1.2 å­—èŠ‚ç çš„ä½œç”¨

<Tabs>
<TabItem value="platform-independence" label="å¹³å°æ— å…³æ€§">

å­—èŠ‚ç æ˜¯Java"ä¸€æ¬¡ç¼–å†™ï¼Œåˆ°å¤„è¿è¡Œ"çš„å…³é”®ã€‚åŒä¸€ä»½å­—èŠ‚ç å¯ä»¥åœ¨ä»»ä½•å®‰è£…äº†JVMçš„å¹³å°ä¸Šè¿è¡Œï¼Œæ— éœ€é‡æ–°ç¼–è¯‘æºä»£ç ã€‚

```java title="ç¤ºä¾‹ï¼šå¹³å°æ— å…³çš„HelloWorld"
// HelloWorld.java - åœ¨ä»»ä½•å¹³å°ç¼–è¯‘åå¾—åˆ°ç›¸åŒçš„å­—èŠ‚ç 
public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}

// ç¼–è¯‘åçš„å­—èŠ‚ç å¯ä»¥åœ¨Windowsã€Linuxã€macOSç­‰ä»»ä½•å¹³å°çš„JVMä¸Šè¿è¡Œ
// æ— éœ€ä¿®æ”¹æºç æˆ–é‡æ–°ç¼–è¯‘
```

</TabItem>
<TabItem value="optimization" label="æ€§èƒ½ä¼˜åŒ–">

å­—èŠ‚ç è®¾è®¡å…è®¸JVMè¿›è¡Œè¿è¡Œæ—¶ä¼˜åŒ–ï¼Œå¦‚å³æ—¶ç¼–è¯‘(JIT)ã€æ–¹æ³•å†…è”ã€é€ƒé€¸åˆ†æç­‰ï¼Œå¤§å¤§æå‡ç¨‹åºæ€§èƒ½ã€‚

```java title="ä¼˜åŒ–ç¤ºä¾‹"
// åŸå§‹Javaä»£ç 
for (int i = 0; i < 1000000; i++) {
    sum += i;
}

// JVMå¯èƒ½ä¼šå°†çƒ­ç‚¹ä»£ç çš„å­—èŠ‚ç ä¼˜åŒ–ä¸ºç­‰æ•ˆçš„æœºå™¨ç ï¼š
// mov eax, 0       ; sum = 0
// mov ecx, 1000000 ; å¾ªç¯æ¬¡æ•°
// imul eax, ecx    ; sum = 1000000 * 999999 / 2
// shr eax, 1       ; é™¤ä»¥2
```

</TabItem>
<TabItem value="security" label="å®‰å…¨æ€§">

å­—èŠ‚ç éªŒè¯æ˜¯JVMå®‰å…¨æ¨¡å‹çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œåœ¨æ‰§è¡Œå‰ä¼šè¿›è¡Œå¤šé‡æ£€æŸ¥ä»¥ç¡®ä¿ä»£ç ä¸ä¼šå±å®³ç³»ç»Ÿã€‚

```
å­—èŠ‚ç éªŒè¯å››ä¸ªé˜¶æ®µ:
1. æ–‡ä»¶æ ¼å¼éªŒè¯ï¼šé­”æ•°æ£€æŸ¥ã€ç‰ˆæœ¬å…¼å®¹æ€§ã€å¸¸é‡æ± åˆæ³•æ€§ç­‰
2. å…ƒæ•°æ®éªŒè¯ï¼šç±»ç»§æ‰¿å…³ç³»ã€æŠ½è±¡æ–¹æ³•å®ç°ç­‰
3. å­—èŠ‚ç éªŒè¯ï¼šæ§åˆ¶æµåˆ†æã€ç±»å‹æ¨æ–­ã€æ ˆæ“ä½œåˆæ³•æ€§ç­‰
4. ç¬¦å·å¼•ç”¨éªŒè¯ï¼šç¬¦å·å¼•ç”¨è½¬ä¸ºç›´æ¥å¼•ç”¨æ—¶çš„æ£€æŸ¥
```

</TabItem>
</Tabs>

## 2. ç±»æ–‡ä»¶ç»“æ„

Javaç±»æ–‡ä»¶(.class)æ˜¯ä¸€ç§ç²¾å¿ƒè®¾è®¡çš„äºŒè¿›åˆ¶æ ¼å¼ï¼ŒåŒ…å«æ‰€æœ‰å¿…è¦çš„ä¿¡æ¯ä»¥ä¾›JVMåŠ è½½å’Œæ‰§è¡Œã€‚

### 2.1 Classæ–‡ä»¶æ ¼å¼

```mermaid
graph TD
    A[Classæ–‡ä»¶] --> B[é­”æ•°]
    A --> C[ç‰ˆæœ¬ä¿¡æ¯]
    A --> D[å¸¸é‡æ± ]
    A --> E[è®¿é—®æ ‡å¿—]
    A --> F[ç±»ç´¢å¼•]
    A --> G[æ¥å£ç´¢å¼•]
    A --> H[å­—æ®µè¡¨]
    A --> I[æ–¹æ³•è¡¨]
    A --> J[å±æ€§è¡¨]
```

<Tabs>
<TabItem value="structure" label="ç»“æ„ç»„æˆ">

| ç»„æˆéƒ¨åˆ† | è¯´æ˜ | ä½œç”¨ |
|---------|------|-----|
| **é­”æ•°** | 0xCAFEBABE | æ ‡è¯†classæ–‡ä»¶æ ¼å¼ |
| **ç‰ˆæœ¬å·** | Major.minor | JVMç‰ˆæœ¬å…¼å®¹æ€§æ£€æŸ¥ |
| **å¸¸é‡æ± ** | å­—ç¬¦ä¸²ã€ç±»å¼•ç”¨ç­‰å¸¸é‡ | å­˜å‚¨ç¨‹åºä¸­çš„å„ç§å¸¸é‡å’Œç¬¦å·å¼•ç”¨ |
| **è®¿é—®æ ‡å¿—** | public, finalç­‰ä¿®é¥°ç¬¦ | æè¿°ç±»æˆ–æ¥å£çš„è®¿é—®æƒé™åŠå±æ€§ |
| **ç±»ç´¢å¼•** | this_class, super_class | ç¡®å®šç±»çš„ç»§æ‰¿å…³ç³» |
| **æ¥å£ç´¢å¼•é›†åˆ** | å®ç°çš„æ¥å£åˆ—è¡¨ | æè¿°ç±»å®ç°çš„æ‰€æœ‰æ¥å£ |
| **å­—æ®µè¡¨** | æˆå‘˜å˜é‡ä¿¡æ¯ | æè¿°ç±»çš„æ‰€æœ‰å­—æ®µ |
| **æ–¹æ³•è¡¨** | æ–¹æ³•ä¿¡æ¯ | æè¿°ç±»çš„æ‰€æœ‰æ–¹æ³• |
| **å±æ€§è¡¨** | é™„åŠ ä¿¡æ¯ | å­˜å‚¨ç±»ã€å­—æ®µã€æ–¹æ³•çš„é¢å¤–ä¿¡æ¯ |

</TabItem>
<TabItem value="bytecode-example" label="çœŸå®ç¤ºä¾‹">

```java title="ç®€å•ç±»çš„æºç "
public class SimpleClass {
    private int field;
    
    public void method() {
        field = 100;
    }
}
```

```bash title="ä½¿ç”¨javapæŸ¥çœ‹å­—èŠ‚ç "
$ javap -c -v SimpleClass.class

// è¾“å‡ºç²¾ç®€ç‰ˆ
Classfile /path/to/SimpleClass.class
  Last modified xxxx; size xxxx bytes
  MD5 checksum xxxxxxxxxxxxxxxxxxxxxxxxxxxx
  Compiled from "SimpleClass.java"
public class SimpleClass
  minor version: 0
  major version: 55
  flags: (0x0021) ACC_PUBLIC, ACC_SUPER
  this_class: #2                          // SimpleClass
  super_class: #4                         // java/lang/Object

Constant pool:
   #1 = Methodref          #4.#17         // java/lang/Object."<init>":()V
   #2 = Class              #18            // SimpleClass
   ...

{
  private int field;
    descriptor: I
    flags: (0x0002) ACC_PRIVATE

  public SimpleClass();
    descriptor: ()V
    flags: (0x0001) ACC_PUBLIC
    Code:
      stack=1, locals=1, args_size=1
         0: aload_0
         1: invokespecial #1                  // Method java/lang/Object."<init>":()V
         4: return

  public void method();
    descriptor: ()V
    flags: (0x0001) ACC_PUBLIC
    Code:
      stack=2, locals=1, args_size=1
         0: aload_0
         1: bipush        100
         3: putfield      #3                  // Field field:I
         6: return
}
```

</TabItem>
</Tabs>

### 2.2 å¸¸é‡æ± è¯¦è§£

å¸¸é‡æ± æ˜¯classæ–‡ä»¶ä¸­æœ€ä¸ºå¤æ‚çš„æ•°æ®ç»“æ„ï¼Œå­˜å‚¨äº†å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ã€‚

```java title="å¸¸é‡æ± ç¤ºä¾‹"
// æºä»£ç 
public class ConstantPoolDemo {
    private static final String MESSAGE = "Hello";
    
    public void printMessage() {
        System.out.println(MESSAGE + " World!");
    }
}
```

ç¼–è¯‘åï¼Œå¸¸é‡æ± å°†åŒ…å«ï¼š
- å­—ç¬¦ä¸²å¸¸é‡ï¼š"Hello"ã€"World!"
- ç±»å¼•ç”¨ï¼šjava/lang/Systemã€java/io/PrintStream
- æ–¹æ³•å¼•ç”¨ï¼šprintlnã€printMessageç­‰
- å­—æ®µå¼•ç”¨ï¼šMESSAGEã€outç­‰

:::info å¸¸é‡æ± çš„ä½œç”¨
å¸¸é‡æ± ç±»ä¼¼äºç¨‹åºçš„"èµ„æºä»“åº“"ï¼Œå­˜å‚¨äº†ç±»ä¸­å¼•ç”¨çš„æ‰€æœ‰å­—ç¬¦ä¸²ã€ç±»ã€æ–¹æ³•ç­‰ä¿¡æ¯ã€‚é€šè¿‡å¸¸é‡æ± ï¼Œå­—èŠ‚ç æŒ‡ä»¤å¯ä»¥é€šè¿‡ç´¢å¼•é—´æ¥å¼•ç”¨è¿™äº›èµ„æºï¼Œä½¿å¾—æŒ‡ä»¤ç´§å‡‘é«˜æ•ˆã€‚
:::

## 3. å­—èŠ‚ç æŒ‡ä»¤é›†

Javaå­—èŠ‚ç æŒ‡ä»¤é›†æ˜¯ä¸€ç»„é¢å‘JVMçš„æ“ä½œæŒ‡ä»¤ï¼Œç”±å•å­—èŠ‚æ“ä½œç (opcode)å’Œå¯é€‰çš„æ“ä½œæ•°ç»„æˆã€‚

### 3.1 æŒ‡ä»¤åˆ†ç±»

<Tabs>
<TabItem value="stack" label="å †æ ˆæ“ä½œ">

```
åŠ è½½æŒ‡ä»¤ï¼šxload, xconst, ldc, bipushç­‰
- aload_0: å°†å±€éƒ¨å˜é‡è¡¨ä¸­ç¬¬0ä¸ªå˜é‡(this)å‹å…¥æ“ä½œæ•°æ ˆ
- iconst_1: å°†æ•´æ•°å¸¸é‡1å‹å…¥æ“ä½œæ•°æ ˆ
- ldc: ä»å¸¸é‡æ± åŠ è½½å¸¸é‡å¹¶å‹å…¥æ“ä½œæ•°æ ˆ

å­˜å‚¨æŒ‡ä»¤ï¼šxstore, pop, dupç­‰
- istore_1: å°†æ ˆé¡¶æ•´æ•°å­˜å…¥å±€éƒ¨å˜é‡è¡¨ç´¢å¼•1ä½ç½®
- pop: å¼¹å‡ºæ ˆé¡¶å…ƒç´ 
- dup: å¤åˆ¶æ ˆé¡¶å…ƒç´ å¹¶å‹å…¥æ ˆé¡¶
```

</TabItem>
<TabItem value="arithmetic" label="è¿ç®—æŒ‡ä»¤">

```
æ•´æ•°è¿ç®—ï¼šiadd, isub, imul, idivç­‰
- iadd: æ•´æ•°åŠ æ³•ï¼Œæ ˆé¡¶ä¸¤ä¸ªå…ƒç´ ç›¸åŠ 
- isub: æ•´æ•°å‡æ³•
- imul: æ•´æ•°ä¹˜æ³•
- idiv: æ•´æ•°é™¤æ³•

æµ®ç‚¹è¿ç®—ï¼šfadd, fsub, fmul, fdivç­‰
- fadd: æµ®ç‚¹æ•°åŠ æ³•
- fsub: æµ®ç‚¹æ•°å‡æ³•
- fmul: æµ®ç‚¹æ•°ä¹˜æ³•
- fdiv: æµ®ç‚¹æ•°é™¤æ³•

æ¯”è¾ƒæ“ä½œï¼šlcmp, fcmpl, dcmplç­‰
- lcmp: æ¯”è¾ƒä¸¤ä¸ªlongå€¼
- fcmpl: æ¯”è¾ƒä¸¤ä¸ªfloatå€¼(å°äºæ—¶è¿”å›-1)
```

</TabItem>
<TabItem value="control" label="æ§åˆ¶æŒ‡ä»¤">

```
æ¡ä»¶è·³è½¬ï¼šifeq, ifne, iflt, ifgt, ifle, ifgeç­‰
- ifeq: è‹¥æ ˆé¡¶å…ƒç´ ä¸º0ï¼Œåˆ™è·³è½¬
- ifne: è‹¥æ ˆé¡¶å…ƒç´ ä¸ä¸º0ï¼Œåˆ™è·³è½¬

æ— æ¡ä»¶è·³è½¬ï¼šgoto, jsr, retç­‰
- goto: æ— æ¡ä»¶è·³è½¬åˆ°æŒ‡å®šä½ç½®
- jsr: è·³è½¬åˆ°å­ç¨‹åº(å·²åºŸå¼ƒ)

è¡¨åˆ†æ”¯ï¼štableswitch, lookupswitch
- tableswitch: å¯†é›†å‹switch-caseè¯­å¥(è¿ç»­caseå€¼)
- lookupswitch: ç¨€ç–å‹switch-caseè¯­å¥(ä¸è¿ç»­caseå€¼)
```

</TabItem>
<TabItem value="objects" label="å¯¹è±¡æ“ä½œ">

```
å¯¹è±¡åˆ›å»ºï¼šnew, newarray, anewarray, multianewarray
- new: åˆ›å»ºå¯¹è±¡å®ä¾‹
- newarray: åˆ›å»ºåŸºæœ¬ç±»å‹æ•°ç»„
- anewarray: åˆ›å»ºå¼•ç”¨ç±»å‹æ•°ç»„

å­—æ®µè®¿é—®ï¼šgetfield, putfield, getstatic, putstatic
- getfield: è·å–å¯¹è±¡çš„å®ä¾‹å­—æ®µ
- putfield: è®¾ç½®å¯¹è±¡çš„å®ä¾‹å­—æ®µ
- getstatic: è·å–ç±»çš„é™æ€å­—æ®µ
- putstatic: è®¾ç½®ç±»çš„é™æ€å­—æ®µ

æ–¹æ³•è°ƒç”¨ï¼šinvokespecial, invokevirtual, invokestatic, invokeinterface, invokedynamic
- invokevirtual: è°ƒç”¨å®ä¾‹æ–¹æ³•(æ”¯æŒå¤šæ€)
- invokespecial: è°ƒç”¨ç‰¹æ®Šæ–¹æ³•(æ„é€ å‡½æ•°ã€ç§æœ‰æ–¹æ³•ã€superæ–¹æ³•)
- invokestatic: è°ƒç”¨é™æ€æ–¹æ³•
- invokeinterface: è°ƒç”¨æ¥å£æ–¹æ³•
- invokedynamic: è°ƒç”¨åŠ¨æ€æ–¹æ³•(Lambdaè¡¨è¾¾å¼å’Œæ–¹æ³•å¼•ç”¨)
```

</TabItem>
</Tabs>

### 3.2 å…¸å‹å­—èŠ‚ç ç¤ºä¾‹è§£æ

<Tabs>
<TabItem value="loops" label="å¾ªç¯ç»“æ„">

```java title="Javaå¾ªç¯ä»£ç "
// forå¾ªç¯
public void forLoop() {
    for (int i = 0; i < 10; i++) {
        System.out.println(i);
    }
}
```

```
// å¯¹åº”å­—èŠ‚ç 
public void forLoop();
  Code:
     0: iconst_0       // å°†å¸¸é‡0å‹å…¥æ ˆ(i=0)
     1: istore_1       // å­˜å…¥å±€éƒ¨å˜é‡1(i)
     2: iload_1        // åŠ è½½å±€éƒ¨å˜é‡1(i)
     3: bipush        10 // å°†å¸¸é‡10å‹å…¥æ ˆ
     5: if_icmpge     22 // å¦‚æœi>=10åˆ™è·³è½¬åˆ°22
     8: getstatic     #2  // è·å–System.out
    11: iload_1        // åŠ è½½å±€éƒ¨å˜é‡1(i)
    12: invokevirtual #3  // è°ƒç”¨println
    15: iinc          1, 1 // iå¢åŠ 1
    18: goto          2    // è·³å›åˆ°2ç»§ç»­å¾ªç¯
    22: return          // è¿”å›
```

</TabItem>
<TabItem value="conditionals" label="æ¡ä»¶åˆ†æ”¯">

```java title="Javaæ¡ä»¶è¯­å¥"
// if-elseè¯­å¥
public int max(int a, int b) {
    if (a > b) {
        return a;
    } else {
        return b;
    }
}
```

```
// å¯¹åº”å­—èŠ‚ç 
public int max(int, int);
  Code:
     0: iload_1        // åŠ è½½å‚æ•°a
     1: iload_2        // åŠ è½½å‚æ•°b
     2: if_icmple     9  // å¦‚æœa<=båˆ™è·³è½¬åˆ°9
     5: iload_1        // åŠ è½½å‚æ•°a
     6: ireturn        // è¿”å›a
     7: goto          12 // ä¸ä¼šæ‰§è¡Œåˆ°æ­¤ï¼Œä½†ç¼–è¯‘å™¨ä¼šç”Ÿæˆ
     9: iload_2        // åŠ è½½å‚æ•°b
    10: ireturn        // è¿”å›b
```

</TabItem>
<TabItem value="exceptions" label="å¼‚å¸¸å¤„ç†">

```java title="Javaå¼‚å¸¸å¤„ç†"
// try-catchå—
public void exceptionHandling() {
    try {
        int result = 10 / 0;
    } catch (ArithmeticException e) {
        System.out.println("é™¤é›¶é”™è¯¯");
    }
}
```

```
// å¯¹åº”å­—èŠ‚ç (ç®€åŒ–ç‰ˆ)
public void exceptionHandling();
  Code:
    // tryå—
     0: bipush        10    // å°†10å‹å…¥æ ˆ
     2: iconst_0           // å°†0å‹å…¥æ ˆ
     3: idiv               // æ‰§è¡Œé™¤æ³•(ä¼šæŠ›å‡ºå¼‚å¸¸)
     4: istore_1           // å­˜å‚¨ç»“æœ
     5: goto          19    // æ­£å¸¸æ‰§è¡Œè·³è½¬åˆ°19
    // catchå—
     8: astore_1           // å­˜å‚¨å¼‚å¸¸åˆ°å±€éƒ¨å˜é‡1
     9: getstatic     #2    // è·å–System.out
    12: ldc           "é™¤é›¶é”™è¯¯" // åŠ è½½å­—ç¬¦ä¸²
    14: invokevirtual #3    // è°ƒç”¨println
    17: goto          19    // è·³è½¬åˆ°19
    19: return              // è¿”å›
  Exception table:
     from    to  target type
        0     5     8   java/lang/ArithmeticException
```

</TabItem>
<TabItem value="lambdas" label="Lambdaè¡¨è¾¾å¼">

```java title="Java Lambdaè¡¨è¾¾å¼"
// Lambdaè¡¨è¾¾å¼
public void lambdaExample() {
    Runnable r = () -> System.out.println("Hello Lambda");
    r.run();
}
```

```
// å¯¹åº”å­—èŠ‚ç (ç®€åŒ–ç‰ˆ)
public void lambdaExample();
  Code:
     // Lambdaè¡¨è¾¾å¼åˆ›å»º
     0: invokedynamic #2, 0  // åˆ›å»ºRunnableå®ä¾‹
     5: astore_1            // å­˜å‚¨åˆ°å±€éƒ¨å˜é‡
     6: aload_1             // åŠ è½½Runnableå®ä¾‹
     7: invokeinterface #3, 1 // è°ƒç”¨run()æ–¹æ³•
    12: return

  // ç¼–è¯‘å™¨ç”Ÿæˆçš„Lambdaæ–¹æ³•
  private static void lambda$lambdaExample$0();
    Code:
      0: getstatic     #4   // è·å–System.out
      3: ldc           "Hello Lambda"
      5: invokevirtual #5   // è°ƒç”¨println
      8: return
```

</TabItem>
</Tabs>

## 4. å­—èŠ‚ç æ‰§è¡Œæ¨¡å‹

JVMæ‰§è¡Œå­—èŠ‚ç çš„æ¨¡å‹åŸºäºæ ˆçš„æ¶æ„ï¼Œé€šè¿‡æ“ä½œæ•°æ ˆå’Œå±€éƒ¨å˜é‡è¡¨è¿›è¡Œè®¡ç®—å’Œå­˜å‚¨ã€‚

### 4.1 åŸºäºæ ˆçš„æ‰§è¡Œå¼•æ“

```mermaid
graph TB
    subgraph "JVMæ‰§è¡Œå¼•æ“"
        A["æ“ä½œæ•°æ ˆ<br/>(ä¸´æ—¶æ•°æ®)"]
        B["å±€éƒ¨å˜é‡è¡¨<br/>(æ–¹æ³•å‚æ•°å’Œå±€éƒ¨å˜é‡)"]
        C["ç¨‹åºè®¡æ•°å™¨<br/>(æŒ‡ä»¤ä½ç½®)"]
        D["æ–¹æ³•åŒº<br/>(ç±»ä¿¡æ¯ã€å¸¸é‡æ± )"]
    end
    
    E["å­—èŠ‚ç æŒ‡ä»¤æµ"]
    E --"è¯»å–æŒ‡ä»¤"--> C
    C --"æ§åˆ¶æ‰§è¡Œ"--> A
    A --"æ•°æ®äº¤æ¢"--> B
    A --"åŠ è½½å¸¸é‡"--> D
    B --"åŠ è½½/å­˜å‚¨"--> A
```

JVMæ˜¯åŸºäºæ ˆçš„è™šæ‹Ÿæœºï¼Œä¸åŒäºåŸºäºå¯„å­˜å™¨çš„æ¶æ„(å¦‚x86)ï¼Œå®ƒçš„ä¼˜åŠ¿åœ¨äºï¼š
- æŒ‡ä»¤é›†æ›´å°ï¼Œæ›´æ˜“äºå®ç°
- å¹³å°æ— å…³æ€§æ›´å¥½
- æ›´é€‚åˆè§£é‡Šæ‰§è¡Œ

### 4.2 æ‰§è¡Œè¿‡ç¨‹å›¾è§£

<Tabs>
<TabItem value="simple-calculation" label="ç®€å•è®¡ç®—">

```java
// è®¡ç®— 3 + 4
public int add() {
    int a = 3;
    int b = 4;
    return a + b;
}
```

```
å­—èŠ‚ç åŠæ‰§è¡Œè¿‡ç¨‹:
 0: iconst_3       // å‹å…¥å¸¸é‡3        [æ ˆ:3]
 1: istore_1       // å­˜å…¥å˜é‡a        [æ ˆ:] [å±€éƒ¨å˜é‡:a=3]
 2: iconst_4       // å‹å…¥å¸¸é‡4        [æ ˆ:4]
 3: istore_2       // å­˜å…¥å˜é‡b        [æ ˆ:] [å±€éƒ¨å˜é‡:a=3,b=4]
 4: iload_1        // åŠ è½½å˜é‡a        [æ ˆ:3]
 5: iload_2        // åŠ è½½å˜é‡b        [æ ˆ:3,4]
 6: iadd           // æ‰§è¡ŒåŠ æ³•         [æ ˆ:7]
 7: ireturn        // è¿”å›ç»“æœ         [è¿”å›:7]
```

</TabItem>
<TabItem value="method-call" label="æ–¹æ³•è°ƒç”¨">

```java
// æ–¹æ³•è°ƒç”¨
public void caller() {
    int result = add(5, 3);
    System.out.println(result);
}

private int add(int a, int b) {
    return a + b;
}
```

```
calleræ–¹æ³•çš„å­—èŠ‚ç æ‰§è¡Œè¿‡ç¨‹:
 0: aload_0        // åŠ è½½this            [æ ˆ:this]
 1: iconst_5       // å‹å…¥å¸¸é‡5           [æ ˆ:this,5]
 2: iconst_3       // å‹å…¥å¸¸é‡3           [æ ˆ:this,5,3]
 3: invokespecial  // è°ƒç”¨addæ–¹æ³•         [æ ˆ:]
   - åˆ›å»ºæ–°æ ˆå¸§
   - å‚æ•°a=5, b=3
   - æ‰§è¡Œaddæ–¹æ³•
   - è¿”å›å€¼8
 6: istore_1       // å­˜å‚¨è¿”å›å€¼åˆ°result   [æ ˆ:] [å±€éƒ¨å˜é‡:result=8]
 7: getstatic      // åŠ è½½System.out      [æ ˆ:PrintStream]
10: iload_1        // åŠ è½½result          [æ ˆ:PrintStream,8]
11: invokevirtual  // è°ƒç”¨println         [æ ˆ:]
14: return         // æ–¹æ³•è¿”å›
```

</TabItem>
</Tabs>

### 4.3 å­—èŠ‚ç å’Œæ€§èƒ½

JVMæ‰§è¡Œå­—èŠ‚ç æœ‰ä¸¤ç§ä¸»è¦æ–¹å¼ï¼š
1. **è§£é‡Šæ‰§è¡Œ**ï¼šç›´æ¥è§£é‡Šæ‰§è¡Œå­—èŠ‚ç ï¼Œé€Ÿåº¦è¾ƒæ…¢
2. **å³æ—¶ç¼–è¯‘(JIT)**ï¼šå°†çƒ­ç‚¹å­—èŠ‚ç ç¼–è¯‘ä¸ºæœ¬åœ°æœºå™¨ç æ‰§è¡Œï¼Œé€Ÿåº¦å¤§å¹…æå‡

```mermaid
graph LR
    A[å­—èŠ‚ç ] -->|è§£é‡Šæ‰§è¡Œ| B[è§£é‡Šå™¨]
    A -->|æ£€æµ‹çƒ­ç‚¹ä»£ç | C[JITç¼–è¯‘å™¨]
    C -->|ä¼˜åŒ–ç¼–è¯‘| D[æœ¬åœ°æœºå™¨ç ]
    B -->|æ‰§è¡Œ| E[ç¨‹åºæ‰§è¡Œ]
    D -->|æ‰§è¡Œ| E
```

:::tip JITç¼–è¯‘çš„ä¼˜åŒ–æŠ€æœ¯
1. **æ–¹æ³•å†…è”**ï¼šå°†è°ƒç”¨çš„æ–¹æ³•ä»£ç ç›´æ¥æ’å…¥è°ƒç”¨ç‚¹ï¼Œå‡å°‘æ–¹æ³•è°ƒç”¨å¼€é”€
2. **é€ƒé€¸åˆ†æ**ï¼šåˆ†æå¯¹è±¡çš„ä½¿ç”¨èŒƒå›´ï¼Œä¼˜åŒ–å †å†…å­˜åˆ†é…
3. **å¾ªç¯ä¼˜åŒ–**ï¼šå±•å¼€å¾ªç¯ã€æ¶ˆé™¤å¾ªç¯ä¸å˜é‡ç­‰
4. **æ­»ä»£ç æ¶ˆé™¤**ï¼šç§»é™¤æ°¸ä¸æ‰§è¡Œçš„ä»£ç 
5. **é”æ¶ˆé™¤**ï¼šç§»é™¤ä¸å¿…è¦çš„åŒæ­¥
:::

## 5. å­—èŠ‚ç å·¥å…·ä¸å®è·µ

### 5.1 å¸¸ç”¨å­—èŠ‚ç å·¥å…·

<Tabs>
<TabItem value="javap" label="javap">

JDKè‡ªå¸¦çš„åæ±‡ç¼–å·¥å…·ï¼Œå¯ä»¥æŸ¥çœ‹classæ–‡ä»¶çš„å­—èŠ‚ç æŒ‡ä»¤ã€‚

```bash
# åŸºæœ¬ä½¿ç”¨
javap -c MyClass.class

# è¯¦ç»†ä¿¡æ¯(å¸¸é‡æ± ã€å±€éƒ¨å˜é‡è¡¨ç­‰)
javap -v MyClass.class

# åªæ˜¾ç¤ºå…¬å…±æˆå‘˜
javap -public MyClass.class

# æ˜¾ç¤ºè¡Œå·è¡¨
javap -l MyClass.class
```

</TabItem>
<TabItem value="asm" label="ASM">

åº•å±‚å­—èŠ‚ç æ“ä½œæ¡†æ¶ï¼Œç”¨äºç”Ÿæˆã€åˆ†æå’Œè½¬æ¢å­—èŠ‚ç ã€‚

```java
// ä½¿ç”¨ASMç”Ÿæˆä¸€ä¸ªç®€å•ç±»
public class ASMExample {
    public static void main(String[] args) {
        ClassWriter cw = new ClassWriter(0);
        cw.visit(V1_8, ACC_PUBLIC, "GeneratedClass", null, "java/lang/Object", null);
        
        // æ·»åŠ é»˜è®¤æ„é€ å‡½æ•°
        MethodVisitor mv = cw.visitMethod(ACC_PUBLIC, "<init>", "()V", null, null);
        mv.visitCode();
        mv.visitVarInsn(ALOAD, 0);
        mv.visitMethodInsn(INVOKESPECIAL, "java/lang/Object", "<init>", "()V", false);
        mv.visitInsn(RETURN);
        mv.visitMaxs(1, 1);
        mv.visitEnd();
        
        // ç”Ÿæˆå­—èŠ‚ç 
        byte[] bytecode = cw.toByteArray();
        
        // å®šä¹‰ç±»
        MyClassLoader loader = new MyClassLoader();
        Class<?> generatedClass = loader.defineClass("GeneratedClass", bytecode);
    }
}
```

</TabItem>
<TabItem value="bytecode-viewer" label="Bytecode Viewer">

å›¾å½¢åŒ–å­—èŠ‚ç åˆ†æå·¥å…·ï¼Œé›†æˆäº†å¤šç§åç¼–è¯‘å™¨ã€‚

```
åŠŸèƒ½ç‰¹ç‚¹:
- å¤šç§åç¼–è¯‘å™¨æ”¯æŒ(Procyon, CFR, Fernflowerç­‰)
- å­—èŠ‚ç ç¼–è¾‘
- æ’ä»¶ç³»ç»Ÿ
- ä»£ç æœç´¢å’Œæ¯”è¾ƒ
- è°ƒè¯•æ”¯æŒ
```

</TabItem>
</Tabs>

### 5.2 å­—èŠ‚ç å¢å¼ºæŠ€æœ¯

å­—èŠ‚ç å¢å¼ºæ˜¯åœ¨ä¸ä¿®æ”¹æºä»£ç çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡ä¿®æ”¹æˆ–ç”Ÿæˆå­—èŠ‚ç æ¥æ”¹å˜ç¨‹åºè¡Œä¸ºçš„æŠ€æœ¯ã€‚

<Tabs>
<TabItem value="agent" label="Java Agent">

```java
// ç®€å•çš„Java Agentç¤ºä¾‹
public class SimpleAgent {
    public static void premain(String args, Instrumentation inst) {
        inst.addTransformer(new SimpleTransformer());
    }
    
    static class SimpleTransformer implements ClassFileTransformer {
        @Override
        public byte[] transform(ClassLoader loader, String className, 
                               Class<?> classBeingRedefined, 
                               ProtectionDomain protectionDomain, 
                               byte[] classfileBuffer) {
            // è¿™é‡Œä¿®æ”¹å­—èŠ‚ç 
            if (className.equals("com/example/Target")) {
                // è¿”å›ä¿®æ”¹åçš„å­—èŠ‚ç 
                return modifyByteCode(classfileBuffer);
            }
            return null; // ä¸ä¿®æ”¹è¿”å›null
        }
    }
}

// ä½¿ç”¨æ–¹å¼: java -javaagent:agent.jar -jar app.jar
```

</TabItem>
<TabItem value="aspectj" label="AspectJ">

```java
// AspectJåˆ‡é¢ç¤ºä¾‹
@Aspect
public class PerformanceAspect {
    
    @Around("execution(* com.example.service.*.*(..))")
    public Object measureMethodExecutionTime(ProceedingJoinPoint pjp) throws Throwable {
        long start = System.currentTimeMillis();
        Object result = pjp.proceed();
        long end = System.currentTimeMillis();
        System.out.println(pjp.getSignature() + " took " + (end - start) + " ms");
        return result;
    }
}
```

</TabItem>
<TabItem value="byte-buddy" label="Byte Buddy">

```java
// Byte Buddyç¤ºä¾‹ - æ–¹æ³•æ€§èƒ½ç›‘æ§
Interceptor interceptor = new PerformanceInterceptor();

Class<?> dynamicType = new ByteBuddy()
    .subclass(Service.class)
    .method(ElementMatchers.named("doSomething"))
    .intercept(InvocationHandlerAdapter.of(interceptor))
    .make()
    .load(getClass().getClassLoader())
    .getLoaded();

Service service = (Service) dynamicType.getDeclaredConstructor().newInstance();
service.doSomething(); // è¢«æ‹¦æˆªçš„è°ƒç”¨
```

</TabItem>
</Tabs>

### 5.3 å®æˆ˜ï¼šæ€§èƒ½åˆ†æä¸ä¼˜åŒ–

<Tabs>
<TabItem value="bottleneck" label="å®šä½æ€§èƒ½ç“¶é¢ˆ">

```java
// ä½¿ç”¨å­—èŠ‚ç åˆ†æå®šä½æ€§èƒ½é—®é¢˜

// é—®é¢˜ä»£ç 
public int slowMethod(List<String> items) {
    int count = 0;
    for (int i = 0; i < items.size(); i++) {
        if (items.get(i).startsWith("A")) {
            count++;
        }
    }
    return count;
}

// å­—èŠ‚ç åˆ†æå‘ç°çš„é—®é¢˜:
// 1. æ¯æ¬¡å¾ªç¯éƒ½è°ƒç”¨items.size()
// 2. æ¯æ¬¡è¿­ä»£éƒ½è°ƒç”¨items.get(i)åˆ›å»ºä¸´æ—¶å¯¹è±¡
// 3. startsWithæ–¹æ³•è°ƒç”¨å¼€é”€å¤§

// ä¼˜åŒ–åçš„ä»£ç 
public int fastMethod(List<String> items) {
    int count = 0;
    int size = items.size(); // æå–å¾ªç¯ä¸å˜é‡
    for (String item : items) { // ä½¿ç”¨å¢å¼ºforå¾ªç¯é¿å…é‡å¤getè°ƒç”¨
        if (item.startsWith("A")) {
            count++;
        }
    }
    return count;
}
```

</TabItem>
<TabItem value="memory" label="å†…å­˜å ç”¨ä¼˜åŒ–">

```java
// ä½¿ç”¨å­—èŠ‚ç åˆ†æä¼˜åŒ–å†…å­˜å ç”¨

// é—®é¢˜ä»£ç  - ä½¿ç”¨å¤§é‡å­—ç¬¦ä¸²æ‹¼æ¥
public String buildReport(List<Data> dataPoints) {
    String result = "";
    for (Data point : dataPoints) {
        result += point.getName() + ": " + point.getValue() + "\n";
    }
    return result;
}

// å­—èŠ‚ç åˆ†ææ˜¾ç¤º:
// - æ¯æ¬¡+=æ“ä½œéƒ½åˆ›å»ºäº†æ–°çš„Stringå¯¹è±¡
// - å¤§é‡StringBuilderéšå¼åˆ›å»ºå’Œå¤åˆ¶æ“ä½œ

// ä¼˜åŒ–åçš„ä»£ç 
public String buildReportOptimized(List<Data> dataPoints) {
    StringBuilder result = new StringBuilder(dataPoints.size() * 30); // é¢„åˆ†é…åˆé€‚å¤§å°
    for (Data point : dataPoints) {
        result.append(point.getName())
              .append(": ")
              .append(point.getValue())
              .append("\n");
    }
    return result.toString();
}
```

</TabItem>
<TabItem value="synchronization" label="åŒæ­¥ä¼˜åŒ–">

```java
// ä½¿ç”¨å­—èŠ‚ç åˆ†æä¼˜åŒ–åŒæ­¥

// é—®é¢˜ä»£ç  - è¿‡åº¦åŒæ­¥
public synchronized void processData(int value) {
    if (value <= 0) {
        return;  // æ—©æœŸè¿”å›ï¼Œä½†ä»æŒæœ‰é”
    }
    
    // å®é™…éœ€è¦åŒæ­¥çš„ä»£ç 
    updateSharedState(value);
}

// å­—èŠ‚ç åˆ†æ:
// - æ•´ä¸ªæ–¹æ³•åŠ äº†ACC_SYNCHRONIZEDæ ‡å¿—
// - å³ä½¿æå‰è¿”å›ä¹Ÿä¼šæ‰§è¡ŒmonitorexitæŒ‡ä»¤

// ä¼˜åŒ–åçš„ä»£ç 
public void processDataOptimized(int value) {
    if (value <= 0) {
        return;  // æ— é”æ£€æŸ¥
    }
    
    // åªåŒæ­¥éœ€è¦çš„éƒ¨åˆ†
    synchronized (this) {
        updateSharedState(value);
    }
}
```

</TabItem>
</Tabs>

## 6. é«˜çº§ä¸»é¢˜

### 6.1 å­—èŠ‚ç ä¸JITç¼–è¯‘ä¼˜åŒ–

JITç¼–è¯‘å™¨åˆ†æå­—èŠ‚ç æ‰§è¡Œæƒ…å†µï¼Œå°†çƒ­ç‚¹ä»£ç å³æ—¶ç¼–è¯‘ä¸ºæœ¬åœ°ä»£ç ï¼Œå¹¶è¿›è¡Œå„ç§ä¼˜åŒ–ã€‚

```java
// è€ƒè™‘ä»¥ä¸‹ä»£ç 
public int sum(int[] array) {
    int sum = 0;
    for (int i = 0; i < array.length; i++) {
        sum += array[i];
    }
    return sum;
}

// JITå¯èƒ½çš„ä¼˜åŒ–:
// 1. å†…å­˜è¾¹ç•Œæ£€æŸ¥æ¶ˆé™¤ - ç¡®è®¤iæ€»æ˜¯åœ¨åˆæ³•èŒƒå›´å†…ï¼Œæ¶ˆé™¤æ•°ç»„è®¿é—®è¾¹ç•Œæ£€æŸ¥
// 2. å¾ªç¯å±•å¼€ - å°†å¾ªç¯å±•å¼€ä¸ºå¤šæ¬¡è¿­ä»£ï¼Œå‡å°‘å¾ªç¯æ§åˆ¶å¼€é”€
// 3. SIMDå‘é‡åŒ– - ä½¿ç”¨CPUçš„SIMDæŒ‡ä»¤å¹¶è¡Œå¤„ç†å¤šä¸ªå…ƒç´ 
// 4. è‡ªåŠ¨å¹¶è¡ŒåŒ– - æ ¹æ®ç¡¬ä»¶æƒ…å†µå°†æ“ä½œåˆ†æ•£åˆ°å¤šæ ¸å¿ƒ
```

:::info JITä¼˜åŒ–è§‚å¯Ÿ
ä½¿ç”¨JVMå‚æ•°å¯ä»¥è§‚å¯ŸJITçš„è¡Œä¸º:
- `-XX:+PrintCompilation`: æ‰“å°JITç¼–è¯‘ä¿¡æ¯
- `-XX:+UnlockDiagnosticVMOptions -XX:+PrintInlining`: æ‰“å°å†…è”å†³ç­–
- `-XX:CompileCommand=print,*ClassName.methodName`: æ‰“å°ç‰¹å®šæ–¹æ³•çš„ç¼–è¯‘ç»“æœ
:::

### 6.2 åŠ¨æ€è¯­è¨€æ”¯æŒ(invokedynamic)

Java 7å¼•å…¥äº†`invokedynamic`æŒ‡ä»¤ï¼Œä¸ºæ”¯æŒåŠ¨æ€ç±»å‹è¯­è¨€å’ŒJava 8ä¸­çš„Lambdaè¡¨è¾¾å¼æä¾›åŸºç¡€ã€‚

```java
// Lambdaè¡¨è¾¾å¼
Runnable r = () -> System.out.println("Hello");

// åº•å±‚ä½¿ç”¨invokedynamicå®ç°:
// 1. ç¼–è¯‘æœŸç”Ÿæˆå¼•å¯¼æ–¹æ³•(bootstrap method)
// 2. è¿è¡Œæ—¶é¦–æ¬¡æ‰§è¡ŒinvokedynamicæŒ‡ä»¤æ—¶ï¼Œè°ƒç”¨å¼•å¯¼æ–¹æ³•åˆ›å»ºè°ƒç”¨ç‚¹(CallSite)
// 3. CallSiteé“¾æ¥åˆ°å®é™…çš„ç›®æ ‡æ–¹æ³•
// 4. åç»­è°ƒç”¨ç›´æ¥ä½¿ç”¨å·²é“¾æ¥çš„ç›®æ ‡ï¼Œæ— éœ€é‡æ–°è§£æ
```

### 6.3 å­—èŠ‚ç ä¸å®‰å…¨

JVMçš„å­—èŠ‚ç éªŒè¯æ˜¯Javaå¹³å°å®‰å…¨æ€§çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå¯ä»¥é˜²æ­¢æ¶æ„ä»£ç ç ´åç³»ç»Ÿã€‚

<Tabs>
<TabItem value="verification" label="å­—èŠ‚ç éªŒè¯">

```
å­—èŠ‚ç éªŒè¯å™¨ä¼šæ£€æŸ¥ä»¥ä¸‹å†…å®¹:

1. ç»“æ„æ£€æŸ¥
   - é­”æ•°å’Œç‰ˆæœ¬å·åˆæ³•æ€§
   - ç±»æ–‡ä»¶æ ¼å¼æ­£ç¡®æ€§
   - å¸¸é‡æ± é¡¹åˆæ³•æ€§

2. ç±»å‹æ£€æŸ¥
   - ç¡®ä¿æ“ä½œæ•°ç±»å‹ä¸æŒ‡ä»¤å…¼å®¹
   - æ–¹æ³•è°ƒç”¨å‚æ•°ç±»å‹åŒ¹é…
   - å­—æ®µè®¿é—®ç±»å‹å…¼å®¹æ€§

3. æ§åˆ¶æµæ£€æŸ¥
   - è·³è½¬ç›®æ ‡åœ¨æ–¹æ³•ä½“å†…
   - ä¸ä¼šè·³è½¬åˆ°æŒ‡ä»¤ä¸­é—´
   - å¼‚å¸¸è¡¨æ¡ç›®æœ‰æ•ˆ

4. è®¿é—®æ§åˆ¶æ£€æŸ¥
   - ç§æœ‰æ–¹æ³•/å­—æ®µä¸è¢«å¤–éƒ¨è®¿é—®
   - finalç±»ä¸è¢«ç»§æ‰¿
   - æŠ½è±¡æ–¹æ³•å¿…é¡»å®ç°
```

</TabItem>
<TabItem value="attack-defense" label="æ”»å‡»ä¸é˜²å¾¡">

```java
// æ½œåœ¨å­—èŠ‚ç æ³¨å…¥æ”»å‡»åœºæ™¯:

// 1. ç±»åŠ è½½æ”»å‡» - æ³¨å…¥æ¶æ„ç±»
// é˜²å¾¡: SecurityManager, è‡ªå®šä¹‰ClassLoaderæƒé™æ§åˆ¶

// 2. åå°„æ”»å‡» - ç»•è¿‡è®¿é—®é™åˆ¶
Class<?> cls = Class.forName("com.target.SecretClass");
Field field = cls.getDeclaredField("secretField");
field.setAccessible(true); // å°è¯•è®¿é—®privateå­—æ®µ
// é˜²å¾¡: æƒé™æ§åˆ¶, SecurityManageré™åˆ¶åå°„

// 3. åºåˆ—åŒ–æ”»å‡» - é€šè¿‡readObjectæ³¨å…¥
// é˜²å¾¡: å®ç°readObjectæ—¶éªŒè¯æ•°æ®å®Œæ•´æ€§
// ä½¿ç”¨validateObject()æˆ–è‡ªå®šä¹‰ObjectInputFilter

// 4. å­—èŠ‚ç æ³¨å…¥ - åŠ¨æ€ä¿®æ”¹å­—èŠ‚ç 
// é˜²å¾¡: ä»£ç ç­¾å, é™åˆ¶agentåŠ è½½
```

</TabItem>
</Tabs>

## 7. å­—èŠ‚ç æœªæ¥å‘å±•

éšç€Javaå¹³å°çš„å‘å±•ï¼Œå­—èŠ‚ç æŠ€æœ¯ä¹Ÿåœ¨ä¸æ–­æ¼”è¿›ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å‘å±•è¶‹åŠ¿ï¼š

1. **æ›´é«˜æ•ˆçš„å­—èŠ‚ç æŒ‡ä»¤**ï¼šä¸ºæ–°çš„è¯­è¨€ç‰¹æ€§å’Œç¡¬ä»¶ä¼˜åŒ–æä¾›æ”¯æŒ
2. **å¢å¼ºçš„ç±»æ–‡ä»¶æ ¼å¼**ï¼šæ”¯æŒæ›´å¤šå…ƒæ•°æ®å’Œä¼˜åŒ–æç¤º
3. **GraalVMä¸Ahead-of-Timeç¼–è¯‘**ï¼šå°†å­—èŠ‚ç æå‰ç¼–è¯‘ä¸ºæœ¬åœ°ä»£ç 
4. **æ›´æ™ºèƒ½çš„JITä¼˜åŒ–**ï¼šåˆ©ç”¨æœºå™¨å­¦ä¹ æå‡ä¼˜åŒ–å†³ç­–
5. **å¤šè¯­è¨€äº’æ“ä½œæ€§å¢å¼º**ï¼šæ›´å¥½åœ°æ”¯æŒJVMä¸Šçš„å…¶ä»–è¯­è¨€

:::tip å­¦ä¹ å»ºè®®
1. æŒæ¡å¸¸ç”¨å­—èŠ‚ç æŒ‡ä»¤å’Œç±»æ–‡ä»¶ç»“æ„
2. å­¦ä¼šä½¿ç”¨å­—èŠ‚ç å·¥å…·åˆ†æé—®é¢˜
3. ç†è§£JVMæ‰§è¡Œæ¨¡å‹å’Œä¼˜åŒ–åŸç†
4. é€šè¿‡å­—èŠ‚ç ç†è§£Javaè¯­è¨€ç‰¹æ€§
5. å®è·µå­—èŠ‚ç å¢å¼ºä»¥è§£å†³å®é™…é—®é¢˜
:::

---

æœ¬ç« æ·±å…¥è®²è§£äº†Javaå­—èŠ‚ç çš„åŸºç¡€çŸ¥è¯†ã€ç±»æ–‡ä»¶ç»“æ„ã€æŒ‡ä»¤é›†ã€æ‰§è¡Œæ¨¡å‹ã€å·¥å…·ä½¿ç”¨å’Œæ€§èƒ½ä¼˜åŒ–æŠ€æœ¯ã€‚æŒæ¡å­—èŠ‚ç å¯¹äºæ·±å…¥ç†è§£JVMè¿è¡Œæœºåˆ¶ã€æ’æŸ¥æ€§èƒ½é—®é¢˜ã€è¿›è¡Œåº•å±‚ä¼˜åŒ–éƒ½å…·æœ‰é‡è¦æ„ä¹‰ã€‚ä½œä¸ºJavaé«˜çº§å¼€å‘è€…ï¼Œå­—èŠ‚ç çŸ¥è¯†å°†å¸®åŠ©ä½ æ›´å¥½åœ°æŒæ§åº”ç”¨ç¨‹åºçš„è¡Œä¸ºå’Œæ€§èƒ½ã€‚
