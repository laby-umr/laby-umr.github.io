---
sidebar_position: 4
title: Java Listé›†åˆè¯¦è§£
description: å…¨é¢ä»‹ç»Java Listæ¥å£åŠå…¶å®ç°ç±»ã€æ ¸å¿ƒç‰¹æ€§ã€æ€§èƒ½åˆ†æä¸æœ€ä½³å®è·µ
authors: [Laby]
last_update:
  date: 2025-08-07
  author: Laby
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Java List é›†åˆè¯¦è§£

Listæ˜¯Javaé›†åˆæ¡†æ¶ä¸­æœ€æ ¸å¿ƒçš„æ¥å£ä¹‹ä¸€ï¼Œå®ƒç»§æ‰¿è‡ªCollectionæ¥å£ï¼Œæä¾›äº†æœ‰åºã€å¯é‡å¤ã€å¯ç´¢å¼•çš„é›†åˆæ“ä½œèƒ½åŠ›ã€‚åœ¨Javaå¼€å‘ä¸­ï¼ŒListé›†åˆè¢«å¹¿æ³›åº”ç”¨äºå„ç§åœºæ™¯ï¼Œä»ç®€å•çš„æ•°æ®å­˜å‚¨åˆ°å¤æ‚çš„ä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œéƒ½ç¦»ä¸å¼€Listçš„æ”¯æŒã€‚

:::tip æ ¸å¿ƒç‰¹æ€§
**Listæ¥å£ = æœ‰åºæ€§ + å¯é‡å¤æ€§ + å¯ç´¢å¼•æ€§ + å¯ä¿®æ”¹æ€§ + æ‰¹é‡æ“ä½œæ”¯æŒ**
- ğŸ“‹ **æœ‰åºæ€§**ï¼šå…ƒç´ æŒ‰ç…§æ’å…¥é¡ºåºæ’åˆ—ï¼Œä½ç½®å¯é¢„æµ‹
- ğŸ”„ **å¯é‡å¤æ€§**ï¼šå…è®¸æ·»åŠ ç›¸åŒçš„å…ƒç´ ï¼Œä¸å¼ºåˆ¶å”¯ä¸€æ€§
- ğŸ”¢ **å¯ç´¢å¼•æ€§**ï¼šæ”¯æŒé€šè¿‡ç´¢å¼•å¿«é€Ÿå®šä½å’Œè®¿é—®å…ƒç´ ï¼ˆå¦‚get(i)ï¼‰
- âœï¸ **å¯ä¿®æ”¹æ€§**ï¼šæ”¯æŒåœ¨ä»»æ„ä½ç½®æ·»åŠ ã€åˆ é™¤ã€æ›¿æ¢å…ƒç´ 
- ğŸ› ï¸ **æ‰¹é‡æ“ä½œ**ï¼šæ”¯æŒå­åˆ—è¡¨è§†å›¾å’Œæ•´ä½“é›†åˆæ“ä½œ
:::

## 1. Listæ¥å£åŸºç¡€æ¦‚å¿µ

### 1.1 ä»€ä¹ˆæ˜¯Listæ¥å£ï¼Ÿ

Listæ¥å£æ˜¯Javaé›†åˆæ¡†æ¶ä¸­çš„æ ¸å¿ƒæ¥å£ï¼Œå®ƒç»§æ‰¿è‡ªCollectionæ¥å£ï¼Œä¸ºæœ‰åºé›†åˆæä¾›äº†å®Œæ•´çš„æŠ½è±¡ã€‚

```mermaid
classDiagram
    Iterable <|-- Collection
    Collection <|-- List
    List <|.. ArrayList
    List <|.. LinkedList
    List <|.. Vector
    Vector <|-- Stack
    
    class Iterable {
        +iterator() Iterator
    }
    
    class Collection {
        +add(E) boolean
        +remove(Object) boolean
        +contains(Object) boolean
        +size() int
        +isEmpty() boolean
    }
    
    class List {
        +get(int) E
        +set(int, E) E
        +add(int, E) void
        +remove(int) E
        +indexOf(Object) int
        +subList(int, int) List
    }
    
    class ArrayList {
        -elementData Object[]
        +ensureCapacity(int) void
        +trimToSize() void
    }
    
    class LinkedList {
        -first Node
        -last Node
        +addFirst(E) void
        +addLast(E) void
    }
    
    class Vector {
        -elementData Object[]
        -capacityIncrement int
        +capacity() int
    }
    
    class Stack {
        +push(E) E
        +pop() E
        +peek() E
    }
    
    <<interface>> Iterable
    <<interface>> Collection
    <<interface>> List
```

Listé›†åˆå…·æœ‰ä»¥ä¸‹æ ¸å¿ƒç‰¹å¾ï¼š

- **æœ‰åºæ€§**ï¼šå…ƒç´ æŒ‰ç…§æ’å…¥é¡ºåºå­˜å‚¨ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•è®¿é—®
- **å¯é‡å¤æ€§**ï¼šå…è®¸å­˜å‚¨é‡å¤çš„å…ƒç´   
- **å¯ç´¢å¼•æ€§**ï¼šæ”¯æŒåŸºäºä½ç½®çš„å…ƒç´ è®¿é—®å’Œæ“ä½œ
- **å¯ä¿®æ”¹æ€§**ï¼šæ”¯æŒå…ƒç´ çš„å¢åˆ æ”¹æŸ¥æ“ä½œ
- **æ‰¹é‡æ“ä½œ**ï¼šæ”¯æŒé›†åˆçº§åˆ«çš„æ‰¹é‡å¤„ç†

### 1.2 Listæ¥å£çš„é‡è¦æ€§

| é‡è¦æ€§ | å…·ä½“ä½“ç° | ä¸šåŠ¡ä»·å€¼ |
|--------|----------|----------|
| **æ•°æ®ç»„ç»‡** | æä¾›æœ‰åºçš„æ•°æ®å­˜å‚¨ç»“æ„ | æ”¯æŒä¸šåŠ¡é€»è¾‘çš„é¡ºåºæ€§è¦æ±‚ |
| **å¿«é€Ÿè®¿é—®** | åŸºäºç´¢å¼•çš„O(1)éšæœºè®¿é—® | æé«˜æ•°æ®æ£€ç´¢æ•ˆç‡ |
| **çµæ´»æ“ä½œ** | æ”¯æŒä½ç½®ç›¸å…³çš„å¢åˆ æ”¹æŸ¥ | æ»¡è¶³å¤æ‚çš„ä¸šåŠ¡æ“ä½œéœ€æ±‚ |
| **æ¡†æ¶åŸºç¡€** | ä¸ºå…¶ä»–é›†åˆç±»å‹æä¾›åŸºç¡€ | æ„å»ºå®Œæ•´çš„é›†åˆä½“ç³» |

### 1.3 Listæ¥å£è®¾è®¡åŸåˆ™

Listæ¥å£çš„è®¾è®¡éµå¾ªä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒåŸåˆ™ï¼š

#### ä½ç½®è®¿é—®åŸåˆ™
æä¾›åŸºäºç´¢å¼•çš„å…ƒç´ è®¿é—®èƒ½åŠ›ï¼Œæ”¯æŒéšæœºè®¿é—®æ¨¡å¼

#### ä½ç½®æ“ä½œåŸåˆ™  
æ”¯æŒåœ¨æŒ‡å®šä½ç½®æ’å…¥å’Œåˆ é™¤å…ƒç´ ï¼Œæ»¡è¶³ç²¾ç¡®æ§åˆ¶éœ€æ±‚

#### æ‰¹é‡æ“ä½œåŸåˆ™
æ”¯æŒé›†åˆçº§åˆ«çš„æ‰¹é‡å¤„ç†ï¼Œæé«˜æ“ä½œæ•ˆç‡

#### è§†å›¾æ“ä½œåŸåˆ™
æä¾›å­åˆ—è¡¨è§†å›¾ï¼Œæ”¯æŒèŒƒå›´æ“ä½œå’Œåˆ†æ®µå¤„ç†

```java title="Listæ¥å£æ ¸å¿ƒæ–¹æ³•ç¤ºä¾‹"
public interface List<E> extends Collection<E> {
    
    // ========== ä½ç½®è®¿é—® ==========
    E get(int index);                    // è·å–æŒ‡å®šä½ç½®çš„å…ƒç´ 
    E set(int index, E element);         // è®¾ç½®æŒ‡å®šä½ç½®çš„å…ƒç´ 
    
    // ========== ä½ç½®æ“ä½œ ==========
    void add(int index, E element);      // åœ¨æŒ‡å®šä½ç½®æ’å…¥å…ƒç´ 
    E remove(int index);                 // åˆ é™¤æŒ‡å®šä½ç½®çš„å…ƒç´ 
    
    // ========== æ‰¹é‡æ“ä½œ ==========
    boolean addAll(Collection<? extends E> c);           // æ‰¹é‡æ·»åŠ 
    boolean addAll(int index, Collection<? extends E> c); // æŒ‡å®šä½ç½®æ‰¹é‡æ·»åŠ 
    
    // ========== è§†å›¾æ“ä½œ ==========
    List<E> subList(int fromIndex, int toIndex);        // è·å–å­åˆ—è¡¨è§†å›¾
}
```

### 1.4 Listæ¥å£æ ¸å¿ƒæ–¹æ³•è¯¦è§£

Listæ¥å£æä¾›äº†ä¸°å¯Œçš„æ–¹æ³•æ¥æ“ä½œæœ‰åºé›†åˆï¼Œè¿™äº›æ–¹æ³•å¯ä»¥åˆ†ä¸ºå‡ ä¸ªä¸»è¦ç±»åˆ«ï¼š

<Tabs>
<TabItem value="basic" label="åŸºæœ¬æ“ä½œæ–¹æ³•">

```java title="ListåŸºæœ¬æ“ä½œæ–¹æ³•"
public interface List<E> extends Collection<E> {
    
    // æ·»åŠ å’Œåˆ é™¤å…ƒç´ 
    boolean add(E e);                    // æ·»åŠ å…ƒç´ åˆ°æœ«å°¾
    boolean remove(Object o);            // åˆ é™¤æŒ‡å®šå…ƒç´ 
    
    // ä½ç½®è®¿é—®
    E get(int index);                   // è·å–æŒ‡å®šä½ç½®å…ƒç´ 
    E set(int index, E element);        // è®¾ç½®æŒ‡å®šä½ç½®å…ƒç´ 
    
    // é›†åˆä¿¡æ¯
    int size();                         // è·å–é›†åˆå¤§å°
    boolean isEmpty();                  // åˆ¤æ–­æ˜¯å¦ä¸ºç©º
    boolean contains(Object o);         // åˆ¤æ–­æ˜¯å¦åŒ…å«å…ƒç´ 
    void clear();                       // æ¸…ç©ºé›†åˆ
}
```

| æ–¹æ³• | æè¿° | è¿”å›å€¼ | æ—¶é—´å¤æ‚åº¦ |
|------|------|--------|------------|
| `add(E e)` | æ·»åŠ å…ƒç´ åˆ°æœ«å°¾ | æˆåŠŸè¿”å›true | O(1)~O(n) |
| `remove(Object o)` | åˆ é™¤ç¬¬ä¸€ä¸ªåŒ¹é…å…ƒç´  | æˆåŠŸè¿”å›true | O(n) |
| `get(int index)` | è·å–æŒ‡å®šä½ç½®å…ƒç´  | å…ƒç´ å€¼ | O(1)~O(n) |
| `set(int index, E element)` | è®¾ç½®æŒ‡å®šä½ç½®å…ƒç´  | åŸå…ƒç´ å€¼ | O(1)~O(n) |

</TabItem>
<TabItem value="positional" label="ä½ç½®æ“ä½œæ–¹æ³•">
```java title="Listä½ç½®æ“ä½œæ–¹æ³•"
public interface List<E> extends Collection<E> {
    
    // ä½ç½®æ’å…¥å’Œåˆ é™¤
    void add(int index, E element);     // åœ¨æŒ‡å®šä½ç½®æ’å…¥
    E remove(int index);                // åˆ é™¤æŒ‡å®šä½ç½®å…ƒç´ 
    
    // ä½ç½®æŸ¥æ‰¾
    int indexOf(Object o);              // æŸ¥æ‰¾å…ƒç´ ç¬¬ä¸€æ¬¡å‡ºç°ä½ç½®
    int lastIndexOf(Object o);          // æŸ¥æ‰¾å…ƒç´ æœ€åä¸€æ¬¡å‡ºç°ä½ç½®
}
```
    
| æ–¹æ³• | æè¿° | è¿”å›å€¼ | æ—¶é—´å¤æ‚åº¦ |
|------|------|--------|------------|
| `add(int index, E element)` | åœ¨æŒ‡å®šä½ç½®æ’å…¥å…ƒç´  | void | O(n) |
| `remove(int index)` | åˆ é™¤æŒ‡å®šä½ç½®å…ƒç´  | è¢«åˆ é™¤çš„å…ƒç´  | O(n) |
| `indexOf(Object o)` | æŸ¥æ‰¾ç¬¬ä¸€æ¬¡å‡ºç°ä½ç½® | ç´¢å¼•å€¼æˆ–-1 | O(n) |
| `lastIndexOf(Object o)` | æŸ¥æ‰¾æœ€åä¸€æ¬¡å‡ºç°ä½ç½® | ç´¢å¼•å€¼æˆ–-1 | O(n) |

</TabItem>
<TabItem value="batch" label="æ‰¹é‡æ“ä½œæ–¹æ³•">
```java title="Listæ‰¹é‡æ“ä½œæ–¹æ³•"
public interface List<E> extends Collection<E> {
    
    // æ‰¹é‡æ·»åŠ 
    boolean addAll(Collection<? extends E> c);           // æœ«å°¾æ‰¹é‡æ·»åŠ 
    boolean addAll(int index, Collection<? extends E> c); // æŒ‡å®šä½ç½®æ‰¹é‡æ·»åŠ 
    
    // æ‰¹é‡åˆ é™¤
    boolean removeAll(Collection<?> c);                  // åˆ é™¤æŒ‡å®šé›†åˆä¸­çš„å…ƒç´ 
    boolean retainAll(Collection<?> c);                  // ä¿ç•™æŒ‡å®šé›†åˆä¸­çš„å…ƒç´ 
    
    // è§†å›¾æ“ä½œ
    List<E> subList(int fromIndex, int toIndex);        // è·å–å­åˆ—è¡¨è§†å›¾
}
```

| æ–¹æ³• | æè¿° | è¿”å›å€¼ | æ—¶é—´å¤æ‚åº¦ |
|------|------|--------|------------|
| `addAll(Collection<? extends E> c)` | åœ¨æœ«å°¾æ‰¹é‡æ·»åŠ  | æˆåŠŸè¿”å›true | O(n) |
| `addAll(int index, Collection<? extends E> c)` | åœ¨æŒ‡å®šä½ç½®æ‰¹é‡æ·»åŠ  | æˆåŠŸè¿”å›true | O(n) |
| `removeAll(Collection<?> c)` | ç§»é™¤æ‰€æœ‰åŒ…å«å…ƒç´  | æˆåŠŸè¿”å›true | O(nÂ²) |
| `retainAll(Collection<?> c)` | ä»…ä¿ç•™å…±æœ‰å…ƒç´  | æˆåŠŸè¿”å›true | O(nÂ²) |
| `subList(int fromIndex, int toIndex)` | è·å–å­åˆ—è¡¨è§†å›¾ | Listè§†å›¾ | O(1) |

</TabItem>
<TabItem value="iterator" label="è¿­ä»£å™¨æ–¹æ³•">
```java title="Listè¿­ä»£å™¨æ–¹æ³•"
public interface List<E> extends Collection<E> {
    
    // åˆ—è¡¨è¿­ä»£å™¨
    ListIterator<E> listIterator();                      // è·å–åˆ—è¡¨è¿­ä»£å™¨
    ListIterator<E> listIterator(int index);             // ä»æŒ‡å®šä½ç½®å¼€å§‹çš„è¿­ä»£å™¨
    
    // æ™®é€šè¿­ä»£å™¨ï¼ˆç»§æ‰¿è‡ªCollectionï¼‰
    Iterator<E> iterator();                              // è·å–è¿­ä»£å™¨
}
```

| æ–¹æ³• | æè¿° | è¿”å›å€¼ | ç‰¹æ®ŠåŠŸèƒ½ |
|------|------|--------|----------|
| `iterator()` | è·å–æ™®é€šè¿­ä»£å™¨ | Iteratorå¯¹è±¡ | å•å‘éå†ã€remove() |
| `listIterator()` | è·å–åˆ—è¡¨è¿­ä»£å™¨ | ListIteratorå¯¹è±¡ | åŒå‘éå†ã€æ·»åŠ å…ƒç´  |
| `listIterator(int index)` | ä»æŒ‡å®šä½ç½®å¼€å§‹çš„è¿­ä»£å™¨ | ListIteratorå¯¹è±¡ | ä»ä»»æ„ä½ç½®å¼€å§‹ |

:::info ListIteratorç‰¹æœ‰åŠŸèƒ½
ListIteratoræ˜¯Listæ¥å£çš„ç‰¹æœ‰è¿­ä»£å™¨ï¼Œç›¸æ¯”æ™®é€šIteratorå…·æœ‰æ›´å¤šåŠŸèƒ½ï¼š
- `hasPrevious()`/`previous()`ï¼šæ”¯æŒ**åŒå‘éå†**
- `add(E e)`ï¼šåœ¨å½“å‰ä½ç½®**æ·»åŠ å…ƒç´ **
- `set(E e)`ï¼š**æ›¿æ¢**æœ€åè¿”å›çš„å…ƒç´ 
- `nextIndex()`/`previousIndex()`ï¼šè·å–**å…ƒç´ ç´¢å¼•**
:::

</TabItem>
</Tabs>

### 1.5 Listæ¥å£æ–¹æ³•åˆ†ç±»å¯¹æ¯”

| æ–¹æ³•ç±»åˆ« | ä¸»è¦æ–¹æ³• | æ—¶é—´å¤æ‚åº¦ | ä½¿ç”¨åœºæ™¯ |
|----------|----------|------------|----------|
| **åŸºæœ¬æ“ä½œ** | add(E), remove(Object), get(int), set(int) | O(1) - O(n) | æ—¥å¸¸çš„å¢åˆ æ”¹æŸ¥æ“ä½œ |
| **ä½ç½®æ“ä½œ** | add(int, E), remove(int), indexOf(Object) | O(1) - O(n) | éœ€è¦ç²¾ç¡®ä½ç½®æ§åˆ¶çš„æ“ä½œ |
| **æ‰¹é‡æ“ä½œ** | addAll(Collection), subList(int, int) | O(n) | æ‰¹é‡æ•°æ®å¤„ç†å’ŒèŒƒå›´æ“ä½œ |
| **è¿­ä»£å™¨** | listIterator(), listIterator(int) | O(1) | åŒå‘éå†å’Œä¿®æ”¹æ“ä½œ |

:::tip æ€§èƒ½è€ƒè™‘
- éšæœºè®¿é—®æ“ä½œï¼ˆgetã€setï¼‰åœ¨ArrayListä¸­ä¸ºO(1)ï¼Œåœ¨LinkedListä¸­ä¸ºO(n)
- ä½ç½®æ’å…¥åˆ é™¤æ“ä½œåœ¨ArrayListä¸­ä¸ºO(n)ï¼Œåœ¨LinkedListä¸­ä¸ºO(1)
- é€‰æ‹©å®ç°ç±»æ—¶åº”æ ¹æ®ä¸»è¦æ“ä½œç±»å‹è¿›è¡Œæƒè¡¡
:::

## 2. List å®ç°ç±»è¯¦è§£

```mermaid
graph TD
    subgraph æ€§èƒ½æ¯”è¾ƒ
        A["Listå®ç°ç±»"] --> B["ArrayList (éšæœºè®¿é—®å¿«)"]
        A --> C["LinkedList (æ’å…¥åˆ é™¤å¿«)"]
        A --> D["Vector/Stack (çº¿ç¨‹å®‰å…¨)"]
        A --> E["CopyOnWriteArrayList (å¹¶å‘å®‰å…¨)"]
    end
    
    subgraph æ—¶é—´å¤æ‚åº¦
        B --> B1["éšæœºè®¿é—®: O(1)"]
        B --> B2["ä¸­é—´æ’å…¥/åˆ é™¤: O(n)"]
        B --> B3["æœ«å°¾æ·»åŠ : å¹³å‡O(1)"]
        
        C --> C1["éšæœºè®¿é—®: O(n)"]
        C --> C2["ä¸­é—´æ’å…¥/åˆ é™¤: O(1)"]
        C --> C3["ä¸¤ç«¯æ“ä½œ: O(1)"]
        
        D --> D1["ä¸ArrayListç±»ä¼¼"]
        D --> D2["ä½†æœ‰åŒæ­¥å¼€é”€"]
        
        E --> E1["è¯»å–: O(1)"]
        E --> E2["å†™å…¥: O(n)"]
        E --> E3["é€‚åˆè¯»å¤šå†™å°‘"]
    end
    
    classDef default fill:#f9f9f9,stroke:#333,stroke-width:1px;
    classDef fast fill:#d1f0d1,stroke:#333,stroke-width:1px;
    classDef slow fill:#f0d1d1,stroke:#333,stroke-width:1px;
    
    class B1,C2,C3 fast;
    class B2,C1 slow;
```

<Tabs>
<TabItem value="arraylist" label="ArrayList å®ç°">

### 2.1 ArrayList æ¦‚è¿°

:::tip æ ¸å¿ƒç‰¹ç‚¹
ArrayListæ˜¯Listæ¥å£æœ€å¸¸ç”¨çš„å®ç°ç±»ï¼ŒåŸºäºåŠ¨æ€æ•°ç»„å®ç°ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š
- ğŸ”„ **åŠ¨æ€æ‰©å®¹**ï¼šè‡ªåŠ¨è°ƒæ•´å®¹é‡ä»¥é€‚åº”å…ƒç´ æ•°é‡å˜åŒ–
- âš¡ **éšæœºè®¿é—®**ï¼šåŸºäºç´¢å¼•çš„å¿«é€Ÿè®¿é—®ï¼Œæ—¶é—´å¤æ‚åº¦O(1)
- ğŸš€ **å°¾éƒ¨æ“ä½œé«˜æ•ˆ**ï¼šåœ¨åˆ—è¡¨æœ«å°¾æ·»åŠ å’Œåˆ é™¤å…ƒç´ æ•ˆç‡å¾ˆé«˜
- ğŸ“¦ **å†…å­˜è¿ç»­**ï¼šå…ƒç´ åœ¨å†…å­˜ä¸­è¿ç»­å­˜å‚¨ï¼Œç¼“å­˜å‹å¥½
- âš ï¸ **çº¿ç¨‹ä¸å®‰å…¨**ï¼šåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹éœ€è¦å¤–éƒ¨åŒæ­¥
:::

#### é€‚ç”¨åœºæ™¯
- é¢‘ç¹çš„éšæœºè®¿é—®æ“ä½œ
- å…ƒç´ æ•°é‡ç›¸å¯¹ç¨³å®šçš„åœºæ™¯
- éœ€è¦é«˜æ€§èƒ½è¯»å–çš„åº”ç”¨
- å†…å­˜ä½¿ç”¨è¦æ±‚ä¸ä¸¥æ ¼çš„åœºæ™¯

### 2.2 ArrayList å†…éƒ¨ç»“æ„

ArrayListåŸºäºåŠ¨æ€æ•°ç»„å®ç°ï¼Œå†…éƒ¨ç»´æŠ¤ä¸€ä¸ªObjectæ•°ç»„æ¥å­˜å‚¨å…ƒç´ ã€‚å½“æ•°ç»„å®¹é‡ä¸è¶³æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºæ›´å¤§çš„æ•°ç»„å¹¶å¤åˆ¶åŸæœ‰å…ƒç´ ã€‚

#### æ ¸å¿ƒå­—æ®µ

```java title="ArrayListæ ¸å¿ƒå­—æ®µ"
public class ArrayList<E> extends AbstractList<E>
        implements List<E>, RandomAccess, Cloneable, java.io.Serializable {
    
    // é»˜è®¤åˆå§‹å®¹é‡
    private static final int DEFAULT_CAPACITY = 10;
    
    // ç©ºæ•°ç»„å®ä¾‹ï¼Œç”¨äºç©ºå®ä¾‹
    private static final Object[] EMPTY_ELEMENTDATA = {};
    
    // é»˜è®¤å¤§å°çš„ç©ºæ•°ç»„å®ä¾‹
    private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = {};
    
    // å­˜å‚¨å…ƒç´ çš„æ•°ç»„ç¼“å†²åŒº
    transient Object[] elementData;
    
    // ArrayListçš„å¤§å°ï¼ˆåŒ…å«çš„å…ƒç´ æ•°é‡ï¼‰
    private int size;
}
```

#### æ„é€ æ–¹æ³•

```java title="ArrayListæ„é€ æ–¹æ³•"
public class ArrayList<E> extends AbstractList<E> {
    
    /**
     * æ„é€ ä¸€ä¸ªåˆå§‹å®¹é‡ä¸º10çš„ç©ºåˆ—è¡¨
     */
    public ArrayList() {
        this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;
    }
    
    /**
     * æ„é€ ä¸€ä¸ªæŒ‡å®šåˆå§‹å®¹é‡çš„ç©ºåˆ—è¡¨
     */
    public ArrayList(int initialCapacity) {
        if (initialCapacity > 0) {
            this.elementData = new Object[initialCapacity];
        } else if (initialCapacity == 0) {
            this.elementData = EMPTY_ELEMENTDATA;
        } else {
            throw new IllegalArgumentException("Illegal Capacity: " + initialCapacity);
        }
    }
    
    /**
     * æ„é€ ä¸€ä¸ªåŒ…å«æŒ‡å®šé›†åˆå…ƒç´ çš„åˆ—è¡¨
     */
    public ArrayList(Collection<? extends E> c) {
        elementData = c.toArray();
        if ((size = elementData.length) != 0) {
            if (elementData.getClass() != Object[].class) {
                elementData = Arrays.copyOf(elementData, size, Object[].class);
            }
        } else {
            this.elementData = EMPTY_ELEMENTDATA;
        }
    }
}
```

#### å†…å­˜å¸ƒå±€ç¤ºæ„å›¾

```
ArrayList å®ä¾‹
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ elementData: Object[]                   â”‚
â”‚ â”œâ”€â”€ [0] â†’ "Element1"                   â”‚
â”‚ â”œâ”€â”€ [1] â†’ "Element2"                   â”‚
â”‚ â”œâ”€â”€ [2] â†’ "Element3"                   â”‚
â”‚ â”œâ”€â”€ [3] â†’ null                         â”‚
â”‚ â””â”€â”€ [4] â†’ null                         â”‚
â”‚ size: 3                                â”‚
â”‚ modCount: 1                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 ArrayList æ ¸å¿ƒæ–¹æ³•å®ç°

#### 2.3.1 æ·»åŠ å…ƒç´ 

ArrayListçš„æ·»åŠ æ“ä½œåŒ…æ‹¬åœ¨æœ«å°¾æ·»åŠ å’Œåœ¨æŒ‡å®šä½ç½®æ’å…¥ä¸¤ç§æ–¹å¼ï¼š

```java title="ArrayListæ·»åŠ å…ƒç´ å®ç°"
public class ArrayList<E> extends AbstractList<E> {
    
    /**
     * åœ¨åˆ—è¡¨æœ«å°¾æ·»åŠ å…ƒç´ 
     * æ—¶é—´å¤æ‚åº¦ï¼šå¹³å‡O(1)ï¼Œæœ€åæƒ…å†µO(n)ï¼ˆéœ€è¦æ‰©å®¹ï¼‰
     */
    public boolean add(E e) {
        // ç¡®ä¿å®¹é‡è¶³å¤Ÿ
        ensureCapacityInternal(size + 1);
        // åœ¨æœ«å°¾æ·»åŠ å…ƒç´ 
        elementData[size++] = e;
        return true;
    }
    
    /**
     * åœ¨æŒ‡å®šä½ç½®æ’å…¥å…ƒç´ 
     * æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œéœ€è¦ç§»åŠ¨åç»­å…ƒç´ 
     */
    public void add(int index, E element) {
        // æ£€æŸ¥ç´¢å¼•èŒƒå›´
        rangeCheckForAdd(index);
        // ç¡®ä¿å®¹é‡è¶³å¤Ÿ
        ensureCapacityInternal(size + 1);
        // ç§»åŠ¨åç»­å…ƒç´ 
        System.arraycopy(elementData, index, elementData, index + 1, size - index);
        // æ’å…¥æ–°å…ƒç´ 
        elementData[index] = element;
        size++;
    }
}
```

#### 2.3.2 æ‰©å®¹æœºåˆ¶

å½“æ•°ç»„å®¹é‡ä¸è¶³æ—¶ï¼ŒArrayListä¼šè‡ªåŠ¨æ‰©å®¹ï¼š

```java title="ArrayListæ‰©å®¹æœºåˆ¶"
public class ArrayList<E> extends AbstractList<E> {
    
    /**
     * ç¡®ä¿å†…éƒ¨å®¹é‡è¶³å¤Ÿ
     */
    private void ensureCapacityInternal(int minCapacity) {
        if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) {
            minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);
        }
        ensureExplicitCapacity(minCapacity);
    }
    
    /**
     * ç¡®ä¿æ˜¾å¼å®¹é‡è¶³å¤Ÿ
     */
    private void ensureExplicitCapacity(int minCapacity) {
        modCount++;
        if (minCapacity - elementData.length > 0) {
            grow(minCapacity);
        }
    }
    
    /**
     * æ‰©å®¹æ ¸å¿ƒæ–¹æ³•
     */
    private void grow(int minCapacity) {
        int oldCapacity = elementData.length;
        // æ–°å®¹é‡ = æ—§å®¹é‡ + æ—§å®¹é‡/2ï¼ˆ1.5å€å¢é•¿ï¼‰
        int newCapacity = oldCapacity + (oldCapacity >> 1);
        
        if (newCapacity - minCapacity < 0) {
            newCapacity = minCapacity;
        }
        
        if (newCapacity - MAX_ARRAY_SIZE > 0) {
            newCapacity = hugeCapacity(minCapacity);
        }
        
        // åˆ›å»ºæ–°æ•°ç»„å¹¶å¤åˆ¶å…ƒç´ 
        elementData = Arrays.copyOf(elementData, newCapacity);
    }
}
```

:::tip æ‰©å®¹ç­–ç•¥
- é»˜è®¤åˆå§‹å®¹é‡ï¼š10
- æ‰©å®¹å€æ•°ï¼š1.5å€ï¼ˆoldCapacity + oldCapacity >> 1ï¼‰
- æœ€å¤§å®¹é‡ï¼šInteger.MAX_VALUE - 8
- æ‰©å®¹æ“ä½œä¼šåˆ›å»ºæ–°æ•°ç»„å¹¶å¤åˆ¶å…ƒç´ ï¼Œå¼€é”€è¾ƒå¤§
:::

#### 2.3.3 åˆ é™¤å…ƒç´ 

ArrayListçš„åˆ é™¤æ“ä½œåŒ…æ‹¬æŒ‰å€¼åˆ é™¤å’ŒæŒ‰ä½ç½®åˆ é™¤ä¸¤ç§æ–¹å¼ï¼š

```java title="ArrayListåˆ é™¤å…ƒç´ å®ç°"
public class ArrayList<E> extends AbstractList<E> {
    
    /**
     * åˆ é™¤æŒ‡å®šä½ç½®çš„å…ƒç´ 
     * æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œéœ€è¦ç§»åŠ¨åç»­å…ƒç´ 
     */
    public E remove(int index) {
        rangeCheck(index);
        modCount++;
        E oldValue = elementData(index);
        
        int numMoved = size - index - 1;
        if (numMoved > 0) {
            // ç§»åŠ¨åç»­å…ƒç´ 
            System.arraycopy(elementData, index + 1, elementData, index, numMoved);
        }
        elementData[--size] = null; // æ¸…é™¤å¼•ç”¨ï¼Œå¸®åŠ©GC
        
        return oldValue;
    }
    
    /**
     * åˆ é™¤æŒ‡å®šå…ƒç´ çš„ç¬¬ä¸€ä¸ªå‡ºç°
     * æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œéœ€è¦éå†æŸ¥æ‰¾
     */
    public boolean remove(Object o) {
        if (o == null) {
            for (int index = 0; index < size; index++) {
                if (elementData[index] == null) {
                    fastRemove(index);
                    return true;
                }
            }
        } else {
            for (int index = 0; index < size; index++) {
                if (o.equals(elementData[index])) {
                    fastRemove(index);
                    return true;
                }
            }
        }
        return false;
    }
    
    /**
     * å¿«é€Ÿåˆ é™¤ï¼ˆä¸è¿›è¡Œè¾¹ç•Œæ£€æŸ¥ï¼‰
     */
    private void fastRemove(int index) {
        modCount++;
        int numMoved = size - index - 1;
        if (numMoved > 0) {
            System.arraycopy(elementData, index + 1, elementData, index, numMoved);
        }
        elementData[--size] = null; // æ¸…é™¤å¼•ç”¨ï¼Œå¸®åŠ©GC
    }
}
```

:::tip åˆ é™¤æ“ä½œæ€§èƒ½åˆ†æ
- **æŒ‰ä½ç½®åˆ é™¤**ï¼šæ—¶é—´å¤æ‚åº¦O(n)ï¼Œéœ€è¦ç§»åŠ¨åç»­å…ƒç´ 
- **æŒ‰å€¼åˆ é™¤**ï¼šæ—¶é—´å¤æ‚åº¦O(n)ï¼Œéœ€è¦éå†æŸ¥æ‰¾å…ƒç´ 
- **æ‰¹é‡åˆ é™¤**ï¼šå¯ä»¥ä½¿ç”¨removeIf()æ–¹æ³•æé«˜æ•ˆç‡
- **å†…å­˜ç®¡ç†**ï¼šåˆ é™¤åå°†å¼•ç”¨è®¾ä¸ºnullï¼Œå¸®åŠ©åƒåœ¾å›æ”¶
:::

### 2.4 ArrayList æ€§èƒ½åˆ†æ

#### 2.4.1 æ—¶é—´å¤æ‚åº¦å¯¹æ¯”

| æ“ä½œ | æ—¶é—´å¤æ‚åº¦ | è¯´æ˜ |
|------|------------|------|
| **éšæœºè®¿é—®** | O(1) | åŸºäºæ•°ç»„ç´¢å¼•ç›´æ¥è®¿é—® |
| **æœ«å°¾æ·»åŠ ** | å¹³å‡O(1) | æœ€åæƒ…å†µO(n)ï¼ˆæ‰©å®¹æ—¶ï¼‰ |
| **ä½ç½®æ’å…¥** | O(n) | éœ€è¦ç§»åŠ¨åç»­å…ƒç´  |
| **ä½ç½®åˆ é™¤** | O(n) | éœ€è¦ç§»åŠ¨åç»­å…ƒç´  |
| **æŒ‰å€¼åˆ é™¤** | O(n) | éœ€è¦éå†æŸ¥æ‰¾å…ƒç´  |
| **æŸ¥æ‰¾å…ƒç´ ** | O(n) | éœ€è¦éå†æ¯”è¾ƒ |

#### 2.4.2 ç©ºé—´å¤æ‚åº¦

- **å­˜å‚¨å¼€é”€**ï¼šæ¯ä¸ªå…ƒç´ å ç”¨ä¸€ä¸ªå¼•ç”¨ç©ºé—´
- **æ‰©å®¹å¼€é”€**ï¼šæ‰©å®¹æ—¶ä¼šåˆ›å»ºæ–°æ•°ç»„ï¼Œä¸´æ—¶å ç”¨åŒå€å†…å­˜
- **å†…å­˜ç¢ç‰‡**ï¼šåˆ é™¤å…ƒç´ åå¯èƒ½äº§ç”Ÿå†…å­˜ç¢ç‰‡

#### 2.4.3 æ€§èƒ½ä¼˜åŒ–å»ºè®®

```java title="ArrayListæ€§èƒ½ä¼˜åŒ–ç¤ºä¾‹"
public class ArrayListOptimization {
    
    public static void main(String[] args) {
        // 1. é¢„åˆ†é…å®¹é‡ï¼Œé¿å…é¢‘ç¹æ‰©å®¹
        ArrayList<String> list1 = new ArrayList<>(1000);
        
        // 2. æ‰¹é‡æ“ä½œï¼Œå‡å°‘æ–¹æ³•è°ƒç”¨å¼€é”€
        List<String> batchData = Arrays.asList("A", "B", "C", "D");
        list1.addAll(batchData);
        
        // 3. ä½¿ç”¨è¿­ä»£å™¨è¿›è¡Œåˆ é™¤æ“ä½œ
        Iterator<String> iterator = list1.iterator();
        while (iterator.hasNext()) {
            String item = iterator.next();
            if (item.equals("B")) {
                iterator.remove(); // é¿å…ConcurrentModificationException
            }
        }
        
        // 4. ä½¿ç”¨removeIfè¿›è¡Œæ¡ä»¶åˆ é™¤
        list1.removeIf(item -> item.equals("C"));
        
        // 5. ä½¿ç”¨trimToSize()é‡Šæ”¾å¤šä½™ç©ºé—´
        list1.trimToSize();
    }
}
```

### 2.5 ArrayList ä½¿ç”¨ç¤ºä¾‹

#### 2.5.1 åŸºæœ¬æ“ä½œç¤ºä¾‹

```java title="ArrayListåŸºæœ¬æ“ä½œç¤ºä¾‹"
public class ArrayListBasicExample {
    
    public static void main(String[] args) {
        // åˆ›å»ºArrayList
        List<String> list = new ArrayList<>();
        
        // æ·»åŠ å…ƒç´ 
        list.add("Java");
        list.add("Python");
        list.add("C++");
        
        // è®¿é—®å…ƒç´ 
        String first = list.get(0);
        System.out.println("ç¬¬ä¸€ä¸ªå…ƒç´ : " + first);
        
        // ä¿®æ”¹å…ƒç´ 
        list.set(1, "JavaScript");
        
        // åˆ é™¤å…ƒç´ 
        list.remove("C++");
        
        // éå†æ–¹å¼1ï¼šå¢å¼ºforå¾ªç¯
        for (String item : list) {
            System.out.println(item);
        }
        
        // éå†æ–¹å¼2ï¼šç´¢å¼•éå†
        for (int i = 0; i < list.size(); i++) {
            System.out.println("ç´¢å¼• " + i + ": " + list.get(i));
        }
        
        // éå†æ–¹å¼3ï¼šè¿­ä»£å™¨
        Iterator<String> iterator = list.iterator();
        while (iterator.hasNext()) {
            System.out.println(iterator.next());
        }
        
        // éå†æ–¹å¼4ï¼šLambdaè¡¨è¾¾å¼
        list.forEach(System.out::println);
    }
}
```

#### 2.5.2 é«˜çº§æ“ä½œç¤ºä¾‹

```java title="ArrayListé«˜çº§æ“ä½œç¤ºä¾‹"
public class ArrayListAdvancedExample {
    
    public static void main(String[] args) {
        List<String> list = new ArrayList<>();
        
        // æ‰¹é‡æ·»åŠ 
        list.addAll(Arrays.asList("A", "B", "C", "D", "E"));
        
        // æ¡ä»¶åˆ é™¤
        list.removeIf(item -> item.startsWith("A"));
        
        // æ¡ä»¶æ›¿æ¢
        list.replaceAll(String::toLowerCase);
        
        // æ’åº
        list.sort(String::compareTo);
        
        // å­åˆ—è¡¨æ“ä½œ
        List<String> subList = list.subList(1, 3);
        subList.set(0, "NEW");
        
        System.out.println("åŸåˆ—è¡¨: " + list);
        System.out.println("å­åˆ—è¡¨: " + subList);
    }
}
```

</TabItem>
<TabItem value="linkedlist" label="LinkedList å®ç°">

### 3.1 LinkedList æ¦‚è¿°

:::tip æ ¸å¿ƒç‰¹ç‚¹
LinkedListæ˜¯Listæ¥å£çš„å¦ä¸€ä¸ªé‡è¦å®ç°ç±»ï¼ŒåŸºäºåŒå‘é“¾è¡¨å®ç°ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š
- ğŸ”— **åŒå‘é“¾è¡¨**ï¼šæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰å‰åæŒ‡é’ˆï¼Œæ”¯æŒåŒå‘éå†
- âš¡ **æ’å…¥åˆ é™¤é«˜æ•ˆ**ï¼šåœ¨ä»»æ„ä½ç½®æ’å…¥åˆ é™¤å…ƒç´ æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(1)
- ğŸ¢ **éšæœºè®¿é—®æ…¢**ï¼šåŸºäºç´¢å¼•è®¿é—®éœ€è¦éå†é“¾è¡¨ï¼Œæ—¶é—´å¤æ‚åº¦O(n)
- ğŸ”„ **é˜Ÿåˆ—æ“ä½œ**ï¼šå®ç°äº†Dequeæ¥å£ï¼Œæ”¯æŒé˜Ÿåˆ—å’Œæ ˆæ“ä½œ
- ğŸ“Š **å†…å­˜åˆ†æ•£**ï¼šå…ƒç´ åœ¨å†…å­˜ä¸­åˆ†æ•£å­˜å‚¨ï¼Œç¼“å­˜ä¸å‹å¥½
:::

#### é€‚ç”¨åœºæ™¯
- é¢‘ç¹çš„æ’å…¥åˆ é™¤æ“ä½œ
- éœ€è¦å®ç°é˜Ÿåˆ—æˆ–æ ˆåŠŸèƒ½
- å…ƒç´ æ•°é‡å˜åŒ–è¾ƒå¤§çš„åœºæ™¯
- å¯¹éšæœºè®¿é—®æ€§èƒ½è¦æ±‚ä¸é«˜çš„åº”ç”¨

### 3.2 LinkedList å†…éƒ¨ç»“æ„

LinkedListåŸºäºåŒå‘é“¾è¡¨å®ç°ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½åŒ…å«å¯¹å‰ä¸€ä¸ªå’Œåä¸€ä¸ªèŠ‚ç‚¹çš„å¼•ç”¨ï¼Œæ”¯æŒåŒå‘éå†ã€‚

#### æ ¸å¿ƒå­—æ®µ

```java title="LinkedListæ ¸å¿ƒå­—æ®µ"
public class LinkedList<E> extends AbstractSequentialList<E>
        implements List<E>, Deque<E>, Cloneable, java.io.Serializable {
    
    // åŒå‘é“¾è¡¨èŠ‚ç‚¹
    private static class Node<E> {
        E item;           // å­˜å‚¨çš„å…ƒç´ 
        Node<E> next;     // ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
        Node<E> prev;     // ä¸Šä¸€ä¸ªèŠ‚ç‚¹
        
        Node(Node<E> prev, E element, Node<E> next) {
            this.item = element;
            this.next = next;
            this.prev = prev;
        }
    }
    
    // å¤´èŠ‚ç‚¹ï¼ˆç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰
    transient Node<E> first;
    
    // å°¾èŠ‚ç‚¹ï¼ˆæœ€åä¸€ä¸ªå…ƒç´ ï¼‰
    transient Node<E> last;
    
    // é“¾è¡¨ä¸­çš„å…ƒç´ ä¸ªæ•°
    transient int size = 0;
}
```

#### æ„é€ æ–¹æ³•

```java title="LinkedListæ„é€ æ–¹æ³•"
public class LinkedList<E> extends AbstractSequentialList<E> {
    
    /**
     * æ„é€ ä¸€ä¸ªç©ºçš„åŒå‘é“¾è¡¨
     */
    public LinkedList() {}
    
    /**
     * æ„é€ ä¸€ä¸ªåŒ…å«æŒ‡å®šé›†åˆå…ƒç´ çš„é“¾è¡¨
     */
    public LinkedList(Collection<? extends E> c) {
        this();
        addAll(c);
    }
}
```

#### å†…å­˜å¸ƒå±€ç¤ºæ„å›¾

```
LinkedList å®ä¾‹
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ first: Node<E>                          â”‚
â”‚ last: Node<E>                           â”‚
â”‚ size: 3                                 â”‚
â”‚ modCount: 1                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚
         â–¼                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Node 1  â”‚â—„â”€â”€â–ºâ”‚ Node 2  â”‚â—„â”€â”€â–ºâ”‚ Node 3  â”‚
    â”‚ item: A â”‚    â”‚ item: B â”‚    â”‚ item: C â”‚
    â”‚ prev:   â”‚    â”‚ prev: 1 â”‚    â”‚ prev: 2 â”‚
    â”‚ next: 2 â”‚    â”‚ next: 3 â”‚    â”‚ next:   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 LinkedList æ ¸å¿ƒæ–¹æ³•å®ç°

#### 3.3.1 æ·»åŠ å…ƒç´ 

```java title="LinkedListæ·»åŠ å…ƒç´ å®ç°"
public class LinkedList<E> extends AbstractSequentialList<E> {
    
    /**
     * åœ¨é“¾è¡¨å¤´éƒ¨æ·»åŠ å…ƒç´ 
     * æ—¶é—´å¤æ‚åº¦ï¼šO(1)
     */
    private void linkFirst(E e) {
        final Node<E> f = first;
        final Node<E> newNode = new Node<>(null, e, f);
        first = newNode;
        if (f == null) {
            last = newNode;  // å¦‚æœé“¾è¡¨ä¸ºç©º
        } else {
            f.prev = newNode;  // è®¾ç½®åŸå¤´èŠ‚ç‚¹çš„å‰é©±
        }
        size++;
        modCount++;
    }
    
    /**
     * åœ¨é“¾è¡¨å°¾éƒ¨æ·»åŠ å…ƒç´ 
     * æ—¶é—´å¤æ‚åº¦ï¼šO(1)
     */
    void linkLast(E e) {
        final Node<E> l = last;
        final Node<E> newNode = new Node<>(l, e, null);
        last = newNode;
        if (l == null) {
            first = newNode;  // å¦‚æœé“¾è¡¨ä¸ºç©º
        } else {
            l.next = newNode;  // è®¾ç½®åŸå°¾èŠ‚ç‚¹çš„åç»§
        }
        size++;
        modCount++;
    }
    
    /**
     * åœ¨æŒ‡å®šèŠ‚ç‚¹å‰æ’å…¥æ–°å…ƒç´ 
     * æ—¶é—´å¤æ‚åº¦ï¼šO(1)
     */
    void linkBefore(E e, Node<E> succ) {
        final Node<E> pred = succ.prev;
        final Node<E> newNode = new Node<>(pred, e, succ);
        succ.prev = newNode;
        if (pred == null) {
            first = newNode;  // å¦‚æœå‰é©±ä¸ºç©ºï¼Œæ–°èŠ‚ç‚¹æˆä¸ºå¤´èŠ‚ç‚¹
        } else {
            pred.next = newNode;  // è®¾ç½®å‰é©±èŠ‚ç‚¹çš„åç»§
        }
        size++;
        modCount++;
    }
}
```

#### 3.3.2 åˆ é™¤å…ƒç´ 

```java title="LinkedListåˆ é™¤å…ƒç´ å®ç°"
public class LinkedList<E> extends AbstractSequentialList<E> {
    
    /**
     * åˆ é™¤å¤´èŠ‚ç‚¹
     * æ—¶é—´å¤æ‚åº¦ï¼šO(1)
     */
    private E unlinkFirst(Node<E> f) {
        final E element = f.item;
        final Node<E> next = f.next;
        f.item = null;
        f.next = null; // å¸®åŠ©GC
        first = next;
        if (next == null) {
            last = null;  // å¦‚æœé“¾è¡¨å˜ä¸ºç©º
        } else {
            next.prev = null;  // æ–°å¤´èŠ‚ç‚¹çš„å‰é©±è®¾ä¸ºnull
        }
        size--;
        modCount++;
        return element;
    }
    
    /**
     * åˆ é™¤å°¾èŠ‚ç‚¹
     * æ—¶é—´å¤æ‚åº¦ï¼šO(1)
     */
    private E unlinkLast(Node<E> l) {
        final E element = l.item;
        final Node<E> prev = l.prev;
        l.item = null;
        l.prev = null; // å¸®åŠ©GC
        last = prev;
        if (prev == null) {
            first = null;  // å¦‚æœé“¾è¡¨å˜ä¸ºç©º
        } else {
            prev.next = null;  // æ–°å°¾èŠ‚ç‚¹çš„åç»§è®¾ä¸ºnull
        }
        size--;
        modCount++;
        return element;
    }
    
    /**
     * åˆ é™¤æŒ‡å®šèŠ‚ç‚¹
     * æ—¶é—´å¤æ‚åº¦ï¼šO(1)
     */
    E unlink(Node<E> x) {
        final E element = x.item;
        final Node<E> next = x.next;
        final Node<E> prev = x.prev;
        
        if (prev == null) {
            first = next;  // å¦‚æœå‰é©±ä¸ºç©ºï¼Œåç»§æˆä¸ºå¤´èŠ‚ç‚¹
        } else {
            prev.next = next;  // å‰é©±çš„åç»§æŒ‡å‘åç»§
            x.prev = null;     // å¸®åŠ©GC
        }
        
        if (next == null) {
            last = prev;  // å¦‚æœåç»§ä¸ºç©ºï¼Œå‰é©±æˆä¸ºå°¾èŠ‚ç‚¹
        } else {
            next.prev = prev;  // åç»§çš„å‰é©±æŒ‡å‘å‰é©±
            x.next = null;     // å¸®åŠ©GC
        }
        
        x.item = null;  // å¸®åŠ©GC
        size--;
        modCount++;
        return element;
    }
}
```

#### 3.3.3 æŸ¥æ‰¾å…ƒç´ 

```java title="LinkedListæŸ¥æ‰¾å…ƒç´ å®ç°"
public class LinkedList<E> extends AbstractSequentialList<E> {
    
    /**
     * æ ¹æ®ç´¢å¼•æŸ¥æ‰¾èŠ‚ç‚¹
     * æ—¶é—´å¤æ‚åº¦ï¼šO(n)
     */
    Node<E> node(int index) {
        // å¦‚æœç´¢å¼•åœ¨å‰åŠéƒ¨åˆ†ï¼Œä»å¤´å¼€å§‹æŸ¥æ‰¾
        if (index < (size >> 1)) {
            Node<E> x = first;
            for (int i = 0; i < index; i++) {
                x = x.next;
            }
            return x;
        } else {
            // å¦‚æœç´¢å¼•åœ¨ååŠéƒ¨åˆ†ï¼Œä»å°¾å¼€å§‹æŸ¥æ‰¾
            Node<E> x = last;
            for (int i = size - 1; i > index; i--) {
                x = x.prev;
            }
            return x;
        }
    }
    
    /**
     * è·å–æŒ‡å®šä½ç½®çš„å…ƒç´ 
     * æ—¶é—´å¤æ‚åº¦ï¼šO(n)
     */
    public E get(int index) {
        checkElementIndex(index);
        return node(index).item;
    }
    
    /**
     * è®¾ç½®æŒ‡å®šä½ç½®çš„å…ƒç´ 
     * æ—¶é—´å¤æ‚åº¦ï¼šO(n)
     */
    public E set(int index, E element) {
        checkElementIndex(index);
        Node<E> x = node(index);
        E oldVal = x.item;
        x.item = element;
        return oldVal;
    }
}
```

### 3.4 LinkedList æ€§èƒ½åˆ†æ

#### 3.4.1 æ—¶é—´å¤æ‚åº¦å¯¹æ¯”

| æ“ä½œ | æ—¶é—´å¤æ‚åº¦ | è¯´æ˜ |
|------|------------|------|
| **å¤´éƒ¨æ’å…¥** | O(1) | ç›´æ¥ä¿®æ”¹å¤´èŠ‚ç‚¹å¼•ç”¨ |
| **å°¾éƒ¨æ’å…¥** | O(1) | ç›´æ¥ä¿®æ”¹å°¾èŠ‚ç‚¹å¼•ç”¨ |
| **ä¸­é—´æ’å…¥** | O(n) | éœ€è¦éå†åˆ°æŒ‡å®šä½ç½® |
| **å¤´éƒ¨åˆ é™¤** | O(1) | ç›´æ¥ä¿®æ”¹å¤´èŠ‚ç‚¹å¼•ç”¨ |
| **å°¾éƒ¨åˆ é™¤** | O(1) | ç›´æ¥ä¿®æ”¹å°¾èŠ‚ç‚¹å¼•ç”¨ |
| **ä¸­é—´åˆ é™¤** | O(n) | éœ€è¦éå†åˆ°æŒ‡å®šä½ç½® |
| **éšæœºè®¿é—®** | O(n) | éœ€è¦éå†é“¾è¡¨ |
| **æŸ¥æ‰¾å…ƒç´ ** | O(n) | éœ€è¦éå†æ¯”è¾ƒ |

#### 3.4.2 ç©ºé—´å¤æ‚åº¦

- **èŠ‚ç‚¹å¼€é”€**ï¼šæ¯ä¸ªå…ƒç´ éœ€è¦é¢å¤–çš„èŠ‚ç‚¹å¯¹è±¡ï¼ˆåŒ…å«itemã€nextã€prevå¼•ç”¨ï¼‰
- **å†…å­˜åˆ†æ•£**ï¼šå…ƒç´ åœ¨å†…å­˜ä¸­åˆ†æ•£å­˜å‚¨ï¼Œç¼“å­˜ä¸å‹å¥½
- **å¼•ç”¨å¼€é”€**ï¼šæ¯ä¸ªèŠ‚ç‚¹æœ‰ä¸¤ä¸ªå¼•ç”¨ï¼ˆnextã€prevï¼‰

### 3.5 LinkedList ä½¿ç”¨ç¤ºä¾‹

#### 3.5.1 åŸºæœ¬æ“ä½œç¤ºä¾‹

```java title="LinkedListåŸºæœ¬æ“ä½œç¤ºä¾‹"
public class LinkedListBasicExample {
    
    public static void main(String[] args) {
        // åˆ›å»ºLinkedList
        LinkedList<String> list = new LinkedList<>();
        
        // æ·»åŠ å…ƒç´ 
        list.add("Java");
        list.addFirst("Python");    // æ·»åŠ åˆ°å¤´éƒ¨
        list.addLast("C++");        // æ·»åŠ åˆ°å°¾éƒ¨
        
        // è·å–å…ƒç´ 
        String first = list.getFirst();
        String last = list.getLast();
        
        // åˆ é™¤å…ƒç´ 
        list.removeFirst();         // åˆ é™¤å¤´éƒ¨å…ƒç´ 
        list.removeLast();          // åˆ é™¤å°¾éƒ¨å…ƒç´ 
        
        // éå†
        for (String item : list) {
            System.out.println(item);
        }
    }
}
```

#### 3.5.2 é˜Ÿåˆ—å’Œæ ˆæ“ä½œç¤ºä¾‹

```java title="LinkedListé˜Ÿåˆ—æ ˆæ“ä½œç¤ºä¾‹"
public class LinkedListQueueStackExample {
    
    public static void main(String[] args) {
        LinkedList<String> list = new LinkedList<>();
        
        // ä½œä¸ºé˜Ÿåˆ—ä½¿ç”¨
        list.offer("ä»»åŠ¡1");   // å…¥é˜Ÿ
        list.offer("ä»»åŠ¡2");
        list.offer("ä»»åŠ¡3");
        
        while (!list.isEmpty()) {
            String task = list.poll(); // å‡ºé˜Ÿ
            System.out.println("å¤„ç†ä»»åŠ¡: " + task);
        }
        
        // ä½œä¸ºæ ˆä½¿ç”¨
        list.push("æ“ä½œ1");           // å‹æ ˆ
        list.push("æ“ä½œ2");
        list.push("æ“ä½œ3");
        
        while (!list.isEmpty()) {
            String operation = list.pop(); // å¼¹æ ˆ
            System.out.println("æ‰§è¡Œæ“ä½œ: " + operation);
        }
    }
}
```

#### 3.5.3 åŒå‘éå†ç¤ºä¾‹

```java title="LinkedListåŒå‘éå†ç¤ºä¾‹"
public class LinkedListBidirectionalExample {
    
    public static void main(String[] args) {
        LinkedList<String> list = new LinkedList<>();
        list.addAll(Arrays.asList("A", "B", "C", "D", "E"));
        
        // æ­£å‘éå†
        System.out.println("æ­£å‘éå†:");
        for (String item : list) {
            System.out.print(item + " ");
        }
        
        // åå‘éå†
        System.out.println("\nåå‘éå†:");
        Iterator<String> descendingIterator = list.descendingIterator();
        while (descendingIterator.hasNext()) {
            System.out.print(descendingIterator.next() + " ");
        }
        
        // ä½¿ç”¨ListIteratoråŒå‘éå†
        System.out.println("\nListIteratoréå†:");
        ListIterator<String> listIterator = list.listIterator();
        while (listIterator.hasNext()) {
            System.out.print(listIterator.next() + " ");
        }
        
        System.out.println();
        while (listIterator.hasPrevious()) {
            System.out.print(listIterator.previous() + " ");
        }
    }
}
```

</TabItem>
<TabItem value="vector" label="Vector/Stack å®ç°">

### 4.1 Vector æ¦‚è¿°

:::tip æ ¸å¿ƒç‰¹ç‚¹
Vectoræ˜¯æœ€æ—©çš„Listå®ç°ï¼Œç±»ä¼¼ArrayListä½†çº¿ç¨‹å®‰å…¨ï¼Œè€ŒStackç»§æ‰¿è‡ªVectorå¹¶å®ç°LIFOæ ˆåŠŸèƒ½ï¼š
- ğŸ”’ **çº¿ç¨‹å®‰å…¨**ï¼šæ‰€æœ‰æ–¹æ³•éƒ½ä½¿ç”¨synchronizedåŒæ­¥
- ğŸš§ **æ€§èƒ½è¾ƒä½**ï¼šåŒæ­¥æœºåˆ¶å¯¼è‡´æ€§èƒ½å¼€é”€å¤§
- ğŸ“ˆ **åŠ¨æ€æ‰©å®¹**ï¼šé»˜è®¤æ‰©å®¹ä¸ºåŸæ¥çš„ä¸¤å€
- ğŸ“š **æ ˆç»“æ„**ï¼šStackç±»æä¾›push/popç­‰æ ˆæ“ä½œ
- âš ï¸ **è¿‡æ—¶è®¾è®¡**ï¼šç°ä»£åº”ç”¨ä¸­ä¸€èˆ¬ä¸æ¨èä½¿ç”¨
:::

#### Vectorä¸ArrayListå¯¹æ¯”

| ç‰¹æ€§ | Vector | ArrayList |
|------|--------|-----------|
| **çº¿ç¨‹å®‰å…¨** | æ˜¯ | å¦ |
| **æ€§èƒ½** | è¾ƒä½ | è¾ƒé«˜ |
| **æ‰©å®¹æœºåˆ¶** | é»˜è®¤2å€ | é»˜è®¤1.5å€ |
| **é€‚ç”¨åœºæ™¯** | å¤šçº¿ç¨‹ç¯å¢ƒï¼ˆä¸æ¨èï¼‰ | å•çº¿ç¨‹ç¯å¢ƒ |

#### Stackä½¿ç”¨ç¤ºä¾‹

```java title="Stackä½¿ç”¨ç¤ºä¾‹"
public class StackExample {
    public static void main(String[] args) {
        Stack<String> stack = new Stack<>();
        
        // å‹æ ˆæ“ä½œ
        stack.push("ç¬¬ä¸€ä¸ªå…ƒç´ ");
        stack.push("ç¬¬äºŒä¸ªå…ƒç´ ");
        stack.push("ç¬¬ä¸‰ä¸ªå…ƒç´ ");
        
        // æŸ¥çœ‹æ ˆé¡¶ä½†ä¸ç§»é™¤
        System.out.println("æ ˆé¡¶å…ƒç´ : " + stack.peek());
        
        // å‡ºæ ˆæ“ä½œ
        System.out.println("å¼¹å‡ºå…ƒç´ : " + stack.pop());
        System.out.println("å¼¹å‡ºåæ ˆé¡¶: " + stack.peek());
        
        // åˆ¤æ–­æ˜¯å¦ä¸ºç©º
        System.out.println("æ ˆæ˜¯å¦ä¸ºç©º: " + stack.isEmpty());
        
        // æŸ¥æ‰¾å…ƒç´ ä½ç½®
        System.out.println("ç¬¬ä¸€ä¸ªå…ƒç´ ä½ç½®: " + stack.search("ç¬¬ä¸€ä¸ªå…ƒç´ "));
    }
}
```

:::caution ç°ä»£æ›¿ä»£æ–¹æ¡ˆ
- ä½¿ç”¨ `Collections.synchronizedList(new ArrayList<>())` ä»£æ›¿ Vector
- ä½¿ç”¨ `ArrayDeque` æˆ– `LinkedList` ä»£æ›¿ Stack
- éœ€è¦å¹¶å‘å®‰å…¨æ—¶ï¼Œä½¿ç”¨ `CopyOnWriteArrayList` æˆ– `ConcurrentLinkedDeque`
:::

</TabItem>
</Tabs>

## 4. å®é™…åº”ç”¨åœºæ™¯

### 4.1 æ•°æ®å¤„ç†å’Œåˆ†æ

```java title="æ•°æ®å¤„ç†åœºæ™¯ç¤ºä¾‹"
public class DataProcessingExample {
    
    /**
     * ç”¨æˆ·è¡Œä¸ºæ•°æ®åˆ†æ
     */
    public static void userBehaviorAnalysis() {
        List<UserAction> actions = new ArrayList<>();
        
        // æ”¶é›†ç”¨æˆ·è¡Œä¸ºæ•°æ®
        actions.add(new UserAction("ç”¨æˆ·A", "ç‚¹å‡»", "2024-01-01 10:00:00"));
        actions.add(new UserAction("ç”¨æˆ·B", "è´­ä¹°", "2024-01-01 10:05:00"));
        actions.add(new UserAction("ç”¨æˆ·A", "æµè§ˆ", "2024-01-01 10:10:00"));
        
        // æŒ‰ç”¨æˆ·åˆ†ç»„ç»Ÿè®¡
        Map<String, List<UserAction>> userActions = actions.stream()
            .collect(Collectors.groupingBy(UserAction::getUserId));
        
        // åˆ†æç”¨æˆ·è¡Œä¸ºæ¨¡å¼
        userActions.forEach((userId, userActionsList) -> {
            System.out.println("ç”¨æˆ· " + userId + " çš„è¡Œä¸º:");
            userActionsList.forEach(action -> 
                System.out.println("  - " + action.getAction() + " at " + action.getTimestamp())
            );
        });
    }
    
    /**
     * æ—¥å¿—æ•°æ®è¿‡æ»¤å’Œæ’åº
     */
    public static void logDataProcessing() {
        List<LogEntry> logs = new ArrayList<>();
        
        // æ¨¡æ‹Ÿæ—¥å¿—æ•°æ®
        logs.add(new LogEntry("ERROR", "æ•°æ®åº“è¿æ¥å¤±è´¥", "2024-01-01 10:00:00"));
        logs.add(new LogEntry("INFO", "ç”¨æˆ·ç™»å½•æˆåŠŸ", "2024-01-01 10:01:00"));
        logs.add(new LogEntry("WARN", "å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜", "2024-01-01 10:02:00"));
        
        // æŒ‰çº§åˆ«è¿‡æ»¤å¹¶æ’åº
        List<LogEntry> errorLogs = logs.stream()
            .filter(log -> "ERROR".equals(log.getLevel()))
            .sorted(Comparator.comparing(LogEntry::getTimestamp))
            .collect(Collectors.toList());
        
        System.out.println("é”™è¯¯æ—¥å¿—:");
        errorLogs.forEach(log -> 
            System.out.println(log.getTimestamp() + " - " + log.getMessage())
        );
    }
}

// è¾…åŠ©ç±»
class UserAction {
    private String userId;
    private String action;
    private String timestamp;
    
    // æ„é€ å‡½æ•°ã€getterã€setterçœç•¥
    public UserAction(String userId, String action, String timestamp) {
        this.userId = userId;
        this.action = action;
        this.timestamp = timestamp;
    }
    
    public String getUserId() { return userId; }
    public String getAction() { return action; }
    public String getTimestamp() { return timestamp; }
}

class LogEntry {
    private String level;
    private String message;
    private String timestamp;
    
    // æ„é€ å‡½æ•°ã€getterã€setterçœç•¥
    public LogEntry(String level, String message, String timestamp) {
        this.level = level;
        this.message = message;
        this.timestamp = timestamp;
    }
    
    public String getLevel() { return level; }
    public String getMessage() { return message; }
    public String getTimestamp() { return timestamp; }
}
```

### 4.2 ç¼“å­˜å’Œé…ç½®ç®¡ç†

```java title="ç¼“å­˜é…ç½®ç®¡ç†ç¤ºä¾‹"
public class CacheConfigExample {
    
    /**
     * é…ç½®é¡¹ç¼“å­˜ç®¡ç†
     */
    public static void configCacheManagement() {
        List<ConfigItem> configCache = new ArrayList<>();
        
        // æ·»åŠ é…ç½®é¡¹
        configCache.add(new ConfigItem("db.url", "jdbc:mysql://localhost:3306/test"));
        configCache.add(new ConfigItem("db.username", "admin"));
        configCache.add(new ConfigItem("cache.ttl", "3600"));
        
        // é…ç½®é¡¹æŸ¥æ‰¾å’Œæ›´æ–°
        String dbUrl = findConfig(configCache, "db.url");
        System.out.println("æ•°æ®åº“URL: " + dbUrl);
        
        // æ‰¹é‡æ›´æ–°é…ç½®
        List<ConfigItem> updates = Arrays.asList(
            new ConfigItem("db.url", "jdbc:mysql://localhost:3306/prod"),
            new ConfigItem("cache.ttl", "7200")
        );
        
        updateConfigs(configCache, updates);
        
        // é…ç½®éªŒè¯
        validateConfigs(configCache);
    }
    
    private static String findConfig(List<ConfigItem> cache, String key) {
        return cache.stream()
            .filter(item -> key.equals(item.getKey()))
            .findFirst()
            .map(ConfigItem::getValue)
            .orElse(null);
    }
    
    private static void updateConfigs(List<ConfigItem> cache, List<ConfigItem> updates) {
        updates.forEach(update -> {
            cache.removeIf(item -> update.getKey().equals(item.getKey()));
            cache.add(update);
        });
    }
    
    private static void validateConfigs(List<ConfigItem> cache) {
        List<String> requiredKeys = Arrays.asList("db.url", "db.username", "cache.ttl");
        List<String> missingKeys = requiredKeys.stream()
            .filter(key -> findConfig(cache, key) == null)
            .collect(Collectors.toList());
        
        if (!missingKeys.isEmpty()) {
            System.out.println("ç¼ºå°‘å¿…éœ€é…ç½®: " + missingKeys);
        }
    }
}

class ConfigItem {
    private String key;
    private String value;
    
    public ConfigItem(String key, String value) {
        this.key = key;
        this.value = value;
    }
    
    public String getKey() { return key; }
    public String getValue() { return value; }
}
```

## 5. æœ€ä½³å®è·µæ€»ç»“

### 5.1 Listå®ç°ç±»é€‰æ‹©ç­–ç•¥

:::tip é€‰æ‹©å»ºè®®
é€‰æ‹©åˆé€‚çš„Listå®ç°ç±»éœ€è¦è€ƒè™‘ä»¥ä¸‹å› ç´ ï¼š
- **è®¿é—®æ¨¡å¼**ï¼šé¢‘ç¹éšæœºè®¿é—®é€‰æ‹©ArrayListï¼Œé¢‘ç¹æ’å…¥åˆ é™¤é€‰æ‹©LinkedList
- **å†…å­˜è¦æ±‚**ï¼šå†…å­˜æ•æ„Ÿé€‰æ‹©ArrayListï¼Œå†…å­˜å……è¶³å¯é€‰æ‹©LinkedList
- **çº¿ç¨‹å®‰å…¨**ï¼šå•çº¿ç¨‹ç¯å¢ƒé€‰æ‹©ArrayList/LinkedListï¼Œå¤šçº¿ç¨‹ç¯å¢ƒé€‰æ‹©CopyOnWriteArrayList
- **æ€§èƒ½è¦æ±‚**ï¼šå¯¹æ€§èƒ½è¦æ±‚æé«˜æ—¶ï¼Œéœ€è¦æ ¹æ®å…·ä½“åœºæ™¯è¿›è¡Œæ€§èƒ½æµ‹è¯•
:::

| å®ç°ç±» | é€‚ç”¨åœºæ™¯ | ä¼˜åŠ¿ | åŠ£åŠ¿ |
|--------|----------|------|------|
| **ArrayList** | é¢‘ç¹éšæœºè®¿é—®ã€æ•°æ®é‡ç›¸å¯¹å›ºå®š | éšæœºè®¿é—®å¿«ã€å†…å­˜è¿ç»­ã€ç¼“å­˜å‹å¥½ | æ’å…¥åˆ é™¤æ…¢ã€æ‰©å®¹å¼€é”€ |
| **LinkedList** | é¢‘ç¹æ’å…¥åˆ é™¤ã€é˜Ÿåˆ—æ ˆæ“ä½œ | æ’å…¥åˆ é™¤å¿«ã€åŒå‘éå† | éšæœºè®¿é—®æ…¢ã€å†…å­˜åˆ†æ•£ |
| **Vector** | éœ€è¦çº¿ç¨‹å®‰å…¨ï¼ˆä¸æ¨èï¼‰ | çº¿ç¨‹å®‰å…¨ | æ€§èƒ½å·®ã€å·²è¢«æ›¿ä»£ |
| **CopyOnWriteArrayList** | è¯»å¤šå†™å°‘ã€çº¿ç¨‹å®‰å…¨ | çº¿ç¨‹å®‰å…¨ã€è¯»æ€§èƒ½å¥½ | å†™æ€§èƒ½å·®ã€å†…å­˜å¼€é”€å¤§ |

### 5.2 æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

```java title="æ€§èƒ½ä¼˜åŒ–ç¤ºä¾‹"
public class ListPerformanceOptimization {
    
    /**
     * é¢„åˆ†é…å®¹é‡ä¼˜åŒ–
     */
    public static void capacityOptimization() {
        // çŸ¥é“å¤§æ¦‚å…ƒç´ æ•°é‡æ—¶ï¼Œé¢„åˆ†é…å®¹é‡
        int expectedSize = 10000;
        List<String> optimizedList = new ArrayList<>(expectedSize);
        
        // é¿å…é¢‘ç¹æ‰©å®¹
        for (int i = 0; i < expectedSize; i++) {
            optimizedList.add("item" + i);
        }
    }
    
    /**
     * æ‰¹é‡æ“ä½œä¼˜åŒ–
     */
    public static void batchOperationOptimization() {
        List<String> list = new ArrayList<>();
        List<String> items = Arrays.asList("a", "b", "c", "d", "e");
        
        // æ‰¹é‡æ·»åŠ ï¼Œæ¯”å¾ªç¯addæ•ˆç‡é«˜
        list.addAll(items);
        
        // æ‰¹é‡åˆ é™¤
        list.removeAll(Arrays.asList("a", "b"));
        
        // æ‰¹é‡æ›¿æ¢
        Collections.replaceAll(list, "c", "C");
    }
    
    /**
     * è¿­ä»£å™¨ä¼˜åŒ–
     */
    public static void iteratorOptimization() {
        List<String> list = new ArrayList<>(Arrays.asList("a", "b", "c", "d"));
        
        // ä½¿ç”¨è¿­ä»£å™¨è¿›è¡Œå®‰å…¨çš„åˆ é™¤æ“ä½œ
        Iterator<String> iterator = list.iterator();
        while (iterator.hasNext()) {
            String item = iterator.next();
            if ("b".equals(item)) {
                iterator.remove(); // å®‰å…¨åˆ é™¤
            }
        }
        
        // ä½¿ç”¨ListIteratorè¿›è¡ŒåŒå‘éå†å’Œä¿®æ”¹
        ListIterator<String> listIterator = list.listIterator();
        while (listIterator.hasNext()) {
            String item = listIterator.next();
            if ("c".equals(item)) {
                listIterator.set("C"); // å®‰å…¨ä¿®æ”¹
            }
        }
    }
}
```

### 5.3 å¸¸è§é™·é˜±å’Œè§£å†³æ–¹æ¡ˆ

:::caution æ³¨æ„äº‹é¡¹
1. **ConcurrentModificationException**ï¼šåœ¨éå†è¿‡ç¨‹ä¸­ä¿®æ”¹é›†åˆä¼šæŠ›å‡ºæ­¤å¼‚å¸¸
2. **Arrays.asList()çš„ä¸å¯å˜æ€§**ï¼šè¿”å›çš„Listä¸æ”¯æŒadd/removeæ“ä½œ
3. **subListçš„è§†å›¾ç‰¹æ€§**ï¼šå¯¹å­åˆ—è¡¨çš„ä¿®æ”¹ä¼šå½±å“åŸåˆ—è¡¨
4. **nullå€¼å¤„ç†**ï¼šæŸäº›æ“ä½œä¸æ”¯æŒnullå€¼ï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„
:::

```java title="å¸¸è§é™·é˜±ç¤ºä¾‹"
public class ListCommonTraps {
    
    /**
     * ConcurrentModificationExceptionç¤ºä¾‹
     */
    public static void concurrentModificationExample() {
        List<String> list = new ArrayList<>(Arrays.asList("a", "b", "c"));
        
        // é”™è¯¯ï¼šåœ¨éå†è¿‡ç¨‹ä¸­åˆ é™¤å…ƒç´ 
        try {
            for (String item : list) {
                if ("b".equals(item)) {
                    list.remove(item); // æŠ›å‡ºConcurrentModificationException
                }
            }
        } catch (Exception e) {
            System.out.println("å¼‚å¸¸: " + e.getMessage());
        }
        
        // æ­£ç¡®ï¼šä½¿ç”¨è¿­ä»£å™¨åˆ é™¤
        Iterator<String> iterator = list.iterator();
        while (iterator.hasNext()) {
            String item = iterator.next();
            if ("b".equals(item)) {
                iterator.remove(); // å®‰å…¨åˆ é™¤
            }
        }
    }
    
    /**
     * Arrays.asList()é™·é˜±
     */
    public static void arraysAsListTrap() {
        List<String> list = Arrays.asList("a", "b", "c");
        
        // é”™è¯¯ï¼šä¸æ”¯æŒaddæ“ä½œ
        try {
            list.add("d"); // æŠ›å‡ºUnsupportedOperationException
        } catch (Exception e) {
            System.out.println("å¼‚å¸¸: " + e.getMessage());
        }
        
        // æ­£ç¡®ï¼šåˆ›å»ºæ–°çš„ArrayList
        List<String> mutableList = new ArrayList<>(Arrays.asList("a", "b", "c"));
        mutableList.add("d"); // æ­£å¸¸æ·»åŠ 
    }
    
    /**
     * subListé™·é˜±
     */
    public static void subListTrap() {
        List<String> original = new ArrayList<>(Arrays.asList("a", "b", "c", "d", "e"));
        List<String> subList = original.subList(1, 4); // [b, c, d]
        
        System.out.println("åŸåˆ—è¡¨: " + original);
        System.out.println("å­åˆ—è¡¨: " + subList);
        
        // ä¿®æ”¹å­åˆ—è¡¨ä¼šå½±å“åŸåˆ—è¡¨
        subList.set(0, "B");
        System.out.println("ä¿®æ”¹ååŸåˆ—è¡¨: " + original);
        System.out.println("ä¿®æ”¹åå­åˆ—è¡¨: " + subList);
    }
}
```

### 5.4 æµ‹è¯•å’Œè°ƒè¯•å»ºè®®

```java title="æµ‹è¯•è°ƒè¯•ç¤ºä¾‹"
public class ListTestingDebugging {
    
    /**
     * å•å…ƒæµ‹è¯•ç¤ºä¾‹
     */
    public static void unitTestExample() {
        List<String> list = new ArrayList<>();
        
        // æµ‹è¯•æ·»åŠ æ“ä½œ
        assert list.isEmpty();
        list.add("test");
        assert list.size() == 1;
        assert "test".equals(list.get(0));
        
        // æµ‹è¯•åˆ é™¤æ“ä½œ
        list.remove("test");
        assert list.isEmpty();
        
        System.out.println("æ‰€æœ‰æµ‹è¯•é€šè¿‡");
    }
    
    /**
     * æ€§èƒ½æµ‹è¯•ç¤ºä¾‹
     */
    public static void performanceTestExample() {
        int size = 100000;
        
        // ArrayListæ€§èƒ½æµ‹è¯•
        long start = System.currentTimeMillis();
        List<Integer> arrayList = new ArrayList<>();
        for (int i = 0; i < size; i++) {
            arrayList.add(i);
        }
        long arrayListTime = System.currentTimeMillis() - start;
        
        // LinkedListæ€§èƒ½æµ‹è¯•
        start = System.currentTimeMillis();
        List<Integer> linkedList = new LinkedList<>();
        for (int i = 0; i < size; i++) {
            linkedList.add(i);
        }
        long linkedListTime = System.currentTimeMillis() - start;
        
        System.out.println("ArrayListæ·»åŠ " + size + "ä¸ªå…ƒç´ è€—æ—¶: " + arrayListTime + "ms");
        System.out.println("LinkedListæ·»åŠ " + size + "ä¸ªå…ƒç´ è€—æ—¶: " + linkedListTime + "ms");
    }
}
```

## 6. æ€»ç»“

Listæ¥å£ä½œä¸ºJavaé›†åˆæ¡†æ¶çš„æ ¸å¿ƒï¼Œæä¾›äº†æœ‰åºã€å¯é‡å¤ã€å¯ç´¢å¼•çš„é›†åˆæ“ä½œèƒ½åŠ›ã€‚é€šè¿‡æ·±å…¥ç†è§£ArrayListå’ŒLinkedListçš„å®ç°åŸç†ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å…·ä½“çš„ä½¿ç”¨åœºæ™¯é€‰æ‹©æœ€åˆé€‚çš„å®ç°ç±»ï¼Œå¹¶é€šè¿‡æœ€ä½³å®è·µæ¥ä¼˜åŒ–æ€§èƒ½ã€é¿å…å¸¸è§é™·é˜±ã€‚

åœ¨å®é™…å¼€å‘ä¸­ï¼Œéœ€è¦ç»¼åˆè€ƒè™‘ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š
- **æ€§èƒ½è¦æ±‚**ï¼šæ ¹æ®è®¿é—®æ¨¡å¼é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„
- **å†…å­˜çº¦æŸ**ï¼šè€ƒè™‘å†…å­˜ä½¿ç”¨å’Œç¼“å­˜æ•ˆç‡
- **çº¿ç¨‹å®‰å…¨**ï¼šåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹é€‰æ‹©åˆé€‚çš„å®ç°
- **ä»£ç å¯ç»´æŠ¤æ€§**ï¼šéµå¾ªæœ€ä½³å®è·µï¼Œç¼–å†™æ¸…æ™°ã€é«˜æ•ˆçš„ä»£ç 

é€šè¿‡åˆç†ä½¿ç”¨Listé›†åˆï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºå‡ºé«˜æ•ˆã€å¯é çš„Javaåº”ç”¨ç¨‹åºã€‚

## 7. é¢è¯•é¢˜ç²¾é€‰

### 7.1 åŸºç¡€æ¦‚å¿µé¢˜

**Q: ArrayListå’ŒLinkedListçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ**

A: ä¸»è¦åŒºåˆ«åŒ…æ‹¬ï¼š
- **åº•å±‚å®ç°**ï¼šArrayListåŸºäºåŠ¨æ€æ•°ç»„ï¼ŒLinkedListåŸºäºåŒå‘é“¾è¡¨
- **éšæœºè®¿é—®**ï¼šArrayList O(1)ï¼ŒLinkedList O(n)
- **æ’å…¥åˆ é™¤**ï¼šArrayList O(n)ï¼ŒLinkedList O(1)ï¼ˆå¤´å°¾æ“ä½œï¼‰
- **å†…å­˜å¸ƒå±€**ï¼šArrayListè¿ç»­å­˜å‚¨ï¼ŒLinkedListåˆ†æ•£å­˜å‚¨
- **ç¼“å­˜å‹å¥½æ€§**ï¼šArrayListæ›´å¥½ï¼ŒLinkedListè¾ƒå·®

**Q: ArrayListçš„æ‰©å®¹æœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ**

A: ArrayListæ‰©å®¹æœºåˆ¶ï¼š
- é»˜è®¤åˆå§‹å®¹é‡ï¼š10
- æ‰©å®¹è§¦å‘ï¼šå½“å…ƒç´ ä¸ªæ•°è¶…è¿‡å½“å‰å®¹é‡æ—¶
- æ‰©å®¹å€æ•°ï¼š1.5å€ï¼ˆoldCapacity + oldCapacity >> 1ï¼‰
- æ‰©å®¹è¿‡ç¨‹ï¼šåˆ›å»ºæ–°æ•°ç»„ï¼Œå¤åˆ¶åŸæœ‰å…ƒç´ 
- æœ€å¤§å®¹é‡ï¼šInteger.MAX_VALUE - 8

### 7.2 æ€§èƒ½ä¼˜åŒ–é¢˜

**Q: å¦‚ä½•ä¼˜åŒ–ArrayListçš„æ€§èƒ½ï¼Ÿ**

A: ä¸»è¦ä¼˜åŒ–ç­–ç•¥ï¼š
- **é¢„åˆ†é…å®¹é‡**ï¼šä½¿ç”¨å¸¦åˆå§‹å®¹é‡çš„æ„é€ å‡½æ•°
- **æ‰¹é‡æ“ä½œ**ï¼šä½¿ç”¨addAll()è€Œéå¾ªç¯add()
- **é¿å…é¢‘ç¹æ’å…¥åˆ é™¤**ï¼šåœ¨åˆ—è¡¨ä¸­é—´é¢‘ç¹æ“ä½œå½±å“æ€§èƒ½
- **ä½¿ç”¨è¿­ä»£å™¨åˆ é™¤**ï¼šé¿å…ConcurrentModificationException
- **åŠæ—¶trimToSize()**ï¼šé‡Šæ”¾å¤šä½™ç©ºé—´

**Q: ä»€ä¹ˆåœºæ™¯ä¸‹é€‰æ‹©LinkedListï¼Ÿ**

A: LinkedListé€‚ç”¨åœºæ™¯ï¼š
- é¢‘ç¹çš„æ’å…¥åˆ é™¤æ“ä½œ
- éœ€è¦å®ç°é˜Ÿåˆ—æˆ–æ ˆåŠŸèƒ½
- å…ƒç´ æ•°é‡å˜åŒ–è¾ƒå¤§
- å¯¹éšæœºè®¿é—®æ€§èƒ½è¦æ±‚ä¸é«˜
- éœ€è¦åŒå‘éå†

### 7.3 å®è·µåº”ç”¨é¢˜

**Q: å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨çš„Listæ“ä½œï¼Ÿ**

A: çº¿ç¨‹å®‰å…¨æ–¹æ¡ˆï¼š
- **Collections.synchronizedList()**ï¼šåŒ…è£…ç°æœ‰List
- **CopyOnWriteArrayList**ï¼šè¯»å¤šå†™å°‘åœºæ™¯
- **Vector**ï¼šä¸æ¨èï¼Œæ€§èƒ½è¾ƒå·®
- **å¤–éƒ¨åŒæ­¥**ï¼šä½¿ç”¨synchronizedæˆ–Lock
- **å¹¶å‘é›†åˆ**ï¼šè€ƒè™‘ä½¿ç”¨ConcurrentLinkedQueueç­‰

**Q: å¦‚ä½•å¤„ç†Listä¸­çš„ConcurrentModificationExceptionï¼Ÿ**

A: è§£å†³æ–¹æ¡ˆï¼š
- **ä½¿ç”¨è¿­ä»£å™¨åˆ é™¤**ï¼š`iterator.remove()`
- **ä½¿ç”¨removeIf()**ï¼šJava 8+çš„æ–¹æ³•
- **åˆ›å»ºå‰¯æœ¬**ï¼š`new ArrayList<>(originalList)`
- **ä½¿ç”¨CopyOnWriteArrayList**ï¼šå†™æ—¶å¤åˆ¶
- **å¤–éƒ¨åŒæ­¥**ï¼šç¡®ä¿å•çº¿ç¨‹è®¿é—®

:::tip é¢è¯•è¦ç‚¹
1. **ç†è§£åº•å±‚å®ç°**ï¼šæŒæ¡ArrayListå’ŒLinkedListçš„å†…éƒ¨ç»“æ„
2. **æ€§èƒ½åˆ†æ**ï¼šèƒ½å¤Ÿåˆ†æä¸åŒæ“ä½œçš„æ—¶é—´å¤æ‚åº¦
3. **åœºæ™¯é€‰æ‹©**ï¼šæ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„å®ç°ç±»
4. **æœ€ä½³å®è·µ**ï¼šäº†è§£å¸¸è§é™·é˜±å’Œä¼˜åŒ–ç­–ç•¥
5. **çº¿ç¨‹å®‰å…¨**ï¼šç†è§£å¹¶å‘ç¯å¢ƒä¸‹çš„ä½¿ç”¨æ–¹æ¡ˆ
:::

---

é€šè¿‡æœ¬ç« çš„å­¦ä¹ ï¼Œä½ åº”è¯¥å·²ç»æŒæ¡äº†Java Listé›†åˆçš„æ ¸å¿ƒæ¦‚å¿µã€å®ç°åŸç†å’Œæœ€ä½³å®è·µã€‚Listæ˜¯Javaå¼€å‘ä¸­æœ€å¸¸ç”¨çš„é›†åˆç±»å‹ä¹‹ä¸€ï¼Œæ·±å…¥ç†è§£å…¶ç‰¹æ€§å’Œä½¿ç”¨åœºæ™¯ï¼Œå¯¹äºç¼–å†™é«˜æ•ˆã€å¯é çš„Javaç¨‹åºè‡³å…³é‡è¦ã€‚ 