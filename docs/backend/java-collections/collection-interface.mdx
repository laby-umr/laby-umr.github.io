---
sidebar_position: 1
title: Java Collectionæ¥å£è¯¦è§£
description: å…¨é¢ä»‹ç»Java Collectionæ¥å£çš„æ ¸å¿ƒæ¦‚å¿µã€æ–¹æ³•ã€å®ç°ç±»ä¸æœ€ä½³å®è·µ
authors: [Laby]
last_update:
  date: 2025-08-07
  author: Laby
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Java Collection æ¥å£è¯¦è§£

## 1. Collection æ¥å£åŸºç¡€

Collection æ¥å£æ˜¯ Java é›†åˆæ¡†æ¶çš„æ ¹æ¥å£ï¼Œå®ƒå®šä¹‰äº†é›†åˆçš„åŸºæœ¬æ“ä½œã€‚æ‰€æœ‰çš„é›†åˆç±»éƒ½å®ç°äº†è¿™ä¸ªæ¥å£ï¼Œä¸º Java ç¨‹åºæä¾›äº†ç»Ÿä¸€çš„æ•°æ®ç»“æ„æ“ä½œæ–¹å¼ã€‚

:::tip æ ¸å¿ƒä»·å€¼
**Collection æ¥å£ = ç»Ÿä¸€æ“ä½œè§„èŒƒ + ç±»å‹å®‰å…¨ + è¿­ä»£æ”¯æŒ + æ³›å‹æ”¯æŒ**
- ğŸ”„ **ç»Ÿä¸€æ“ä½œè§„èŒƒ**ï¼šæä¾›äº†ä¸€è‡´çš„APIï¼Œç®€åŒ–äº†é›†åˆæ“ä½œ
- ğŸ›¡ï¸ **ç±»å‹å®‰å…¨**ï¼šé€šè¿‡æ³›å‹æ”¯æŒï¼Œåœ¨ç¼–è¯‘æœŸä¿è¯ç±»å‹å®‰å…¨
- ğŸ” **è¿­ä»£æ”¯æŒ**ï¼šç»§æ‰¿è‡ªIterableï¼Œæ”¯æŒfor-eachå¾ªç¯å’Œè¿­ä»£å™¨è®¿é—®
- ğŸ“¦ **å¤šç§å®ç°**ï¼šæä¾›äº†ä¸°å¯Œçš„å…·ä½“å®ç°ç±»ï¼Œæ»¡è¶³ä¸åŒéœ€æ±‚
- âš¡ **é«˜æ€§èƒ½æ“ä½œ**ï¼šé’ˆå¯¹ä¸åŒåœºæ™¯ä¼˜åŒ–çš„æ•°æ®ç»“æ„å®ç°
:::

### 1.1 ä»€ä¹ˆæ˜¯ Collection æ¥å£ï¼Ÿ

Collection æ¥å£æ˜¯ Java é›†åˆæ¡†æ¶çš„é¡¶å±‚æ¥å£ï¼Œå®ƒç»§æ‰¿è‡ª `Iterable<E>` æ¥å£ï¼Œå®šä¹‰äº†é›†åˆçš„åŸºæœ¬æ“ä½œæ–¹æ³•ã€‚æ‰€æœ‰å…·ä½“çš„é›†åˆå®ç°ç±»éƒ½å¿…é¡»å®ç°è¿™ä¸ªæ¥å£ï¼Œç¡®ä¿é›†åˆæ“ä½œçš„ä¸€è‡´æ€§å’Œå¯é¢„æµ‹æ€§ã€‚

#### Collection æ¥å£çš„å±‚æ¬¡ç»“æ„

```mermaid
graph TD
    A["Iterable<E>"] --> B["Collection<E>"]
    B --> C["List<E>"]
    B --> D["Set<E>"]
    B --> E["Queue<E>"]
    
    C --> C1["ArrayList"]
    C --> C2["LinkedList"]
    C --> C3["Vector"]
    C3 --> C4["Stack"]
    
    D --> D1["HashSet"]
    D --> D2["LinkedHashSet"]
    D --> D3["TreeSet"]
    D --> D4["EnumSet"]
    
    E --> E1["PriorityQueue"]
    E --> E2["ArrayDeque"]
    E --> E3["LinkedList"]
    
    style C fill:#f9f,stroke:#333,stroke-width:2px
    style D fill:#bbf,stroke:#333,stroke-width:2px
    style E fill:#bfb,stroke:#333,stroke-width:2px
    
    classDef interface fill:#fffacd,stroke:#333,stroke-width:1px
    class A,B interface
```

#### æ ¸å¿ƒç‰¹æ€§å¯¹æ¯”

| ç‰¹æ€§ | Collection | å…·ä½“å®ç°ç±» |
|------|------------|------------|
| **å…ƒç´ é¡ºåº** | ä¸ä¿è¯é¡ºåº | Listæœ‰åºï¼ŒSetæ— åº |
| **å…ƒç´ å”¯ä¸€æ€§** | ä¸ä¿è¯å”¯ä¸€ | Setå”¯ä¸€ï¼ŒListå¯é‡å¤ |
| **çº¿ç¨‹å®‰å…¨** | ä¸ä¿è¯çº¿ç¨‹å®‰å…¨ | éœ€è¦å…·ä½“å®ç°ç±»ä¿è¯ |
| **æ€§èƒ½ç‰¹å¾** | æ¥å£å®šä¹‰ | ç”±å…·ä½“å®ç°å†³å®š |

### 1.2 Collection æ¥å£æ–¹æ³•æ¦‚è§ˆ

Collection æ¥å£å®šä¹‰äº†ä¸°å¯Œçš„æ“ä½œæ–¹æ³•ï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªç±»åˆ«ï¼š

```java title="Collection æ¥å£æ ¸å¿ƒæ–¹æ³•"
public interface Collection<E> extends Iterable<E> {
    // ===== åŸºæœ¬æ“ä½œ =====
    boolean add(E e);                          // æ·»åŠ å…ƒç´ 
    boolean remove(Object o);                  // åˆ é™¤å…ƒç´ 
    boolean contains(Object o);                // æ˜¯å¦åŒ…å«æŒ‡å®šå…ƒç´ 
    
    // ===== æ‰¹é‡æ“ä½œ =====
    boolean addAll(Collection<? extends E> c); // æ·»åŠ é›†åˆ
    boolean removeAll(Collection<?> c);        // åˆ é™¤é›†åˆ
    boolean retainAll(Collection<?> c);        // ä¿ç•™é›†åˆ
    void clear();                              // æ¸…ç©ºé›†åˆ
    
    // ===== æŸ¥è¯¢æ“ä½œ =====
    int size();                                // è·å–å…ƒç´ ä¸ªæ•°
    boolean isEmpty();                         // åˆ¤æ–­æ˜¯å¦ä¸ºç©º
    
    // ===== è¿­ä»£å™¨ =====
    Iterator<E> iterator();                    // è·å–è¿­ä»£å™¨
    
    // ===== æ•°ç»„è½¬æ¢ =====
    Object[] toArray();                        // è½¬æ¢ä¸ºObjectæ•°ç»„
    `<T> T[] toArray(T[] a);`                   // è½¬æ¢ä¸ºæŒ‡å®šç±»å‹æ•°ç»„
}
```

:::info æ–¹æ³•åˆ†ç±»è¯´æ˜
- **åŸºæœ¬æ“ä½œ**ï¼šå•ä¸ªå…ƒç´ çš„å¢åˆ æŸ¥æ“ä½œ
- **æ‰¹é‡æ“ä½œ**ï¼šå¯¹æ•´ä¸ªé›†åˆçš„æ“ä½œ
- **æŸ¥è¯¢æ“ä½œ**ï¼šè·å–é›†åˆçŠ¶æ€ä¿¡æ¯
- **è¿­ä»£å™¨**ï¼šæ”¯æŒé›†åˆéå†
- **æ•°ç»„è½¬æ¢**ï¼šä¸æ•°ç»„çš„äº’è½¬æ“ä½œ
:::

## 2. Collection æ¥å£æ ¸å¿ƒæ–¹æ³•è¯¦è§£

```mermaid
graph TD
    A["Collectionæ ¸å¿ƒæ–¹æ³•"] --> B["åŸºæœ¬æ“ä½œ"]
    A --> C["æ‰¹é‡æ“ä½œ"]
    A --> D["æŸ¥è¯¢æ“ä½œ"]
    A --> E["è¿­ä»£å™¨æ“ä½œ"]
    A --> F["æ•°ç»„è½¬æ¢"]
    
    B --> B1["add"]
    B --> B2["remove"]
    B --> B3["contains"]
    
    C --> C1["addAll"]
    C --> C2["removeAll"]
    C --> C3["retainAll"]
    C --> C4["clear"]
    
    D --> D1["size"]
    D --> D2["isEmpty"]
    
    E --> E1["iterator"]
    
    F --> F1["toArray"]
    
    style A fill:#f9f,stroke:#333,stroke-width:2px
    style B,C,D,E,F fill:#bbf,stroke:#333,stroke-width:1px
```

### 2.1 åŸºæœ¬æ“ä½œæ–¹æ³•

<Tabs>
<TabItem value="add" label="æ·»åŠ å…ƒç´ æ“ä½œ">

```java title="æ·»åŠ å…ƒç´ æ“ä½œç¤ºä¾‹"
public class CollectionBasicOperations {
    public static void main(String[] args) {
        Collection<String> collection = new ArrayList<>();
        
        // æ·»åŠ å•ä¸ªå…ƒç´ 
        boolean added = collection.add("Java");
        System.out.println("æ·»åŠ JavaæˆåŠŸ: " + added);
        
        // æ·»åŠ å¤šä¸ªå…ƒç´ 
        collection.add("Python");
        collection.add("C++");
        collection.add("JavaScript");
        
        // æ£€æŸ¥æ·»åŠ ç»“æœ
        System.out.println("é›†åˆå¤§å°: " + collection.size());
        System.out.println("é›†åˆå†…å®¹: " + collection);
        
        // å°è¯•æ·»åŠ é‡å¤å…ƒç´ ï¼ˆCollectionå…è®¸é‡å¤ï¼‰
        boolean duplicateAdded = collection.add("Java");
        System.out.println("é‡å¤æ·»åŠ Java: " + duplicateAdded);
        System.out.println("æ·»åŠ åé›†åˆå¤§å°: " + collection.size());
    }
}
```

</TabItem>
<TabItem value="remove" label="åˆ é™¤å…ƒç´ æ“ä½œ">

```java title="åˆ é™¤å…ƒç´ æ“ä½œç¤ºä¾‹"
public class CollectionRemoveOperations {
    public static void main(String[] args) {
        Collection<String> collection = new ArrayList<>();
        collection.add("Apple");
        collection.add("Banana");
        collection.add("Cherry");
        collection.add("Date");
        
        System.out.println("åŸå§‹é›†åˆ: " + collection);
        
        // åˆ é™¤æŒ‡å®šå…ƒç´ 
        boolean removed = collection.remove("Banana");
        System.out.println("åˆ é™¤BananaæˆåŠŸ: " + removed);
        System.out.println("åˆ é™¤åé›†åˆ: " + collection);
        
        // åˆ é™¤ä¸å­˜åœ¨çš„å…ƒç´ 
        boolean notFound = collection.remove("Orange");
        System.out.println("åˆ é™¤ä¸å­˜åœ¨çš„Orange: " + notFound);
        
        // æ¸…ç©ºé›†åˆ
        collection.clear();
        System.out.println("æ¸…ç©ºåé›†åˆå¤§å°: " + collection.size());
        System.out.println("é›†åˆæ˜¯å¦ä¸ºç©º: " + collection.isEmpty());
    }
}
```

</TabItem>
<TabItem value="query" label="æŸ¥è¯¢å…ƒç´ æ“ä½œ">

```java title="æŸ¥è¯¢å…ƒç´ æ“ä½œç¤ºä¾‹"
public class CollectionQueryOperations {
    public static void main(String[] args) {
        Collection<Integer> numbers = new ArrayList<>();
        numbers.add(10);
        numbers.add(20);
        numbers.add(30);
        numbers.add(40);
        numbers.add(50);
        
        // æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨
        boolean contains20 = numbers.contains(20);
        boolean contains100 = numbers.contains(100);
        System.out.println("åŒ…å«20: " + contains20);
        System.out.println("åŒ…å«100: " + contains100);
        
        // è·å–é›†åˆä¿¡æ¯
        System.out.println("é›†åˆå¤§å°: " + numbers.size());
        System.out.println("é›†åˆæ˜¯å¦ä¸ºç©º: " + numbers.isEmpty());
        
        // è½¬æ¢ä¸ºæ•°ç»„
        Object[] objectArray = numbers.toArray();
        System.out.println("Objectæ•°ç»„: " + Arrays.toString(objectArray));
        
        Integer[] intArray = numbers.toArray(new Integer[0]);
        System.out.println("Integeræ•°ç»„: " + Arrays.toString(intArray));
    }
}
```

</TabItem>
</Tabs>

### 2.2 æ‰¹é‡æ“ä½œæ–¹æ³•

<Tabs>
<TabItem value="merge" label="é›†åˆåˆå¹¶æ“ä½œ">

```java title="é›†åˆåˆå¹¶æ“ä½œç¤ºä¾‹"
public class CollectionBatchOperations {
    public static void main(String[] args) {
        Collection<String> collection1 = new ArrayList<>();
        collection1.add("Java");
        collection1.add("Python");
        
        Collection<String> collection2 = new ArrayList<>();
        collection2.add("C++");
        collection2.add("JavaScript");
        collection2.add("Go");
        
        System.out.println("é›†åˆ1: " + collection1);
        System.out.println("é›†åˆ2: " + collection2);
        
        // æ·»åŠ æ‰€æœ‰å…ƒç´ 
        boolean allAdded = collection1.addAll(collection2);
        System.out.println("æ‰¹é‡æ·»åŠ æˆåŠŸ: " + allAdded);
        System.out.println("åˆå¹¶åé›†åˆ1: " + collection1);
        
        // åˆ›å»ºæµ‹è¯•é›†åˆ
        Collection<String> testCollection = new ArrayList<>();
        testCollection.add("Java");
        testCollection.add("C++");
        testCollection.add("Ruby");
        
        // ä¿ç•™äº¤é›†
        boolean retained = collection1.retainAll(testCollection);
        System.out.println("ä¿ç•™äº¤é›†æ“ä½œ: " + retained);
        System.out.println("ä¿ç•™äº¤é›†å: " + collection1);
        
        // åˆ é™¤äº¤é›†
        boolean removed = collection1.removeAll(testCollection);
        System.out.println("åˆ é™¤äº¤é›†æ“ä½œ: " + removed);
        System.out.println("åˆ é™¤äº¤é›†å: " + collection1);
    }
}
```

</TabItem>
<TabItem value="compare" label="é›†åˆæ¯”è¾ƒæ“ä½œ">

```java title="é›†åˆæ¯”è¾ƒæ“ä½œç¤ºä¾‹"
public class CollectionComparisonOperations {
    public static void main(String[] args) {
        Collection<String> collection1 = new ArrayList<>();
        collection1.add("A");
        collection1.add("B");
        collection1.add("C");
        
        Collection<String> collection2 = new ArrayList<>();
        collection2.add("A");
        collection2.add("B");
        collection2.add("C");
        
        Collection<String> collection3 = new ArrayList<>();
        collection3.add("A");
        collection3.add("B");
        collection3.add("D");
        
        // æ£€æŸ¥æ˜¯å¦åŒ…å«æ‰€æœ‰å…ƒç´ 
        boolean containsAll1 = collection1.containsAll(collection2);
        boolean containsAll2 = collection1.containsAll(collection3);
        
        System.out.println("collection1åŒ…å«collection2çš„æ‰€æœ‰å…ƒç´ : " + containsAll1);
        System.out.println("collection1åŒ…å«collection3çš„æ‰€æœ‰å…ƒç´ : " + containsAll2);
        
        // æ£€æŸ¥é›†åˆæ˜¯å¦ç›¸ç­‰
        boolean equals1 = collection1.equals(collection2);
        boolean equals2 = collection1.equals(collection3);
        
        System.out.println("collection1ç­‰äºcollection2: " + equals1);
        System.out.println("collection1ç­‰äºcollection3: " + equals2);
    }
}
```

</TabItem>
</Tabs>

## 3. Collection æ¥å£å®ç°ç±»è¯¦è§£

### 3.1 ä¸»è¦å®ç°ç±»åˆ†ç±»

Collection æ¥å£æœ‰ä¸‰ä¸ªä¸»è¦çš„å­æ¥å£ï¼Œæ¯ä¸ªå­æ¥å£éƒ½æœ‰å¤šä¸ªå…·ä½“çš„å®ç°ç±»ï¼š

<Tabs>
<TabItem value="list" label="List æ¥å£å®ç°ç±»">

```java title="Listå®ç°ç±»ç¤ºä¾‹"
public class ListImplementationExamples {
    public static void main(String[] args) {
        // ArrayList - åŸºäºåŠ¨æ€æ•°ç»„
        List<String> arrayList = new ArrayList<>();
        arrayList.add("ArrayListå…ƒç´ ");
        System.out.println("ArrayList: " + arrayList);
        
        // LinkedList - åŸºäºåŒå‘é“¾è¡¨
        List<String> linkedList = new LinkedList<>();
        linkedList.add("LinkedListå…ƒç´ ");
        System.out.println("LinkedList: " + linkedList);
        
        // Vector - çº¿ç¨‹å®‰å…¨çš„åŠ¨æ€æ•°ç»„
        List<String> vector = new Vector<>();
        vector.add("Vectorå…ƒç´ ");
        System.out.println("Vector: " + vector);
        
        // Stack - åè¿›å…ˆå‡ºçš„æ ˆ
        Stack<String> stack = new Stack<>();
        stack.push("Stackå…ƒç´ ");
        System.out.println("Stack: " + stack);
    }
}
```

| å®ç°ç±» | ç‰¹ç‚¹ | çº¿ç¨‹å®‰å…¨ | é€‚ç”¨åœºæ™¯ |
|--------|------|----------|----------|
| **ArrayList** | åŸºäºåŠ¨æ€æ•°ç»„ï¼Œéšæœºè®¿é—®å¿«ï¼Œå¢åˆ æ…¢ | å¦ | é¢‘ç¹éšæœºè®¿é—®ï¼Œè¾ƒå°‘å¢åˆ æ“ä½œ |
| **LinkedList** | åŸºäºåŒå‘é“¾è¡¨ï¼Œéšæœºè®¿é—®æ…¢ï¼Œå¢åˆ å¿« | å¦ | é¢‘ç¹å¢åˆ æ“ä½œï¼Œè¾ƒå°‘éšæœºè®¿é—® |
| **Vector** | åŸºäºåŠ¨æ€æ•°ç»„ï¼Œä¸ArrayListç±»ä¼¼ä½†çº¿ç¨‹å®‰å…¨ | æ˜¯ | éœ€è¦çº¿ç¨‹å®‰å…¨çš„åœºæ™¯ |
| **Stack** | ç»§æ‰¿è‡ªVectorï¼Œå®ç°LIFOæ ˆ | æ˜¯ | éœ€è¦åè¿›å…ˆå‡ºæ•°æ®ç»“æ„ |

</TabItem>
<TabItem value="set" label="Set æ¥å£å®ç°ç±»">

```java title="Setå®ç°ç±»ç¤ºä¾‹"
public class SetImplementationExamples {
    public static void main(String[] args) {
        // HashSet - åŸºäºå“ˆå¸Œè¡¨
        Set<String> hashSet = new HashSet<>();
        hashSet.add("HashSetå…ƒç´ ");
        System.out.println("HashSet: " + hashSet);
        
        // LinkedHashSet - ä¿æŒæ’å…¥é¡ºåº
        Set<String> linkedHashSet = new LinkedHashSet<>();
        linkedHashSet.add("LinkedHashSetå…ƒç´ ");
        System.out.println("LinkedHashSet: " + linkedHashSet);
        
        // TreeSet - åŸºäºçº¢é»‘æ ‘çš„æœ‰åºSet
        Set<String> treeSet = new TreeSet<>();
        treeSet.add("TreeSetå…ƒç´ ");
        System.out.println("TreeSet: " + treeSet);
        
        // EnumSet - ä¸“é—¨ç”¨äºæšä¸¾
        Set<DayOfWeek> enumSet = EnumSet.of(DayOfWeek.MONDAY, DayOfWeek.TUESDAY);
        System.out.println("EnumSet: " + enumSet);
    }
}

enum DayOfWeek {
    MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, SUNDAY
}
```

| å®ç°ç±» | ç‰¹ç‚¹ | çº¿ç¨‹å®‰å…¨ | é€‚ç”¨åœºæ™¯ |
|--------|------|----------|----------|
| **HashSet** | åŸºäºHashMapå®ç°ï¼Œæ— åºï¼ŒæŸ¥æ‰¾å¿« | å¦ | ä¸å…³å¿ƒé¡ºåºï¼Œéœ€è¦å¿«é€ŸæŸ¥æ‰¾/å»é‡ |
| **LinkedHashSet** | åŸºäºLinkedHashMapï¼Œç»´æŠ¤æ’å…¥é¡ºåº | å¦ | éœ€è¦è®°ä½æ’å…¥é¡ºåºçš„åœºæ™¯ |
| **TreeSet** | åŸºäºTreeMapï¼Œè‡ªç„¶æ’åºæˆ–æ¯”è¾ƒå™¨æ’åº | å¦ | éœ€è¦æœ‰åºé›†åˆï¼Œæ”¯æŒèŒƒå›´æ“ä½œ |
| **EnumSet** | ä¸“ä¸ºæšä¸¾ç±»å‹è®¾è®¡ï¼Œæ€§èƒ½æä½³ | å¦ | æ“ä½œæšä¸¾ç±»å‹çš„é›†åˆ

</TabItem>
<TabItem value="queue" label="Queue æ¥å£å®ç°ç±»">

```java title="Queueå®ç°ç±»ç¤ºä¾‹"
public class QueueImplementationExamples {
    public static void main(String[] args) {
        // LinkedList - å¯ä»¥ä½œä¸ºé˜Ÿåˆ—ä½¿ç”¨
        Queue<String> linkedListQueue = new LinkedList<>();
        linkedListQueue.offer("LinkedListé˜Ÿåˆ—å…ƒç´ ");
        System.out.println("LinkedListé˜Ÿåˆ—: " + linkedListQueue);
        
        // PriorityQueue - ä¼˜å…ˆçº§é˜Ÿåˆ—
        Queue<Integer> priorityQueue = new PriorityQueue<>();
        priorityQueue.offer(30);
        priorityQueue.offer(10);
        priorityQueue.offer(20);
        System.out.println("PriorityQueue: " + priorityQueue);
        
        // ArrayBlockingQueue - æœ‰ç•Œé˜»å¡é˜Ÿåˆ—
        BlockingQueue<String> blockingQueue = new ArrayBlockingQueue<>(3);
        try {
            blockingQueue.put("é˜»å¡é˜Ÿåˆ—å…ƒç´ ");
            System.out.println("ArrayBlockingQueue: " + blockingQueue);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}
```

| å®ç°ç±» | ç‰¹ç‚¹ | çº¿ç¨‹å®‰å…¨ | é€‚ç”¨åœºæ™¯ |
|--------|------|----------|----------|
| **LinkedList** | å®ç°Queueæ¥å£ï¼ŒåŸºäºé“¾è¡¨ | å¦ | ä¸€èˆ¬é˜Ÿåˆ—åº”ç”¨ |
| **PriorityQueue** | åŸºäºä¼˜å…ˆçº§å †çš„ä¼˜å…ˆé˜Ÿåˆ— | å¦ | éœ€è¦æŒ‰ä¼˜å…ˆçº§å¤„ç†çš„åœºæ™¯ |
| **ArrayDeque** | åŸºäºæ•°ç»„å®ç°çš„åŒç«¯é˜Ÿåˆ— | å¦ | åŒç«¯é˜Ÿåˆ—åº”ç”¨ï¼Œæ ˆåº”ç”¨ |
| **ArrayBlockingQueue** | æœ‰ç•Œé˜»å¡é˜Ÿåˆ— | æ˜¯ | ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ |
| **LinkedBlockingQueue** | å¯é€‰æœ‰ç•Œé˜»å¡é˜Ÿåˆ— | æ˜¯ | ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ |
| **PriorityBlockingQueue** | é˜»å¡ä¼˜å…ˆé˜Ÿåˆ— | æ˜¯ | ä¼˜å…ˆä»»åŠ¡è°ƒåº¦ |

</TabItem>
</Tabs>

### 3.2 å®ç°ç±»æ€§èƒ½å¯¹æ¯”

| å®ç°ç±» | åº•å±‚æ•°æ®ç»“æ„ | æŸ¥è¯¢æ€§èƒ½ | æ’å…¥æ€§èƒ½ | åˆ é™¤æ€§èƒ½ | çº¿ç¨‹å®‰å…¨ | é€‚ç”¨åœºæ™¯ |
|--------|--------------|----------|----------|----------|----------|----------|
| **ArrayList** | åŠ¨æ€æ•°ç»„ | O(1) | O(1) æœ«å°¾ | O(n) | å¦ | éšæœºè®¿é—®é¢‘ç¹ |
| **LinkedList** | åŒå‘é“¾è¡¨ | O(n) | O(1) | O(1) | å¦ | é¢‘ç¹æ’å…¥åˆ é™¤ |
| **Vector** | åŠ¨æ€æ•°ç»„ | O(1) | O(1) æœ«å°¾ | O(n) | æ˜¯ | éœ€è¦çº¿ç¨‹å®‰å…¨ |
| **HashSet** | å“ˆå¸Œè¡¨ | O(1) | O(1) | O(1) | å¦ | å¿«é€ŸæŸ¥æ‰¾ |
| **TreeSet** | çº¢é»‘æ ‘ | O(log n) | O(log n) | O(log n) | å¦ | éœ€è¦æœ‰åº |
| **PriorityQueue** | å † | O(1) | O(log n) | O(log n) | å¦ | ä¼˜å…ˆçº§å¤„ç† |

:::caution æ€§èƒ½é€‰æ‹©å»ºè®®
- **éšæœºè®¿é—®é¢‘ç¹**ï¼šé€‰æ‹© ArrayList
- **é¢‘ç¹æ’å…¥åˆ é™¤**ï¼šé€‰æ‹© LinkedList
- **éœ€è¦çº¿ç¨‹å®‰å…¨**ï¼šé€‰æ‹© Vector æˆ–ä½¿ç”¨ Collections.synchronizedXXX()
- **å¿«é€ŸæŸ¥æ‰¾**ï¼šé€‰æ‹© HashSet
- **éœ€è¦æœ‰åº**ï¼šé€‰æ‹© TreeSet
:::

## 4. Collection æ¥å£å®é™…åº”ç”¨åœºæ™¯

```mermaid
graph TD
    A["Collectionåº”ç”¨åœºæ™¯"] --> B["æ•°æ®å¤„ç†"]
    A --> C["ç¼“å­˜ç®¡ç†"]
    A --> D["ä¸šåŠ¡é€»è¾‘"]
    A --> E["å¹¶å‘å¤„ç†"]
    
    B --> B1["æ•°æ®èšåˆ"]
    B --> B2["æ•°æ®è¿‡æ»¤"]
    B --> B3["æ•°æ®è½¬æ¢"]
    B --> B4["ç»Ÿè®¡åˆ†æ"]
    
    C --> C1["LRUç¼“å­˜"]
    C --> C2["å¯¹è±¡æ± "]
    C --> C3["ç¼“å­˜å¤±æ•ˆ"]
    
    D --> D1["è´­ç‰©è½¦"]
    D --> D2["ä»»åŠ¡é˜Ÿåˆ—"]
    D --> D3["çŠ¶æ€ç®¡ç†"]
    
    E --> E1["ç”Ÿäº§è€…æ¶ˆè´¹è€…"]
    E --> E2["çº¿ç¨‹æ± ä»»åŠ¡"]
    E --> E3["å¹¶è¡Œå¤„ç†"]
    
    classDef primary fill:#bbf,stroke:#333,stroke-width:1px
    classDef secondary fill:#fffacd,stroke:#333,stroke-width:1px
    
    class A primary
    class B,C,D,E secondary
```

### 4.1 æ•°æ®èšåˆå¤„ç†

åœ¨å®é™…çš„ä¼ä¸šçº§åº”ç”¨ä¸­ï¼ŒCollection æ¥å£å¸¸ç”¨äºæ•°æ®èšåˆå¤„ç†ï¼š

```java title="æ•°æ®èšåˆå¤„ç†ç¤ºä¾‹"
public class DataAggregationExample {
    public static void main(String[] args) {
        // æ¨¡æ‹Ÿç”¨æˆ·è®¢å•æ•°æ®
        List<Order> orders = Arrays.asList(
            new Order("Alice", "Electronics", 1500.0),
            new Order("Bob", "Books", 300.0),
            new Order("Charlie", "Electronics", 2000.0),
            new Order("Diana", "Clothing", 800.0),
            new Order("Eve", "Electronics", 1200.0)
        );
        
        // 1. æŒ‰ç”¨æˆ·åˆ†ç»„ç»Ÿè®¡
        System.out.println("=== æŒ‰ç”¨æˆ·åˆ†ç»„ç»Ÿè®¡ ===");
        Map<String, List<Order>> userOrders = orders.stream()
            .collect(Collectors.groupingBy(Order::getCustomerName));
        
        userOrders.forEach((user, userOrderList) -> {
            double totalAmount = userOrderList.stream()
                .mapToDouble(Order::getAmount)
                .sum();
            System.out.println(user + ": " + userOrderList.size() + " ä¸ªè®¢å•, æ€»é‡‘é¢: " + totalAmount);
        });
        
        // 2. æŒ‰ç±»åˆ«ç»Ÿè®¡
        System.out.println("\n=== æŒ‰ç±»åˆ«ç»Ÿè®¡ ===");
        Map<String, DoubleSummaryStatistics> categoryStats = orders.stream()
            .collect(Collectors.groupingBy(
                Order::getCategory,
                Collectors.summarizingDouble(Order::getAmount)
            ));
        
        categoryStats.forEach((category, stats) -> {
            System.out.println(category + ":");
            System.out.println("  è®¢å•æ•°: " + stats.getCount());
            System.out.println("  æ€»é‡‘é¢: " + stats.getSum());
            System.out.println("  å¹³å‡é‡‘é¢: " + stats.getAverage());
        });
        
        // 3. é«˜ä»·å€¼è®¢å•ç­›é€‰
        System.out.println("\n=== é«˜ä»·å€¼è®¢å•ç­›é€‰ ===");
        List<Order> highValueOrders = orders.stream()
            .filter(order -> order.getAmount() > 1000)
            .sorted(Comparator.comparing(Order::getAmount).reversed())
            .collect(Collectors.toList());
        
        System.out.println("é«˜ä»·å€¼è®¢å•(>1000):");
        highValueOrders.forEach(order -> 
            System.out.println("  " + order.getCustomerName() + " - " + 
                             order.getCategory() + " - " + order.getAmount()));
    }
    
    static class Order {
        private String customerName;
        private String category;
        private double amount;
        
        public Order(String customerName, String category, double amount) {
            this.customerName = customerName;
            this.category = category;
            this.amount = amount;
        }
        
        public String getCustomerName() { return customerName; }
        public String getCategory() { return category; }
        public double getAmount() { return amount; }
    }
}
```

### 4.2 ç¼“å­˜ç®¡ç†å®ç°

Collection æ¥å£åœ¨ç¼“å­˜ç®¡ç†ä¸­çš„åº”ç”¨ï¼š

```java title="ç¼“å­˜ç®¡ç†ç¤ºä¾‹"
public class CacheManagementExample {
    public static void main(String[] args) {
        // å®ç°ç®€å•çš„LRUç¼“å­˜
        LRUCache<String, String> cache = new LRUCache<>(3);
        
        // æ·»åŠ ç¼“å­˜é¡¹
        cache.put("key1", "value1");
        cache.put("key2", "value2");
        cache.put("key3", "value3");
        
        System.out.println("åˆå§‹ç¼“å­˜: " + cache);
        
        // è®¿é—®key1ï¼Œä½¿å…¶æˆä¸ºæœ€è¿‘ä½¿ç”¨
        String value1 = cache.get("key1");
        System.out.println("è®¿é—®key1: " + value1);
        System.out.println("è®¿é—®åç¼“å­˜: " + cache);
        
        // æ·»åŠ æ–°é¡¹ï¼Œè§¦å‘LRUæ·˜æ±°
        cache.put("key4", "value4");
        System.out.println("æ·»åŠ key4åç¼“å­˜: " + cache);
        
        // æ£€æŸ¥ç¼“å­˜ç»Ÿè®¡
        System.out.println("ç¼“å­˜å‘½ä¸­æ¬¡æ•°: " + cache.getHitCount());
        System.out.println("ç¼“å­˜æœªå‘½ä¸­æ¬¡æ•°: " + cache.getMissCount());
    }
    
    static class LRUCache<K, V> {
        private final int capacity;
        private final LinkedHashMap<K, V> cache;
        private int hitCount = 0;
        private int missCount = 0;
        
        public LRUCache(int capacity) {
            this.capacity = capacity;
            this.cache = new LinkedHashMap<K, V>(capacity, 0.75f, true) {
                @Override
                protected boolean removeEldestEntry(Map.Entry<K, V> eldest) {
                    return size() > capacity;
                }
            };
        }
        
        public V get(K key) {
            V value = cache.get(key);
            if (value != null) {
                hitCount++;
            } else {
                missCount++;
            }
            return value;
        }
        
        public void put(K key, V value) {
            cache.put(key, value);
        }
        
        public int getHitCount() { return hitCount; }
        public int getMissCount() { return missCount; }
        
        @Override
        public String toString() {
            return cache.toString();
        }
    }
}
```

## 5. Collection æ¥å£æœ€ä½³å®è·µ

### 5.1 æ€§èƒ½ä¼˜åŒ–å»ºè®®

:::tip æ ¸å¿ƒä¼˜åŒ–åŸåˆ™
- **é€‰æ‹©åˆé€‚çš„å®ç°ç±»**ï¼šæ ¹æ®ä½¿ç”¨åœºæ™¯é€‰æ‹©æœ€åˆé€‚çš„é›†åˆç±»å‹
- **é¢„åˆ†é…å®¹é‡**ï¼šå¯¹äºå·²çŸ¥å¤§å°çš„é›†åˆï¼Œé¢„åˆ†é…å®¹é‡é¿å…æ‰©å®¹
- **ä½¿ç”¨è¿­ä»£å™¨**ï¼šéå†æ—¶ä¼˜å…ˆä½¿ç”¨è¿­ä»£å™¨è€Œä¸æ˜¯ç´¢å¼•
- **é¿å…é¢‘ç¹è£…ç®±æ‹†ç®±**ï¼šä½¿ç”¨åŸºæœ¬ç±»å‹é›†åˆç±»
- **åˆç†ä½¿ç”¨å¹¶è¡Œæµ**ï¼šå¤§æ•°æ®é›†è€ƒè™‘å¹¶è¡Œå¤„ç†
:::

### 5.2 ä»£ç è´¨é‡å»ºè®®

| æ–¹é¢ | å»ºè®® | ç¤ºä¾‹ |
|------|------|------|
| **ç±»å‹å®‰å…¨** | ä½¿ç”¨æ³›å‹ä¿è¯ç±»å‹å®‰å…¨ | `Collection<String>` è€Œä¸æ˜¯ `Collection` |
| **æ¥å£ç¼–ç¨‹** | é¢å‘æ¥å£ç¼–ç¨‹ | `Collection<String>` è€Œä¸æ˜¯ `ArrayList<String>` |
| **å¼‚å¸¸å¤„ç†** | å¤„ç†é›†åˆæ“ä½œçš„å¼‚å¸¸ | æ£€æŸ¥ `add()` è¿”å›å€¼ |
| **èµ„æºç®¡ç†** | åŠæ—¶æ¸…ç†ä¸éœ€è¦çš„é›†åˆ | ä½¿ç”¨ `clear()` æˆ–è®¾ç½®ä¸º null |

### 5.3 å¸¸è§é™·é˜±å’Œè§£å†³æ–¹æ¡ˆ

```java title="å¸¸è§é™·é˜±ç¤ºä¾‹"
public class CollectionPitfallsExample {
    public static void main(String[] args) {
        // é™·é˜±1ï¼šåœ¨è¿­ä»£è¿‡ç¨‹ä¸­ä¿®æ”¹é›†åˆ
        List<String> list = new ArrayList<>();
        list.add("A");
        list.add("B");
        list.add("C");
        
        // é”™è¯¯æ–¹å¼ï¼šä¼šæŠ›å‡ºConcurrentModificationException
        try {
            for (String item : list) {
                if ("B".equals(item)) {
                    list.remove(item); // å¼‚å¸¸ï¼
                }
            }
        } catch (Exception e) {
            System.out.println("é™·é˜±1å¼‚å¸¸: " + e.getClass().getSimpleName());
        }
        
        // æ­£ç¡®æ–¹å¼ï¼šä½¿ç”¨è¿­ä»£å™¨
        Iterator<String> iterator = list.iterator();
        while (iterator.hasNext()) {
            String item = iterator.next();
            if ("B".equals(item)) {
                iterator.remove(); // å®‰å…¨åˆ é™¤
            }
        }
        System.out.println("å®‰å…¨åˆ é™¤å: " + list);
        
        // é™·é˜±2ï¼šä½¿ç”¨åŸå§‹ç±»å‹
        Collection rawCollection = new ArrayList(); // åŸå§‹ç±»å‹
        rawCollection.add("String");
        rawCollection.add(42); // å¯ä»¥æ·»åŠ ä»»ä½•ç±»å‹
        
        // æ­£ç¡®æ–¹å¼ï¼šä½¿ç”¨æ³›å‹
        Collection<String> genericCollection = new ArrayList<>();
        genericCollection.add("String");
        // genericCollection.add(42); // ç¼–è¯‘é”™è¯¯ï¼Œç±»å‹å®‰å…¨
    }
}
```

## 6. æ€»ç»“

Java Collection æ¥å£æ˜¯é›†åˆæ¡†æ¶çš„æ ¸å¿ƒï¼Œå®ƒå®šä¹‰äº†é›†åˆçš„åŸºæœ¬æ“ä½œè§„èŒƒï¼Œä¸º Java ç¨‹åºæä¾›äº†ç»Ÿä¸€çš„æ•°æ®ç»“æ„æ“ä½œæ–¹å¼ã€‚

### æ ¸å¿ƒè¦ç‚¹

1. **æ¥å£è®¾è®¡**ï¼šCollection æ¥å£å®šä¹‰äº†é›†åˆçš„åŸºæœ¬æ“ä½œï¼ŒåŒ…æ‹¬å¢åˆ æ”¹æŸ¥ã€æ‰¹é‡æ“ä½œã€è¿­ä»£ç­‰
2. **å®ç°ç±»ä¸°å¯Œ**ï¼šListã€Setã€Queue ä¸‰å¤§å­æ¥å£æä¾›äº†ä¸°å¯Œçš„å…·ä½“å®ç°
3. **æ€§èƒ½é€‰æ‹©**ï¼šä¸åŒå®ç°ç±»æœ‰ä¸åŒçš„æ€§èƒ½ç‰¹å¾ï¼Œéœ€è¦æ ¹æ®ä½¿ç”¨åœºæ™¯é€‰æ‹©
4. **ç±»å‹å®‰å…¨**ï¼šæ³›å‹æ”¯æŒç¡®ä¿ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥
5. **è¿­ä»£æ”¯æŒ**ï¼šç»§æ‰¿è‡ª Iterable æ¥å£ï¼Œæ”¯æŒå¤šç§éå†æ–¹å¼

### æœ€ä½³å®è·µ

1. **é€‰æ‹©åˆé€‚çš„å®ç°ç±»**ï¼šæ ¹æ®æ€§èƒ½éœ€æ±‚å’Œä½¿ç”¨åœºæ™¯é€‰æ‹©æœ€åˆé€‚çš„é›†åˆç±»å‹
2. **ä½¿ç”¨æ³›å‹**ï¼šç¡®ä¿ç±»å‹å®‰å…¨å’Œç¼–è¯‘æ—¶æ£€æŸ¥
3. **é¿å…å¸¸è§é™·é˜±**ï¼šæ³¨æ„è¿­ä»£è¿‡ç¨‹ä¸­çš„ä¿®æ”¹ã€åŸå§‹ç±»å‹ä½¿ç”¨ç­‰é—®é¢˜
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šé¢„åˆ†é…å®¹é‡ã€ä½¿ç”¨åˆé€‚çš„éå†æ–¹å¼ã€è€ƒè™‘å¹¶è¡Œå¤„ç†

### åº”ç”¨åœºæ™¯

Collection æ¥å£å¹¿æ³›åº”ç”¨äºæ•°æ®å¤„ç†ã€ç¼“å­˜ç®¡ç†ã€ä¸šåŠ¡é€»è¾‘å®ç°ç­‰åœºæ™¯ï¼Œæ˜¯ Java åº”ç”¨ç¨‹åºå¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„åŸºç¡€ç»„ä»¶ã€‚

é€šè¿‡æ·±å…¥å­¦ä¹ å’Œå®è·µï¼Œå¼€å‘è€…å¯ä»¥å……åˆ†åˆ©ç”¨ Collection æ¥å£çš„å¼ºå¤§åŠŸèƒ½ï¼Œæå‡ä»£ç è´¨é‡å’Œå¼€å‘æ•ˆç‡ã€‚ 