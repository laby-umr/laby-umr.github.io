---
sidebar_position: 2
title: Javaé›†åˆå·¥å…·ç±»è¯¦è§£
description: å…¨é¢ä»‹ç»Javaé›†åˆå·¥å…·ç±»çš„æ ¸å¿ƒåŠŸèƒ½ã€ä½¿ç”¨æ–¹æ³•ä¸æœ€ä½³å®è·µ
authors: [Laby]
last_update:
  date: 2025-08-07
  author: Laby
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Java é›†åˆå·¥å…·ç±»è¯¦è§£

## 1. é›†åˆå·¥å…·ç±»æ¦‚è¿°

Java æä¾›äº†ä¸°å¯Œçš„é›†åˆå·¥å…·ç±»ï¼Œä¸»è¦åŒ…æ‹¬ `Collections` å’Œ `Arrays` å·¥å…·ç±»ï¼Œä»¥åŠ Apache Commons Collections ç­‰ç¬¬ä¸‰æ–¹åº“ã€‚è¿™äº›å·¥å…·ç±»æä¾›äº†å¤§é‡ä¾¿æ·çš„æ–¹æ³•æ¥æ“ä½œé›†åˆï¼Œå¤§å¤§ç®€åŒ–äº†é›†åˆæ“ä½œçš„å¤æ‚åº¦ã€‚

:::tip æ ¸å¿ƒä»·å€¼
**é›†åˆå·¥å…·ç±» = ä¾¿æ·æ“ä½œ + æ€§èƒ½ä¼˜åŒ– + çº¿ç¨‹å®‰å…¨ + ä»£ç å¤ç”¨**

- ğŸ› ï¸ **ä¾¿æ·æ“ä½œ** - æä¾›ä¸°å¯Œçš„æ–¹æ³•ç®€åŒ–å¸¸è§é›†åˆæ“ä½œï¼Œå¦‚æ’åºã€æŸ¥æ‰¾ã€è½¬æ¢ç­‰
- âš¡ **æ€§èƒ½ä¼˜åŒ–** - ç»è¿‡ä¼˜åŒ–çš„ç®—æ³•å®ç°ï¼Œæä¾›é«˜æ•ˆçš„é›†åˆå¤„ç†èƒ½åŠ›
- ğŸ”’ **çº¿ç¨‹å®‰å…¨** - æä¾›çº¿ç¨‹å®‰å…¨çš„é›†åˆåŒ…è£…å’Œæ“ä½œæ–¹æ³•ï¼Œç®€åŒ–å¹¶å‘ç¼–ç¨‹
- ğŸ“¦ **ä»£ç å¤ç”¨** - å‡å°‘é‡å¤ä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡
- ğŸ§© **æ ‡å‡†åŒ–** - æä¾›ç»Ÿä¸€çš„APIæ¥å£ï¼Œä½¿ä»£ç æ›´åŠ ä¸€è‡´å’Œå¯ç»´æŠ¤
:::

### 1.1 ä»€ä¹ˆæ˜¯é›†åˆå·¥å…·ç±»ï¼Ÿ

é›†åˆå·¥å…·ç±»æ˜¯ä¸€ç»„é™æ€æ–¹æ³•çš„é›†åˆï¼Œä¸“é—¨ç”¨äºæ“ä½œ Java é›†åˆæ¡†æ¶ä¸­çš„å„ç§é›†åˆç±»å‹ã€‚å®ƒä»¬æä¾›äº†æ’åºã€æŸ¥æ‰¾ã€åŒæ­¥ã€ä¸å¯å˜é›†åˆåˆ›å»ºç­‰å¸¸ç”¨åŠŸèƒ½ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿæ›´é«˜æ•ˆåœ°å¤„ç†é›†åˆæ•°æ®ã€‚

```mermaid
classDiagram
    class Collections {
        +sort(List) void
        +binarySearch(List, Object) int
        +shuffle(List) void
        +reverse(List) void
        +swap(List, int, int) void
        +fill(List, Object) void
        +max(Collection) T
        +min(Collection) T
        +unmodifiableList(List) List
        +synchronizedList(List) List
        +emptyList() List
        +singleton(T) Set
    }
    
    class Arrays {
        +sort(T[]) void
        +binarySearch(T[], Object) int
        +fill(T[], Object) void
        +copyOf(T[], int) T[]
        +equals(T[], T[]) boolean
        +asList(T...) List
        +stream(T[]) Stream
        +parallelSort(T[]) void
        +spliterator(T[]) Spliterator
    }
    
    class Guava {
        +immutableList(T...) ImmutableList
        +multiset() Multiset
        +biMap() BiMap
        +table() Table
        +partition(List, int) List~List~
        +transform(Collection, Function) Collection
    }
    
    class ApacheCommons {
        +isEmpty(Collection) boolean
        +isNotEmpty(Collection) boolean
        +union(Collection, Collection) Collection
        +intersection(Collection, Collection) Collection
        +subtract(Collection, Collection) Collection
        +filter(Collection, Predicate) Collection
    }
    
    Collections --> "æ“ä½œ" List
    Collections --> "æ“ä½œ" Set
    Collections --> "æ“ä½œ" Map
    
    Arrays --> "æ“ä½œ" Object[]
    Arrays --> "è½¬æ¢" List
    
    Guava --> "æ‰©å±•" Collections
    ApacheCommons --> "æ‰©å±•" Collections
```

#### ä¸»è¦å·¥å…·ç±»åˆ†ç±»

| å·¥å…·ç±» | ä¸»è¦åŠŸèƒ½ | é€‚ç”¨åœºæ™¯ |
|--------|----------|----------|
| **Collections** | é›†åˆæ“ä½œã€æ’åºã€æŸ¥æ‰¾ã€åŒæ­¥ | Listã€Setã€Map ç­‰é›†åˆç±»å‹ |
| **Arrays** | æ•°ç»„æ“ä½œã€æ’åºã€æŸ¥æ‰¾ã€è½¬æ¢ | å„ç§æ•°ç»„ç±»å‹ |
| **Apache Commons** | æ‰©å±•åŠŸèƒ½ã€é›†åˆæ“ä½œ | å¤æ‚ä¸šåŠ¡åœºæ™¯ |
| **Stream API** | å‡½æ•°å¼æ“ä½œã€å¹¶è¡Œå¤„ç† | æ•°æ®æµå¤„ç† |

### 1.2 å·¥å…·ç±»è®¾è®¡åŸåˆ™

```java title="å·¥å…·ç±»è®¾è®¡åŸåˆ™ç¤ºä¾‹"
public class CollectionUtilsDesign {
    
    // 1. é™æ€æ–¹æ³•è®¾è®¡
    public static <T> boolean isEmpty(Collection<T> collection) {
        return collection == null || collection.isEmpty();
    }
    
    // 2. æ³›å‹æ”¯æŒ
    public static <T> List<T> filter(Collection<T> collection, Predicate<T> predicate) {
        return collection.stream()
                        .filter(predicate)
                        .collect(Collectors.toList());
    }
    
    // 3. ç©ºå€¼å®‰å…¨
    public static <T> int safeSize(Collection<T> collection) {
        return collection == null ? 0 : collection.size();
    }
    
    // 4. ä¸å¯å˜é›†åˆ
    public static <T> List<T> immutableList(Collection<T> collection) {
        return Collections.unmodifiableList(new ArrayList<>(collection));
    }
}
```

:::info è®¾è®¡ç‰¹ç‚¹
- **é™æ€æ–¹æ³•**ï¼šæ— éœ€å®ä¾‹åŒ–ï¼Œç›´æ¥è°ƒç”¨
- **æ³›å‹æ”¯æŒ**ï¼šç±»å‹å®‰å…¨ï¼Œç¼–è¯‘æ—¶æ£€æŸ¥
- **ç©ºå€¼å®‰å…¨**ï¼šé¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸
- **ä¸å¯å˜æ€§**ï¼šæä¾›ä¸å¯å˜é›†åˆï¼Œä¿è¯æ•°æ®å®‰å…¨
:::

## 2. Collections å·¥å…·ç±»è¯¦è§£

Collections å·¥å…·ç±»æ˜¯ Java é›†åˆæ¡†æ¶ä¸­æœ€é‡è¦çš„å·¥å…·ç±»ï¼Œæä¾›äº†ä¸°å¯Œçš„é™æ€æ–¹æ³•æ¥æ“ä½œå„ç§é›†åˆç±»å‹ã€‚

```mermaid
graph TD
    A["Collections æ–¹æ³•åˆ†ç±»"] --> B["æ’åºå’ŒæŸ¥æ‰¾"]
    A --> C["ä¿®æ”¹æ“ä½œ"]
    A --> D["é›†åˆåŒ…è£…"]
    A --> E["é›†åˆå·¥å‚"]
    
    B --> B1["sort"]
    B --> B2["binarySearch"]
    B --> B3["shuffle"]
    B --> B4["reverse"]
    B --> B5["min/max"]
    
    C --> C1["copy"]
    C --> C2["fill"]
    C --> C3["swap"]
    C --> C4["rotate"]
    C --> C5["replaceAll"]
    
    D --> D1["unmodifiableXxx"]
    D --> D2["synchronizedXxx"]
    D --> D3["checkedXxx"]
    
    E --> E1["emptyXxx"]
    E --> E2["singletonXxx"]
    E --> E3["nCopies"]
    
    style A fill:#f9f,stroke:#333,stroke-width:2px
    style B,C,D,E fill:#bbf,stroke:#333,stroke-width:1px
```

<Tabs>
<TabItem value="sort" label="æ’åºå’ŒæŸ¥æ‰¾æ“ä½œ">

### 2.1 æ’åºæ“ä½œ

Collections å·¥å…·ç±»æä¾›äº†å¤šç§æ’åºæ–¹æ³•ï¼Œæ”¯æŒè‡ªç„¶æ’åºå’Œè‡ªå®šä¹‰æ’åºï¼š

```java title="åŸºæœ¬æ’åºæ“ä½œç¤ºä¾‹"
public class CollectionsSortExample {
    public static void main(String[] args) {
        // è‡ªç„¶æ’åºï¼ˆè¦æ±‚å…ƒç´ å®ç°Comparableæ¥å£ï¼‰
        List<String> names = Arrays.asList("Alice", "Bob", "Charlie", "David");
        Collections.sort(names);
        System.out.println("è‡ªç„¶æ’åºå: " + names);
        // è¾“å‡º: [Alice, Bob, Charlie, David]
        
        // è‡ªå®šä¹‰æ’åºï¼ˆä½¿ç”¨Comparatorï¼‰
        List<Person> people = Arrays.asList(
            new Person("Alice", 25),
            new Person("Bob", 30),
            new Person("Charlie", 20),
            new Person("David", 28)
        );
        
        // æŒ‰å¹´é¾„æ’åº
        Collections.sort(people, Comparator.comparing(Person::getAge));
        System.out.println("æŒ‰å¹´é¾„æ’åº: " + people);
        
        // æŒ‰å§“åæ’åº
        Collections.sort(people, Comparator.comparing(Person::getName));
        System.out.println("æŒ‰å§“åæ’åº: " + people);
        
        // é€†åºæ’åº
        Collections.sort(names, Collections.reverseOrder());
        System.out.println("é€†åºæ’åº: " + names);
        // è¾“å‡º: [David, Charlie, Bob, Alice]
    }
    
    static class Person {
        private String name;
        private int age;
        
        public Person(String name, int age) {
            this.name = name;
            this.age = age;
        }
        
        public String getName() { return name; }
        public int getAge() { return age; }
        
        @Override
        public String toString() {
            return name + "(" + age + ")";
        }
    }
}
```

#### æ’åºæ–¹æ³•å¯¹æ¯”

| æ–¹æ³• | è¯´æ˜ | æ—¶é—´å¤æ‚åº¦ | é€‚ç”¨åœºæ™¯ |
|------|------|------------|----------|
| `Collections.sort(List)` | è‡ªç„¶æ’åº | O(n log n) | å…ƒç´ å·²å®ç°Comparable |
| `Collections.sort(List, Comparator)` | è‡ªå®šä¹‰æ’åº | O(n log n) | éœ€è¦è‡ªå®šä¹‰æ’åºé€»è¾‘ |
| `Collections.reverseOrder()` | é€†åºæ¯”è¾ƒå™¨ | - | éœ€è¦é€†åºæ’åº |
| `Collections.shuffle(List)` | éšæœºæ‰“ä¹± | O(n) | éœ€è¦éšæœºé¡ºåº |

### 2.2 æŸ¥æ‰¾å’Œæ›¿æ¢æ“ä½œ

Collections å·¥å…·ç±»æä¾›äº†é«˜æ•ˆçš„æŸ¥æ‰¾å’Œæ›¿æ¢æ–¹æ³•ï¼Œç‰¹åˆ«æ˜¯äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ï¼š

```java title="æŸ¥æ‰¾å’Œæ›¿æ¢æ“ä½œç¤ºä¾‹"
public class CollectionsSearchExample {
    public static void main(String[] args) {
        // äºŒåˆ†æŸ¥æ‰¾ï¼ˆè¦æ±‚åˆ—è¡¨å·²æ’åºï¼‰
        List<Integer> numbers = Arrays.asList(1, 3, 5, 7, 9, 11, 13, 15);
        System.out.println("æœ‰åºåˆ—è¡¨: " + numbers);
        
        int target = 7;
        int index = Collections.binarySearch(numbers, target);
        if (index >= 0) {
            System.out.println(target + " çš„ç´¢å¼•: " + index);
        } else {
            System.out.println(target + " æœªæ‰¾åˆ°ï¼Œåº”æ’å…¥ä½ç½®: " + (-index - 1));
        }
        
        // æŸ¥æ‰¾æœ€å¤§æœ€å°å€¼
        Integer max = Collections.max(numbers);
        Integer min = Collections.min(numbers);
        System.out.println("æœ€å¤§å€¼: " + max + ", æœ€å°å€¼: " + min);
        
        // æ›¿æ¢æ‰€æœ‰å…ƒç´ 
        List<String> list = new ArrayList<>(Arrays.asList("a", "b", "a", "c", "a"));
        System.out.println("æ›¿æ¢å‰: " + list);
        Collections.replaceAll(list, "a", "x");
        System.out.println("æ›¿æ¢å: " + list);
        
        // å¡«å……é›†åˆ
        List<String> fillList = new ArrayList<>(Arrays.asList("a", "b", "c"));
        System.out.println("å¡«å……å‰: " + fillList);
        Collections.fill(fillList, "default");
        System.out.println("å¡«å……å: " + fillList);
        
        // æŸ¥æ‰¾å­åˆ—è¡¨ä½ç½®
        List<String> source = Arrays.asList("a", "b", "c", "d", "e", "f");
        List<String> target1 = Arrays.asList("c", "d");
        List<String> target2 = Arrays.asList("x", "y");
        
        int firstIndex = Collections.indexOfSubList(source, target1);
        int lastIndex = Collections.lastIndexOfSubList(source, target1);
        System.out.println("å­åˆ—è¡¨ " + target1 + " é¦–æ¬¡å‡ºç°ä½ç½®: " + firstIndex);
        System.out.println("å­åˆ—è¡¨ " + target1 + " æœ€åå‡ºç°ä½ç½®: " + lastIndex);
        
        int notFound = Collections.indexOfSubList(source, target2);
        System.out.println("å­åˆ—è¡¨ " + target2 + " ä½ç½®: " + notFound);
    }
}
```

#### æŸ¥æ‰¾æ–¹æ³•æ€§èƒ½å¯¹æ¯”

| æ–¹æ³• | æ—¶é—´å¤æ‚åº¦ | å‰ææ¡ä»¶ | é€‚ç”¨åœºæ™¯ |
|------|------------|----------|----------|
| `Collections.binarySearch()` | O(log n) | åˆ—è¡¨å·²æ’åº | æœ‰åºåˆ—è¡¨å¿«é€ŸæŸ¥æ‰¾ |
| `Collections.max()/min()` | O(n) | æ—  | æŸ¥æ‰¾æœ€å¤§æœ€å°å€¼ |
| `Collections.indexOfSubList()` | O(n*m) | æ—  | æŸ¥æ‰¾å­åˆ—è¡¨ä½ç½® |
| `Collections.frequency()` | O(n) | æ—  | ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•° |

</TabItem>
<TabItem value="modify" label="ä¿®æ”¹æ“ä½œ">

### 2.3 é›†åˆä¿®æ”¹æ“ä½œ

Collections å·¥å…·ç±»æä¾›äº†ä¸°å¯Œçš„é›†åˆä¿®æ”¹æ–¹æ³•ï¼ŒåŒ…æ‹¬å…ƒç´ äº¤æ¢ã€æ—‹è½¬ã€æ‰“ä¹±ã€åè½¬ç­‰ï¼š

```java title="é›†åˆä¿®æ”¹æ“ä½œç¤ºä¾‹"
public class CollectionsModifyExample {
    public static void main(String[] args) {
        // äº¤æ¢å…ƒç´ 
        List<String> swapList = new ArrayList<>(Arrays.asList("a", "b", "c", "d"));
        System.out.println("äº¤æ¢å‰: " + swapList);
        Collections.swap(swapList, 0, 2);
        System.out.println("äº¤æ¢å: " + swapList);
        
        // æ—‹è½¬é›†åˆ
        List<String> rotateList = new ArrayList<>(Arrays.asList("a", "b", "c", "d", "e"));
        System.out.println("æ—‹è½¬å‰: " + rotateList);
        
        // å‘å³æ—‹è½¬2ä½
        Collections.rotate(rotateList, 2);
        System.out.println("å‘å³æ—‹è½¬2ä½: " + rotateList);
        
        // å‘å·¦æ—‹è½¬1ä½
        Collections.rotate(rotateList, -1);
        System.out.println("å‘å·¦æ—‹è½¬1ä½: " + rotateList);
        
        // åè½¬åˆ—è¡¨
        List<Integer> reverseList = new ArrayList<>(Arrays.asList(1, 2, 3, 4, 5));
        System.out.println("åè½¬å‰: " + reverseList);
        Collections.reverse(reverseList);
        System.out.println("åè½¬å: " + reverseList);
        
        // å¤åˆ¶é›†åˆ
        List<String> source = Arrays.asList("a", "b", "c");
        List<String> dest = Arrays.asList("x", "y", "z");
        System.out.println("å¤åˆ¶å‰: æº=" + source + ", ç›®æ ‡=" + dest);
        Collections.copy(dest, source);
        System.out.println("å¤åˆ¶å: ç›®æ ‡=" + dest);
        
        // æ›¿æ¢æ‰€æœ‰å…ƒç´ 
        List<String> replaceList = new ArrayList<>(Arrays.asList("a", "b", "a", "c", "a"));
        System.out.println("æ›¿æ¢å‰: " + replaceList);
        Collections.replaceAll(replaceList, "a", "x");
        System.out.println("æ›¿æ¢å: " + replaceList);
    }
}
```

| æ–¹æ³• | åŠŸèƒ½ | æ—¶é—´å¤æ‚åº¦ | ç‰¹ç‚¹ |
|------|------|------------|------|
| `swap(List, int, int)` | äº¤æ¢ä¸¤ä¸ªä½ç½®çš„å…ƒç´  | O(1) | åŸåœ°ä¿®æ”¹ |
| `rotate(List, int)` | å°†åˆ—è¡¨æ—‹è½¬æŒ‡å®šè·ç¦» | O(n) | æ­£æ•°å³ç§»ï¼Œè´Ÿæ•°å·¦ç§» |
| `reverse(List)` | åè½¬åˆ—è¡¨ | O(n) | åŸåœ°ä¿®æ”¹ |
| `shuffle(List)` | éšæœºæ‰“ä¹±åˆ—è¡¨ | O(n) | ä½¿ç”¨é»˜è®¤éšæœºæº |
| `copy(List dest, List src)` | å¤åˆ¶åˆ—è¡¨ | O(n) | ç›®æ ‡å¿…é¡»è¶³å¤Ÿå¤§ |
| `fill(List, Object)` | ç”¨æŒ‡å®šå…ƒç´ å¡«å……åˆ—è¡¨ | O(n) | è¦†ç›–æ‰€æœ‰å…ƒç´  |
| `replaceAll(List, old, new)` | æ›¿æ¢æ‰€æœ‰æŒ‡å®šå…ƒç´  | O(n) | æ›¿æ¢å…¨éƒ¨åŒ¹é…é¡¹ |

</TabItem>
<TabItem value="wrapper" label="é›†åˆåŒ…è£…">

### 2.3 åŒæ­¥å’Œä¸å¯å˜é›†åˆ

Collections å·¥å…·ç±»æä¾›äº†åˆ›å»ºçº¿ç¨‹å®‰å…¨é›†åˆå’Œä¸å¯å˜é›†åˆçš„æ–¹æ³•ï¼Œç¡®ä¿åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„æ•°æ®å®‰å…¨ï¼š

```java title="åŒæ­¥å’Œä¸å¯å˜é›†åˆç¤ºä¾‹"
public class CollectionsThreadSafetyExample {
    public static void main(String[] args) {
        // åˆ›å»ºåŒæ­¥é›†åˆï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰
        List<String> syncList = Collections.synchronizedList(new ArrayList<>());
        Set<String> syncSet = Collections.synchronizedSet(new HashSet<>());
        Map<String, String> syncMap = Collections.synchronizedMap(new HashMap<>());
        
        // å¤šçº¿ç¨‹å®‰å…¨æ“ä½œ
        Runnable addTask = () -> {
            for (int i = 0; i < 100; i++) {
                syncList.add("Thread-" + Thread.currentThread().getId() + "-" + i);
            }
        };
        
        Thread thread1 = new Thread(addTask);
        Thread thread2 = new Thread(addTask);
        
        thread1.start();
        thread2.start();
        
        try {
            thread1.join();
            thread2.join();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        
        System.out.println("åŒæ­¥é›†åˆæœ€ç»ˆå¤§å°: " + syncList.size());
        
        // åˆ›å»ºä¸å¯å˜é›†åˆ
        List<String> immutableList = Collections.unmodifiableList(Arrays.asList("a", "b", "c"));
        Set<String> immutableSet = Collections.unmodifiableSet(new HashSet<>(Arrays.asList("x", "y", "z")));
        Map<String, String> immutableMap = Collections.unmodifiableMap(Map.of("key1", "value1", "key2", "value2"));
        
        System.out.println("ä¸å¯å˜é›†åˆ: " + immutableList);
        System.out.println("ä¸å¯å˜Set: " + immutableSet);
        System.out.println("ä¸å¯å˜Map: " + immutableMap);
        
        // å°è¯•ä¿®æ”¹ä¸å¯å˜é›†åˆä¼šæŠ›å‡ºå¼‚å¸¸
        try {
            immutableList.add("d"); // æŠ›å‡ºUnsupportedOperationException
        } catch (UnsupportedOperationException e) {
            System.out.println("ä¸èƒ½ä¿®æ”¹ä¸å¯å˜é›†åˆ: " + e.getMessage());
        }
        
        // åˆ›å»ºå•å…ƒç´ é›†åˆ
        List<String> singletonList = Collections.singletonList("single");
        Set<String> singletonSet = Collections.singleton("single");
        Map<String, String> singletonMap = Collections.singletonMap("key", "value");
        
        System.out.println("å•å…ƒç´ List: " + singletonList);
        System.out.println("å•å…ƒç´ Set: " + singletonSet);
        System.out.println("å•å…ƒç´ Map: " + singletonMap);
    }
}
```

#### çº¿ç¨‹å®‰å…¨é›†åˆå¯¹æ¯”

| ç±»å‹ | åŒæ­¥æ–¹å¼ | æ€§èƒ½å½±å“ | é€‚ç”¨åœºæ™¯ |
|------|----------|----------|----------|
| `Collections.synchronizedXXX()` | æ–¹æ³•çº§åŒæ­¥ | ä¸­ç­‰ | ç®€å•åŒæ­¥éœ€æ±‚ |
| `ConcurrentHashMap` | åˆ†æ®µé” | ä½ | é«˜å¹¶å‘è¯»å¤šå†™å°‘ |
| `CopyOnWriteArrayList` | å†™æ—¶å¤åˆ¶ | é«˜ | è¯»å¤šå†™å°‘åœºæ™¯ |
| `Collections.unmodifiableXXX()` | ä¸å¯å˜ | æ—  | åªè¯»æ•°æ® |

### 2.4 é›†åˆæ“ä½œ

Collections å·¥å…·ç±»æä¾›äº†ä¸°å¯Œçš„é›†åˆæ“ä½œæ–¹æ³•ï¼ŒåŒ…æ‹¬å…ƒç´ äº¤æ¢ã€æ—‹è½¬ã€æ‰“ä¹±ã€åè½¬ç­‰ï¼š

```java title="é›†åˆæ“ä½œç¤ºä¾‹"
public class CollectionsOperationsExample {
    public static void main(String[] args) {
        // äº¤æ¢å…ƒç´ 
        List<String> swapList = new ArrayList<>(Arrays.asList("a", "b", "c", "d"));
        System.out.println("äº¤æ¢å‰: " + swapList);
        Collections.swap(swapList, 0, 2);
        System.out.println("äº¤æ¢å: " + swapList);
        
        // æ—‹è½¬é›†åˆ
        List<String> rotateList = new ArrayList<>(Arrays.asList("a", "b", "c", "d", "e"));
        System.out.println("æ—‹è½¬å‰: " + rotateList);
        
        // å‘å³æ—‹è½¬2ä½
        Collections.rotate(rotateList, 2);
        System.out.println("å‘å³æ—‹è½¬2ä½: " + rotateList);
        
        // å‘å·¦æ—‹è½¬1ä½
        Collections.rotate(rotateList, -1);
        System.out.println("å‘å·¦æ—‹è½¬1ä½: " + rotateList);
        
        // éšæœºæ‰“ä¹±
        List<String> shuffleList = new ArrayList<>(Arrays.asList("a", "b", "c", "d", "e"));
        System.out.println("æ‰“ä¹±å‰: " + shuffleList);
        
        // ä½¿ç”¨å›ºå®šç§å­ç¡®ä¿å¯é‡å¤ç»“æœ
        Collections.shuffle(shuffleList, new Random(42));
        System.out.println("æ‰“ä¹±å: " + shuffleList);
        
        // åè½¬é›†åˆ
        List<String> reverseList = new ArrayList<>(Arrays.asList("a", "b", "c", "d"));
        System.out.println("åè½¬å‰: " + reverseList);
        Collections.reverse(reverseList);
        System.out.println("åè½¬å: " + reverseList);
        
        // é›†åˆæ“ä½œç»„åˆä½¿ç”¨
        List<Integer> numbers = new ArrayList<>(Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8));
        System.out.println("åŸå§‹é›†åˆ: " + numbers);
        
        // å…ˆæ’åºï¼Œå†åè½¬ï¼Œæœ€åéšæœºæ‰“ä¹±
        Collections.sort(numbers);
        System.out.println("æ’åºå: " + numbers);
        
        Collections.reverse(numbers);
        System.out.println("åè½¬å: " + numbers);
        
        Collections.shuffle(numbers);
        System.out.println("æ‰“ä¹±å: " + numbers);
    }
}
```

#### é›†åˆæ“ä½œæ–¹æ³•å¯¹æ¯”

| æ–¹æ³• | åŠŸèƒ½ | æ—¶é—´å¤æ‚åº¦ | é€‚ç”¨åœºæ™¯ |
|------|------|------------|----------|
| `Collections.swap()` | äº¤æ¢ä¸¤ä¸ªå…ƒç´  | O(1) | éœ€è¦äº¤æ¢ç‰¹å®šä½ç½®å…ƒç´  |
| `Collections.rotate()` | æ—‹è½¬é›†åˆ | O(n) | å¾ªç¯ç§»ä½æ“ä½œ |
| `Collections.shuffle()` | éšæœºæ‰“ä¹± | O(n) | éœ€è¦éšæœºé¡ºåº |
| `Collections.reverse()` | åè½¬é›†åˆ | O(n) | éœ€è¦é€†åºæ’åˆ— |

### 2.5 é¢‘ç‡ç»Ÿè®¡å’Œé›†åˆå…³ç³»

Collections å·¥å…·ç±»æä¾›äº†ç»Ÿè®¡å…ƒç´ é¢‘ç‡å’Œæ£€æŸ¥é›†åˆå…³ç³»çš„æ–¹æ³•ï¼š

```java title="é¢‘ç‡ç»Ÿè®¡å’Œé›†åˆå…³ç³»ç¤ºä¾‹"
public class CollectionsStatisticsExample {
    public static void main(String[] args) {
        // ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°
        List<String> freqList = Arrays.asList("a", "b", "a", "c", "a", "b", "d", "a");
        System.out.println("åŸå§‹åˆ—è¡¨: " + freqList);
        
        int aCount = Collections.frequency(freqList, "a");
        int bCount = Collections.frequency(freqList, "b");
        int cCount = Collections.frequency(freqList, "c");
        int dCount = Collections.frequency(freqList, "d");
        int xCount = Collections.frequency(freqList, "x");
        
        System.out.println("aå‡ºç°æ¬¡æ•°: " + aCount);
        System.out.println("bå‡ºç°æ¬¡æ•°: " + bCount);
        System.out.println("cå‡ºç°æ¬¡æ•°: " + cCount);
        System.out.println("då‡ºç°æ¬¡æ•°: " + dCount);
        System.out.println("xå‡ºç°æ¬¡æ•°: " + xCount);
        
        // æ£€æŸ¥ä¸¤ä¸ªé›†åˆæ˜¯å¦æœ‰å…±åŒå…ƒç´ 
        List<String> list1 = Arrays.asList("a", "b", "c", "d");
        List<String> list2 = Arrays.asList("b", "c", "d", "e");
        List<String> list3 = Arrays.asList("x", "y", "z");
        
        boolean hasCommon1 = !Collections.disjoint(list1, list2);
        boolean hasCommon2 = !Collections.disjoint(list1, list3);
        
        System.out.println("list1å’Œlist2æœ‰å…±åŒå…ƒç´ : " + hasCommon1);
        System.out.println("list1å’Œlist3æœ‰å…±åŒå…ƒç´ : " + hasCommon2);
        
        // ç»Ÿè®¡æ‰€æœ‰å…ƒç´ çš„é¢‘ç‡
        Map<String, Long> frequencyMap = freqList.stream()
            .collect(Collectors.groupingBy(
                Function.identity(),
                Collectors.counting()
            ));
        
        System.out.println("å…ƒç´ é¢‘ç‡ç»Ÿè®¡: " + frequencyMap);
        
        // æ‰¾å‡ºå‡ºç°æ¬¡æ•°æœ€å¤šçš„å…ƒç´ 
        String mostFrequent = frequencyMap.entrySet().stream()
            .max(Map.Entry.comparingByValue())
            .map(Map.Entry::getKey)
            .orElse("æ— ");
        
        System.out.println("å‡ºç°æ¬¡æ•°æœ€å¤šçš„å…ƒç´ : " + mostFrequent);
        
        // æ£€æŸ¥é›†åˆåŒ…å«å…³ç³»
        List<String> subset = Arrays.asList("a", "b");
        boolean containsAll = freqList.containsAll(subset);
        System.out.println("freqListåŒ…å«subsetçš„æ‰€æœ‰å…ƒç´ : " + containsAll);
    }
}
```

#### ç»Ÿè®¡æ–¹æ³•åŠŸèƒ½å¯¹æ¯”

| æ–¹æ³• | åŠŸèƒ½ | è¿”å›å€¼ | é€‚ç”¨åœºæ™¯ |
|------|------|--------|----------|
| `Collections.frequency()` | ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•° | int | éœ€è¦çŸ¥é“ç‰¹å®šå…ƒç´ å‡ºç°æ¬¡æ•° |
| `Collections.disjoint()` | æ£€æŸ¥é›†åˆæ˜¯å¦æ— äº¤é›† | boolean | æ£€æŸ¥ä¸¤ä¸ªé›†åˆæ˜¯å¦å®Œå…¨ç‹¬ç«‹ |
| `Collection.containsAll()` | æ£€æŸ¥åŒ…å«å…³ç³» | boolean | æ£€æŸ¥ä¸€ä¸ªé›†åˆæ˜¯å¦åŒ…å«å¦ä¸€ä¸ªé›†åˆçš„æ‰€æœ‰å…ƒç´  |

</TabItem>
</Tabs>

## 3. Arrays å·¥å…·ç±»è¯¦è§£

Arrays å·¥å…·ç±»æ˜¯ Java ä¸­ä¸“é—¨ç”¨äºæ“ä½œæ•°ç»„çš„å·¥å…·ç±»ï¼Œæä¾›äº†æ’åºã€æŸ¥æ‰¾ã€æ¯”è¾ƒã€å¡«å……ç­‰å¸¸ç”¨åŠŸèƒ½ã€‚

```mermaid
graph TD
    A["Arrays æ–¹æ³•åˆ†ç±»"] --> B["æ’åºç›¸å…³"]
    A --> C["æŸ¥æ‰¾ç›¸å…³"]
    A --> D["æ•°ç»„è½¬æ¢"]
    A --> E["æ•°ç»„æ“ä½œ"]
    
    B --> B1["sort"]
    B --> B2["parallelSort"]
    
    C --> C1["binarySearch"]
    C --> C2["equals/deepEquals"]
    
    D --> D1["asList"]
    D --> D2["copyOf"]
    D --> D3["stream"]
    
    E --> E1["fill"]
    E --> E2["copyOfRange"]
    E --> E3["toString/deepToString"]
    
    style A fill:#f9f,stroke:#333,stroke-width:2px
    style B,C,D,E fill:#bbf,stroke:#333,stroke-width:1px
```

### 3.1 æ•°ç»„æ’åºå’ŒæŸ¥æ‰¾

Arrays å·¥å…·ç±»æä¾›äº†é«˜æ•ˆçš„æ•°ç»„æ’åºå’ŒæŸ¥æ‰¾æ–¹æ³•ï¼š

```java title="æ•°ç»„æ’åºå’ŒæŸ¥æ‰¾ç¤ºä¾‹"
public class ArraysSortExample {
    public static void main(String[] args) {
        // åŸºæœ¬ç±»å‹æ•°ç»„æ’åº
        int[] numbers = {3, 1, 4, 1, 5, 9, 2, 6, 5, 3, 5};
        System.out.println("åŸå§‹æ•°ç»„: " + Arrays.toString(numbers));
        
        // å®Œæ•´æ’åº
        Arrays.sort(numbers);
        System.out.println("æ’åºå: " + Arrays.toString(numbers));
        
        // éƒ¨åˆ†æ’åºï¼ˆåªæ’åºç´¢å¼•2åˆ°7çš„å…ƒç´ ï¼‰
        int[] partialSort = {3, 1, 4, 1, 5, 9, 2, 6, 5, 3, 5};
        System.out.println("éƒ¨åˆ†æ’åºå‰: " + Arrays.toString(partialSort));
        Arrays.sort(partialSort, 2, 8);
        System.out.println("éƒ¨åˆ†æ’åºå: " + Arrays.toString(partialSort));
        
        // äºŒåˆ†æŸ¥æ‰¾ï¼ˆè¦æ±‚æ•°ç»„å·²æ’åºï¼‰
        int target = 5;
        int index = Arrays.binarySearch(numbers, target);
        if (index >= 0) {
            System.out.println(target + " çš„ç´¢å¼•: " + index);
        } else {
            System.out.println(target + " æœªæ‰¾åˆ°ï¼Œåº”æ’å…¥ä½ç½®: " + (-index - 1));
        }
        
        // æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…çš„å…ƒç´ 
        List<Integer> indices = new ArrayList<>();
        for (int i = 0; i < numbers.length; i++) {
            if (numbers[i] == target) {
                indices.add(i);
            }
        }
        System.out.println(target + " çš„æ‰€æœ‰ç´¢å¼•: " + indices);
        
        // å¯¹è±¡æ•°ç»„æ’åº
        String[] names = {"Charlie", "Alice", "Bob", "David", "Eve"};
        System.out.println("åŸå§‹å­—ç¬¦ä¸²æ•°ç»„: " + Arrays.toString(names));
        
        // è‡ªç„¶æ’åº
        Arrays.sort(names);
        System.out.println("è‡ªç„¶æ’åºå: " + Arrays.toString(names));
        
        // è‡ªå®šä¹‰æ’åºï¼ˆæŒ‰é•¿åº¦ï¼‰
        Arrays.sort(names, Comparator.comparing(String::length));
        System.out.println("æŒ‰é•¿åº¦æ’åºå: " + Arrays.toString(names));
        
        // å¹¶è¡Œæ’åºï¼ˆå¤§æ•°æ®é‡ï¼‰
        int[] largeArray = new int[100000];
        Random random = new Random(42);
        for (int i = 0; i < largeArray.length; i++) {
            largeArray[i] = random.nextInt(10000);
        }
        
        long startTime = System.currentTimeMillis();
        Arrays.sort(largeArray);
        long endTime = System.currentTimeMillis();
        System.out.println("æ™®é€šæ’åºè€—æ—¶: " + (endTime - startTime) + "ms");
        
        // é‡ç½®æ•°ç»„
        for (int i = 0; i < largeArray.length; i++) {
            largeArray[i] = random.nextInt(10000);
        }
        
        startTime = System.currentTimeMillis();
        Arrays.parallelSort(largeArray);
        endTime = System.currentTimeMillis();
        System.out.println("å¹¶è¡Œæ’åºè€—æ—¶: " + (endTime - startTime) + "ms");
    }
}
```

#### æ’åºæ–¹æ³•æ€§èƒ½å¯¹æ¯”

| æ–¹æ³• | é€‚ç”¨ç±»å‹ | æ—¶é—´å¤æ‚åº¦ | é€‚ç”¨åœºæ™¯ |
|------|----------|------------|----------|
| `Arrays.sort()` | åŸºæœ¬ç±»å‹ã€å¯¹è±¡æ•°ç»„ | O(n log n) | ä¸€èˆ¬æ’åºéœ€æ±‚ |
| `Arrays.parallelSort()` | åŸºæœ¬ç±»å‹ã€å¯¹è±¡æ•°ç»„ | O(n log n) | å¤§æ•°æ®é‡æ’åº |
| `Arrays.sort(array, from, to)` | åŸºæœ¬ç±»å‹ã€å¯¹è±¡æ•°ç»„ | O(n log n) | éƒ¨åˆ†æ’åº |
| `Arrays.sort(array, comparator)` | å¯¹è±¡æ•°ç»„ | O(n log n) | è‡ªå®šä¹‰æ’åº |

### 3.2 æ•°ç»„æ¯”è¾ƒå’Œå¡«å……

Arrays å·¥å…·ç±»æä¾›äº†æ•°ç»„æ¯”è¾ƒå’Œå¡«å……çš„ä¾¿æ·æ–¹æ³•ï¼š

```java title="æ•°ç»„æ¯”è¾ƒå’Œå¡«å……ç¤ºä¾‹"
public class ArraysComparisonExample {
    public static void main(String[] args) {
        // ä¸€ç»´æ•°ç»„æ¯”è¾ƒ
        int[] arr1 = {1, 2, 3, 4, 5};
        int[] arr2 = {1, 2, 3, 4, 5};
        int[] arr3 = {1, 2, 3, 4, 6};
        
        System.out.println("arr1: " + Arrays.toString(arr1));
        System.out.println("arr2: " + Arrays.toString(arr2));
        System.out.println("arr3: " + Arrays.toString(arr3));
        
        boolean equals1 = Arrays.equals(arr1, arr2);
        boolean equals2 = Arrays.equals(arr1, arr3);
        
        System.out.println("arr1 equals arr2: " + equals1);
        System.out.println("arr1 equals arr3: " + equals2);
        
        // å¤šç»´æ•°ç»„æ·±åº¦æ¯”è¾ƒ
        int[][] matrix1 = {{1, 2, 3}, {4, 5, 6}, {7, 8, 9}};
        int[][] matrix2 = {{1, 2, 3}, {4, 5, 6}, {7, 8, 9}};
        int[][] matrix3 = {{1, 2, 3}, {4, 5, 6}, {7, 8, 0}};
        
        System.out.println("matrix1: " + Arrays.deepToString(matrix1));
        System.out.println("matrix2: " + Arrays.deepToString(matrix2));
        System.out.println("matrix3: " + Arrays.deepToString(matrix3));
        
        boolean deepEquals1 = Arrays.deepEquals(matrix1, matrix2);
        boolean deepEquals2 = Arrays.deepEquals(matrix1, matrix3);
        
        System.out.println("matrix1 deepEquals matrix2: " + deepEquals1);
        System.out.println("matrix1 deepEquals matrix3: " + deepEquals2);
        
        // æ•°ç»„å¡«å……
        int[] fillArray = new int[8];
        System.out.println("å¡«å……å‰: " + Arrays.toString(fillArray));
        
        // å…¨éƒ¨å¡«å……
        Arrays.fill(fillArray, 42);
        System.out.println("å…¨éƒ¨å¡«å……42å: " + Arrays.toString(fillArray));
        
        // éƒ¨åˆ†å¡«å……
        Arrays.fill(fillArray, 2, 6, 100);
        System.out.println("ç´¢å¼•2-5å¡«å……100å: " + Arrays.toString(fillArray));
        
        // é‡ç½®æ•°ç»„
        Arrays.fill(fillArray, 0);
        System.out.println("é‡ç½®ä¸º0å: " + Arrays.toString(fillArray));
        
        // å¯¹è±¡æ•°ç»„å¡«å……
        String[] stringArray = new String[5];
        System.out.println("å­—ç¬¦ä¸²æ•°ç»„å¡«å……å‰: " + Arrays.toString(stringArray));
        
        Arrays.fill(stringArray, "default");
        System.out.println("å¡«å……defaultå: " + Arrays.toString(stringArray));
        
        // éƒ¨åˆ†å¡«å……å­—ç¬¦ä¸²
        Arrays.fill(stringArray, 1, 4, "custom");
        System.out.println("ç´¢å¼•1-3å¡«å……customå: " + Arrays.toString(stringArray));
        
        // æ•°ç»„å¤åˆ¶å’Œæ¯”è¾ƒ
        int[] original = {1, 2, 3, 4, 5};
        int[] copy1 = Arrays.copyOf(original, 3);  // å¤åˆ¶å‰3ä¸ªå…ƒç´ 
        int[] copy2 = Arrays.copyOf(original, 7);  // å¤åˆ¶å¹¶æ‰©å±•é•¿åº¦
        int[] copy3 = Arrays.copyOfRange(original, 1, 4); // å¤åˆ¶æŒ‡å®šèŒƒå›´
        
        System.out.println("åŸå§‹æ•°ç»„: " + Arrays.toString(original));
        System.out.println("å¤åˆ¶å‰3ä¸ª: " + Arrays.toString(copy1));
        System.out.println("å¤åˆ¶å¹¶æ‰©å±•: " + Arrays.toString(copy2));
        System.out.println("å¤åˆ¶èŒƒå›´1-3: " + Arrays.toString(copy3));
        
        // æ¯”è¾ƒä¸åŒé•¿åº¦çš„æ•°ç»„
        boolean equalsLength = Arrays.equals(original, copy1);
        System.out.println("original equals copy1: " + equalsLength);
    }
}
```

#### æ¯”è¾ƒå’Œå¡«å……æ–¹æ³•å¯¹æ¯”

| æ–¹æ³• | åŠŸèƒ½ | é€‚ç”¨åœºæ™¯ | æ³¨æ„äº‹é¡¹ |
|------|------|----------|----------|
| `Arrays.equals()` | ä¸€ç»´æ•°ç»„æ¯”è¾ƒ | ç®€å•æ•°ç»„æ¯”è¾ƒ | åªæ¯”è¾ƒå¼•ç”¨å’Œå†…å®¹ï¼Œä¸æ¯”è¾ƒé•¿åº¦ |
| `Arrays.deepEquals()` | å¤šç»´æ•°ç»„æ¯”è¾ƒ | åµŒå¥—æ•°ç»„æ¯”è¾ƒ | é€’å½’æ¯”è¾ƒæ‰€æœ‰å±‚çº§ |
| `Arrays.fill()` | æ•°ç»„å¡«å…… | åˆå§‹åŒ–æˆ–é‡ç½®æ•°ç»„ | æ”¯æŒéƒ¨åˆ†å¡«å…… |
| `Arrays.copyOf()` | æ•°ç»„å¤åˆ¶ | åˆ›å»ºæ•°ç»„å‰¯æœ¬ | å¯ä»¥æ”¹å˜æ•°ç»„é•¿åº¦ |

### 3.3 æ•°ç»„è½¬æ¢

Arrays å·¥å…·ç±»æä¾›äº†ä¸°å¯Œçš„æ•°ç»„è½¬æ¢æ–¹æ³•ï¼Œæ”¯æŒæ•°ç»„ä¸é›†åˆã€æµä¹‹é—´çš„è½¬æ¢ï¼š

```java title="æ•°ç»„è½¬æ¢ç¤ºä¾‹"
public class ArraysConversionExample {
    public static void main(String[] args) {
        // åŸºæœ¬ç±»å‹æ•°ç»„è½¬List
        int[] intArray = {1, 2, 3, 4, 5};
        System.out.println("åŸå§‹intæ•°ç»„: " + Arrays.toString(intArray));
        
        // åŸºæœ¬ç±»å‹æ•°ç»„è½¬Stream
        IntStream intStream = Arrays.stream(intArray);
        List<Integer> intList = intStream.boxed().collect(Collectors.toList());
        System.out.println("è½¬æ¢ä¸ºList: " + intList);
        
        // å¯¹è±¡æ•°ç»„è½¬List
        String[] stringArray = {"Alice", "Bob", "Charlie", "David"};
        System.out.println("åŸå§‹å­—ç¬¦ä¸²æ•°ç»„: " + Arrays.toString(stringArray));
        
        // ä½¿ç”¨Arrays.asListè½¬æ¢
        List<String> stringList = Arrays.asList(stringArray);
        System.out.println("Arrays.asListç»“æœ: " + stringList);
        
        // æ³¨æ„ï¼šArrays.asListè¿”å›çš„Listæ˜¯å›ºå®šå¤§å°çš„
        try {
            stringList.add("Eve"); // æŠ›å‡ºUnsupportedOperationException
        } catch (UnsupportedOperationException e) {
            System.out.println("ä¸èƒ½ä¿®æ”¹å›ºå®šå¤§å°çš„List: " + e.getMessage());
        }
        
        // åˆ›å»ºå¯ä¿®æ”¹çš„List
        List<String> modifiableList = new ArrayList<>(Arrays.asList(stringArray));
        modifiableList.add("Eve");
        System.out.println("å¯ä¿®æ”¹çš„List: " + modifiableList);
        
        // ä½¿ç”¨Stream APIè½¬æ¢
        List<String> streamList = Arrays.stream(stringArray)
            .filter(s -> s.length() > 4)
            .map(String::toUpperCase)
            .collect(Collectors.toList());
        System.out.println("Streamè½¬æ¢ç»“æœ: " + streamList);
        
        // å¤šç»´æ•°ç»„è½¬æ¢
        int[][] matrix = {{1, 2, 3}, {4, 5, 6}, {7, 8, 9}};
        System.out.println("åŸå§‹çŸ©é˜µ: " + Arrays.deepToString(matrix));
        
        // å¤šç»´æ•°ç»„è½¬Stream
        List<Integer> flatList = Arrays.stream(matrix)
            .flatMapToInt(Arrays::stream)
            .boxed()
            .collect(Collectors.toList());
        System.out.println("å±•å¹³åçš„List: " + flatList);
        
        // æ•°ç»„è½¬Setï¼ˆå»é‡ï¼‰
        int[] duplicateArray = {1, 2, 2, 3, 3, 3, 4, 4, 4, 4};
        Set<Integer> uniqueSet = Arrays.stream(duplicateArray)
            .boxed()
            .collect(Collectors.toSet());
        System.out.println("å»é‡åçš„Set: " + uniqueSet);
        
        // æ•°ç»„è½¬Map
        String[] keys = {"name", "age", "city"};
        Object[] values = {"Alice", 25, "New York"};
        
        Map<String, Object> map = new HashMap<>();
        for (int i = 0; i < keys.length; i++) {
            map.put(keys[i], values[i]);
        }
        System.out.println("è½¬æ¢åçš„Map: " + map);
        
        // ä½¿ç”¨Stream APIåˆ›å»ºMap
        Map<String, Object> streamMap = IntStream.range(0, keys.length)
            .boxed()
            .collect(Collectors.toMap(
                i -> keys[i],
                i -> values[i]
            ));
        System.out.println("Streamåˆ›å»ºçš„Map: " + streamMap);
    }
}
```

#### è½¬æ¢æ–¹æ³•å¯¹æ¯”

| æ–¹æ³• | åŠŸèƒ½ | è¿”å›å€¼ç±»å‹ | æ³¨æ„äº‹é¡¹ |
|------|------|------------|----------|
| `Arrays.asList()` | æ•°ç»„è½¬List | å›ºå®šå¤§å°List | ä¸èƒ½æ·»åŠ /åˆ é™¤å…ƒç´  |
| `Arrays.stream()` | æ•°ç»„è½¬Stream | Stream | æ”¯æŒå‡½æ•°å¼æ“ä½œ |
| `new ArrayList<>(Arrays.asList())` | æ•°ç»„è½¬å¯å˜List | å¯å˜List | å¯ä»¥ä¿®æ”¹ |
| `Arrays.stream().boxed()` | åŸºæœ¬ç±»å‹è½¬åŒ…è£…ç±»å‹ | Stream&lt;åŒ…è£…ç±»å‹&gt; | è‡ªåŠ¨è£…ç®± |

## 4. å®ç”¨å·¥å…·æ–¹æ³•

åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åˆ›å»ºä¸€äº›é€šç”¨çš„å·¥å…·æ–¹æ³•æ¥ç®€åŒ–é›†åˆæ“ä½œã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„å®ç”¨å·¥å…·æ–¹æ³•ï¼š

### 4.1 é›†åˆåˆ¤ç©ºå’Œnullæ£€æŸ¥

```java title="é›†åˆåˆ¤ç©ºå’Œnullæ£€æŸ¥å·¥å…·ç±»"
public class CollectionUtils {
    
    /**
     * æ£€æŸ¥é›†åˆæ˜¯å¦ä¸ºç©º
     * @param collection è¦æ£€æŸ¥çš„é›†åˆ
     * @return trueå¦‚æœé›†åˆä¸ºnullæˆ–ç©ºï¼Œå¦åˆ™false
     */
    public static boolean isEmpty(Collection<?> collection) {
        return collection == null || collection.isEmpty();
    }
    
    /**
     * æ£€æŸ¥é›†åˆæ˜¯å¦ä¸ä¸ºç©º
     * @param collection è¦æ£€æŸ¥çš„é›†åˆ
     * @return trueå¦‚æœé›†åˆä¸ä¸ºnullä¸”ä¸ä¸ºç©ºï¼Œå¦åˆ™false
     */
    public static boolean isNotEmpty(Collection<?> collection) {
        return !isEmpty(collection);
    }
    
    /**
     * å®‰å…¨è·å–é›†åˆå¤§å°
     * @param collection è¦æ£€æŸ¥çš„é›†åˆ
     * @return é›†åˆå¤§å°ï¼Œå¦‚æœä¸ºnullåˆ™è¿”å›0
     */
    public static int size(Collection<?> collection) {
        return collection == null ? 0 : collection.size();
    }
    
    /**
     * æ£€æŸ¥Mapæ˜¯å¦ä¸ºç©º
     * @param map è¦æ£€æŸ¥çš„Map
     * @return trueå¦‚æœMapä¸ºnullæˆ–ç©ºï¼Œå¦åˆ™false
     */
    public static boolean isEmpty(Map<?, ?> map) {
        return map == null || map.isEmpty();
    }
    
    /**
     * æ£€æŸ¥Mapæ˜¯å¦ä¸ä¸ºç©º
     * @param map è¦æ£€æŸ¥çš„Map
     * @return trueå¦‚æœMapä¸ä¸ºnullä¸”ä¸ä¸ºç©ºï¼Œå¦åˆ™false
     */
    public static boolean isNotEmpty(Map<?, ?> map) {
        return !isEmpty(map);
    }
    
    /**
     * åˆ›å»ºç©ºé›†åˆ
     * @return ä¸å¯å˜çš„ç©ºList
     */
    public static <T> List<T> emptyList() {
        return Collections.emptyList();
    }
    
    /**
     * åˆ›å»ºç©ºSet
     * @return ä¸å¯å˜çš„ç©ºSet
     */
    public static <T> Set<T> emptySet() {
        return Collections.emptySet();
    }
    
    /**
     * åˆ›å»ºç©ºMap
     * @return ä¸å¯å˜çš„ç©ºMap
     */
    public static <K, V> Map<K, V> emptyMap() {
        return Collections.emptyMap();
    }
    
    /**
     * æ£€æŸ¥æ•°ç»„æ˜¯å¦ä¸ºç©º
     * @param array è¦æ£€æŸ¥çš„æ•°ç»„
     * @return trueå¦‚æœæ•°ç»„ä¸ºnullæˆ–é•¿åº¦ä¸º0ï¼Œå¦åˆ™false
     */
    public static boolean isEmpty(Object[] array) {
        return array == null || array.length == 0;
    }
    
    /**
     * æ£€æŸ¥æ•°ç»„æ˜¯å¦ä¸ä¸ºç©º
     * @param array è¦æ£€æŸ¥çš„æ•°ç»„
     * @return trueå¦‚æœæ•°ç»„ä¸ä¸ºnullä¸”é•¿åº¦å¤§äº0ï¼Œå¦åˆ™false
     */
    public static boolean isNotEmpty(Object[] array) {
        return !isEmpty(array);
    }
}
```

#### åˆ¤ç©ºæ–¹æ³•å¯¹æ¯”

| æ–¹æ³• | åŠŸèƒ½ | è¿”å›å€¼ | é€‚ç”¨åœºæ™¯ |
|------|------|--------|----------|
| `isEmpty()` | æ£€æŸ¥é›†åˆ/Map/æ•°ç»„æ˜¯å¦ä¸ºç©º | boolean | éœ€è¦åˆ¤æ–­é›†åˆçŠ¶æ€ |
| `isNotEmpty()` | æ£€æŸ¥é›†åˆ/Map/æ•°ç»„æ˜¯å¦ä¸ä¸ºç©º | boolean | éœ€è¦åˆ¤æ–­é›†åˆçŠ¶æ€ |
| `size()` | å®‰å…¨è·å–é›†åˆå¤§å° | int | éœ€è¦è·å–é›†åˆå¤§å° |
| `emptyXXX()` | åˆ›å»ºç©ºé›†åˆ | ä¸å¯å˜é›†åˆ | ä½œä¸ºé»˜è®¤è¿”å›å€¼ |

### 4.2 é›†åˆè½¬æ¢å·¥å…·

é›†åˆè½¬æ¢å·¥å…·ç±»æä¾›äº†å„ç§é›†åˆç±»å‹ä¹‹é—´çš„è½¬æ¢æ–¹æ³•ï¼š

```java title="é›†åˆè½¬æ¢å·¥å…·ç±»"
public class CollectionConverter {
    
    /**
     * Listè½¬Setï¼ˆå»é‡ï¼‰
     * @param list è¦è½¬æ¢çš„List
     * @return åŒ…å«Listå…ƒç´ çš„Set
     */
    public static <T> Set<T> listToSet(List<T> list) {
        if (isEmpty(list)) {
            return new HashSet<>();
        }
        return new HashSet<>(list);
    }
    
    /**
     * Setè½¬List
     * @param set è¦è½¬æ¢çš„Set
     * @return åŒ…å«Setå…ƒç´ çš„List
     */
    public static <T> List<T> setToList(Set<T> set) {
        if (isEmpty(set)) {
            return new ArrayList<>();
        }
        return new ArrayList<>(set);
    }
    
    /**
     * æ•°ç»„è½¬List
     * @param array è¦è½¬æ¢çš„æ•°ç»„
     * @return åŒ…å«æ•°ç»„å…ƒç´ çš„List
     */
    public static <T> List<T> arrayToList(T[] array) {
        if (isEmpty(array)) {
            return new ArrayList<>();
        }
        return Arrays.asList(array);
    }
    
    /**
     * æ•°ç»„è½¬å¯å˜List
     * @param array è¦è½¬æ¢çš„æ•°ç»„
     * @return å¯ä¿®æ”¹çš„List
     */
    public static <T> List<T> arrayToModifiableList(T[] array) {
        if (isEmpty(array)) {
            return new ArrayList<>();
        }
        return new ArrayList<>(Arrays.asList(array));
    }
    
    /**
     * Listè½¬æ•°ç»„
     * @param list è¦è½¬æ¢çš„List
     * @param clazz ç›®æ ‡æ•°ç»„çš„ç±»å‹
     * @return åŒ…å«Listå…ƒç´ çš„æ•°ç»„
     */
    public static <T> T[] listToArray(List<T> list, Class<T> clazz) {
        if (isEmpty(list)) {
            @SuppressWarnings("unchecked")
            T[] array = (T[]) Array.newInstance(clazz, 0);
            return array;
        }
        
        @SuppressWarnings("unchecked")
        T[] array = (T[]) Array.newInstance(clazz, list.size());
        return list.toArray(array);
    }
    
    /**
     * åŸºæœ¬ç±»å‹æ•°ç»„è½¬åŒ…è£…ç±»å‹List
     * @param array åŸºæœ¬ç±»å‹æ•°ç»„
     * @return åŒ…è£…ç±»å‹List
     */
    public static List<Integer> intArrayToList(int[] array) {
        if (array == null || array.length == 0) {
            return new ArrayList<>();
        }
        return Arrays.stream(array).boxed().collect(Collectors.toList());
    }
    
    /**
     * åŸºæœ¬ç±»å‹æ•°ç»„è½¬åŒ…è£…ç±»å‹Set
     * @param array åŸºæœ¬ç±»å‹æ•°ç»„
     * @return åŒ…è£…ç±»å‹Set
     */
    public static Set<Integer> intArrayToSet(int[] array) {
        if (array == null || array.length == 0) {
            return new HashSet<>();
        }
        return Arrays.stream(array).boxed().collect(Collectors.toSet());
    }
    
    /**
     * å­—ç¬¦ä¸²æ•°ç»„è½¬List
     * @param array å­—ç¬¦ä¸²æ•°ç»„
     * @return å­—ç¬¦ä¸²List
     */
    public static List<String> stringArrayToList(String[] array) {
        if (isEmpty(array)) {
            return new ArrayList<>();
        }
        return Arrays.asList(array);
    }
    
    /**
     * å­—ç¬¦ä¸²æ•°ç»„è½¬Setï¼ˆå»é‡ï¼‰
     * @param array å­—ç¬¦ä¸²æ•°ç»„
     * @return å­—ç¬¦ä¸²Set
     */
    public static Set<String> stringArrayToSet(String[] array) {
        if (isEmpty(array)) {
            return new HashSet<>();
        }
        return new HashSet<>(Arrays.asList(array));
    }
    
    /**
     * é›†åˆè½¬å­—ç¬¦ä¸²
     * @param collection è¦è½¬æ¢çš„é›†åˆ
     * @param delimiter åˆ†éš”ç¬¦
     * @return ç”¨åˆ†éš”ç¬¦è¿æ¥çš„å­—ç¬¦ä¸²
     */
    public static String collectionToString(Collection<?> collection, String delimiter) {
        if (isEmpty(collection)) {
            return "";
        }
        return collection.stream()
            .map(Object::toString)
            .collect(Collectors.joining(delimiter));
    }
    
    /**
     * å­—ç¬¦ä¸²è½¬List
     * @param str è¦è½¬æ¢çš„å­—ç¬¦ä¸²
     * @param delimiter åˆ†éš”ç¬¦
     * @return åˆ†å‰²åçš„å­—ç¬¦ä¸²List
     */
    public static List<String> stringToList(String str, String delimiter) {
        if (str == null || str.trim().isEmpty()) {
            return new ArrayList<>();
        }
        return Arrays.asList(str.split(delimiter));
    }
}
```

#### è½¬æ¢æ–¹æ³•åŠŸèƒ½å¯¹æ¯”

| æ–¹æ³• | åŠŸèƒ½ | è¾“å…¥ç±»å‹ | è¾“å‡ºç±»å‹ | ç‰¹ç‚¹ |
|------|------|----------|----------|------|
| `listToSet()` | Listè½¬Set | `List<T>` | `Set<T>` | è‡ªåŠ¨å»é‡ |
| `setToList()` | Setè½¬List | `Set<T>` | `List<T>` | ä¿æŒé¡ºåº |
| `arrayToList()` | æ•°ç»„è½¬List | `T[]` | `List<T>` | å›ºå®šå¤§å° |
| `arrayToModifiableList()` | æ•°ç»„è½¬å¯å˜List | `T[]` | `List<T>` | å¯ä¿®æ”¹ |
| `listToArray()` | Listè½¬æ•°ç»„ | `List<T>` | `T[]` | ç±»å‹å®‰å…¨ |

### 4.3 é›†åˆæ“ä½œå·¥å…·

é›†åˆæ“ä½œå·¥å…·ç±»æä¾›äº†é›†åˆä¹‹é—´çš„æ•°å­¦è¿ç®—ï¼Œå¦‚äº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰ï¼š

```java title="é›†åˆæ“ä½œå·¥å…·ç±»"
public class CollectionOperations {
    
    /**
     * è®¡ç®—ä¸¤ä¸ªé›†åˆçš„äº¤é›†
     * @param c1 ç¬¬ä¸€ä¸ªé›†åˆ
     * @param c2 ç¬¬äºŒä¸ªé›†åˆ
     * @return åŒ…å«å…±åŒå…ƒç´ çš„Set
     */
    public static <T> Set<T> intersection(Collection<T> c1, Collection<T> c2) {
        if (isEmpty(c1) || isEmpty(c2)) {
            return new HashSet<>();
        }
        Set<T> result = new HashSet<>(c1);
        result.retainAll(c2);
        return result;
    }
    
    /**
     * è®¡ç®—ä¸¤ä¸ªé›†åˆçš„å¹¶é›†
     * @param c1 ç¬¬ä¸€ä¸ªé›†åˆ
     * @param c2 ç¬¬äºŒä¸ªé›†åˆ
     * @return åŒ…å«æ‰€æœ‰å…ƒç´ çš„Set
     */
    public static <T> Set<T> union(Collection<T> c1, Collection<T> c2) {
        Set<T> result = new HashSet<>();
        if (isNotEmpty(c1)) {
            result.addAll(c1);
        }
        if (isNotEmpty(c2)) {
            result.addAll(c2);
        }
        return result;
    }
    
    /**
     * è®¡ç®—ä¸¤ä¸ªé›†åˆçš„å·®é›†ï¼ˆc1 - c2ï¼‰
     * @param c1 ç¬¬ä¸€ä¸ªé›†åˆ
     * @param c2 ç¬¬äºŒä¸ªé›†åˆ
     * @return åŒ…å«c1ä¸­ä½†ä¸åœ¨c2ä¸­çš„å…ƒç´ 
     */
    public static <T> Set<T> difference(Collection<T> c1, Collection<T> c2) {
        if (isEmpty(c1)) {
            return new HashSet<>();
        }
        if (isEmpty(c2)) {
            return new HashSet<>(c1);
        }
        Set<T> result = new HashSet<>(c1);
        result.removeAll(c2);
        return result;
    }
    
    /**
     * è®¡ç®—ä¸¤ä¸ªé›†åˆçš„å¯¹ç§°å·®é›†ï¼ˆå¹¶é›† - äº¤é›†ï¼‰
     * @param c1 ç¬¬ä¸€ä¸ªé›†åˆ
     * @param c2 ç¬¬äºŒä¸ªé›†åˆ
     * @return åŒ…å«åªåœ¨ä¸€ä¸ªé›†åˆä¸­å‡ºç°çš„å…ƒç´ 
     */
    public static <T> Set<T> symmetricDifference(Collection<T> c1, Collection<T> c2) {
        Set<T> union = union(c1, c2);
        Set<T> intersection = intersection(c1, c2);
        union.removeAll(intersection);
        return union;
    }
    
    /**
     * åˆ†å‰²é›†åˆä¸ºæŒ‡å®šå¤§å°çš„å­é›†åˆ
     * @param list è¦åˆ†å‰²çš„List
     * @param size æ¯ä¸ªå­é›†åˆçš„å¤§å°
     * @return åˆ†å‰²åçš„å­é›†åˆList
     */
    public static <T> List<List<T>> partition(List<T> list, int size) {
        if (isEmpty(list) || size <= 0) {
            return new ArrayList<>();
        }
        
        List<List<T>> partitions = new ArrayList<>();
        for (int i = 0; i < list.size(); i += size) {
            int end = Math.min(i + size, list.size());
            partitions.add(list.subList(i, end));
        }
        return partitions;
    }
    
    /**
     * æ£€æŸ¥ä¸€ä¸ªé›†åˆæ˜¯å¦æ˜¯å¦ä¸€ä¸ªé›†åˆçš„å­é›†
     * @param subset å¯èƒ½çš„å­é›†
     * @param superset å¯èƒ½çš„è¶…é›†
     * @return trueå¦‚æœsubsetæ˜¯supersetçš„å­é›†
     */
    public static <T> boolean isSubset(Collection<T> subset, Collection<T> superset) {
        if (isEmpty(subset)) {
            return true; // ç©ºé›†åˆæ˜¯ä»»ä½•é›†åˆçš„å­é›†
        }
        if (isEmpty(superset)) {
            return false;
        }
        return superset.containsAll(subset);
    }
    
    /**
     * æ£€æŸ¥ä¸¤ä¸ªé›†åˆæ˜¯å¦ç›¸ç­‰ï¼ˆå¿½ç•¥é¡ºåºï¼‰
     * @param c1 ç¬¬ä¸€ä¸ªé›†åˆ
     * @param c2 ç¬¬äºŒä¸ªé›†åˆ
     * @return trueå¦‚æœä¸¤ä¸ªé›†åˆåŒ…å«ç›¸åŒçš„å…ƒç´ 
     */
    public static <T> boolean equalsIgnoreOrder(Collection<T> c1, Collection<T> c2) {
        if (c1 == c2) {
            return true;
        }
        if (isEmpty(c1) && isEmpty(c2)) {
            return true;
        }
        if (isEmpty(c1) || isEmpty(c2)) {
            return false;
        }
        if (c1.size() != c2.size()) {
            return false;
        }
        
        // ä½¿ç”¨Mapç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°
        Map<T, Integer> countMap = new HashMap<>();
        for (T element : c1) {
            countMap.merge(element, 1, Integer::sum);
        }
        
        for (T element : c2) {
            Integer count = countMap.get(element);
            if (count == null || count == 0) {
                return false;
            }
            countMap.put(element, count - 1);
        }
        
        return true;
    }
    
    /**
     * æ‰¾å‡ºé›†åˆä¸­çš„é‡å¤å…ƒç´ 
     * @param collection è¦æ£€æŸ¥çš„é›†åˆ
     * @return åŒ…å«é‡å¤å…ƒç´ çš„Set
     */
    public static <T> Set<T> findDuplicates(Collection<T> collection) {
        if (isEmpty(collection)) {
            return new HashSet<>();
        }
        
        Set<T> seen = new HashSet<>();
        Set<T> duplicates = new HashSet<>();
        
        for (T element : collection) {
            if (!seen.add(element)) {
                duplicates.add(element);
            }
        }
        
        return duplicates;
    }
    
    /**
     * éšæœºé€‰æ‹©é›†åˆä¸­çš„å…ƒç´ 
     * @param collection è¦é€‰æ‹©çš„é›†åˆ
     * @param count è¦é€‰æ‹©çš„å…ƒç´ æ•°é‡
     * @return éšæœºé€‰æ‹©çš„å…ƒç´ List
     */
    public static <T> List<T> randomSample(Collection<T> collection, int count) {
        if (isEmpty(collection) || count <= 0) {
            return new ArrayList<>();
        }
        
        List<T> list = new ArrayList<>(collection);
        if (count >= list.size()) {
            return list;
        }
        
        List<T> result = new ArrayList<>();
        Random random = new Random();
        
        for (int i = 0; i < count; i++) {
            int index = random.nextInt(list.size());
            result.add(list.get(index));
            list.remove(index);
        }
        
        return result;
    }
}
```

#### é›†åˆæ“ä½œæ–¹æ³•å¯¹æ¯”

| æ–¹æ³• | åŠŸèƒ½ | æ—¶é—´å¤æ‚åº¦ | é€‚ç”¨åœºæ™¯ |
|------|------|------------|----------|
| `intersection()` | è®¡ç®—äº¤é›† | O(n+m) | æ‰¾å‡ºå…±åŒå…ƒç´  |
| `union()` | è®¡ç®—å¹¶é›† | O(n+m) | åˆå¹¶ä¸¤ä¸ªé›†åˆ |
| `difference()` | è®¡ç®—å·®é›† | O(n+m) | æ‰¾å‡ºç‹¬æœ‰å…ƒç´  |
| `symmetricDifference()` | è®¡ç®—å¯¹ç§°å·®é›† | O(n+m) | æ‰¾å‡ºä¸åŒå…ƒç´  |
| `partition()` | åˆ†å‰²é›†åˆ | O(n) | åˆ†æ‰¹å¤„ç†æ•°æ® |
| `findDuplicates()` | æ‰¾å‡ºé‡å¤å…ƒç´  | O(n) | æ‰¾å‡ºé‡å¤æ•°æ® |
```

## 5. å®é™…åº”ç”¨åœºæ™¯

### 5.1 æ•°æ®å¤„ç†å’Œåˆ†æ

```java title="æ•°æ®å¤„ç†å’Œåˆ†æç¤ºä¾‹"
public class DataProcessingExample {
    public static void main(String[] args) {
        // ç”¨æˆ·æ•°æ®ç»Ÿè®¡
        List<User> users = Arrays.asList(
            new User("Alice", 25, "Engineer"),
            new User("Bob", 30, "Manager"),
            new User("Charlie", 25, "Engineer"),
            new User("David", 35, "Director"),
            new User("Eve", 28, "Engineer")
        );
        
        // ä½¿ç”¨Collectionså·¥å…·ç±»è¿›è¡Œæ•°æ®åˆ†æ
        System.out.println("=== ç”¨æˆ·æ•°æ®åˆ†æ ===");
        
        // æŒ‰å¹´é¾„åˆ†ç»„ç»Ÿè®¡
        Map<Integer, Long> ageDistribution = users.stream()
            .collect(Collectors.groupingBy(User::getAge, Collectors.counting()));
        System.out.println("å¹´é¾„åˆ†å¸ƒ: " + ageDistribution);
        
        // æ‰¾å‡ºé‡å¤çš„èŒä¸š
        List<String> jobs = users.stream().map(User::getJob).collect(Collectors.toList());
        Set<String> duplicateJobs = CollectionOperations.findDuplicates(jobs);
        System.out.println("é‡å¤èŒä¸š: " + duplicateJobs);
        
        // æŒ‰èŒä¸šåˆ†ç»„ï¼Œæ‰¾å‡ºæ¯ä¸ªèŒä¸šçš„å¹³å‡å¹´é¾„
        Map<String, Double> avgAgeByJob = users.stream()
            .collect(Collectors.groupingBy(
                User::getJob,
                Collectors.averagingInt(User::getAge)
            ));
        System.out.println("å„èŒä¸šå¹³å‡å¹´é¾„: " + avgAgeByJob);
        
        // æ‰¾å‡ºå¹´é¾„æœ€å¤§çš„ç”¨æˆ·
        User oldestUser = Collections.max(users, Comparator.comparing(User::getAge));
        System.out.println("å¹´é¾„æœ€å¤§çš„ç”¨æˆ·: " + oldestUser);
        
        // æŒ‰å¹´é¾„æ’åº
        List<User> sortedByAge = new ArrayList<>(users);
        Collections.sort(sortedByAge, Comparator.comparing(User::getAge));
        System.out.println("æŒ‰å¹´é¾„æ’åº: " + sortedByAge);
    }
}

class User {
    private String name;
    private int age;
    private String job;
    
    // æ„é€ å‡½æ•°ã€getterã€setterçœç•¥...
}
```

### 5.2 ç¼“å­˜å’Œé…ç½®ç®¡ç†

```java title="ç¼“å­˜å’Œé…ç½®ç®¡ç†ç¤ºä¾‹"
public class CacheConfigExample {
    private static final Map<String, Object> configCache = Collections.synchronizedMap(new HashMap<>());
    private static final Set<String> blacklist = Collections.newSetFromMap(new ConcurrentHashMap<>());
    
    public static void main(String[] args) {
        // é…ç½®ç¼“å­˜ç®¡ç†
        System.out.println("=== é…ç½®ç¼“å­˜ç®¡ç† ===");
        
        // å®‰å…¨åœ°æ·»åŠ é…ç½®
        safePutConfig("database.url", "jdbc:mysql://localhost:3306/test");
        safePutConfig("cache.ttl", 3600);
        safePutConfig("max.connections", 100);
        
        // æ‰¹é‡è·å–é…ç½®
        List<String> keys = Arrays.asList("database.url", "cache.ttl", "max.connections");
        Map<String, Object> configs = getConfigs(keys);
        System.out.println("è·å–çš„é…ç½®: " + configs);
        
        // é»‘åå•ç®¡ç†
        addToBlacklist("spam@example.com");
        addToBlacklist("malware@example.com");
        addToBlacklist("phishing@example.com");
        
        System.out.println("é»‘åå•å¤§å°: " + blacklist.size());
        System.out.println("æ˜¯å¦åœ¨é»‘åå•ä¸­: " + isBlacklisted("spam@example.com"));
        
        // é…ç½®éªŒè¯
        validateConfigs(configs);
    }
    
    private static void safePutConfig(String key, Object value) {
        if (CollectionUtils.isNotEmpty(key) && value != null) {
            configCache.put(key, value);
        }
    }
    
    private static Map<String, Object> getConfigs(List<String> keys) {
        if (CollectionUtils.isEmpty(keys)) {
            return Collections.emptyMap();
        }
        
        return keys.stream()
            .filter(configCache::containsKey)
            .collect(Collectors.toMap(key -> key, configCache::get));
    }
    
    private static void addToBlacklist(String email) {
        if (CollectionUtils.isNotEmpty(email)) {
            blacklist.add(email);
        }
    }
    
    private static boolean isBlacklisted(String email) {
        return CollectionUtils.isNotEmpty(email) && blacklist.contains(email);
    }
    
    private static void validateConfigs(Map<String, Object> configs) {
        if (CollectionUtils.isEmpty(configs)) {
            System.out.println("é…ç½®ä¸ºç©ºï¼Œè·³è¿‡éªŒè¯");
            return;
        }
        
        // éªŒè¯å¿…éœ€çš„é…ç½®é¡¹
        Set<String> requiredKeys = new HashSet<>(Arrays.asList("database.url", "max.connections"));
        Set<String> missingKeys = CollectionOperations.difference(requiredKeys, configs.keySet());
        
        if (CollectionUtils.isNotEmpty(missingKeys)) {
            System.out.println("ç¼ºå°‘å¿…éœ€é…ç½®: " + missingKeys);
        } else {
            System.out.println("æ‰€æœ‰å¿…éœ€é…ç½®éƒ½å·²å­˜åœ¨");
        }
    }
}
```

### 5.3 æ‰¹é‡æ•°æ®å¤„ç†

```java title="æ‰¹é‡æ•°æ®å¤„ç†ç¤ºä¾‹"
public class BatchProcessingExample {
    public static void main(String[] args) {
        // æ¨¡æ‹Ÿå¤§é‡æ•°æ®
        List<String> largeDataset = generateLargeDataset(10000);
        System.out.println("=== æ‰¹é‡æ•°æ®å¤„ç† ===");
        System.out.println("æ•°æ®é›†å¤§å°: " + largeDataset.size());
        
        // åˆ†æ‰¹å¤„ç†æ•°æ®
        int batchSize = 1000;
        List<List<String>> batches = CollectionOperations.partition(largeDataset, batchSize);
        System.out.println("åˆ†æˆ " + batches.size() + " ä¸ªæ‰¹æ¬¡");
        
        // å¹¶è¡Œå¤„ç†æ¯ä¸ªæ‰¹æ¬¡
        List<String> processedResults = batches.parallelStream()
            .map(batch -> processBatch(batch))
            .flatMap(List::stream)
            .collect(Collectors.toList());
        
        System.out.println("å¤„ç†å®Œæˆï¼Œç»“æœæ•°é‡: " + processedResults.size());
        
        // æ•°æ®å»é‡å’Œç»Ÿè®¡
        Set<String> uniqueResults = new HashSet<>(processedResults);
        System.out.println("å»é‡åç»“æœæ•°é‡: " + uniqueResults.size());
        
        // æ‰¾å‡ºé‡å¤çš„æ•°æ®
        Set<String> duplicates = CollectionOperations.findDuplicates(processedResults);
        System.out.println("é‡å¤æ•°æ®æ•°é‡: " + duplicates.size());
        
        // éšæœºé‡‡æ ·éªŒè¯
        List<String> sample = CollectionOperations.randomSample(uniqueResults, 10);
        System.out.println("éšæœºé‡‡æ ·ç»“æœ: " + sample);
    }
    
    private static List<String> generateLargeDataset(int size) {
        List<String> dataset = new ArrayList<>();
        Random random = new Random();
        
        for (int i = 0; i < size; i++) {
            dataset.add("data_" + random.nextInt(1000));
        }
        
        return dataset;
    }
    
    private static List<String> processBatch(List<String> batch) {
        // æ¨¡æ‹Ÿæ‰¹å¤„ç†é€»è¾‘
        return batch.stream()
            .map(data -> "processed_" + data)
            .collect(Collectors.toList());
    }
}
```

## 6. æœ€ä½³å®è·µæ€»ç»“

### 6.1 å·¥å…·ç±»è®¾è®¡åŸåˆ™

:::tip æ ¸å¿ƒä»·å€¼
é›†åˆå·¥å…·ç±»çš„è®¾è®¡éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š
- **å•ä¸€èŒè´£**ï¼šæ¯ä¸ªæ–¹æ³•åªåšä¸€ä»¶äº‹
- **ç©ºå®‰å…¨**ï¼šæ‰€æœ‰æ–¹æ³•éƒ½è¦å¤„ç†nullå’Œç©ºé›†åˆ
- **æ€§èƒ½ä¼˜åŒ–**ï¼šé€‰æ‹©åˆé€‚çš„ç®—æ³•å’Œæ•°æ®ç»“æ„
- **æ˜“ç”¨æ€§**ï¼šæä¾›ç›´è§‚çš„APIæ¥å£
:::

### 6.2 æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

| ä¼˜åŒ–ç­–ç•¥ | å…·ä½“æ–¹æ³• | é€‚ç”¨åœºæ™¯ |
|----------|----------|----------|
| **é¢„åˆ†é…å®¹é‡** | ä½¿ç”¨ `new ArrayList<>(expectedSize)` | å·²çŸ¥é›†åˆå¤§å° |
| **é€‰æ‹©åˆé€‚çš„é›†åˆ** | HashSetç”¨äºæŸ¥æ‰¾ï¼ŒTreeSetç”¨äºæ’åº | æ ¹æ®ä½¿ç”¨åœºæ™¯é€‰æ‹© |
| **å¹¶è¡Œå¤„ç†** | ä½¿ç”¨ `parallelStream()` | å¤§æ•°æ®é‡å¤„ç† |
| **é¿å…è£…ç®±æ‹†ç®±** | ä½¿ç”¨åŸºæœ¬ç±»å‹æ•°ç»„å’ŒStream | æ•°å€¼è®¡ç®— |
| **ç¼“å­˜ç»“æœ** | ç¼“å­˜é¢‘ç¹è®¡ç®—çš„ç»“æœ | é‡å¤è®¡ç®— |

### 6.3 å¸¸è§é™·é˜±å’Œè§£å†³æ–¹æ¡ˆ

:::caution æ³¨æ„äº‹é¡¹
åœ¨ä½¿ç”¨é›†åˆå·¥å…·ç±»æ—¶ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å¸¸è§é™·é˜±ï¼š
:::

1. **Arrays.asList()çš„ä¸å¯å˜æ€§**
   ```java
   // é”™è¯¯ç”¨æ³•
   List<String> list = Arrays.asList("a", "b", "c");
   list.add("d"); // æŠ›å‡ºUnsupportedOperationException
   
   // æ­£ç¡®ç”¨æ³•
   List<String> list = new ArrayList<>(Arrays.asList("a", "b", "c"));
   list.add("d"); // æ­£å¸¸å·¥ä½œ
   ```

2. **Collections.synchronizedXXX()çš„å±€é™æ€§**
   ```java
   // æ³¨æ„ï¼šå•ä¸ªæ“ä½œæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†å¤åˆæ“ä½œä¸æ˜¯
   List<String> syncList = Collections.synchronizedList(new ArrayList<>());
   
   // é”™è¯¯ï¼šå¤åˆæ“ä½œä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„
   if (!syncList.contains("item")) {
       syncList.add("item"); // å¯èƒ½é‡å¤æ·»åŠ 
   }
   
   // æ­£ç¡®ï¼šä½¿ç”¨åŒæ­¥å—
   synchronized(syncList) {
       if (!syncList.contains("item")) {
           syncList.add("item");
       }
   }
   ```

3. **Stream APIçš„å»¶è¿Ÿæ‰§è¡Œ**
   ```java
   // æ³¨æ„ï¼šStreamæ˜¯å»¶è¿Ÿæ‰§è¡Œçš„
   Stream<String> stream = list.stream().filter(s -> s.length() > 5);
   list.add("newItem"); // è¿™ä¼šå½±å“streamçš„ç»“æœ
   
   // æ­£ç¡®ï¼šå…ˆæ”¶é›†ç»“æœ
   List<String> result = list.stream().filter(s -> s.length() > 5).collect(Collectors.toList());
   list.add("newItem"); // ä¸ä¼šå½±å“å·²æ”¶é›†çš„ç»“æœ
   ```

### 6.4 æµ‹è¯•å’Œè°ƒè¯•å»ºè®®

1. **å•å…ƒæµ‹è¯•è¦†ç›–**
   - æµ‹è¯•è¾¹ç•Œæ¡ä»¶ï¼ˆç©ºé›†åˆã€nullå€¼ï¼‰
   - æµ‹è¯•å¼‚å¸¸æƒ…å†µ
   - æµ‹è¯•æ€§èƒ½å…³é”®è·¯å¾„

2. **è°ƒè¯•æŠ€å·§**
   - ä½¿ç”¨ `Arrays.toString()` å’Œ `Arrays.deepToString()` æ‰“å°æ•°ç»„
   - ä½¿ç”¨ `Collections.toString()` æ‰“å°é›†åˆ
   - ä½¿ç”¨Stream APIçš„ `peek()` æ–¹æ³•è°ƒè¯•æµæ“ä½œ

3. **æ€§èƒ½ç›‘æ§**
   - ç›‘æ§é›†åˆæ“ä½œçš„æ—¶é—´å¤æ‚åº¦
   - ä½¿ç”¨JMHè¿›è¡Œæ€§èƒ½åŸºå‡†æµ‹è¯•
   - ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µ

## 7. æ€»ç»“

```mermaid
graph TD
    A["é›†åˆå·¥å…·ç±»æœ€ä½³å®è·µ"] --> B["è®¾è®¡åŸåˆ™"]
    A --> C["æ€§èƒ½ä¼˜åŒ–"]
    A --> D["å¸¸è§é™·é˜±"]
    A --> E["å·¥å…·ç±»é€‰æ‹©"]
    
    B --> B1["å•ä¸€èŒè´£"]
    B --> B2["ç©ºå®‰å…¨"]
    B --> B3["ç±»å‹å®‰å…¨"]
    B --> B4["ä¸€è‡´æ€§"]
    
    C --> C1["é¢„åˆ†é…å®¹é‡"]
    C --> C2["é€‰æ‹©åˆé€‚é›†åˆ"]
    C --> C3["å¹¶è¡Œå¤„ç†"]
    C --> C4["é¿å…è£…ç®±æ‹†ç®±"]
    
    D --> D1["Arrays.asList()ä¸å¯å˜"]
    D --> D2["åŒæ­¥é›†åˆå¤åˆæ“ä½œ"]
    D --> D3["Streamå»¶è¿Ÿæ‰§è¡Œ"]
    
    E --> E1["Collections: é›†åˆæ“ä½œ"]
    E --> E2["Arrays: æ•°ç»„æ“ä½œ"]
    E --> E3["Guava: æ‰©å±•åŠŸèƒ½"]
    E --> E4["Apache: å·¥å…·è¡¥å……"]
    
    style A fill:#f9f,stroke:#333,stroke-width:2px
    style B,C,D,E fill:#bbf,stroke:#333,stroke-width:1px
```

Javaé›†åˆå·¥å…·ç±»ä¸ºé›†åˆæ“ä½œæä¾›äº†å¼ºå¤§è€Œä¾¿æ·çš„åŠŸèƒ½ã€‚é€šè¿‡åˆç†ä½¿ç”¨Collectionså’ŒArrayså·¥å…·ç±»ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š

- **æé«˜å¼€å‘æ•ˆç‡**ï¼šé¿å…é‡å¤ç¼–å†™é›†åˆæ“ä½œä»£ç 
- **ä¿è¯ä»£ç è´¨é‡**ï¼šä½¿ç”¨ç»è¿‡å……åˆ†æµ‹è¯•çš„æ ‡å‡†åº“æ–¹æ³•
- **ä¼˜åŒ–æ€§èƒ½**ï¼šé€‰æ‹©åˆé€‚çš„ç®—æ³•å’Œæ•°æ®ç»“æ„
- **å¢å¼ºå¯ç»´æŠ¤æ€§**ï¼šç»Ÿä¸€çš„APIé£æ ¼å’Œé”™è¯¯å¤„ç†

åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥ï¼š

1. **ä¼˜å…ˆä½¿ç”¨æ ‡å‡†åº“**ï¼šCollectionså’ŒArrayså·¥å…·ç±»å·²ç»è¦†ç›–äº†å¤§éƒ¨åˆ†å¸¸è§éœ€æ±‚
2. **åˆç†å°è£…**ï¼šå¯¹äºç‰¹å®šä¸šåŠ¡åœºæ™¯ï¼Œå¯ä»¥åŸºäºæ ‡å‡†å·¥å…·ç±»è¿›è¡ŒäºŒæ¬¡å°è£…
3. **æ³¨æ„æ€§èƒ½**ï¼šäº†è§£å„ç§æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ï¼Œé€‰æ‹©åˆé€‚çš„å®ç°
4. **ä¿æŒä¸€è‡´æ€§**ï¼šåœ¨é¡¹ç›®ä¸­ç»Ÿä¸€ä½¿ç”¨ç›¸åŒçš„å·¥å…·ç±»å’Œæ–¹æ³•

é€šè¿‡æ·±å…¥ç†è§£å’Œç†Ÿç»ƒè¿ç”¨è¿™äº›å·¥å…·ç±»ï¼Œæˆ‘ä»¬èƒ½å¤Ÿç¼–å†™å‡ºæ›´åŠ é«˜æ•ˆã€å¥å£®å’Œæ˜“ç»´æŠ¤çš„Javaä»£ç ã€‚ 