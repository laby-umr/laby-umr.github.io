---
sidebar_position: 5
title: "Spring Bootè¯¦è§£"
description: "æ·±å…¥ç†è§£Spring Bootè‡ªåŠ¨é…ç½®ã€å¯åŠ¨æµç¨‹ä¸æœ€ä½³å®è·µ"
authors: [Laby]
last_update:
  date: 2025-08-07
  author: Laby
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import TOCInline from '@theme/TOCInline';

# Spring Boot è¯¦è§£

Spring Bootæ˜¯ä¸€ä¸ªåŸºäºSpringæ¡†æ¶çš„å¿«é€Ÿå¼€å‘å¹³å°ï¼Œå®ƒé€šè¿‡çº¦å®šä¼˜äºé…ç½®çš„ç†å¿µï¼Œç®€åŒ–äº†Springåº”ç”¨çš„é…ç½®å’Œéƒ¨ç½²ã€‚Spring Bootæä¾›äº†è‡ªåŠ¨é…ç½®ã€å†…åµŒæœåŠ¡å™¨ã€ç”Ÿäº§å°±ç»ªç‰¹æ€§ç­‰ï¼Œå¤§å¤§æé«˜äº†å¼€å‘æ•ˆç‡ã€‚

:::info æœ¬æ–‡å†…å®¹æ¦‚è§ˆ
<TOCInline toc={toc} />
:::

## 1. Spring BootåŸºç¡€æ¦‚å¿µ

### 1.1 ä»€ä¹ˆæ˜¯Spring Bootï¼Ÿ

Spring Bootæ˜¯Springæ¡†æ¶çš„æ‰©å±•ï¼Œå®ƒç®€åŒ–äº†Springåº”ç”¨çš„åˆå§‹æ­å»ºå’Œå¼€å‘è¿‡ç¨‹ã€‚é€šè¿‡è‡ªåŠ¨é…ç½®ã€èµ·æ­¥ä¾èµ–ã€å†…åµŒæœåŠ¡å™¨ç­‰ç‰¹æ€§ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿå¿«é€Ÿæ„å»ºç”Ÿäº§å°±ç»ªçš„Springåº”ç”¨ã€‚

### 1.2 Spring Bootçš„æ ¸å¿ƒç‰¹æ€§

- **è‡ªåŠ¨é…ç½®**ï¼šæ ¹æ®ä¾èµ–è‡ªåŠ¨é…ç½®åº”ç”¨
- **èµ·æ­¥ä¾èµ–**ï¼šç®€åŒ–Maven/Gradleä¾èµ–ç®¡ç†
- **å†…åµŒæœåŠ¡å™¨**ï¼šå†…ç½®Tomcatã€Jettyç­‰æœåŠ¡å™¨
- **ç”Ÿäº§å°±ç»ª**ï¼šç›‘æ§ã€å¥åº·æ£€æŸ¥ç­‰

## 2. è‡ªåŠ¨é…ç½®åŸç†

Spring Bootçš„è‡ªåŠ¨é…ç½®åŸºäºæ¡ä»¶æ³¨è§£å’ŒSpring Factoriesæœºåˆ¶ï¼Œæ˜¯å…¶æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ã€‚

:::tip æ ¸å¿ƒæ¦‚å¿µ
ğŸš€ **è‡ªåŠ¨é…ç½®**ï¼šSpring Bootä¼šæ ¹æ®æ·»åŠ çš„jarä¾èµ–è‡ªåŠ¨é…ç½®Springåº”ç”¨ä¸Šä¸‹æ–‡ï¼Œå‡å°‘å¼€å‘è€…æ‰‹åŠ¨é…ç½®çš„å·¥ä½œé‡ã€‚
:::

### 2.1 è‡ªåŠ¨é…ç½®æµç¨‹

```mermaid
graph TD
    A["@SpringBootApplication"] --> B["@EnableAutoConfiguration"]
    B --> C["AutoConfigurationImportSelector"]
    C --> D["åŠ è½½META-INF/spring.factories"]
    D --> E["è·å–è‡ªåŠ¨é…ç½®ç±»åˆ—è¡¨"]
    E --> F["ç­›é€‰æ»¡è¶³æ¡ä»¶çš„é…ç½®ç±»"]
    F --> G["åˆ›å»ºå¹¶æ³¨å†ŒBean"]
    
    style A fill:#f9f,stroke:#333,stroke-width:1px
    style B fill:#ccf,stroke:#333,stroke-width:1px
    style G fill:#cfc,stroke:#333,stroke-width:1px
```

è‡ªåŠ¨é…ç½®çš„åŸºæœ¬æµç¨‹å¦‚ä¸‹ï¼š

1. åº”ç”¨å¯åŠ¨æ—¶ï¼Œé€šè¿‡`@SpringBootApplication`æ³¨è§£ä¸Šçš„`@EnableAutoConfiguration`å¯ç”¨è‡ªåŠ¨é…ç½®åŠŸèƒ½
2. `AutoConfigurationImportSelector`è¯»å–æ‰€æœ‰ä¾èµ–ä¸­çš„`META-INF/spring.factories`æ–‡ä»¶
3. æ”¶é›†æ‰€æœ‰`org.springframework.boot.autoconfigure.EnableAutoConfiguration`é¡¹ä¸‹çš„é…ç½®ç±»
4. æ ¹æ®æ¡ä»¶æ³¨è§£(`@ConditionalOnXXX`)ç­›é€‰å‡ºç¬¦åˆæ¡ä»¶çš„é…ç½®ç±»
5. åˆ›å»ºå¹¶æ³¨å†Œè¿™äº›é…ç½®ç±»ä¸­å®šä¹‰çš„Bean

<Tabs>
  <TabItem value="application" label="Spring Bootåº”ç”¨" default>
  ```java title="Spring Bootä¸»ç±»"
  @SpringBootApplication // åŒ…å«@EnableAutoConfiguration
  public class MyApplication {
    public static void main(String[] args) {
          SpringApplication.run(MyApplication.class, args);
      }
  }
  ```
  </TabItem>
  
  <TabItem value="factories" label="spring.factoriesæ–‡ä»¶">
  ```properties title="META-INF/spring.factories"
  # Auto Configure
  org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
  com.example.autoconfigure.DataSourceAutoConfiguration,\
  com.example.autoconfigure.JpaRepositoriesAutoConfiguration,\
  com.example.autoconfigure.WebMvcAutoConfiguration
  ```
  </TabItem>
</Tabs>

### 2.2 æ¡ä»¶æ³¨è§£è¯¦è§£

æ¡ä»¶æ³¨è§£æ˜¯è‡ªåŠ¨é…ç½®çš„æ ¸å¿ƒæœºåˆ¶ï¼Œå†³å®šäº†é…ç½®æ˜¯å¦åº”è¯¥è¢«åº”ç”¨ã€‚

<div className="card">
<div className="card__header">
<h4>ä¸»è¦æ¡ä»¶æ³¨è§£</h4>
</div>
<div className="card__body">

| æ¡ä»¶æ³¨è§£ | æè¿° | ç¤ºä¾‹ |
|---------|------|------|
| `@ConditionalOnClass` | å½“æŒ‡å®šç±»å­˜åœ¨äºç±»è·¯å¾„æ—¶ | `@ConditionalOnClass(DataSource.class)` |
| `@ConditionalOnMissingClass` | å½“æŒ‡å®šç±»ä¸å­˜åœ¨äºç±»è·¯å¾„æ—¶ | `@ConditionalOnMissingClass("org.hibernate.Session")` |
| `@ConditionalOnBean` | å½“æŒ‡å®šBeanå­˜åœ¨äºå®¹å™¨ä¸­æ—¶ | `@ConditionalOnBean(name = "dataSource")` |
| `@ConditionalOnMissingBean` | å½“æŒ‡å®šBeanä¸å­˜åœ¨äºå®¹å™¨ä¸­æ—¶ | `@ConditionalOnMissingBean(DataSource.class)` |
| `@ConditionalOnProperty` | å½“é…ç½®å±æ€§æ»¡è¶³æ¡ä»¶æ—¶ | `@ConditionalOnProperty(prefix = "app", name = "cache", havingValue = "true")` |
| `@ConditionalOnResource` | å½“æŒ‡å®šèµ„æºå­˜åœ¨æ—¶ | `@ConditionalOnResource(resources = "classpath:config.properties")` |
| `@ConditionalOnWebApplication` | å½“åº”ç”¨æ˜¯Webåº”ç”¨æ—¶ | `@ConditionalOnWebApplication(type = Type.SERVLET)` |
| `@ConditionalOnNotWebApplication` | å½“åº”ç”¨ä¸æ˜¯Webåº”ç”¨æ—¶ | `@ConditionalOnNotWebApplication` |
| `@ConditionalOnExpression` | å½“SpELè¡¨è¾¾å¼ä¸ºtrueæ—¶ | `@ConditionalOnExpression("'${spring.profiles.active}' == 'dev'")` |

</div>
</div>

```java title="æ¡ä»¶æ³¨è§£ä½¿ç”¨ç¤ºä¾‹"
@Configuration
@ConditionalOnClass(DataSource.class)  // å½“ç±»è·¯å¾„ä¸‹æœ‰DataSourceç±»æ—¶
@ConditionalOnProperty(prefix = "spring.datasource", name = "url")  // å½“é…ç½®äº†spring.datasource.urlå±æ€§æ—¶
public class DataSourceAutoConfiguration {
    
    @Bean
    @ConditionalOnMissingBean  // å½“å®¹å™¨ä¸­ä¸å­˜åœ¨DataSourceç±»å‹çš„Beanæ—¶
    public DataSource dataSource() {
        // åˆ›å»ºé»˜è®¤æ•°æ®æº
        return DataSourceBuilder.create().build();
    }
    
    @Bean
    @ConditionalOnProperty(prefix = "spring.datasource", name = "initialize", havingValue = "true", matchIfMissing = true)
    public DataSourceInitializer dataSourceInitializer(DataSource dataSource) {
        // åˆå§‹åŒ–æ•°æ®æº
        return new DataSourceInitializer(dataSource);
    }
}
```

### 2.3 è‡ªåŠ¨é…ç½®çš„å®ç°åŸç†

Spring Bootè‡ªåŠ¨é…ç½®çš„æ ¸å¿ƒå®ç°åŸºäº`@EnableAutoConfiguration`æ³¨è§£å’Œ`AutoConfigurationImportSelector`é€‰æ‹©å™¨ã€‚

<Tabs>
  <TabItem value="enableAutoConfig" label="EnableAutoConfiguration">
  
  ```java title="EnableAutoConfigurationæºç "
  @Target(ElementType.TYPE)
  @Retention(RetentionPolicy.RUNTIME)
  @Documented
  @Inherited
  @AutoConfigurationPackage
  @Import(AutoConfigurationImportSelector.class)
  public @interface EnableAutoConfiguration {
      
      String ENABLED_OVERRIDE_PROPERTY = "spring.boot.enableautoconfiguration";
      
      // æ’é™¤ç‰¹å®šçš„è‡ªåŠ¨é…ç½®ç±»
      Class<?>[] exclude() default {};
      
      // æŒ‰åç§°æ’é™¤è‡ªåŠ¨é…ç½®ç±»
      String[] excludeName() default {};
  }
  ```
  
  `@EnableAutoConfiguration`æ³¨è§£é€šè¿‡`@Import`å¯¼å…¥`AutoConfigurationImportSelector`ï¼Œè¿™ä¸ªé€‰æ‹©å™¨è´Ÿè´£åŠ è½½å’Œç­›é€‰è‡ªåŠ¨é…ç½®ç±»ã€‚
  </TabItem>
  
  <TabItem value="importSelector" label="ImportSelector">
  
  ```java title="AutoConfigurationImportSelectorå…³é”®æ–¹æ³•"
  public class AutoConfigurationImportSelector implements DeferredImportSelector {
      
      @Override
      public String[] selectImports(AnnotationMetadata annotationMetadata) {
          // åˆ¤æ–­æ˜¯å¦å¯ç”¨è‡ªåŠ¨é…ç½®
          if (!isEnabled(annotationMetadata)) {
              return NO_IMPORTS;
          }
          
          // åŠ è½½è‡ªåŠ¨é…ç½®å…ƒæ•°æ®
          AutoConfigurationMetadata autoConfigurationMetadata = 
              AutoConfigurationMetadataLoader.loadMetadata(this.beanClassLoader);
          
          // è·å–è‡ªåŠ¨é…ç½®æ¡ç›®
          AutoConfigurationEntry autoConfigurationEntry = getAutoConfigurationEntry(
              autoConfigurationMetadata, annotationMetadata);
          
          return StringUtils.toStringArray(autoConfigurationEntry.getConfigurations());
      }
      
      protected AutoConfigurationEntry getAutoConfigurationEntry(
          AutoConfigurationMetadata autoConfigurationMetadata,
          AnnotationMetadata annotationMetadata) {
          // ä»spring.factoriesåŠ è½½è‡ªåŠ¨é…ç½®ç±»
          List<String> configurations = getCandidateConfigurations(
              annotationMetadata, attributes);
          
          // å»é‡
          configurations = removeDuplicates(configurations);
          
          // è·å–æ’é™¤é¡¹
          Set<String> exclusions = getExclusions(annotationMetadata, attributes);
          
          // ä»å€™é€‰é…ç½®ä¸­æ’é™¤æŒ‡å®šçš„é…ç½®ç±»
          configurations.removeAll(exclusions);
          
          // æ ¹æ®æ¡ä»¶æ³¨è§£è¿‡æ»¤é…ç½®ç±»
          configurations = filter(configurations, autoConfigurationMetadata);
          
          // è§¦å‘è‡ªåŠ¨é…ç½®å¯¼å…¥äº‹ä»¶
          fireAutoConfigurationImportEvents(configurations, exclusions);
          
          return new AutoConfigurationEntry(configurations, exclusions);
      }
  }
  ```
  
  `AutoConfigurationImportSelector`é€šè¿‡è¯»å–å„ä¸ªJARåŒ…ä¸­çš„`META-INF/spring.factories`æ–‡ä»¶ï¼Œæ”¶é›†æ‰€æœ‰å£°æ˜çš„è‡ªåŠ¨é…ç½®ç±»ï¼Œç„¶åæ ¹æ®æ¡ä»¶æ³¨è§£è¿›è¡Œç­›é€‰ã€‚
  </TabItem>
</Tabs>

### 2.4 è‡ªå®šä¹‰è‡ªåŠ¨é…ç½®

ä½ å¯ä»¥åˆ›å»ºè‡ªå·±çš„è‡ªåŠ¨é…ç½®ç±»ï¼Œå®ç°ç‰¹å®šåŠŸèƒ½çš„è‡ªåŠ¨é…ç½®ã€‚

```java title="è‡ªå®šä¹‰è‡ªåŠ¨é…ç½®ç±»ç¤ºä¾‹"
// æ­¥éª¤1ï¼šåˆ›å»ºé…ç½®å±æ€§ç±»
@ConfigurationProperties(prefix = "acme")
public class AcmeProperties {

    private boolean enabled = false;
    private String apiKey;
    private List<String> allowedOrigins = new ArrayList<>();
    
    // getterå’Œsetter
}

// æ­¥éª¤2ï¼šåˆ›å»ºè‡ªåŠ¨é…ç½®ç±»
@Configuration
@ConditionalOnClass(AcmeClient.class)
@EnableConfigurationProperties(AcmeProperties.class)
public class AcmeAutoConfiguration {

    private final AcmeProperties properties;
    
    public AcmeAutoConfiguration(AcmeProperties properties) {
        this.properties = properties;
    }
    
    @Bean
    @ConditionalOnMissingBean
    @ConditionalOnProperty(prefix = "acme", name = "enabled", havingValue = "true")
    public AcmeClient acmeClient() {
        return new AcmeClient(properties.getApiKey(), properties.getAllowedOrigins());
    }
}

// æ­¥éª¤3ï¼šæ³¨å†Œè‡ªåŠ¨é…ç½®ç±»ï¼ˆåœ¨META-INF/spring.factoriesæ–‡ä»¶ä¸­ï¼‰
// org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
// com.example.AcmeAutoConfiguration
```

:::caution æ³¨æ„äº‹é¡¹
åˆ›å»ºè‡ªå®šä¹‰è‡ªåŠ¨é…ç½®æ—¶ï¼Œéœ€è¦éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š
1. å°½é‡ä½¿ç”¨æ¡ä»¶æ³¨è§£ï¼Œé¿å…å¼ºåˆ¶ç”¨æˆ·ä½¿ç”¨ä½ çš„é…ç½®
2. æä¾›åˆç†çš„é»˜è®¤å€¼ï¼Œä½†å…è®¸ç”¨æˆ·è‡ªå®šä¹‰
3. ä½¿ç”¨spring-boot-configuration-processorç”Ÿæˆå…ƒæ•°æ®ï¼Œæä¾›IDEæ”¯æŒ
4. éµå¾ªå‘½åçº¦å®šï¼šXxxAutoConfigurationä½œä¸ºé…ç½®ç±»åï¼ŒXxxPropertiesä½œä¸ºå±æ€§ç±»å
:::

## 3. é…ç½®ç®¡ç†

Spring Bootæä¾›äº†çµæ´»ä¸”å¼ºå¤§çš„é…ç½®æœºåˆ¶ï¼Œæ”¯æŒå¤šç§é…ç½®æ–¹å¼å’Œé…ç½®ä¼˜å…ˆçº§ã€‚

:::tip æ ¸å¿ƒæ¦‚å¿µ
ğŸ”§ **é…ç½®ç®¡ç†**ï¼šSpring Bootå…è®¸é€šè¿‡å±æ€§æ–‡ä»¶ã€YAMLæ–‡ä»¶ã€ç¯å¢ƒå˜é‡ã€å‘½ä»¤è¡Œå‚æ•°ç­‰å¤šç§æ–¹å¼é…ç½®åº”ç”¨ï¼Œå¹¶æä¾›äº†çµæ´»çš„å±æ€§ç»‘å®šåŠŸèƒ½ã€‚
:::

```mermaid
graph TD
    A[é…ç½®æ¥æº] --> B[å‘½ä»¤è¡Œå‚æ•°]
    A --> C[æ“ä½œç³»ç»Ÿç¯å¢ƒå˜é‡]
    A --> D[ç³»ç»Ÿå±æ€§]
    A --> E[é…ç½®æ–‡ä»¶]
    A --> F[é»˜è®¤å±æ€§]
    
    E --> E1[application.properties]
    E --> E2[application.yml]
    E --> E3["application-{profile}.properties"]
    E --> E4["application-{profile}.yml"]
    
    style A fill:#f9f,stroke:#333,stroke-width:1px
    style E fill:#ccf,stroke:#333,stroke-width:1px
```

### 3.1 é…ç½®æ–‡ä»¶æ ¼å¼

Spring Bootæ”¯æŒPropertieså’ŒYAMLä¸¤ç§ä¸»è¦çš„é…ç½®æ–‡ä»¶æ ¼å¼ã€‚

<Tabs>
  <TabItem value="properties" label="Propertiesæ ¼å¼" default>
  
  Propertiesæ˜¯ä¼ ç»Ÿçš„Javaé…ç½®æ–‡ä»¶æ ¼å¼ï¼Œä½¿ç”¨é”®å€¼å¯¹æ–¹å¼ï¼š
  
  ```properties title="application.properties"
  # æœåŠ¡å™¨é…ç½®
  server.port=8080
  server.servlet.context-path=/api
  
  # æ•°æ®æºé…ç½®
  spring.datasource.url=jdbc:mysql://localhost:3306/mydb
  spring.datasource.username=user
  spring.datasource.password=password
  spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
  
  # JPAé…ç½®
  spring.jpa.hibernate.ddl-auto=update
  spring.jpa.show-sql=true
  spring.jpa.properties.hibernate.format_sql=true
  
  # è‡ªå®šä¹‰å±æ€§
  app.name=My Spring Boot App
  app.description=A sample Spring Boot application
  app.version=1.0.0
  ```
  
  <div className="card">
  <div className="card__header">
  <h4>Propertiesæ ¼å¼ç‰¹ç‚¹</h4>
  </div>
  <div className="card__body">
  
  **ä¼˜ç‚¹**ï¼š
  - ä¼ ç»Ÿæ ¼å¼ï¼Œå…¼å®¹æ€§å¥½
  - å·¥å…·æ”¯æŒå¹¿æ³›
  - è¯­æ³•ç®€å•ç›´è§‚
  
  **ç¼ºç‚¹**ï¼š
  - å±‚æ¬¡ç»“æ„ä¸ç›´è§‚
  - ä¸æ”¯æŒå¤æ‚æ•°æ®ç±»å‹
  - é…ç½®é¡¹å¤šæ—¶ä¸æ˜“ç»´æŠ¤
  
  </div>
  </div>
  </TabItem>
  
  <TabItem value="yaml" label="YAMLæ ¼å¼">
  
  YAMLæ ¼å¼æ›´ç°ä»£åŒ–ï¼Œæ”¯æŒå±‚æ¬¡ç»“æ„ï¼Œæ›´æ˜“äºé˜…è¯»å’Œç»´æŠ¤ï¼š

```yaml title="application.yml"
  # æœåŠ¡å™¨é…ç½®
server:
  port: 8080
  servlet:
    context-path: /api

  # æ•°æ®æºé…ç½®
spring:
  datasource:
      url: jdbc:mysql://localhost:3306/mydb
      username: user
    password: password
      driver-class-name: com.mysql.cj.jdbc.Driver
  
    # JPAé…ç½®
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
          format_sql: true
  
  # è‡ªå®šä¹‰å±æ€§
  app:
    name: My Spring Boot App
    description: A sample Spring Boot application
    version: 1.0.0
    
    # å¤æ‚ç±»å‹ç¤ºä¾‹
    security:
      enabled: true
      roles:
        - USER
        - ADMIN
      rate-limits:
        basic: 10
        premium: 100
  ```
  
  <div className="card">
  <div className="card__header">
  <h4>YAMLæ ¼å¼ç‰¹ç‚¹</h4>
  </div>
  <div className="card__body">
  
  **ä¼˜ç‚¹**ï¼š
  - å±‚æ¬¡ç»“æ„æ¸…æ™°
  - æ”¯æŒå¤æ‚æ•°æ®ç±»å‹ï¼ˆåˆ—è¡¨ã€æ˜ å°„ç­‰ï¼‰
  - æ”¯æŒæ–‡æ¡£åˆ†éš”ç¬¦ï¼ˆå¯åœ¨åŒä¸€æ–‡ä»¶ä¸­å®šä¹‰å¤šç¯å¢ƒé…ç½®ï¼‰
  - å‡å°‘é‡å¤å‰ç¼€
  - æ”¯æŒå¼•ç”¨å’Œé”šç‚¹
  
  **ç¼ºç‚¹**ï¼š
  - å¯¹ç¼©è¿›æ•æ„Ÿ
  - è¯­æ³•ç›¸å¯¹å¤æ‚
  
  </div>
  </div>
  </TabItem>
</Tabs>

### 3.2 å¤šç¯å¢ƒé…ç½®

Spring Booté€šè¿‡profilesæœºåˆ¶æ”¯æŒå¤šç¯å¢ƒé…ç½®ï¼Œå¯ä»¥æ ¹æ®ä¸åŒçš„ç¯å¢ƒï¼ˆå¦‚å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰åŠ è½½ä¸åŒçš„é…ç½®ã€‚

```mermaid
flowchart TD
    A[é…ç½®æ–‡ä»¶] --> B[é€šç”¨é…ç½®<br>application.yml/properties]
    A --> C[ç‰¹å®šç¯å¢ƒé…ç½®]
    C --> D[å¼€å‘ç¯å¢ƒ<br>application-dev.yml]
    C --> E[æµ‹è¯•ç¯å¢ƒ<br>application-test.yml]
    C --> F[ç”Ÿäº§ç¯å¢ƒ<br>application-prod.yml]
    B --> G[åº”ç”¨ç¨‹åº]
    D --> G
    E --> G
    F --> G
    H[Profileæ¿€æ´»æ–¹å¼] --> I[å‘½ä»¤è¡Œå‚æ•°]
    H --> J[ç¯å¢ƒå˜é‡]
    H --> K[JVMç³»ç»Ÿå±æ€§]
    H --> L[é…ç½®æ–‡ä»¶ä¸­æŒ‡å®š]
    
    style A fill:#f9f,stroke:#333,stroke-width:1px
    style H fill:#ccf,stroke:#333,stroke-width:1px
```

<Tabs>
  <TabItem value="multi-profile" label="å¤šProfileé…ç½®" default>
  
  ä½¿ç”¨ä¸åŒæ–‡ä»¶é…ç½®ä¸åŒç¯å¢ƒï¼š
  
  ```yaml title="application.ymlï¼ˆé€šç”¨é…ç½®ï¼‰"
  spring:
    application:
      name: my-application

logging:
  level:
    root: INFO
  ```
  
  ```yaml title="application-dev.ymlï¼ˆå¼€å‘ç¯å¢ƒï¼‰"
  spring:
    datasource:
      url: jdbc:h2:mem:devdb
      username: sa
      password: 
    
  logging:
    level:
      com.example: DEBUG
  ```
  
  ```yaml title="application-prod.ymlï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰"
  spring:
    datasource:
      url: jdbc:mysql://prod-server:3306/proddb
      username: produser
      password: prodpass
      
  logging:
    level:
      root: WARN
      com.example: INFO
  ```
  </TabItem>
  
  <TabItem value="single-file" label="å•æ–‡ä»¶å¤šProfile">
  
  åœ¨åŒä¸€ä¸ªYAMLæ–‡ä»¶ä¸­ä½¿ç”¨æ–‡æ¡£åˆ†éš”ç¬¦(`---`)é…ç½®ä¸åŒç¯å¢ƒï¼š
  
  ```yaml title="application.yml"
  # é»˜è®¤é…ç½®
spring:
    application:
      name: my-application
      
  logging:
    level:
      root: INFO
      
  ---
  # å¼€å‘ç¯å¢ƒé…ç½®
spring:
    config:
      activate:
        on-profile: dev
  datasource:
      url: jdbc:h2:mem:devdb
      username: sa
      password: 

logging:
  level:
    com.example: DEBUG

---
  # ç”Ÿäº§ç¯å¢ƒé…ç½®
spring:
    config:
      activate:
        on-profile: prod
  datasource:
      url: jdbc:mysql://prod-server:3306/proddb
      username: produser
      password: prodpass

logging:
  level:
      root: WARN
      com.example: INFO
  ```
  </TabItem>
  
  <TabItem value="activation" label="Profileæ¿€æ´»æ–¹å¼">
  
  æœ‰å¤šç§æ–¹å¼å¯ä»¥æ¿€æ´»ç‰¹å®šçš„profileï¼š
  
  ```yaml title="åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®š"
  spring:
    profiles:
      active: dev
  ```
  
  ```shell title="å‘½ä»¤è¡Œå‚æ•°"
  # ä½¿ç”¨--spring.profiles.activeæ¿€æ´»æŒ‡å®šçš„profile
  java -jar myapp.jar --spring.profiles.active=dev
  ```
  
  ```shell title="ç¯å¢ƒå˜é‡"
  # ä½¿ç”¨SPRING_PROFILES_ACTIVEç¯å¢ƒå˜é‡
  export SPRING_PROFILES_ACTIVE=dev
  java -jar myapp.jar
  ```
  
  ```java title="ä»£ç ä¸­æŒ‡å®š"
  public static void main(String[] args) {
      SpringApplication application = new SpringApplication(MyApplication.class);
      application.setAdditionalProfiles("dev");
      application.run(args);
  }
  ```
  
  <div className="card">
  <div className="card__header">
  <h4>Profileæ¿€æ´»ä¼˜å…ˆçº§</h4>
  </div>
  <div className="card__body">
  
  æ¿€æ´»Profileçš„ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š
  1. å‘½ä»¤è¡Œå‚æ•°ï¼š`--spring.profiles.active=dev`
  2. æµ‹è¯•ä¸­é€šè¿‡`@ActiveProfiles`æ³¨è§£æ¿€æ´»
  3. JVMç³»ç»Ÿå±æ€§ï¼š`-Dspring.profiles.active=dev`
  4. ç¯å¢ƒå˜é‡ï¼š`SPRING_PROFILES_ACTIVE=dev`
  5. `application.properties`æˆ–`application.yml`æ–‡ä»¶ä¸­çš„`spring.profiles.active`å±æ€§
  
  </div>
  </div>
  </TabItem>
</Tabs>

### 3.3 é…ç½®å±æ€§ç»‘å®š

Spring Bootæä¾›äº†å¼ºå¤§çš„å±æ€§ç»‘å®šæœºåˆ¶ï¼Œå¯ä»¥å°†é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§ç»‘å®šåˆ°Javaå¯¹è±¡ã€‚

<Tabs>
  <TabItem value="value" label="@Valueæ³¨è§£" default>
  
  `@Value`æ³¨è§£æ˜¯å±æ€§æ³¨å…¥çš„åŸºæœ¬æ–¹å¼ï¼Œç”¨äºå•ä¸ªå±æ€§çš„æ³¨å…¥ï¼š
  
  ```java title="@Valueæ³¨è§£ç¤ºä¾‹"
  @RestController
  public class AppController {
      
      @Value("${app.name}")
      private String appName;
      
      @Value("${app.description:Default description}")  // æä¾›é»˜è®¤å€¼
      private String appDescription;
      
      @Value("${server.port}")
      private int serverPort;
      
      @Value("${app.enabled:false}")  // é»˜è®¤ä¸ºfalse
      private boolean appEnabled;
      
      @Value("${app.list-values}")
      private String[] listValues;
      
      @Value("#{${app.map-values}}")  // æ³¨å…¥Mapéœ€è¦SpELè¡¨è¾¾å¼
      private Map<String, Integer> mapValues;
      
      @GetMapping("/config")
      public Map<String, Object> getConfig() {
          Map<String, Object> config = new HashMap<>();
          config.put("name", appName);
          config.put("description", appDescription);
          config.put("port", serverPort);
          config.put("enabled", appEnabled);
          config.put("listValues", listValues);
          config.put("mapValues", mapValues);
          return config;
      }
  }
  ```
  </TabItem>
  
  <TabItem value="config-properties" label="@ConfigurationProperties">
  
  `@ConfigurationProperties`æ³¨è§£ç”¨äºç»‘å®šç›¸å…³é…ç½®åˆ°ä¸€ä¸ªJava Beanï¼Œé€‚åˆæ‰¹é‡å±æ€§ç»‘å®šï¼š
  
  ```java title="@ConfigurationPropertiesæ³¨è§£ç¤ºä¾‹"
@Component
  @ConfigurationProperties(prefix = "app")
  public class AppProperties {
      
      private String name;
      private String description;
      private String version;
      private boolean enabled;
      private List<String> listValues = new ArrayList<>();
      private Map<String, Integer> mapValues = new HashMap<>();
      
      // åµŒå¥—é…ç½®
      private Security security = new Security();
      
      // getterå’Œsetteræ–¹æ³•...
      
      public static class Security {
          private boolean enabled;
          private List<String> roles = new ArrayList<>();
          private Map<String, Integer> rateLimits = new HashMap<>();
          
          // getterå’Œsetteræ–¹æ³•...
      }
  }
  ```
  
  ```java title="ä½¿ç”¨é…ç½®å±æ€§ç±»"
  @Service
  public class AppService {
      
      private final AppProperties appProperties;
      
      public AppService(AppProperties appProperties) {
          this.appProperties = appProperties;
      }
      
      public void doSomething() {
          if (appProperties.isEnabled()) {
              // ä½¿ç”¨é…ç½®å±æ€§...
              System.out.println("App name: " + appProperties.getName());
              System.out.println("Security enabled: " + 
                  appProperties.getSecurity().isEnabled());
          }
      }
  }
  ```
  </TabItem>
  
  <TabItem value="enable-properties" label="@EnableConfigurationProperties">
  
  ä½¿ç”¨`@EnableConfigurationProperties`æ³¨è§£å¯ä»¥åœ¨ä¸ä½¿ç”¨`@Component`çš„æƒ…å†µä¸‹åˆ›å»ºé…ç½®å±æ€§ç±»çš„Beanï¼š
  
  ```java title="@EnableConfigurationPropertiesç¤ºä¾‹"
@Configuration
  @EnableConfigurationProperties(MyServiceProperties.class)
  public class MyServiceConfiguration {
    
    @Bean
      public MyService myService(MyServiceProperties properties) {
          return new MyService(properties.getApiUrl(), 
                             properties.getTimeout(), 
                             properties.isSecure());
      }
  }
  
  @ConfigurationProperties(prefix = "service")
  public class MyServiceProperties {
      
      /**
       * Service API URL.
       */
      private String apiUrl;
      
      /**
       * Connection timeout in milliseconds.
       */
      private int timeout = 1000;
      
      /**
       * Whether to use secure connection.
       */
      private boolean secure = false;
      
      // getterå’Œsetteræ–¹æ³•...
  }
  ```
  </TabItem>
</Tabs>

<div className="card">
<div className="card__header">
<h4>@ConfigurationProperties vs @Value</h4>
</div>
<div className="card__body">

| ç‰¹æ€§ | @ConfigurationProperties | @Value |
|------|-------------------------|--------|
| **æ¾æ•£ç»‘å®š** | æ”¯æŒï¼ˆå¦‚my-service-urlç»‘å®šåˆ°myServiceUrlï¼‰ | ä¸æ”¯æŒ |
| **å…ƒæ•°æ®æ”¯æŒ** | æ”¯æŒï¼ˆå¯ç”Ÿæˆé…ç½®å…ƒæ•°æ®ï¼‰ | ä¸æ”¯æŒ |
| **å¤æ‚ç±»å‹** | æ”¯æŒåµŒå¥—å¯¹è±¡ã€åˆ—è¡¨ã€Mapç­‰ | æœ‰é™æ”¯æŒ |
| **é»˜è®¤å€¼** | åœ¨ç±»ä¸­å®šä¹‰ | åœ¨æ³¨è§£ä¸­å®šä¹‰ |
| **æ‰¹é‡å¯¼å…¥** | ä¸€ä¸ªç±»ç»‘å®šå¤šä¸ªå±æ€§ | æ¯ä¸ªå±æ€§å•ç‹¬ç»‘å®š |
| **è¡¨è¾¾å¼è¯­è¨€** | ä¸æ”¯æŒ | æ”¯æŒSpEL |
| **å±æ€§è½¬æ¢** | è‡ªåŠ¨ç±»å‹è½¬æ¢ | æœ‰é™çš„ç±»å‹è½¬æ¢ |
| **æ ¡éªŒ** | æ”¯æŒJSR-303æ³¨è§£ | ä¸æ”¯æŒ |

</div>
</div>

:::caution é…ç½®ä¼˜å…ˆçº§
Spring Booté…ç½®çš„ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼š
1. å‘½ä»¤è¡Œå‚æ•°
2. Javaç³»ç»Ÿå±æ€§(`System.getProperties()`)
3. æ“ä½œç³»ç»Ÿç¯å¢ƒå˜é‡
4. `application-{profile}.properties`å¤–éƒ¨æ–‡ä»¶
5. `application.properties`å¤–éƒ¨æ–‡ä»¶
6. `application-{profile}.properties`å†…éƒ¨æ–‡ä»¶
7. `application.properties`å†…éƒ¨æ–‡ä»¶
8. `@PropertySource`æ³¨è§£å¼•å…¥çš„å±æ€§æ–‡ä»¶
9. é»˜è®¤å±æ€§
:::

### 3.4 å±æ€§åŠ å¯†ä¸æ•æ„Ÿä¿¡æ¯

åœ¨å®é™…åº”ç”¨ä¸­ï¼Œé…ç½®æ–‡ä»¶å¯èƒ½åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚æ•°æ®åº“å¯†ç ã€APIå¯†é’¥ç­‰ï¼‰ï¼ŒSpring Bootæä¾›äº†å¤šç§æ–¹å¼å¤„ç†æ•æ„Ÿé…ç½®ï¼š

```java title="ä½¿ç”¨JasyptåŠ å¯†é…ç½®ç¤ºä¾‹"
// æ·»åŠ Jasyptä¾èµ–
// implementation 'com.github.ulisesbocchio:jasypt-spring-boot-starter:3.0.4'

@SpringBootApplication
@EnableEncryptableProperties
public class MyApplication {
    
    public static void main(String[] args) {
        SpringApplication.run(MyApplication.class, args);
    }
}
```

```yaml title="åŠ å¯†å±æ€§ç¤ºä¾‹"
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/mydb
    username: dbuser
    # åŠ å¯†çš„å¯†ç 
    password: ENC(G5n+K5LQum+dFiNbgd+F5kAm0FyYpaIP)
```

```shell title="åŠ å¯†å‘½ä»¤"
# åŠ å¯†å¯†ç 
java -jar jasypt-1.9.3.jar encrypt.bat input=mypassword password=mysecretkey
```

## 4. Spring Bootå¯åŠ¨æµç¨‹

Spring Bootå¯åŠ¨è¿‡ç¨‹æ˜¯ä¸€ä¸ªå¤æ‚è€Œç²¾å·§çš„æµç¨‹ï¼Œå…¶ä¸­åŒ…å«äº†å¤šä¸ªå…³é”®æ­¥éª¤å’Œäº‹ä»¶ã€‚

:::tip æ ¸å¿ƒæ¦‚å¿µ
ğŸš€ **å¯åŠ¨æµç¨‹**ï¼šSpring Bootåº”ç”¨å¯åŠ¨æ—¶ä¼šç»å†åˆ›å»ºSpringApplicationå¯¹è±¡ã€å‡†å¤‡ç¯å¢ƒã€åˆ›å»ºä¸Šä¸‹æ–‡ã€åŠ è½½Beanå®šä¹‰å’Œåˆ·æ–°ä¸Šä¸‹æ–‡ç­‰ä¸€ç³»åˆ—æ­¥éª¤ï¼Œæ¯ä¸ªæ­¥éª¤éƒ½æœ‰ç‰¹å®šçš„ä½œç”¨å’Œäº‹ä»¶é€šçŸ¥æœºåˆ¶ã€‚
:::

```mermaid
sequenceDiagram
    participant App as åº”ç”¨å¯åŠ¨ç±»
    participant SA as SpringApplication
    participant Env as Environment
    participant AC as ApplicationContext
    participant AL as ApplicationListeners
    participant AB as AutoConfiguration
    
    App->>SA: è°ƒç”¨SpringApplication.run()
    SA->>SA: åˆ›å»ºSpringApplicationå¯¹è±¡
    Note over SA: æ¨æ–­åº”ç”¨ç±»å‹<br>è®¾ç½®åˆå§‹åŒ–å™¨<br>è®¾ç½®ç›‘å¬å™¨
    SA->>AL: å‘å¸ƒApplicationStartingEvent
    SA->>SA: å‡†å¤‡ç¯å¢ƒ
    SA->>AL: å‘å¸ƒApplicationEnvironmentPreparedEvent
    SA->>AC: åˆ›å»ºApplicationContext
    Note over AC: æ ¹æ®åº”ç”¨ç±»å‹åˆ›å»ºä¸åŒçš„ä¸Šä¸‹æ–‡
    SA->>AC: å‡†å¤‡ä¸Šä¸‹æ–‡
    SA->>AL: å‘å¸ƒApplicationContextInitializedEvent
    SA->>AC: åŠ è½½Beanå®šä¹‰
    SA->>AL: å‘å¸ƒApplicationPreparedEvent
    SA->>AC: åˆ·æ–°ä¸Šä¸‹æ–‡
    AC->>AB: å¤„ç†è‡ªåŠ¨é…ç½®
    AC->>AC: å®ä¾‹åŒ–å•ä¾‹Bean
    SA->>AL: å‘å¸ƒApplicationStartedEvent
    SA->>SA: è°ƒç”¨ApplicationRunnerå’ŒCommandLineRunner
    SA->>AL: å‘å¸ƒApplicationReadyEvent
```

### 4.1 å¯åŠ¨æµç¨‹è¯¦è§£

Spring Bootçš„å¯åŠ¨æµç¨‹å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªå…³é”®æ­¥éª¤ï¼š

<div className="card">
<div className="card__header">
<h4>Spring Bootå¯åŠ¨æµç¨‹æ­¥éª¤</h4>
</div>
<div className="card__body">

1. **åˆ›å»ºSpringApplicationå¯¹è±¡**
   - æ¨æ–­åº”ç”¨ç±»å‹ï¼ˆSERVLETã€REACTIVEã€NONEï¼‰
   - è®¾ç½®åˆå§‹åŒ–å™¨ï¼ˆApplicationContextInitializerï¼‰
   - è®¾ç½®ç›‘å¬å™¨ï¼ˆApplicationListenerï¼‰
   - æ¨æ–­ä¸»åº”ç”¨ç±»

2. **è¿è¡ŒSpringApplication**
   - åˆ›å»ºå¹¶å¯åŠ¨StopWatchï¼ˆç”¨äºè®°å½•å¯åŠ¨æ—¶é—´ï¼‰
   - åˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡ç¯å¢ƒï¼ˆConfigurableEnvironmentï¼‰
   - å‡†å¤‡ä¸Šä¸‹æ–‡ï¼ˆApplicationContextï¼‰
   - åˆ·æ–°ä¸Šä¸‹æ–‡
   - åº”ç”¨ä¸Šä¸‹æ–‡åç½®å¤„ç†
   - å‘å¸ƒåº”ç”¨å¯åŠ¨å®Œæˆäº‹ä»¶

3. **å‡†å¤‡Environment**
   - åˆ›å»ºå’Œé…ç½®ç¯å¢ƒå¯¹è±¡
   - è¯»å–æ‰€æœ‰é…ç½®æºçš„é…ç½®å±æ€§
   - å¤„ç†profiles

4. **åˆ›å»ºApplicationContext**
   - æ ¹æ®åº”ç”¨ç±»å‹åˆ›å»ºå¯¹åº”çš„ä¸Šä¸‹æ–‡
     - SERVLETç±»å‹ï¼š`AnnotationConfigServletWebServerApplicationContext`
     - REACTIVEç±»å‹ï¼š`AnnotationConfigReactiveWebServerApplicationContext`
     - éWebåº”ç”¨ï¼š`AnnotationConfigApplicationContext`

5. **åˆ·æ–°ApplicationContext**
   - å¤„ç†Beanå®šä¹‰
   - åˆå§‹åŒ–éå»¶è¿ŸåŠ è½½çš„å•ä¾‹Bean
   - å¯åŠ¨åµŒå…¥å¼WebæœåŠ¡å™¨ï¼ˆå¦‚æœæ˜¯Webåº”ç”¨ï¼‰

6. **æ‰§è¡ŒRunner**
   - æŒ‰é¡ºåºæ‰§è¡Œæ‰€æœ‰`CommandLineRunner`å’Œ`ApplicationRunner`

</div>
</div>

<details>
<summary>SpringApplicationå¯åŠ¨æºç åˆ†æ</summary>

```java title="SpringApplicationæ ¸å¿ƒæ–¹æ³•"
    public ConfigurableApplicationContext run(String... args) {
        StopWatch stopWatch = new StopWatch();
        stopWatch.start();
        ConfigurableApplicationContext context = null;
        Collection<SpringBootExceptionReporter> exceptionReporters = new ArrayList<>();
        
    // 1. é…ç½®headlesså±æ€§
        configureHeadlessProperty();
    
    // 2. è·å–å¹¶å¯åŠ¨æ‰€æœ‰çš„SpringApplicationRunListener
        SpringApplicationRunListeners listeners = getRunListeners(args);
        listeners.starting();
        
        try {
        // 3. åˆ›å»ºApplicationArgumentså¯¹è±¡
            ApplicationArguments applicationArguments = new DefaultApplicationArguments(args);
        
        // 4. å‡†å¤‡ç¯å¢ƒ
            ConfigurableEnvironment environment = prepareEnvironment(listeners, applicationArguments);
            configureIgnoreBeanInfo(environment);
        
        // 5. æ‰“å°Banner
            Banner printedBanner = printBanner(environment);
        
        // 6. åˆ›å»ºApplicationContext
            context = createApplicationContext();
        
        // 7. è·å–å¼‚å¸¸æŠ¥å‘Šå™¨
        exceptionReporters = getSpringFactoriesInstances(
                SpringBootExceptionReporter.class,
                new Class[] { ConfigurableApplicationContext.class }, context);
        
        // 8. å‡†å¤‡ä¸Šä¸‹æ–‡
            prepareContext(context, environment, listeners, applicationArguments, printedBanner);
        
        // 9. åˆ·æ–°ä¸Šä¸‹æ–‡
            refreshContext(context);
        
        // 10. åˆ·æ–°ä¸Šä¸‹æ–‡åçš„æ“ä½œ
            afterRefresh(context, applicationArguments);
        
        // 11. åœæ­¢è®¡æ—¶å™¨å¹¶è¾“å‡ºå¯åŠ¨æ—¥å¿—
            stopWatch.stop();
            if (this.logStartupInfo) {
            new StartupInfoLogger(this.mainApplicationClass)
                    .logStarted(getApplicationLog(), stopWatch);
            }
        
        // 12. å‘å¸ƒåº”ç”¨å·²å¯åŠ¨äº‹ä»¶
            listeners.started(context);
        
        // 13. è°ƒç”¨æ‰€æœ‰Runner
            callRunners(context, applicationArguments);
    }
    catch (Throwable ex) {
            handleRunFailure(context, ex, exceptionReporters, listeners);
            throw new IllegalStateException(ex);
        }
        
        try {
        // 14. å‘å¸ƒåº”ç”¨å°±ç»ªäº‹ä»¶
            listeners.running(context);
    }
    catch (Throwable ex) {
            handleRunFailure(context, ex, exceptionReporters, null);
            throw new IllegalStateException(ex);
        }
    
    // 15. è¿”å›ä¸Šä¸‹æ–‡
        return context;
}
```

</details>

### 4.2 äº‹ä»¶ç›‘å¬æœºåˆ¶

Spring Bootå¯åŠ¨è¿‡ç¨‹ä¸­ä¼šå‘å¸ƒä¸€ç³»åˆ—äº‹ä»¶ï¼Œåº”ç”¨å¯ä»¥é€šè¿‡ç›‘å¬è¿™äº›äº‹ä»¶æ¥æ‰§è¡Œç‰¹å®šçš„æ“ä½œã€‚

```mermaid
graph TD
    A[Spring Bootäº‹ä»¶] --> B[ApplicationStartingEvent]
    A --> C[ApplicationEnvironmentPreparedEvent]
    A --> D[ApplicationContextInitializedEvent]
    A --> E[ApplicationPreparedEvent]
    A --> F[ApplicationStartedEvent]
    A --> G[ApplicationReadyEvent]
    A --> H[ApplicationFailedEvent]
    
    B --> B1["åº”ç”¨å¯åŠ¨æ—¶<br>æ¡†æ¶å¯åŠ¨å¼€å§‹"]
    C --> C1["ç¯å¢ƒå‡†å¤‡å°±ç»ª<br>ä¸Šä¸‹æ–‡åˆ›å»ºä¹‹å‰"]
    D --> D1["ä¸Šä¸‹æ–‡å·²åˆ›å»ºå¹¶å‡†å¤‡<br>ä½†å°šæœªåŠ è½½Beanå®šä¹‰"]
    E --> E1["ä¸Šä¸‹æ–‡å·²åˆ·æ–°<br>ä½†å°šæœªå¯åŠ¨"]
    F --> F1["ä¸Šä¸‹æ–‡å·²åˆ·æ–°<br>Runneræ‰§è¡Œå‰"]
    G --> G1["åº”ç”¨å·²å¯åŠ¨<br>Runnerå·²æ‰§è¡Œ"]
    H --> H1["å¯åŠ¨å¤±è´¥<br>å¼‚å¸¸å¤„ç†"]
    
    style A fill:#f9f,stroke:#333,stroke-width:1px
```

<Tabs>
  <TabItem value="listener" label="äº‹ä»¶ç›‘å¬å™¨" default>
  
  Spring Bootæ”¯æŒä¸¤ç§æ–¹å¼æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨ï¼š

  ```java title="ApplicationListenerå®ç°"
@Component
  public class MyApplicationStartingListener 
      implements ApplicationListener<ApplicationStartingEvent> {
      
      private static final Logger logger = LoggerFactory.getLogger(MyApplicationStartingListener.class);
    
    @Override
      public void onApplicationEvent(ApplicationStartingEvent event) {
          logger.info("åº”ç”¨æ­£åœ¨å¯åŠ¨...");
          // åœ¨åº”ç”¨å¯åŠ¨å¼€å§‹æ—¶æ‰§è¡Œä¸€äº›æ“ä½œ
      }
  }
  ```
  
  ```java title="@EventListeneræ³¨è§£"
  @Component
  public class MyEventListener {
      
      private static final Logger logger = LoggerFactory.getLogger(MyEventListener.class);
      
      @EventListener
      public void handleApplicationReady(ApplicationReadyEvent event) {
          logger.info("åº”ç”¨å·²å‡†å¤‡å°±ç»ªï¼");
          // åº”ç”¨å‡†å¤‡å°±ç»ªæ—¶æ‰§è¡Œä¸€äº›æ“ä½œ
      }
      
      @EventListener
      public void handleContextRefreshed(ContextRefreshedEvent event) {
          logger.info("ä¸Šä¸‹æ–‡å·²åˆ·æ–°ï¼");
          // ä¸Šä¸‹æ–‡åˆ·æ–°æ—¶æ‰§è¡Œä¸€äº›æ“ä½œ
      }
  }
  ```
  
  :::caution æ³¨æ„äº‹é¡¹
  å¯¹äºåœ¨Springä¸Šä¸‹æ–‡åˆ›å»ºä¹‹å‰è§¦å‘çš„äº‹ä»¶ï¼ˆå¦‚`ApplicationStartingEvent`ï¼‰ï¼Œç›‘å¬å™¨ä¸èƒ½é€šè¿‡`@Component`æ³¨å†Œï¼Œå¿…é¡»é€šè¿‡`META-INF/spring.factories`æ–‡ä»¶æˆ–åœ¨`SpringApplication.addListeners()`æ–¹æ³•ä¸­æ˜¾å¼æ·»åŠ ã€‚
  :::
  
  ```properties title="META-INF/spring.factories"
  # æ³¨å†Œæ—©æœŸäº‹ä»¶ç›‘å¬å™¨
  org.springframework.context.ApplicationListener=\
  com.example.MyApplicationStartingListener,\
  com.example.MyEnvironmentPreparedListener
  ```
  </TabItem>
  
  <TabItem value="runners" label="è¿è¡Œå™¨">
  
  Spring Bootæä¾›äº†ä¸¤ç§ç±»å‹çš„è¿è¡Œå™¨æ¥å£ï¼Œç”¨äºåœ¨åº”ç”¨ä¸Šä¸‹æ–‡åˆ·æ–°åã€åº”ç”¨å®Œå…¨å¯åŠ¨å‰æ‰§è¡Œä»£ç ï¼š
  
  ```java title="CommandLineRunnerç¤ºä¾‹"
@Component
  @Order(1)  // è¾ƒä½çš„æ•°å€¼æ„å‘³ç€æ›´é«˜çš„ä¼˜å…ˆçº§
  public class MyCommandLineRunner implements CommandLineRunner {
      
      private final Logger logger = LoggerFactory.getLogger(getClass());
    
    @Override
      public void run(String... args) throws Exception {
          logger.info("åœ¨åº”ç”¨å¯åŠ¨æ—¶æ‰§è¡Œï¼Œå‘½ä»¤è¡Œå‚æ•°ï¼š{}", Arrays.toString(args));
          // åˆå§‹åŒ–æ“ä½œ...
      }
  }
  ```
  
  ```java title="ApplicationRunnerç¤ºä¾‹"
@Component
  @Order(2)
  public class MyApplicationRunner implements ApplicationRunner {
      
      private final Logger logger = LoggerFactory.getLogger(getClass());
    
    @Override
      public void run(ApplicationArguments args) throws Exception {
          logger.info("åœ¨åº”ç”¨å¯åŠ¨æ—¶æ‰§è¡Œ");
          logger.info("é€‰é¡¹å‚æ•°: {}", args.getOptionNames());
          logger.info("éé€‰é¡¹å‚æ•°: {}", args.getNonOptionArgs());
          // åˆå§‹åŒ–æ“ä½œ...
    }
}
```

  <div className="card">
  <div className="card__header">
  <h4>Runnerå¯¹æ¯”</h4>
  </div>
  <div className="card__body">
  
  | ç‰¹æ€§ | CommandLineRunner | ApplicationRunner |
  |------|------------------|-------------------|
  | **å‚æ•°ç±»å‹** | åŸå§‹å­—ç¬¦ä¸²æ•°ç»„ | ApplicationArgumentsæ¥å£ |
  | **å‚æ•°å¤„ç†** | éœ€è¦æ‰‹åŠ¨è§£æ | å·²ç»è§£æå¥½çš„å‚æ•° |
  | **æ‰§è¡Œé¡ºåº** | @Orderæ§åˆ¶ | @Orderæ§åˆ¶ |
  | **é€‚ç”¨åœºæ™¯** | ç®€å•å‚æ•°å¤„ç† | å¤æ‚å‚æ•°å¤„ç† |
  
  </div>
  </div>
  </TabItem>
</Tabs>

### 4.3 åµŒå…¥å¼å®¹å™¨å¯åŠ¨

å¯¹äºWebåº”ç”¨ï¼ŒSpring Bootä¼šåœ¨å¯åŠ¨è¿‡ç¨‹ä¸­è‡ªåŠ¨é…ç½®å’Œå¯åŠ¨åµŒå…¥å¼WebæœåŠ¡å™¨ã€‚

```mermaid
graph TD
    A[åˆ·æ–°ApplicationContext] --> B[onRefreshæ–¹æ³•]
    B --> C[åˆ›å»ºWebServer]
    C --> D[è·å–Servletä¸Šä¸‹æ–‡]
    D --> E[å¯åŠ¨å†…åµŒå®¹å™¨]
    E --> F[å‘å¸ƒåµŒå…¥å¼å®¹å™¨å¯åŠ¨äº‹ä»¶]
    
    style A fill:#f9f,stroke:#333,stroke-width:1px
    style E fill:#cfc,stroke:#333,stroke-width:1px
```

```java title="å†…åµŒå®¹å™¨å¯åŠ¨è¿‡ç¨‹"
// ServletWebServerApplicationContextç±»ä¸­çš„createWebServeræ–¹æ³•
private void createWebServer() {
    WebServer webServer = this.webServer;
    ServletContext servletContext = getServletContext();
    
    if (webServer == null && servletContext == null) {
        // è·å–ServletWebServerFactory
        ServletWebServerFactory factory = getWebServerFactory();
        
        // åˆ›å»ºWebServer
        this.webServer = factory.getWebServer(getSelfInitializer());
        
        // æ³¨å†Œç‰¹æ®Šçš„Bean
        getBeanFactory().registerSingleton("webServerGracefulShutdown",
                new WebServerGracefulShutdownLifecycle(this.webServer));
        getBeanFactory().registerSingleton("webServerStartStop",
                new WebServerStartStopLifecycle(this, this.webServer));
    }
    else if (servletContext != null) {
        try {
            getSelfInitializer().onStartup(servletContext);
        }
        catch (ServletException ex) {
            throw new ApplicationContextException("Cannot initialize servlet context", ex);
        }
    }
    
    // åˆå§‹åŒ–å±æ€§æº
    initPropertySources();
}
```

### 4.4 è‡ªåŠ¨é…ç½®çš„å¤„ç†

åœ¨Spring Bootå¯åŠ¨è¿‡ç¨‹ä¸­ï¼Œè‡ªåŠ¨é…ç½®æ˜¯ä¸€ä¸ªé‡è¦çš„ç¯èŠ‚ï¼Œå®ƒå‘ç”Ÿåœ¨ApplicationContextåˆ·æ–°é˜¶æ®µã€‚

```mermaid
graph TD
    A[åˆ·æ–°ApplicationContext] --> B[æ‰§è¡ŒBeanFactoryPostProcessor]
    B --> C["å¤„ç†@Configurationç±»"]
    C --> D["å¤„ç†@Importæ³¨è§£"]
    D --> E["å¤„ç†@EnableAutoConfiguration"]
    E --> F[AutoConfigurationImportSelector]
    F --> G[åŠ è½½è‡ªåŠ¨é…ç½®ç±»]
    G --> H[åº”ç”¨æ¡ä»¶è¿‡æ»¤]
    H --> I[æ³¨å†Œè‡ªåŠ¨é…ç½®Beanå®šä¹‰]
    
    style A fill:#f9f,stroke:#333,stroke-width:1px
    style E fill:#cfc,stroke:#333,stroke-width:1px
```

è‡ªåŠ¨é…ç½®çš„æ ¸å¿ƒè¿‡ç¨‹ï¼š

1. åœ¨åº”ç”¨ä¸Šä¸‹æ–‡åˆ·æ–°é˜¶æ®µï¼Œå¤„ç†é…ç½®ç±»ä¸Šçš„`@Import`æ³¨è§£
2. æ£€æµ‹åˆ°`@EnableAutoConfiguration`æ³¨è§£ï¼Œè°ƒç”¨`AutoConfigurationImportSelector`
3. `AutoConfigurationImportSelector`ä»`META-INF/spring.factories`ä¸­åŠ è½½è‡ªåŠ¨é…ç½®ç±»
4. å¯¹è¿™äº›è‡ªåŠ¨é…ç½®ç±»åº”ç”¨æ¡ä»¶è¿‡æ»¤ï¼ˆ`@ConditionalOnXXX`ï¼‰
5. å°†ç­›é€‰åçš„è‡ªåŠ¨é…ç½®ç±»æ³¨å†Œä¸ºBeanå®šä¹‰
6. åœ¨Beanåˆå§‹åŒ–é˜¶æ®µåˆ›å»ºå’Œé…ç½®è¿™äº›Bean

## 5. èµ·æ­¥ä¾èµ–

Spring Bootçš„èµ·æ­¥ä¾èµ–æ˜¯ä¸€ç»„ç²¾å¿ƒè®¾è®¡çš„ä¾èµ–æè¿°ç¬¦ï¼Œç”¨äºç®€åŒ–ä¾èµ–ç®¡ç†ã€‚

:::tip æ ¸å¿ƒæ¦‚å¿µ
ğŸ“¦ **èµ·æ­¥ä¾èµ–**ï¼šSpring Bootçš„èµ·æ­¥ä¾èµ–æ˜¯ä¸€ç§ç‰¹æ®Šçš„Mavenä¾èµ–ï¼Œå®ƒå¯ä»¥ä¼ é€’å¼•å…¥æ‰€æœ‰éœ€è¦çš„ä¾èµ–é¡¹ï¼Œç®€åŒ–é¡¹ç›®çš„ä¾èµ–ç®¡ç†ï¼Œä¿è¯ä¾èµ–ç‰ˆæœ¬çš„å…¼å®¹æ€§ã€‚
:::

```mermaid
graph TD
    A[èµ·æ­¥ä¾èµ–] --> B[ä¼ é€’ä¾èµ–è§£æ]
    B --> C[ä¾èµ–ç®¡ç†]
    C --> D[ç‰ˆæœ¬å…¼å®¹æ€§ä¿è¯]
    
    A --> E[æ ¹æ®åŠŸèƒ½åˆ†ç±»]
    E --> F[Webä¾èµ–]
    E --> G[æ•°æ®è®¿é—®ä¾èµ–]
    E --> H[æµ‹è¯•ä¾èµ–]
    E --> I[å…¶ä»–åŠŸèƒ½ä¾èµ–]
    
    F --> F1[spring-boot-starter-web]
    F --> F2[spring-boot-starter-webflux]
    
    G --> G1[spring-boot-starter-data-jpa]
    G --> G2[spring-boot-starter-jdbc]
    G --> G3[spring-boot-starter-data-redis]
    
    style A fill:#f9f,stroke:#333,stroke-width:1px
    style B fill:#cfc,stroke:#333,stroke-width:1px
```

### 5.1 èµ·æ­¥ä¾èµ–åŸç†

Spring Bootèµ·æ­¥ä¾èµ–çš„æ ¸å¿ƒåŸç†æ˜¯é€šè¿‡Mavençš„ä¾èµ–ä¼ é€’æœºåˆ¶ï¼Œå°†ä¸€ç»„ç›¸å…³çš„ä¾èµ–èšåˆåœ¨ä¸€èµ·ï¼Œå½¢æˆé’ˆå¯¹ç‰¹å®šåŠŸèƒ½çš„ä¾èµ–é›†åˆã€‚

<div className="card">
<div className="card__header">
<h4>èµ·æ­¥ä¾èµ–çš„å·¥ä½œåŸç†</h4>
</div>
<div className="card__body">

1. **ä¾èµ–èšåˆ**ï¼šå°†ä¸€ç»„ç›¸å…³çš„ä¾èµ–é¡¹èšåˆåœ¨ä¸€ä¸ªPOMæ–‡ä»¶ä¸­
2. **ä¾èµ–ä¼ é€’**ï¼šé€šè¿‡Mavençš„ä¾èµ–ä¼ é€’æœºåˆ¶ï¼Œå°†æ‰€æœ‰å¿…è¦çš„ä¾èµ–é¡¹å¼•å…¥é¡¹ç›®
3. **ç‰ˆæœ¬ç®¡ç†**ï¼šé€šè¿‡`spring-boot-dependencies`ç»Ÿä¸€ç®¡ç†æ‰€æœ‰ä¾èµ–é¡¹çš„ç‰ˆæœ¬
4. **è‡ªåŠ¨é…ç½®**ï¼šä¸è‡ªåŠ¨é…ç½®æœºåˆ¶ç»“åˆï¼Œæ ¹æ®ä¾èµ–è‡ªåŠ¨é…ç½®åº”ç”¨

</div>
</div>

```xml title="Spring Bootä¾èµ–ç®¡ç†ç¤ºä¾‹"
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-parent</artifactId>
    <version>2.7.0</version>
    <type>pom</type>
    <scope>import</scope>
</dependency>
```

```xml title="spring-boot-starter-webä¾èµ–ç»“æ„"
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-web</artifactId>
</dependency>

<!-- è¿™ä¸ªä¾èµ–ä¼šä¼ é€’æ€§åœ°å¼•å…¥ä»¥ä¸‹ä¾èµ– -->
<!-- spring-boot-starterï¼ˆæ ¸å¿ƒå¯åŠ¨å™¨ï¼‰ -->
<!-- spring-boot-starter-jsonï¼ˆJSONæ”¯æŒï¼‰ -->
<!-- spring-boot-starter-tomcatï¼ˆTomcatæœåŠ¡å™¨ï¼‰ -->
<!-- spring-webï¼ˆSpring Webæ ¸å¿ƒï¼‰ -->
<!-- spring-webmvcï¼ˆSpring MVCï¼‰ -->
<!-- ... ä»¥åŠå…¶ä»–ä¼ é€’æ€§ä¾èµ– -->
```

### 5.2 å¸¸ç”¨èµ·æ­¥ä¾èµ–

Spring Bootæä¾›äº†è®¸å¤šå¸¸ç”¨çš„èµ·æ­¥ä¾èµ–ï¼Œæ¶µç›–äº†ä¸åŒçš„åº”ç”¨åœºæ™¯å’ŒåŠŸèƒ½ã€‚

<Tabs>
  <TabItem value="web" label="Webåº”ç”¨" default>
  
  ```xml title="Webåº”ç”¨èµ·æ­¥ä¾èµ–"
  <!-- Spring MVC Webåº”ç”¨ -->
<dependency>
    <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-web</artifactId>
</dependency>

  <!-- å“åº”å¼Webåº”ç”¨ -->
  <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-webflux</artifactId>
  </dependency>
  
  <!-- WebSocketæ”¯æŒ -->
  <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-websocket</artifactId>
  </dependency>
  
  <!-- å®‰å…¨æ”¯æŒ -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-security</artifactId>
</dependency>
```

  <div className="card">
  <div className="card__header">
  <h4>Webèµ·æ­¥ä¾èµ–ç‰¹ç‚¹</h4>
  </div>
  <div className="card__body">
  
  **spring-boot-starter-web**åŒ…å«ï¼š
  - Spring MVC
  - å†…åµŒTomcatæœåŠ¡å™¨
  - Jackson JSONå¤„ç†
  - éªŒè¯æ¡†æ¶
  - æ—¥å¿—å’Œç›‘æ§
  
  **spring-boot-starter-webflux**åŒ…å«ï¼š
  - Spring WebFluxï¼ˆå“åº”å¼Webæ¡†æ¶ï¼‰
  - Nettyæˆ–UndertowæœåŠ¡å™¨
  - Reactive Streamsæ”¯æŒ
  
  **spring-boot-starter-security**åŒ…å«ï¼š
  - Spring Security
  - è®¤è¯å’Œæˆæƒæ”¯æŒ
  - å®‰å…¨è¿‡æ»¤å™¨é“¾
  
  </div>
  </div>
  </TabItem>
  
  <TabItem value="data" label="æ•°æ®è®¿é—®">
  
  ```xml title="æ•°æ®è®¿é—®èµ·æ­¥ä¾èµ–"
  <!-- JPAæ•°æ®è®¿é—® -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-data-jpa</artifactId>
        </dependency>

  <!-- JDBCæ•°æ®è®¿é—® -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-jdbc</artifactId>
    </dependency>
    
  <!-- MongoDBæ•°æ®è®¿é—® -->
  <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-data-mongodb</artifactId>
  </dependency>
  
  <!-- Redisæ•°æ®è®¿é—® -->
  <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-data-redis</artifactId>
  </dependency>
  
  <!-- ElasticSearchæ•°æ®è®¿é—® -->
  <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-data-elasticsearch</artifactId>
  </dependency>
  ```
  
  <div className="card">
  <div className="card__header">
  <h4>æ•°æ®è®¿é—®ä¾èµ–ç‰¹ç‚¹</h4>
  </div>
  <div className="card__body">
  
  **spring-boot-starter-data-jpa**åŒ…å«ï¼š
  - Hibernate
  - Spring Data JPA
  - äº‹åŠ¡ç®¡ç†
  - è¿æ¥æ± ï¼ˆé»˜è®¤HikariCPï¼‰
  
  **spring-boot-starter-jdbc**åŒ…å«ï¼š
  - åŸºæœ¬JDBCæ”¯æŒ
  - äº‹åŠ¡ç®¡ç†
  - è¿æ¥æ± 
  
  **spring-boot-starter-data-redis**åŒ…å«ï¼š
  - Lettuceæˆ–Jediså®¢æˆ·ç«¯
  - Spring Data Redis
  - è¿æ¥æ± ç®¡ç†
  
  </div>
  </div>
  </TabItem>
  
  <TabItem value="test" label="æµ‹è¯•æ”¯æŒ">
  
  ```xml title="æµ‹è¯•èµ·æ­¥ä¾èµ–"
  <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-test</artifactId>
      <scope>test</scope>
  </dependency>
  ```
  
  <div className="card">
  <div className="card__header">
  <h4>æµ‹è¯•èµ·æ­¥ä¾èµ–å†…å®¹</h4>
  </div>
  <div className="card__body">
  
  **spring-boot-starter-test**åŒ…å«ï¼š
  - JUnit 5
  - Spring Test
  - AssertJ
  - Hamcrest
  - Mockito
  - JSONassert
  - JsonPath
  
  æä¾›å…¨é¢çš„æµ‹è¯•æ”¯æŒï¼ŒåŒ…æ‹¬ï¼š
  - å•å…ƒæµ‹è¯•
  - é›†æˆæµ‹è¯•
  - Spring MVCæµ‹è¯•
  - JSONæµ‹è¯•
  - æ¨¡æ‹Ÿå¯¹è±¡
  
  </div>
  </div>
  </TabItem>
  
  <TabItem value="others" label="å…¶ä»–èµ·æ­¥ä¾èµ–">
  
  ```xml title="å…¶ä»–å¸¸ç”¨èµ·æ­¥ä¾èµ–"
  <!-- ç›‘æ§å’Œç®¡ç† -->
  <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-actuator</artifactId>
  </dependency>
  
  <!-- AOPæ”¯æŒ -->
  <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-aop</artifactId>
  </dependency>
  
  <!-- ç¼“å­˜æ”¯æŒ -->
  <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-cache</artifactId>
  </dependency>
  
  <!-- é‚®ä»¶å‘é€ -->
  <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-mail</artifactId>
  </dependency>
  
  <!-- æ¶ˆæ¯é˜Ÿåˆ— -->
  <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-amqp</artifactId>
  </dependency>
  ```
  
  <div className="card">
  <div className="card__header">
  <h4>å¸¸ç”¨èµ·æ­¥ä¾èµ–è¡¨</h4>
  </div>
  <div className="card__body">
  
  | èµ·æ­¥ä¾èµ– | ä¸»è¦åŠŸèƒ½ | ä¸»è¦ç»„ä»¶ |
  |---------|---------|---------|
  | spring-boot-starter | æ ¸å¿ƒä¾èµ– | è‡ªåŠ¨é…ç½®ã€æ—¥å¿—ã€YAML |
  | spring-boot-starter-web | Webåº”ç”¨ | Spring MVCã€Tomcat |
  | spring-boot-starter-data-jpa | JPAæ•°æ®è®¿é—® | Hibernateã€Spring Data JPA |
  | spring-boot-starter-security | å®‰å…¨æ¡†æ¶ | Spring Security |
  | spring-boot-starter-test | æµ‹è¯•æ”¯æŒ | JUnitã€Mockitoã€Spring Test |
  | spring-boot-starter-actuator | ç›‘æ§ç®¡ç† | Actuatorç«¯ç‚¹ã€Micrometer |
  | spring-boot-starter-aop | é¢å‘åˆ‡é¢ç¼–ç¨‹ | Spring AOPã€AspectJ |
  | spring-boot-starter-webflux | å“åº”å¼ç¼–ç¨‹ | Spring WebFluxã€Reactor |
  
  </div>
  </div>
  </TabItem>
</Tabs>

### 5.3 è‡ªå®šä¹‰èµ·æ­¥ä¾èµ–

åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä½ å¯èƒ½éœ€è¦åˆ›å»ºè‡ªå·±çš„èµ·æ­¥ä¾èµ–ï¼Œä»¥ç»Ÿä¸€é¡¹ç›®æˆ–å›¢é˜Ÿçš„ä¾èµ–ç®¡ç†ã€‚

```mermaid
graph TD
    A[è‡ªå®šä¹‰èµ·æ­¥ä¾èµ–] --> B[åˆ›å»ºè‡ªåŠ¨é…ç½®æ¨¡å—]
    B --> B1[ç¼–å†™è‡ªåŠ¨é…ç½®ç±»]
    B --> B2[ç¼–å†™é…ç½®å±æ€§ç±»]
    
    A --> C[åˆ›å»ºèµ·æ­¥ä¾èµ–æ¨¡å—]
    C --> C1[ä¾èµ–è‡ªåŠ¨é…ç½®æ¨¡å—]
    C --> C2[æ·»åŠ æ‰€éœ€ä¾èµ–]
    
    A --> D[æ³¨å†Œè‡ªåŠ¨é…ç½®]
    D --> D1[åˆ›å»ºspring.factories]
    D --> D2[æ·»åŠ é…ç½®ç±»æ³¨å†Œ]
    
    style A fill:#f9f,stroke:#333,stroke-width:1px
```

<Tabs>
  <TabItem value="autoconfigure" label="è‡ªåŠ¨é…ç½®æ¨¡å—" default>
  
  ```xml title="è‡ªåŠ¨é…ç½®æ¨¡å—POM"
  <project>
      <modelVersion>4.0.0</modelVersion>
      <groupId>com.example</groupId>
      <artifactId>example-spring-boot-autoconfigure</artifactId>
      <version>1.0.0</version>
      <name>Example Spring Boot Autoconfigure</name>
      
      <dependencies>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-autoconfigure</artifactId>
    </dependency>
    
          <!-- å¯é€‰ä¾èµ–ï¼Œç”¨äºé…ç½®å±æ€§å¤„ç† -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-configuration-processor</artifactId>
        <optional>true</optional>
    </dependency>
          
          <!-- æ ¸å¿ƒåŠŸèƒ½ä¾èµ– -->
          <dependency>
              <groupId>com.example</groupId>
              <artifactId>example-library</artifactId>
              <version>1.0.0</version>
          </dependency>
</dependencies>
  </project>
  ```
  
  ```java title="é…ç½®å±æ€§ç±»"
  @ConfigurationProperties(prefix = "example")
  public class ExampleProperties {
      
      /**
       * æ˜¯å¦å¯ç”¨è¯¥åŠŸèƒ½
       */
      private boolean enabled = true;
      
      /**
       * APIåŸºç¡€URL
       */
      private String baseUrl = "https://api.example.com";
      
      /**
       * è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
       */
      private int timeout = 3000;
      
      // getterå’Œsetteræ–¹æ³•
  }
  ```
  
  ```java title="è‡ªåŠ¨é…ç½®ç±»"
  @Configuration
  @ConditionalOnClass(ExampleService.class)
  @EnableConfigurationProperties(ExampleProperties.class)
  public class ExampleAutoConfiguration {
      
      private final ExampleProperties properties;
      
      public ExampleAutoConfiguration(ExampleProperties properties) {
          this.properties = properties;
      }
      
      @Bean
      @ConditionalOnMissingBean
      @ConditionalOnProperty(prefix = "example", name = "enabled", havingValue = "true", matchIfMissing = true)
      public ExampleService exampleService() {
          ExampleService service = new ExampleService();
          service.setBaseUrl(properties.getBaseUrl());
          service.setTimeout(properties.getTimeout());
          return service;
      }
      
      @Bean
      @ConditionalOnMissingBean
      @ConditionalOnBean(ExampleService.class)
      public ExampleClient exampleClient(ExampleService service) {
          return new ExampleClient(service);
      }
  }
  ```
  </TabItem>
  
  <TabItem value="starter" label="èµ·æ­¥ä¾èµ–æ¨¡å—">
  
  ```xml title="èµ·æ­¥ä¾èµ–æ¨¡å—POM"
  <project>
      <modelVersion>4.0.0</modelVersion>
      <groupId>com.example</groupId>
      <artifactId>example-spring-boot-starter</artifactId>
      <version>1.0.0</version>
      <name>Example Spring Boot Starter</name>
      
      <dependencies>
          <!-- ä¾èµ–è‡ªåŠ¨é…ç½®æ¨¡å— -->
          <dependency>
              <groupId>com.example</groupId>
              <artifactId>example-spring-boot-autoconfigure</artifactId>
              <version>1.0.0</version>
          </dependency>
          
          <!-- å…¶ä»–å¿…è¦çš„ä¾èµ– -->
          <dependency>
              <groupId>com.example</groupId>
              <artifactId>example-library</artifactId>
              <version>1.0.0</version>
          </dependency>
          
          <!-- å¯èƒ½éœ€è¦çš„å…¶ä»–ä¾èµ– -->
          <dependency>
              <groupId>org.apache.commons</groupId>
              <artifactId>commons-lang3</artifactId>
          </dependency>
      </dependencies>
  </project>
  ```
  </TabItem>
  
  <TabItem value="register" label="æ³¨å†Œè‡ªåŠ¨é…ç½®">
  
  ```properties title="META-INF/spring.factories"
  # Auto Configure
  org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
  com.example.ExampleAutoConfiguration
  ```
  
  ```properties title="META-INF/spring-configuration-metadata.json"
  {
    "groups": [
      {
        "name": "example",
        "type": "com.example.ExampleProperties",
        "sourceType": "com.example.ExampleProperties"
      }
    ],
    "properties": [
      {
        "name": "example.enabled",
        "type": "java.lang.Boolean",
        "description": "æ˜¯å¦å¯ç”¨è¯¥åŠŸèƒ½",
        "sourceType": "com.example.ExampleProperties",
        "defaultValue": true
      },
      {
        "name": "example.base-url",
        "type": "java.lang.String",
        "description": "APIåŸºç¡€URL",
        "sourceType": "com.example.ExampleProperties",
        "defaultValue": "https://api.example.com"
      },
      {
        "name": "example.timeout",
        "type": "java.lang.Integer",
        "description": "è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰",
        "sourceType": "com.example.ExampleProperties",
        "defaultValue": 3000
      }
    ]
  }
  ```
  </TabItem>
  
  <TabItem value="usage" label="ä½¿ç”¨è‡ªå®šä¹‰èµ·æ­¥ä¾èµ–">
  
  ```xml title="åœ¨é¡¹ç›®ä¸­ä½¿ç”¨è‡ªå®šä¹‰èµ·æ­¥ä¾èµ–"
  <dependencies>
      <!-- å¼•å…¥è‡ªå®šä¹‰èµ·æ­¥ä¾èµ– -->
      <dependency>
          <groupId>com.example</groupId>
          <artifactId>example-spring-boot-starter</artifactId>
          <version>1.0.0</version>
      </dependency>
  </dependencies>
  ```
  
  ```yaml title="é…ç½®è‡ªå®šä¹‰å±æ€§"
  # åœ¨application.ymlä¸­é…ç½®
  example:
    enabled: true
    base-url: https://api.mycompany.com/v1
    timeout: 5000
  ```
  
  ```java title="ä½¿ç”¨è‡ªåŠ¨é…ç½®çš„Bean"
  @Service
  public class MyService {
      
      private final ExampleClient exampleClient;
      
      public MyService(ExampleClient exampleClient) {
          this.exampleClient = exampleClient;
      }
      
      public void doSomething() {
          // ä½¿ç”¨è‡ªåŠ¨é…ç½®çš„å®¢æˆ·ç«¯
          exampleClient.callApi();
      }
  }
  ```
  </TabItem>
</Tabs>

:::caution è‡ªå®šä¹‰èµ·æ­¥ä¾èµ–æœ€ä½³å®è·µ
åˆ›å»ºè‡ªå®šä¹‰èµ·æ­¥ä¾èµ–æ—¶ï¼Œåº”éµå¾ªä»¥ä¸‹æœ€ä½³å®è·µï¼š
1. åˆ†ç¦»è‡ªåŠ¨é…ç½®æ¨¡å—å’Œèµ·æ­¥ä¾èµ–æ¨¡å—ï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥é€‰æ‹©æ€§ä½¿ç”¨è‡ªåŠ¨é…ç½®
2. ä½¿ç”¨æ¡ä»¶æ³¨è§£é¿å…å¼ºåˆ¶é…ç½®ï¼Œå…è®¸ç”¨æˆ·è¦†ç›–é»˜è®¤é…ç½®
3. æä¾›é…ç½®å±æ€§ç±»ï¼Œå…è®¸ç”¨æˆ·é€šè¿‡é…ç½®æ–‡ä»¶è‡ªå®šä¹‰è¡Œä¸º
4. ç”Ÿæˆå…ƒæ•°æ®ï¼Œæä¾›è‰¯å¥½çš„IDEæ”¯æŒ
5. éµå¾ªå‘½åçº¦å®šï¼š`xxx-spring-boot-autoconfigure`å’Œ`xxx-spring-boot-starter`
6. ä¸è¦å°†`spring-boot-starter-*`ä½œä¸ºä¾èµ–çš„åç§°ï¼ˆé¿å…ä¸å®˜æ–¹èµ·æ­¥ä¾èµ–æ··æ·†ï¼‰
:::

## 6. ç›‘æ§ä¸ç®¡ç†

Spring Boot Actuatoræ˜¯Spring Bootçš„ä¸€ä¸ªå­é¡¹ç›®ï¼Œæä¾›äº†ç”Ÿäº§å°±ç»ªç‰¹æ€§ï¼Œå¸®åŠ©ä½ ç›‘æ§å’Œç®¡ç†åº”ç”¨ã€‚

:::tip æ ¸å¿ƒæ¦‚å¿µ
ğŸ“Š **Actuator**ï¼šSpring Boot Actuatoræä¾›äº†ç›‘æ§å’Œç®¡ç†Spring Bootåº”ç”¨ç¨‹åºçš„ç”Ÿäº§å°±ç»ªåŠŸèƒ½ï¼ŒåŒ…æ‹¬å¥åº·æ£€æŸ¥ã€æŒ‡æ ‡æ”¶é›†ã€ç¯å¢ƒä¿¡æ¯å’ŒHTTPè·Ÿè¸ªç­‰ã€‚
:::

```mermaid
graph TD
    A[Spring Boot Actuator] --> B[ç›‘æ§ç«¯ç‚¹]
    A --> C[å¥åº·æ£€æŸ¥]
    A --> D[åº¦é‡æŒ‡æ ‡]
    A --> E[æ—¥å¿—è®¿é—®]
    
    B --> B1[info]
    B --> B2[health]
    B --> B3[metrics]
    B --> B4[env]
    B --> B5[configprops]
    
    C --> C1[åº”ç”¨å¥åº·çŠ¶æ€]
    C --> C2[æ•°æ®åº“è¿æ¥]
    C --> C3[ç£ç›˜ç©ºé—´]
    C --> C4[è‡ªå®šä¹‰æŒ‡æ ‡]
    
    D --> D1[JVMæŒ‡æ ‡]
    D --> D2[HTTPè¯·æ±‚æŒ‡æ ‡]
    D --> D3[æ•°æ®åº“æŒ‡æ ‡]
    D --> D4[è‡ªå®šä¹‰æŒ‡æ ‡]
    
    style A fill:#f9f,stroke:#333,stroke-width:1px
    style B fill:#ccf,stroke:#333,stroke-width:1px
    style C fill:#cfc,stroke:#333,stroke-width:1px
```

### 6.1 ActuatoråŸºç¡€é…ç½®

Spring Boot Actuatoræä¾›äº†ä¸€ç³»åˆ—çš„HTTPç«¯ç‚¹ï¼Œå¯ä»¥ç”¨æ¥ç›‘æ§å’Œç®¡ç†åº”ç”¨ç¨‹åºã€‚

<Tabs>
  <TabItem value="dependency" label="åŸºç¡€é…ç½®" default>

```xml title="Actuatorä¾èµ–"
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-actuator</artifactId>
</dependency>
```

  ```yaml title="åŸºç¡€é…ç½®"
management:
  endpoints:
    web:
      exposure:
          # æš´éœ²æ‰€æœ‰ç«¯ç‚¹
          include: "*"
          # æ’é™¤æ•æ„Ÿç«¯ç‚¹
          exclude: "env,beans"
  endpoint:
    health:
      show-details: always
      shutdown:
      enabled: true
    info:
      env:
        enabled: true
```

  <div className="card">
  <div className="card__header">
  <h4>Actuatorç«¯ç‚¹è®¿é—®</h4>
  </div>
  <div className="card__body">
  
  é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰ç«¯ç‚¹éƒ½é€šè¿‡HTTPæš´éœ²åœ¨`/actuator`è·¯å¾„ä¸‹ï¼š
  
  - `/actuator/health` - åº”ç”¨å¥åº·çŠ¶æ€
  - `/actuator/info` - åº”ç”¨ä¿¡æ¯
  - `/actuator/metrics` - åº”ç”¨æŒ‡æ ‡
  - `/actuator/env` - ç¯å¢ƒå˜é‡
  - `/actuator/mappings` - è¯·æ±‚æ˜ å°„
  - `/actuator/beans` - åº”ç”¨ä¸­çš„æ‰€æœ‰Bean
  - `/actuator/configprops` - é…ç½®å±æ€§
  - `/actuator/loggers` - æ—¥å¿—çº§åˆ«ç®¡ç†
  
  </div>
  </div>
  </TabItem>
  
  <TabItem value="security" label="å®‰å…¨é…ç½®">
  
  Actuatorç«¯ç‚¹åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­åº”è¯¥è¿›è¡Œå®‰å…¨ä¿æŠ¤ï¼š
  
  ```xml title="æ·»åŠ å®‰å…¨ä¾èµ–"
  <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-security</artifactId>
  </dependency>
  ```
  
  ```java title="Actuatorå®‰å…¨é…ç½®"
  @Configuration
  public class ActuatorSecurityConfig extends WebSecurityConfigurerAdapter {
      
      @Override
      protected void configure(HttpSecurity http) throws Exception {
          http
              .csrf().disable()
              .authorizeRequests()
                  // å…è®¸æ‰€æœ‰äººè®¿é—®å¥åº·æ£€æŸ¥å’Œä¿¡æ¯
                  .antMatchers("/actuator/health", "/actuator/info").permitAll()
                  // å…¶ä»–Actuatorç«¯ç‚¹éœ€è¦ADMINè§’è‰²
                  .antMatchers("/actuator/**").hasRole("ADMIN")
                  .anyRequest().authenticated()
              .and()
              .httpBasic();
      }
  }
  ```
  
  ```yaml title="å®‰å…¨é…ç½®"
  spring:
    security:
      user:
        name: admin
        password: secret
        roles: ADMIN
  ```
  </TabItem>
  
  <TabItem value="custom-info" label="è‡ªå®šä¹‰ä¿¡æ¯">
  
  ä½ å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼è‡ªå®šä¹‰åº”ç”¨ä¿¡æ¯ï¼š
  
  ```yaml title="åº”ç”¨ä¿¡æ¯é…ç½®"
  info:
    app:
      name: "My Spring Boot App"
      description: "A sample Spring Boot application"
      version: "1.0.0"
    java:
      version: "${java.version}"
    spring:
      framework:
        version: "${spring-framework.version}"
      boot:
        version: "${spring-boot.version}"
    build:
      artifact: "@project.artifactId@"
      name: "@project.name@"
      description: "@project.description@"
      version: "@project.version@"
  ```
  
  ```java title="è‡ªå®šä¹‰Info Contributor"
  @Component
  public class CustomInfoContributor implements InfoContributor {
      
      @Override
      public void contribute(Info.Builder builder) {
          Map<String, Object> details = new HashMap<>();
          details.put("serverTime", new Date());
          details.put("serverIp", getServerIp());
          details.put("activeProfiles", getActiveProfiles());
          
          builder.withDetail("serverInfo", details);
      }
      
      // å®ç°ç»†èŠ‚...
  }
  ```
  </TabItem>
</Tabs>

### 6.2 å¥åº·æ£€æŸ¥

å¥åº·æ£€æŸ¥æ˜¯Actuatorçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œç”¨äºç›‘æ§åº”ç”¨åŠå…¶ä¾èµ–çš„çŠ¶æ€ã€‚

```java title="è‡ªå®šä¹‰å¥åº·æ£€æŸ¥"
@Component
public class CustomHealthIndicator implements HealthIndicator {
    
    @Override
    public Health health() {
        boolean isHealthy = checkHealth(); // è‡ªå®šä¹‰å¥åº·æ£€æŸ¥é€»è¾‘
        
        if (isHealthy) {
            return Health.up()
                .withDetail("message", "æœåŠ¡è¿è¡Œæ­£å¸¸")
                .withDetail("timestamp", System.currentTimeMillis())
                .build();
        } else {
            return Health.down()
                .withDetail("message", "æœåŠ¡å¼‚å¸¸")
                .withDetail("timestamp", System.currentTimeMillis())
                .withDetail("error", "å…·ä½“é”™è¯¯ä¿¡æ¯")
                .build();
        }
    }
    
    private boolean checkHealth() {
        // å®ç°å¥åº·æ£€æŸ¥é€»è¾‘
        try {
            // æ£€æŸ¥å…³é”®æœåŠ¡æ˜¯å¦å¯ç”¨
            // ä¾‹å¦‚ï¼šæ•°æ®åº“è¿æ¥ã€ç¼“å­˜è¿æ¥ã€å¤–éƒ¨æœåŠ¡è°ƒç”¨ç­‰
            return true;
        } catch (Exception e) {
            return false;
        }
    }
}
```

### 6.3 åº¦é‡æŒ‡æ ‡

Spring Boot 2.xå¼•å…¥äº†Micrometerä½œä¸ºåº”ç”¨æŒ‡æ ‡é—¨é¢ï¼Œæ”¯æŒå¤šç§ç›‘æ§ç³»ç»Ÿï¼Œå¦‚Prometheusã€InfluxDBã€New Relicç­‰ã€‚

<Tabs>
  <TabItem value="micrometer" label="MicrometeråŸºç¡€" default>
  
  ```xml title="æ·»åŠ Prometheusæ”¯æŒ"
  <dependency>
      <groupId>io.micrometer</groupId>
      <artifactId>micrometer-registry-prometheus</artifactId>
  </dependency>
  ```
  
  ```yaml title="Prometheusé…ç½®"
  management:
    endpoints:
      web:
        exposure:
          include: prometheus
    metrics:
      export:
        prometheus:
          enabled: true
  ```
  
  ```yaml title="prometheus.ymlé…ç½®"
  scrape_configs:
    - job_name: 'spring-boot-app'
      scrape_interval: 5s
      metrics_path: '/actuator/prometheus'
      static_configs:
        - targets: ['localhost:8080']
  ```
  </TabItem>
  
  <TabItem value="custom-metrics" label="è‡ªå®šä¹‰æŒ‡æ ‡">
  
  ```java title="è‡ªå®šä¹‰è®¡æ•°å™¨æŒ‡æ ‡"
  @Service
  public class OrderService {
      
      private final Counter orderCounter;
      private final DistributionSummary orderSummary;
      
      public OrderService(MeterRegistry registry) {
          this.orderCounter = registry.counter("app.orders.created");
          this.orderSummary = registry.summary("app.orders.amount");
      }
      
      public void createOrder(Order order) {
          // å¤„ç†è®¢å•é€»è¾‘
          
          // å¢åŠ è®¢å•è®¡æ•°
          orderCounter.increment();
          
          // è®°å½•è®¢å•é‡‘é¢
          orderSummary.record(order.getAmount());
      }
  }
  ```
  
  ```java title="è‡ªå®šä¹‰è®¡æ—¶å™¨æŒ‡æ ‡"
  @Service
  public class ProductService {
      
      private final Timer searchTimer;
      
      public ProductService(MeterRegistry registry) {
          this.searchTimer = registry.timer("app.product.search");
      }
      
      public List<Product> searchProducts(String keyword) {
          // ä½¿ç”¨è®¡æ—¶å™¨è®°å½•æ–¹æ³•æ‰§è¡Œæ—¶é—´
          return searchTimer.record(() -> {
              // æ‰§è¡Œäº§å“æœç´¢é€»è¾‘
              return findProductsByKeyword(keyword);
          });
      }
      
      // ä¹Ÿå¯ä»¥ä½¿ç”¨Timer.Sampleæ‰‹åŠ¨æ§åˆ¶
      public List<Product> listProducts() {
          Timer.Sample sample = Timer.start(registry);
          try {
              // æ‰§è¡Œè·å–äº§å“åˆ—è¡¨é€»è¾‘
              return getAllProducts();
          } finally {
              sample.stop(registry.timer("app.product.list"));
          }
    }
}
```
  </TabItem>

  <TabItem value="aspect-metrics" label="åˆ‡é¢æŒ‡æ ‡">

  ```java title="æ–¹æ³•æ‰§è¡ŒæŒ‡æ ‡åˆ‡é¢"
@Aspect
@Component
  public class TimedAspect {
      
      private final MeterRegistry registry;
      
      public TimedAspect(MeterRegistry registry) {
          this.registry = registry;
      }
      
      @Around("@annotation(timed)")
      public Object timeMethod(ProceedingJoinPoint joinPoint, Timed timed) throws Throwable {
          String metricName = timed.value().isEmpty() 
              ? joinPoint.getSignature().toShortString() 
              : timed.value();
              
          Timer.Sample sample = Timer.start(registry);
          try {
              return joinPoint.proceed();
          } finally {
              sample.stop(Timer.builder(metricName)
                  .description(timed.description())
                  .tags(timed.extraTags())
                  .register(registry));
          }
      }
  }
  
  @Target({ElementType.METHOD})
  @Retention(RetentionPolicy.RUNTIME)
  public @interface Timed {
      String value() default "";
      String description() default "";
      String[] extraTags() default {};
  }
  ```
  
  ```java title="ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£"
  @Service
  public class ReportService {
      
      @Timed(value = "app.report.generation", description = "Report generation time")
      public byte[] generateReport(ReportRequest request) {
          // ç”ŸæˆæŠ¥è¡¨é€»è¾‘
          return reportData;
      }
  }
  ```
  </TabItem>
</Tabs>

### 6.4 è‡ªå®šä¹‰ç«¯ç‚¹

ä½ å¯ä»¥åˆ›å»ºè‡ªå·±çš„Actuatorç«¯ç‚¹æ¥æš´éœ²ç‰¹å®šäºåº”ç”¨çš„ä¿¡æ¯æˆ–æ“ä½œã€‚

```java title="è‡ªå®šä¹‰Actuatorç«¯ç‚¹"
@Component
@Endpoint(id = "application-status")
public class ApplicationStatusEndpoint {
    
    private final StatusService statusService;
    
    public ApplicationStatusEndpoint(StatusService statusService) {
        this.statusService = statusService;
    }
    
    @ReadOperation
    public Map<String, Object> status() {
        Map<String, Object> status = new HashMap<>();
        status.put("status", statusService.getStatus());
        status.put("uptime", statusService.getUptime());
        status.put("startTime", statusService.getStartTime());
        status.put("activeSessions", statusService.getActiveSessions());
        status.put("systemLoad", statusService.getSystemLoad());
        return status;
    }
    
    @WriteOperation
    public Map<String, String> updateStatus(@Selector String action) {
        Map<String, String> result = new HashMap<>();
        switch (action) {
            case "pause":
                statusService.pauseProcessing();
                result.put("result", "Processing paused");
                break;
            case "resume":
                statusService.resumeProcessing();
                result.put("result", "Processing resumed");
                break;
            default:
                result.put("error", "Unknown action: " + action);
        }
        return result;
    }
}
```

## 7. éƒ¨ç½²ä¸æ‰“åŒ…

Spring Bootæä¾›äº†å¤šç§çµæ´»çš„éƒ¨ç½²é€‰é¡¹ï¼Œä»ä¼ ç»Ÿçš„WARéƒ¨ç½²åˆ°ç°ä»£çš„å®¹å™¨åŒ–éƒ¨ç½²ã€‚

:::tip æ ¸å¿ƒæ¦‚å¿µ
ğŸ“¦ **Spring Bootæ‰“åŒ…**ï¼šSpring Bootåº”ç”¨å¯ä»¥æ‰“åŒ…æˆå¯æ‰§è¡Œçš„JARæˆ–WARæ–‡ä»¶ï¼ŒåŒ…å«æ‰€æœ‰ä¾èµ–å’ŒåµŒå…¥å¼æœåŠ¡å™¨ï¼Œå®ç°"ä¸€æ¬¡æ„å»ºï¼Œåˆ°å¤„è¿è¡Œ"ã€‚
:::

### 7.1 æ‰“åŒ…é€‰é¡¹

<Tabs>
  <TabItem value="jar" label="å¯æ‰§è¡ŒJAR" default>
  
  ```xml title="Mavenæ‰“åŒ…é…ç½®"
<build>
    <plugins>
        <plugin>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-maven-plugin</artifactId>
            <configuration>
                <executable>true</executable>
                  <excludes>
                      <exclude>
                          <groupId>org.projectlombok</groupId>
                          <artifactId>lombok</artifactId>
                      </exclude>
                  </excludes>
            </configuration>
        </plugin>
    </plugins>
</build>
```

  ```shell title="æ‰“åŒ…å‘½ä»¤"
  # Mavenæ‰“åŒ…
mvn clean package

  # è¿è¡ŒJAR
java -jar target/myapp-0.0.1-SNAPSHOT.jar
  ```
  
  <div className="card">
  <div className="card__header">
  <h4>å¯æ‰§è¡ŒJARç‰¹ç‚¹</h4>
  </div>
  <div className="card__body">
  
  - åŒ…å«åº”ç”¨çš„æ‰€æœ‰ä»£ç å’Œä¾èµ–
  - å†…ç½®åµŒå…¥å¼WebæœåŠ¡å™¨
  - æ— éœ€é¢å¤–å®‰è£…Tomcatç­‰å®¹å™¨
  - å¯ä»¥ç›´æ¥é€šè¿‡`java -jar`å‘½ä»¤è¿è¡Œ
  - æ”¯æŒå‘½ä»¤è¡Œå‚æ•°é…ç½®
  
  </div>
  </div>
  </TabItem>
  
  <TabItem value="war" label="ä¼ ç»ŸWAR">
  
  ```xml title="WARæ‰“åŒ…é…ç½®"
  <packaging>war</packaging>
  
  <dependencies>
      <!-- å°†å†…åµŒTomcatæ ‡è®°ä¸ºprovided -->
      <dependency>
          <groupId>org.springframework.boot</groupId>
          <artifactId>spring-boot-starter-tomcat</artifactId>
          <scope>provided</scope>
      </dependency>
  </dependencies>
  
  <build>
      <plugins>
          <plugin>
              <groupId>org.springframework.boot</groupId>
              <artifactId>spring-boot-maven-plugin</artifactId>
          </plugin>
      </plugins>
  </build>
  ```
  
  ```java title="é…ç½®ServletInitializer"
  public class ServletInitializer extends SpringBootServletInitializer {
      
      @Override
      protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {
          return application.sources(MyApplication.class);
    }
}
```

  <div className="card">
  <div className="card__header">
  <h4>WARç‰¹ç‚¹</h4>
  </div>
  <div className="card__body">
  
  - å¯ä»¥éƒ¨ç½²åˆ°å¤–éƒ¨Servletå®¹å™¨ï¼ˆå¦‚Tomcatã€JBossï¼‰
  - é€‚åˆä¼ ç»ŸJava EEç¯å¢ƒ
  - å¯ä»¥ä¸å…¶ä»–WARåº”ç”¨å…±äº«åŒä¸€ä¸ªå®¹å™¨
  - å¯ä»¥åˆ©ç”¨å¤–éƒ¨å®¹å™¨çš„é«˜çº§åŠŸèƒ½
  
  </div>
  </div>
  </TabItem>
  
  <TabItem value="docker" label="Dockerå®¹å™¨">
  
  ```dockerfile title="Dockerfile"
  FROM openjdk:11-jre-slim
  
  WORKDIR /app
  
  COPY target/*.jar app.jar
  
  # JVMè°ƒä¼˜å‚æ•°
  ENV JAVA_OPTS="-Xmx512m -Xms256m"
  
  # å®šä¹‰å˜é‡ï¼Œæ–¹ä¾¿è¿è¡Œæ—¶è¦†ç›–
  ENV SPRING_PROFILES_ACTIVE=prod
  ENV SERVER_PORT=8080
  
  EXPOSE $SERVER_PORT
  
  # å¯åŠ¨å‘½ä»¤
  ENTRYPOINT ["sh", "-c", "java $JAVA_OPTS -jar app.jar --spring.profiles.active=$SPRING_PROFILES_ACTIVE --server.port=$SERVER_PORT"]
  ```
  
  ```shell title="Dockerå‘½ä»¤"
  # æ„å»ºé•œåƒ
  docker build -t myapp:latest .
  
  # è¿è¡Œå®¹å™¨
  docker run -p 8080:8080 -e "SPRING_PROFILES_ACTIVE=prod" myapp:latest
  ```
  
  ```yaml title="docker-compose.yml"
  version: '3'
  services:
    app:
      image: myapp:latest
      ports:
        - "8080:8080"
      environment:
        - SPRING_PROFILES_ACTIVE=prod
        - SERVER_PORT=8080
      depends_on:
        - db
      networks:
        - app-network
    
    db:
      image: mysql:8.0
      ports:
        - "3306:3306"
      environment:
        - MYSQL_ROOT_PASSWORD=root
        - MYSQL_DATABASE=myapp
      volumes:
        - mysql-data:/var/lib/mysql
      networks:
        - app-network
  
  volumes:
    mysql-data:
  
  networks:
    app-network:
  ```
  </TabItem>
</Tabs>

### 7.2 éƒ¨ç½²æ–¹å¼

Spring Bootåº”ç”¨æ”¯æŒå¤šç§éƒ¨ç½²æ–¹å¼ï¼Œä»ä¼ ç»Ÿåˆ°äº‘åŸç”Ÿï¼š

<div className="card">
<div className="card__header">
<h4>éƒ¨ç½²æ–¹å¼æ¯”è¾ƒ</h4>
</div>
<div className="card__body">

| éƒ¨ç½²æ–¹å¼ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|---------|------|------|----------|
| **ç‹¬ç«‹JARéƒ¨ç½²** | ç®€å•ã€è‡ªåŒ…å« | èµ„æºéš”ç¦»å¼± | ç®€å•åº”ç”¨ã€å¼€å‘ç¯å¢ƒ |
| **ä¼ ç»ŸæœåŠ¡å™¨éƒ¨ç½²** | åˆ©ç”¨æœåŠ¡å™¨é«˜çº§ç‰¹æ€§ | é…ç½®å¤æ‚ | ä¼ ç»Ÿä¼ä¸šç¯å¢ƒ |
| **Dockerå®¹å™¨åŒ–** | ç¯å¢ƒä¸€è‡´æ€§ã€éš”ç¦»æ€§å¥½ | éœ€è¦å®¹å™¨è¿è¡Œç¯å¢ƒ | å¾®æœåŠ¡ã€DevOpsç¯å¢ƒ |
| **Kubernetesç¼–æ’** | é«˜å¯ç”¨ã€è‡ªåŠ¨ä¼¸ç¼© | å¤æ‚åº¦é«˜ | å¤§è§„æ¨¡å¾®æœåŠ¡é›†ç¾¤ |
| **äº‘å¹³å°PaaS** | ä½è¿ç»´æˆæœ¬ | ä¾›åº”å•†é”å®š | åˆåˆ›ä¼ä¸šã€ä¸­å°è§„æ¨¡åº”ç”¨ |

</div>
</div>

### 7.3 ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ

åœ¨å°†Spring Bootåº”ç”¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒæ—¶ï¼Œåº”éµå¾ªä»¥ä¸‹æœ€ä½³å®è·µï¼š

<Tabs>
  <TabItem value="config" label="é…ç½®ç®¡ç†" default>
  
  ```yaml title="ç¯å¢ƒç‰¹å®šé…ç½®"
  # é€šè¿‡ç¯å¢ƒå˜é‡æ³¨å…¥å…³é”®é…ç½®
  spring:
    datasource:
      url: jdbc:mysql://${DB_HOST:localhost}:${DB_PORT:3306}/${DB_NAME:myapp}
      username: ${DB_USER:root}
      password: ${DB_PASSWORD:secret}
  ```
  
  ```shell title="ç”Ÿäº§ç¯å¢ƒå¯åŠ¨"
  # ä½¿ç”¨å¤–éƒ¨é…ç½®æ–‡ä»¶
  java -jar app.jar --spring.config.location=file:///path/to/production.yml
  
  # æŒ‡å®šæ´»åŠ¨profile
  java -jar app.jar --spring.profiles.active=prod
  
  # è¦†ç›–ç‰¹å®šé…ç½®
  java -jar app.jar --server.port=9000 --logging.level.root=WARN
  ```
  
  :::tip é…ç½®ç®¡ç†æœ€ä½³å®è·µ
  - ä½¿ç”¨ç¯å¢ƒå˜é‡æ³¨å…¥æ•æ„Ÿä¿¡æ¯
  - é¿å…åœ¨ä»£ç ä¸­ç¡¬ç¼–ç é…ç½®
  - ä½¿ç”¨é…ç½®æœåŠ¡å™¨é›†ä¸­ç®¡ç†é…ç½®
  - ä½¿ç”¨å¤šç¯å¢ƒprofileåˆ†ç¦»é…ç½®
  - ä½¿ç”¨å¯†æ–‡å­˜å‚¨æ•æ„Ÿä¿¡æ¯
  :::
  </TabItem>
  
  <TabItem value="logging" label="æ—¥å¿—ç®¡ç†">
  
  ```yaml title="æ—¥å¿—é…ç½®"
  logging:
    file:
      name: /var/log/myapp.log
      max-size: 10MB
      max-history: 7
    level:
      root: WARN
      org.springframework: WARN
      com.example.myapp: INFO
    pattern:
      file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
  ```
  
  :::tip æ—¥å¿—ç®¡ç†æœ€ä½³å®è·µ
  - é…ç½®é€‚å½“çš„æ—¥å¿—çº§åˆ«
  - å®æ–½æ—¥å¿—è½®è½¬
  - ä½¿ç”¨ç»“æ„åŒ–æ—¥å¿—
  - é›†ä¸­åŒ–æ—¥å¿—æ”¶é›†ï¼ˆELKã€Graylogï¼‰
  - åŒ…å«è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯
  - é¿å…æ•æ„Ÿä¿¡æ¯æ³„éœ²
  :::
  </TabItem>
  
  <TabItem value="monitoring" label="ç›‘æ§ä¸å‘Šè­¦">
  
  ```yaml title="ç›‘æ§é…ç½®"
  # Actuatoré…ç½®
  management:
    endpoints:
      web:
        exposure:
          include: health,info,metrics,prometheus
    endpoint:
      health:
        show-details: when-authorized
    metrics:
      export:
        prometheus:
          enabled: true
  ```
  
  :::tip ç›‘æ§æœ€ä½³å®è·µ
  - å®æ–½å¥åº·æ£€æŸ¥
  - æ”¶é›†å…³é”®ä¸šåŠ¡æŒ‡æ ‡
  - è®¾ç½®é€‚å½“çš„å‘Šè­¦é˜ˆå€¼
  - ç›‘æ§ç³»ç»Ÿèµ„æºï¼ˆCPUã€å†…å­˜ã€ç£ç›˜ï¼‰
  - ç›‘æ§å…³é”®ä¸šåŠ¡æŒ‡æ ‡
  - å¯è§†åŒ–ç›‘æ§æ•°æ®ï¼ˆGrafanaï¼‰
  - é…ç½®é€šçŸ¥æ¸ é“ï¼ˆé‚®ä»¶ã€çŸ­ä¿¡ã€Slackï¼‰
  :::
  </TabItem>
</Tabs>

## 8. æ€»ç»“

Spring Booté€šè¿‡ç®€åŒ–é…ç½®ã€æä¾›é»˜è®¤å®ç°ï¼Œæå¤§åœ°æé«˜äº†Springåº”ç”¨çš„å¼€å‘æ•ˆç‡ï¼Œæˆä¸ºç°ä»£Javaåº”ç”¨å¼€å‘çš„æ ‡å‡†å·¥å…·ã€‚

```mermaid
mindmap
  root((Spring Boot))
    (è‡ªåŠ¨é…ç½®)
      (çº¦å®šä¼˜äºé…ç½®)
      (æ¡ä»¶æ³¨è§£)
      (spring.factories)
    (èµ·æ­¥ä¾èµ–)
      (ä¼ é€’ä¾èµ–)
      (ç‰ˆæœ¬ç®¡ç†)
      (åŠŸèƒ½ç»„åˆ)
    (åµŒå…¥å¼æœåŠ¡å™¨)
      (Tomcat)
      (Jetty)
      (Undertow)
    (é…ç½®ç®¡ç†)
      (å±æ€§æº)
      (å¤šç¯å¢ƒé…ç½®)
      (å±æ€§ç»‘å®š)
    (Actuator)
      (å¥åº·æ£€æŸ¥)
      (åº¦é‡æŒ‡æ ‡)
      (ç›‘æ§ç®¡ç†)
    (éƒ¨ç½²é€‰é¡¹)
      (å¯æ‰§è¡ŒJAR)
      (å®¹å™¨åŒ–)
      (äº‘éƒ¨ç½²)
```

:::tip Spring Bootå­¦ä¹ è·¯å¾„
ğŸš€ **Spring Bootå­¦ä¹ å»ºè®®**ï¼š
1. æŒæ¡SpringåŸºç¡€çŸ¥è¯†ï¼ˆIoCã€AOPï¼‰
2. ç†è§£è‡ªåŠ¨é…ç½®å’Œèµ·æ­¥ä¾èµ–çš„åŸç†
3. å­¦ä¹ é…ç½®ç®¡ç†å’Œå±æ€§ç»‘å®š
4. äº†è§£å¯åŠ¨æµç¨‹å’Œç”Ÿå‘½å‘¨æœŸäº‹ä»¶
5. ç†Ÿæ‚‰Actuatorç›‘æ§å’Œç®¡ç†
6. æŒæ¡ä¸åŒçš„éƒ¨ç½²é€‰é¡¹
7. å®è·µå¾®æœåŠ¡å’Œäº‘åŸç”Ÿå¼€å‘
:::

Spring Bootè®©å¼€å‘è€…èƒ½å¤Ÿä¸“æ³¨äºä¸šåŠ¡é€»è¾‘çš„å¼€å‘ï¼Œè€Œä¸å¿…è¿‡å¤šå…³æ³¨åº•å±‚æ¡†æ¶çš„é…ç½®ç»†èŠ‚ã€‚å®ƒä¸Spring Cloudç”Ÿæ€ç³»ç»Ÿçš„å®Œç¾ç»“åˆï¼Œæ›´æ˜¯ä¸ºå¾®æœåŠ¡æ¶æ„å’Œäº‘åŸç”Ÿåº”ç”¨å¼€å‘æä¾›äº†å¼ºå¤§çš„æ”¯æŒã€‚

## 9. é¢è¯•é¢˜ç²¾é€‰

### Q1: ä»€ä¹ˆæ˜¯Spring Bootï¼Ÿå®ƒæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ
**ç­”:** Spring Bootæ˜¯Springæ¡†æ¶çš„æ‰©å±•ï¼Œä¸“æ³¨äºç®€åŒ–Springåº”ç”¨çš„åˆå§‹æ­å»ºå’Œå¼€å‘è¿‡ç¨‹ã€‚ä¸»è¦ä¼˜åŠ¿åŒ…æ‹¬ï¼š
- **è‡ªåŠ¨é…ç½®**ï¼šå‡å°‘é…ç½®ï¼Œè‡ªåŠ¨é…ç½®å¤§éƒ¨åˆ†ç»„ä»¶
- **èµ·æ­¥ä¾èµ–**ï¼šç®€åŒ–ä¾èµ–ç®¡ç†ï¼Œè§£å†³ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜
- **å†…åµŒæœåŠ¡å™¨**ï¼šå†…ç½®Tomcatç­‰æœåŠ¡å™¨ï¼Œæ— éœ€éƒ¨ç½²WARæ–‡ä»¶
- **Actuator**ï¼šæä¾›ç›‘æ§å’Œç®¡ç†åŠŸèƒ½
- **æ— ä»£ç ç”Ÿæˆå’ŒXMLé…ç½®**ï¼šå‡å°‘æ ·æ¿ä»£ç 
- **ç‹¬ç«‹è¿è¡Œ**ï¼šå¯ä»¥åƒæ™®é€šJavaç¨‹åºä¸€æ ·è¿è¡Œ

### Q2: Spring Bootçš„è‡ªåŠ¨é…ç½®åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ
**ç­”:** Spring Bootè‡ªåŠ¨é…ç½®åŸºäºä»¥ä¸‹æœºåˆ¶ï¼š
1. é€šè¿‡`@EnableAutoConfiguration`æ³¨è§£å¯ç”¨è‡ªåŠ¨é…ç½®
2. è¯¥æ³¨è§£é€šè¿‡`@Import`å¯¼å…¥`AutoConfigurationImportSelector`ç±»
3. `AutoConfigurationImportSelector`ä¼šä»æ‰€æœ‰JARåŒ…ä¸­çš„`META-INF/spring.factories`æ–‡ä»¶åŠ è½½`EnableAutoConfiguration`é…ç½®é¡¹
4. æ ¹æ®æ¡ä»¶æ³¨è§£ï¼ˆ`@ConditionalOnClass`, `@ConditionalOnBean`ç­‰ï¼‰åˆ¤æ–­å“ªäº›é…ç½®ç±»ç”Ÿæ•ˆ
5. åŒ¹é…æ¡ä»¶çš„é…ç½®ç±»ä¼šè¢«æ³¨å†Œä¸ºBeanï¼Œåˆ›å»ºéœ€è¦çš„ç»„ä»¶

### Q3: Spring Bootå¸¸ç”¨çš„æ ¸å¿ƒæ³¨è§£æœ‰å“ªäº›ï¼Ÿ
**ç­”:** Spring Bootå¸¸ç”¨çš„æ ¸å¿ƒæ³¨è§£ï¼š
- `@SpringBootApplication`ï¼šåŒ…å«ä¸‰ä¸ªæ³¨è§£ï¼ˆ`@Configuration`, `@EnableAutoConfiguration`, `@ComponentScan`ï¼‰
- `@EnableAutoConfiguration`ï¼šå¯ç”¨è‡ªåŠ¨é…ç½®
- `@Configuration`ï¼šæ ‡è®°é…ç½®ç±»
- `@ComponentScan`ï¼šç»„ä»¶æ‰«æ
- `@ConfigurationProperties`ï¼šç»‘å®šé…ç½®å±æ€§
- `@ConditionalOnXXX`ï¼šæ¡ä»¶åŒ–é…ç½®ï¼ˆå¦‚`@ConditionalOnClass`, `@ConditionalOnBean`, `@ConditionalOnProperty`ç­‰ï¼‰
- `@SpringBootConfiguration`ï¼šç‰¹å®šäºSpring Bootçš„é…ç½®ç±»
- `@EnableConfigurationProperties`ï¼šå¯ç”¨`@ConfigurationProperties`æ³¨è§£

### Q4: Spring Bootå¦‚ä½•ç®¡ç†é…ç½®æ–‡ä»¶ï¼Ÿé…ç½®æ–‡ä»¶çš„ä¼˜å…ˆçº§å¦‚ä½•ï¼Ÿ
**ç­”:** Spring Bootæ”¯æŒå¤šç§é…ç½®æ–¹å¼ï¼Œä¸»è¦æœ‰ï¼š
- `application.properties`æˆ–`application.yml`æ–‡ä»¶
- ç‰¹å®šç¯å¢ƒçš„é…ç½®æ–‡ä»¶ï¼ˆå¦‚`application-dev.yml`ï¼‰
- ç¯å¢ƒå˜é‡
- å‘½ä»¤è¡Œå‚æ•°

é…ç½®ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼š
1. å‘½ä»¤è¡Œå‚æ•°
2. Javaç³»ç»Ÿå±æ€§ï¼ˆ`System.getProperties()`ï¼‰
3. æ“ä½œç³»ç»Ÿç¯å¢ƒå˜é‡
4. `application-{profile}.properties`ï¼ˆå¤–éƒ¨é…ç½®ï¼‰
5. `application.properties`ï¼ˆå¤–éƒ¨é…ç½®ï¼‰
6. `application-{profile}.properties`ï¼ˆå†…éƒ¨é…ç½®ï¼‰
7. `application.properties`ï¼ˆå†…éƒ¨é…ç½®ï¼‰
8. `@PropertySource`æ³¨è§£å¼•å…¥çš„å±æ€§
9. é»˜è®¤å±æ€§

### Q5: å¦‚ä½•ç†è§£Spring Bootçš„èµ·æ­¥ä¾èµ–ï¼ˆStarterï¼‰ï¼Ÿ
**ç­”:** Spring Bootèµ·æ­¥ä¾èµ–æ˜¯ä¸€ç§ç‰¹æ®Šçš„Mavenæˆ–Gradleä¾èµ–ï¼Œç”¨äºç®€åŒ–é¡¹ç›®ä¾èµ–ç®¡ç†ï¼š
- ä¸€ä¸ªèµ·æ­¥ä¾èµ–é€šå¸¸ä¼šå¼•å…¥ä¸€ç»„åŠŸèƒ½ç›¸å…³çš„ä¼ é€’æ€§ä¾èµ–
- é€šè¿‡`spring-boot-starter-*`å‘½åï¼Œå¦‚`spring-boot-starter-web`
- æä¾›äº†ç‰ˆæœ¬ç®¡ç†ï¼Œç¡®ä¿ä¾èµ–ç»„ä»¶é—´çš„å…¼å®¹æ€§
- ä¸è‡ªåŠ¨é…ç½®ååŒå·¥ä½œï¼Œè‡ªåŠ¨é…ç½®éœ€è¦çš„ç»„ä»¶
- å‡å°‘äº†æ‰‹åŠ¨æ·»åŠ ä¾èµ–çš„å·¥ä½œé‡å’Œç‰ˆæœ¬å†²çªçš„é£é™©

### Q6: Spring Bootçš„å¯åŠ¨æµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ
**ç­”:** Spring Bootå¯åŠ¨æµç¨‹ä¸»è¦åŒ…æ‹¬ï¼š
1. åˆ›å»º`SpringApplication`å¯¹è±¡
   - ç¡®å®šåº”ç”¨ç±»å‹ï¼ˆSERVLETã€REACTIVEã€NONEï¼‰
   - è®¾ç½®åˆå§‹åŒ–å™¨å’Œç›‘å¬å™¨
   - æ¨æ–­ä¸»åº”ç”¨ç±»
2. è¿è¡Œ`SpringApplication`
   - åˆ›å»ºå¹¶å¯åŠ¨è®¡æ—¶å™¨
   - å‘å¸ƒ`ApplicationStartingEvent`äº‹ä»¶
   - å‡†å¤‡ç¯å¢ƒå¹¶åŠ è½½é…ç½®
   - åˆ›å»º`ApplicationContext`
   - å‡†å¤‡ä¸Šä¸‹æ–‡ï¼ŒåŠ è½½Beanå®šä¹‰
   - åˆ·æ–°ä¸Šä¸‹æ–‡ï¼Œå®ä¾‹åŒ–å•ä¾‹Bean
   - å‘å¸ƒ`ApplicationStartedEvent`äº‹ä»¶
   - è°ƒç”¨`ApplicationRunner`å’Œ`CommandLineRunner`
   - å‘å¸ƒ`ApplicationReadyEvent`äº‹ä»¶

### Q7: å¦‚ä½•åœ¨Spring Bootä¸­é›†æˆè‡ªå®šä¹‰é…ç½®ï¼Ÿ
**ç­”:** åœ¨Spring Bootä¸­é›†æˆè‡ªå®šä¹‰é…ç½®æœ‰å¤šç§æ–¹å¼ï¼š
1. ä½¿ç”¨`@Value`æ³¨è§£ç›´æ¥æ³¨å…¥å•ä¸ªå±æ€§
   ```java
   @Value("${custom.property}")
   private String customProperty;
   ```
2. ä½¿ç”¨`@ConfigurationProperties`ç»‘å®šé…ç½®åˆ°Javaç±»
   ```java
   @Component
   @ConfigurationProperties(prefix = "custom")
   public class CustomProperties {
       private String property;
       // getters and setters
   }
   ```
3. åˆ›å»ºè‡ªå®šä¹‰çš„é…ç½®ç±»ï¼š
   ```java
   @Configuration
   public class CustomConfiguration {
       @Bean
       public SomeBean someBean() {
           return new SomeBean();
       }
   }
   ```

### Q8: Spring Bootä¸­å¦‚ä½•å®ç°å®‰å…¨è®¤è¯ï¼Ÿ
**ç­”:** Spring Bootä¸­å®ç°å®‰å…¨è®¤è¯ä¸»è¦é€šè¿‡Spring Securityï¼š
1. æ·»åŠ ä¾èµ–ï¼š`spring-boot-starter-security`
2. åˆ›å»ºé…ç½®ç±»ï¼š
   ```java
   @Configuration
   @EnableWebSecurity
   public class SecurityConfig extends WebSecurityConfigurerAdapter {
       
       @Override
       protected void configure(HttpSecurity http) throws Exception {
           http
               .authorizeRequests()
                   .antMatchers("/public/**").permitAll()
                   .anyRequest().authenticated()
                   .and()
               .formLogin()
                   .loginPage("/login")
                   .permitAll()
                   .and()
               .logout()
                   .permitAll();
       }
       
       @Override
       protected void configure(AuthenticationManagerBuilder auth) throws Exception {
           auth.inMemoryAuthentication()
               .withUser("user").password("{noop}password").roles("USER");
       }
   }
   ```
3. å¯¹äºç”Ÿäº§ç¯å¢ƒï¼Œå¯ä»¥é…ç½®JDBCè®¤è¯ã€OAuth2ã€LDAPç­‰è®¤è¯æ–¹å¼

### Q9: Spring Boot Actuatorçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿæœ‰å“ªäº›å¸¸ç”¨ç«¯ç‚¹ï¼Ÿ
**ç­”:** Spring Boot Actuatoræä¾›ç”Ÿäº§å°±ç»ªåŠŸèƒ½ï¼Œç”¨äºç›‘æ§å’Œç®¡ç†åº”ç”¨ï¼š

**ä½œç”¨ï¼š**
- ç›‘æ§åº”ç”¨å¥åº·çŠ¶æ€
- æ”¶é›†åº”ç”¨æŒ‡æ ‡
- æŸ¥çœ‹åº”ç”¨é…ç½®
- æŸ¥çœ‹ç¯å¢ƒä¿¡æ¯
- ç®¡ç†æ—¥å¿—çº§åˆ«
- æŸ¥çœ‹çº¿ç¨‹ä¿¡æ¯

**å¸¸ç”¨ç«¯ç‚¹ï¼š**
- `/actuator/health`ï¼šå¥åº·çŠ¶æ€
- `/actuator/info`ï¼šåº”ç”¨ä¿¡æ¯
- `/actuator/metrics`ï¼šæŒ‡æ ‡æ”¶é›†
- `/actuator/env`ï¼šç¯å¢ƒå˜é‡
- `/actuator/configprops`ï¼šé…ç½®å±æ€§
- `/actuator/mappings`ï¼šè¯·æ±‚æ˜ å°„
- `/actuator/beans`ï¼šåº”ç”¨ä¸­çš„Bean
- `/actuator/loggers`ï¼šæ—¥å¿—é…ç½®

### Q10: å¦‚ä½•è‡ªå®šä¹‰Spring Bootçš„Bannerï¼Ÿ
**ç­”:** è‡ªå®šä¹‰Spring Bootå¯åŠ¨Bannerçš„æ–¹æ³•ï¼š
1. åœ¨`src/main/resources`ç›®å½•ä¸‹åˆ›å»º`banner.txt`æ–‡ä»¶
2. ä½¿ç”¨æ–‡æœ¬/ASCIIè‰ºæœ¯è®¾è®¡Banner
3. ä¹Ÿå¯ä»¥é€šè¿‡ä»£ç æ–¹å¼è®¾ç½®ï¼š
   ```java
   SpringApplication app = new SpringApplication(MyApp.class);
   app.setBannerMode(Banner.Mode.OFF); // å…³é—­Banner
   // æˆ–è€…è®¾ç½®è‡ªå®šä¹‰Banner
   app.setBanner(new ResourceBanner(new ClassPathResource("path/to/banner.txt")));
   app.run(args);
   ```
4. å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ï¼š
   ```properties
   spring.main.banner-mode=off
   # æˆ–è€…æŒ‡å®šæ–‡ä»¶
   spring.banner.location=classpath:path/to/banner.txt
   ```
