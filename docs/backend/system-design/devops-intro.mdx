---
sidebar_position: 7
title: "DevOpså®è·µæŒ‡å—"
description: "æ·±å…¥ç†è§£DevOpsç†å¿µã€å·¥å…·é“¾ä¸æœ€ä½³å®è·µ"
authors: [Laby]
last_update:
  date: 2025-08-07
  author: Laby
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import TOCInline from '@theme/TOCInline';

# DevOpså®è·µæŒ‡å—

DevOpsæ˜¯ä¸€ç§å°†å¼€å‘(Development)ã€è¿ç»´(Operations)å’Œè´¨é‡ä¿è¯(QA)æ•´åˆåœ¨ä¸€èµ·çš„æ–‡åŒ–ã€å®è·µå’Œå·¥å…·é›†åˆï¼Œæ—¨åœ¨æé«˜è½¯ä»¶äº¤ä»˜çš„é€Ÿåº¦ã€è´¨é‡å’Œå¯é æ€§ã€‚

:::info æœ¬æ–‡å†…å®¹æ¦‚è§ˆ
<TOCInline toc={toc} />
:::

:::tip æ ¸å¿ƒä»·å€¼
**DevOps = æŒç»­é›†æˆ + æŒç»­éƒ¨ç½² + è‡ªåŠ¨åŒ–è¿ç»´ + ç›‘æ§å‘Šè­¦ + å›¢é˜Ÿåä½œ**
- ğŸ”„ **æŒç»­é›†æˆ**ï¼šé¢‘ç¹å°†ä»£ç é›†æˆåˆ°ä¸»å¹²ï¼Œè‡ªåŠ¨æ‰§è¡Œæ„å»ºå’Œæµ‹è¯•
- ğŸš€ **æŒç»­éƒ¨ç½²**ï¼šè‡ªåŠ¨å°†å·²éªŒè¯çš„ä»£ç éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
- ğŸ¤– **è‡ªåŠ¨åŒ–è¿ç»´**ï¼šè‡ªåŠ¨åŒ–é…ç½®ã€éƒ¨ç½²å’Œç®¡ç†åŸºç¡€è®¾æ–½
- ğŸ“Š **ç›‘æ§å‘Šè­¦**ï¼šå®æ—¶ç›‘æ§ç³»ç»ŸçŠ¶æ€ï¼ŒåŠæ—¶å‘ç°å’Œå“åº”é—®é¢˜
- ğŸ‘¥ **å›¢é˜Ÿåä½œ**ï¼šæ‰“ç ´å¼€å‘ä¸è¿ç»´ä¹‹é—´çš„å£å’ï¼Œå…±äº«è´£ä»»
:::

## 1. DevOpsåŸºç¡€æ¦‚å¿µ

### 1.1 DevOpsç†å¿µ

```mermaid
graph TD
    A[DevOpsæ ¸å¿ƒç†å¿µ] --> B[æ–‡åŒ–]
    A --> C[å®è·µ]
    A --> D[å·¥å…·]
    
    B --> B1[æ‰“ç ´éƒ¨é—¨å£å’]
    B --> B2[å…±äº«è´£ä»»]
    B --> B3[æŒç»­å­¦ä¹ ]
    
    C --> C1[æŒç»­é›†æˆCI]
    C --> C2[æŒç»­éƒ¨ç½²CD]
    C --> C3[åŸºç¡€è®¾æ–½å³ä»£ç ]
    C --> C4[ç›‘æ§ä¸åé¦ˆ]
    
    D --> D1[ç‰ˆæœ¬æ§åˆ¶]
    D --> D2[è‡ªåŠ¨åŒ–æ„å»º]
    D --> D3[å®¹å™¨åŒ–]
    D --> D4[ç›‘æ§å·¥å…·]
    
    style A fill:#f9f,stroke:#333,stroke-width:2px
    style B fill:#bbf,stroke:#333,stroke-width:2px
    style C fill:#bbf,stroke:#333,stroke-width:2px
    style D fill:#bbf,stroke:#333,stroke-width:2px
```

DevOpsçš„æ ¸å¿ƒç†å¿µï¼š

| ç†å¿µ | è¯´æ˜ | å®è·µæ–¹å¼ |
|------|------|----------|
| **æŒç»­é›†æˆ (CI)** | é¢‘ç¹é›†æˆä»£ç åˆ°ä¸»å¹² | è‡ªåŠ¨åŒ–æ„å»ºã€æµ‹è¯• |
| **æŒç»­éƒ¨ç½² (CD)** | è‡ªåŠ¨åŒ–éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ | æµæ°´çº¿éƒ¨ç½²ã€è“ç»¿éƒ¨ç½² |
| **è‡ªåŠ¨åŒ–è¿ç»´** | å‡å°‘äººå·¥å¹²é¢„ | é…ç½®ç®¡ç†ã€å®¹å™¨åŒ– |
| **ç›‘æ§å‘Šè­¦** | å®æ—¶ç›‘æ§ç³»ç»ŸçŠ¶æ€ | æ—¥å¿—åˆ†æã€æ€§èƒ½ç›‘æ§ |
| **å›¢é˜Ÿåä½œ** | æ‰“ç ´éƒ¨é—¨å£å’ | è·¨èŒèƒ½å›¢é˜Ÿã€å…±äº«è´£ä»» |

<details>
<summary>DevOpsä¸ä¼ ç»Ÿå¼€å‘æ¨¡å¼çš„å¯¹æ¯”</summary>

| æ–¹é¢ | ä¼ ç»Ÿå¼€å‘æ¨¡å¼ | DevOpsæ¨¡å¼ |
|------|------------|-----------|
| **å›¢é˜Ÿç»“æ„** | å¼€å‘å›¢é˜Ÿå’Œè¿ç»´å›¢é˜Ÿåˆ†ç¦» | è·¨èŒèƒ½å›¢é˜Ÿï¼Œå…±åŒè´Ÿè´£ |
| **å‘å¸ƒå‘¨æœŸ** | é•¿å‘¨æœŸå‘å¸ƒï¼ˆæœˆ/å­£åº¦ï¼‰ | çŸ­å‘¨æœŸå‘å¸ƒï¼ˆå¤©/å‘¨ï¼‰ |
| **å˜æ›´é£é™©** | å¤§æ‰¹é‡å˜æ›´ï¼Œé£é™©é«˜ | å°æ‰¹é‡å˜æ›´ï¼Œé£é™©ä½ |
| **æ•…éšœå¤„ç†** | è´£ä»»æ¨è¯¿ï¼Œè§£å†³æ…¢ | å…±åŒè´£ä»»ï¼Œå¿«é€Ÿè§£å†³ |
| **è‡ªåŠ¨åŒ–ç¨‹åº¦** | ä½ï¼Œå¤§é‡äººå·¥æ“ä½œ | é«˜ï¼Œè‡ªåŠ¨åŒ–æµæ°´çº¿ |
| **åé¦ˆå‘¨æœŸ** | é•¿ï¼Œç”¨æˆ·åé¦ˆæ»å | çŸ­ï¼Œå¿«é€Ÿè·å–åé¦ˆ |
| **å·¥ä½œé‡ç‚¹** | åŠŸèƒ½å¼€å‘ | äº¤ä»˜ä»·å€¼å’Œç¨³å®šæ€§ |

</details>

<Tabs>
  <TabItem value="config" label="DevOpsé…ç½®" default>
  ```java
  @Configuration
  public class DevOpsConfig {
      
      @Value("${devops.ci.enabled:true}")
      private boolean ciEnabled;
      
      @Value("${devops.cd.enabled:true}")
      private boolean cdEnabled;
      
      @Value("${devops.monitoring.enabled:true}")
      private boolean monitoringEnabled;
      
      @Bean
      public DevOpsProperties devOpsProperties() {
          DevOpsProperties properties = new DevOpsProperties();
          properties.setCiEnabled(ciEnabled);
          properties.setCdEnabled(cdEnabled);
          properties.setMonitoringEnabled(monitoringEnabled);
          return properties;
      }
      
      @Bean
      public PipelineManager pipelineManager() {
          return new PipelineManager(devOpsProperties());
      }
  }
  ```
  </TabItem>
  <TabItem value="properties" label="é…ç½®å±æ€§">
  ```java
  @Component
  public class DevOpsProperties {
      private boolean ciEnabled = true;
      private boolean cdEnabled = true;
      private boolean monitoringEnabled = true;
      private String buildTool = "maven";
      private String containerPlatform = "docker";
      private String orchestrationPlatform = "kubernetes";
      private Map<String, String> toolConfigs = new HashMap<>();
      
      // getterå’Œsetteræ–¹æ³•
      public boolean isCiEnabled() {
          return ciEnabled;
      }
      
      public void setCiEnabled(boolean ciEnabled) {
          this.ciEnabled = ciEnabled;
      }
      
      public boolean isCdEnabled() {
          return cdEnabled;
      }
      
      public void setCdEnabled(boolean cdEnabled) {
          this.cdEnabled = cdEnabled;
      }
      
      public boolean isMonitoringEnabled() {
          return monitoringEnabled;
      }
      
      public void setMonitoringEnabled(boolean monitoringEnabled) {
          this.monitoringEnabled = monitoringEnabled;
      }
      
      // å…¶ä»–getterå’Œsetter
  }
  ```
  </TabItem>
</Tabs>

### 1.2 DevOpsç”Ÿå‘½å‘¨æœŸ

DevOpsç”Ÿå‘½å‘¨æœŸæ˜¯ä¸€ä¸ªé—­ç¯çš„è¿‡ç¨‹ï¼ŒåŒ…æ‹¬è®¡åˆ’ã€ç¼–ç ã€æ„å»ºã€æµ‹è¯•ã€å‘å¸ƒã€éƒ¨ç½²ã€è¿ç»´å’Œç›‘æ§é˜¶æ®µã€‚

```mermaid
flowchart LR
    A[è®¡åˆ’] --> B[ç¼–ç ]
    B --> C[æ„å»º]
    C --> D[æµ‹è¯•]
    D --> E[å‘å¸ƒ]
    E --> F[éƒ¨ç½²]
    F --> G[è¿ç»´]
    G --> H[ç›‘æ§]
    H --> A
    
    classDef blue fill:#bbf,stroke:#333,stroke-width:2px
    classDef green fill:#bfb,stroke:#333,stroke-width:2px
    classDef red fill:#fbb,stroke:#333,stroke-width:2px
    
    class B,C blue
    class D,E green
    class F,G,H red
```

<div className="card">
<div className="card__header">
<h4>DevOpsç”Ÿå‘½å‘¨æœŸé˜¶æ®µ</h4>
</div>
<div className="card__body">

1. **è®¡åˆ’**ï¼šå®šä¹‰éœ€æ±‚ã€è§„åˆ’è¿­ä»£å†…å®¹ã€åˆ¶å®šå¼€å‘è®¡åˆ’
2. **ç¼–ç **ï¼šå¼€å‘åŠŸèƒ½ã€ä»£ç å®¡æŸ¥ã€ç‰ˆæœ¬æ§åˆ¶
3. **æ„å»º**ï¼šç¼–è¯‘ä»£ç ã€é™æ€ä»£ç åˆ†æã€æ„å»ºå®¹å™¨é•œåƒ
4. **æµ‹è¯•**ï¼šå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€è‡ªåŠ¨åŒ–æµ‹è¯•
5. **å‘å¸ƒ**ï¼šæ‰“åŒ…ã€ç‰ˆæœ¬æ ‡è®°ã€å‘å¸ƒåˆ°åˆ¶å“åº“
6. **éƒ¨ç½²**ï¼šç¯å¢ƒé…ç½®ã€åº”ç”¨éƒ¨ç½²ã€åŸºç¡€è®¾æ–½æ›´æ–°
7. **è¿ç»´**ï¼šç³»ç»Ÿé…ç½®ã€èµ„æºç®¡ç†ã€æ‰©ç¼©å®¹
8. **ç›‘æ§**ï¼šæ€§èƒ½ç›‘æ§ã€æ—¥å¿—æ”¶é›†ã€å‘Šè­¦å¤„ç†

</div>
</div>

<Tabs>
  <TabItem value="lifecycle" label="ç”Ÿå‘½å‘¨æœŸç®¡ç†" default>
  ```java
  @Component
  public class DevOpsLifecycle {
      
      @Autowired
      private PipelineManager pipelineManager;
      
      @Autowired
      private MonitoringService monitoringService;
      
      public void executeDevOpsPipeline(String projectName, String branch) {
          try {
              // 1. ä»£ç æäº¤é˜¶æ®µ
              log.info("å¼€å§‹å¤„ç†é¡¹ç›®: {} åˆ†æ”¯: {}", projectName, branch);
              
              // 2. æŒç»­é›†æˆé˜¶æ®µ
              boolean ciSuccess = executeCI(projectName, branch);
              if (!ciSuccess) {
                  throw new DevOpsException("CIé˜¶æ®µå¤±è´¥");
              }
              
              // 3. æŒç»­éƒ¨ç½²é˜¶æ®µ
              boolean cdSuccess = executeCD(projectName, branch);
              if (!cdSuccess) {
                  throw new DevOpsException("CDé˜¶æ®µå¤±è´¥");
              }
              
              // 4. ç›‘æ§éªŒè¯é˜¶æ®µ
              boolean monitoringSuccess = executeMonitoring(projectName);
              if (!monitoringSuccess) {
                  log.warn("ç›‘æ§éªŒè¯å¤±è´¥ï¼Œéœ€è¦äººå·¥æ£€æŸ¥");
              }
              
              log.info("DevOpsæµæ°´çº¿æ‰§è¡Œå®Œæˆ: {}", projectName);
              
          } catch (Exception e) {
              log.error("DevOpsæµæ°´çº¿æ‰§è¡Œå¤±è´¥: {}", projectName, e);
              handlePipelineFailure(projectName, e);
          }
      }
      
      private boolean executeCI(String projectName, String branch) {
          log.info("æ‰§è¡ŒCIé˜¶æ®µ: {}", projectName);
          
          // ä»£ç æ£€æŸ¥
          boolean codeCheck = pipelineManager.runCodeCheck(projectName, branch);
          if (!codeCheck) {
              log.error("ä»£ç æ£€æŸ¥å¤±è´¥: {}", projectName);
              return false;
          }
          
          // å•å…ƒæµ‹è¯•
          boolean unitTest = pipelineManager.runUnitTests(projectName, branch);
          if (!unitTest) {
              log.error("å•å…ƒæµ‹è¯•å¤±è´¥: {}", projectName);
              return false;
          }
          
          // é›†æˆæµ‹è¯•
          boolean integrationTest = pipelineManager.runIntegrationTests(projectName, branch);
          if (!integrationTest) {
              log.error("é›†æˆæµ‹è¯•å¤±è´¥: {}", projectName);
              return false;
          }
          
          // æ„å»ºæ‰“åŒ…
          boolean build = pipelineManager.buildProject(projectName, branch);
          if (!build) {
              log.error("æ„å»ºå¤±è´¥: {}", projectName);
              return false;
          }
          
          return true;
      }
  }
  ```
  </TabItem>
  <TabItem value="ci" label="æŒç»­é›†æˆé˜¶æ®µ">
  ```java
  @Component
  public class ContinuousIntegration {
      
      @Autowired
      private GitService gitService;
      
      @Autowired
      private BuildService buildService;
      
      @Autowired
      private TestService testService;
      
      @Autowired
      private NotificationService notificationService;
      
      public BuildResult executeCIPipeline(String projectName, String branch) {
          log.info("å¼€å§‹æ‰§è¡ŒæŒç»­é›†æˆæµç¨‹ - é¡¹ç›®: {}, åˆ†æ”¯: {}", projectName, branch);
          BuildResult result = new BuildResult();
          
          try {
              // 1. æ‹‰å–ä»£ç 
              gitService.checkout(projectName, branch);
              
              // 2. é™æ€ä»£ç åˆ†æ
              CodeAnalysisResult analysisResult = runCodeAnalysis(projectName);
              result.setCodeAnalysisResult(analysisResult);
              
              if (!analysisResult.isSuccess() && analysisResult.isCritical()) {
                  result.setSuccess(false);
                  result.setFailureStage("é™æ€ä»£ç åˆ†æ");
                  return result;
              }
              
              // 3. ç¼–è¯‘ä»£ç 
              boolean compileSuccess = buildService.compile(projectName);
              if (!compileSuccess) {
                  result.setSuccess(false);
                  result.setFailureStage("ç¼–è¯‘");
                  return result;
              }
              
              // 4. è¿è¡Œå•å…ƒæµ‹è¯•
              TestResult testResult = testService.runUnitTests(projectName);
              result.setTestResult(testResult);
              
              if (!testResult.isSuccess()) {
                  result.setSuccess(false);
                  result.setFailureStage("å•å…ƒæµ‹è¯•");
                  return result;
              }
              
              // 5. æ„å»ºé¡¹ç›®
              String artifactId = buildService.buildArtifact(projectName, branch);
              result.setArtifactId(artifactId);
              
              result.setSuccess(true);
              log.info("æŒç»­é›†æˆæµç¨‹æˆåŠŸå®Œæˆ");
              
          } catch (Exception e) {
              log.error("æŒç»­é›†æˆæµç¨‹å¤±è´¥", e);
              result.setSuccess(false);
              result.setFailureStage("æœªçŸ¥é”™è¯¯");
              result.setFailureMessage(e.getMessage());
          }
          
          // å‘é€é€šçŸ¥
          notificationService.sendBuildNotification(result);
          
          return result;
      }
  }
  ```
  </TabItem>
  <TabItem value="cd" label="æŒç»­éƒ¨ç½²é˜¶æ®µ">
  ```java
  @Component
  public class ContinuousDeployment {
      
      @Autowired
      private ArtifactRepository artifactRepository;
      
      @Autowired
      private KubernetesService kubernetesService;
      
      @Autowired
      private MonitoringService monitoringService;
      
      public DeploymentResult executeDeployment(String projectName, String artifactId, String environment) {
          log.info("å¼€å§‹æ‰§è¡ŒæŒç»­éƒ¨ç½²æµç¨‹ - é¡¹ç›®: {}, åˆ¶å“: {}, ç¯å¢ƒ: {}", 
              projectName, artifactId, environment);
          
          DeploymentResult result = new DeploymentResult();
          
          try {
              // 1. è·å–åˆ¶å“
              String artifactUrl = artifactRepository.getArtifactUrl(artifactId);
              
              // 2. æ£€æŸ¥ç›®æ ‡ç¯å¢ƒ
              EnvironmentStatus envStatus = kubernetesService.checkEnvironment(environment);
              if (!envStatus.isReady()) {
                  result.setSuccess(false);
                  result.setFailureStage("ç¯å¢ƒæ£€æŸ¥");
                  result.setFailureMessage("ç›®æ ‡ç¯å¢ƒä¸å¯ç”¨: " + envStatus.getMessage());
                  return result;
              }
              
              // 3. æ‰§è¡Œéƒ¨ç½²
              String deploymentId = kubernetesService.deploy(projectName, artifactUrl, environment);
              result.setDeploymentId(deploymentId);
              
              // 4. éªŒè¯éƒ¨ç½²
              DeploymentStatus deployStatus = kubernetesService.waitForDeployment(deploymentId, 300);
              if (!deployStatus.isSuccess()) {
                  result.setSuccess(false);
                  result.setFailureStage("éƒ¨ç½²éªŒè¯");
                  result.setFailureMessage("éƒ¨ç½²æœªæˆåŠŸå®Œæˆ: " + deployStatus.getMessage());
                  return result;
              }
              
              // 5. å¥åº·æ£€æŸ¥
              HealthCheckResult healthCheck = monitoringService.performHealthCheck(
                  projectName, environment, 60);
              
              result.setHealthCheckResult(healthCheck);
              result.setSuccess(healthCheck.isSuccess());
              
              if (!healthCheck.isSuccess()) {
                  result.setFailureStage("å¥åº·æ£€æŸ¥");
                  return result;
              }
              
              log.info("æŒç»­éƒ¨ç½²æµç¨‹æˆåŠŸå®Œæˆ");
              
          } catch (Exception e) {
              log.error("æŒç»­éƒ¨ç½²æµç¨‹å¤±è´¥", e);
              result.setSuccess(false);
              result.setFailureStage("æœªçŸ¥é”™è¯¯");
              result.setFailureMessage(e.getMessage());
          }
          
          return result;
      }
  }
  ```
  </TabItem>
</Tabs>

:::caution DevOpså®è·µæ³¨æ„äº‹é¡¹
1. **è‡ªåŠ¨åŒ–ä¼˜å…ˆ**ï¼šå°½å¯èƒ½è‡ªåŠ¨åŒ–æ‰€æœ‰é‡å¤æ€§ä»»åŠ¡ï¼Œå‡å°‘æ‰‹åŠ¨æ“ä½œ
2. **å°æ‰¹é‡å˜æ›´**ï¼šé¢‘ç¹å‘å¸ƒå°çš„å˜æ›´ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§å¤§æ‰¹é‡å˜æ›´
3. **å¿«é€Ÿåé¦ˆ**ï¼šå»ºç«‹å¿«é€Ÿåé¦ˆæœºåˆ¶ï¼Œå°½æ—©å‘ç°å’Œè§£å†³é—®é¢˜
4. **å…±äº«è´£ä»»**ï¼šå¼€å‘å’Œè¿ç»´å…±åŒè´Ÿè´£äº§å“è´¨é‡å’Œç¨³å®šæ€§
5. **æŒç»­æ”¹è¿›**ï¼šå®šæœŸå›é¡¾å’Œæ”¹è¿›DevOpsæµç¨‹å’Œå·¥å…·é“¾
:::

## 2. æŒç»­é›†æˆä¸æŒç»­éƒ¨ç½²

### 2.1 æŒç»­é›†æˆå®è·µ

æŒç»­é›†æˆ(CI)æ˜¯ä¸€ç§è½¯ä»¶å¼€å‘å®è·µï¼Œå›¢é˜Ÿæˆå‘˜é¢‘ç¹åœ°å°†ä»£ç é›†æˆåˆ°å…±äº«ä»“åº“ï¼Œé€šå¸¸æ¯å¤©å¤šæ¬¡ã€‚æ¯æ¬¡é›†æˆéƒ½é€šè¿‡è‡ªåŠ¨åŒ–æ„å»ºå’Œæµ‹è¯•æ¥éªŒè¯ã€‚ 