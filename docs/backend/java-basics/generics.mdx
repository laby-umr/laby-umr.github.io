---
sidebar_position: 10
title: Javaæ³›å‹ï¼ˆGenericsï¼‰è¯¦è§£
description: æ·±å…¥ç†è§£Javaæ³›å‹çš„æ¦‚å¿µã€è¯­æ³•ã€ç±»å‹æ“¦é™¤ã€é€šé…ç¬¦ä¸æœ€ä½³å®è·µ
authors: [Laby]
last_update:
  date: 2025-08-07
  author: Laby
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import TOCInline from '@theme/TOCInline';

# Java æ³›å‹ï¼ˆGenericsï¼‰è¯¦è§£

Javaæ³›å‹æ˜¯JDK 5.0å¼•å…¥çš„é‡è¦ç‰¹æ€§ï¼Œå®ƒæä¾›äº†ç¼–è¯‘æ—¶ç±»å‹å®‰å…¨æ£€æŸ¥ï¼Œå…è®¸åœ¨ç¼–è¯‘æ—¶æ£€æµ‹åˆ°ä¸æ­£ç¡®çš„ç±»å‹ä½¿ç”¨ã€‚æ³›å‹çš„ä¸»è¦ç›®çš„æ˜¯å®ç°"ç±»å‹å‚æ•°åŒ–"ï¼Œè®©ä»£ç æ›´åŠ çµæ´»ã€å®‰å…¨ï¼ŒåŒæ—¶é¿å…ç±»å‹è½¬æ¢å¼‚å¸¸ã€‚

:::info æœ¬æ–‡å†…å®¹æ¦‚è§ˆ
<TOCInline toc={toc} />
:::

```mermaid
graph TD
    A[Javaæ³›å‹] --> B[æ³›å‹ç±»]
    A --> C[æ³›å‹æ¥å£]
    A --> D[æ³›å‹æ–¹æ³•]
    A --> E[ç±»å‹æ“¦é™¤]
    A --> F[é€šé…ç¬¦]
    
    B --> B1["class Box&lt;T&gt;"]
    C --> C1["interface Comparable&lt;T&gt;"]
    D --> D1["&lt;T&gt; T method(T t)"]
    E --> E1["ç¼–è¯‘åç±»å‹è¢«æ›¿æ¢ä¸ºObject"]
    F --> F2["&lt;? extends T&gt;"]
    F --> F3["&lt;? super T&gt;"]
    F --> F4["&lt;?&gt;"]
    
    style A fill:#f9f9f9,stroke:#333,stroke-width:2px
```

:::tip æ ¸å¿ƒä»·å€¼
**æ³›å‹ = ç±»å‹å®‰å…¨ + ä»£ç é‡ç”¨ + æ€§èƒ½ä¼˜åŒ– + ç¼–è¯‘æ—¶æ£€æŸ¥**
- ğŸ”’ **ç±»å‹å®‰å…¨**ï¼šåœ¨ç¼–è¯‘æ—¶è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œå‡å°‘è¿è¡Œæ—¶ç±»å‹é”™è¯¯
- â™»ï¸ **ä»£ç é‡ç”¨**ï¼šç¼–å†™é€‚ç”¨äºå¤šç§ç±»å‹çš„é€šç”¨ä»£ç ï¼Œæé«˜ä»£ç å¤ç”¨æ€§
- âš¡ **æ€§èƒ½ä¼˜åŒ–**ï¼šé¿å…ç±»å‹è½¬æ¢çš„å¼€é”€ï¼Œæå‡è¿è¡Œæ—¶æ€§èƒ½
- ğŸ§© **APIè®¾è®¡**ï¼šè®¾è®¡çµæ´»ä¸”ç±»å‹å®‰å…¨çš„APIï¼Œå¢å¼ºä»£ç å¥å£®æ€§
- ğŸ“ **è‡ªæ–‡æ¡£åŒ–**ï¼šæ³›å‹å‚æ•°æä¾›äº†ç±»å‹ä¿¡æ¯ï¼Œå¢å¼ºä»£ç å¯è¯»æ€§
:::

## 1. æ³›å‹åŸºç¡€æ¦‚å¿µ

### 1.1 ä»€ä¹ˆæ˜¯æ³›å‹ï¼Ÿ

æ³›å‹æ˜¯ä¸€ç§å‚æ•°åŒ–ç±»å‹çš„æ¦‚å¿µï¼Œå®ƒå…è®¸åœ¨å®šä¹‰ç±»ã€æ¥å£å’Œæ–¹æ³•æ—¶ä½¿ç”¨ç±»å‹å‚æ•°ã€‚è¿™äº›ç±»å‹å‚æ•°åœ¨ä½¿ç”¨æ—¶ä¼šè¢«å…·ä½“çš„ç±»å‹æ›¿æ¢ï¼Œä»è€Œæä¾›ç±»å‹å®‰å…¨ã€‚

```mermaid
classDiagram
    class Box~T~ {
        -T content
        +set(T content) void
        +get() T
    }
    
    class StringBox {
        -String content
        +set(String content) void
        +get() String
    }
    
    class IntegerBox {
        -Integer content
        +set(Integer content) void
        +get() Integer
    }
    
    Box <|-- StringBox : T=String
    Box <|-- IntegerBox : T=Integer
    
    note for Box "æ³›å‹å‚æ•°Tåœ¨å®ä¾‹åŒ–æ—¶\nä¼šè¢«å…·ä½“ç±»å‹æ›¿æ¢"
```

<Tabs>
  <TabItem value="syntax" label="åŸºæœ¬è¯­æ³•" default>
```java title="æ³›å‹ç±»å®šä¹‰"
public class Box<T> {
    private T content;
    
    public void set(T content) {
        this.content = content;
    }
    
    public T get() {
        return content;
    }
}
```
  </TabItem>
  <TabItem value="usage" label="ä½¿ç”¨ç¤ºä¾‹">
    ```java title="æ³›å‹ç±»çš„ä½¿ç”¨" {3,8}
// åˆ›å»ºStringç±»å‹çš„Box
Box<String> stringBox = new Box<>();
    stringBox.set("Hello World"); // ç±»å‹å®‰å…¨æ£€æŸ¥
String content = stringBox.get(); // æ— éœ€ç±»å‹è½¬æ¢

// åˆ›å»ºIntegerç±»å‹çš„Box
Box<Integer> intBox = new Box<>();
    intBox.set(42); // ç±»å‹å®‰å…¨æ£€æŸ¥
Integer number = intBox.get(); // ç±»å‹å®‰å…¨
    
    // ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥ä¿æŠ¤
    // stringBox.set(42); // ç¼–è¯‘é”™è¯¯ï¼
    // intBox.set("42"); // ç¼–è¯‘é”™è¯¯ï¼
    ```
  </TabItem>
  <TabItem value="evolution" label="æ¼”è¿›å†å²">

    ```java
    // Java 5.0 ä¹‹å‰ - æ— æ³›å‹
    Box oldBox = new Box();
    oldBox.set("Test String");
    String content = (String) oldBox.get(); // éœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢
    
    // Java 5.0 - å¼•å…¥æ³›å‹
    Box<String> newBox = new Box<String>();
    newBox.set("Test String");
    String newContent = newBox.get(); // æ— éœ€ç±»å‹è½¬æ¢
    
    // Java 7.0 - è±å½¢æ“ä½œç¬¦
    Box<String> diamondBox = new Box<>(); // ç±»å‹æ¨æ–­
    ```

:::tip æç¤º
Java 7å¼•å…¥çš„è±å½¢æ“ä½œç¬¦è®©æ³›å‹å®ä¾‹åŒ–æ›´åŠ ç®€æ´ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ¨æ–­ç±»å‹å‚æ•°ã€‚
:::
  </TabItem>
</Tabs>

### 1.2 æ³›å‹çš„å¥½å¤„

```mermaid
flowchart TD
    A[æ³›å‹çš„å¥½å¤„] --> B[ç±»å‹å®‰å…¨]
    A --> C[æ¶ˆé™¤ç±»å‹è½¬æ¢]
    A --> D[ä»£ç å¤ç”¨]
    A --> E[ç¼–è¯‘æ—¶æ£€æŸ¥]
    
    B --> B1["é¿å…ClassCastException"]
    C --> C1["ç›´æ¥ä½¿ç”¨ç›®æ ‡ç±»å‹"]
    D --> D1["ä¸€ä¸ªç±»å¤„ç†å¤šç§ç±»å‹"]
    E --> E1["å°½æ—©å‘ç°é”™è¯¯"]
    
    style A fill:#f9f9f9,stroke:#333,stroke-width:2px
```

| å¥½å¤„ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **ç±»å‹å®‰å…¨** | ç¼–è¯‘æ—¶æ£€æŸ¥ç±»å‹åŒ¹é…ï¼Œé¿å…è¿è¡Œæ—¶å¼‚å¸¸ | `List<String>` åªèƒ½å­˜å‚¨Stringç±»å‹ |
| **æ¶ˆé™¤ç±»å‹è½¬æ¢** | æ— éœ€æ‰‹åŠ¨è¿›è¡Œç±»å‹è½¬æ¢ | `String s = list.get(0);` ç›´æ¥è·å–String |
| **ä»£ç å¤ç”¨** | ä¸€ä¸ªæ³›å‹ç±»å¯ä»¥å¤„ç†å¤šç§ç±»å‹ | `Box<T>` å¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹ |
| **ç¼–è¯‘æ—¶æ£€æŸ¥** | åœ¨ç¼–è¯‘æ—¶å‘ç°ç±»å‹é”™è¯¯ | å°è¯•å­˜å‚¨é”™è¯¯ç±»å‹æ—¶ç¼–è¯‘å¤±è´¥ |

<Tabs>
  <TabItem value="without" label="ä¸ä½¿ç”¨æ³›å‹çš„é—®é¢˜" default>
    ```java title="ä¸ä½¿ç”¨æ³›å‹çš„ä»£ç " {4,5}
// æ²¡æœ‰æ³›å‹ - å¯èƒ½å‡ºé”™
List list = new ArrayList();
list.add("Hello");
    list.add(42); // å¯ä»¥æ·»åŠ ä»»ä½•ç±»å‹ï¼Œç±»å‹ä¸å®‰å…¨
    String s = (String) list.get(1); // è¿è¡Œæ—¶å¼‚å¸¸ï¼ClassCastException
    ```
    
    :::caution è¿è¡Œæ—¶é”™è¯¯
    ä¸Šé¢çš„ä»£ç åœ¨ç¼–è¯‘æ—¶ä¸ä¼šæŠ¥é”™ï¼Œä½†åœ¨è¿è¡Œæ—¶ä¼šæŠ›å‡º `ClassCastException`ï¼Œå› ä¸ºå°è¯•å°† `Integer` è½¬æ¢ä¸º `String`ã€‚
    è¿™ç§é”™è¯¯åªèƒ½åœ¨è¿è¡Œæ—¶è¢«å‘ç°ï¼Œå¢åŠ äº†è°ƒè¯•éš¾åº¦ã€‚
    :::
  </TabItem>
  <TabItem value="with" label="ä½¿ç”¨æ³›å‹çš„ä¼˜åŠ¿">
    ```java title="ä½¿ç”¨æ³›å‹çš„ä»£ç " {3,4}
// ä½¿ç”¨æ³›å‹ - ç±»å‹å®‰å…¨
List<String> stringList = new ArrayList<>();
stringList.add("Hello");
    // stringList.add(42); // ç¼–è¯‘é”™è¯¯ï¼ç±»å‹ä¸åŒ¹é…
String s = stringList.get(0); // å®‰å…¨ï¼Œæ— éœ€è½¬æ¢
```
    
    :::tip ç¼–è¯‘æ—¶æ£€æŸ¥
    ä½¿ç”¨æ³›å‹åï¼Œå¦‚æœå°è¯•å‘ `List<String>` ä¸­æ·»åŠ é String ç±»å‹çš„å…ƒç´ ï¼Œç¼–è¯‘å™¨ä¼šç›´æ¥æŠ¥é”™ã€‚
    è¿™ç§ç±»å‹å®‰å…¨æ£€æŸ¥å¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µå°±å‘ç°é”™è¯¯ï¼Œè€Œä¸æ˜¯ç­‰åˆ°è¿è¡Œæ—¶ã€‚
    :::
  </TabItem>
  <TabItem value="compare" label="å¯¹æ¯”åˆ†æ">

| ç‰¹æ€§ | ä¸ä½¿ç”¨æ³›å‹ | ä½¿ç”¨æ³›å‹ |
|------|------------|----------|
| ç±»å‹æ£€æŸ¥ | è¿è¡Œæ—¶æ£€æŸ¥ | ç¼–è¯‘æ—¶æ£€æŸ¥ |
| ç±»å‹è½¬æ¢ | éœ€è¦æ˜¾å¼è½¬æ¢ | è‡ªåŠ¨è½¬æ¢ |
| é”™è¯¯å‘ç° | è¿è¡Œæ—¶æŠ›å‡ºå¼‚å¸¸ | ç¼–è¯‘æ—¶æç¤ºé”™è¯¯ |
| ä»£ç æ¸…æ™°åº¦ | ç±»å‹ä¿¡æ¯ä¸æ˜ç¡® | ç±»å‹ä¿¡æ¯æ˜ç¡® |

  </TabItem>
</Tabs>

## 2. æ³›å‹ç±»å‹å‚æ•°

### 2.1 ç±»å‹å‚æ•°å‘½åçº¦å®š

Javaæ³›å‹ä½¿ç”¨ç±»å‹å‚æ•°æ¥è¡¨ç¤ºç±»å‹ï¼Œè¿™äº›å‚æ•°é€šå¸¸ä½¿ç”¨å•ä¸ªå¤§å†™å­—æ¯å‘½åï¼Œéµå¾ªä»¥ä¸‹çº¦å®šï¼š

| ç±»å‹å‚æ•° | å«ä¹‰ | ç¤ºä¾‹ |
|----------|------|------|
| `E` | Elementï¼ˆå…ƒç´ ï¼‰ | `Collection<E>` |
| `T` | Typeï¼ˆç±»å‹ï¼‰ | `Box<T>` |
| `K` | Keyï¼ˆé”®ï¼‰ | `Map<K,V>` |
| `V` | Valueï¼ˆå€¼ï¼‰ | `Map<K,V>` |
| `N` | Numberï¼ˆæ•°å­—ï¼‰ | `Number<N>` |
| `S` | Sourceï¼ˆæºï¼‰ | `Function<S,T>` |

### 2.2 å¤šä¸ªç±»å‹å‚æ•°

æ³›å‹ç±»å¯ä»¥å®šä¹‰å¤šä¸ªç±»å‹å‚æ•°ï¼Œç”¨é€—å·åˆ†éš”ï¼š

```java title="å¤šä¸ªç±»å‹å‚æ•°"
public class Pair<K, V> {
    private K key;
    private V value;
    
    public Pair(K key, V value) {
        this.key = key;
        this.value = value;
    }
    
    public K getKey() { return key; }
    public V getValue() { return value; }
    
    public void setKey(K key) { this.key = key; }
    public void setValue(V value) { this.value = value; }
}
```

#### ä½¿ç”¨ç¤ºä¾‹
```java title="Pairç±»çš„ä½¿ç”¨"
// åˆ›å»ºString-Integerå¯¹
Pair<String, Integer> pair1 = new Pair<>("Age", 25);
String key = pair1.getKey();      // Stringç±»å‹
Integer value = pair1.getValue();  // Integerç±»å‹

// åˆ›å»ºInteger-Stringå¯¹
Pair<Integer, String> pair2 = new Pair<>(1, "One");
Integer key2 = pair2.getKey();    // Integerç±»å‹
String value2 = pair2.getValue(); // Stringç±»å‹
```

:::caution ç±»å‹å‚æ•°å‘½å
è™½ç„¶å¯ä»¥ä½¿ç”¨ä»»ä½•æ ‡è¯†ç¬¦ä½œä¸ºç±»å‹å‚æ•°ï¼Œä½†å»ºè®®éµå¾ªJavaçš„å‘½åçº¦å®šï¼Œè¿™æ ·ä»£ç æ›´æ˜“è¯»ã€æ›´ä¸“ä¸šã€‚
:::

## 3. æ³›å‹æ–¹æ³•

### 3.1 æ³›å‹æ–¹æ³•å®šä¹‰

æ³›å‹æ–¹æ³•æ˜¯åœ¨æ–¹æ³•çº§åˆ«ä½¿ç”¨æ³›å‹ï¼Œå®ƒå¯ä»¥åœ¨éæ³›å‹ç±»ä¸­å®šä¹‰ï¼Œä¹Ÿå¯ä»¥åœ¨æ³›å‹ç±»ä¸­å®šä¹‰ã€‚

#### åŸºæœ¬è¯­æ³•
```java title="æ³›å‹æ–¹æ³•å®šä¹‰"
public class Utils {
    // æ³›å‹æ–¹æ³•ï¼šåœ¨è¿”å›ç±»å‹å‰å£°æ˜ç±»å‹å‚æ•°
    public static <T> void printArray(T[] array) {
        for (T element : array) {
            System.out.print(element + " ");
        }
        System.out.println();
    }
    
    // æ³›å‹æ–¹æ³•ï¼šè¿”å›æ³›å‹ç±»å‹
    public static <T> T getFirst(T[] array) {
        if (array.length > 0) {
            return array[0];
        }
        return null;
    }
}
```

#### ä½¿ç”¨æ³›å‹æ–¹æ³•
```java title="æ³›å‹æ–¹æ³•è°ƒç”¨"
// è°ƒç”¨æ³›å‹æ–¹æ³•
String[] strings = {"Hello", "World"};
Integer[] numbers = {1, 2, 3, 4, 5};

Utils.printArray(strings);  // è¾“å‡º: Hello World
Utils.printArray(numbers);  // è¾“å‡º: 1 2 3 4 5

String firstString = Utils.getFirst(strings);  // Stringç±»å‹
Integer firstNumber = Utils.getFirst(numbers); // Integerç±»å‹
```

### 3.2 æ³›å‹æ–¹æ³•ä¸æ³›å‹ç±»çš„åŒºåˆ«

| ç‰¹æ€§ | æ³›å‹ç±» | æ³›å‹æ–¹æ³• |
|------|--------|----------|
| **å£°æ˜ä½ç½®** | ç±»åå | æ–¹æ³•è¿”å›ç±»å‹å‰ |
| **ä½œç”¨èŒƒå›´** | æ•´ä¸ªç±» | å•ä¸ªæ–¹æ³• |
| **ç±»å‹å‚æ•°** | å®ä¾‹åŒ–æ—¶ç¡®å®š | è°ƒç”¨æ—¶æ¨æ–­ |
| **ä½¿ç”¨æ–¹å¼** | `new Box<String>()` | `Utils.<String>method()` |

:::tip ç±»å‹æ¨æ–­
Javaç¼–è¯‘å™¨é€šå¸¸èƒ½å¤Ÿè‡ªåŠ¨æ¨æ–­æ³›å‹æ–¹æ³•çš„ç±»å‹å‚æ•°ï¼Œæ‰€ä»¥é€šå¸¸ä¸éœ€è¦æ˜¾å¼æŒ‡å®šï¼š
```java
// ç¼–è¯‘å™¨è‡ªåŠ¨æ¨æ–­Tä¸ºString
Utils.printArray(new String[]{"Hello"});

// æ˜¾å¼æŒ‡å®šç±»å‹å‚æ•°ï¼ˆé€šå¸¸ä¸éœ€è¦ï¼‰
Utils.<String>printArray(new String[]{"Hello"});
```
::: 

## 4. ç±»å‹æ“¦é™¤ï¼ˆType Erasureï¼‰

Javaæ³›å‹æ˜¯é€šè¿‡ç±»å‹æ“¦é™¤å®ç°çš„ï¼Œè¿™æ„å‘³ç€åœ¨è¿è¡Œæ—¶ï¼Œæ³›å‹ä¿¡æ¯ä¼šè¢«æ“¦é™¤ï¼Œæ‰€æœ‰çš„æ³›å‹ç±»å‹éƒ½è¢«è½¬æ¢ä¸ºå®ƒä»¬çš„åŸå§‹ç±»å‹ï¼ˆraw typeï¼‰ã€‚

```mermaid
flowchart LR
    subgraph ç¼–è¯‘å‰
        A["List&lt;String&gt;"]
        B["List&lt;Integer&gt;"]
    end
    
    subgraph ç¼–è¯‘å
        C["List"]
    end
    
    A --> |ç±»å‹æ“¦é™¤| C
    B --> |ç±»å‹æ“¦é™¤| C
    
    style ç¼–è¯‘å‰ fill:#e0f7fa,stroke:#0097a7,stroke-width:1px
    style ç¼–è¯‘å fill:#e8f5e9,stroke:#2e7d32,stroke-width:1px
```

### 4.1 ç±»å‹æ“¦é™¤æœºåˆ¶

ç±»å‹æ“¦é™¤æ˜¯Javaæ³›å‹å®ç°çš„æ ¸å¿ƒæœºåˆ¶ï¼Œç¼–è¯‘å™¨ä¼šåœ¨ç¼–è¯‘æ—¶ç§»é™¤æ‰€æœ‰æ³›å‹ç±»å‹ä¿¡æ¯ï¼Œè¿™ç§è®¾è®¡ä¸»è¦æ˜¯ä¸ºäº†å‘åå…¼å®¹æ€§ã€‚

<Tabs>
  <TabItem value="process" label="ç±»å‹æ“¦é™¤è¿‡ç¨‹" default>
    ```java title="ç±»å‹æ“¦é™¤ç¤ºä¾‹" {1-2,4-5}
// ç¼–è¯‘æ—¶ï¼šæ³›å‹ç±»å‹
List<String> stringList = new ArrayList<>();
List<Integer> intList = new ArrayList<>();

// è¿è¡Œæ—¶ï¼šç±»å‹è¢«æ“¦é™¤ï¼Œéƒ½å˜æˆList
// å®é™…ç±»å‹ï¼šList stringList = new ArrayList();
// å®é™…ç±»å‹ï¼šList intList = new ArrayList();
```
  </TabItem>
  <TabItem value="bounded" label="æœ‰ç•Œç±»å‹æ“¦é™¤">
    ```java
    // æœ‰ç•Œç±»å‹å‚æ•°
    class Box<T extends Number> {
        private T value;
        // ...
    }
    
    // æ“¦é™¤åç­‰æ•ˆä¸º
    class Box {
        private Number value; // ä½¿ç”¨ä¸Šç•Œä½œä¸ºå®é™…ç±»å‹
        // ...
    }
    ```
  </TabItem>
  <TabItem value="debug" label="è°ƒè¯•æç¤º">
    :::tip å¦‚ä½•éªŒè¯ç±»å‹æ“¦é™¤
    1. ä½¿ç”¨åå°„APIæŸ¥çœ‹è¿è¡Œæ—¶ç±»å‹
    2. åœ¨è°ƒè¯•å™¨ä¸­æŸ¥çœ‹å¯¹è±¡çš„å®é™…ç±»å‹
    3. åˆ©ç”¨`getClass()`æ–¹æ³•æ¯”è¾ƒä¸åŒæ³›å‹å®ä¾‹çš„ç±»å‹
    
    ç±»å‹æ“¦é™¤æ˜¯é€ æˆæ³›å‹ä¸€äº›é™åˆ¶çš„æ ¹æºï¼Œå¦‚ä¸èƒ½åˆ›å»ºæ³›å‹æ•°ç»„ã€ä¸èƒ½è¿›è¡Œç¡®åˆ‡çš„è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥ç­‰ã€‚
    :::
  </TabItem>
</Tabs>

#### éªŒè¯ç±»å‹æ“¦é™¤
```java title="ç±»å‹æ“¦é™¤éªŒè¯"
public class TypeErasureDemo {
    public static void main(String[] args) {
        List<String> stringList = new ArrayList<>();
        List<Integer> intList = new ArrayList<>();
        
        // æ£€æŸ¥è¿è¡Œæ—¶ç±»å‹
        System.out.println(stringList.getClass()); // class java.util.ArrayList
        System.out.println(intList.getClass());    // class java.util.ArrayList
        
        // ç±»å‹æ“¦é™¤åï¼Œä¸¤ä¸ªåˆ—è¡¨çš„ç±»å¯¹è±¡æ˜¯ç›¸åŒçš„
        System.out.println(stringList.getClass() == intList.getClass()); // true
    }
}
```

### 4.2 ç±»å‹æ“¦é™¤çš„å½±å“

#### 4.2.1 æ— æ³•åˆ›å»ºæ³›å‹æ•°ç»„
```java title="æ³›å‹æ•°ç»„é™åˆ¶"
// ç¼–è¯‘é”™è¯¯ï¼šä¸èƒ½åˆ›å»ºæ³›å‹æ•°ç»„
// T[] array = new T[10]; // é”™è¯¯ï¼

// è§£å†³æ–¹æ¡ˆ1ï¼šä½¿ç”¨Objectæ•°ç»„ï¼Œç„¶åè½¬æ¢
public class GenericArray<T> {
    private Object[] array;
    
    public GenericArray(int size) {
        array = new Object[size];
    }
    
    @SuppressWarnings("unchecked")
    public T get(int index) {
        return (T) array[index];
    }
    
    public void set(int index, T element) {
        array[index] = element;
    }
}
```

#### 4.2.2 æ— æ³•ä½¿ç”¨instanceofæ£€æŸ¥æ³›å‹ç±»å‹
```java title="instanceofé™åˆ¶"
public class TypeCheckDemo {
    public static <T> void checkType(List<T> list) {
        // ç¼–è¯‘é”™è¯¯ï¼šä¸èƒ½ä½¿ç”¨instanceofæ£€æŸ¥æ³›å‹ç±»å‹
        // if (list instanceof List<String>) { } // é”™è¯¯ï¼
        
        // æ­£ç¡®çš„æ£€æŸ¥æ–¹å¼
        if (list instanceof List) {
            System.out.println("è¿™æ˜¯ä¸€ä¸ªList");
        }
    }
}
```

:::caution ç±»å‹æ“¦é™¤çš„é™åˆ¶
ç”±äºç±»å‹æ“¦é™¤ï¼ŒJavaæ³›å‹åœ¨è¿è¡Œæ—¶æ— æ³•è·å–å…·ä½“çš„ç±»å‹ä¿¡æ¯ï¼Œè¿™é™åˆ¶äº†æŸäº›é«˜çº§æ³›å‹æ“ä½œçš„ä½¿ç”¨ã€‚
:::

## 5. é€šé…ç¬¦ï¼ˆWildcardsï¼‰

æ³›å‹é€šé…ç¬¦æä¾›äº†æ›´çµæ´»çš„ç±»å‹å‚æ•°ä½¿ç”¨æ–¹å¼ï¼Œèƒ½å¤Ÿæ›´å¥½åœ°æ”¯æŒå¤šæ€æ€§å’Œå­ç±»å‹å…³ç³»ã€‚

```mermaid
graph TD
    A[é€šé…ç¬¦ç±»å‹] --> B["æ— ç•Œé€šé…ç¬¦ (?)"]
    A --> C["ä¸Šç•Œé€šé…ç¬¦ (? extends T)"]
    A --> D["ä¸‹ç•Œé€šé…ç¬¦ (? super T)"]
    
    B --> B1["æ¥å—ä»»ä½•ç±»å‹"]
    C --> C1["æ¥å—TåŠå…¶å­ç±»å‹"]
    D --> D1["æ¥å—TåŠå…¶çˆ¶ç±»å‹"]
    
    style A fill:#f9f9f9,stroke:#333,stroke-width:2px
    style B fill:#e0f7fa,stroke:#0097a7,stroke-width:1px
    style C fill:#e8f5e9,stroke:#2e7d32,stroke-width:1px
    style D fill:#fff9c4,stroke:#f9a825,stroke-width:1px
```

### 5.1 æ— ç•Œé€šé…ç¬¦ï¼ˆUnbounded Wildcardï¼‰

æ— ç•Œé€šé…ç¬¦ä½¿ç”¨ `?` è¡¨ç¤ºï¼Œè¡¨ç¤ºå¯ä»¥æ¥å—ä»»ä½•ç±»å‹ã€‚å®ƒå¸¸ç”¨äºä¸ä¾èµ–äºç±»å‹å‚æ•°çš„æ³›å‹ä»£ç ä¸­ã€‚

#### åŸºæœ¬ç”¨æ³•
```java title="æ— ç•Œé€šé…ç¬¦"
public class WildcardDemo {
    // æ¥å—ä»»ä½•ç±»å‹çš„List
    public static void printList(List<?> list) {
        for (Object item : list) {
            System.out.print(item + " ");
        }
        System.out.println();
    }
    
    public static void main(String[] args) {
        List<String> stringList = Arrays.asList("Hello", "World");
        List<Integer> intList = Arrays.asList(1, 2, 3);
        
        printList(stringList); // è¾“å‡º: Hello World
        printList(intList);    // è¾“å‡º: 1 2 3
    }
}
```

#### æ— ç•Œé€šé…ç¬¦çš„é™åˆ¶
```java title="æ— ç•Œé€šé…ç¬¦é™åˆ¶"
public class WildcardLimitations {
    public static void addElement(List<?> list) {
        // ç¼–è¯‘é”™è¯¯ï¼šä¸èƒ½æ·»åŠ å…ƒç´ åˆ°æ— ç•Œé€šé…ç¬¦åˆ—è¡¨
        // list.add("Hello"); // é”™è¯¯ï¼
        
        // åªèƒ½æ·»åŠ null
        list.add(null); // å…è®¸
        
        // å¯ä»¥è¯»å–å…ƒç´ ï¼Œä½†ç±»å‹æ˜¯Object
        Object item = list.get(0);
    }
}
```

### 5.2 ä¸Šç•Œé€šé…ç¬¦ï¼ˆUpper Bounded Wildcardï¼‰

ä¸Šç•Œé€šé…ç¬¦ä½¿ç”¨ `? extends T` è¡¨ç¤ºï¼Œè¡¨ç¤ºç±»å‹å¿…é¡»æ˜¯Tæˆ–å…¶å­ç±»å‹ã€‚

#### åŸºæœ¬ç”¨æ³•
```java title="ä¸Šç•Œé€šé…ç¬¦"
public class UpperBoundedWildcard {
    // æ¥å—NumberåŠå…¶å­ç±»å‹çš„List
    public static double sumOfList(List<? extends Number> list) {
    double sum = 0.0;
        for (Number number : list) {
            sum += number.doubleValue();
    }
    return sum;
    }
    
    public static void main(String[] args) {
        List<Integer> intList = Arrays.asList(1, 2, 3, 4, 5);
        List<Double> doubleList = Arrays.asList(1.1, 2.2, 3.3);
        
        System.out.println(sumOfList(intList));   // è¾“å‡º: 15.0
        System.out.println(sumOfList(doubleList)); // è¾“å‡º: 6.6
    }
}
```

#### ä¸Šç•Œé€šé…ç¬¦çš„é™åˆ¶
```java title="ä¸Šç•Œé€šé…ç¬¦é™åˆ¶"
public class UpperBoundedLimitations {
    public static void addNumber(List<? extends Number> list) {
        // ç¼–è¯‘é”™è¯¯ï¼šä¸èƒ½æ·»åŠ å…ƒç´ åˆ°ä¸Šç•Œé€šé…ç¬¦åˆ—è¡¨
        // list.add(42);        // é”™è¯¯ï¼
        // list.add(3.14);      // é”™è¯¯ï¼
        
        // åªèƒ½æ·»åŠ null
        list.add(null); // å…è®¸
        
        // å¯ä»¥è¯»å–å…ƒç´ ï¼Œç±»å‹æ˜¯Number
        Number first = list.get(0);
    }
}
```

### 5.3 ä¸‹ç•Œé€šé…ç¬¦ï¼ˆLower Bounded Wildcardï¼‰

ä¸‹ç•Œé€šé…ç¬¦ä½¿ç”¨ `? super T` è¡¨ç¤ºï¼Œè¡¨ç¤ºç±»å‹å¿…é¡»æ˜¯Tæˆ–å…¶çˆ¶ç±»å‹ã€‚

#### åŸºæœ¬ç”¨æ³•
```java title="ä¸‹ç•Œé€šé…ç¬¦"
public class LowerBoundedWildcard {
    // æ¥å—IntegeråŠå…¶çˆ¶ç±»å‹çš„List
    public static void addIntegers(List<? super Integer> list) {
        list.add(1);
        list.add(2);
        list.add(3);
    }
    
    public static void main(String[] args) {
        List<Number> numberList = new ArrayList<>();
        List<Object> objectList = new ArrayList<>();
        
        addIntegers(numberList); // å¯ä»¥æ·»åŠ Integeråˆ°Numberåˆ—è¡¨
        addIntegers(objectList); // å¯ä»¥æ·»åŠ Integeråˆ°Objectåˆ—è¡¨
        
        System.out.println(numberList); // [1, 2, 3]
        System.out.println(objectList); // [1, 2, 3]
    }
}
```

#### ä¸‹ç•Œé€šé…ç¬¦çš„ç‰¹ç‚¹
```java title="ä¸‹ç•Œé€šé…ç¬¦ç‰¹ç‚¹"
public class LowerBoundedCharacteristics {
    public static void processList(List<? super Integer> list) {
        // å¯ä»¥æ·»åŠ IntegeråŠå…¶å­ç±»å‹
        list.add(42);
        list.add(100);
        
        // å¯ä»¥è¯»å–å…ƒç´ ï¼Œä½†ç±»å‹æ˜¯Object
        Object item = list.get(0);
        
        // ä¸èƒ½è¯»å–ä¸ºIntegerï¼ˆå¯èƒ½ä¸å®‰å…¨ï¼‰
        // Integer number = list.get(0); // é”™è¯¯ï¼
    }
}
```

<Tabs>
  <TabItem value="compare" label="é€šé…ç¬¦å¯¹æ¯”" default>
    | é€šé…ç¬¦ç±»å‹ | è¯­æ³• | è¯»å–æ“ä½œ | å†™å…¥æ“ä½œ | åº”ç”¨åœºæ™¯ |
    |-----------|-----|---------|---------|----------|
    | **æ— ç•Œé€šé…ç¬¦** | `List<?>` | åªèƒ½ä½œä¸ºObjectè¯»å– | åªèƒ½æ·»åŠ null | åªè¯»å–ä¸å…³å¿ƒå…·ä½“ç±»å‹çš„åœºæ™¯ |
    | **ä¸Šç•Œé€šé…ç¬¦** | `List<? extends T>` | å¯ä»¥ä½œä¸ºTç±»å‹è¯»å– | åªèƒ½æ·»åŠ null | ä»åˆ—è¡¨ä¸­è¯»å–Tç±»å‹å…ƒç´ çš„åœºæ™¯ |
    | **ä¸‹ç•Œé€šé…ç¬¦** | `List<? super T>` | åªèƒ½ä½œä¸ºObjectè¯»å– | å¯ä»¥æ·»åŠ TåŠå…¶å­ç±»å‹ | å‘åˆ—è¡¨ä¸­æ·»åŠ Tç±»å‹å…ƒç´ çš„åœºæ™¯ |
  </TabItem>
  <TabItem value="principle" label="PECSåŸåˆ™">
    :::info PECSåŸåˆ™ï¼ˆProducer Extends Consumer Superï¼‰
    - **Producer Extends**: å¦‚æœä½ éœ€è¦ä»é›†åˆä¸­è¯»å–ç±»å‹Tçš„æ•°æ®ï¼Œä½¿ç”¨ `<? extends T>`
    - **Consumer Super**: å¦‚æœä½ éœ€è¦å‘é›†åˆä¸­å†™å…¥ç±»å‹Tçš„æ•°æ®ï¼Œä½¿ç”¨ `<? super T>`
    
    è¿™ä¸ªåŸåˆ™å¸®åŠ©æˆ‘ä»¬é€‰æ‹©æ­£ç¡®çš„é€šé…ç¬¦ï¼Œä»¥ç¡®ä¿ç±»å‹å®‰å…¨æ€§å’Œçµæ´»æ€§ã€‚
    :::
    
    ```java
    // ä»é›†åˆä¸­è¯»å–ï¼ˆProducerï¼‰ - ä½¿ç”¨extends
    public static double sumOfList(List<? extends Number> list) {
        double sum = 0.0;
        for (Number n : list) { // å¯ä»¥å®‰å…¨è¯»å–ä¸ºNumber
            sum += n.doubleValue();
        }
        return sum;
    }
    
    // å‘é›†åˆä¸­å†™å…¥ï¼ˆConsumerï¼‰ - ä½¿ç”¨super
    public static void addNumbers(List<? super Integer> list) {
        list.add(1);    // å¯ä»¥å®‰å…¨æ·»åŠ Integer
        list.add(2);
    }
    ```
  </TabItem>
  <TabItem value="visual" label="å¯è§†åŒ–è¯´æ˜">
    ```mermaid
    graph TD
        A[List&lt;?&gt;] --> A1["è¯»: Object\nå†™: åªèƒ½null"]
        B[List&lt;? extends Number&gt;] --> B1["è¯»: Number\nå†™: åªèƒ½null"]
        C[List&lt;? super Integer&gt;] --> C1["è¯»: Object\nå†™: IntegeråŠå­ç±»"]
        
        style A fill:#e0f7fa,stroke:#0097a7,stroke-width:1px
        style B fill:#e8f5e9,stroke:#2e7d32,stroke-width:1px
        style C fill:#fff9c4,stroke:#f9a825,stroke-width:1px
    ```
  </TabItem>
</Tabs>

## 6. æ³›å‹çº¦æŸä¸è¾¹ç•Œ

### 6.1 ç±»å‹è¾¹ç•Œï¼ˆType Boundsï¼‰

ç±»å‹è¾¹ç•Œç”¨äºé™åˆ¶æ³›å‹ç±»å‹å‚æ•°çš„èŒƒå›´ï¼Œç¡®ä¿ç±»å‹å‚æ•°æ»¡è¶³ç‰¹å®šæ¡ä»¶ã€‚

#### ä¸Šç•Œç±»å‹è¾¹ç•Œ
```java title="ä¸Šç•Œç±»å‹è¾¹ç•Œ"
public class NumberBox<T extends Number> {
    private T number;
    
    public NumberBox(T number) {
        this.number = number;
    }
    
    public T getNumber() {
        return number;
    }
    
    // å¯ä»¥è°ƒç”¨Numberçš„æ–¹æ³•
    public double getDoubleValue() {
        return number.doubleValue();
    }
    
    public int getIntValue() {
        return number.intValue();
    }
}
```

#### ä½¿ç”¨ä¸Šç•Œç±»å‹è¾¹ç•Œ
```java title="ä¸Šç•Œè¾¹ç•Œä½¿ç”¨"
public class BoundedTypeDemo {
    public static void main(String[] args) {
        // å¯ä»¥ä½¿ç”¨NumberåŠå…¶å­ç±»å‹
        NumberBox<Integer> intBox = new NumberBox<>(42);
        NumberBox<Double> doubleBox = new NumberBox<>(3.14);
        
        System.out.println(intBox.getDoubleValue());    // 42.0
        System.out.println(doubleBox.getDoubleValue()); // 3.14
        
        // ç¼–è¯‘é”™è¯¯ï¼šStringä¸æ˜¯Numberçš„å­ç±»å‹
        // NumberBox<String> stringBox = new NumberBox<>("Hello"); // é”™è¯¯ï¼
    }
}
```

#### å¤šé‡è¾¹ç•Œ
```java title="å¤šé‡è¾¹ç•Œ"
public class MultipleBounds<T extends Number & Comparable<T>> {
    private T value;
    
    public MultipleBounds(T value) {
        this.value = value;
    }
    
    public T getValue() {
        return value;
    }
    
    // å¯ä»¥ä½¿ç”¨Numberå’ŒComparableçš„æ–¹æ³•
    public double getDoubleValue() {
        return value.doubleValue();
    }
    
    public int compareTo(T other) {
        return value.compareTo(other);
    }
}
```

### 6.2 é€’å½’ç±»å‹è¾¹ç•Œ

é€’å½’ç±»å‹è¾¹ç•Œç”¨äºè¡¨ç¤ºç±»å‹å‚æ•°å¿…é¡»ä¸è‡ªèº«ç›¸å…³ã€‚

```java title="é€’å½’ç±»å‹è¾¹ç•Œ"
public class RecursiveTypeBound {
    // Tå¿…é¡»å®ç°Comparable<T>ï¼Œå³å¯ä»¥ä¸è‡ªèº«æ¯”è¾ƒ
    public static <T extends Comparable<T>> T max(T a, T b) {
        if (a.compareTo(b) > 0) {
            return a;
        } else {
            return b;
        }
    }
    
    public static void main(String[] args) {
        // Integerå®ç°äº†Comparable<Integer>
        Integer maxInt = max(10, 20);
        System.out.println(maxInt); // 20
        
        // Stringå®ç°äº†Comparable<String>
        String maxString = max("Hello", "World");
        System.out.println(maxString); // World
    }
}
``` 

## 7. æ³›å‹æ¥å£ä¸å®ç°

### 7.1 æ³›å‹æ¥å£

æ³›å‹æ¥å£å…è®¸æ¥å£ä½¿ç”¨ç±»å‹å‚æ•°ï¼Œå®ç°ç±»å¯ä»¥é€‰æ‹©å…·ä½“çš„ç±»å‹æˆ–ä¿æŒæ³›å‹ã€‚

#### åŸºæœ¬æ³›å‹æ¥å£
```java title="æ³›å‹æ¥å£å®šä¹‰"
public interface Container<T> {
    void add(T element);
    T get(int index);
    int size();
    boolean isEmpty();
}
```

#### å®ç°æ³›å‹æ¥å£
```java title="æ³›å‹æ¥å£å®ç°"
// å®ç°ä¸ºå…·ä½“ç±»å‹
public class StringContainer implements Container<String> {
    private List<String> elements = new ArrayList<>();
    
    @Override
    public void add(String element) {
        elements.add(element);
    }
    
    @Override
    public String get(int index) {
        return elements.get(index);
    }
    
    @Override
    public int size() {
        return elements.size();
    }
    
    @Override
    public boolean isEmpty() {
        return elements.isEmpty();
    }
}

// ä¿æŒæ³›å‹çš„å®ç°
public class GenericContainer<T> implements Container<T> {
    private List<T> elements = new ArrayList<>();
    
    @Override
    public void add(T element) {
        elements.add(element);
    }
    
    @Override
    public T get(int index) {
        return elements.get(index);
    }
    
    @Override
    public int size() {
        return elements.size();
    }
    
    @Override
    public boolean isEmpty() {
        return elements.isEmpty();
    }
}
```

### 7.2 æ³›å‹ç»§æ‰¿

æ³›å‹ç±»å¯ä»¥ç»§æ‰¿å…¶ä»–æ³›å‹ç±»ï¼Œå½¢æˆå¤æ‚çš„æ³›å‹å±‚æ¬¡ç»“æ„ã€‚

```java title="æ³›å‹ç»§æ‰¿"
// åŸºç¡€æ³›å‹ç±»
public class Box<T> {
    protected T content;
    
    public Box(T content) {
        this.content = content;
    }
    
    public T getContent() {
        return content;
    }
    
    public void setContent(T content) {
        this.content = content;
    }
}

// ç»§æ‰¿æ³›å‹ç±»ï¼Œä¿æŒæ³›å‹
public class NumberBox<T extends Number> extends Box<T> {
    public NumberBox(T content) {
        super(content);
    }
    
    public double getDoubleValue() {
        return content.doubleValue();
    }
}

// ç»§æ‰¿æ³›å‹ç±»ï¼Œå›ºå®šç±»å‹
public class StringBox extends Box<String> {
    public StringBox(String content) {
        super(content);
    }
    
    public int getLength() {
        return content.length();
    }
}
```

## 8. æ³›å‹æœ€ä½³å®è·µ

### 8.1 å‘½åçº¦å®š

éµå¾ªJavaæ³›å‹çš„å‘½åçº¦å®šï¼Œä½¿ä»£ç æ›´æ˜“è¯»ï¼š

```java title="å‘½åçº¦å®š"
// æ¨èçš„å‘½å
public class Cache<K, V> { }
public class Repository<T> { }
public class Service<E> { }

// é¿å…çš„å‘½å
public class Cache<Key, Value> { }  // å¤ªé•¿
public class Repository<Type> { }    // ä¸å¤Ÿé€šç”¨
public class Service<Element> { }    // å¤ªé•¿
```

### 8.2 ç±»å‹è¾¹ç•Œä½¿ç”¨

åˆç†ä½¿ç”¨ç±»å‹è¾¹ç•Œï¼Œé¿å…è¿‡åº¦çº¦æŸï¼š

```java title="ç±»å‹è¾¹ç•Œæœ€ä½³å®è·µ"
// å¥½çš„åšæ³•ï¼šé€‚å½“çš„çº¦æŸ
public class NumberProcessor<T extends Number> {
    public double process(T number) {
        return number.doubleValue();
    }
}

// é¿å…ï¼šè¿‡åº¦çº¦æŸ
public class NumberProcessor<T extends Number & Comparable<T> & Serializable> {
    // è¿™é™åˆ¶äº†å¤ªå¤šç±»å‹
}

// å¥½çš„åšæ³•ï¼šä½¿ç”¨é€šé…ç¬¦
public static double sum(List<? extends Number> numbers) {
    double sum = 0.0;
    for (Number num : numbers) {
        sum += num.doubleValue();
    }
    return sum;
}
```

### 8.3 é¿å…åŸå§‹ç±»å‹

å§‹ç»ˆä½¿ç”¨æ³›å‹ï¼Œé¿å…ä½¿ç”¨åŸå§‹ç±»å‹ï¼š

```java title="é¿å…åŸå§‹ç±»å‹"
// é”™è¯¯ï¼šä½¿ç”¨åŸå§‹ç±»å‹
List list = new ArrayList();
list.add("Hello");
list.add(42); // å¯ä»¥æ·»åŠ ä»»ä½•ç±»å‹

// æ­£ç¡®ï¼šä½¿ç”¨æ³›å‹
List<String> stringList = new ArrayList<>();
stringList.add("Hello");
// stringList.add(42); // ç¼–è¯‘é”™è¯¯ï¼Œç±»å‹å®‰å…¨
```

### 8.4 æ³›å‹æ–¹æ³•è®¾è®¡

è®¾è®¡æ³›å‹æ–¹æ³•æ—¶ï¼Œè€ƒè™‘ç±»å‹æ¨æ–­å’Œæ˜“ç”¨æ€§ï¼š

```java title="æ³›å‹æ–¹æ³•è®¾è®¡"
public class CollectionUtils {
    // å¥½çš„è®¾è®¡ï¼šç±»å‹æ¨æ–­å‹å¥½
    public static <T> List<T> filter(List<T> list, Predicate<T> predicate) {
        List<T> result = new ArrayList<>();
        for (T item : list) {
            if (predicate.test(item)) {
                result.add(item);
            }
        }
        return result;
    }
    
    // ä½¿ç”¨ç¤ºä¾‹
    public static void main(String[] args) {
        List<String> names = Arrays.asList("Alice", "Bob", "Charlie");
        
        // ç±»å‹æ¨æ–­è‡ªåŠ¨å·¥ä½œ
        List<String> filtered = filter(names, name -> name.startsWith("A"));
        System.out.println(filtered); // [Alice]
    }
}
```

## 9. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### 9.1 æ³›å‹æ•°ç»„é—®é¢˜

```java title="æ³›å‹æ•°ç»„è§£å†³æ–¹æ¡ˆ"
public class GenericArraySolutions {
    // æ–¹æ¡ˆ1ï¼šä½¿ç”¨Objectæ•°ç»„
    public static <T> T[] createArray1(int size) {
        @SuppressWarnings("unchecked")
        T[] array = (T[]) new Object[size];
        return array;
    }
    
    // æ–¹æ¡ˆ2ï¼šä½¿ç”¨åå°„
    public static <T> T[] createArray2(Class<T> clazz, int size) {
        @SuppressWarnings("unchecked")
        T[] array = (T[]) Array.newInstance(clazz, size);
        return array;
    }
    
    // æ–¹æ¡ˆ3ï¼šä½¿ç”¨æ³›å‹é›†åˆ
    public static <T> List<T> createList(int size) {
        return new ArrayList<>(size);
    }
}
```

### 9.2 ç±»å‹æ“¦é™¤çš„å˜é€šæ–¹æ¡ˆ

```java title="ç±»å‹æ“¦é™¤å˜é€šæ–¹æ¡ˆ"
public class TypeErasureWorkarounds {
    // ä½¿ç”¨Classå¯¹è±¡ä¿å­˜ç±»å‹ä¿¡æ¯
    public static class TypeAwareBox<T> {
        private T content;
        private Class<T> type;
        
        public TypeAwareBox(T content, Class<T> type) {
            this.content = content;
            this.type = type;
        }
        
        public T getContent() {
            return content;
        }
        
        public Class<T> getType() {
            return type;
        }
        
        public boolean isInstance(Object obj) {
            return type.isInstance(obj);
        }
    }
}
```

## 10. é¢è¯•é¢˜ç²¾é€‰

### 10.1 åŸºç¡€æ¦‚å¿µé¢˜

**Q: ä»€ä¹ˆæ˜¯Javaæ³›å‹ï¼Ÿå®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ**

A: Javaæ³›å‹æ˜¯JDK 5.0å¼•å…¥çš„ç‰¹æ€§ï¼Œå®ƒæä¾›äº†ç¼–è¯‘æ—¶ç±»å‹å®‰å…¨æ£€æŸ¥ã€‚ä¸»è¦è§£å†³äº†ä»¥ä¸‹é—®é¢˜ï¼š
- ç±»å‹å®‰å…¨ï¼šç¼–è¯‘æ—¶æ£€æŸ¥ç±»å‹åŒ¹é…ï¼Œé¿å…è¿è¡Œæ—¶å¼‚å¸¸
- æ¶ˆé™¤ç±»å‹è½¬æ¢ï¼šæ— éœ€æ‰‹åŠ¨è¿›è¡Œç±»å‹è½¬æ¢
- ä»£ç å¤ç”¨ï¼šä¸€ä¸ªæ³›å‹ç±»å¯ä»¥å¤„ç†å¤šç§ç±»å‹
- ç¼–è¯‘æ—¶æ£€æŸ¥ï¼šåœ¨ç¼–è¯‘æ—¶å‘ç°ç±»å‹é”™è¯¯

**Q: ä»€ä¹ˆæ˜¯ç±»å‹æ“¦é™¤ï¼Ÿå®ƒæœ‰ä»€ä¹ˆå½±å“ï¼Ÿ**

A: ç±»å‹æ“¦é™¤æ˜¯Javaæ³›å‹çš„å®ç°æœºåˆ¶ï¼Œåœ¨è¿è¡Œæ—¶æ³›å‹ä¿¡æ¯ä¼šè¢«æ“¦é™¤ï¼Œæ‰€æœ‰æ³›å‹ç±»å‹éƒ½è½¬æ¢ä¸ºåŸå§‹ç±»å‹ã€‚ä¸»è¦å½±å“åŒ…æ‹¬ï¼š
- æ— æ³•åˆ›å»ºæ³›å‹æ•°ç»„ï¼š`T[] array = new T[10]` ç¼–è¯‘é”™è¯¯
- æ— æ³•ä½¿ç”¨instanceofæ£€æŸ¥æ³›å‹ç±»å‹ï¼š`list instanceof List<String>` ç¼–è¯‘é”™è¯¯
- è¿è¡Œæ—¶æ— æ³•è·å–å…·ä½“çš„æ³›å‹ç±»å‹ä¿¡æ¯

### 10.2 é€šé…ç¬¦é¢˜

**Q: è§£é‡Š `? extends T` å’Œ `? super T` çš„åŒºåˆ«ï¼Ÿ**

A: 
- `? extends T`ï¼ˆä¸Šç•Œé€šé…ç¬¦ï¼‰ï¼šè¡¨ç¤ºç±»å‹å¿…é¡»æ˜¯Tæˆ–å…¶å­ç±»å‹ï¼Œå¯ä»¥è¯»å–å…ƒç´ ï¼ˆç±»å‹ä¸ºTï¼‰ï¼Œä½†ä¸èƒ½æ·»åŠ å…ƒç´ 
- `? super T`ï¼ˆä¸‹ç•Œé€šé…ç¬¦ï¼‰ï¼šè¡¨ç¤ºç±»å‹å¿…é¡»æ˜¯Tæˆ–å…¶çˆ¶ç±»å‹ï¼Œå¯ä»¥æ·»åŠ å…ƒç´ ï¼ˆç±»å‹ä¸ºTï¼‰ï¼Œä½†è¯»å–æ—¶ç±»å‹ä¸ºObject

**Q: ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ— ç•Œé€šé…ç¬¦ `?`ï¼Ÿ**

A: å½“æ–¹æ³•åªå…³å¿ƒé›†åˆçš„ç»“æ„ï¼ˆå¦‚å¤§å°ã€æ˜¯å¦ä¸ºç©ºï¼‰ï¼Œè€Œä¸å…³å¿ƒå…ƒç´ ç±»å‹æ—¶ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼š
```java
public static boolean isEmpty(Collection<?> collection) {
    return collection == null || collection.isEmpty();
}
```

### 10.3 å®è·µé¢˜

**Q: è®¾è®¡ä¸€ä¸ªæ³›å‹ç¼“å­˜ç±»ï¼Œæ”¯æŒé”®å€¼å¯¹å­˜å‚¨**

A: 
```java
public class GenericCache<K, V> {
    private Map<K, V> cache = new HashMap<>();
    
    public void put(K key, V value) {
        cache.put(key, value);
    }
    
    public V get(K key) {
        return cache.get(key);
    }
    
    public boolean containsKey(K key) {
        return cache.containsKey(key);
    }
    
    public void remove(K key) {
        cache.remove(key);
    }
    
    public int size() {
        return cache.size();
    }
    
    public void clear() {
        cache.clear();
    }
}
```

**Q: å®ç°ä¸€ä¸ªæ³›å‹æ–¹æ³•ï¼Œæ‰¾å‡ºæ•°ç»„ä¸­çš„æœ€å¤§å€¼**

A: 
```java
public static <T extends Comparable<T>> T findMax(T[] array) {
    if (array == null || array.length == 0) {
        throw new IllegalArgumentException("Array cannot be null or empty");
    }
    
    T max = array[0];
    for (int i = 1; i < array.length; i++) {
        if (array[i].compareTo(max) > 0) {
            max = array[i];
        }
    }
    return max;
}
```

:::tip æ³›å‹å­¦ä¹ è¦ç‚¹
1. **ç†è§£ç±»å‹æ“¦é™¤**ï¼šè¿™æ˜¯Javaæ³›å‹çš„æ ¸å¿ƒæœºåˆ¶
2. **æŒæ¡é€šé…ç¬¦**ï¼šåˆç†ä½¿ç”¨ä¸‰ç§é€šé…ç¬¦ç±»å‹
3. **éµå¾ªæœ€ä½³å®è·µ**ï¼šé¿å…åŸå§‹ç±»å‹ï¼Œåˆç†ä½¿ç”¨ç±»å‹è¾¹ç•Œ
4. **å®è·µåº”ç”¨**ï¼šåœ¨å®é™…é¡¹ç›®ä¸­åº”ç”¨æ³›å‹æé«˜ä»£ç è´¨é‡
:::

## 11. æ€»ç»“

```mermaid
mindmap
  root((Javaæ³›å‹))
    åŸºç¡€æ¦‚å¿µ
      ç±»å‹å‚æ•°åŒ–
      ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥
      ä»£ç å¤ç”¨
    ç±»å‹å‚æ•°
      å‘½åçº¦å®š
      å¤šä¸ªç±»å‹å‚æ•°
    æ³›å‹ç±»
      å®šä¹‰æ–¹å¼
      å®ä¾‹åŒ–
      ç»§æ‰¿å…³ç³»
    æ³›å‹æ–¹æ³•
      å®šä¹‰è¯­æ³•
      ç±»å‹æ¨æ–­
      é™æ€æ³›å‹æ–¹æ³•
    ç±»å‹æ“¦é™¤
      è¿è¡Œæ—¶æœºåˆ¶
      åŸå§‹ç±»å‹
      æ¡¥æ¥æ–¹æ³•
    é€šé…ç¬¦
      æ— ç•Œé€šé…ç¬¦
      ä¸Šç•Œé€šé…ç¬¦
      ä¸‹ç•Œé€šé…ç¬¦
      PECSåŸåˆ™
    åº”ç”¨åœºæ™¯
      é›†åˆæ“ä½œ
      é€šç”¨ç»„ä»¶è®¾è®¡
      ç±»å‹å®‰å…¨å®ç°
```

:::tip æ³›å‹å­¦ä¹ è·¯å¾„
å­¦ä¹ Javaæ³›å‹çš„å»ºè®®è·¯å¾„ï¼š

1. æŒæ¡åŸºç¡€è¯­æ³•å’Œæ¦‚å¿µ
2. ç†è§£ç±»å‹æ“¦é™¤æœºåˆ¶
3. å­¦ä¹ é€šé…ç¬¦ç”¨æ³•
4. æŒæ¡PECSåŸåˆ™
5. å®è·µæ³›å‹ç±»å’Œæ–¹æ³•çš„è®¾è®¡

é€šè¿‡åˆç†ä½¿ç”¨æ³›å‹ï¼Œå¯ä»¥ç¼–å†™æ›´åŠ é€šç”¨ã€å®‰å…¨å’Œå¯ç»´æŠ¤çš„ä»£ç ã€‚è™½ç„¶ç±»å‹æ“¦é™¤å¸¦æ¥äº†ä¸€äº›é™åˆ¶ï¼Œä½†æ€»ä½“è€Œè¨€ï¼Œæ³›å‹ç»™Javaå¸¦æ¥çš„å¥½å¤„è¿œè¶…è¿‡å…¶ç¼ºç‚¹ã€‚å¯¹æ³›å‹çš„æ·±å…¥ç†è§£ï¼Œæ˜¯æˆä¸ºé«˜çº§Javaå¼€å‘è€…çš„å¿…å¤‡æŠ€èƒ½ã€‚
:::

<Tabs>
  <TabItem value="benefits" label="ä¼˜åŠ¿" default>
    âœ… **ç±»å‹å®‰å…¨**: åœ¨ç¼–è¯‘æ—¶æ•è·ç±»å‹é”™è¯¯ï¼Œé¿å…è¿è¡Œæ—¶å¼‚å¸¸  
    âœ… **ä»£ç å¤ç”¨**: ä¸€å¥—ä»£ç å¯ä»¥å¤„ç†å¤šç§ä¸åŒç±»å‹  
    âœ… **æ¶ˆé™¤ç±»å‹è½¬æ¢**: å‡å°‘å†—ä½™çš„ç±»å‹è½¬æ¢ä»£ç   
    âœ… **APIè®¾è®¡**: ä½¿APIæ›´åŠ æ¸…æ™°ã€ç±»å‹å®‰å…¨  
    âœ… **æ€§èƒ½**: ç¼–è¯‘åçš„ä»£ç å’Œæ‰‹åŠ¨ç±»å‹è½¬æ¢çš„ä»£ç æ€§èƒ½ç›¸å½“
  </TabItem>
  <TabItem value="limitations" label="å±€é™æ€§">
    âš ï¸ **ç±»å‹æ“¦é™¤**: è¿è¡Œæ—¶ç±»å‹ä¿¡æ¯ä¸¢å¤±  
    âš ï¸ **æ³›å‹æ•°ç»„**: æ— æ³•ç›´æ¥åˆ›å»ºæ³›å‹æ•°ç»„  
    âš ï¸ **ç±»å‹æ£€æŸ¥**: æ— æ³•ä½¿ç”¨instanceofæ£€æŸ¥æ³›å‹ç±»å‹  
    âš ï¸ **é™æ€ä¸Šä¸‹æ–‡**: æ— æ³•åœ¨é™æ€å­—æ®µæˆ–æ–¹æ³•ä¸­ç›´æ¥ä½¿ç”¨ç±»ç±»å‹å‚æ•°  
    âš ï¸ **åŸå§‹ç±»å‹**: ä¸ºäº†å‘åå…¼å®¹æ€§ä¿ç•™äº†åŸå§‹ç±»å‹ï¼Œå¯èƒ½å¯¼è‡´æ··æ·†
  </TabItem>
  <TabItem value="best-practices" label="æœ€ä½³å®è·µ">
    ğŸ“Œ **ä½¿ç”¨é€šé…ç¬¦**: åˆç†ä½¿ç”¨ `?`, `? extends T` å’Œ `? super T`  
    ğŸ“Œ **éµå¾ªPECSåŸåˆ™**: Producer Extends, Consumer Super  
    ğŸ“Œ **é¿å…åŸå§‹ç±»å‹**: æ€»æ˜¯ä½¿ç”¨æ³›å‹ç±»å‹å‚æ•°  
    ğŸ“Œ **ä¼˜å…ˆè€ƒè™‘æ³›å‹æ–¹æ³•**: ä½¿æ–¹æ³•æ›´åŠ é€šç”¨å’Œç±»å‹å®‰å…¨  
    ğŸ“Œ **å…³æ³¨ç±»å‹æ¨æ–­**: è®©ç¼–è¯‘å™¨åšæ›´å¤šå·¥ä½œï¼Œå‡å°‘å†—ä½™ä»£ç 
  </TabItem>
</Tabs>

---

é€šè¿‡æœ¬ç« çš„å­¦ä¹ ï¼Œä½ åº”è¯¥å·²ç»æŒæ¡äº†Javaæ³›å‹çš„æ ¸å¿ƒæ¦‚å¿µã€è¯­æ³•è§„åˆ™å’Œæœ€ä½³å®è·µã€‚æ³›å‹æ˜¯Javaä¸­éå¸¸é‡è¦çš„ç‰¹æ€§ï¼Œå®ƒä¸ä»…èƒ½æé«˜ä»£ç çš„ç±»å‹å®‰å…¨æ€§ï¼Œè¿˜èƒ½å¢å¼ºä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œåˆç†ä½¿ç”¨æ³›å‹å¯ä»¥é¿å…å¾ˆå¤šè¿è¡Œæ—¶é”™è¯¯ï¼Œè®©ä»£ç æ›´åŠ å¥å£®ã€‚

## 12. é¢è¯•é¢˜ç²¾é€‰

### 12.1 ä»€ä¹ˆæ˜¯Javaæ³›å‹ï¼Ÿæ³›å‹æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ

**ç­”æ¡ˆï¼š** Javaæ³›å‹æ˜¯JDK 5å¼•å…¥çš„ç‰¹æ€§ï¼Œå…è®¸åœ¨å®šä¹‰ç±»ã€æ¥å£å’Œæ–¹æ³•æ—¶ä½¿ç”¨ç±»å‹å‚æ•°ï¼Œè¿™äº›å‚æ•°åœ¨ä½¿ç”¨æ—¶ä¼šè¢«å…·ä½“ç±»å‹æ›¿æ¢ã€‚

æ³›å‹çš„ä¸»è¦ä¼˜ç‚¹ï¼š
- **ç±»å‹å®‰å…¨**ï¼šåœ¨ç¼–è¯‘æ—¶æ£€æŸ¥ç±»å‹é”™è¯¯ï¼Œé¿å…è¿è¡Œæ—¶ClassCastException
- **æ¶ˆé™¤ç±»å‹è½¬æ¢**ï¼šä¸éœ€è¦æ˜¾å¼è½¬æ¢å¯¹è±¡ç±»å‹ï¼Œä»£ç æ›´åŠ ç®€æ´
- **å®ç°é€šç”¨ç®—æ³•**ï¼šå¯ä»¥ç¼–å†™é€‚ç”¨äºå¤šç§ç±»å‹çš„é€šç”¨ä»£ç 
- **ä»£ç å¤ç”¨**ï¼šå‡å°‘å› ç±»å‹ä¸åŒè€Œå¯¼è‡´çš„é‡å¤ä»£ç 
- **æ›´å¥½çš„APIè®¾è®¡**ï¼šæä¾›äº†ç±»å‹çº¦æŸï¼Œä½¿APIæ›´åŠ ç›´è§‚

### 12.2 ä»€ä¹ˆæ˜¯ç±»å‹æ“¦é™¤ï¼Ÿä¸ºä»€ä¹ˆJavaæ³›å‹ä½¿ç”¨ç±»å‹æ“¦é™¤ï¼Ÿ

**ç­”æ¡ˆï¼š** ç±»å‹æ“¦é™¤æ˜¯Javaæ³›å‹çš„åŸºæœ¬å®ç°æœºåˆ¶ï¼Œå®ƒæŒ‡çš„æ˜¯ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶ä¼šæ“¦é™¤æ‰€æœ‰æ³›å‹ç±»å‹ç›¸å…³çš„ä¿¡æ¯ï¼Œæ›¿æ¢ä¸ºåŸå§‹ç±»å‹ï¼ˆé€šå¸¸æ˜¯Objectæˆ–ä¸Šç•Œç±»å‹ï¼‰ã€‚

Javaæ³›å‹ä½¿ç”¨ç±»å‹æ“¦é™¤çš„åŸå› ï¼š
1. **å‘åå…¼å®¹æ€§**ï¼šä¿è¯æ³›å‹ä»£ç å¯ä»¥ä¸Java 5ä¹‹å‰çš„ä»£ç æ— ç¼åä½œ
2. **é¿å…è¿è¡Œæ—¶å¼€é”€**ï¼šä¸éœ€è¦åœ¨è¿è¡Œæ—¶ç»´æŠ¤é¢å¤–çš„ç±»å‹ä¿¡æ¯
3. **JVMé™åˆ¶**ï¼šä¸éœ€è¦ä¿®æ”¹Javaè™šæ‹Ÿæœºï¼Œç®€åŒ–äº†å®ç°

ç±»å‹æ“¦é™¤çš„ä¸»è¦åæœï¼š
- æ³›å‹ä¿¡æ¯åœ¨è¿è¡Œæ—¶ä¸å¯ç”¨
- æ— æ³•ä½¿ç”¨instanceofæ£€æŸ¥æ³›å‹ç±»å‹
- æ— æ³•åˆ›å»ºæ³›å‹ç±»å‹çš„æ•°ç»„
- é™æ€ä¸Šä¸‹æ–‡ä¸­ä¸èƒ½å¼•ç”¨ç±»å‹å‚æ•°

### 12.3 è§£é‡Šæ³›å‹ä¸­çš„é€šé…ç¬¦ï¼Œä»¥åŠPECSåŸåˆ™

**ç­”æ¡ˆï¼š** é€šé…ç¬¦æ˜¯Javaæ³›å‹ä¸­çš„ç‰¹æ®Šç¬¦å·ï¼Œç”¨äºè¡¨ç¤ºæœªçŸ¥ç±»å‹ï¼Œæœ‰ä¸‰ç§å½¢å¼ï¼š

1. **æ— ç•Œé€šé…ç¬¦(?)**: `List<?>`è¡¨ç¤ºå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„åˆ—è¡¨
2. **ä¸Šç•Œé€šé…ç¬¦(? extends T)**: `List<? extends Number>`è¡¨ç¤ºNumberæˆ–å…¶å­ç±»çš„åˆ—è¡¨
3. **ä¸‹ç•Œé€šé…ç¬¦(? super T)**: `List<? super Integer>`è¡¨ç¤ºIntegeræˆ–å…¶çˆ¶ç±»çš„åˆ—è¡¨

**PECSåŸåˆ™ï¼ˆProducer-Extends, Consumer-Superï¼‰**:
- å½“ä½ çš„æ³›å‹ç±»æ˜¯ç”Ÿäº§è€…ï¼ˆæä¾›æ•°æ®ï¼‰æ—¶ï¼Œä½¿ç”¨`? extends T`
- å½“ä½ çš„æ³›å‹ç±»æ˜¯æ¶ˆè´¹è€…ï¼ˆæ¥æ”¶æ•°æ®ï¼‰æ—¶ï¼Œä½¿ç”¨`? super T`

ä¾‹å¦‚ï¼š
```java
// ä»åˆ—è¡¨è¯»å–æ•°æ®ï¼ˆç”Ÿäº§è€…ï¼‰ï¼Œä½¿ç”¨extends
public void readFrom(List<? extends Number> list) {
    Number n = list.get(0); // å®‰å…¨ï¼ŒçŸ¥é“æ˜¯Numberæˆ–å­ç±»
}

// å‘åˆ—è¡¨å†™å…¥æ•°æ®ï¼ˆæ¶ˆè´¹è€…ï¼‰ï¼Œä½¿ç”¨super
public void writeTo(List<? super Integer> list) {
    list.add(42); // å®‰å…¨ï¼ŒçŸ¥é“listå¯ä»¥æ¥æ”¶Integer
}
```

### 12.4 æ³›å‹ç±»å‹å‚æ•°çš„å‘½åçº¦å®šæ˜¯ä»€ä¹ˆï¼Ÿå¸¸è§çš„ç±»å‹å‚æ•°åç§°ä»£è¡¨ä»€ä¹ˆï¼Ÿ

**ç­”æ¡ˆï¼š** Javaæ³›å‹ç±»å‹å‚æ•°é€šå¸¸ä½¿ç”¨å•ä¸ªå¤§å†™å­—æ¯è¡¨ç¤ºã€‚æœ€å¸¸è§çš„ç±»å‹å‚æ•°å‘½åçº¦å®šï¼š

- **E**: Elementï¼ˆå…ƒç´ ï¼‰ï¼Œé€šå¸¸ç”¨äºé›†åˆç±»
- **T**: Typeï¼ˆç±»å‹ï¼‰ï¼Œæœ€å¸¸ç”¨çš„æ³›å‹ç±»å‹å‚æ•°
- **K**: Keyï¼ˆé”®ï¼‰ï¼Œå¸¸ç”¨äºMapçš„é”®ç±»å‹
- **V**: Valueï¼ˆå€¼ï¼‰ï¼Œå¸¸ç”¨äºMapçš„å€¼ç±»å‹
- **N**: Numberï¼ˆæ•°å­—ï¼‰ï¼Œè¡¨ç¤ºæ•°å€¼ç±»å‹
- **S, U, V**: ç¬¬2ã€3ã€4ä¸ªç±»å‹å‚æ•°ï¼Œå½“éœ€è¦å¤šä¸ªæ³›å‹ç±»å‹æ—¶ä½¿ç”¨

ä¾‹å¦‚ï¼š
```java
// Tä»£è¡¨ä»»æ„ç±»å‹
public class Box<T> { }

// Kä»£è¡¨é”®ç±»å‹ï¼ŒVä»£è¡¨å€¼ç±»å‹
public interface Map<K, V> { }

// Eä»£è¡¨å…ƒç´ ç±»å‹
public interface List<E> { }
```

### 12.5 å¦‚ä½•è§£å†³æ³›å‹æ•°ç»„åˆ›å»ºçš„é—®é¢˜ï¼Ÿ

**ç­”æ¡ˆï¼š** ç”±äºç±»å‹æ“¦é™¤ï¼Œåœ¨Javaä¸­æ— æ³•ç›´æ¥åˆ›å»ºæ³›å‹æ•°ç»„ï¼ˆå¦‚`new T[10]`ï¼‰ã€‚è§£å†³è¿™ä¸ªé—®é¢˜æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š

1. **ä½¿ç”¨Objectæ•°ç»„åŠ ç±»å‹è½¬æ¢**:
```java
public class GenericArray<T> {
    private T[] array;
    
    @SuppressWarnings("unchecked")
    public GenericArray(int size) {
        // åˆ›å»ºObjectæ•°ç»„ï¼Œç„¶åå¼ºåˆ¶ç±»å‹è½¬æ¢
        array = (T[]) new Object[size];
    }
}
```

2. **ä½¿ç”¨åå°„åˆ›å»ºæ•°ç»„**:
```java
public class GenericArray<T> {
    private T[] array;
    
    @SuppressWarnings("unchecked")
    public GenericArray(Class<T> type, int size) {
        // ä½¿ç”¨åå°„APIåˆ›å»ºç‰¹å®šç±»å‹çš„æ•°ç»„
        array = (T[]) Array.newInstance(type, size);
    }
}
```

3. **ä½¿ç”¨ArrayListä»£æ›¿æ•°ç»„**:
```java
public class GenericCollection<T> {
    private List<T> list;
    
    public GenericCollection(int size) {
        list = new ArrayList<>(size);
    }
}
```

æ¯ç§æ–¹æ³•éƒ½æœ‰å…¶ä¼˜ç¼ºç‚¹ï¼Œé€‰æ‹©å–å†³äºå…·ä½“éœ€æ±‚å’Œä½¿ç”¨åœºæ™¯ã€‚ 