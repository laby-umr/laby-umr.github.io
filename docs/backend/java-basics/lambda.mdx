---
sidebar_position: 8
title: Java Lambdaè¡¨è¾¾å¼è¯¦è§£
description: æ·±å…¥ç†è§£Java Lambdaè¡¨è¾¾å¼çš„è¯­æ³•ã€å‡½æ•°å¼æ¥å£ã€æ–¹æ³•å¼•ç”¨ä¸æœ€ä½³å®è·µ
authors: [Laby]
last_update:
  date: 2025-08-16
  author: Laby
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import TOCInline from '@theme/TOCInline';

# Java Lambda è¡¨è¾¾å¼è¯¦è§£

Lambdaè¡¨è¾¾å¼æ˜¯Java 8å¼•å…¥çš„é‡è¦ç‰¹æ€§ï¼Œå®ƒæä¾›äº†ä¸€ç§ç®€æ´çš„æ–¹å¼æ¥ç¼–å†™åŒ¿åå‡½æ•°ï¼Œä½¿ä»£ç æ›´åŠ ç®€æ´ã€å¯è¯»ï¼Œå¹¶æ”¯æŒå‡½æ•°å¼ç¼–ç¨‹èŒƒå¼ã€‚Lambdaè¡¨è¾¾å¼æ˜¯Javaå‘å‡½æ•°å¼ç¼–ç¨‹è¿ˆè¿›çš„é‡è¦ä¸€æ­¥ã€‚

:::info æœ¬æ–‡å†…å®¹æ¦‚è§ˆ
<TOCInline toc={toc} />
:::

:::tip æ ¸å¿ƒä»·å€¼
**Lambdaè¡¨è¾¾å¼ = ç®€æ´è¯­æ³• + å‡½æ•°å¼ç¼–ç¨‹ + å£°æ˜å¼å¤„ç† + é“¾å¼æ“ä½œ + å¯è¯»æ€§æå‡**
- ğŸš€ **ç®€æ´è¯­æ³•**ï¼šæå¤§å‡å°‘æ ·æ¿ä»£ç ï¼Œä½¿ä»£ç æ›´åŠ ç®€æ´ä¼˜é›…
- ğŸ‘¨â€ğŸ’» **å‡½æ•°å¼ç¼–ç¨‹**ï¼šæ”¯æŒå‡½æ•°å¼ç¼–ç¨‹èŒƒå¼ï¼Œä»£ç æ›´åŠ çµæ´»
- ğŸ” **å£°æ˜å¼å¤„ç†**ï¼šå…³æ³¨åšä»€ä¹ˆï¼Œè€Œä¸æ˜¯æ€ä¹ˆåšï¼Œæé«˜ä»£ç å¯è¯»æ€§
- ğŸ”— **é“¾å¼æ“ä½œ**ï¼šæ”¯æŒæµç•…çš„é“¾å¼è°ƒç”¨ï¼Œç®€åŒ–å¤æ‚æ“ä½œ
- ğŸ“š **å¯è¯»æ€§æå‡**ï¼šä»£ç é€»è¾‘æ›´æ¸…æ™°ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤
:::

## 1. Lambdaè¡¨è¾¾å¼åŸºç¡€

### 1.1 ä»€ä¹ˆæ˜¯Lambdaè¡¨è¾¾å¼ï¼Ÿ

Lambdaè¡¨è¾¾å¼æ˜¯ä¸€ç§åŒ¿åå‡½æ•°ï¼Œå®ƒæ²¡æœ‰åç§°ï¼Œä½†æœ‰å‚æ•°åˆ—è¡¨ã€å‡½æ•°ä½“å’Œè¿”å›ç±»å‹ã€‚Lambdaè¡¨è¾¾å¼å¯ä»¥ç†è§£ä¸ºä¸€ç§"å¯ä¼ é€’çš„ä»£ç å—"ï¼Œå¯ä»¥åœ¨éœ€è¦å‡½æ•°å¼æ¥å£çš„åœ°æ–¹ä½¿ç”¨ã€‚

```mermaid
graph TD
    A[Lambdaè¡¨è¾¾å¼] --> B[å‚æ•°åˆ—è¡¨]
    A --> C[ç®­å¤´æ“ä½œç¬¦ ->]
    A --> D[å‡½æ•°ä½“]
    D --> E[å•è¡Œè¡¨è¾¾å¼]
    D --> F[å¤šè¡Œä»£ç å—]
    F --> G["{ è¯­å¥1; è¯­å¥2; ... return ç»“æœ; }"]
    E --> H["ç›´æ¥è¿”å›ç»“æœ"]
```

#### Lambdaè¡¨è¾¾å¼çš„åŸºæœ¬è¯­æ³•
```java title="Lambdaè¡¨è¾¾å¼åŸºæœ¬è¯­æ³•"
public class LambdaBasicSyntax {
    public static void main(String[] args) {
        // åŸºæœ¬è¯­æ³•ï¼š(parameters) -> expression
        // 1. æ— å‚æ•°
        Runnable noParam = () -> System.out.println("Hello World");
        noParam.run();
        
        // 2. å•ä¸ªå‚æ•°
        Function<String, Integer> singleParam = str -> str.length();
        System.out.println("å­—ç¬¦ä¸²é•¿åº¦: " + singleParam.apply("Java"));
        
        // 3. å¤šä¸ªå‚æ•°
        BinaryOperator<Integer> multipleParams = (a, b) -> a + b;
        System.out.println("æ±‚å’Œ: " + multipleParams.apply(5, 3));
        
        // 4. ç±»å‹å£°æ˜
        BinaryOperator<Integer> typedParams = (Integer a, Integer b) -> a * b;
        System.out.println("ä¹˜ç§¯: " + typedParams.apply(4, 6));
        
        // 5. å¤šè¡Œè¯­å¥
        Function<String, String> multiLine = str -> {
            String upper = str.toUpperCase();
            String reversed = new StringBuilder(upper).reverse().toString();
            return reversed;
        };
        System.out.println("å¤„ç†ç»“æœ: " + multiLine.apply("hello"));
    }
}
```

### 1.2 Lambdaè¡¨è¾¾å¼çš„è¯­æ³•è§„åˆ™

| è¯­æ³•è§„åˆ™ | è¯´æ˜ | ç¤ºä¾‹ |
|---------|------|------|
| **å‚æ•°åˆ—è¡¨** | å¯ä»¥ä¸ºç©ºã€å•ä¸ªæˆ–å¤šä¸ªå‚æ•° | `()` `x` `(x, y)` |
| **å‚æ•°ç±»å‹** | å¯ä»¥çœç•¥ï¼ˆç±»å‹æ¨æ–­ï¼‰æˆ–æ˜¾å¼å£°æ˜ | `x -> x*2` æˆ– `(int x) -> x*2` |
| **ç®­å¤´æ“ä½œç¬¦** | ä½¿ç”¨ `->` åˆ†éš”å‚æ•°å’Œå‡½æ•°ä½“ | `x -> x*2` |
| **å‡½æ•°ä½“** | å•è¡Œè¡¨è¾¾å¼æˆ–ä»£ç å— | `x -> x*2` æˆ– `x -> { return x*2; }` |
| **è¿”å›è¯­å¥** | å•è¡Œè¡¨è¾¾å¼è‡ªåŠ¨è¿”å›ï¼Œä»£ç å—éœ€è¦æ˜¾å¼return | `x -> x*2` æˆ– `x -> { return x*2; }` |

<Tabs>
  <TabItem value="basic" label="åŸºç¡€è¯­æ³•" default>
  ```java
  // æ— å‚æ•°ï¼Œæ— è¿”å›å€¼
  Runnable task = () -> System.out.println("Task executed");

  // å•ä¸ªå‚æ•°ï¼Œæœ‰è¿”å›å€¼
  Function<String, Integer> length = str -> str.length();
  ```
  </TabItem>
  <TabItem value="multi" label="å¤šå‚æ•°">
  ```java
  // å¤šä¸ªå‚æ•°ï¼Œæœ‰è¿”å›å€¼
  BinaryOperator<Integer> add = (a, b) -> a + b;
  
  // å¸¦ç±»å‹å£°æ˜çš„å¤šå‚æ•°
  BiFunction<Integer, String, Boolean> check = (Integer num, String str) -> 
      str.length() > num;
  ```
  </TabItem>
  <TabItem value="block" label="ä»£ç å—">
  ```java
  // å¤šè¡Œä»£ç å—
  Function<String, String> process = str -> {
      String trimmed = str.trim();
      String upper = trimmed.toUpperCase();
      return upper;
  };
  ```
  </TabItem>
</Tabs>

## 2. Lambdaè¡¨è¾¾å¼ä¸åŒ¿åå†…éƒ¨ç±»

### 2.1 å¯¹æ¯”åˆ†æ

Lambdaè¡¨è¾¾å¼å¯ä»¥æ›¿ä»£åŒ¿åå†…éƒ¨ç±»ï¼Œä½†ä¸¤è€…æœ‰æ˜¾è‘—åŒºåˆ«ï¼š

| ç‰¹æ€§ | åŒ¿åå†…éƒ¨ç±» | Lambdaè¡¨è¾¾å¼ |
|------|------------|-------------|
| **è¯­æ³•** | å†—é•¿ï¼Œéœ€è¦å®Œæ•´çš„ç±»å®šä¹‰ | ç®€æ´ï¼Œåªéœ€è¦å‚æ•°å’Œè¡¨è¾¾å¼ |
| **å¯è¯»æ€§** | è¾ƒä½ï¼Œä»£ç ç»“æ„å¤æ‚ | è¾ƒé«˜ï¼Œé€»è¾‘æ¸…æ™° |
| **æ€§èƒ½** | åˆ›å»ºæ–°ç±»æ–‡ä»¶ | ä¸åˆ›å»ºæ–°ç±»æ–‡ä»¶ |
| **é™åˆ¶** | å¯ä»¥å®ç°æ¥å£æˆ–ç»§æ‰¿ç±» | åªèƒ½ç”¨äºå‡½æ•°å¼æ¥å£ |
| **å˜é‡æ•è·** | æ•è·å¤–éƒ¨å˜é‡éœ€è¦final | è‡ªåŠ¨æ•è·effectively finalå˜é‡ |

### 2.2 è½¬æ¢ç¤ºä¾‹

<Tabs>
  <TabItem value="anonymous" label="åŒ¿åå†…éƒ¨ç±»" default>
  ```java
  // åŒ¿åå†…éƒ¨ç±»æ–¹å¼
  Runnable oldWay = new Runnable() {
      @Override
      public void run() {
          System.out.println("Hello from anonymous class");
      }
  };
  
  oldWay.run();
  ```
  </TabItem>
  <TabItem value="lambda" label="Lambdaè¡¨è¾¾å¼">
  ```java
  // Lambdaè¡¨è¾¾å¼æ–¹å¼
  Runnable newWay = () -> System.out.println("Hello from lambda");
  
  newWay.run();
  ```
  </TabItem>
</Tabs>

### 2.3 Lambdaè¡¨è¾¾å¼çš„ä¼˜åŠ¿

<div className="card">
<div className="card__body">
<ul>
<li><strong>è¯­æ³•ç®€æ´</strong>ï¼šå‡å°‘äº†æ ·æ¿ä»£ç </li>
<li><strong>å¯è¯»æ€§å¼º</strong>ï¼šé€»è¾‘æ›´åŠ æ¸…æ™°</li>
<li><strong>æ€§èƒ½æ›´å¥½</strong>ï¼šä¸åˆ›å»ºé¢å¤–çš„ç±»æ–‡ä»¶</li>
<li><strong>å‡½æ•°å¼ç¼–ç¨‹</strong>ï¼šæ”¯æŒå‡½æ•°å¼ç¼–ç¨‹èŒƒå¼</li>
<li><strong>é›†åˆæ“ä½œ</strong>ï¼šä¸Stream APIå®Œç¾é…åˆ</li>
</ul>
</div>
</div>

## 3. å‡½æ•°å¼æ¥å£

### 3.1 ä»€ä¹ˆæ˜¯å‡½æ•°å¼æ¥å£ï¼Ÿ

å‡½æ•°å¼æ¥å£æ˜¯åªåŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ã€‚Lambdaè¡¨è¾¾å¼åªèƒ½ç”¨äºå‡½æ•°å¼æ¥å£ï¼Œå› ä¸ºLambdaè¡¨è¾¾å¼æœ¬èº«å°±æ˜¯è¿™ä¸ªæŠ½è±¡æ–¹æ³•çš„å®ç°ã€‚

```mermaid
classDiagram
    class FunctionalInterface {
        <<interface>>
        +abstractMethod() type
        +defaultMethod() type
        +staticMethod() type
    }
    note for FunctionalInterface "åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•\nå¯ä»¥æœ‰å¤šä¸ªé»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•"
```

```java title="å‡½æ•°å¼æ¥å£å®šä¹‰"
@FunctionalInterface
public interface MyFunctionalInterface {
    void process(String input);
    
    // å¯ä»¥æœ‰é»˜è®¤æ–¹æ³•
    default void defaultMethod() {
        System.out.println("Default implementation");
    }
    
    // å¯ä»¥æœ‰é™æ€æ–¹æ³•
    static void staticMethod() {
        System.out.println("Static method");
    }
    
    // å¯ä»¥æœ‰Objectç±»çš„æ–¹æ³•
    boolean equals(Object obj);
}
```

### 3.2 å¸¸ç”¨å‡½æ•°å¼æ¥å£

Java 8åœ¨`java.util.function`åŒ…ä¸­æä¾›äº†å¸¸ç”¨çš„å‡½æ•°å¼æ¥å£ï¼š

<Tabs>
  <TabItem value="consumer" label="Consumer<T>" default>
  ```java title="Consumeræ¥å£ç¤ºä¾‹"
  Consumer<String> printer = str -> System.out.println("Received: " + str);
  printer.accept("Hello World");

  // ç»„åˆå¤šä¸ªConsumer
  Consumer<String> c1 = str -> System.out.print("C1: " + str);
  Consumer<String> c2 = str -> System.out.println(" C2: " + str);
  Consumer<String> combined = c1.andThen(c2);
  combined.accept("Test"); // è¾“å‡º: C1: Test C2: Test
  ```
  </TabItem>
  <TabItem value="function" label="Function<T,R>">
  ```java title="Functionæ¥å£ç¤ºä¾‹"
  Function<String, Integer> length = String::length;
  Function<Integer, String> toString = Object::toString;

  // å‡½æ•°ç»„åˆ
  Function<String, String> combined = length.andThen(toString);
  String result = combined.apply("Hello"); // "5"

  // å‡½æ•°é“¾å¼è°ƒç”¨
  Function<String, String> pipeline = String::trim
      .andThen(String::toLowerCase)
      .andThen(str -> str.replace(" ", "_"));
  String processed = pipeline.apply("  Hello World  "); // "hello_world"
  ```
  </TabItem>
  <TabItem value="predicate" label="Predicate<T>">
  ```java title="Predicateæ¥å£ç¤ºä¾‹"
  Predicate<String> isEmpty = String::isEmpty;
  Predicate<String> isLong = str -> str.length() > 10;

  // é€»è¾‘ç»„åˆ
  Predicate<String> isNotEmptyAndLong = isEmpty.negate().and(isLong);
  boolean result = isNotEmptyAndLong.test("Hello World"); // true

  // å¤æ‚æ¡ä»¶
  Predicate<String> complex = str -> str != null 
      && str.length() > 5 
      && str.contains("a");
  ```
  </TabItem>
  <TabItem value="supplier" label="Supplier<T>">
  ```java title="Supplieræ¥å£ç¤ºä¾‹"
  Supplier<String> randomString = () -> UUID.randomUUID().toString();
  Supplier<LocalDateTime> now = LocalDateTime::now;
  Supplier<List<String>> emptyList = ArrayList::new;

  // å»¶è¿Ÿåˆå§‹åŒ–
  Supplier<ExpensiveObject> lazyInit = () -> {
      System.out.println("Creating expensive object...");
      return new ExpensiveObject();
  };

  // åªæœ‰åœ¨è°ƒç”¨get()æ—¶æ‰ä¼šåˆ›å»ºå¯¹è±¡
  ExpensiveObject obj = lazyInit.get();
  ```
  </TabItem>
</Tabs>

<details>
<summary>å¸¸ç”¨å‡½æ•°å¼æ¥å£æ¦‚è§ˆå›¾</summary>

```mermaid
graph TB
    A[Javaå‡½æ•°å¼æ¥å£] --> B[Consumer<T>]
    A --> C[Function<T,R>]
    A --> D[Predicate<T>]
    A --> E[Supplier<T>]
    
    B --> B1["accept(T t): void"]
    B --> B2["andThen(Consumer<T>): Consumer<T>"]
    
    C --> C1["apply(T t): R"]
    C --> C2["andThen(Function<R,V>): Function<T,V>"]
    C --> C3["compose(Function<V,T>): Function<V,R>"]
    
    D --> D1["test(T t): boolean"]
    D --> D2["and(Predicate<T>): Predicate<T>"]
    D --> D3["or(Predicate<T>): Predicate<T>"]
    D --> D4["negate(): Predicate<T>"]
    
    E --> E1["get(): T"]
```

</details>

### 3.3 è‡ªå®šä¹‰å‡½æ•°å¼æ¥å£

```java title="è‡ªå®šä¹‰å‡½æ•°å¼æ¥å£"
@FunctionalInterface
public interface StringProcessor {
    String process(String input);
    
    // é»˜è®¤æ–¹æ³•
    default StringProcessor andThen(StringProcessor after) {
        return input -> after.process(this.process(input));
    }
    
    // é™æ€å·¥å‚æ–¹æ³•
    static StringProcessor toUpperCase() {
        return String::toUpperCase;
    }
    
    static StringProcessor reverse() {
        return str -> new StringBuilder(str).reverse().toString();
    }
}

// ä½¿ç”¨ç¤ºä¾‹
StringProcessor processor = StringProcessor.toUpperCase()
    .andThen(StringProcessor.reverse());
String result = processor.process("hello"); // "OLLEH"
```

## 4. æ–¹æ³•å¼•ç”¨

### 4.1 ä»€ä¹ˆæ˜¯æ–¹æ³•å¼•ç”¨ï¼Ÿ

æ–¹æ³•å¼•ç”¨æ˜¯Lambdaè¡¨è¾¾å¼çš„ä¸€ç§ç®€åŒ–å†™æ³•ï¼Œå®ƒæä¾›äº†ä¸€ç§æ›´ç®€æ´çš„æ–¹å¼æ¥å¼•ç”¨å·²æœ‰çš„æ–¹æ³•ã€‚æ–¹æ³•å¼•ç”¨ä½¿ç”¨`::`æ“ä½œç¬¦ã€‚

| ç±»å‹ | è¯­æ³• | ç¤ºä¾‹ |
|------|------|------|
| **é™æ€æ–¹æ³•å¼•ç”¨** | `ClassName::staticMethod` | `Math::abs` |
| **å®ä¾‹æ–¹æ³•å¼•ç”¨** | `object::instanceMethod` | `str::length` |
| **ç±»æ–¹æ³•å¼•ç”¨** | `ClassName::instanceMethod` | `String::length` |
| **æ„é€ æ–¹æ³•å¼•ç”¨** | `ClassName::new` | `ArrayList::new` |

```mermaid
graph LR
    A[æ–¹æ³•å¼•ç”¨] --> B[é™æ€æ–¹æ³•å¼•ç”¨]
    A --> C[å®ä¾‹æ–¹æ³•å¼•ç”¨]
    A --> D[ç±»æ–¹æ³•å¼•ç”¨]
    A --> E[æ„é€ æ–¹æ³•å¼•ç”¨]
    
    B --> B1["ClassName::staticMethod"]
    C --> C1["object::instanceMethod"]
    D --> D1["ClassName::instanceMethod"]
    E --> E1["ClassName::new"]
```

### 4.2 æ–¹æ³•å¼•ç”¨ç¤ºä¾‹

<Tabs>
  <TabItem value="static" label="é™æ€æ–¹æ³•å¼•ç”¨" default>
  ```java
  // Lambdaè¡¨è¾¾å¼
  Function<Double, Double> sqrt1 = x -> Math.sqrt(x);

  // æ–¹æ³•å¼•ç”¨
  Function<Double, Double> sqrt2 = Math::sqrt;

  // ä½¿ç”¨
  double result = sqrt2.apply(16.0); // 4.0

  // å¤šä¸ªå‚æ•°
  BiFunction<Double, Double, Double> power = Math::pow;
  double powerResult = power.apply(2.0, 3.0); // 8.0
  ```
  </TabItem>
  <TabItem value="instance" label="å®ä¾‹æ–¹æ³•å¼•ç”¨">
  ```java
  // Lambdaè¡¨è¾¾å¼
  Consumer<String> printer1 = str -> System.out.println(str);

  // æ–¹æ³•å¼•ç”¨
  Consumer<String> printer2 = System.out::println;

  // ä½¿ç”¨
  printer2.accept("Hello World");

  // å¸¦å‚æ•°çš„å®ä¾‹æ–¹æ³•
  String prefix = "Prefix: ";
  Function<String, String> addPrefix = str -> prefix + str;
  Function<String, String> addPrefixRef = prefix::concat;
  ```
  </TabItem>
  <TabItem value="class" label="ç±»æ–¹æ³•å¼•ç”¨">
  ```java
  // Lambdaè¡¨è¾¾å¼
  Function<String, Integer> length1 = str -> str.length();

  // æ–¹æ³•å¼•ç”¨
  Function<String, Integer> length2 = String::length;

  // ä½¿ç”¨
  int len = length2.apply("Hello"); // 5

  // æ¯”è¾ƒæ–¹æ³•
  Comparator<String> comparator = String::compareToIgnoreCase;
  List<String> names = Arrays.asList("Alice", "bob", "Charlie");
  names.sort(comparator);
  ```
  </TabItem>
  <TabItem value="constructor" label="æ„é€ æ–¹æ³•å¼•ç”¨">
  ```java
  // Lambdaè¡¨è¾¾å¼
  Supplier<ArrayList<String>> listSupplier1 = () -> new ArrayList<>();

  // æ„é€ æ–¹æ³•å¼•ç”¨
  Supplier<ArrayList<String>> listSupplier2 = ArrayList::new;

  // ä½¿ç”¨
  ArrayList<String> list = listSupplier2.get();

  // å¸¦å‚æ•°çš„æ„é€ æ–¹æ³•
  Function<String, StringBuilder> sbSupplier = StringBuilder::new;
  StringBuilder sb = sbSupplier.apply("Initial");
  ```
  </TabItem>
</Tabs>

## 5. Lambdaè¡¨è¾¾å¼çš„å®é™…åº”ç”¨

### 5.1 é›†åˆæ“ä½œ

Lambdaè¡¨è¾¾å¼ä¸Stream APIç»“åˆä½¿ç”¨ï¼Œå¯ä»¥å¤§å¤§ç®€åŒ–é›†åˆæ“ä½œï¼š

```java title="é›†åˆæ“ä½œç¤ºä¾‹"
List<String> names = Arrays.asList("Alice", "Bob", "Charlie", "David");

// è¿‡æ»¤å’Œè½¬æ¢
List<String> filteredNames = names.stream()
    .filter(name -> name.length() > 4)
    .map(String::toUpperCase)
    .collect(Collectors.toList());

System.out.println("Names: " + filteredNames); // [ALICE, CHARLIE, DAVID]

// æ’åº
names.sort((a, b) -> a.compareToIgnoreCase(b));
System.out.println("Sorted: " + names);

// åˆ†ç»„
Map<Integer, List<String>> lengthGroups = names.stream()
    .collect(Collectors.groupingBy(String::length));
System.out.println("Groups: " + lengthGroups);
```

<details>
<summary>é›†åˆæ“ä½œæµç¨‹å›¾</summary>

```mermaid
flowchart TD
    A["åŸå§‹é›†åˆ"] -->|"stream()"| B["æµ"]
    B -->|"filter()"| C["è¿‡æ»¤"]
    C -->|"map()"| D["è½¬æ¢"]
    D -->|"collect()"| E["ç»“æœé›†åˆ"]
    
    A1["åŸå§‹é›†åˆ"] -->|"sort()"| B1["æ’åº"]
    
    A2["åŸå§‹é›†åˆ"] -->|"stream()"| B2["æµ"]
    B2 -->|"collect(groupingBy())"| C2["åˆ†ç»„ç»“æœ"]
```

</details>

### 5.2 äº‹ä»¶å¤„ç†

Lambdaè¡¨è¾¾å¼ç®€åŒ–äº†äº‹ä»¶å¤„ç†ä»£ç ï¼š

<div className="code-with-callout">

```java title="äº‹ä»¶å¤„ç†ç¤ºä¾‹"
// æŒ‰é’®ç‚¹å‡»äº‹ä»¶
button.addActionListener(e -> {
    String text = textField.getText();
    if (!text.isEmpty()) {
        processText(text);
    }
});

// å®šæ—¶å™¨äº‹ä»¶
Timer timer = new Timer(1000, e -> {
    updateTime();
    repaint();
});
timer.start();
```

:::info ä¼˜åŠ¿
ä½¿ç”¨Lambdaè¡¨è¾¾å¼å¤„ç†äº‹ä»¶ï¼Œä¸å†éœ€è¦åˆ›å»ºåŒ¿åå†…éƒ¨ç±»ï¼Œä»£ç æ›´åŠ ç®€æ´æ˜äº†ã€‚
:::
</div>

### 5.3 çº¿ç¨‹åˆ›å»º

Lambdaè¡¨è¾¾å¼ç®€åŒ–äº†çº¿ç¨‹åˆ›å»ºï¼š

<Tabs>
  <TabItem value="traditional" label="ä¼ ç»Ÿæ–¹å¼" default>
  ```java
  Thread oldThread = new Thread(new Runnable() {
      @Override
      public void run() {
          System.out.println("Old way");
      }
  });
  
  oldThread.start();
  ```
  </TabItem>
  <TabItem value="lambda" label="Lambdaæ–¹å¼">
  ```java
  Thread newThread = new Thread(() -> System.out.println("New way"));
  
  newThread.start();
  ```
  </TabItem>
</Tabs>

## 6. é«˜çº§ç‰¹æ€§

### 6.1 å˜é‡æ•è·

Lambdaè¡¨è¾¾å¼å¯ä»¥æ•è·å¤–éƒ¨å˜é‡ï¼Œä½†å˜é‡å¿…é¡»æ˜¯effectively finalçš„ï¼š

```java title="å˜é‡æ•è·ç¤ºä¾‹"
String prefix = "Hello, ";
int count = 0;

// æ­£ç¡®ï¼šeffectively finalå˜é‡
Consumer<String> greeter = name -> {
    System.out.println(prefix + name);
    // count++; // é”™è¯¯ï¼šä¸èƒ½ä¿®æ”¹å¤–éƒ¨å˜é‡
};

greeter.accept("World");

// æ•°ç»„æˆ–å¯¹è±¡å¼•ç”¨å¯ä»¥ä¿®æ”¹å†…å®¹
int[] counter = {0};
Consumer<String> counter1 = name -> {
    counter[0]++; // æ­£ç¡®ï¼šä¿®æ”¹æ•°ç»„å†…å®¹
    System.out.println(prefix + name + " (count: " + counter[0] + ")");
};
```

:::caution å˜é‡æ•è·é™åˆ¶
Lambdaè¡¨è¾¾å¼ä¸­å¼•ç”¨çš„å¤–éƒ¨å±€éƒ¨å˜é‡å¿…é¡»æ˜¯finalæˆ–effectively finalçš„ï¼ˆå³è™½æœªå£°æ˜ä¸ºfinalï¼Œä½†å€¼ä»æœªè¢«ä¿®æ”¹ï¼‰ã€‚è¿™æ˜¯ä¸ºäº†ç¡®ä¿çº¿ç¨‹å®‰å…¨å’Œé¿å…å¹¶å‘é—®é¢˜ã€‚
:::

### 6.2 å¼‚å¸¸å¤„ç†

Lambdaè¡¨è¾¾å¼ä¸­çš„å¼‚å¸¸å¤„ç†éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š

<Tabs>
  <TabItem value="internal" label="å†…éƒ¨å¤„ç†" default>
  ```java
  // æ–¹å¼1ï¼šåœ¨Lambdaå†…éƒ¨å¤„ç†å¼‚å¸¸
  Function<String, Integer> safeLength = str -> {
      try {
          return str.length();
      } catch (Exception e) {
          return 0;
      }
  };
  ```
  </TabItem>
  <TabItem value="wrapper" label="åŒ…è£…å™¨">
  ```java
  // æ–¹å¼2ï¼šä½¿ç”¨åŒ…è£…å™¨
  @FunctionalInterface
  interface ThrowingFunction<T, R> {
      R apply(T t) throws Exception;
  }

  static <T, R> Function<T, R> unchecked(ThrowingFunction<T, R> f) {
      return t -> {
          try {
              return f.apply(t);
          } catch (Exception e) {
              throw new RuntimeException(e);
          }
      };
  }

  // ä½¿ç”¨
  Function<String, Integer> length = unchecked(String::length);
  ```
  </TabItem>
</Tabs>

### 6.3 é€’å½’Lambda

Lambdaè¡¨è¾¾å¼å¯ä»¥å®ç°é€’å½’ï¼Œä½†éœ€è¦ä½¿ç”¨æŠ€å·§ï¼š

```java title="é€’å½’Lambdaç¤ºä¾‹"
// ä½¿ç”¨å‡½æ•°å¼æ¥å£å®ç°é€’å½’
@FunctionalInterface
interface IntFunction {
    int apply(int n, IntFunction self);
}

// é˜¶ä¹˜è®¡ç®—
IntFunction factorial = (n, self) -> n <= 1 ? 1 : n * self.apply(n - 1, self);
int result = factorial.apply(5, factorial); // 120

// æ–æ³¢é‚£å¥‘æ•°åˆ—
IntFunction fibonacci = (n, self) -> n <= 1 ? n : self.apply(n - 1, self) + self.apply(n - 2, self);
int fib = fibonacci.apply(10, fibonacci); // 55
```

<details>
<summary>é€’å½’Lambdaæ‰§è¡Œè¿‡ç¨‹</summary>

```mermaid
graph TB
    A["factorial.apply(5, factorial)"] --> B["5 * factorial.apply(4, factorial)"]
    B --> C["4 * factorial.apply(3, factorial)"]
    C --> D["3 * factorial.apply(2, factorial)"]
    D --> E["2 * factorial.apply(1, factorial)"]
    E --> F["1"]
    F -- "return 1" --> E
    E -- "return 2*1=2" --> D
    D -- "return 3*2=6" --> C
    C -- "return 4*6=24" --> B
    B -- "return 5*24=120" --> A
```

</details>

## 7. æ€§èƒ½è€ƒè™‘

### 7.1 Lambdaè¡¨è¾¾å¼çš„æ€§èƒ½ç‰¹ç‚¹

<div className="card">
<div className="card__header">
<h4>Lambdaè¡¨è¾¾å¼æ€§èƒ½ç‰¹ç‚¹</h4>
</div>
<div className="card__body">
<ol>
<li><strong>é¦–æ¬¡è°ƒç”¨</strong>ï¼šå¯èƒ½è¾ƒæ…¢ï¼ˆJVMä¼˜åŒ–ï¼‰</li>
<li><strong>åç»­è°ƒç”¨</strong>ï¼šæ€§èƒ½æ¥è¿‘ç›´æ¥è°ƒç”¨</li>
<li><strong>å†…å­˜å ç”¨</strong>ï¼šä¸åˆ›å»ºé¢å¤–çš„ç±»æ–‡ä»¶</li>
<li><strong>JITä¼˜åŒ–</strong>ï¼šJVMä¼šä¼˜åŒ–çƒ­ç‚¹ä»£ç </li>
</ol>
</div>
</div>

### 7.2 æ€§èƒ½ä¼˜åŒ–å»ºè®®

<Tabs>
  <TabItem value="predefine" label="é¢„å®šä¹‰Lambda" default>
  ```java
  // 1. é¿å…åœ¨å¾ªç¯ä¸­åˆ›å»ºLambda
  List<String> names = Arrays.asList("Alice", "Bob", "Charlie");
  
  // å¥½çš„åšæ³•ï¼šé¢„å®šä¹‰Lambda
  Function<String, String> toUpper = String::toUpperCase;
  List<String> upperNames = names.stream()
      .map(toUpper)
      .collect(Collectors.toList());
  ```
  </TabItem>
  <TabItem value="primitive" label="ä½¿ç”¨åŸºæœ¬ç±»å‹æµ">
  ```java
  // 2. ä½¿ç”¨åŸºæœ¬ç±»å‹æµé¿å…è£…ç®±
  List<Integer> numbers = Arrays.asList(1, 2, 3, 4, 5);
  int sum = numbers.stream()
      .mapToInt(Integer::intValue) // é¿å…è£…ç®±
      .sum();
  ```
  </TabItem>
  <TabItem value="parallel" label="å¹¶è¡Œæµ">
  ```java
  // 3. å¹¶è¡Œæµå¤„ç†å¤§æ•°æ®é›†
  long count = numbers.parallelStream()
      .filter(n -> n % 2 == 0)
      .count();
  ```
  </TabItem>
</Tabs>

:::tip æ€§èƒ½ä¼˜åŒ–æ ¸å¿ƒ
1. **é‡ç”¨Lambdaè¡¨è¾¾å¼**ï¼šé¿å…é‡å¤åˆ›å»ºç›¸åŒçš„Lambda
2. **é¿å…è£…ç®±æ‹†ç®±**ï¼šä½¿ç”¨åŸºæœ¬ç±»å‹ä¸“ç”¨çš„å‡½æ•°å¼æ¥å£
3. **è€ƒè™‘å¹¶è¡Œæµ**ï¼šå¤„ç†å¤§æ•°æ®é›†æ—¶ä½¿ç”¨å¹¶è¡Œæµ
4. **æ³¨æ„å‰¯ä½œç”¨**ï¼šä¿æŒLambdaçš„æ— çŠ¶æ€ç‰¹æ€§
:::

## 8. å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### 8.1 ç±»å‹æ¨æ–­é—®é¢˜

```java title="ç±»å‹æ¨æ–­é—®é¢˜è§£å†³"
// é—®é¢˜ï¼šç±»å‹æ¨æ–­å¤±è´¥
// List<String> list = Arrays.asList(1, 2, 3); // ç¼–è¯‘é”™è¯¯

// è§£å†³ï¼šæ˜¾å¼ç±»å‹å£°æ˜
List<String> list = Arrays.asList("1", "2", "3");

// æˆ–è€…ä½¿ç”¨ç±»å‹å‚æ•°
List<String> list2 = Arrays.<String>asList("1", "2", "3");
```

### 8.2 ç©ºæŒ‡é’ˆå¼‚å¸¸

<div className="code-with-callout">

```java title="ç©ºæŒ‡é’ˆå¼‚å¸¸é¢„é˜²"
List<String> names = Arrays.asList("Alice", null, "Bob");

// é¢„é˜²ç©ºæŒ‡é’ˆå¼‚å¸¸
List<String> safeNames = names.stream()
    .filter(Objects::nonNull)
    .collect(Collectors.toList());

// æˆ–è€…æä¾›é»˜è®¤å€¼
List<String> processedNames = names.stream()
    .map(name -> name != null ? name : "Unknown")
    .collect(Collectors.toList());
```

:::warning æ³¨æ„
åœ¨å¤„ç†å¯èƒ½ä¸ºnullçš„æ•°æ®æ—¶ï¼Œæ€»æ˜¯è¦è¿›è¡Œç©ºæ£€æŸ¥æˆ–ä½¿ç”¨OptionalåŒ…è£…ã€‚
:::
</div>

### 8.3 å¹¶å‘ä¿®æ”¹å¼‚å¸¸

```java title="å¹¶å‘ä¿®æ”¹å¼‚å¸¸é¢„é˜²"
List<String> names = new ArrayList<>(Arrays.asList("Alice", "Bob", "Charlie"));

// é”™è¯¯ï¼šåœ¨è¿­ä»£æ—¶ä¿®æ”¹é›†åˆ
// names.removeIf(name -> name.equals("Bob")); // å¯èƒ½æŠ›å‡ºå¼‚å¸¸

// æ­£ç¡®ï¼šä½¿ç”¨Stream API
List<String> filteredNames = names.stream()
    .filter(name -> !name.equals("Bob"))
    .collect(Collectors.toList());
```

## 9. æœ€ä½³å®è·µ

### 9.1 ä»£ç é£æ ¼

<div className="card">
<div className="card__body">
<ol>
<li><strong>ä¿æŒç®€æ´</strong>ï¼šLambdaè¡¨è¾¾å¼åº”è¯¥ç®€æ´æ˜äº†</li>
<li><strong>æ–¹æ³•å¼•ç”¨ä¼˜å…ˆ</strong>ï¼šå½“å¯èƒ½æ—¶ä½¿ç”¨æ–¹æ³•å¼•ç”¨</li>
<li><strong>é¿å…å‰¯ä½œç”¨</strong>ï¼šLambdaè¡¨è¾¾å¼åº”è¯¥æ˜¯æ— çŠ¶æ€çš„</li>
<li><strong>é€‚å½“å‘½å</strong>ï¼šä¸ºå¤æ‚çš„Lambdaè¡¨è¾¾å¼æä¾›æœ‰æ„ä¹‰çš„å˜é‡å</li>
</ol>
</div>
</div>

### 9.2 å¯è¯»æ€§æå‡

<Tabs>
  <TabItem value="bad" label="ä¸æ¨è" default>
  ```java
  // ä¸å¥½çš„åšæ³•ï¼šå¤æ‚çš„Lambda
  Function<String, String> processor = str -> str.trim().toLowerCase().replace(" ", "_");
  ```
  </TabItem>
  <TabItem value="good" label="æ¨è">
  ```java
  // å¥½çš„åšæ³•ï¼šåˆ†è§£ä¸ºå¤šä¸ªæ­¥éª¤
  Function<String, String> trim = String::trim;
  Function<String, String> toLower = String::toLowerCase;
  Function<String, String> replaceSpace = str -> str.replace(" ", "_");
  
  Function<String, String> processor = trim
      .andThen(toLower)
      .andThen(replaceSpace);
  ```
  </TabItem>
</Tabs>

### 9.3 æµ‹è¯•ç­–ç•¥

```java title="æµ‹è¯•ç­–ç•¥ç¤ºä¾‹"
// æµ‹è¯•Lambdaè¡¨è¾¾å¼
@Test
public void testLambda() {
    Function<String, String> toUpper = String::toUpperCase;
    
    assertEquals("HELLO", toUpper.apply("hello"));
    assertEquals("WORLD", toUpper.apply("world"));
}

// æµ‹è¯•å‡½æ•°å¼æ¥å£
@Test
public void testFunctionalInterface() {
    StringProcessor processor = StringProcessor.toUpperCase()
        .andThen(StringProcessor.reverse());
    
    assertEquals("OLLEH", processor.process("hello"));
}
```

## 10. æ€»ç»“

:::tip Lambdaè¡¨è¾¾å¼çš„æ ¸å¿ƒä»·å€¼
Lambdaè¡¨è¾¾å¼æ˜¯Java 8å¼•å…¥çš„é‡è¦ç‰¹æ€§ï¼Œå®ƒå¤§å¤§ç®€åŒ–äº†ä»£ç ç¼–å†™ï¼Œæé«˜äº†ä»£ç å¯è¯»æ€§ï¼Œå¹¶æ”¯æŒå‡½æ•°å¼ç¼–ç¨‹èŒƒå¼ã€‚é€šè¿‡åˆç†ä½¿ç”¨Lambdaè¡¨è¾¾å¼ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š

1. **ç®€åŒ–ä»£ç **ï¼šå‡å°‘æ ·æ¿ä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡
2. **æé«˜å¯è¯»æ€§**ï¼šä»£ç é€»è¾‘æ›´åŠ æ¸…æ™°æ˜äº†
3. **æ”¯æŒå‡½æ•°å¼ç¼–ç¨‹**ï¼šå¼•å…¥å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³
4. **ä¼˜åŒ–æ€§èƒ½**ï¼šä¸Stream APIç»“åˆï¼Œæä¾›é«˜æ•ˆçš„é›†åˆæ“ä½œ
5. **å¢å¼ºå¯ç»´æŠ¤æ€§**ï¼šä»£ç ç»“æ„æ›´åŠ æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤

### å­¦ä¹ å»ºè®®

```mermaid
mindmap
  root((Lambdaå­¦ä¹ è·¯å¾„))
    åŸºç¡€
      è¯­æ³•è§„åˆ™
      å˜é‡æ•è·
      è¡¨è¾¾å¼ç»“æ„
    å‡½æ•°å¼æ¥å£
      å†…ç½®æ¥å£
      è‡ªå®šä¹‰æ¥å£
      æ–¹æ³•å¼•ç”¨
    å®è·µåº”ç”¨
      é›†åˆæ“ä½œ
      äº‹ä»¶å¤„ç†
      çº¿ç¨‹åˆ›å»º
    é«˜çº§ç‰¹æ€§
      æ€§èƒ½ä¼˜åŒ–
      å¼‚å¸¸å¤„ç†
      é€’å½’Lambda
```

1. **æŒæ¡åŸºç¡€è¯­æ³•**ï¼šç†è§£Lambdaè¡¨è¾¾å¼çš„åŸºæœ¬è¯­æ³•å’Œè§„åˆ™
2. **ç†Ÿæ‚‰å‡½æ•°å¼æ¥å£**ï¼šäº†è§£å¸¸ç”¨çš„å‡½æ•°å¼æ¥å£åŠå…¶ç”¨æ³•
3. **ç»ƒä¹ æ–¹æ³•å¼•ç”¨**ï¼šæŒæ¡å„ç§ç±»å‹çš„æ–¹æ³•å¼•ç”¨è¯­æ³•
4. **ç»“åˆStream API**ï¼šå­¦ä¹ Lambdaè¡¨è¾¾å¼ä¸Stream APIçš„ç»“åˆä½¿ç”¨
5. **æ³¨æ„æ€§èƒ½å½±å“**ï¼šäº†è§£Lambdaè¡¨è¾¾å¼çš„æ€§èƒ½ç‰¹ç‚¹å’Œä¼˜åŒ–æ–¹æ³•

### è¿›é˜¶æ–¹å‘

1. **å‡½æ•°å¼ç¼–ç¨‹**ï¼šæ·±å…¥å­¦ä¹ å‡½æ•°å¼ç¼–ç¨‹èŒƒå¼
2. **å“åº”å¼ç¼–ç¨‹**ï¼šæ¢ç´¢å“åº”å¼ç¼–ç¨‹ä¸Lambdaçš„å…³ç³»
3. **è®¾è®¡æ¨¡å¼**ï¼šäº†è§£Lambdaè¡¨è¾¾å¼åœ¨è®¾è®¡æ¨¡å¼ä¸­çš„åº”ç”¨
4. **æ€§èƒ½è°ƒä¼˜**ï¼šå­¦ä¹ Lambdaè¡¨è¾¾å¼çš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§
5. **æœ€ä½³å®è·µ**ï¼šæŒæ¡Lambdaè¡¨è¾¾å¼çš„æœ€ä½³å®è·µå’Œå¸¸è§é™·é˜±

Lambdaè¡¨è¾¾å¼æ˜¯Javaç°ä»£åŒ–çš„é‡è¦æ ‡å¿—ï¼ŒæŒæ¡å®ƒå°†ä½¿ä½ çš„Javaç¼–ç¨‹èƒ½åŠ›æ›´ä¸Šä¸€å±‚æ¥¼ï¼ 

## 11. é¢è¯•é¢˜ç²¾é€‰

### 11.1 ä»€ä¹ˆæ˜¯Lambdaè¡¨è¾¾å¼ï¼ŸLambdaè¡¨è¾¾å¼çš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ

**ç­”æ¡ˆï¼š** Lambdaè¡¨è¾¾å¼æ˜¯Java 8å¼•å…¥çš„ä¸€ç§åŒ¿åå‡½æ•°ï¼Œå¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™æ–¹æ³•æˆ–å­˜å‚¨åœ¨å˜é‡ä¸­ã€‚å®ƒæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒç‰¹æ€§ã€‚

Lambdaè¡¨è¾¾å¼çš„ä¸»è¦ä¼˜åŠ¿ï¼š
- **ç®€æ´æ€§**ï¼šå‡å°‘æ ·æ¿ä»£ç ï¼Œä½¿ä»£ç æ›´åŠ ç®€æ´æ˜“è¯»
- **å‡½æ•°å¼ç¼–ç¨‹æ”¯æŒ**ï¼šä¿ƒè¿›äº†å‡½æ•°å¼ç¼–ç¨‹èŒƒå¼åœ¨Javaä¸­çš„åº”ç”¨
- **å¹¶è¡Œå¤„ç†èƒ½åŠ›**ï¼šç»“åˆStream APIæä¾›äº†é«˜æ•ˆçš„å¹¶è¡Œå¤„ç†èƒ½åŠ›
- **å»¶è¿Ÿæ‰§è¡Œ**ï¼šæ”¯æŒå»¶è¿Ÿæ‰§è¡Œå’Œæƒ°æ€§è®¡ç®—
- **è¡Œä¸ºå‚æ•°åŒ–**ï¼šå°†è¡Œä¸ºï¼ˆæ–¹æ³•ï¼‰ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¶ä»–æ–¹æ³•

### 11.2 Lambdaè¡¨è¾¾å¼ä¸åŒ¿åå†…éƒ¨ç±»çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ

**ç­”æ¡ˆï¼š** 
1. **è¯­æ³•ç®€æ´æ€§**ï¼šLambdaè¡¨è¾¾å¼è¯­æ³•æ›´åŠ ç®€æ´ï¼Œä¸éœ€è¦åƒåŒ¿åå†…éƒ¨ç±»é‚£æ ·ç¼–å†™å†—é•¿çš„ä»£ç 
2. **å˜é‡æ•è·æœºåˆ¶**ï¼šLambdaè‡ªåŠ¨æ•è·effectively finalå˜é‡ï¼ŒåŒ¿åå†…éƒ¨ç±»éœ€è¦æ˜¾å¼finalå£°æ˜
3. **thiså…³é”®å­—**ï¼šLambdaä¸­çš„thisæŒ‡å‘å¤–éƒ¨ç±»å®ä¾‹ï¼Œè€ŒåŒ¿åå†…éƒ¨ç±»ä¸­çš„thisæŒ‡å‘åŒ¿åå†…éƒ¨ç±»å®ä¾‹
4. **ç¼–è¯‘æ–¹å¼**ï¼šLambdaè¡¨è¾¾å¼ä¸ä¼šç”Ÿæˆé¢å¤–çš„ç±»æ–‡ä»¶ï¼Œè€Œæ˜¯é€šè¿‡invokedynamicæŒ‡ä»¤å®ç°
5. **åŠŸèƒ½é™åˆ¶**ï¼šLambdaè¡¨è¾¾å¼åªèƒ½ç”¨äºå‡½æ•°å¼æ¥å£ï¼Œè€ŒåŒ¿åå†…éƒ¨ç±»å¯ä»¥å®ç°ä»»ä½•æ¥å£æˆ–ç»§æ‰¿ä»»ä½•ç±»

### 11.3 ä»€ä¹ˆæ˜¯å‡½æ•°å¼æ¥å£ï¼Ÿè¯·åˆ—ä¸¾Java 8ä¸­å¸¸ç”¨çš„å‡½æ•°å¼æ¥å£ã€‚

**ç­”æ¡ˆï¼š** å‡½æ•°å¼æ¥å£æ˜¯åªåŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼Œå¯ä»¥ä½¿ç”¨`@FunctionalInterface`æ³¨è§£æ ‡è®°ï¼ˆéå¿…é¡»ä½†æ¨èï¼‰ã€‚

Java 8ä¸­å¸¸ç”¨çš„å‡½æ•°å¼æ¥å£åŒ…æ‹¬ï¼š
- **Consumer\<T\>**ï¼šæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œä¸è¿”å›ç»“æœï¼Œç”¨äºæ¶ˆè´¹æ“ä½œ
- **Supplier\<T\>**ï¼šä¸æ¥æ”¶å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªç»“æœï¼Œç”¨äºæä¾›æ•°æ®
- **Function\<T,R\>**ï¼šæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªç»“æœï¼Œç”¨äºè½¬æ¢æ“ä½œ
- **Predicate\<T\>**ï¼šæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›å¸ƒå°”å€¼ï¼Œç”¨äºæ¡ä»¶åˆ¤æ–­
- **BiFunction\<T,U,R\>**ï¼šæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªç»“æœ
- **UnaryOperator\<T\>**ï¼šæ¥æ”¶ä¸€ä¸ªç±»å‹ä¸ºTçš„å‚æ•°ï¼Œè¿”å›ç›¸åŒç±»å‹çš„ç»“æœ
- **BinaryOperator\<T\>**ï¼šæ¥æ”¶ä¸¤ä¸ªç±»å‹ä¸ºTçš„å‚æ•°ï¼Œè¿”å›ç›¸åŒç±»å‹çš„ç»“æœ

### 11.4 è¯·è§£é‡Šæ–¹æ³•å¼•ç”¨çš„ç±»å‹åŠå…¶ä½¿ç”¨åœºæ™¯ã€‚

**ç­”æ¡ˆï¼š** æ–¹æ³•å¼•ç”¨æ˜¯Lambdaè¡¨è¾¾å¼çš„ä¸€ç§ç®€åŒ–å½¢å¼ï¼Œä½¿ç”¨`::`æ“ä½œç¬¦ã€‚ä¸»è¦æœ‰å››ç§ç±»å‹ï¼š

1. **é™æ€æ–¹æ³•å¼•ç”¨**ï¼š`ClassName::staticMethod`
   - ä½¿ç”¨åœºæ™¯ï¼šå¼•ç”¨ç±»çš„é™æ€æ–¹æ³•
   - ç¤ºä¾‹ï¼š`Math::abs`

2. **ç‰¹å®šå¯¹è±¡çš„å®ä¾‹æ–¹æ³•å¼•ç”¨**ï¼š`objectRef::instanceMethod`
   - ä½¿ç”¨åœºæ™¯ï¼šå¼•ç”¨å·²å­˜åœ¨å¯¹è±¡çš„å®ä¾‹æ–¹æ³•
   - ç¤ºä¾‹ï¼š`System.out::println`

3. **ç‰¹å®šç±»å‹çš„ä»»æ„å¯¹è±¡çš„å®ä¾‹æ–¹æ³•å¼•ç”¨**ï¼š`ClassName::instanceMethod`
   - ä½¿ç”¨åœºæ™¯ï¼šå½“Lambdaå‚æ•°æ˜¯æ–¹æ³•çš„è°ƒç”¨è€…æ—¶
   - ç¤ºä¾‹ï¼š`String::length`ï¼Œç­‰åŒäº`s -> s.length()`

4. **æ„é€ å‡½æ•°å¼•ç”¨**ï¼š`ClassName::new`
   - ä½¿ç”¨åœºæ™¯ï¼šåˆ›å»ºå¯¹è±¡
   - ç¤ºä¾‹ï¼š`ArrayList::new`

### 11.5 Lambdaè¡¨è¾¾å¼ä¸­çš„å˜é‡æ•è·æœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿä¸ºä»€ä¹ˆè¦æ±‚å˜é‡æ˜¯finalæˆ–effectively finalçš„ï¼Ÿ

**ç­”æ¡ˆï¼š** Lambdaè¡¨è¾¾å¼å¯ä»¥æ•è·å…¶å¤–éƒ¨ä½œç”¨åŸŸä¸­çš„å˜é‡ï¼Œä½†è¿™äº›å˜é‡å¿…é¡»æ˜¯finalæˆ–effectively finalï¼ˆè™½ç„¶æ²¡æœ‰å£°æ˜ä¸ºfinalï¼Œä½†åœ¨åˆå§‹åŒ–åå€¼ä»æœªæ”¹å˜ï¼‰çš„ã€‚

è¿™ä¸€é™åˆ¶çš„åŸå› æœ‰ï¼š
1. **å¹¶å‘å®‰å…¨**ï¼šç¡®ä¿åœ¨å¹¶å‘æ‰§è¡ŒLambdaæ—¶å˜é‡çŠ¶æ€çš„ä¸€è‡´æ€§
2. **å®ç°æœºåˆ¶**ï¼šLambdaè¡¨è¾¾å¼æ•è·çš„æ˜¯å˜é‡çš„å€¼è€Œéå˜é‡æœ¬èº«ï¼Œå¦‚æœå…è®¸ä¿®æ”¹ï¼Œä¼šå¯¼è‡´ä¸ä¸€è‡´æ€§
3. **é—­åŒ…å®ç°**ï¼šJavaçš„Lambdaæ˜¯é—­åŒ…çš„æœ‰é™å®ç°ï¼Œå€¼æ•è·è€Œéå¼•ç”¨æ•è·

å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ç»•è¿‡è¿™ä¸€é™åˆ¶ï¼š
- ä½¿ç”¨åŸå­ç±»ï¼ˆå¦‚AtomicIntegerï¼‰
- ä½¿ç”¨æ•°ç»„åŒ…è£…å€¼ï¼ˆå¦‚`int[] counter = {0};`ï¼‰
- ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„é›†åˆç±»

### 11.6 å¦‚ä½•åœ¨Lambdaè¡¨è¾¾å¼ä¸­å¤„ç†å¼‚å¸¸ï¼Ÿ

**ç­”æ¡ˆï¼š** Lambdaè¡¨è¾¾å¼ä¸­å¤„ç†å¼‚å¸¸çš„ä¸»è¦æ–¹æ³•æœ‰ï¼š

1. **åœ¨Lambdaå†…éƒ¨ä½¿ç”¨try-catch**ï¼š
```java
Function<String, Integer> parser = s -> {
    try {
        return Integer.parseInt(s);
    } catch (NumberFormatException e) {
        return 0;
    }
};
```

2. **ä½¿ç”¨åŒ…è£…å‡½æ•°å¤„ç†å—æ£€å¼‚å¸¸**ï¼š
```java
@FunctionalInterface
interface ThrowingFunction<T, R, E extends Exception> {
    R apply(T t) throws E;
}

static <T, R, E extends Exception> Function<T, R> unchecked(ThrowingFunction<T, R, E> f) {
    return t -> {
        try {
            return f.apply(t);
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    };
}

// ä½¿ç”¨
Function<String, String> reader = unchecked(Files::readString);
```

3. **è‡ªå®šä¹‰å‡½æ•°å¼æ¥å£å…è®¸æŠ›å‡ºå¼‚å¸¸**ï¼š
```java
@FunctionalInterface
interface IOFunction<T, R> {
    R apply(T t) throws IOException;
}
```

### 11.7 Lambdaè¡¨è¾¾å¼åœ¨Stream APIä¸­çš„åº”ç”¨æœ‰å“ªäº›ï¼Ÿ

**ç­”æ¡ˆï¼š** Lambdaè¡¨è¾¾å¼ä¸Stream APIç»“åˆå¯ä»¥å®ç°å¼ºå¤§çš„æ•°æ®å¤„ç†èƒ½åŠ›ï¼š

1. **è¿‡æ»¤æ“ä½œ**ï¼š`stream.filter(x -> x > 10)`
2. **æ˜ å°„è½¬æ¢**ï¼š`stream.map(String::toUpperCase)`
3. **æ’åº**ï¼š`list.sort(Comparator.comparing(User::getAge))`
4. **å½’çº¦**ï¼š`stream.reduce(0, (a, b) -> a + b)`
5. **æ”¶é›†**ï¼š`stream.collect(Collectors.toList())`
6. **åˆ†ç»„**ï¼š`stream.collect(Collectors.groupingBy(User::getRole))`
7. **å¹¶è¡Œå¤„ç†**ï¼š`stream.parallel().filter(x -> x > 100).count()`
8. **åŒ¹é…æ“ä½œ**ï¼š`stream.anyMatch(s -> s.contains("test"))`

### 11.8 Lambdaè¡¨è¾¾å¼ä¼šäº§ç”Ÿå†…å­˜æ³„æ¼å—ï¼Ÿå¦‚ä½•é¿å…ï¼Ÿ

**ç­”æ¡ˆï¼š** Lambdaè¡¨è¾¾å¼å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ï¼Œä¸»è¦åœ¨ä»¥ä¸‹æƒ…å†µï¼š

1. **éé™æ€å†…éƒ¨ç±»ä¸­ä½¿ç”¨**ï¼šLambdaä¼šæ•è·å¤–éƒ¨ç±»å®ä¾‹ï¼Œå¯¼è‡´å¯¹è±¡æ— æ³•é‡Šæ”¾
2. **é•¿æœŸå­˜æ´»çš„Lambdaæ•è·å¤§å¯¹è±¡**ï¼šæ•è·çš„å˜é‡ä¼šä¸€ç›´ä¿æŒå¼•ç”¨ï¼Œå³ä½¿ä¸å†éœ€è¦
3. **çº¿ç¨‹æ± ä¸Lambdaç»“åˆ**ï¼šæäº¤åˆ°çº¿ç¨‹æ± çš„Lambdaå¯èƒ½ä¼šæŒæœ‰å¤–éƒ¨å¼•ç”¨

é¿å…æ–¹æ³•ï¼š
1. **é™æ€ä¸Šä¸‹æ–‡**ï¼šå°½é‡åœ¨é™æ€æ–¹æ³•æˆ–é™æ€å†…éƒ¨ç±»ä¸­ä½¿ç”¨Lambda
2. **å¼±å¼•ç”¨**ï¼šä½¿ç”¨WeakReferenceåŒ…è£…æ•è·çš„å¯¹è±¡
3. **åŠæ—¶æ¸…ç†**ï¼šæ˜¾å¼ç½®ç©ºä¸å†ä½¿ç”¨çš„å¼•ç”¨
4. **æ§åˆ¶ä½œç”¨åŸŸ**ï¼šé™åˆ¶Lambdaçš„ç”Ÿå‘½å‘¨æœŸ
5. **ä¸æ•è·ä¸å¿…è¦çš„å˜é‡**ï¼šåªæ•è·å¿…éœ€çš„å˜é‡ï¼Œé¿å…æ•è·å¤§å¯¹è±¡

### 11.9 Lambdaè¡¨è¾¾å¼çš„æ€§èƒ½å¦‚ä½•ï¼Ÿä¸ä¼ ç»Ÿæ–¹å¼ç›¸æ¯”æœ‰ä½•å·®å¼‚ï¼Ÿ

**ç­”æ¡ˆï¼š** Lambdaè¡¨è¾¾å¼æ€§èƒ½ç‰¹ç‚¹ï¼š

1. **é¦–æ¬¡è°ƒç”¨**ï¼š
   - Lambdaé¦–æ¬¡è°ƒç”¨è¾ƒæ…¢ï¼Œå› ä¸ºJVMéœ€è¦ç”Ÿæˆå’ŒåŠ è½½è°ƒç”¨ç«™ç‚¹(call site)
   - æ¶‰åŠinvokedynamicæŒ‡ä»¤å’Œæ–¹æ³•å¥æŸ„çš„åˆå§‹åŒ–
  
2. **åç»­è°ƒç”¨**ï¼š
   - ç»è¿‡JITç¼–è¯‘åï¼Œæ€§èƒ½æ¥è¿‘æˆ–ç­‰åŒäºæ™®é€šæ–¹æ³•è°ƒç”¨
   - HotSpot JVMå¯ä»¥å†…è”ç®€å•çš„Lambdaï¼Œæ¶ˆé™¤è°ƒç”¨å¼€é”€
   
3. **ä¸åŒ¿åå†…éƒ¨ç±»å¯¹æ¯”**ï¼š
   - Lambdaä¸ä¼šç”Ÿæˆé¢å¤–çš„ç±»æ–‡ä»¶ï¼Œå‡å°‘ç±»åŠ è½½æ—¶é—´
   - å†…å­˜å ç”¨æ›´ä½ï¼Œä¸éœ€è¦ä¸ºæ¯ä¸ªLambdaåˆ›å»ºæ–°çš„å¯¹è±¡
   
4. **å¹¶è¡Œæµé™·é˜±**ï¼š
   - å°æ•°æ®é›†ä¸Šä½¿ç”¨å¹¶è¡Œæµå¯èƒ½å› çº¿ç¨‹è°ƒåº¦å¼€é”€å¯¼è‡´æ€§èƒ½ä¸‹é™
   - æ‹†è£…ç®±æ“ä½œå¯èƒ½æˆä¸ºæ€§èƒ½ç“¶é¢ˆ

æœ€ä½³å®è·µï¼š
- é¢„å®šä¹‰é‡ç”¨é¢‘ç¹ä½¿ç”¨çš„Lambda
- ä½¿ç”¨åŸºæœ¬ç±»å‹ç‰¹åŒ–çš„æ¥å£(IntFunctionç­‰)é¿å…æ‹†è£…ç®±
- æ•°æ®é‡å¤§ä¸”æ¯é¡¹å¤„ç†å¤æ‚æ—¶æ‰è€ƒè™‘å¹¶è¡Œæµ

### 11.10 å¦‚ä½•å®ç°è‡ªå®šä¹‰å‡½æ•°å¼æ¥å£ï¼Ÿè®¾è®¡æ—¶åº”æ³¨æ„ä»€ä¹ˆï¼Ÿ

**ç­”æ¡ˆï¼š** è‡ªå®šä¹‰å‡½æ•°å¼æ¥å£çš„æ­¥éª¤å’Œæ³¨æ„äº‹é¡¹ï¼š

1. **æ¥å£å®šä¹‰**ï¼š
```java
@FunctionalInterface
public interface StringProcessor {
    String process(String input);
}
```

2. **è®¾è®¡æ³¨æ„äº‹é¡¹**ï¼š
   - ä½¿ç”¨`@FunctionalInterface`æ³¨è§£ï¼ˆéå¿…é¡»ä½†æ¨èï¼‰
   - ç¡®ä¿åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼ˆå¯ä»¥æœ‰å¤šä¸ªé»˜è®¤æ–¹æ³•æˆ–é™æ€æ–¹æ³•ï¼‰
   - æ–¹æ³•ç­¾ååº”æ¸…æ™°è¡¨è¾¾åŠŸèƒ½æ„å›¾
   - è€ƒè™‘å‚æ•°å’Œè¿”å›ç±»å‹çš„é€šç”¨æ€§
   - è€ƒè™‘æ˜¯å¦éœ€è¦æŠ›å‡ºå—æ£€å¼‚å¸¸
   
3. **æ‰©å±•åŠŸèƒ½**ï¼šé€šè¿‡é»˜è®¤æ–¹æ³•å¢å¼ºåŠŸèƒ½
```java
@FunctionalInterface
public interface StringProcessor {
    String process(String input);
    
    default StringProcessor andThen(StringProcessor after) {
        return input -> after.process(this.process(input));
    }
    
    static StringProcessor identity() {
        return s -> s;
    }
}
```

4. **ä½¿ç”¨èŒƒä¾‹**ï¼š
```java
StringProcessor toUpperCase = String::toUpperCase;
StringProcessor addPrefix = s -> "Prefix: " + s;
StringProcessor combined = toUpperCase.andThen(addPrefix);

String result = combined.process("hello"); // "Prefix: HELLO"
``` 