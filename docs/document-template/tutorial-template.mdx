---
sidebar_position: 4
title: æ•™ç¨‹æ–‡æ¡£æ¨¡æ¿
description: åˆ†æ­¥æ•™ç¨‹ã€å¿«é€Ÿå…¥é—¨ã€å®æˆ˜æ¡ˆä¾‹ç­‰æ•™å­¦æ–‡æ¡£çš„æ ‡å‡†æ¨¡æ¿
tags: [æ¨¡æ¿, æ•™ç¨‹, å¿«é€Ÿå…¥é—¨, å®æˆ˜]
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# [æŠ€æœ¯/åŠŸèƒ½] å®Œæ•´æ•™ç¨‹

> **éš¾åº¦çº§åˆ«**ï¼šâ˜…â˜…â˜…â˜†â˜† (åˆçº§/ä¸­çº§/é«˜çº§)  
> **é¢„è®¡æ—¶é—´**ï¼š30åˆ†é’Ÿ  
> **æ›´æ–°æ—¥æœŸ**ï¼š2025-01-20  
> **ä½œè€…**ï¼š[ä½œè€…å§“å]

---

## æ•™ç¨‹ç›®æ ‡

å®Œæˆæœ¬æ•™ç¨‹åï¼Œä½ å°†å­¦ä¼šï¼š

- ç›®æ ‡ 1ï¼šæŒæ¡æ ¸å¿ƒæ¦‚å¿µ
- ç›®æ ‡ 2ï¼šå®Œæˆå®é™…é¡¹ç›®
- ç›®æ ‡ 3ï¼šç†è§£æœ€ä½³å®è·µ
- ç›®æ ‡ 4ï¼šèƒ½å¤Ÿç‹¬ç«‹å¼€å‘

---

## å‡†å¤‡å·¥ä½œ

### å‰ç½®çŸ¥è¯†

åœ¨å¼€å§‹æœ¬æ•™ç¨‹å‰ï¼Œä½ éœ€è¦äº†è§£ï¼š

- JavaScriptåŸºç¡€çŸ¥è¯†
- Node.jsåŸºæœ¬ä½¿ç”¨
- å‘½ä»¤è¡Œæ“ä½œ

### ç¯å¢ƒå‡†å¤‡

| è½¯ä»¶ | ç‰ˆæœ¬ | ä¸‹è½½é“¾æ¥ |
|------|------|---------|
| Node.js | 18+ | [nodejs.org](https://nodejs.org/) |
| VS Code | æœ€æ–°ç‰ˆ | [code.visualstudio.com](https://code.visualstudio.com/) |
| Git | 2.0+ | [git-scm.com](https://git-scm.com/) |

---

## ç¬¬ä¸€æ­¥ï¼šé¡¹ç›®åˆå§‹åŒ–

### 1.1 åˆ›å»ºé¡¹ç›®ç›®å½•

```bash
# åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹
mkdir my-awesome-project
cd my-awesome-project

# åˆå§‹åŒ–Gitä»“åº“
git init

# åˆå§‹åŒ–npmé¡¹ç›®
npm init -y
```

:::tip ğŸ’¡ å°è´´å£«
ä½¿ç”¨ `npm init -y` å¯ä»¥å¿«é€Ÿåˆ›å»º package.jsonï¼Œè·³è¿‡äº¤äº’å¼æé—®ã€‚
:::

### 1.2 å®‰è£…ä¾èµ–

<Tabs>
  <TabItem value="npm" label="npm" default>
    ```bash
    npm install express mongoose dotenv
    npm install --save-dev nodemon
    ```
  </TabItem>
  <TabItem value="yarn" label="Yarn">
    ```bash
    yarn add express mongoose dotenv
    yarn add -D nodemon
    ```
  </TabItem>
  <TabItem value="pnpm" label="pnpm">
    ```bash
    pnpm add express mongoose dotenv
    pnpm add -D nodemon
    ```
  </TabItem>
</Tabs>

### 1.3 é¡¹ç›®ç»“æ„

åˆ›å»ºä»¥ä¸‹ç›®å½•ç»“æ„ï¼š

```
my-awesome-project/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ routes/
â”‚   â””â”€â”€ index.js
â”œâ”€â”€ .env
â”œâ”€â”€ .gitignore
â””â”€â”€ package.json
```

```bash
# åˆ›å»ºç›®å½•
mkdir -p src/{controllers,models,routes}

# åˆ›å»ºæ–‡ä»¶
touch src/index.js .env .gitignore
```

---

## ç¬¬äºŒæ­¥ï¼šç¼–å†™æ ¸å¿ƒä»£ç 

### 2.1 åˆ›å»ºæœåŠ¡å™¨

åœ¨ `src/index.js` ä¸­ç¼–å†™ä»£ç ï¼š

```javascript title="src/index.js" {3-5,8-10}
const express = require('express');
const app = express();
// highlight-next-line
const PORT = process.env.PORT || 3000;

// ä¸­é—´ä»¶é…ç½®
app.use(express.json());
// highlight-start
app.use(express.urlencoded({ extended: true }));
// highlight-end

// å¥åº·æ£€æŸ¥æ¥å£
app.get('/health', (req, res) => {
  res.json({ status: 'OK', timestamp: new Date().toISOString() });
});

// å¯åŠ¨æœåŠ¡å™¨
app.listen(PORT, () => {
  console.log(`Server is running on http://localhost:${PORT}`);
});
```

:::note ä»£ç è¯´æ˜
- ç¬¬3-5è¡Œï¼šå®šä¹‰æœåŠ¡å™¨ç«¯å£
- ç¬¬8-10è¡Œï¼šé…ç½®ä¸­é—´ä»¶ï¼Œæ”¯æŒJSONå’ŒURLç¼–ç 
:::

### 2.2 åˆ›å»ºæ•°æ®æ¨¡å‹

```javascript title="src/models/User.js"
const mongoose = require('mongoose');

const userSchema = new mongoose.Schema({
  username: {
    type: String,
    required: true,
    unique: true,
    trim: true,
    minlength: 3,
    maxlength: 20
  },
  email: {
    type: String,
    required: true,
    unique: true,
    lowercase: true,
    match: /^\S+@\S+\.\S+$/
  },
  password: {
    type: String,
    required: true,
    minlength: 6
  },
  createdAt: {
    type: Date,
    default: Date.now
  }
});

module.exports = mongoose.model('User', userSchema);
```

---

## ç¬¬ä¸‰æ­¥ï¼šå®ç°ä¸šåŠ¡é€»è¾‘

### 3.1 ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½

```mermaid
graph LR
    A[ç”¨æˆ·è¾“å…¥] --> B{éªŒè¯æ•°æ®}
    B -->|æ— æ•ˆ| C[è¿”å›é”™è¯¯]
    B -->|æœ‰æ•ˆ| D{æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å­˜åœ¨}
    D -->|å­˜åœ¨| E[è¿”å›ç”¨æˆ·å·²å­˜åœ¨]
    D -->|ä¸å­˜åœ¨| F[åŠ å¯†å¯†ç ]
    F --> G[ä¿å­˜åˆ°æ•°æ®åº“]
    G --> H[è¿”å›æˆåŠŸ]
```

```javascript title="src/controllers/userController.js"
const User = require('../models/User');
const bcrypt = require('bcryptjs');

exports.register = async (req, res) => {
  try {
    const { username, email, password } = req.body;
    
    // 1. éªŒè¯è¾“å…¥
    if (!username || !email || !password) {
      return res.status(400).json({
        success: false,
        message: 'è¯·å¡«å†™å®Œæ•´ä¿¡æ¯'
      });
    }
    
    // 2. æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²å­˜åœ¨
    const existingUser = await User.findOne({ 
      $or: [{ email }, { username }] 
    });
    
    if (existingUser) {
      return res.status(409).json({
        success: false,
        message: 'ç”¨æˆ·åæˆ–é‚®ç®±å·²è¢«æ³¨å†Œ'
      });
    }
    
    // 3. åŠ å¯†å¯†ç 
    const hashedPassword = await bcrypt.hash(password, 10);
    
    // 4. åˆ›å»ºç”¨æˆ·
    const newUser = new User({
      username,
      email,
      password: hashedPassword
    });
    
    await newUser.save();
    
    // 5. è¿”å›æˆåŠŸå“åº”ï¼ˆä¸è¿”å›å¯†ç ï¼‰
    res.status(201).json({
      success: true,
      message: 'æ³¨å†ŒæˆåŠŸ',
      data: {
        id: newUser._id,
        username: newUser.username,
        email: newUser.email
      }
    });
    
  } catch (error) {
    console.error('æ³¨å†Œé”™è¯¯:', error);
    res.status(500).json({
      success: false,
      message: 'æœåŠ¡å™¨é”™è¯¯'
    });
  }
};
```

---

## ç¬¬å››æ­¥ï¼šæµ‹è¯•åŠŸèƒ½

### 4.1 å¯åŠ¨æœåŠ¡å™¨

```bash
# å¼€å‘æ¨¡å¼ï¼ˆè‡ªåŠ¨é‡å¯ï¼‰
npm run dev

# æˆ–ä½¿ç”¨ nodemon
nodemon src/index.js
```

### 4.2 æµ‹è¯•API

ä½¿ç”¨cURLæµ‹è¯•æ³¨å†Œæ¥å£ï¼š

```bash
curl -X POST http://localhost:3000/api/register \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "email": "test@example.com",
    "password": "password123"
  }'
```

é¢„æœŸå“åº”ï¼š

```json
{
  "success": true,
  "message": "æ³¨å†ŒæˆåŠŸ",
  "data": {
    "id": "507f1f77bcf86cd799439011",
    "username": "testuser",
    "email": "test@example.com"
  }
}
```

---

## ç¬¬äº”æ­¥ï¼šä¼˜åŒ–ä¸éƒ¨ç½²

### 5.1 æ·»åŠ ç¯å¢ƒå˜é‡

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```env title=".env"
PORT=3000
MONGODB_URI=mongodb://localhost:27017/myapp
JWT_SECRET=your-super-secret-key
NODE_ENV=development
```

:::warning âš ï¸ å®‰å…¨æç¤º
æ°¸è¿œä¸è¦å°† `.env` æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ï¼è¯·å°†å®ƒæ·»åŠ åˆ° `.gitignore`ã€‚
:::

### 5.2 æ·»åŠ é”™è¯¯å¤„ç†

```javascript title="src/middleware/errorHandler.js"
module.exports = (err, req, res, next) => {
  console.error(err.stack);
  
  res.status(err.status || 500).json({
    success: false,
    message: err.message || 'æœåŠ¡å™¨é”™è¯¯',
    ...(process.env.NODE_ENV === 'development' && {
      stack: err.stack
    })
  });
};
```

### 5.3 DockeråŒ–éƒ¨ç½²

```dockerfile title="Dockerfile"
FROM node:18-alpine

WORKDIR /app

COPY package*.json ./
RUN npm ci --only=production

COPY . .

EXPOSE 3000

CMD ["node", "src/index.js"]
```

---

## æ€»ç»“

æ­å–œä½ å®Œæˆäº†æœ¬æ•™ç¨‹ï¼ä½ å·²ç»å­¦ä¼šäº†ï¼š

- å¦‚ä½•æ­å»ºNode.jsé¡¹ç›®
- å¦‚ä½•ä½¿ç”¨Expressåˆ›å»ºAPI
- å¦‚ä½•ä½¿ç”¨MongoDBå­˜å‚¨æ•°æ®
- å¦‚ä½•å®ç°ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½
- å¦‚ä½•æµ‹è¯•å’Œéƒ¨ç½²åº”ç”¨

---

## æ‰©å±•é˜…è¯»

### è¿›é˜¶ä¸»é¢˜

1. **å®‰å…¨æ€§å¢å¼º**
   - å®ç°JWTè®¤è¯
   - æ·»åŠ è¯·æ±‚é™æµ
   - é˜²æ­¢SQLæ³¨å…¥

2. **æ€§èƒ½ä¼˜åŒ–**
   - æ·»åŠ Redisç¼“å­˜
   - æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–
   - ä½¿ç”¨PM2è¿›è¡Œè¿›ç¨‹ç®¡ç†

3. **æµ‹è¯•**
   - å•å…ƒæµ‹è¯•ï¼ˆJestï¼‰
   - é›†æˆæµ‹è¯•ï¼ˆSupertestï¼‰
   - ç«¯åˆ°ç«¯æµ‹è¯•

### ç›¸å…³èµ„æº

- [Expresså®˜æ–¹æ–‡æ¡£](https://expressjs.com/)
- [Mongooseæ–‡æ¡£](https://mongoosejs.com/)
- [Node.jsæœ€ä½³å®è·µ](https://github.com/goldbergyoni/nodebestpractices)

---

## ğŸ’¬ ç»ƒä¹ é¢˜

### ç»ƒä¹ 1ï¼šæ·»åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½

å®ç°ç”¨æˆ·ç™»å½•æ¥å£ï¼Œè¦æ±‚ï¼š
- éªŒè¯ç”¨æˆ·åå’Œå¯†ç 
- è¿”å›JWT token
- å¤„ç†é”™è¯¯æƒ…å†µ

### ç»ƒä¹ 2ï¼šå®ç°å¯†ç é‡ç½®

åˆ›å»ºå¯†ç é‡ç½®æµç¨‹ï¼š
- å‘é€é‡ç½®é‚®ä»¶
- éªŒè¯é‡ç½®ä»¤ç‰Œ
- æ›´æ–°ç”¨æˆ·å¯†ç 

---

## å¸¸è§é—®é¢˜

### Q1: è¿æ¥MongoDBå¤±è´¥

**é—®é¢˜**ï¼š`MongoNetworkError: connection refused`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥MongoDBæ˜¯å¦è¿è¡Œ
mongod --version

# å¯åŠ¨MongoDB
# Windows
net start MongoDB

# Linux/Mac
sudo systemctl start mongod
```

### Q2: ç«¯å£è¢«å ç”¨

**é—®é¢˜**ï¼š`Error: listen EADDRINUSE: address already in use :::3000`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
# Windows
netstat -ano | findstr :3000

# Linux/Mac
lsof -i :3000

# ç»ˆæ­¢è¿›ç¨‹æˆ–æ›´æ¢ç«¯å£
```

---

## ğŸ¤ åé¦ˆä¸è´¡çŒ®

å¦‚æœä½ å‘ç°æ•™ç¨‹ä¸­çš„é—®é¢˜ï¼Œæˆ–æœ‰æ”¹è¿›å»ºè®®ï¼Œæ¬¢è¿ï¼š

- ğŸ“§ å‘é€é‚®ä»¶åˆ°ï¼štutorial@example.com
- ğŸ’¬ åœ¨GitHubæIssue
- ğŸŒŸ ç»™æˆ‘ä»¬çš„é¡¹ç›®åŠ æ˜Ÿ

---

:::tip ğŸ‰ æ­å–œï¼
ä½ å·²ç»å®Œæˆäº†æ•´ä¸ªæ•™ç¨‹ï¼ç°åœ¨è¯•ç€è‡ªå·±æ„å»ºä¸€ä¸ªå®Œæ•´çš„åº”ç”¨å§ï¼
:::

