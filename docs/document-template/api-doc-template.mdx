---
sidebar_position: 3
title: APIæ¥å£æ–‡æ¡£æ¨¡æ¿
description: RESTful APIã€GraphQLç­‰æ¥å£æ–‡æ¡£çš„æ ‡å‡†æ¨¡æ¿
tags: [æ¨¡æ¿, APIæ–‡æ¡£, RESTful, æ¥å£è®¾è®¡]
---

import ComparisonTable from '@site/src/components/ComparisonTable';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# [é¡¹ç›®åç§°] API æ¥å£æ–‡æ¡£

> **APIç‰ˆæœ¬**ï¼šv1.0.0  
> **BaseURL**ï¼š`https://api.example.com/v1`  
> **æœ€åæ›´æ–°**ï¼š2025-01-20  
> **ç»´æŠ¤äºº**ï¼š[APIå›¢é˜Ÿ]

---

## æ–‡æ¡£è¯´æ˜

:::info ä½¿ç”¨è¯´æ˜
è¿™æ˜¯ä¸€ä¸ªAPIæ¥å£æ–‡æ¡£æ¨¡æ¿ï¼Œé€‚ç”¨äºRESTful APIã€GraphQLç­‰æ¥å£æ–‡æ¡£çš„ç¼–å†™ã€‚
åŒ…å«å®Œæ•´çš„æ¥å£å®šä¹‰ã€è¯·æ±‚ç¤ºä¾‹ã€å“åº”æ ¼å¼ç­‰å†…å®¹ã€‚
:::

---

## ä¸€ã€æ¥å£æ¦‚è§ˆ

### 1.1 åŸºæœ¬ä¿¡æ¯

| é¡¹ç›® | è¯´æ˜ |
|------|------|
| **åè®®** | HTTPS |
| **è¯·æ±‚æ ¼å¼** | JSON |
| **å“åº”æ ¼å¼** | JSON |
| **å­—ç¬¦ç¼–ç ** | UTF-8 |
| **è®¤è¯æ–¹å¼** | JWT Bearer Token |

### 1.2 æ¥å£åˆ—è¡¨

<ComparisonTable
  caption="APIæ¥å£æ€»è§ˆ"
  headers={['åˆ†ç±»', 'æ¥å£æ•°é‡', 'è®¤è¯è¦æ±‚', 'é™æµç­–ç•¥']}
  rows={[
    ['ç”¨æˆ·ç®¡ç†', '8ä¸ª', 'å¿…éœ€', '100æ¬¡/åˆ†é’Ÿ'],
    ['è®¢å•ç®¡ç†', '12ä¸ª', 'å¿…éœ€', '200æ¬¡/åˆ†é’Ÿ'],
    ['å•†å“ç®¡ç†', '10ä¸ª', 'éƒ¨åˆ†å¿…éœ€', '1000æ¬¡/åˆ†é’Ÿ'],
    ['æ”¯ä»˜æ¥å£', '6ä¸ª', 'å¿…éœ€', '50æ¬¡/åˆ†é’Ÿ'],
    ['ç³»ç»Ÿæ¥å£', '4ä¸ª', 'ä¸éœ€è¦', 'æ— é™åˆ¶']
  ]}
/>

---

## äºŒã€é€šç”¨è§„èŒƒ

### 2.1 è¯·æ±‚æ ¼å¼

**è¯·æ±‚å¤´ï¼ˆHeadersï¼‰**ï¼š

```http
Content-Type: application/json
Authorization: Bearer {access_token}
X-Request-ID: {unique_request_id}
Accept-Language: zh-CN
```

**é€šç”¨å‚æ•°**ï¼š

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| `timestamp` | long | å¦ | è¯·æ±‚æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰ |
| `sign` | string | å¦ | ç­¾åï¼ˆéƒ¨åˆ†æ¥å£éœ€è¦ï¼‰ |

### 2.2 å“åº”æ ¼å¼

**æˆåŠŸå“åº”**ï¼š

```json
{
  "code": 200,
  "message": "Success",
  "data": {
    // å…·ä½“æ•°æ®
  },
  "timestamp": 1706227200000,
  "requestId": "req_1234567890"
}
```

**é”™è¯¯å“åº”**ï¼š

```json
{
  "code": 400,
  "message": "å‚æ•°é”™è¯¯",
  "error": {
    "field": "email",
    "reason": "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"
  },
  "timestamp": 1706227200000,
  "requestId": "req_1234567890"
}
```

### 2.3 çŠ¶æ€ç 

<ComparisonTable
  caption="HTTPçŠ¶æ€ç è¯´æ˜"
  headers={['çŠ¶æ€ç ', 'è¯´æ˜', 'å¸¸è§åŸå› ']}
  rows={[
    ['200', 'OK - è¯·æ±‚æˆåŠŸ', 'æ­£å¸¸è¿”å›'],
    ['201', 'Created - åˆ›å»ºæˆåŠŸ', 'èµ„æºåˆ›å»ºæˆåŠŸ'],
    ['400', 'Bad Request - è¯·æ±‚é”™è¯¯', 'å‚æ•°æ ¼å¼é”™è¯¯'],
    ['401', 'Unauthorized - æœªæˆæƒ', 'Tokenæ— æ•ˆæˆ–è¿‡æœŸ'],
    ['403', 'Forbidden - ç¦æ­¢è®¿é—®', 'æƒé™ä¸è¶³'],
    ['404', 'Not Found - èµ„æºä¸å­˜åœ¨', 'è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨'],
    ['429', 'Too Many Requests - è¯·æ±‚è¿‡å¤š', 'è¶…è¿‡é™æµé˜ˆå€¼'],
    ['500', 'Internal Server Error - æœåŠ¡å™¨é”™è¯¯', 'æœåŠ¡å™¨å†…éƒ¨å¼‚å¸¸']
  ]}
/>

### 2.4 ä¸šåŠ¡çŠ¶æ€ç 

| Code | Message | è¯´æ˜ |
|------|---------|------|
| `1000` | æˆåŠŸ | è¯·æ±‚å¤„ç†æˆåŠŸ |
| `1001` | å‚æ•°é”™è¯¯ | è¯·æ±‚å‚æ•°ä¸æ­£ç¡® |
| `1002` | è®¤è¯å¤±è´¥ | Tokenæ— æ•ˆæˆ–è¿‡æœŸ |
| `1003` | æƒé™ä¸è¶³ | æ— æƒé™è®¿é—®è¯¥èµ„æº |
| `1004` | èµ„æºä¸å­˜åœ¨ | è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ |
| `1005` | æ“ä½œå¤±è´¥ | ä¸šåŠ¡æ“ä½œå¤±è´¥ |
| `1006` | é‡å¤æ“ä½œ | èµ„æºå·²å­˜åœ¨æˆ–é‡å¤æ“ä½œ |
| `1007` | é™æµé™åˆ¶ | è¯·æ±‚é¢‘ç‡è¶…è¿‡é™åˆ¶ |

---

## ä¸‰ã€è®¤è¯æˆæƒ

### 3.1 è·å–Token

**æ¥å£åœ°å€**ï¼š`POST /auth/login`

**è¯·æ±‚å‚æ•°**ï¼š

```json
{
  "username": "user@example.com",
  "password": "P@ssw0rd123",
  "grant_type": "password"
}
```

**å“åº”ç¤ºä¾‹**ï¼š

```json
{
  "code": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "token_type": "Bearer",
    "expires_in": 7200,
    "user": {
      "id": 12345,
      "username": "user@example.com",
      "nickname": "å¼ ä¸‰",
      "avatar": "https://cdn.example.com/avatar/12345.jpg"
    }
  }
}
```

### 3.2 åˆ·æ–°Token

**æ¥å£åœ°å€**ï¼š`POST /auth/refresh`

**è¯·æ±‚å‚æ•°**ï¼š

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| `refresh_token` | string | æ˜¯ | åˆ·æ–°ä»¤ç‰Œ |

**å“åº”ç¤ºä¾‹**ï¼š

```json
{
  "code": 200,
  "message": "Tokenåˆ·æ–°æˆåŠŸ",
  "data": {
    "access_token": "æ–°çš„è®¿é—®ä»¤ç‰Œ",
    "expires_in": 7200
  }
}
```

### 3.3 Tokenä½¿ç”¨

åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦Tokenï¼š

```http
GET /api/users/profile HTTP/1.1
Host: api.example.com
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
Content-Type: application/json
```

---

## å››ã€ç”¨æˆ·ç®¡ç†æ¥å£

### 4.1 ç”¨æˆ·æ³¨å†Œ

**æ¥å£è¯´æ˜**ï¼šç”¨æˆ·é€šè¿‡é‚®ç®±æ³¨å†Œæ–°è´¦å·

**è¯·æ±‚æ–¹å¼**ï¼š`POST`

**æ¥å£åœ°å€**ï¼š`/users/register`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šå¦

**è¯·æ±‚å‚æ•°**ï¼š

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| `email` | string | æ˜¯ | é‚®ç®±åœ°å€ | user@example.com |
| `password` | string | æ˜¯ | å¯†ç ï¼ˆ8-20ä½ï¼ŒåŒ…å«å­—æ¯å’Œæ•°å­—ï¼‰ | P@ssw0rd123 |
| `username` | string | æ˜¯ | ç”¨æˆ·åï¼ˆ3-20ä½ï¼‰ | zhangsan |
| `phone` | string | å¦ | æ‰‹æœºå· | 13800138000 |
| `captcha` | string | æ˜¯ | éªŒè¯ç  | 1234 |

**è¯·æ±‚ç¤ºä¾‹**ï¼š

<Tabs>
  <TabItem value="curl" label="cURL" default>
    ```bash
    curl -X POST "https://api.example.com/v1/users/register" \
      -H "Content-Type: application/json" \
      -d '{
        "email": "user@example.com",
        "password": "P@ssw0rd123",
        "username": "zhangsan",
        "phone": "13800138000",
        "captcha": "1234"
      }'
    ```
  </TabItem>
  <TabItem value="javascript" label="JavaScript">
    ```javascript
    const response = await fetch('https://api.example.com/v1/users/register', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        email: 'user@example.com',
        password: 'P@ssw0rd123',
        username: 'zhangsan',
        phone: '13800138000',
        captcha: '1234'
      })
    });
    
    const data = await response.json();
    console.log(data);
    ```
  </TabItem>
  <TabItem value="python" label="Python">
    ```python
    import requests
    
    url = "https://api.example.com/v1/users/register"
    payload = {
        "email": "user@example.com",
        "password": "P@ssw0rd123",
        "username": "zhangsan",
        "phone": "13800138000",
        "captcha": "1234"
    }
    
    response = requests.post(url, json=payload)
    print(response.json())
    ```
  </TabItem>
  <TabItem value="java" label="Java">
    ```java
    OkHttpClient client = new OkHttpClient();
    
    String json = "{\"email\":\"user@example.com\"," +
                  "\"password\":\"P@ssw0rd123\"," +
                  "\"username\":\"zhangsan\"," +
                  "\"phone\":\"13800138000\"," +
                  "\"captcha\":\"1234\"}";
    
    RequestBody body = RequestBody.create(
        json, MediaType.parse("application/json"));
    
    Request request = new Request.Builder()
        .url("https://api.example.com/v1/users/register")
        .post(body)
        .build();
    
    Response response = client.newCall(request).execute();
    System.out.println(response.body().string());
    ```
  </TabItem>
</Tabs>

**å“åº”ç¤ºä¾‹**ï¼š

```json
{
  "code": 200,
  "message": "æ³¨å†ŒæˆåŠŸ",
  "data": {
    "userId": 12345,
    "email": "user@example.com",
    "username": "zhangsan",
    "createdAt": "2025-01-20T10:30:00Z"
  }
}
```

**é”™è¯¯å“åº”**ï¼š

```json
{
  "code": 1001,
  "message": "å‚æ•°é”™è¯¯",
  "error": {
    "field": "email",
    "reason": "é‚®ç®±å·²è¢«æ³¨å†Œ"
  }
}
```

---

### 4.2 è·å–ç”¨æˆ·ä¿¡æ¯

**æ¥å£è¯´æ˜**ï¼šè·å–å½“å‰ç™»å½•ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯

**è¯·æ±‚æ–¹å¼**ï¼š`GET`

**æ¥å£åœ°å€**ï¼š`/users/profile`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯ï¼ˆéœ€è¦Bearer Tokenï¼‰

**è¯·æ±‚å‚æ•°**ï¼šæ— 

**è¯·æ±‚ç¤ºä¾‹**ï¼š

```bash
curl -X GET "https://api.example.com/v1/users/profile" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

**å“åº”ç¤ºä¾‹**ï¼š

```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "userId": 12345,
    "username": "zhangsan",
    "email": "user@example.com",
    "phone": "13800138000",
    "avatar": "https://cdn.example.com/avatar/12345.jpg",
    "nickname": "å¼ ä¸‰",
    "gender": "male",
    "birthday": "1990-01-01",
    "address": {
      "province": "åŒ—äº¬å¸‚",
      "city": "åŒ—äº¬å¸‚",
      "district": "æœé˜³åŒº",
      "detail": "xxxè¡—é“xxxå·"
    },
    "status": "active",
    "role": "user",
    "createdAt": "2024-01-01T00:00:00Z",
    "lastLoginAt": "2025-01-20T10:00:00Z"
  }
}
```

---

### 4.3 æ›´æ–°ç”¨æˆ·ä¿¡æ¯

**æ¥å£è¯´æ˜**ï¼šæ›´æ–°å½“å‰ç™»å½•ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯

**è¯·æ±‚æ–¹å¼**ï¼š`PUT`

**æ¥å£åœ°å€**ï¼š`/users/profile`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯ï¼ˆéœ€è¦Bearer Tokenï¼‰

**è¯·æ±‚å‚æ•°**ï¼š

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| `nickname` | string | å¦ | æ˜µç§° |
| `avatar` | string | å¦ | å¤´åƒURL |
| `gender` | string | å¦ | æ€§åˆ«ï¼šmale/female/other |
| `birthday` | string | å¦ | ç”Ÿæ—¥ï¼ˆYYYY-MM-DDï¼‰ |
| `address` | object | å¦ | åœ°å€ä¿¡æ¯ |

**è¯·æ±‚ç¤ºä¾‹**ï¼š

```json
{
  "nickname": "å¼ ä¸‰ä¸°",
  "avatar": "https://cdn.example.com/avatar/new.jpg",
  "gender": "male",
  "birthday": "1990-01-01",
  "address": {
    "province": "åŒ—äº¬å¸‚",
    "city": "åŒ—äº¬å¸‚",
    "district": "æµ·æ·€åŒº",
    "detail": "ä¸­å…³æ‘å¤§è¡—1å·"
  }
}
```

**å“åº”ç¤ºä¾‹**ï¼š

```json
{
  "code": 200,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": {
    "userId": 12345,
    "nickname": "å¼ ä¸‰ä¸°",
    "avatar": "https://cdn.example.com/avatar/new.jpg",
    "updatedAt": "2025-01-20T11:00:00Z"
  }
}
```

---

## äº”ã€è®¢å•ç®¡ç†æ¥å£

### 5.1 åˆ›å»ºè®¢å•

**æ¥å£è¯´æ˜**ï¼šç”¨æˆ·åˆ›å»ºæ–°è®¢å•

**è¯·æ±‚æ–¹å¼**ï¼š`POST`

**æ¥å£åœ°å€**ï¼š`/orders`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯ï¼ˆéœ€è¦Bearer Tokenï¼‰

**ä¸šåŠ¡æµç¨‹**ï¼š

```mermaid
sequenceDiagram
    participant Client as å®¢æˆ·ç«¯
    participant API as APIæœåŠ¡
    participant Order as è®¢å•æœåŠ¡
    participant Stock as åº“å­˜æœåŠ¡
    participant Payment as æ”¯ä»˜æœåŠ¡
    
    Client->>API: åˆ›å»ºè®¢å•è¯·æ±‚
    API->>Order: éªŒè¯è®¢å•ä¿¡æ¯
    Order->>Stock: é”å®šåº“å­˜
    
    alt åº“å­˜å……è¶³
        Stock-->>Order: åº“å­˜é”å®šæˆåŠŸ
        Order->>Order: ç”Ÿæˆè®¢å•å·
        Order->>Payment: åˆ›å»ºæ”¯ä»˜å•
        Payment-->>Order: æ”¯ä»˜å•åˆ›å»ºæˆåŠŸ
        Order-->>API: è®¢å•åˆ›å»ºæˆåŠŸ
        API-->>Client: è¿”å›è®¢å•ä¿¡æ¯
    else åº“å­˜ä¸è¶³
        Stock-->>Order: åº“å­˜ä¸è¶³
        Order-->>API: åˆ›å»ºå¤±è´¥
        API-->>Client: è¿”å›é”™è¯¯ä¿¡æ¯
    end
```

**è¯·æ±‚å‚æ•°**ï¼š

```json
{
  "items": [
    {
      "productId": 10001,
      "quantity": 2,
      "price": 99.99
    },
    {
      "productId": 10002,
      "quantity": 1,
      "price": 199.99
    }
  ],
  "shippingAddress": {
    "province": "åŒ—äº¬å¸‚",
    "city": "åŒ—äº¬å¸‚",
    "district": "æœé˜³åŒº",
    "detail": "xxxè¡—é“xxxå·",
    "recipient": "å¼ ä¸‰",
    "phone": "13800138000"
  },
  "remark": "è¯·å°½å¿«å‘è´§",
  "couponCode": "DISCOUNT2025"
}
```

**å“åº”ç¤ºä¾‹**ï¼š

```json
{
  "code": 200,
  "message": "è®¢å•åˆ›å»ºæˆåŠŸ",
  "data": {
    "orderId": "ORD202501200001",
    "orderNo": "20250120000000001",
    "status": "pending_payment",
    "totalAmount": 399.97,
    "discountAmount": 40.00,
    "payableAmount": 359.97,
    "items": [
      {
        "productId": 10001,
        "productName": "å•†å“A",
        "quantity": 2,
        "price": 99.99,
        "subtotal": 199.98
      },
      {
        "productId": 10002,
        "productName": "å•†å“B",
        "quantity": 1,
        "price": 199.99,
        "subtotal": 199.99
      }
    ],
    "shippingAddress": {
      "province": "åŒ—äº¬å¸‚",
      "city": "åŒ—äº¬å¸‚",
      "district": "æœé˜³åŒº",
      "detail": "xxxè¡—é“xxxå·",
      "recipient": "å¼ ä¸‰",
      "phone": "13800138000"
    },
    "paymentInfo": {
      "paymentId": "PAY202501200001",
      "paymentUrl": "https://pay.example.com/pay/123456",
      "qrCode": "https://cdn.example.com/qr/123456.png",
      "expiresAt": "2025-01-20T12:00:00Z"
    },
    "createdAt": "2025-01-20T11:30:00Z"
  }
}
```

---

### 5.2 æŸ¥è¯¢è®¢å•åˆ—è¡¨

**æ¥å£è¯´æ˜**ï¼šæŸ¥è¯¢å½“å‰ç”¨æˆ·çš„è®¢å•åˆ—è¡¨

**è¯·æ±‚æ–¹å¼**ï¼š`GET`

**æ¥å£åœ°å€**ï¼š`/orders`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯ï¼ˆéœ€è¦Bearer Tokenï¼‰

**è¯·æ±‚å‚æ•°**ï¼š

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|------|------|--------|
| `page` | int | å¦ | é¡µç ï¼ˆä»1å¼€å§‹ï¼‰ | 1 |
| `pageSize` | int | å¦ | æ¯é¡µæ•°é‡ï¼ˆ1-100ï¼‰ | 10 |
| `status` | string | å¦ | è®¢å•çŠ¶æ€ç­›é€‰ | all |
| `keyword` | string | å¦ | æœç´¢å…³é”®è¯ | - |
| `startDate` | string | å¦ | å¼€å§‹æ—¥æœŸ | - |
| `endDate` | string | å¦ | ç»“æŸæ—¥æœŸ | - |

**è®¢å•çŠ¶æ€å€¼**ï¼š

<ComparisonTable
  caption="è®¢å•çŠ¶æ€è¯´æ˜"
  headers={['çŠ¶æ€å€¼', 'ä¸­æ–‡åç§°', 'è¯´æ˜']}
  rows={[
    ['pending_payment', 'å¾…æ”¯ä»˜', 'è®¢å•å·²åˆ›å»ºï¼Œç­‰å¾…æ”¯ä»˜'],
    ['paid', 'å·²æ”¯ä»˜', 'æ”¯ä»˜å®Œæˆï¼Œç­‰å¾…å‘è´§'],
    ['shipped', 'å·²å‘è´§', 'å•†å“å·²å‘å‡ºï¼Œç­‰å¾…æ”¶è´§'],
    ['completed', 'å·²å®Œæˆ', 'è®¢å•å·²å®Œæˆ'],
    ['cancelled', 'å·²å–æ¶ˆ', 'è®¢å•å·²å–æ¶ˆ'],
    ['refunding', 'é€€æ¬¾ä¸­', 'æ­£åœ¨å¤„ç†é€€æ¬¾'],
    ['refunded', 'å·²é€€æ¬¾', 'é€€æ¬¾å·²å®Œæˆ']
  ]}
/>

**è¯·æ±‚ç¤ºä¾‹**ï¼š

```bash
curl -X GET "https://api.example.com/v1/orders?page=1&pageSize=10&status=paid" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

**å“åº”ç¤ºä¾‹**ï¼š

```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "list": [
      {
        "orderId": "ORD202501200001",
        "orderNo": "20250120000000001",
        "status": "paid",
        "statusText": "å·²æ”¯ä»˜",
        "totalAmount": 359.97,
        "itemCount": 3,
        "createdAt": "2025-01-20T11:30:00Z",
        "paidAt": "2025-01-20T11:35:00Z"
      }
    ],
    "pagination": {
      "page": 1,
      "pageSize": 10,
      "total": 45,
      "totalPages": 5
    }
  }
}
```

---

## å…­ã€åˆ†é¡µæŸ¥è¯¢è§„èŒƒ

### 6.1 è¯·æ±‚å‚æ•°

æ‰€æœ‰åˆ—è¡¨æŸ¥è¯¢æ¥å£ç»Ÿä¸€ä½¿ç”¨ä»¥ä¸‹åˆ†é¡µå‚æ•°ï¼š

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|------|------|--------|
| `page` | int | å¦ | é¡µç ï¼ˆä»1å¼€å§‹ï¼‰ | 1 |
| `pageSize` | int | å¦ | æ¯é¡µæ•°é‡ | 10 |
| `sortBy` | string | å¦ | æ’åºå­—æ®µ | - |
| `sortOrder` | string | å¦ | æ’åºæ–¹å‘ï¼šasc/desc | desc |

### 6.2 å“åº”æ ¼å¼

```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "list": [],
    "pagination": {
      "page": 1,
      "pageSize": 10,
      "total": 100,
      "totalPages": 10,
      "hasNext": true,
      "hasPrev": false
    }
  }
}
```

---

## ä¸ƒã€é”™è¯¯å¤„ç†

### 7.1 é”™è¯¯å“åº”æ ¼å¼

```json
{
  "code": 1001,
  "message": "å‚æ•°é”™è¯¯",
  "error": {
    "field": "email",
    "reason": "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®",
    "value": "invalid-email"
  },
  "timestamp": 1706227200000,
  "requestId": "req_1234567890",
  "path": "/users/register"
}
```

### 7.2 å¸¸è§é”™è¯¯ç 

| Code | Message | è§£å†³æ–¹æ¡ˆ |
|------|---------|---------|
| `1001` | å‚æ•°é”™è¯¯ | æ£€æŸ¥è¯·æ±‚å‚æ•°æ ¼å¼ |
| `1002` | Tokenæ— æ•ˆ | é‡æ–°ç™»å½•è·å–Token |
| `1003` | æƒé™ä¸è¶³ | è”ç³»ç®¡ç†å‘˜åˆ†é…æƒé™ |
| `1004` | èµ„æºä¸å­˜åœ¨ | æ£€æŸ¥èµ„æºIDæ˜¯å¦æ­£ç¡® |
| `1005` | æ“ä½œå¤±è´¥ | æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯ |
| `1006` | é‡å¤æ“ä½œ | é¿å…é‡å¤æäº¤ |
| `1007` | è¯·æ±‚é™æµ | é™ä½è¯·æ±‚é¢‘ç‡ |

---

## å…«ã€é™æµè¯´æ˜

### 8.1 é™æµç­–ç•¥

<ComparisonTable
  caption="æ¥å£é™æµé…ç½®"
  headers={['æ¥å£ç±»å‹', 'é™æµè§„åˆ™', 'è¶…é™åè¡Œä¸º']}
  rows={[
    ['ç™»å½•æ³¨å†Œ', '10æ¬¡/åˆ†é’Ÿ/IP', 'è¿”å›429çŠ¶æ€ç ï¼Œ60ç§’åé‡è¯•'],
    ['æŸ¥è¯¢æ¥å£', '100æ¬¡/åˆ†é’Ÿ/ç”¨æˆ·', 'è¿”å›429çŠ¶æ€ç ï¼Œ1åˆ†é’Ÿåé‡è¯•'],
    ['ä¿®æ”¹æ¥å£', '50æ¬¡/åˆ†é’Ÿ/ç”¨æˆ·', 'è¿”å›429çŠ¶æ€ç ï¼Œ1åˆ†é’Ÿåé‡è¯•'],
    ['æ”¯ä»˜æ¥å£', '10æ¬¡/åˆ†é’Ÿ/ç”¨æˆ·', 'è¿”å›429çŠ¶æ€ç ï¼Œ5åˆ†é’Ÿåé‡è¯•']
  ]}
/>

### 8.2 é™æµå“åº”

```json
{
  "code": 1007,
  "message": "è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åé‡è¯•",
  "error": {
    "retryAfter": 60,
    "limit": 100,
    "remaining": 0,
    "resetAt": "2025-01-20T12:00:00Z"
  }
}
```

---

## ä¹ã€Webhookå›è°ƒ

### 9.1 æ”¯ä»˜å›è°ƒ

**å›è°ƒURL**ï¼šç”±å•†æˆ·åœ¨ç³»ç»Ÿä¸­é…ç½®

**å›è°ƒæ–¹å¼**ï¼š`POST`

**å›è°ƒå‚æ•°**ï¼š

```json
{
  "eventType": "payment.success",
  "orderId": "ORD202501200001",
  "paymentId": "PAY202501200001",
  "amount": 359.97,
  "paidAt": "2025-01-20T11:35:00Z",
  "sign": "8a7b9c6d5e4f3g2h1i0j..."
}
```

**éªŒè¯ç­¾å**ï¼š

```javascript
const crypto = require('crypto');

function verifySign(data, sign, secret) {
  const str = Object.keys(data)
    .sort()
    .map(key => `${key}=${data[key]}`)
    .join('&');
  
  const hash = crypto
    .createHmac('sha256', secret)
    .update(str)
    .digest('hex');
  
  return hash === sign;
}
```

---

## åã€SDKç¤ºä¾‹

### 10.1 JavaScript SDK

```javascript
class ApiClient {
  constructor(baseURL, token) {
    this.baseURL = baseURL;
    this.token = token;
  }
  
  async request(method, path, data = null) {
    const url = `${this.baseURL}${path}`;
    const options = {
      method,
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${this.token}`
      }
    };
    
    if (data) {
      options.body = JSON.stringify(data);
    }
    
    const response = await fetch(url, options);
    return await response.json();
  }
  
  // ç”¨æˆ·ç›¸å…³
  async getProfile() {
    return this.request('GET', '/users/profile');
  }
  
  async updateProfile(data) {
    return this.request('PUT', '/users/profile', data);
  }
  
  // è®¢å•ç›¸å…³
  async createOrder(data) {
    return this.request('POST', '/orders', data);
  }
  
  async getOrders(params) {
    const query = new URLSearchParams(params).toString();
    return this.request('GET', `/orders?${query}`);
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const client = new ApiClient('https://api.example.com/v1', 'your_token');

// è·å–ç”¨æˆ·ä¿¡æ¯
const profile = await client.getProfile();
console.log(profile);

// åˆ›å»ºè®¢å•
const order = await client.createOrder({
  items: [
    { productId: 10001, quantity: 2, price: 99.99 }
  ]
});
console.log(order);
```

---

## åä¸€ã€æµ‹è¯•å·¥å…·

### 11.1 Postmané›†åˆ

æˆ‘ä»¬æä¾›äº†å®Œæ•´çš„Postmané›†åˆï¼ŒåŒ…å«æ‰€æœ‰APIæ¥å£çš„ç¤ºä¾‹è¯·æ±‚ã€‚

**å¯¼å…¥æ­¥éª¤**ï¼š
1. ä¸‹è½½ [API.postman_collection.json](./api-collection.json)
2. åœ¨Postmanä¸­é€‰æ‹© Import
3. é€‰æ‹©ä¸‹è½½çš„æ–‡ä»¶å¯¼å…¥

### 11.2 åœ¨çº¿è°ƒè¯•

è®¿é—®æˆ‘ä»¬çš„APIåœ¨çº¿è°ƒè¯•å¹³å°ï¼š

ğŸ”— [https://api-debug.example.com](https://api-debug.example.com)

---

## åäºŒã€å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•è·å–APIå¯†é’¥ï¼Ÿ

**A:** ç™»å½•å¼€å‘è€…å¹³å°ï¼Œåœ¨"åº”ç”¨ç®¡ç†"ä¸­åˆ›å»ºåº”ç”¨å¹¶è·å–å¯†é’¥ã€‚

### Q2: Tokenè¿‡æœŸåå¦‚ä½•å¤„ç†ï¼Ÿ

**A:** ä½¿ç”¨refresh_tokenè°ƒç”¨åˆ·æ–°æ¥å£è·å–æ–°çš„access_tokenã€‚

### Q3: å¦‚ä½•è°ƒè¯•Webhookå›è°ƒï¼Ÿ

**A:** å¯ä»¥ä½¿ç”¨ [webhook.site](https://webhook.site/) æˆ– [ngrok](https://ngrok.com/) è¿›è¡Œæœ¬åœ°è°ƒè¯•ã€‚

---

## åä¸‰ã€è”ç³»æˆ‘ä»¬

:::tip APIæ”¯æŒ
- **æŠ€æœ¯æ–‡æ¡£**ï¼šhttps://docs.example.com
- **å¼€å‘è€…ç¤¾åŒº**ï¼šhttps://community.example.com
- **æŠ€æœ¯æ”¯æŒé‚®ç®±**ï¼šapi-support@example.com
- **å·¥å•ç³»ç»Ÿ**ï¼šhttps://support.example.com
:::

---

## é™„å½•

### A. å®Œæ•´æ¥å£åˆ—è¡¨

æŸ¥çœ‹ [æ¥å£ç´¢å¼•](./api-index.md) è·å–å®Œæ•´çš„æ¥å£åˆ—è¡¨ã€‚

### B. æ›´æ–°æ—¥å¿—

**v1.0.0 (2025-01-20)**
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- æ”¯æŒç”¨æˆ·ç®¡ç†ã€è®¢å•ç®¡ç†ç­‰åŸºç¡€åŠŸèƒ½

**v0.9.0 (2025-01-10)**
- Betaç‰ˆæœ¬æµ‹è¯•

