"use strict";(self.webpackChunkfullstack_dev_blog=self.webpackChunkfullstack_dev_blog||[]).push([["98828"],{62755:function(n,e,s){s.r(e),s.d(e,{metadata:()=>r,default:()=>j,frontMatter:()=>l,contentTitle:()=>t,toc:()=>c,assets:()=>d});var r=JSON.parse('{"id":"interview/java-\u96C6\u5408","title":"Java \u96C6\u5408\u9762\u8BD5\u9898\u96C6","description":"\u603B\u9898\u6570 List\u3001Map\u3001Set\u3001\u5E76\u53D1\u5BB9\u5668 |  \u96BE\u5EA6\u5206\u5E03: \u4E2D\u7EA7","source":"@site/docs/interview/java-\u96C6\u5408.md","sourceDirName":"interview","slug":"/interview/java-\u96C6\u5408","permalink":"/en/docs/interview/java-\u96C6\u5408","draft":false,"unlisted":false,"editUrl":"https://github.com/MasterLiu93/blog-web/tree/main/docs/interview/java-\u96C6\u5408.md","tags":[],"version":"current","lastUpdatedBy":"laby","lastUpdatedAt":1763643037000,"frontMatter":{}}'),a=s(74848),i=s(28453);let l={},t="Java \u96C6\u5408\u9762\u8BD5\u9898\u96C6",d={},c=[{value:"\u9762\u8BD5\u9898\u76EE\u5217\u8868",id:"\u9762\u8BD5\u9898\u76EE\u5217\u8868",level:2},{value:"1. \u8BF4\u8BF4 Java \u4E2D HashMap \u7684\u539F\u7406\uFF1F",id:"1-\u8BF4\u8BF4-java-\u4E2D-hashmap-\u7684\u539F\u7406",level:3},{value:"2. \u4F7F\u7528 HashMap \u65F6\uFF0C\u6709\u54EA\u4E9B\u63D0\u5347\u6027\u80FD\u7684\u6280\u5DE7\uFF1F",id:"2-\u4F7F\u7528-hashmap-\u65F6\u6709\u54EA\u4E9B\u63D0\u5347\u6027\u80FD\u7684\u6280\u5DE7",level:3},{value:"3. \u4EC0\u4E48\u662F Hash \u78B0\u649E\uFF1F\u600E\u4E48\u89E3\u51B3\u54C8\u5E0C\u78B0\u649E\uFF1F",id:"3-\u4EC0\u4E48\u662F-hash-\u78B0\u649E\u600E\u4E48\u89E3\u51B3\u54C8\u5E0C\u78B0\u649E",level:3},{value:"4. Java \u7684 CopyOnWriteArrayList \u548C Collections.synchronizedList \u6709\u4EC0\u4E48\u533A\u522B\uFF1F\u5206\u522B\u6709\u4EC0\u4E48\u4F18\u7F3A\u70B9\uFF1F",id:"4-java-\u7684-copyonwritearraylist-\u548C-collectionssynchronizedlist-\u6709\u4EC0\u4E48\u533A\u522B\u5206\u522B\u6709\u4EC0\u4E48\u4F18\u7F3A\u70B9",level:3},{value:"5. Java \u4E2D\u6709\u54EA\u4E9B\u96C6\u5408\u7C7B\uFF1F\u8BF7\u7B80\u5355\u4ECB\u7ECD",id:"5-java-\u4E2D\u6709\u54EA\u4E9B\u96C6\u5408\u7C7B\u8BF7\u7B80\u5355\u4ECB\u7ECD",level:3},{value:"6. Java \u6570\u7EC4\u548C\u94FE\u8868\u5728 Java \u4E2D\u7684\u533A\u522B\u662F\u4EC0\u4E48\uFF1F",id:"6-java-\u6570\u7EC4\u548C\u94FE\u8868\u5728-java-\u4E2D\u7684\u533A\u522B\u662F\u4EC0\u4E48",level:3},{value:"7. Java \u4E2D\u7684 List \u63A5\u53E3\u6709\u54EA\u4E9B\u5B9E\u73B0\u7C7B\uFF1F",id:"7-java-\u4E2D\u7684-list-\u63A5\u53E3\u6709\u54EA\u4E9B\u5B9E\u73B0\u7C7B",level:3},{value:"8. Java \u4E2D ArrayList \u548C LinkedList \u6709\u4EC0\u4E48\u533A\u522B\uFF1F",id:"8-java-\u4E2D-arraylist-\u548C-linkedlist-\u6709\u4EC0\u4E48\u533A\u522B",level:3},{value:"9. Java ArrayList \u7684\u6269\u5BB9\u673A\u5236\u662F\u4EC0\u4E48\uFF1F",id:"9-java-arraylist-\u7684\u6269\u5BB9\u673A\u5236\u662F\u4EC0\u4E48",level:3},{value:"10. Java \u4E2D\u7684 HashMap \u548C Hashtable \u6709\u4EC0\u4E48\u533A\u522B\uFF1F",id:"10-java-\u4E2D\u7684-hashmap-\u548C-hashtable-\u6709\u4EC0\u4E48\u533A\u522B",level:3},{value:"11. Java ConcurrentHashMap \u548C Hashtable \u7684\u533A\u522B\u662F\u4EC0\u4E48\uFF1F",id:"11-java-concurrenthashmap-\u548C-hashtable-\u7684\u533A\u522B\u662F\u4EC0\u4E48",level:3},{value:"12. Java \u4E2D\u7684 HashSet \u548C HashMap \u6709\u4EC0\u4E48\u533A\u522B\uFF1F",id:"12-java-\u4E2D\u7684-hashset-\u548C-hashmap-\u6709\u4EC0\u4E48\u533A\u522B",level:3},{value:"13. Java \u4E2D HashMap \u7684\u6269\u5BB9\u673A\u5236\u662F\u600E\u6837\u7684\uFF1F",id:"13-java-\u4E2D-hashmap-\u7684\u6269\u5BB9\u673A\u5236\u662F\u600E\u6837\u7684",level:3},{value:"14. Java \u4E3A\u4EC0\u4E48 HashMap \u5728\u6269\u5BB9\u65F6\u91C7\u7528 2 \u7684 n \u6B21\u65B9\u500D\uFF1F",id:"14-java-\u4E3A\u4EC0\u4E48-hashmap-\u5728\u6269\u5BB9\u65F6\u91C7\u7528-2-\u7684-n-\u6B21\u65B9\u500D",level:3},{value:"15. Java \u4E3A\u4EC0\u4E48 HashMap \u7684\u9ED8\u8BA4\u8D1F\u8F7D\u56E0\u5B50\u662F 0.75\uFF1F",id:"15-java-\u4E3A\u4EC0\u4E48-hashmap-\u7684\u9ED8\u8BA4\u8D1F\u8F7D\u56E0\u5B50\u662F-075",level:3},{value:"16. Java \u4E3A\u4EC0\u4E48 JDK 1.8 \u5BF9 HashMap \u8FDB\u884C\u4E86\u7EA2\u9ED1\u6811\u7684\u6539\u52A8\uFF1F",id:"16-java-\u4E3A\u4EC0\u4E48-jdk-18-\u5BF9-hashmap-\u8FDB\u884C\u4E86\u7EA2\u9ED1\u6811\u7684\u6539\u52A8",level:3},{value:"17. Java JDK 1.8 \u5BF9 HashMap \u9664\u4E86\u7EA2\u9ED1\u6811\u8FD8\u8FDB\u884C\u4E86\u54EA\u4E9B\u6539\u52A8\uFF1F",id:"17-java-jdk-18-\u5BF9-hashmap-\u9664\u4E86\u7EA2\u9ED1\u6811\u8FD8\u8FDB\u884C\u4E86\u54EA\u4E9B\u6539\u52A8",level:3},{value:"18. Java \u4E2D\u7684 LinkedHashMap \u662F\u4EC0\u4E48\uFF1F",id:"18-java-\u4E2D\u7684-linkedhashmap-\u662F\u4EC0\u4E48",level:3},{value:"19. Java \u4E2D\u7684 TreeMap \u662F\u4EC0\u4E48\uFF1F",id:"19-java-\u4E2D\u7684-treemap-\u662F\u4EC0\u4E48",level:3},{value:"20. Java \u4E2D\u7684 IdentityHashMap \u662F\u4EC0\u4E48\uFF1F",id:"20-java-\u4E2D\u7684-identityhashmap-\u662F\u4EC0\u4E48",level:3},{value:"21. Java \u4E2D\u7684 WeakHashMap \u662F\u4EC0\u4E48\uFF1F",id:"21-java-\u4E2D\u7684-weakhashmap-\u662F\u4EC0\u4E48",level:3},{value:"22. Java \u4E2D ConcurrentHashMap 1.7 \u548C 1.8 \u4E4B\u95F4\u6709\u54EA\u4E9B\u533A\u522B\uFF1F",id:"22-java-\u4E2D-concurrenthashmap-17-\u548C-18-\u4E4B\u95F4\u6709\u54EA\u4E9B\u533A\u522B",level:3},{value:"23. Java \u4E2D ConcurrentHashMap \u7684 get \u65B9\u6CD5\u662F\u5426\u9700\u8981\u52A0\u9501\uFF1F",id:"23-java-\u4E2D-concurrenthashmap-\u7684-get-\u65B9\u6CD5\u662F\u5426\u9700\u8981\u52A0\u9501",level:3},{value:"24. Java \u4E3A\u4EC0\u4E48 ConcurrentHashMap \u4E0D\u652F\u6301 key \u6216 value \u4E3A null\uFF1F",id:"24-java-\u4E3A\u4EC0\u4E48-concurrenthashmap-\u4E0D\u652F\u6301-key-\u6216-value-\u4E3A-null",level:3},{value:"25. Java \u4E2D\u7684 CopyOnWriteArrayList \u662F\u4EC0\u4E48\uFF1F",id:"25-java-\u4E2D\u7684-copyonwritearraylist-\u662F\u4EC0\u4E48",level:3},{value:"26. Java \u4F60\u9047\u5230\u8FC7 ConcurrentModificationException \u9519\u8BEF\u5417\uFF1F\u5B83\u662F\u5982\u4F55\u4EA7\u751F\u7684\uFF1F",id:"26-java-\u4F60\u9047\u5230\u8FC7-concurrentmodificationexception-\u9519\u8BEF\u5417\u5B83\u662F\u5982\u4F55\u4EA7\u751F\u7684",level:3},{value:"\u5B66\u4E60\u6307\u5357",id:"\u5B66\u4E60\u6307\u5357",level:2},{value:"\u5B66\u4E60\u6307\u5357",id:"\u5B66\u4E60\u6307\u5357-1",level:2}];function h(n){let e={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"java-\u96C6\u5408\u9762\u8BD5\u9898\u96C6",children:"Java \u96C6\u5408\u9762\u8BD5\u9898\u96C6"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u603B\u9898\u6570"}),": 26\u9053 |  ",(0,a.jsx)(e.strong,{children:"\u91CD\u70B9\u9886\u57DF"}),": List\u3001Map\u3001Set\u3001\u5E76\u53D1\u5BB9\u5668 |  ",(0,a.jsx)(e.strong,{children:"\u96BE\u5EA6\u5206\u5E03"}),": \u4E2D\u7EA7"]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:"\u672C\u6587\u6863\u6574\u7406\u4E86 Java \u96C6\u5408\u7684\u5B8C\u657426\u9053\u9762\u8BD5\u9898\u76EE\uFF0C\u6DB5\u76D6\u96C6\u5408\u6846\u67B6\u3001\u6570\u636E\u7ED3\u6784\u3001\u6027\u80FD\u7279\u70B9\u7B49\u5404\u4E2A\u65B9\u9762\u3002"}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"\u9762\u8BD5\u9898\u76EE\u5217\u8868",children:"\u9762\u8BD5\u9898\u76EE\u5217\u8868"}),"\n",(0,a.jsx)(e.h3,{id:"1-\u8BF4\u8BF4-java-\u4E2D-hashmap-\u7684\u539F\u7406",children:"1. \u8BF4\u8BF4 Java \u4E2D HashMap \u7684\u539F\u7406\uFF1F"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:"HashMap\u662F\u57FA\u4E8E\u54C8\u5E0C\u8868\u5B9E\u73B0\u7684\u952E\u503C\u5BF9\u5B58\u50A8\u7ED3\u6784\u3002"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u6838\u5FC3\u539F\u7406\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"1. \u6570\u636E\u7ED3\u6784\uFF08JDK 1.8+\uFF09"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u6570\u7EC4 + \u94FE\u8868 + \u7EA2\u9ED1\u6811\n\n\u6570\u7EC4\uFF1ANode<K,V>[] table\n\u94FE\u8868\uFF1A\u89E3\u51B3\u54C8\u5E0C\u51B2\u7A81\n\u7EA2\u9ED1\u6811\uFF1A\u94FE\u8868\u957F\u5EA6>8\u4E14\u6570\u7EC4\u957F\u5EA6>=64\u65F6\u8F6C\u6362\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"2. \u5B58\u50A8\u8FC7\u7A0B"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"public V put(K key, V value) {\n    // 1. \u8BA1\u7B97hash\u503C\n    int hash = hash(key);\n    \n    // 2. \u8BA1\u7B97\u6570\u7EC4\u4E0B\u6807\uFF1A(n-1) & hash\n    int index = (table.length - 1) & hash;\n    \n    // 3. \u5982\u679C\u6CA1\u6709\u51B2\u7A81\uFF0C\u76F4\u63A5\u653E\u5165\n    if (table[index] == null) {\n        table[index] = new Node(hash, key, value, null);\n    }\n    // 4. \u5982\u679C\u6709\u51B2\u7A81\uFF0C\u904D\u5386\u94FE\u8868/\u7EA2\u9ED1\u6811\n    else {\n        // \u94FE\u8868\u5904\u7406\u6216\u7EA2\u9ED1\u6811\u5904\u7406\n    }\n    \n    // 5. \u5224\u65AD\u662F\u5426\u9700\u8981\u6269\u5BB9\n    if (++size > threshold) {\n        resize();\n    }\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"3. \u67E5\u627E\u8FC7\u7A0B"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"public V get(Object key) {\n    // 1. \u8BA1\u7B97hash\n    int hash = hash(key);\n    \n    // 2. \u5B9A\u4F4D\u6570\u7EC4\u4F4D\u7F6E\n    Node<K,V> first = table[(table.length - 1) & hash];\n    \n    // 3. \u904D\u5386\u94FE\u8868/\u7EA2\u9ED1\u6811\u67E5\u627E\n    if (first != null) {\n        if (first.hash == hash && key.equals(first.key)) {\n            return first.value;\n        }\n        // \u7EE7\u7EED\u67E5\u627E...\n    }\n    return null;\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"4. \u5173\u952E\u53C2\u6570"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"\u9ED8\u8BA4\u521D\u59CB\u5BB9\u91CF\uFF1A16"}),"\n",(0,a.jsx)(e.li,{children:"\u9ED8\u8BA4\u8D1F\u8F7D\u56E0\u5B50\uFF1A0.75"}),"\n",(0,a.jsx)(e.li,{children:"\u6269\u5BB9\u9608\u503C\uFF1Acapacity * loadFactor"}),"\n",(0,a.jsx)(e.li,{children:"\u6811\u5316\u9608\u503C\uFF1A8\uFF08\u94FE\u8868\u8F6C\u7EA2\u9ED1\u6811\uFF09"}),"\n",(0,a.jsx)(e.li,{children:"\u9000\u5316\u9608\u503C\uFF1A6\uFF08\u7EA2\u9ED1\u6811\u8F6C\u94FE\u8868\uFF09"}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"2-\u4F7F\u7528-hashmap-\u65F6\u6709\u54EA\u4E9B\u63D0\u5347\u6027\u80FD\u7684\u6280\u5DE7",children:"2. \u4F7F\u7528 HashMap \u65F6\uFF0C\u6709\u54EA\u4E9B\u63D0\u5347\u6027\u80FD\u7684\u6280\u5DE7\uFF1F"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"1. \u8BBE\u7F6E\u5408\u9002\u7684\u521D\u59CB\u5BB9\u91CF"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// \u4E0D\u597D\uFF1A\u9ED8\u8BA4\u5BB9\u91CF16\uFF0C\u9700\u8981\u591A\u6B21\u6269\u5BB9\nMap<String, String> map = new HashMap<>();\n\n// \u597D\uFF1A\u9884\u4F30\u5927\u5C0F\uFF0C\u51CF\u5C11\u6269\u5BB9\nMap<String, String> map = new HashMap<>(1024);\n\n// \u66F4\u597D\uFF1A\u8003\u8651\u8D1F\u8F7D\u56E0\u5B50\nint expectedSize = 1000;\nMap<String, String> map = new HashMap<>((int)(expectedSize / 0.75) + 1);\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"2. \u9009\u62E9\u597D\u7684hash\u7B97\u6CD5"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// \u91CD\u5199hashCode\u65B9\u6CD5\uFF0C\u51CF\u5C11\u51B2\u7A81\n@Override\npublic int hashCode() {\n    return Objects.hash(field1, field2, field3);\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"3. \u4F7F\u7528\u4E0D\u53EF\u53D8\u5BF9\u8C61\u4F5Ckey"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// \u63A8\u8350\uFF1A\u4F7F\u7528String\u3001Integer\u7B49\u4E0D\u53EF\u53D8\u7C7B\nMap<String, User> map = new HashMap<>();\n\n// \u4E0D\u63A8\u8350\uFF1A\u4F7F\u7528\u53EF\u53D8\u5BF9\u8C61\nMap<MutableKey, User> map = new HashMap<>();\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"4. \u907F\u514D\u5728\u904D\u5386\u65F6\u4FEE\u6539"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// \u9519\u8BEF\uFF1A\u5BFC\u81F4ConcurrentModificationException\nfor (String key : map.keySet()) {\n    map.remove(key);\n}\n\n// \u6B63\u786E\uFF1A\u4F7F\u7528\u8FED\u4EE3\u5668\nIterator<String> it = map.keySet().iterator();\nwhile (it.hasNext()) {\n    it.next();\n    it.remove();\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"5. \u5E76\u53D1\u573A\u666F\u4F7F\u7528ConcurrentHashMap"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// \u591A\u7EBF\u7A0B\u73AF\u5883\nMap<String, String> map = new ConcurrentHashMap<>();\n"})}),"\n",(0,a.jsx)(e.h3,{id:"3-\u4EC0\u4E48\u662F-hash-\u78B0\u649E\u600E\u4E48\u89E3\u51B3\u54C8\u5E0C\u78B0\u649E",children:"3. \u4EC0\u4E48\u662F Hash \u78B0\u649E\uFF1F\u600E\u4E48\u89E3\u51B3\u54C8\u5E0C\u78B0\u649E\uFF1F"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Hash\u78B0\u649E\u5B9A\u4E49\uFF1A"}),"\n\u4E0D\u540C\u7684key\u7ECF\u8FC7hash\u8BA1\u7B97\u540E\u5F97\u5230\u76F8\u540C\u7684\u6570\u7EC4\u4E0B\u6807\u3002"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u89E3\u51B3\u65B9\u6CD5\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"1. \u94FE\u5730\u5740\u6CD5\uFF08HashMap\u91C7\u7528\uFF09"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// \u6570\u7EC4 + \u94FE\u8868\nclass Node<K,V> {\n    final int hash;\n    final K key;\n    V value;\n    Node<K,V> next;  // \u6307\u5411\u4E0B\u4E00\u4E2A\u8282\u70B9\n}\n\n// \u78B0\u649E\u540E\u5F62\u6210\u94FE\u8868\n[\u6570\u7EC4] -> [Node1] -> [Node2] -> [Node3]\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"2. \u5F00\u653E\u5B9A\u5740\u6CD5"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u7EBF\u6027\u63A2\u6D4B\uFF1A\u4F9D\u6B21\u67E5\u627E\u4E0B\u4E00\u4E2A\u7A7A\u4F4D\u7F6E\nindex = (hash + i) % capacity\n\n\u4E8C\u6B21\u63A2\u6D4B\uFF1A\u4F7F\u7528\u4E8C\u6B21hash\u51FD\u6570\nindex = (hash1 + i * hash2) % capacity\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"3. \u518D\u54C8\u5E0C\u6CD5"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u4F7F\u7528\u591A\u4E2Ahash\u51FD\u6570\uFF0C\u76F4\u5230\u627E\u5230\u7A7A\u4F4D\u7F6E\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"4. \u5EFA\u7ACB\u516C\u5171\u6EA2\u51FA\u533A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u6240\u6709\u78B0\u649E\u7684\u5143\u7D20\u653E\u5165\u4E00\u4E2A\u516C\u5171\u533A\u57DF\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"HashMap\u7684\u4F18\u5316\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// JDK 1.8\u4F18\u5316\uFF1A\u94FE\u8868 -> \u7EA2\u9ED1\u6811\nif (\u94FE\u8868\u957F\u5EA6 > 8 && \u6570\u7EC4\u957F\u5EA6 >= 64) {\n    \u8F6C\u6362\u4E3A\u7EA2\u9ED1\u6811;  // O(n) -> O(log n)\n}\n\nif (\u7EA2\u9ED1\u6811\u8282\u70B9 < 6) {\n    \u8F6C\u6362\u4E3A\u94FE\u8868;\n}\n"})}),"\n",(0,a.jsx)(e.h3,{id:"4-java-\u7684-copyonwritearraylist-\u548C-collectionssynchronizedlist-\u6709\u4EC0\u4E48\u533A\u522B\u5206\u522B\u6709\u4EC0\u4E48\u4F18\u7F3A\u70B9",children:"4. Java \u7684 CopyOnWriteArrayList \u548C Collections.synchronizedList \u6709\u4EC0\u4E48\u533A\u522B\uFF1F\u5206\u522B\u6709\u4EC0\u4E48\u4F18\u7F3A\u70B9\uFF1F"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u5B9E\u73B0\u673A\u5236\u5BF9\u6BD4\uFF1A"})}),"\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"\u7279\u6027"}),(0,a.jsx)(e.th,{children:"CopyOnWriteArrayList"}),(0,a.jsx)(e.th,{children:"synchronizedList"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u540C\u6B65\u673A\u5236"}),(0,a.jsx)(e.td,{children:"\u5199\u65F6\u590D\u5236"}),(0,a.jsx)(e.td,{children:"synchronized\u9501"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u8BFB\u64CD\u4F5C"}),(0,a.jsx)(e.td,{children:"\u65E0\u9501"}),(0,a.jsx)(e.td,{children:"\u9700\u8981\u52A0\u9501"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u5199\u64CD\u4F5C"}),(0,a.jsx)(e.td,{children:"\u590D\u5236\u6574\u4E2A\u6570\u7EC4"}),(0,a.jsx)(e.td,{children:"\u52A0\u9501"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u8FED\u4EE3\u5668"}),(0,a.jsx)(e.td,{children:"\u5FEB\u7167\uFF0C\u4E0D\u4F1A\u629B\u5F02\u5E38"}),(0,a.jsx)(e.td,{children:"\u9700\u8981\u624B\u52A8\u540C\u6B65"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u9002\u7528\u573A\u666F"}),(0,a.jsx)(e.td,{children:"\u8BFB\u591A\u5199\u5C11"}),(0,a.jsx)(e.td,{children:"\u8BFB\u5199\u5747\u8861"})]})]})]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"CopyOnWriteArrayList\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"public class CopyOnWriteArrayList<E> {\n    private volatile Object[] array;\n    \n    // \u8BFB\u64CD\u4F5C\uFF1A\u65E0\u9501\n    public E get(int index) {\n        return (E) array[index];\n    }\n    \n    // \u5199\u64CD\u4F5C\uFF1A\u590D\u5236\u6570\u7EC4\n    public boolean add(E e) {\n        synchronized (lock) {\n            Object[] newArray = Arrays.copyOf(array, array.length + 1);\n            newArray[array.length] = e;\n            array = newArray;  // \u539F\u5B50\u66FF\u6362\n        }\n        return true;\n    }\n    \n    // \u8FED\u4EE3\u5668\uFF1A\u4F7F\u7528\u5FEB\u7167\n    public Iterator<E> iterator() {\n        return new COWIterator<>(array, 0);\n    }\n}\n\n// \u4F18\u70B9\uFF1A\n// 1. \u8BFB\u64CD\u4F5C\u5B8C\u5168\u65E0\u9501\uFF0C\u6027\u80FD\u9AD8\n// 2. \u8FED\u4EE3\u5668\u4E0D\u4F1AConcurrentModificationException\n\n// \u7F3A\u70B9\uFF1A\n// 1. \u5199\u64CD\u4F5C\u5F00\u9500\u5927\uFF08\u590D\u5236\u6574\u4E2A\u6570\u7EC4\uFF09\n// 2. \u5185\u5B58\u5360\u7528\u9AD8\n// 3. \u6570\u636E\u4E00\u81F4\u6027\u95EE\u9898\uFF08\u8BFB\u5230\u7684\u53EF\u80FD\u662F\u65E7\u6570\u636E\uFF09\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Collections.synchronizedList\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"public static <T> List<T> synchronizedList(List<T> list) {\n    return new SynchronizedList<>(list);\n}\n\nstatic class SynchronizedList<E> {\n    final Object mutex;  // \u9501\u5BF9\u8C61\n    \n    // \u6240\u6709\u64CD\u4F5C\u90FD\u52A0\u9501\n    public E get(int index) {\n        synchronized (mutex) {\n            return list.get(index);\n        }\n    }\n    \n    public boolean add(E e) {\n        synchronized (mutex) {\n            return list.add(e);\n        }\n    }\n    \n    // \u8FED\u4EE3\u5668\u9700\u8981\u624B\u52A8\u540C\u6B65\n    public Iterator<E> iterator() {\n        return list.iterator();  // \u4E0D\u5B89\u5168\uFF01\n    }\n}\n\n// \u4F18\u70B9\uFF1A\n// 1. \u5185\u5B58\u5F00\u9500\u5C0F\n// 2. \u5B9E\u65F6\u6027\u597D\n\n// \u7F3A\u70B9\uFF1A\n// 1. \u8BFB\u5199\u90FD\u9700\u8981\u52A0\u9501\uFF0C\u6027\u80FD\u4F4E\n// 2. \u8FED\u4EE3\u5668\u9700\u8981\u624B\u52A8\u540C\u6B65\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u4F7F\u7528\u5EFA\u8BAE\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// \u8BFB\u591A\u5199\u5C11\uFF1A\u4F7F\u7528CopyOnWriteArrayList\nList<String> list = new CopyOnWriteArrayList<>();\n\n// \u8BFB\u5199\u5747\u8861\uFF1A\u4F7F\u7528synchronizedList\nList<String> list = Collections.synchronizedList(new ArrayList<>());\n"})}),"\n",(0,a.jsx)(e.h3,{id:"5-java-\u4E2D\u6709\u54EA\u4E9B\u96C6\u5408\u7C7B\u8BF7\u7B80\u5355\u4ECB\u7ECD",children:"5. Java \u4E2D\u6709\u54EA\u4E9B\u96C6\u5408\u7C7B\uFF1F\u8BF7\u7B80\u5355\u4ECB\u7ECD"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Java\u96C6\u5408\u6846\u67B6\u4F53\u7CFB\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"Collection\n\u251C\u2500\u2500 List\uFF08\u6709\u5E8F\uFF0C\u53EF\u91CD\u590D\uFF09\n\u2502   \u251C\u2500\u2500 ArrayList\uFF1A\u52A8\u6001\u6570\u7EC4\n\u2502   \u251C\u2500\u2500 LinkedList\uFF1A\u53CC\u5411\u94FE\u8868\n\u2502   \u251C\u2500\u2500 Vector\uFF1A\u7EBF\u7A0B\u5B89\u5168\u7684ArrayList\n\u2502   \u2514\u2500\u2500 CopyOnWriteArrayList\uFF1A\u5199\u65F6\u590D\u5236\n\u2502\n\u251C\u2500\u2500 Set\uFF08\u65E0\u5E8F\uFF0C\u4E0D\u91CD\u590D\uFF09\n\u2502   \u251C\u2500\u2500 HashSet\uFF1A\u57FA\u4E8EHashMap\n\u2502   \u251C\u2500\u2500 LinkedHashSet\uFF1A\u6709\u5E8F\u7684HashSet\n\u2502   \u251C\u2500\u2500 TreeSet\uFF1A\u7EA2\u9ED1\u6811\uFF0C\u6709\u5E8F\n\u2502   \u2514\u2500\u2500 CopyOnWriteArraySet\uFF1A\u5199\u65F6\u590D\u5236\n\u2502\n\u2514\u2500\u2500 Queue\uFF08\u961F\u5217\uFF09\n    \u251C\u2500\u2500 PriorityQueue\uFF1A\u4F18\u5148\u7EA7\u961F\u5217\n    \u251C\u2500\u2500 ArrayDeque\uFF1A\u53CC\u7AEF\u961F\u5217\n    \u251C\u2500\u2500 LinkedList\uFF1A\u4E5F\u5B9E\u73B0\u4E86Deque\n    \u2514\u2500\u2500 BlockingQueue\uFF1A\u963B\u585E\u961F\u5217\n        \u251C\u2500\u2500 ArrayBlockingQueue\n        \u251C\u2500\u2500 LinkedBlockingQueue\n        \u2514\u2500\u2500 PriorityBlockingQueue\n\nMap\uFF08\u952E\u503C\u5BF9\uFF09\n\u251C\u2500\u2500 HashMap\uFF1A\u54C8\u5E0C\u8868\n\u251C\u2500\u2500 LinkedHashMap\uFF1A\u6709\u5E8F\u7684HashMap\n\u251C\u2500\u2500 TreeMap\uFF1A\u7EA2\u9ED1\u6811\uFF0C\u6709\u5E8F\n\u251C\u2500\u2500 Hashtable\uFF1A\u7EBF\u7A0B\u5B89\u5168\uFF0C\u8FC7\u65F6\n\u251C\u2500\u2500 ConcurrentHashMap\uFF1A\u5E76\u53D1HashMap\n\u251C\u2500\u2500 WeakHashMap\uFF1A\u5F31\u5F15\u7528\n\u2514\u2500\u2500 IdentityHashMap\uFF1A\u6BD4\u8F83\u5F15\u7528\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u5E38\u7528\u96C6\u5408\u7279\u70B9\uFF1A"})}),"\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"\u96C6\u5408"}),(0,a.jsx)(e.th,{children:"\u5E95\u5C42\u7ED3\u6784"}),(0,a.jsx)(e.th,{children:"\u7EBF\u7A0B\u5B89\u5168"}),(0,a.jsx)(e.th,{children:"\u6709\u5E8F\u6027"}),(0,a.jsx)(e.th,{children:"\u5141\u8BB8null"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"ArrayList"}),(0,a.jsx)(e.td,{children:"\u6570\u7EC4"}),(0,a.jsx)(e.td,{children:"\u5426"}),(0,a.jsx)(e.td,{children:"\u6709\u5E8F"}),(0,a.jsx)(e.td,{children:"\u662F"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"LinkedList"}),(0,a.jsx)(e.td,{children:"\u94FE\u8868"}),(0,a.jsx)(e.td,{children:"\u5426"}),(0,a.jsx)(e.td,{children:"\u6709\u5E8F"}),(0,a.jsx)(e.td,{children:"\u662F"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"Vector"}),(0,a.jsx)(e.td,{children:"\u6570\u7EC4"}),(0,a.jsx)(e.td,{children:"\u662F"}),(0,a.jsx)(e.td,{children:"\u6709\u5E8F"}),(0,a.jsx)(e.td,{children:"\u662F"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"HashSet"}),(0,a.jsx)(e.td,{children:"HashMap"}),(0,a.jsx)(e.td,{children:"\u5426"}),(0,a.jsx)(e.td,{children:"\u65E0\u5E8F"}),(0,a.jsx)(e.td,{children:"\u662F"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"TreeSet"}),(0,a.jsx)(e.td,{children:"\u7EA2\u9ED1\u6811"}),(0,a.jsx)(e.td,{children:"\u5426"}),(0,a.jsx)(e.td,{children:"\u6709\u5E8F"}),(0,a.jsx)(e.td,{children:"\u5426"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"HashMap"}),(0,a.jsx)(e.td,{children:"\u6570\u7EC4+\u94FE\u8868+\u7EA2\u9ED1\u6811"}),(0,a.jsx)(e.td,{children:"\u5426"}),(0,a.jsx)(e.td,{children:"\u65E0\u5E8F"}),(0,a.jsx)(e.td,{children:"\u662F"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"TreeMap"}),(0,a.jsx)(e.td,{children:"\u7EA2\u9ED1\u6811"}),(0,a.jsx)(e.td,{children:"\u5426"}),(0,a.jsx)(e.td,{children:"\u6709\u5E8F"}),(0,a.jsx)(e.td,{children:"\u5426"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"ConcurrentHashMap"}),(0,a.jsx)(e.td,{children:"\u6570\u7EC4+\u94FE\u8868+\u7EA2\u9ED1\u6811"}),(0,a.jsx)(e.td,{children:"\u662F"}),(0,a.jsx)(e.td,{children:"\u65E0\u5E8F"}),(0,a.jsx)(e.td,{children:"\u5426"})]})]})]}),"\n",(0,a.jsx)(e.h3,{id:"6-java-\u6570\u7EC4\u548C\u94FE\u8868\u5728-java-\u4E2D\u7684\u533A\u522B\u662F\u4EC0\u4E48",children:"6. Java \u6570\u7EC4\u548C\u94FE\u8868\u5728 Java \u4E2D\u7684\u533A\u522B\u662F\u4EC0\u4E48\uFF1F"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"\u7279\u6027"}),(0,a.jsx)(e.th,{children:"\u6570\u7EC4"}),(0,a.jsx)(e.th,{children:"\u94FE\u8868"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u5B58\u50A8\u65B9\u5F0F"}),(0,a.jsx)(e.td,{children:"\u8FDE\u7EED\u5185\u5B58"}),(0,a.jsx)(e.td,{children:"\u79BB\u6563\u5185\u5B58"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u968F\u673A\u8BBF\u95EE"}),(0,a.jsx)(e.td,{children:"O(1)"}),(0,a.jsx)(e.td,{children:"O(n)"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u63D2\u5165/\u5220\u9664"}),(0,a.jsx)(e.td,{children:"O(n)"}),(0,a.jsx)(e.td,{children:"O(1)"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u5185\u5B58\u5F00\u9500"}),(0,a.jsx)(e.td,{children:"\u56FA\u5B9A"}),(0,a.jsx)(e.td,{children:"\u989D\u5916\u6307\u9488"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u7F13\u5B58\u53CB\u597D"}),(0,a.jsx)(e.td,{children:"\u597D"}),(0,a.jsx)(e.td,{children:"\u5DEE"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u5927\u5C0F"}),(0,a.jsx)(e.td,{children:"\u56FA\u5B9A"}),(0,a.jsx)(e.td,{children:"\u52A8\u6001"})]})]})]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u6570\u7EC4\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// \u4F18\u70B9\uFF1A\n// 1. \u968F\u673A\u8BBF\u95EE\u5FEB\uFF1AO(1)\n// 2. \u5185\u5B58\u8FDE\u7EED\uFF0C\u7F13\u5B58\u547D\u4E2D\u7387\u9AD8\n// 3. \u7A7A\u95F4\u5229\u7528\u7387\u9AD8\n\nint[] arr = new int[10];\nint value = arr[5];  // O(1)\n\n// \u7F3A\u70B9\uFF1A\n// 1. \u5927\u5C0F\u56FA\u5B9A\uFF0C\u4E0D\u80FD\u52A8\u6001\u6269\u5C55\n// 2. \u63D2\u5165/\u5220\u9664\u9700\u8981\u79FB\u52A8\u5143\u7D20\uFF1AO(n)\n// 3. \u5185\u5B58\u5206\u914D\u9700\u8981\u8FDE\u7EED\u7A7A\u95F4\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u94FE\u8868\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// \u4F18\u70B9\uFF1A\n// 1. \u52A8\u6001\u5927\u5C0F\uFF0C\u7075\u6D3B\u6269\u5C55\n// 2. \u63D2\u5165/\u5220\u9664\u5FEB\uFF1AO(1)\n// 3. \u4E0D\u9700\u8981\u8FDE\u7EED\u5185\u5B58\n\nclass Node {\n    int data;\n    Node next;\n}\n\n// \u7F3A\u70B9\uFF1A\n// 1. \u968F\u673A\u8BBF\u95EE\u6162\uFF1AO(n)\n// 2. \u989D\u5916\u7684\u6307\u9488\u5F00\u9500\n// 3. \u7F13\u5B58\u547D\u4E2D\u7387\u4F4E\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u4F7F\u7528\u573A\u666F\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// \u9700\u8981\u9891\u7E41\u968F\u673A\u8BBF\u95EE\uFF1A\u4F7F\u7528\u6570\u7EC4\nArrayList<String> list = new ArrayList<>();\n\n// \u9700\u8981\u9891\u7E41\u63D2\u5165/\u5220\u9664\uFF1A\u4F7F\u7528\u94FE\u8868\nLinkedList<String> list = new LinkedList<>();\n"})}),"\n",(0,a.jsx)(e.h3,{id:"7-java-\u4E2D\u7684-list-\u63A5\u53E3\u6709\u54EA\u4E9B\u5B9E\u73B0\u7C7B",children:"7. Java \u4E2D\u7684 List \u63A5\u53E3\u6709\u54EA\u4E9B\u5B9E\u73B0\u7C7B\uFF1F"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u5E38\u7528\u5B9E\u73B0\u7C7B\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"1. ArrayList"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// \u57FA\u4E8E\u52A8\u6001\u6570\u7EC4\npublic class ArrayList<E> {\n    private Object[] elementData;\n    private int size;\n}\n\n// \u7279\u70B9\uFF1A\n// - \u968F\u673A\u8BBF\u95EE\u5FEB\uFF1AO(1)\n// - \u5C3E\u90E8\u63D2\u5165\u5FEB\uFF1AO(1)\n// - \u4E2D\u95F4\u63D2\u5165/\u5220\u9664\u6162\uFF1AO(n)\n// - \u7EBF\u7A0B\u4E0D\u5B89\u5168\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"2. LinkedList"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// \u57FA\u4E8E\u53CC\u5411\u94FE\u8868\npublic class LinkedList<E> {\n    private Node<E> first;\n    private Node<E> last;\n    private int size;\n}\n\n// \u7279\u70B9\uFF1A\n// - \u968F\u673A\u8BBF\u95EE\u6162\uFF1AO(n)\n// - \u5934\u5C3E\u63D2\u5165/\u5220\u9664\u5FEB\uFF1AO(1)\n// - \u5B9E\u73B0\u4E86Deque\u63A5\u53E3\n// - \u7EBF\u7A0B\u4E0D\u5B89\u5168\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"3. Vector"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// \u7EBF\u7A0B\u5B89\u5168\u7684ArrayList\npublic class Vector<E> {\n    protected Object[] elementData;\n    \n    // \u6240\u6709\u65B9\u6CD5\u90FD\u52A0synchronized\n    public synchronized boolean add(E e) {\n        // ...\n    }\n}\n\n// \u7279\u70B9\uFF1A\n// - \u7EBF\u7A0B\u5B89\u5168\n// - \u6027\u80FD\u4F4E\uFF08\u5DF2\u8FC7\u65F6\uFF09\n// - \u9ED8\u8BA4\u6269\u5BB92\u500D\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"4. CopyOnWriteArrayList"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// \u5199\u65F6\u590D\u5236\npublic class CopyOnWriteArrayList<E> {\n    private volatile Object[] array;\n    \n    public boolean add(E e) {\n        synchronized (lock) {\n            Object[] newArray = Arrays.copyOf(array, len + 1);\n            newArray[len] = e;\n            array = newArray;\n        }\n    }\n}\n\n// \u7279\u70B9\uFF1A\n// - \u8BFB\u64CD\u4F5C\u65E0\u9501\n// - \u5199\u64CD\u4F5C\u590D\u5236\u6570\u7EC4\n// - \u9002\u5408\u8BFB\u591A\u5199\u5C11\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u5BF9\u6BD4\u603B\u7ED3\uFF1A"})}),"\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"\u5B9E\u73B0\u7C7B"}),(0,a.jsx)(e.th,{children:"\u5E95\u5C42\u7ED3\u6784"}),(0,a.jsx)(e.th,{children:"\u7EBF\u7A0B\u5B89\u5168"}),(0,a.jsx)(e.th,{children:"\u9002\u7528\u573A\u666F"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"ArrayList"}),(0,a.jsx)(e.td,{children:"\u6570\u7EC4"}),(0,a.jsx)(e.td,{children:"\u5426"}),(0,a.jsx)(e.td,{children:"\u968F\u673A\u8BBF\u95EE\u591A"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"LinkedList"}),(0,a.jsx)(e.td,{children:"\u94FE\u8868"}),(0,a.jsx)(e.td,{children:"\u5426"}),(0,a.jsx)(e.td,{children:"\u63D2\u5165/\u5220\u9664\u591A"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"Vector"}),(0,a.jsx)(e.td,{children:"\u6570\u7EC4"}),(0,a.jsx)(e.td,{children:"\u662F"}),(0,a.jsx)(e.td,{children:"\u5DF2\u8FC7\u65F6"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"CopyOnWriteArrayList"}),(0,a.jsx)(e.td,{children:"\u6570\u7EC4"}),(0,a.jsx)(e.td,{children:"\u662F"}),(0,a.jsx)(e.td,{children:"\u8BFB\u591A\u5199\u5C11"})]})]})]}),"\n",(0,a.jsx)(e.h3,{id:"8-java-\u4E2D-arraylist-\u548C-linkedlist-\u6709\u4EC0\u4E48\u533A\u522B",children:"8. Java \u4E2D ArrayList \u548C LinkedList \u6709\u4EC0\u4E48\u533A\u522B\uFF1F"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u6838\u5FC3\u533A\u522B\uFF1A"})}),"\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"\u7279\u6027"}),(0,a.jsx)(e.th,{children:"ArrayList"}),(0,a.jsx)(e.th,{children:"LinkedList"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u5E95\u5C42\u7ED3\u6784"}),(0,a.jsx)(e.td,{children:"\u52A8\u6001\u6570\u7EC4"}),(0,a.jsx)(e.td,{children:"\u53CC\u5411\u94FE\u8868"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u968F\u673A\u8BBF\u95EE"}),(0,a.jsx)(e.td,{children:"O(1)"}),(0,a.jsx)(e.td,{children:"O(n)"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u5934\u90E8\u63D2\u5165"}),(0,a.jsx)(e.td,{children:"O(n)"}),(0,a.jsx)(e.td,{children:"O(1)"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u5C3E\u90E8\u63D2\u5165"}),(0,a.jsx)(e.td,{children:"O(1)"}),(0,a.jsx)(e.td,{children:"O(1)"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u4E2D\u95F4\u63D2\u5165"}),(0,a.jsx)(e.td,{children:"O(n)"}),(0,a.jsx)(e.td,{children:"O(n)"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u5185\u5B58\u5F00\u9500"}),(0,a.jsx)(e.td,{children:"\u8F83\u5C0F"}),(0,a.jsx)(e.td,{children:"\u8F83\u5927\uFF08\u6307\u9488\uFF09"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u7F13\u5B58\u53CB\u597D"}),(0,a.jsx)(e.td,{children:"\u597D"}),(0,a.jsx)(e.td,{children:"\u5DEE"})]})]})]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"ArrayList\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"public class ArrayList<E> {\n    private Object[] elementData;\n    private int size;\n    \n    // \u968F\u673A\u8BBF\u95EE\uFF1AO(1)\n    public E get(int index) {\n        return (E) elementData[index];\n    }\n    \n    // \u5C3E\u90E8\u6DFB\u52A0\uFF1AO(1)\n    public boolean add(E e) {\n        elementData[size++] = e;\n        return true;\n    }\n    \n    // \u4E2D\u95F4\u63D2\u5165\uFF1AO(n)\n    public void add(int index, E element) {\n        System.arraycopy(elementData, index, \n                        elementData, index + 1, size - index);\n        elementData[index] = element;\n    }\n}\n\n// \u4F18\u70B9\uFF1A\n// 1. \u652F\u6301\u5FEB\u901F\u968F\u673A\u8BBF\u95EE\n// 2. \u5185\u5B58\u8FDE\u7EED\uFF0C\u7F13\u5B58\u547D\u4E2D\u7387\u9AD8\n// 3. \u5C3E\u90E8\u64CD\u4F5C\u6548\u7387\u9AD8\n\n// \u7F3A\u70B9\uFF1A\n// 1. \u4E2D\u95F4\u63D2\u5165/\u5220\u9664\u9700\u8981\u79FB\u52A8\u5143\u7D20\n// 2. \u6269\u5BB9\u6709\u5F00\u9500\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"LinkedList\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"public class LinkedList<E> {\n    private Node<E> first;\n    private Node<E> last;\n    private int size;\n    \n    private static class Node<E> {\n        E item;\n        Node<E> next;\n        Node<E> prev;\n    }\n    \n    // \u968F\u673A\u8BBF\u95EE\uFF1AO(n)\n    public E get(int index) {\n        Node<E> node = first;\n        for (int i = 0; i < index; i++) {\n            node = node.next;\n        }\n        return node.item;\n    }\n    \n    // \u5934\u90E8\u6DFB\u52A0\uFF1AO(1)\n    public void addFirst(E e) {\n        Node<E> newNode = new Node<>(e, first, null);\n        first = newNode;\n    }\n}\n\n// \u4F18\u70B9\uFF1A\n// 1. \u5934\u5C3E\u63D2\u5165/\u5220\u9664\u5FEB\n// 2. \u4E0D\u9700\u8981\u6269\u5BB9\n// 3. \u5B9E\u73B0\u4E86Deque\u63A5\u53E3\n\n// \u7F3A\u70B9\uFF1A\n// 1. \u968F\u673A\u8BBF\u95EE\u6162\n// 2. \u989D\u5916\u7684\u6307\u9488\u5F00\u9500\n// 3. \u7F13\u5B58\u4E0D\u53CB\u597D\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u9009\u62E9\u5EFA\u8BAE\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'// \u9700\u8981\u9891\u7E41\u968F\u673A\u8BBF\u95EE\uFF1A\u4F7F\u7528ArrayList\nList<String> list = new ArrayList<>();\nString item = list.get(100);  // \u5FEB\n\n// \u9700\u8981\u9891\u7E41\u5934\u5C3E\u63D2\u5165/\u5220\u9664\uFF1A\u4F7F\u7528LinkedList\nDeque<String> deque = new LinkedList<>();\ndeque.addFirst("first");  // \u5FEB\ndeque.addLast("last");    // \u5FEB\n\n// \u5927\u591A\u6570\u60C5\u51B5\uFF1A\u4F18\u5148\u9009\u62E9ArrayList\n'})}),"\n",(0,a.jsx)(e.h3,{id:"9-java-arraylist-\u7684\u6269\u5BB9\u673A\u5236\u662F\u4EC0\u4E48",children:"9. Java ArrayList \u7684\u6269\u5BB9\u673A\u5236\u662F\u4EC0\u4E48\uFF1F"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u6269\u5BB9\u89E6\u53D1\u6761\u4EF6\uFF1A"}),"\n\u5F53\u5143\u7D20\u6570\u91CF\u8D85\u8FC7\u5F53\u524D\u6570\u7EC4\u5BB9\u91CF\u65F6\u89E6\u53D1\u6269\u5BB9\u3002"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u6269\u5BB9\u8FC7\u7A0B\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"public class ArrayList<E> {\n    private Object[] elementData;\n    private int size;\n    \n    public boolean add(E e) {\n        // 1. \u68C0\u67E5\u662F\u5426\u9700\u8981\u6269\u5BB9\n        ensureCapacityInternal(size + 1);\n        \n        // 2. \u6DFB\u52A0\u5143\u7D20\n        elementData[size++] = e;\n        return true;\n    }\n    \n    private void ensureCapacityInternal(int minCapacity) {\n        if (minCapacity > elementData.length) {\n            grow(minCapacity);\n        }\n    }\n    \n    private void grow(int minCapacity) {\n        int oldCapacity = elementData.length;\n        \n        // 3. \u65B0\u5BB9\u91CF = \u65E7\u5BB9\u91CF * 1.5\n        int newCapacity = oldCapacity + (oldCapacity >> 1);\n        \n        // 4. \u5982\u679C\u8FD8\u4E0D\u591F\uFF0C\u76F4\u63A5\u4F7F\u7528\u6700\u5C0F\u9700\u6C42\n        if (newCapacity < minCapacity) {\n            newCapacity = minCapacity;\n        }\n        \n        // 5. \u590D\u5236\u6570\u7EC4\n        elementData = Arrays.copyOf(elementData, newCapacity);\n    }\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u6269\u5BB9\u7279\u70B9\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"1. \u6269\u5BB9\u500D\u6570\uFF1A1.5\u500D"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// JDK 1.8\nnewCapacity = oldCapacity + (oldCapacity >> 1);\n\n// \u793A\u4F8B\uFF1A\n10 -> 15 -> 22 -> 33 -> 49 -> 73...\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"2. \u521D\u59CB\u5BB9\u91CF"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'// \u9ED8\u8BA4\u5BB9\u91CF\uFF1A10\nprivate static final int DEFAULT_CAPACITY = 10;\n\n// \u7B2C\u4E00\u6B21add\u65F6\u624D\u521D\u59CB\u5316\uFF08\u5EF6\u8FDF\u521D\u59CB\u5316\uFF09\nArrayList<String> list = new ArrayList<>();  // \u6B64\u65F6\u5BB9\u91CF\u4E3A0\nlist.add("first");  // \u6B64\u65F6\u6269\u5BB9\u4E3A10\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"3. \u6269\u5BB9\u5F00\u9500"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// \u6BCF\u6B21\u6269\u5BB9\u90FD\u9700\u8981\uFF1A\n// 1. \u5206\u914D\u65B0\u6570\u7EC4\n// 2. \u590D\u5236\u65E7\u6570\u636E\n// 3. \u66FF\u6362\u5F15\u7528\n\n// \u65F6\u95F4\u590D\u6742\u5EA6\uFF1AO(n)\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u4F18\u5316\u5EFA\u8BAE\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'// \u4E0D\u597D\uFF1A\u9891\u7E41\u6269\u5BB9\nArrayList<String> list = new ArrayList<>();\nfor (int i = 0; i < 10000; i++) {\n    list.add("item" + i);  // \u591A\u6B21\u6269\u5BB9\n}\n\n// \u597D\uFF1A\u9884\u4F30\u5BB9\u91CF\nArrayList<String> list = new ArrayList<>(10000);\nfor (int i = 0; i < 10000; i++) {\n    list.add("item" + i);  // \u4E0D\u9700\u8981\u6269\u5BB9\n}\n\n// \u66F4\u597D\uFF1A\u8003\u8651\u8D1F\u8F7D\u56E0\u5B50\nint expectedSize = 10000;\nArrayList<String> list = new ArrayList<>((int)(expectedSize / 0.75) + 1);\n'})}),"\n",(0,a.jsx)(e.h3,{id:"10-java-\u4E2D\u7684-hashmap-\u548C-hashtable-\u6709\u4EC0\u4E48\u533A\u522B",children:"10. Java \u4E2D\u7684 HashMap \u548C Hashtable \u6709\u4EC0\u4E48\u533A\u522B\uFF1F"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u4E3B\u8981\u533A\u522B\uFF1A"})}),"\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"\u7279\u6027"}),(0,a.jsx)(e.th,{children:"HashMap"}),(0,a.jsx)(e.th,{children:"Hashtable"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u7EBF\u7A0B\u5B89\u5168"}),(0,a.jsx)(e.td,{children:"\u5426"}),(0,a.jsx)(e.td,{children:"\u662F"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u6027\u80FD"}),(0,a.jsx)(e.td,{children:"\u9AD8"}),(0,a.jsx)(e.td,{children:"\u4F4E"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"null\u952E"}),(0,a.jsx)(e.td,{children:"\u5141\u8BB8"}),(0,a.jsx)(e.td,{children:"\u4E0D\u5141\u8BB8"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"null\u503C"}),(0,a.jsx)(e.td,{children:"\u5141\u8BB8"}),(0,a.jsx)(e.td,{children:"\u4E0D\u5141\u8BB8"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u521D\u59CB\u5BB9\u91CF"}),(0,a.jsx)(e.td,{children:"16"}),(0,a.jsx)(e.td,{children:"11"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u6269\u5BB9\u500D\u6570"}),(0,a.jsx)(e.td,{children:"2\u500D"}),(0,a.jsx)(e.td,{children:"2\u500D+1"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u8FED\u4EE3\u5668"}),(0,a.jsx)(e.td,{children:"fail-fast"}),(0,a.jsx)(e.td,{children:"Enumeration"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"JDK\u7248\u672C"}),(0,a.jsx)(e.td,{children:"1.2"}),(0,a.jsx)(e.td,{children:"1.0"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u63A8\u8350\u4F7F\u7528"}),(0,a.jsx)(e.td,{children:"\u662F"}),(0,a.jsx)(e.td,{children:"\u5426\uFF08\u5DF2\u8FC7\u65F6\uFF09"})]})]})]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"HashMap\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"public class HashMap<K,V> {\n    // \u975E\u7EBF\u7A0B\u5B89\u5168\n    public V put(K key, V value) {\n        // \u5141\u8BB8null\u952E\u548Cnull\u503C\n        if (key == null) {\n            return putForNullKey(value);\n        }\n        // ...\n    }\n    \n    public V get(Object key) {\n        if (key == null) {\n            return getForNullKey();\n        }\n        // ...\n    }\n}\n\n// \u7279\u70B9\uFF1A\n// 1. \u975E\u7EBF\u7A0B\u5B89\u5168\uFF0C\u6027\u80FD\u9AD8\n// 2. \u5141\u8BB8null\u952E\u548Cnull\u503C\n// 3. JDK 1.8\u5F15\u5165\u7EA2\u9ED1\u6811\u4F18\u5316\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Hashtable\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"public class Hashtable<K,V> {\n    // \u6240\u6709\u65B9\u6CD5\u90FD\u52A0synchronized\n    public synchronized V put(K key, V value) {\n        // \u4E0D\u5141\u8BB8null\n        if (value == null) {\n            throw new NullPointerException();\n        }\n        // ...\n    }\n    \n    public synchronized V get(Object key) {\n        // ...\n    }\n}\n\n// \u7279\u70B9\uFF1A\n// 1. \u7EBF\u7A0B\u5B89\u5168\uFF0C\u4F46\u6027\u80FD\u4F4E\n// 2. \u4E0D\u5141\u8BB8null\u952E\u548Cnull\u503C\n// 3. \u5DF2\u8FC7\u65F6\uFF0C\u4E0D\u63A8\u8350\u4F7F\u7528\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u4EE3\u7801\u5BF9\u6BD4\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'// HashMap\uFF1A\u5141\u8BB8null\nMap<String, String> hashMap = new HashMap<>();\nhashMap.put(null, "value");   // OK\nhashMap.put("key", null);     // OK\n\n// Hashtable\uFF1A\u4E0D\u5141\u8BB8null\nMap<String, String> hashtable = new Hashtable<>();\nhashtable.put(null, "value"); // NullPointerException\nhashtable.put("key", null);   // NullPointerException\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u66FF\u4EE3\u65B9\u6848\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// \u5355\u7EBF\u7A0B\uFF1A\u4F7F\u7528HashMap\nMap<String, String> map = new HashMap<>();\n\n// \u591A\u7EBF\u7A0B\uFF1A\u4F7F\u7528ConcurrentHashMap\nMap<String, String> map = new ConcurrentHashMap<>();\n\n// \u6216\u8005\u4F7F\u7528Collections.synchronizedMap\nMap<String, String> map = Collections.synchronizedMap(new HashMap<>());\n"})}),"\n",(0,a.jsx)(e.h3,{id:"11-java-concurrenthashmap-\u548C-hashtable-\u7684\u533A\u522B\u662F\u4EC0\u4E48",children:"11. Java ConcurrentHashMap \u548C Hashtable \u7684\u533A\u522B\u662F\u4EC0\u4E48\uFF1F"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u6838\u5FC3\u533A\u522B\uFF1A"})}),"\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"\u7279\u6027"}),(0,a.jsx)(e.th,{children:"ConcurrentHashMap"}),(0,a.jsx)(e.th,{children:"Hashtable"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u9501\u673A\u5236"}),(0,a.jsx)(e.td,{children:"\u5206\u6BB5\u9501/CAS"}),(0,a.jsx)(e.td,{children:"\u5168\u8868\u9501"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u5E76\u53D1\u5EA6"}),(0,a.jsx)(e.td,{children:"\u9AD8"}),(0,a.jsx)(e.td,{children:"\u4F4E"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u6027\u80FD"}),(0,a.jsx)(e.td,{children:"\u9AD8"}),(0,a.jsx)(e.td,{children:"\u4F4E"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"null\u952E\u503C"}),(0,a.jsx)(e.td,{children:"\u4E0D\u5141\u8BB8"}),(0,a.jsx)(e.td,{children:"\u4E0D\u5141\u8BB8"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u8FED\u4EE3\u5668"}),(0,a.jsx)(e.td,{children:"\u5F31\u4E00\u81F4\u6027"}),(0,a.jsx)(e.td,{children:"\u5F3A\u4E00\u81F4\u6027"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"JDK\u7248\u672C"}),(0,a.jsx)(e.td,{children:"1.5"}),(0,a.jsx)(e.td,{children:"1.0"})]})]})]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"ConcurrentHashMap\uFF08JDK 1.8\uFF09\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// \u4F7F\u7528CAS + synchronized\u5B9E\u73B0\npublic class ConcurrentHashMap<K,V> {\n    // put\u64CD\u4F5C\uFF1A\u53EA\u9501\u5B9A\u5355\u4E2A\u6876\n    public V put(K key, V value) {\n        int hash = spread(key.hashCode());\n        for (Node<K,V>[] tab = table;;) {\n            Node<K,V> f = tabAt(tab, i);\n            if (f == null) {\n                // CAS\u63D2\u5165\n                if (casTabAt(tab, i, null, new Node<>(hash, key, value)))\n                    break;\n            } else {\n                // synchronized\u9501\u5B9A\u5355\u4E2A\u6876\n                synchronized (f) {\n                    // \u63D2\u5165\u903B\u8F91\n                }\n            }\n        }\n    }\n}\n\n// \u4F18\u70B9\uFF1A\n// 1. \u7EC6\u7C92\u5EA6\u9501\uFF0C\u5E76\u53D1\u6027\u80FD\u9AD8\n// 2. \u8BFB\u64CD\u4F5C\u65E0\u9501\n// 3. \u652F\u6301\u9AD8\u5E76\u53D1\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Hashtable\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// \u6240\u6709\u65B9\u6CD5\u90FD\u7528synchronized\npublic class Hashtable<K,V> {\n    public synchronized V put(K key, V value) {\n        // \u9501\u5B9A\u6574\u4E2A\u8868\n    }\n    \n    public synchronized V get(Object key) {\n        // \u9501\u5B9A\u6574\u4E2A\u8868\n    }\n}\n\n// \u7F3A\u70B9\uFF1A\n// 1. \u7C97\u7C92\u5EA6\u9501\uFF0C\u6027\u80FD\u4F4E\n// 2. \u8BFB\u5199\u90FD\u9700\u8981\u52A0\u9501\n// 3. \u5DF2\u8FC7\u65F6\n"})}),"\n",(0,a.jsx)(e.h3,{id:"12-java-\u4E2D\u7684-hashset-\u548C-hashmap-\u6709\u4EC0\u4E48\u533A\u522B",children:"12. Java \u4E2D\u7684 HashSet \u548C HashMap \u6709\u4EC0\u4E48\u533A\u522B\uFF1F"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u6838\u5FC3\u5173\u7CFB\uFF1AHashSet\u5E95\u5C42\u5C31\u662FHashMap"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"public class HashSet<E> {\n    private HashMap<E, Object> map;\n    private static final Object PRESENT = new Object();\n    \n    public boolean add(E e) {\n        return map.put(e, PRESENT) == null;\n    }\n    \n    public boolean contains(Object o) {\n        return map.containsKey(o);\n    }\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u4E3B\u8981\u533A\u522B\uFF1A"})}),"\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"\u7279\u6027"}),(0,a.jsx)(e.th,{children:"HashSet"}),(0,a.jsx)(e.th,{children:"HashMap"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u63A5\u53E3"}),(0,a.jsx)(e.td,{children:"Set"}),(0,a.jsx)(e.td,{children:"Map"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u5B58\u50A8"}),(0,a.jsx)(e.td,{children:"\u53EA\u5B58\u50A8\u5BF9\u8C61"}),(0,a.jsx)(e.td,{children:"\u5B58\u50A8\u952E\u503C\u5BF9"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u6DFB\u52A0\u65B9\u6CD5"}),(0,a.jsx)(e.td,{children:"add(E e)"}),(0,a.jsx)(e.td,{children:"put(K key, V value)"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u5141\u8BB8null"}),(0,a.jsx)(e.td,{children:"\u4E00\u4E2Anull"}),(0,a.jsx)(e.td,{children:"\u4E00\u4E2Anull\u952E\uFF0C\u591A\u4E2Anull\u503C"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u5E95\u5C42\u5B9E\u73B0"}),(0,a.jsx)(e.td,{children:"HashMap"}),(0,a.jsx)(e.td,{children:"\u6570\u7EC4+\u94FE\u8868+\u7EA2\u9ED1\u6811"})]})]})]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u4F7F\u7528\u573A\u666F\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'// HashSet\uFF1A\u53BB\u91CD\u3001\u5224\u65AD\u5B58\u5728\nSet<String> set = new HashSet<>();\nset.add("apple");\nboolean exists = set.contains("apple");\n\n// HashMap\uFF1A\u952E\u503C\u6620\u5C04\nMap<String, Integer> map = new HashMap<>();\nmap.put("apple", 100);\nInteger price = map.get("apple");\n'})}),"\n",(0,a.jsx)(e.h3,{id:"13-java-\u4E2D-hashmap-\u7684\u6269\u5BB9\u673A\u5236\u662F\u600E\u6837\u7684",children:"13. Java \u4E2D HashMap \u7684\u6269\u5BB9\u673A\u5236\u662F\u600E\u6837\u7684\uFF1F"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u6269\u5BB9\u65F6\u673A\uFF1A"}),"\n\u5F53\u5143\u7D20\u6570\u91CF > \u5BB9\u91CF * \u8D1F\u8F7D\u56E0\u5B50\u65F6\u89E6\u53D1\u6269\u5BB9\u3002"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u6269\u5BB9\u8FC7\u7A0B\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"final Node<K,V>[] resize() {\n    Node<K,V>[] oldTab = table;\n    int oldCap = oldTab.length;\n    \n    // 1. \u8BA1\u7B97\u65B0\u5BB9\u91CF\uFF1A2\u500D\n    int newCap = oldCap << 1;\n    \n    // 2. \u521B\u5EFA\u65B0\u6570\u7EC4\n    Node<K,V>[] newTab = new Node[newCap];\n    \n    // 3. \u91CD\u65B0hash\u6240\u6709\u5143\u7D20\n    for (int j = 0; j < oldCap; ++j) {\n        Node<K,V> e = oldTab[j];\n        if (e != null) {\n            if (e.next == null) {\n                // \u5355\u4E2A\u8282\u70B9\uFF1A\u76F4\u63A5\u653E\u5165\u65B0\u4F4D\u7F6E\n                newTab[e.hash & (newCap - 1)] = e;\n            } else {\n                // \u94FE\u8868/\u7EA2\u9ED1\u6811\uFF1A\u62C6\u5206\u91CD\u65B0\u5206\u914D\n                // \u5143\u7D20\u8981\u4E48\u5728\u539F\u4F4D\u7F6E\uFF0C\u8981\u4E48\u5728\u539F\u4F4D\u7F6E+oldCap\n            }\n        }\n    }\n    return newTab;\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u5173\u952E\u70B9\uFF1A"})}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsx)(e.li,{children:"\u5BB9\u91CF\u7FFB\u500D\uFF1AnewCap = oldCap * 2"}),"\n",(0,a.jsx)(e.li,{children:"\u91CD\u65B0\u8BA1\u7B97\u4F4D\u7F6E\uFF1Aindex = hash & (newCap - 1)"}),"\n",(0,a.jsxs)(e.li,{children:["\u4F18\u5316\uFF1A\u5143\u7D20\u4F4D\u7F6E\u53EA\u6709\u4E24\u79CD\u53EF\u80FD","\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"\u4FDD\u6301\u539F\u4F4D\u7F6E"}),"\n",(0,a.jsx)(e.li,{children:"\u539F\u4F4D\u7F6E + oldCap"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"14-java-\u4E3A\u4EC0\u4E48-hashmap-\u5728\u6269\u5BB9\u65F6\u91C7\u7528-2-\u7684-n-\u6B21\u65B9\u500D",children:"14. Java \u4E3A\u4EC0\u4E48 HashMap \u5728\u6269\u5BB9\u65F6\u91C7\u7528 2 \u7684 n \u6B21\u65B9\u500D\uFF1F"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u539F\u56E01\uFF1A\u9AD8\u6548\u7684\u4F4D\u8FD0\u7B97"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// \u8BA1\u7B97\u6570\u7EC4\u4E0B\u6807\n// \u65B9\u5F0F1\uFF1A\u53D6\u6A21\u8FD0\u7B97\uFF08\u6162\uFF09\nindex = hash % capacity;\n\n// \u65B9\u5F0F2\uFF1A\u4F4D\u8FD0\u7B97\uFF08\u5FEB\uFF09\nindex = hash & (capacity - 1);\n\n// \u5F53capacity\u662F2\u7684n\u6B21\u65B9\u65F6\uFF0C\u4E24\u79CD\u65B9\u5F0F\u7B49\u4EF7\n// \u4F8B\u5982\uFF1Acapacity = 16 = 2^4\n// capacity - 1 = 15 = 0b1111\n// hash & 15 \u7B49\u4EF7\u4E8E hash % 16\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u539F\u56E02\uFF1A\u6269\u5BB9\u65F6\u5143\u7D20\u5206\u5E03\u5747\u5300"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// \u6269\u5BB9\u524D\uFF1Acapacity = 16\uFF0Cindex = hash & 15\n// \u6269\u5BB9\u540E\uFF1Acapacity = 32\uFF0Cindex = hash & 31\n\n// \u5143\u7D20\u65B0\u4F4D\u7F6E\u53EA\u6709\u4E24\u79CD\u53EF\u80FD\uFF1A\n// 1. \u4FDD\u6301\u539F\u4F4D\u7F6E\uFF08hash\u7684\u7B2C5\u4F4D\u4E3A0\uFF09\n// 2. \u539F\u4F4D\u7F6E+16\uFF08hash\u7684\u7B2C5\u4F4D\u4E3A1\uFF09\n\n// \u793A\u4F8B\uFF1A\nhash = 0b10101  // 21\n\u65E7\u4F4D\u7F6E = 21 & 15 = 0b01111 & 0b10101 = 5\n\u65B0\u4F4D\u7F6E = 21 & 31 = 0b11111 & 0b10101 = 21\n// \u65B0\u4F4D\u7F6E = \u65E7\u4F4D\u7F6E + 16\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u539F\u56E03\uFF1A\u51CF\u5C11hash\u51B2\u7A81"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// 2\u7684n\u6B21\u65B9-1\u7684\u4E8C\u8FDB\u5236\u5168\u662F1\n16 - 1 = 15 = 0b1111\n32 - 1 = 31 = 0b11111\n\n// \u4E0E\u8FD0\u7B97\u65F6\u4FDD\u7559\u66F4\u591Ahash\u4FE1\u606F\n// \u51CF\u5C11\u51B2\u7A81\u6982\u7387\n"})}),"\n",(0,a.jsx)(e.h3,{id:"15-java-\u4E3A\u4EC0\u4E48-hashmap-\u7684\u9ED8\u8BA4\u8D1F\u8F7D\u56E0\u5B50\u662F-075",children:"15. Java \u4E3A\u4EC0\u4E48 HashMap \u7684\u9ED8\u8BA4\u8D1F\u8F7D\u56E0\u5B50\u662F 0.75\uFF1F"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u8D1F\u8F7D\u56E0\u5B50\u5B9A\u4E49\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"loadFactor = \u5143\u7D20\u6570\u91CF / \u6570\u7EC4\u5BB9\u91CF\nthreshold = capacity * loadFactor  // \u6269\u5BB9\u9608\u503C\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"0.75\u7684\u6743\u8861\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"1. \u7A7A\u95F4\u4E0E\u65F6\u95F4\u7684\u5E73\u8861"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"loadFactor = 0.5\uFF1A\n- \u7A7A\u95F4\u5229\u7528\u7387\u4F4E\uFF0850%\uFF09\n- \u51B2\u7A81\u5C11\uFF0C\u67E5\u8BE2\u5FEB\n\nloadFactor = 1.0\uFF1A\n- \u7A7A\u95F4\u5229\u7528\u7387\u9AD8\uFF08100%\uFF09\n- \u51B2\u7A81\u591A\uFF0C\u67E5\u8BE2\u6162\n\nloadFactor = 0.75\uFF1A\n- \u7A7A\u95F4\u5229\u7528\u7387\u9002\u4E2D\uFF0875%\uFF09\n- \u51B2\u7A81\u9002\u4E2D\uFF0C\u6027\u80FD\u8F83\u597D\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"2. \u6CCA\u677E\u5206\u5E03"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u6839\u636E\u7EDF\u8BA1\u5B66\uFF0C\u5F53loadFactor=0.75\u65F6\uFF1A\n- \u5355\u4E2A\u6876\u4E2D\u5143\u7D20\u4E2A\u6570\u8D85\u8FC78\u7684\u6982\u7387\u5C0F\u4E8E\u5343\u4E07\u5206\u4E4B\u4E00\n- \u8FD9\u662F\u7EA2\u9ED1\u6811\u8F6C\u6362\u9608\u503C\u7684\u7406\u8BBA\u4F9D\u636E\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"3. \u5B9E\u9645\u6D4B\u8BD5\u7ED3\u679C"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// JDK\u6CE8\u91CA\u8BF4\u660E\uFF1A\n// 0.75\u5728\u65F6\u95F4\u548C\u7A7A\u95F4\u6210\u672C\u4E4B\u95F4\u63D0\u4F9B\u4E86\u826F\u597D\u7684\u6743\u8861\n// \u66F4\u9AD8\u7684\u503C\u4F1A\u51CF\u5C11\u7A7A\u95F4\u5F00\u9500\u4F46\u589E\u52A0\u67E5\u627E\u6210\u672C\n// \u66F4\u4F4E\u7684\u503C\u4F1A\u589E\u52A0\u7A7A\u95F4\u5F00\u9500\u4F46\u51CF\u5C11\u67E5\u627E\u6210\u672C\n"})}),"\n",(0,a.jsx)(e.h3,{id:"16-java-\u4E3A\u4EC0\u4E48-jdk-18-\u5BF9-hashmap-\u8FDB\u884C\u4E86\u7EA2\u9ED1\u6811\u7684\u6539\u52A8",children:"16. Java \u4E3A\u4EC0\u4E48 JDK 1.8 \u5BF9 HashMap \u8FDB\u884C\u4E86\u7EA2\u9ED1\u6811\u7684\u6539\u52A8\uFF1F"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u6539\u52A8\u539F\u56E0\uFF1A\u89E3\u51B3\u94FE\u8868\u8FC7\u957F\u5BFC\u81F4\u7684\u6027\u80FD\u95EE\u9898"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"JDK 1.7\u95EE\u9898\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// \u94FE\u8868\u7ED3\u6784\n\u6570\u7EC4[index] -> Node1 -> Node2 -> ... -> NodeN\n\n// \u67E5\u627E\u65F6\u95F4\u590D\u6742\u5EA6\uFF1AO(n)\n// \u5F53\u94FE\u8868\u5F88\u957F\u65F6\uFF0C\u6027\u80FD\u9000\u5316\u4E25\u91CD\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"JDK 1.8\u4F18\u5316\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// \u5F53\u94FE\u8868\u957F\u5EA6>8\u4E14\u6570\u7EC4\u957F\u5EA6>=64\u65F6\uFF0C\u8F6C\u4E3A\u7EA2\u9ED1\u6811\nif (binCount >= TREEIFY_THRESHOLD - 1) {\n    treeifyBin(tab, hash);\n}\n\n// \u7EA2\u9ED1\u6811\u67E5\u627E\uFF1AO(log n)\n// \u6027\u80FD\u63D0\u5347\u660E\u663E\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u8F6C\u6362\u6761\u4EF6\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// \u94FE\u8868 -> \u7EA2\u9ED1\u6811\n1. \u94FE\u8868\u957F\u5EA6 > 8\n2. \u6570\u7EC4\u957F\u5EA6 >= 64\n\n// \u7EA2\u9ED1\u6811 -> \u94FE\u8868\n1. \u8282\u70B9\u6570 <= 6\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u4E3A\u4EC0\u4E48\u662F8\u548C6\uFF1F"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"- 8\uFF1A\u6839\u636E\u6CCA\u677E\u5206\u5E03\uFF0C\u94FE\u8868\u957F\u5EA6\u8FBE\u52308\u7684\u6982\u7387\u6781\u4F4E\n- 6\uFF1A\u907F\u514D\u9891\u7E41\u8F6C\u6362\uFF08\u5982\u679C\u75287\uFF0C\u53EF\u80FD\u53CD\u590D\u8F6C\u6362\uFF09\n"})}),"\n",(0,a.jsx)(e.h3,{id:"17-java-jdk-18-\u5BF9-hashmap-\u9664\u4E86\u7EA2\u9ED1\u6811\u8FD8\u8FDB\u884C\u4E86\u54EA\u4E9B\u6539\u52A8",children:"17. Java JDK 1.8 \u5BF9 HashMap \u9664\u4E86\u7EA2\u9ED1\u6811\u8FD8\u8FDB\u884C\u4E86\u54EA\u4E9B\u6539\u52A8\uFF1F"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u4E3B\u8981\u6539\u52A8\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"1. \u6570\u636E\u7ED3\u6784\u53D8\u5316"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// JDK 1.7\uFF1A\u6570\u7EC4 + \u94FE\u8868\nEntry<K,V>[] table;\n\n// JDK 1.8\uFF1A\u6570\u7EC4 + \u94FE\u8868 + \u7EA2\u9ED1\u6811\nNode<K,V>[] table;\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"2. \u63D2\u5165\u65B9\u5F0F\u6539\u53D8"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// JDK 1.7\uFF1A\u5934\u63D2\u6CD5\nvoid addEntry(int hash, K key, V value, int bucketIndex) {\n    Entry<K,V> e = table[bucketIndex];\n    table[bucketIndex] = new Entry<>(hash, key, value, e);\n}\n// \u95EE\u9898\uFF1A\u5E76\u53D1\u6269\u5BB9\u65F6\u53EF\u80FD\u5F62\u6210\u73AF\u5F62\u94FE\u8868\n\n// JDK 1.8\uFF1A\u5C3E\u63D2\u6CD5\n// \u907F\u514D\u4E86\u73AF\u5F62\u94FE\u8868\u95EE\u9898\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"3. \u6269\u5BB9\u4F18\u5316"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// JDK 1.7\uFF1A\u91CD\u65B0\u8BA1\u7B97\u6240\u6709\u5143\u7D20\u7684hash\nfor (Entry<K,V> e : table) {\n    int index = indexFor(e.hash, newCapacity);\n}\n\n// JDK 1.8\uFF1A\u5143\u7D20\u4F4D\u7F6E\u53EA\u6709\u4E24\u79CD\u53EF\u80FD\n// \u539F\u4F4D\u7F6E \u6216 \u539F\u4F4D\u7F6E+oldCap\n// \u4E0D\u9700\u8981\u91CD\u65B0\u8BA1\u7B97hash\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"4. hash\u7B97\u6CD5\u4F18\u5316"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// JDK 1.7\nint hash = hash(key);\nint index = indexFor(hash, table.length);\n\n// JDK 1.8\uFF1A\u6270\u52A8\u51FD\u6570\u7B80\u5316\nstatic final int hash(Object key) {\n    int h;\n    return (key == null) ? 0 : (h = key.hashCode()) ^ (h >>> 16);\n}\n"})}),"\n",(0,a.jsx)(e.h3,{id:"18-java-\u4E2D\u7684-linkedhashmap-\u662F\u4EC0\u4E48",children:"18. Java \u4E2D\u7684 LinkedHashMap \u662F\u4EC0\u4E48\uFF1F"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:"LinkedHashMap\u662FHashMap\u7684\u5B50\u7C7B\uFF0C\u7EF4\u62A4\u4E86\u63D2\u5165\u987A\u5E8F\u6216\u8BBF\u95EE\u987A\u5E8F\u3002"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u5B9E\u73B0\u539F\u7406\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"public class LinkedHashMap<K,V> extends HashMap<K,V> {\n    // \u53CC\u5411\u94FE\u8868\u5934\u5C3E\u8282\u70B9\n    transient LinkedHashMap.Entry<K,V> head;\n    transient LinkedHashMap.Entry<K,V> tail;\n    \n    // \u6392\u5E8F\u6A21\u5F0F\uFF1Atrue=\u8BBF\u95EE\u987A\u5E8F\uFF0Cfalse=\u63D2\u5165\u987A\u5E8F\n    final boolean accessOrder;\n    \n    static class Entry<K,V> extends HashMap.Node<K,V> {\n        Entry<K,V> before, after;  // \u53CC\u5411\u94FE\u8868\u6307\u9488\n    }\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u4F7F\u7528\u793A\u4F8B\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'// 1. \u63D2\u5165\u987A\u5E8F\uFF08\u9ED8\u8BA4\uFF09\nMap<String, Integer> map = new LinkedHashMap<>();\nmap.put("a", 1);\nmap.put("c", 3);\nmap.put("b", 2);\n// \u904D\u5386\u987A\u5E8F\uFF1Aa, c, b\n\n// 2. \u8BBF\u95EE\u987A\u5E8F\uFF08LRU\u7F13\u5B58\uFF09\nMap<String, Integer> lru = new LinkedHashMap<>(16, 0.75f, true);\nlru.put("a", 1);\nlru.put("b", 2);\nlru.get("a");  // a\u88AB\u8BBF\u95EE\uFF0C\u79FB\u5230\u672B\u5C3E\n// \u904D\u5386\u987A\u5E8F\uFF1Ab, a\n\n// 3. \u5B9E\u73B0LRU\u7F13\u5B58\nclass LRUCache<K, V> extends LinkedHashMap<K, V> {\n    private int capacity;\n    \n    public LRUCache(int capacity) {\n        super(capacity, 0.75f, true);\n        this.capacity = capacity;\n    }\n    \n    @Override\n    protected boolean removeEldestEntry(Map.Entry<K, V> eldest) {\n        return size() > capacity;\n    }\n}\n'})}),"\n",(0,a.jsx)(e.h3,{id:"19-java-\u4E2D\u7684-treemap-\u662F\u4EC0\u4E48",children:"19. Java \u4E2D\u7684 TreeMap \u662F\u4EC0\u4E48\uFF1F"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:"TreeMap\u662F\u57FA\u4E8E\u7EA2\u9ED1\u6811\u5B9E\u73B0\u7684\u6709\u5E8FMap\u3002"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u6838\u5FC3\u7279\u70B9\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"public class TreeMap<K,V> extends AbstractMap<K,V> {\n    private transient Entry<K,V> root;  // \u7EA2\u9ED1\u6811\u6839\u8282\u70B9\n    private final Comparator<? super K> comparator;\n    \n    static final class Entry<K,V> {\n        K key;\n        V value;\n        Entry<K,V> left;\n        Entry<K,V> right;\n        Entry<K,V> parent;\n        boolean color = BLACK;\n    }\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7279\u6027\uFF1A"})}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsx)(e.li,{children:"\u6709\u5E8F\uFF1A\u6309key\u81EA\u7136\u987A\u5E8F\u6216\u81EA\u5B9A\u4E49\u987A\u5E8F"}),"\n",(0,a.jsx)(e.li,{children:"\u65F6\u95F4\u590D\u6742\u5EA6\uFF1AO(log n)"}),"\n",(0,a.jsx)(e.li,{children:"\u4E0D\u5141\u8BB8null key"}),"\n",(0,a.jsx)(e.li,{children:"\u975E\u7EBF\u7A0B\u5B89\u5168"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u4F7F\u7528\u793A\u4F8B\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'// 1. \u81EA\u7136\u987A\u5E8F\nTreeMap<Integer, String> map = new TreeMap<>();\nmap.put(3, "three");\nmap.put(1, "one");\nmap.put(2, "two");\n// \u904D\u5386\u987A\u5E8F\uFF1A1, 2, 3\n\n// 2. \u81EA\u5B9A\u4E49\u6392\u5E8F\nTreeMap<String, Integer> map = new TreeMap<>(\n    (a, b) -> b.compareTo(a)  // \u964D\u5E8F\n);\n\n// 3. \u8303\u56F4\u67E5\u8BE2\nmap.subMap(1, 5);      // [1, 5)\nmap.headMap(3);        // < 3\nmap.tailMap(3);        // >= 3\nmap.firstKey();        // \u6700\u5C0Fkey\nmap.lastKey();         // \u6700\u5927key\n'})}),"\n",(0,a.jsx)(e.h3,{id:"20-java-\u4E2D\u7684-identityhashmap-\u662F\u4EC0\u4E48",children:"20. Java \u4E2D\u7684 IdentityHashMap \u662F\u4EC0\u4E48\uFF1F"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:"IdentityHashMap\u4F7F\u7528==\u800C\u4E0D\u662Fequals()\u6BD4\u8F83key\u3002"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u4E0EHashMap\u7684\u533A\u522B\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'// HashMap\uFF1A\u4F7F\u7528equals()\nMap<String, Integer> hashMap = new HashMap<>();\nString s1 = new String("key");\nString s2 = new String("key");\nhashMap.put(s1, 1);\nhashMap.put(s2, 2);\nSystem.out.println(hashMap.size());  // 1\uFF08s1.equals(s2)\uFF09\n\n// IdentityHashMap\uFF1A\u4F7F\u7528==\nMap<String, Integer> identityMap = new IdentityHashMap<>();\nidentityMap.put(s1, 1);\nidentityMap.put(s2, 2);\nSystem.out.println(identityMap.size());  // 2\uFF08s1 != s2\uFF09\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u5B9E\u73B0\u539F\u7406\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"public class IdentityHashMap<K,V> {\n    // \u4F7F\u7528System.identityHashCode()\n    private static int hash(Object x) {\n        return System.identityHashCode(x);\n    }\n    \n    // \u4F7F\u7528==\u6BD4\u8F83\n    private static boolean eq(Object x, Object y) {\n        return x == y;\n    }\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u4F7F\u7528\u573A\u666F\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// 1. \u5BF9\u8C61\u56FE\u904D\u5386\uFF08\u907F\u514D\u5FAA\u73AF\u5F15\u7528\uFF09\nSet<Object> visited = Collections.newSetFromMap(\n    new IdentityHashMap<>()\n);\n\n// 2. \u4EE3\u7406\u5BF9\u8C61\u6620\u5C04\nMap<Object, ProxyInfo> proxyMap = new IdentityHashMap<>();\n\n// 3. \u5E8F\u5217\u5316/\u53CD\u5E8F\u5217\u5316\n"})}),"\n",(0,a.jsx)(e.h3,{id:"21-java-\u4E2D\u7684-weakhashmap-\u662F\u4EC0\u4E48",children:"21. Java \u4E2D\u7684 WeakHashMap \u662F\u4EC0\u4E48\uFF1F"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:"WeakHashMap\u7684key\u662F\u5F31\u5F15\u7528\uFF0C\u5F53key\u6CA1\u6709\u5F3A\u5F15\u7528\u65F6\u4F1A\u88ABGC\u56DE\u6536\u3002"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u5B9E\u73B0\u539F\u7406\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"public class WeakHashMap<K,V> {\n    private Entry<K,V>[] table;\n    private final ReferenceQueue<Object> queue = new ReferenceQueue<>();\n    \n    private static class Entry<K,V> extends WeakReference<Object> {\n        V value;\n        int hash;\n        Entry<K,V> next;\n        \n        Entry(Object key, V value, ReferenceQueue<Object> queue) {\n            super(key, queue);  // key\u662F\u5F31\u5F15\u7528\n            this.value = value;\n        }\n    }\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u4F7F\u7528\u793A\u4F8B\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'// \u666E\u901AHashMap\uFF1Akey\u4E0D\u4F1A\u88AB\u56DE\u6536\nMap<Object, String> map = new HashMap<>();\nObject key = new Object();\nmap.put(key, "value");\nkey = null;\nSystem.gc();\nSystem.out.println(map.size());  // 1\uFF08key\u4ECD\u5728map\u4E2D\uFF09\n\n// WeakHashMap\uFF1Akey\u4F1A\u88AB\u56DE\u6536\nMap<Object, String> weakMap = new WeakHashMap<>();\nObject weakKey = new Object();\nweakMap.put(weakKey, "value");\nweakKey = null;\nSystem.gc();\nSystem.out.println(weakMap.size());  // 0\uFF08key\u88AB\u56DE\u6536\uFF09\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u4F7F\u7528\u573A\u666F\uFF1A"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"\u7F13\u5B58\u5B9E\u73B0"}),"\n",(0,a.jsx)(e.li,{children:"\u76D1\u542C\u5668\u6CE8\u518C"}),"\n",(0,a.jsx)(e.li,{children:"\u907F\u514D\u5185\u5B58\u6CC4\u6F0F"}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"22-java-\u4E2D-concurrenthashmap-17-\u548C-18-\u4E4B\u95F4\u6709\u54EA\u4E9B\u533A\u522B",children:"22. Java \u4E2D ConcurrentHashMap 1.7 \u548C 1.8 \u4E4B\u95F4\u6709\u54EA\u4E9B\u533A\u522B\uFF1F"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"\u7279\u6027"}),(0,a.jsx)(e.th,{children:"JDK 1.7"}),(0,a.jsx)(e.th,{children:"JDK 1.8"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u6570\u636E\u7ED3\u6784"}),(0,a.jsx)(e.td,{children:"Segment\u6570\u7EC4 + HashEntry\u6570\u7EC4"}),(0,a.jsx)(e.td,{children:"Node\u6570\u7EC4 + \u94FE\u8868 + \u7EA2\u9ED1\u6811"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u9501\u673A\u5236"}),(0,a.jsx)(e.td,{children:"\u5206\u6BB5\u9501\uFF08Segment\u7EE7\u627FReentrantLock\uFF09"}),(0,a.jsx)(e.td,{children:"CAS + synchronized"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u9501\u7C92\u5EA6"}),(0,a.jsx)(e.td,{children:"\u9501\u6574\u4E2ASegment"}),(0,a.jsx)(e.td,{children:"\u9501\u5355\u4E2ANode"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u5E76\u53D1\u5EA6"}),(0,a.jsx)(e.td,{children:"Segment\u6570\u91CF\uFF08\u9ED8\u8BA416\uFF09"}),(0,a.jsx)(e.td,{children:"Node\u6570\u91CF"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"\u67E5\u8BE2\u64CD\u4F5C"}),(0,a.jsx)(e.td,{children:"\u9700\u8981\u52A0\u9501"}),(0,a.jsx)(e.td,{children:"\u65E0\u9501\uFF08volatile\uFF09"})]})]})]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"JDK 1.7\u5B9E\u73B0\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"public class ConcurrentHashMap<K,V> {\n    final Segment<K,V>[] segments;\n    \n    static final class Segment<K,V> extends ReentrantLock {\n        transient volatile HashEntry<K,V>[] table;\n        \n        V put(K key, int hash, V value) {\n            lock();  // \u9501\u5B9A\u6574\u4E2ASegment\n            try {\n                // \u63D2\u5165\u903B\u8F91\n            } finally {\n                unlock();\n            }\n        }\n    }\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"JDK 1.8\u5B9E\u73B0\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"public class ConcurrentHashMap<K,V> {\n    transient volatile Node<K,V>[] table;\n    \n    public V put(K key, V value) {\n        int hash = spread(key.hashCode());\n        for (Node<K,V>[] tab = table;;) {\n            if ((f = tabAt(tab, i)) == null) {\n                // CAS\u63D2\u5165\n                if (casTabAt(tab, i, null, new Node<>(hash, key, value)))\n                    break;\n            } else {\n                // synchronized\u9501\u5B9A\u5355\u4E2A\u6876\n                synchronized (f) {\n                    // \u63D2\u5165\u903B\u8F91\n                }\n            }\n        }\n    }\n}\n"})}),"\n",(0,a.jsx)(e.h3,{id:"23-java-\u4E2D-concurrenthashmap-\u7684-get-\u65B9\u6CD5\u662F\u5426\u9700\u8981\u52A0\u9501",children:"23. Java \u4E2D ConcurrentHashMap \u7684 get \u65B9\u6CD5\u662F\u5426\u9700\u8981\u52A0\u9501\uFF1F"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u4E0D\u9700\u8981\u52A0\u9501"}),"\uFF0C\u4F7F\u7528volatile\u4FDD\u8BC1\u53EF\u89C1\u6027\u3002"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u5B9E\u73B0\u539F\u7406\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"public class ConcurrentHashMap<K,V> {\n    // table\u7528volatile\u4FEE\u9970\n    transient volatile Node<K,V>[] table;\n    \n    static class Node<K,V> {\n        final int hash;\n        final K key;\n        volatile V val;      // value\u7528volatile\u4FEE\u9970\n        volatile Node<K,V> next;  // next\u7528volatile\u4FEE\u9970\n    }\n    \n    public V get(Object key) {\n        Node<K,V>[] tab;\n        Node<K,V> e, p;\n        int n, eh;\n        K ek;\n        int h = spread(key.hashCode());\n        \n        // \u65E0\u9501\u8BFB\u53D6\n        if ((tab = table) != null && (n = tab.length) > 0 &&\n            (e = tabAt(tab, (n - 1) & h)) != null) {\n            if ((eh = e.hash) == h) {\n                if ((ek = e.key) == key || (ek != null && key.equals(ek)))\n                    return e.val;\n            }\n            // \u904D\u5386\u94FE\u8868\u6216\u7EA2\u9ED1\u6811\n            while ((e = e.next) != null) {\n                if (e.hash == h &&\n                    ((ek = e.key) == key || (ek != null && key.equals(ek))))\n                    return e.val;\n            }\n        }\n        return null;\n    }\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u4E3A\u4EC0\u4E48\u4E0D\u9700\u8981\u52A0\u9501\uFF1A"})}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsx)(e.li,{children:"table\u3001value\u3001next\u90FD\u7528volatile\u4FEE\u9970"}),"\n",(0,a.jsx)(e.li,{children:"volatile\u4FDD\u8BC1\u53EF\u89C1\u6027\u548C\u6709\u5E8F\u6027"}),"\n",(0,a.jsx)(e.li,{children:"\u8BFB\u64CD\u4F5C\u4E0D\u4F1A\u4FEE\u6539\u6570\u636E"}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"24-java-\u4E3A\u4EC0\u4E48-concurrenthashmap-\u4E0D\u652F\u6301-key-\u6216-value-\u4E3A-null",children:"24. Java \u4E3A\u4EC0\u4E48 ConcurrentHashMap \u4E0D\u652F\u6301 key \u6216 value \u4E3A null\uFF1F"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u539F\u56E0\uFF1A\u907F\u514D\u4E8C\u4E49\u6027\u95EE\u9898"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u95EE\u9898\u573A\u666F\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'// HashMap\u5141\u8BB8null\nMap<String, String> map = new HashMap<>();\nmap.put("key", null);\n\n// \u60C5\u51B51\uFF1Akey\u5B58\u5728\uFF0Cvalue\u4E3Anull\nString value = map.get("key");  // null\n\n// \u60C5\u51B52\uFF1Akey\u4E0D\u5B58\u5728\nString value = map.get("notExist");  // null\n\n// \u65E0\u6CD5\u533A\u5206\u8FD9\u4E24\u79CD\u60C5\u51B5\uFF01\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u5728\u5E76\u53D1\u73AF\u5883\u4E0B\u7684\u95EE\u9898\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'ConcurrentHashMap<String, String> map = new ConcurrentHashMap<>();\n\n// \u7EBF\u7A0B1\nif (map.containsKey("key")) {\n    String value = map.get("key");  // \u53EF\u80FD\u8FD4\u56DEnull\n    // \u65E0\u6CD5\u5224\u65AD\u662Fvalue\u4E3Anull\u8FD8\u662F\u88AB\u5176\u4ED6\u7EBF\u7A0B\u5220\u9664\u4E86\n}\n\n// \u7EBF\u7A0B2\uFF08\u540C\u65F6\u6267\u884C\uFF09\nmap.remove("key");\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"HashMap\u4E3A\u4EC0\u4E48\u53EF\u4EE5\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'// HashMap\u662F\u5355\u7EBF\u7A0B\u7684\uFF0C\u53EF\u4EE5\u7528containsKey\u5224\u65AD\nif (map.containsKey("key")) {\n    // \u786E\u5B9Akey\u5B58\u5728\n    String value = map.get("key");\n}\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Doug Lea\u7684\u89E3\u91CA\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u5728\u5E76\u53D1\u73AF\u5883\u4E2D\uFF0C\u5982\u679C\u5141\u8BB8null\u503C\uFF0C\n\u4F60\u65E0\u6CD5\u5224\u65ADget()\u8FD4\u56DEnull\u662F\u56E0\u4E3A\uFF1A\n1. key\u4E0D\u5B58\u5728\n2. key\u5B58\u5728\u4F46value\u4E3Anull\n3. key\u521A\u88AB\u5176\u4ED6\u7EBF\u7A0B\u5220\u9664\n\n\u8FD9\u4F1A\u5BFC\u81F4\u7A0B\u5E8F\u903B\u8F91\u6DF7\u4E71\u3002\n"})}),"\n",(0,a.jsx)(e.h3,{id:"25-java-\u4E2D\u7684-copyonwritearraylist-\u662F\u4EC0\u4E48",children:"25. Java \u4E2D\u7684 CopyOnWriteArrayList \u662F\u4EC0\u4E48\uFF1F"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:"CopyOnWriteArrayList\u662F\u7EBF\u7A0B\u5B89\u5168\u7684List\uFF0C\u5199\u65F6\u590D\u5236\u6574\u4E2A\u6570\u7EC4\u3002"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u5B9E\u73B0\u539F\u7406\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"public class CopyOnWriteArrayList<E> {\n    private transient volatile Object[] array;\n    final transient ReentrantLock lock = new ReentrantLock();\n    \n    // \u8BFB\u64CD\u4F5C\uFF1A\u65E0\u9501\n    public E get(int index) {\n        return (E) array[index];\n    }\n    \n    // \u5199\u64CD\u4F5C\uFF1A\u590D\u5236\u6570\u7EC4\n    public boolean add(E e) {\n        lock.lock();\n        try {\n            Object[] elements = getArray();\n            int len = elements.length;\n            // \u590D\u5236\u6574\u4E2A\u6570\u7EC4\n            Object[] newElements = Arrays.copyOf(elements, len + 1);\n            newElements[len] = e;\n            // \u539F\u5B50\u66FF\u6362\n            setArray(newElements);\n            return true;\n        } finally {\n            lock.unlock();\n        }\n    }\n    \n    // \u8FED\u4EE3\u5668\uFF1A\u4F7F\u7528\u5FEB\u7167\n    public Iterator<E> iterator() {\n        return new COWIterator<E>(getArray(), 0);\n    }\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7279\u70B9\uFF1A"})}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsx)(e.li,{children:"\u8BFB\u64CD\u4F5C\u5B8C\u5168\u65E0\u9501"}),"\n",(0,a.jsx)(e.li,{children:"\u5199\u64CD\u4F5C\u590D\u5236\u6574\u4E2A\u6570\u7EC4"}),"\n",(0,a.jsx)(e.li,{children:"\u8FED\u4EE3\u5668\u4E0D\u4F1A\u629BConcurrentModificationException"}),"\n",(0,a.jsx)(e.li,{children:"\u9002\u5408\u8BFB\u591A\u5199\u5C11\u573A\u666F"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u4F7F\u7528\u573A\u666F\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// \u76D1\u542C\u5668\u5217\u8868\nList<Listener> listeners = new CopyOnWriteArrayList<>();\n\n// \u9ED1\u540D\u5355/\u767D\u540D\u5355\nList<String> blacklist = new CopyOnWriteArrayList<>();\n\n// \u914D\u7F6E\u4FE1\u606F\nList<Config> configs = new CopyOnWriteArrayList<>();\n"})}),"\n",(0,a.jsx)(e.h3,{id:"26-java-\u4F60\u9047\u5230\u8FC7-concurrentmodificationexception-\u9519\u8BEF\u5417\u5B83\u662F\u5982\u4F55\u4EA7\u751F\u7684",children:"26. Java \u4F60\u9047\u5230\u8FC7 ConcurrentModificationException \u9519\u8BEF\u5417\uFF1F\u5B83\u662F\u5982\u4F55\u4EA7\u751F\u7684\uFF1F"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u4EA7\u751F\u539F\u56E0\uFF1A"}),"\n\u5728\u8FED\u4EE3\u96C6\u5408\u65F6\uFF0C\u96C6\u5408\u88AB\u4FEE\u6539\u4E86\u3002"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u89E6\u53D1\u573A\u666F\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"1. \u5355\u7EBF\u7A0B\u573A\u666F\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'List<String> list = new ArrayList<>();\nlist.add("a");\nlist.add("b");\nlist.add("c");\n\n// \u9519\u8BEF\uFF1A\u8FED\u4EE3\u65F6\u5220\u9664\nfor (String item : list) {\n    if (item.equals("b")) {\n        list.remove(item);  // ConcurrentModificationException\n    }\n}\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"2. \u591A\u7EBF\u7A0B\u573A\u666F\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'List<String> list = new ArrayList<>();\n\n// \u7EBF\u7A0B1\uFF1A\u8FED\u4EE3\nnew Thread(() -> {\n    for (String item : list) {\n        System.out.println(item);\n    }\n}).start();\n\n// \u7EBF\u7A0B2\uFF1A\u4FEE\u6539\nnew Thread(() -> {\n    list.add("new");  // ConcurrentModificationException\n}).start();\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u5B9E\u73B0\u673A\u5236\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"public class ArrayList<E> {\n    protected transient int modCount = 0;  // \u4FEE\u6539\u8BA1\u6570\n    \n    private class Itr implements Iterator<E> {\n        int expectedModCount = modCount;\n        \n        public E next() {\n            checkForComodification();\n            // ...\n        }\n        \n        final void checkForComodification() {\n            if (modCount != expectedModCount)\n                throw new ConcurrentModificationException();\n        }\n    }\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u89E3\u51B3\u65B9\u6848\uFF1A"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"1. \u4F7F\u7528\u8FED\u4EE3\u5668\u5220\u9664\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'Iterator<String> it = list.iterator();\nwhile (it.hasNext()) {\n    String item = it.next();\n    if (item.equals("b")) {\n        it.remove();  // \u6B63\u786E\n    }\n}\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"2. \u4F7F\u7528removeIf\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'list.removeIf(item -> item.equals("b"));\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"3. \u4F7F\u7528\u5E76\u53D1\u96C6\u5408\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"List<String> list = new CopyOnWriteArrayList<>();\n// \u8FED\u4EE3\u65F6\u4FEE\u6539\u4E0D\u4F1A\u629B\u5F02\u5E38\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"4. \u4F7F\u7528Stream\uFF1A"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'list = list.stream()\n    .filter(item -> !item.equals("b"))\n    .collect(Collectors.toList());\n'})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"\u5B66\u4E60\u6307\u5357",children:"\u5B66\u4E60\u6307\u5357"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u6838\u5FC3\u8981\u70B9\uFF1A"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Java \u96C6\u5408\u6846\u67B6\u4F53\u7CFB\u7ED3\u6784"}),"\n",(0,a.jsx)(e.li,{children:"HashMap \u548C ConcurrentHashMap \u5B9E\u73B0\u539F\u7406"}),"\n",(0,a.jsx)(e.li,{children:"\u96C6\u5408\u7C7B\u7684\u6027\u80FD\u7279\u70B9\u548C\u4F7F\u7528\u573A\u666F"}),"\n",(0,a.jsx)(e.li,{children:"\u7EBF\u7A0B\u5B89\u5168\u96C6\u5408\u7684\u5B9E\u73B0\u673A\u5236"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u5B66\u4E60\u8DEF\u5F84\u5EFA\u8BAE\uFF1A"})}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsx)(e.li,{children:"\u638C\u63E1\u96C6\u5408\u6846\u67B6\u7684\u57FA\u672C\u7ED3\u6784"}),"\n",(0,a.jsx)(e.li,{children:"\u6DF1\u5165\u7406\u89E3 HashMap \u7684\u5B9E\u73B0\u539F\u7406"}),"\n",(0,a.jsx)(e.li,{children:"\u719F\u6089\u5E76\u53D1\u96C6\u5408\u7684\u4F7F\u7528"}),"\n",(0,a.jsx)(e.li,{children:"\u638C\u63E1\u96C6\u5408\u7C7B\u7684\u6027\u80FD\u4F18\u5316"}),"\n"]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"\u5B66\u4E60\u6307\u5357-1",children:"\u5B66\u4E60\u6307\u5357"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u6838\u5FC3\u8981\u70B9\uFF1A"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Java \u96C6\u5408\u6846\u67B6\u4F53\u7CFB\u7ED3\u6784"}),"\n",(0,a.jsx)(e.li,{children:"HashMap \u548C ConcurrentHashMap \u5B9E\u73B0\u539F\u7406"}),"\n",(0,a.jsx)(e.li,{children:"\u96C6\u5408\u7C7B\u7684\u6027\u80FD\u7279\u70B9\u548C\u4F7F\u7528\u573A\u666F"}),"\n",(0,a.jsx)(e.li,{children:"\u7EBF\u7A0B\u5B89\u5168\u96C6\u5408\u7684\u5B9E\u73B0\u673A\u5236"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u5B66\u4E60\u8DEF\u5F84\u5EFA\u8BAE\uFF1A"})}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsx)(e.li,{children:"\u638C\u63E1\u96C6\u5408\u6846\u67B6\u7684\u57FA\u672C\u7ED3\u6784"}),"\n",(0,a.jsx)(e.li,{children:"\u6DF1\u5165\u7406\u89E3 HashMap \u7684\u5B9E\u73B0\u539F\u7406"}),"\n",(0,a.jsx)(e.li,{children:"\u719F\u6089\u5E76\u53D1\u96C6\u5408\u7684\u4F7F\u7528"}),"\n",(0,a.jsx)(e.li,{children:"\u638C\u63E1\u96C6\u5408\u7C7B\u7684\u6027\u80FD\u4F18\u5316"}),"\n"]})]})}function j(n={}){let{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(h,{...n})}):h(n)}},28453:function(n,e,s){s.d(e,{R:()=>l,x:()=>t});var r=s(96540);let a={},i=r.createContext(a);function l(n){let e=r.useContext(i);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:l(n.components),r.createElement(i.Provider,{value:e},n.children)}}}]);