"use strict";(self.webpackChunkfullstack_dev_blog=self.webpackChunkfullstack_dev_blog||[]).push([["29193"],{43112:function(n,e,i){i.r(e),i.d(e,{metadata:()=>l,default:()=>h,frontMatter:()=>t,contentTitle:()=>d,toc:()=>c,assets:()=>o});var l=JSON.parse('{"id":"digital-twin/opentwins-pc-monitor-tutorial","title":"\u5B9E\u6218\u6848\u4F8B\uFF1A\u672C\u5730\u7535\u8111\u76D1\u63A7\u5927\u5C4F","description":"\u4F7F\u7528 OpenTwins \u521B\u5EFA\u7535\u8111\u6027\u80FD\u76D1\u63A7\u7CFB\u7EDF\u548C\u53EF\u89C6\u5316\u5927\u5C4F\u7684\u5B8C\u6574\u6559\u7A0B","source":"@site/docs/digital-twin/opentwins-pc-monitor-tutorial.mdx","sourceDirName":"digital-twin","slug":"/digital-twin/opentwins-pc-monitor-tutorial","permalink":"/en/docs/digital-twin/opentwins-pc-monitor-tutorial","draft":false,"unlisted":false,"editUrl":"https://github.com/MasterLiu93/blog-web/tree/main/docs/digital-twin/opentwins-pc-monitor-tutorial.mdx","tags":[{"inline":true,"label":"\u6570\u5B57\u5B6A\u751F","permalink":"/en/docs/tags/\u6570\u5B57\u5B6A\u751F"},{"inline":true,"label":"OpenTwins","permalink":"/en/docs/tags/open-twins"},{"inline":true,"label":"\u5B9E\u6218\u6848\u4F8B","permalink":"/en/docs/tags/\u5B9E\u6218\u6848\u4F8B"},{"inline":true,"label":"Grafana","permalink":"/en/docs/tags/grafana"},{"inline":true,"label":"\u76D1\u63A7\u5927\u5C4F","permalink":"/en/docs/tags/\u76D1\u63A7\u5927\u5C4F"},{"inline":true,"label":"Python","permalink":"/en/docs/tags/python"}],"version":"current","lastUpdatedBy":"laby","lastUpdatedAt":1761022402000,"sidebarPosition":8,"frontMatter":{"sidebar_position":8,"title":"\u5B9E\u6218\u6848\u4F8B\uFF1A\u672C\u5730\u7535\u8111\u76D1\u63A7\u5927\u5C4F","description":"\u4F7F\u7528 OpenTwins \u521B\u5EFA\u7535\u8111\u6027\u80FD\u76D1\u63A7\u7CFB\u7EDF\u548C\u53EF\u89C6\u5316\u5927\u5C4F\u7684\u5B8C\u6574\u6559\u7A0B","tags":["\u6570\u5B57\u5B6A\u751F","OpenTwins","\u5B9E\u6218\u6848\u4F8B","Grafana","\u76D1\u63A7\u5927\u5C4F","Python"]},"sidebar":"tutorialSidebar","previous":{"title":"OpenTwins Web \u754C\u9762\u4F7F\u7528\u6307\u5357","permalink":"/en/docs/digital-twin/opentwins-web-ui-guide"},"next":{"title":"OpenTwins Linux \u79BB\u7EBF\u73AF\u5883\u90E8\u7F72\u6307\u5357","permalink":"/en/docs/digital-twin/opentwins-linux-offline-deployment"}}'),s=i(74848),r=i(28453);let t={sidebar_position:8,title:"\u5B9E\u6218\u6848\u4F8B\uFF1A\u672C\u5730\u7535\u8111\u76D1\u63A7\u5927\u5C4F",description:"\u4F7F\u7528 OpenTwins \u521B\u5EFA\u7535\u8111\u6027\u80FD\u76D1\u63A7\u7CFB\u7EDF\u548C\u53EF\u89C6\u5316\u5927\u5C4F\u7684\u5B8C\u6574\u6559\u7A0B",tags:["\u6570\u5B57\u5B6A\u751F","OpenTwins","\u5B9E\u6218\u6848\u4F8B","Grafana","\u76D1\u63A7\u5927\u5C4F","Python"]},d="\u5B9E\u6218\u6848\u4F8B\uFF1A\u672C\u5730\u7535\u8111\u76D1\u63A7\u5927\u5C4F",o={},c=[{value:"\u4E00\u3001\u6848\u4F8B\u6982\u8FF0",id:"\u4E00\u6848\u4F8B\u6982\u8FF0",level:2},{value:"1.1 \u529F\u80FD\u76EE\u6807",id:"11-\u529F\u80FD\u76EE\u6807",level:3},{value:"1.2 \u7CFB\u7EDF\u67B6\u6784",id:"12-\u7CFB\u7EDF\u67B6\u6784",level:3},{value:"1.3 \u6280\u672F\u6808",id:"13-\u6280\u672F\u6808",level:3},{value:"1.4 \u524D\u7F6E\u6761\u4EF6",id:"14-\u524D\u7F6E\u6761\u4EF6",level:3},{value:"\u4E8C\u3001\u5FEB\u901F\u5F00\u59CB\uFF085 \u5206\u949F\u4F53\u9A8C\uFF09",id:"\u4E8C\u5FEB\u901F\u5F00\u59CB5-\u5206\u949F\u4F53\u9A8C",level:2},{value:"2.1 \u914D\u7F6E Grafana",id:"21-\u914D\u7F6E-grafana",level:3},{value:"2.2 \u521B\u5EFA\u6570\u5B57\u5B6A\u751F",id:"22-\u521B\u5EFA\u6570\u5B57\u5B6A\u751F",level:3},{value:"2.3 \u9A8C\u8BC1\u521B\u5EFA",id:"23-\u9A8C\u8BC1\u521B\u5EFA",level:3},{value:"\u4E09\u3001\u6570\u636E\u91C7\u96C6\uFF08\u65E0\u9700 Python\uFF09",id:"\u4E09\u6570\u636E\u91C7\u96C6\u65E0\u9700-python",level:2},{value:"3.1 \u4F7F\u7528 PowerShell \u91C7\u96C6\u6570\u636E",id:"31-\u4F7F\u7528-powershell-\u91C7\u96C6\u6570\u636E",level:3},{value:"3.2 \u624B\u52A8\u53D1\u9001\u4E00\u6B21\u6570\u636E\uFF08\u6D4B\u8BD5\uFF09",id:"32-\u624B\u52A8\u53D1\u9001\u4E00\u6B21\u6570\u636E\u6D4B\u8BD5",level:3},{value:"3.3 \u67E5\u770B\u66F4\u65B0\u540E\u7684\u6570\u636E",id:"33-\u67E5\u770B\u66F4\u65B0\u540E\u7684\u6570\u636E",level:3},{value:"\u56DB\u3001\u6301\u7EED\u76D1\u63A7\uFF08\u53EF\u9009\uFF09",id:"\u56DB\u6301\u7EED\u76D1\u63A7\u53EF\u9009",level:2},{value:"4.1 \u65B9\u6CD5 1\uFF1A\u4F7F\u7528 HTML \u7BA1\u7406\u5668\u624B\u52A8\u66F4\u65B0",id:"41-\u65B9\u6CD5-1\u4F7F\u7528-html-\u7BA1\u7406\u5668\u624B\u52A8\u66F4\u65B0",level:3},{value:"4.2 \u65B9\u6CD5 2\uFF1APowerShell \u5FAA\u73AF\u811A\u672C",id:"42-\u65B9\u6CD5-2powershell-\u5FAA\u73AF\u811A\u672C",level:3},{value:"4.3 \u8FD0\u884C\u76D1\u63A7\u811A\u672C",id:"43-\u8FD0\u884C\u76D1\u63A7\u811A\u672C",level:3},{value:"4.4 \u65B9\u6CD5 3\uFF1APython \u811A\u672C\uFF08\u53EF\u9009\uFF09",id:"44-\u65B9\u6CD5-3python-\u811A\u672C\u53EF\u9009",level:3},{value:"\u4E94\u3001\u521B\u5EFA Grafana \u53EF\u89C6\u5316\u5927\u5C4F",id:"\u4E94\u521B\u5EFA-grafana-\u53EF\u89C6\u5316\u5927\u5C4F",level:2},{value:"5.1 \u767B\u5F55 Grafana",id:"51-\u767B\u5F55-grafana",level:3},{value:"5.2 \u9A8C\u8BC1\u6570\u636E\u6E90",id:"52-\u9A8C\u8BC1\u6570\u636E\u6E90",level:3},{value:"5.3 \u521B\u5EFA\u65B0\u4EEA\u8868\u677F",id:"53-\u521B\u5EFA\u65B0\u4EEA\u8868\u677F",level:3},{value:"5.4 \u521B\u5EFA CPU \u4F7F\u7528\u7387\u9762\u677F",id:"54-\u521B\u5EFA-cpu-\u4F7F\u7528\u7387\u9762\u677F",level:3},{value:"\u6B65\u9AA4 1\uFF1A\u9009\u62E9\u6570\u636E\u6E90",id:"\u6B65\u9AA4-1\u9009\u62E9\u6570\u636E\u6E90",level:4},{value:"\u6B65\u9AA4 2\uFF1A\u8F93\u5165\u67E5\u8BE2\u8BED\u53E5",id:"\u6B65\u9AA4-2\u8F93\u5165\u67E5\u8BE2\u8BED\u53E5",level:4},{value:"\u6B65\u9AA4 3\uFF1A\u6D4B\u8BD5\u67E5\u8BE2",id:"\u6B65\u9AA4-3\u6D4B\u8BD5\u67E5\u8BE2",level:4},{value:"\u6B65\u9AA4 4\uFF1A\u914D\u7F6E\u9762\u677F\u6837\u5F0F",id:"\u6B65\u9AA4-4\u914D\u7F6E\u9762\u677F\u6837\u5F0F",level:4},{value:"\u6B65\u9AA4 5\uFF1A\u4FDD\u5B58\u9762\u677F",id:"\u6B65\u9AA4-5\u4FDD\u5B58\u9762\u677F",level:4},{value:"5.5 \u521B\u5EFA\u5185\u5B58\u4F7F\u7528\u7387\u9762\u677F",id:"55-\u521B\u5EFA\u5185\u5B58\u4F7F\u7528\u7387\u9762\u677F",level:3},{value:"\u914D\u7F6E\u9762\u677F",id:"\u914D\u7F6E\u9762\u677F",level:4},{value:"5.6 \u521B\u5EFA\u78C1\u76D8\u4F7F\u7528\u7387\u9762\u677F",id:"56-\u521B\u5EFA\u78C1\u76D8\u4F7F\u7528\u7387\u9762\u677F",level:3},{value:"\u914D\u7F6E\u9762\u677F",id:"\u914D\u7F6E\u9762\u677F-1",level:4},{value:"5.7 \u521B\u5EFA\u8D8B\u52BF\u56FE\u9762\u677F",id:"57-\u521B\u5EFA\u8D8B\u52BF\u56FE\u9762\u677F",level:3},{value:"CPU \u8D8B\u52BF\u56FE",id:"cpu-\u8D8B\u52BF\u56FE",level:4},{value:"\u914D\u7F6E\u9762\u677F",id:"\u914D\u7F6E\u9762\u677F-2",level:4},{value:"5.8 \u521B\u5EFA\u7EDF\u8BA1\u5361\u7247",id:"58-\u521B\u5EFA\u7EDF\u8BA1\u5361\u7247",level:3},{value:"\u5F53\u524D CPU \u4F7F\u7528\u7387\u5361\u7247",id:"\u5F53\u524D-cpu-\u4F7F\u7528\u7387\u5361\u7247",level:4},{value:"\u914D\u7F6E\u9762\u677F",id:"\u914D\u7F6E\u9762\u677F-3",level:4},{value:"5.9 \u63A8\u8350\u7684\u5927\u5C4F\u5E03\u5C40",id:"59-\u63A8\u8350\u7684\u5927\u5C4F\u5E03\u5C40",level:3},{value:"5.10 \u4FDD\u5B58\u4EEA\u8868\u677F",id:"510-\u4FDD\u5B58\u4EEA\u8868\u677F",level:3},{value:"5.11 \u8BBE\u7F6E\u81EA\u52A8\u5237\u65B0",id:"511-\u8BBE\u7F6E\u81EA\u52A8\u5237\u65B0",level:3},{value:"5.12 \u5168\u5C4F\u663E\u793A",id:"512-\u5168\u5C4F\u663E\u793A",level:3},{value:"\u516D\u3001\u9AD8\u7EA7\u529F\u80FD",id:"\u516D\u9AD8\u7EA7\u529F\u80FD",level:2},{value:"6.1 \u6DFB\u52A0\u544A\u8B66",id:"61-\u6DFB\u52A0\u544A\u8B66",level:3},{value:"\u521B\u5EFA CPU \u9AD8\u4F7F\u7528\u7387\u544A\u8B66",id:"\u521B\u5EFA-cpu-\u9AD8\u4F7F\u7528\u7387\u544A\u8B66",level:4},{value:"6.2 \u76D1\u63A7\u591A\u53F0\u7535\u8111",id:"62-\u76D1\u63A7\u591A\u53F0\u7535\u8111",level:3},{value:"\u4FEE\u6539\u811A\u672C\u652F\u6301\u591A\u53F0\u7535\u8111",id:"\u4FEE\u6539\u811A\u672C\u652F\u6301\u591A\u53F0\u7535\u8111",level:4},{value:"\u5728 Grafana \u4E2D\u6DFB\u52A0\u53D8\u91CF",id:"\u5728-grafana-\u4E2D\u6DFB\u52A0\u53D8\u91CF",level:4},{value:"6.3 \u6DFB\u52A0\u7F51\u7EDC\u76D1\u63A7",id:"63-\u6DFB\u52A0\u7F51\u7EDC\u76D1\u63A7",level:3},{value:"6.4 \u6DFB\u52A0\u8FDB\u7A0B\u76D1\u63A7",id:"64-\u6DFB\u52A0\u8FDB\u7A0B\u76D1\u63A7",level:3},{value:"6.5 \u540E\u53F0\u8FD0\u884C\u811A\u672C",id:"65-\u540E\u53F0\u8FD0\u884C\u811A\u672C",level:3},{value:"\u65B9\u6CD5 1\uFF1A\u4F7F\u7528 Windows \u4EFB\u52A1\u8BA1\u5212\u7A0B\u5E8F",id:"\u65B9\u6CD5-1\u4F7F\u7528-windows-\u4EFB\u52A1\u8BA1\u5212\u7A0B\u5E8F",level:4},{value:"\u65B9\u6CD5 2\uFF1A\u521B\u5EFA\u6279\u5904\u7406\u6587\u4EF6",id:"\u65B9\u6CD5-2\u521B\u5EFA\u6279\u5904\u7406\u6587\u4EF6",level:4},{value:"\u65B9\u6CD5 3\uFF1A\u4F7F\u7528 pythonw\uFF08\u65E0\u7A97\u53E3\u8FD0\u884C\uFF09",id:"\u65B9\u6CD5-3\u4F7F\u7528-pythonw\u65E0\u7A97\u53E3\u8FD0\u884C",level:4},{value:"\u4E03\u3001\u6545\u969C\u6392\u67E5",id:"\u4E03\u6545\u969C\u6392\u67E5",level:2},{value:"7.1 \u5E38\u89C1\u95EE\u9898",id:"71-\u5E38\u89C1\u95EE\u9898",level:3},{value:"\u95EE\u9898 1\uFF1A\u811A\u672C\u65E0\u6CD5\u8FDE\u63A5 MQTT",id:"\u95EE\u9898-1\u811A\u672C\u65E0\u6CD5\u8FDE\u63A5-mqtt",level:4},{value:"\u95EE\u9898 2\uFF1AGrafana \u4E2D\u6CA1\u6709\u6570\u636E",id:"\u95EE\u9898-2grafana-\u4E2D\u6CA1\u6709\u6570\u636E",level:4},{value:"\u95EE\u9898 3\uFF1A\u6570\u636E\u4E0D\u66F4\u65B0",id:"\u95EE\u9898-3\u6570\u636E\u4E0D\u66F4\u65B0",level:4},{value:"\u95EE\u9898 4\uFF1APython \u6A21\u5757\u672A\u5B89\u88C5",id:"\u95EE\u9898-4python-\u6A21\u5757\u672A\u5B89\u88C5",level:4},{value:"7.2 \u8C03\u8BD5\u6280\u5DE7",id:"72-\u8C03\u8BD5\u6280\u5DE7",level:3},{value:"\u542F\u7528\u8BE6\u7EC6\u65E5\u5FD7",id:"\u542F\u7528\u8BE6\u7EC6\u65E5\u5FD7",level:4},{value:"\u67E5\u770B MQTT \u6D88\u606F",id:"\u67E5\u770B-mqtt-\u6D88\u606F",level:4},{value:"\u624B\u52A8\u6D4B\u8BD5 Ditto API",id:"\u624B\u52A8\u6D4B\u8BD5-ditto-api",level:4},{value:"\u516B\u3001\u6027\u80FD\u4F18\u5316",id:"\u516B\u6027\u80FD\u4F18\u5316",level:2},{value:"8.1 \u8C03\u6574\u91C7\u96C6\u9891\u7387",id:"81-\u8C03\u6574\u91C7\u96C6\u9891\u7387",level:3},{value:"8.2 \u6570\u636E\u4FDD\u7559\u7B56\u7565",id:"82-\u6570\u636E\u4FDD\u7559\u7B56\u7565",level:3},{value:"8.3 \u4F18\u5316 Grafana \u67E5\u8BE2",id:"83-\u4F18\u5316-grafana-\u67E5\u8BE2",level:3},{value:"\u4E5D\u3001\u6269\u5C55\u65B9\u6848",id:"\u4E5D\u6269\u5C55\u65B9\u6848",level:2},{value:"9.1 \u76D1\u63A7\u670D\u52A1\u5668\u96C6\u7FA4",id:"91-\u76D1\u63A7\u670D\u52A1\u5668\u96C6\u7FA4",level:3},{value:"9.2 \u79FB\u52A8\u7AEF\u8BBF\u95EE",id:"92-\u79FB\u52A8\u7AEF\u8BBF\u95EE",level:3},{value:"9.3 \u96C6\u6210\u544A\u8B66\u7CFB\u7EDF",id:"93-\u96C6\u6210\u544A\u8B66\u7CFB\u7EDF",level:3},{value:"9.4 \u6570\u636E\u5206\u6790",id:"94-\u6570\u636E\u5206\u6790",level:3},{value:"\u5341\u3001\u603B\u7ED3",id:"\u5341\u603B\u7ED3",level:2},{value:"10.1 \u5B66\u5230\u7684\u77E5\u8BC6",id:"101-\u5B66\u5230\u7684\u77E5\u8BC6",level:3},{value:"10.2 \u5B8C\u6574\u4EE3\u7801",id:"102-\u5B8C\u6574\u4EE3\u7801",level:3},{value:"10.3 \u4E0B\u4E00\u6B65",id:"103-\u4E0B\u4E00\u6B65",level:3},{value:"\u5341\u4E00\u3001\u53C2\u8003\u8D44\u6E90",id:"\u5341\u4E00\u53C2\u8003\u8D44\u6E90",level:2}];function a(n){let e={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"\u5B9E\u6218\u6848\u4F8B\u672C\u5730\u7535\u8111\u76D1\u63A7\u5927\u5C4F",children:"\u5B9E\u6218\u6848\u4F8B\uFF1A\u672C\u5730\u7535\u8111\u76D1\u63A7\u5927\u5C4F"})}),"\n",(0,s.jsx)(e.p,{children:"\u672C\u6559\u7A0B\u5C06\u5F15\u5BFC\u4F60\u4F7F\u7528 OpenTwins \u521B\u5EFA\u4E00\u4E2A\u5B8C\u6574\u7684\u7535\u8111\u6027\u80FD\u76D1\u63A7\u7CFB\u7EDF\uFF0C\u5B9E\u65F6\u91C7\u96C6\u5E76\u5C55\u793A CPU\u3001\u5185\u5B58\u3001\u78C1\u76D8\u7B49\u6027\u80FD\u6307\u6807\u3002"}),"\n",(0,s.jsx)(e.h2,{id:"\u4E00\u6848\u4F8B\u6982\u8FF0",children:"\u4E00\u3001\u6848\u4F8B\u6982\u8FF0"}),"\n",(0,s.jsx)(e.h3,{id:"11-\u529F\u80FD\u76EE\u6807",children:"1.1 \u529F\u80FD\u76EE\u6807"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u2705 \u5B9E\u65F6\u76D1\u63A7\u672C\u5730\u7535\u8111\u7684 CPU \u4F7F\u7528\u7387"}),"\n",(0,s.jsx)(e.li,{children:"\u2705 \u5B9E\u65F6\u76D1\u63A7\u5185\u5B58\u4F7F\u7528\u60C5\u51B5"}),"\n",(0,s.jsx)(e.li,{children:"\u2705 \u5B9E\u65F6\u76D1\u63A7\u78C1\u76D8\u7A7A\u95F4"}),"\n",(0,s.jsx)(e.li,{children:"\u2705 \u5728 Grafana \u4E2D\u521B\u5EFA\u53EF\u89C6\u5316\u5927\u5C4F"}),"\n",(0,s.jsx)(e.li,{children:"\u2705 \u652F\u6301\u5386\u53F2\u6570\u636E\u67E5\u8BE2\u548C\u8D8B\u52BF\u5206\u6790"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"12-\u7CFB\u7EDF\u67B6\u6784",children:"1.2 \u7CFB\u7EDF\u67B6\u6784"}),"\n",(0,s.jsx)(e.mermaid,{value:"graph LR\n    A[Windows \u7535\u8111] --\x3e|\u91C7\u96C6\u6570\u636E| B[Python \u811A\u672C]\n    B --\x3e|MQTT \u534F\u8BAE| C[Mosquitto]\n    C --\x3e|\u4F20\u8F93| D[Eclipse Ditto]\n    D --\x3e|\u5B58\u50A8| E[InfluxDB]\n    E --\x3e|\u67E5\u8BE2| F[Grafana \u5927\u5C4F]"}),"\n",(0,s.jsx)(e.h3,{id:"13-\u6280\u672F\u6808",children:"1.3 \u6280\u672F\u6808"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u6570\u636E\u91C7\u96C6"}),": Python + psutil"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u6570\u636E\u4F20\u8F93"}),": MQTT \u534F\u8BAE"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u6570\u5B57\u5B6A\u751F"}),": Eclipse Ditto"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u65F6\u5E8F\u6570\u636E\u5E93"}),": InfluxDB 2.x"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u6570\u636E\u53EF\u89C6\u5316"}),": Grafana"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"14-\u524D\u7F6E\u6761\u4EF6",children:"1.4 \u524D\u7F6E\u6761\u4EF6"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u2705 \u5DF2\u5B8C\u6210 OpenTwins \u90E8\u7F72\uFF08\u53C2\u89C1 ",(0,s.jsx)(e.a,{href:"/en/docs/digital-twin/opentwins-windows-deployment",children:"OpenTwins Windows \u90E8\u7F72\u6307\u5357"}),"\uFF09"]}),"\n",(0,s.jsx)(e.li,{children:"\u2705 \u6240\u6709\u7AEF\u53E3\u8F6C\u53D1\u6B63\u5728\u8FD0\u884C"}),"\n",(0,s.jsx)(e.li,{children:"\u2705 \u5DF2\u5B89\u88C5 Python 3.7+"}),"\n",(0,s.jsx)(e.li,{children:"\u2705 \u5DF2\u5B89\u88C5 pip"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u4E8C\u5FEB\u901F\u5F00\u59CB5-\u5206\u949F\u4F53\u9A8C",children:"\u4E8C\u3001\u5FEB\u901F\u5F00\u59CB\uFF085 \u5206\u949F\u4F53\u9A8C\uFF09"}),"\n",(0,s.jsx)(e.h3,{id:"21-\u914D\u7F6E-grafana",children:"2.1 \u914D\u7F6E Grafana"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\u8BBF\u95EE ",(0,s.jsx)(e.a,{href:"http://localhost:3002",children:"http://localhost:3002"})]}),"\n",(0,s.jsx)(e.li,{children:"\u767B\u5F55\uFF08admin/admin\uFF09"}),"\n",(0,s.jsx)(e.li,{children:"\u8DF3\u8FC7\u4FEE\u6539\u5BC6\u7801\uFF08\u6216\u8BBE\u7F6E\u65B0\u5BC6\u7801\uFF09"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"22-\u521B\u5EFA\u6570\u5B57\u5B6A\u751F",children:"2.2 \u521B\u5EFA\u6570\u5B57\u5B6A\u751F"}),"\n",(0,s.jsx)(e.p,{children:"\u6253\u5F00 PowerShell\uFF0C\u8FD0\u884C\uFF1A"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-powershell",children:'# \u7B2C\u4E00\u6B65\uFF1A\u521B\u5EFA Policy\n$policyBody = @{\n    policyId = "local:pc-monitor"\n    entries = @{\n        DEFAULT = @{\n            subjects = @{\n                "nginx:ditto" = @{ type = "Basic auth user" }\n            }\n            resources = @{\n                "policy:/" = @{ grant = @("READ", "WRITE"); revoke = @() }\n                "thing:/" = @{ grant = @("READ", "WRITE"); revoke = @() }\n                "message:/" = @{ grant = @("READ", "WRITE"); revoke = @() }\n            }\n        }\n    }\n} | ConvertTo-Json -Depth 10\n\n# \u51C6\u5907\u8BA4\u8BC1\u4FE1\u606F\n$auth = [Convert]::ToBase64String([Text.Encoding]::ASCII.GetBytes("ditto:ditto"))\n$headers = @{\n    "Content-Type" = "application/json"\n    "Authorization" = "Basic $auth"\n}\n\n# \u521B\u5EFA Policy\nWrite-Host "\u521B\u5EFA Policy..." -ForegroundColor Yellow\nInvoke-RestMethod -Uri "http://localhost:8080/api/2/policies/local:pc-monitor" `\n    -Method Put `\n    -Headers $headers `\n    -Body $policyBody\n\n# \u7B2C\u4E8C\u6B65\uFF1A\u521B\u5EFA Thing\n$thingBody = @{\n    "thingId" = "local:pc-monitor"\n    "policyId" = "local:pc-monitor"\n    "attributes" = @{\n        "hostname" = $env:COMPUTERNAME\n        "os" = "Windows"\n        "createdAt" = (Get-Date -Format "yyyy-MM-ddTHH:mm:ssZ")\n    }\n    "features" = @{\n        "cpu" = @{\n            "properties" = @{\n                "usage" = 0.0\n                "cores" = [System.Environment]::ProcessorCount\n            }\n        }\n        "memory" = @{\n            "properties" = @{\n                "usage" = 0.0\n                "total" = [Math]::Round((Get-CimInstance Win32_ComputerSystem).TotalPhysicalMemory / 1GB, 2)\n            }\n        }\n        "disk" = @{\n            "properties" = @{\n                "usage" = 0.0\n                "total" = [Math]::Round((Get-PSDrive C).Used / 1GB + (Get-PSDrive C).Free / 1GB, 2)\n            }\n        }\n    }\n} | ConvertTo-Json -Depth 10\n\n# \u521B\u5EFA Thing\nWrite-Host "\u521B\u5EFA Thing..." -ForegroundColor Yellow\nInvoke-RestMethod -Uri "http://localhost:8080/api/2/things/local:pc-monitor" `\n    -Method Put `\n    -Headers $headers `\n    -Body $thingBody | ConvertTo-Json -Depth 10\n\nWrite-Host "`n\u2705 \u6570\u5B57\u5B6A\u751F\u521B\u5EFA\u6210\u529F\uFF01" -ForegroundColor Green\nWrite-Host "\u4E3B\u673A\u540D: $env:COMPUTERNAME" -ForegroundColor Cyan\nWrite-Host "CPU \u6838\u5FC3: $([System.Environment]::ProcessorCount)" -ForegroundColor Cyan\n'})}),"\n",(0,s.jsx)(e.h3,{id:"23-\u9A8C\u8BC1\u521B\u5EFA",children:"2.3 \u9A8C\u8BC1\u521B\u5EFA"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-powershell",children:'# \u67E5\u8BE2 Thing\n$auth = [Convert]::ToBase64String([Text.Encoding]::ASCII.GetBytes("ditto:ditto"))\nInvoke-RestMethod -Uri "http://localhost:8080/api/2/things/local:pc-monitor" `\n    -Method Get `\n    -Headers @{"Authorization"="Basic $auth"} | ConvertTo-Json -Depth 10\n'})}),"\n",(0,s.jsx)(e.h2,{id:"\u4E09\u6570\u636E\u91C7\u96C6\u65E0\u9700-python",children:"\u4E09\u3001\u6570\u636E\u91C7\u96C6\uFF08\u65E0\u9700 Python\uFF09"}),"\n",(0,s.jsx)(e.h3,{id:"31-\u4F7F\u7528-powershell-\u91C7\u96C6\u6570\u636E",children:"3.1 \u4F7F\u7528 PowerShell \u91C7\u96C6\u6570\u636E"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u65E0\u9700\u5B89\u88C5 Python"}),"\uFF0C\u76F4\u63A5\u4F7F\u7528 Windows PowerShell \u8FDB\u884C\u6570\u636E\u91C7\u96C6\uFF01"]}),"\n",(0,s.jsx)(e.h3,{id:"32-\u624B\u52A8\u53D1\u9001\u4E00\u6B21\u6570\u636E\u6D4B\u8BD5",children:"3.2 \u624B\u52A8\u53D1\u9001\u4E00\u6B21\u6570\u636E\uFF08\u6D4B\u8BD5\uFF09"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-powershell",children:'# \u51C6\u5907\u8BA4\u8BC1\u4FE1\u606F\n$auth = [Convert]::ToBase64String([Text.Encoding]::ASCII.GetBytes("ditto:ditto"))\n$headers = @{\n    "Content-Type" = "application/json"\n    "Authorization" = "Basic $auth"\n}\n\n# \u91C7\u96C6\u7CFB\u7EDF\u6570\u636E\n$cpuUsage = (Get-Counter \'\\Processor(_Total)\\% Processor Time\').CounterSamples.CookedValue\n$os = Get-CimInstance Win32_OperatingSystem\n$computerSystem = Get-CimInstance Win32_ComputerSystem\n$totalMemory = $computerSystem.TotalPhysicalMemory\n$freeMemory = $os.FreePhysicalMemory * 1KB\n$usedMemory = $totalMemory - $freeMemory\n$memUsagePercent = ($usedMemory / $totalMemory) * 100\n$disk = Get-PSDrive C\n$diskUsagePercent = ($disk.Used / ($disk.Used + $disk.Free)) * 100\n\n# \u663E\u793A\u91C7\u96C6\u7684\u6570\u636E\nWrite-Host "\u91C7\u96C6\u5230\u7684\u6570\u636E:" -ForegroundColor Yellow\nWrite-Host "  CPU: $([Math]::Round($cpuUsage, 2))%" -ForegroundColor Cyan\nWrite-Host "  \u5185\u5B58: $([Math]::Round($memUsagePercent, 2))%" -ForegroundColor Cyan\nWrite-Host "  \u78C1\u76D8: $([Math]::Round($diskUsagePercent, 2))%" -ForegroundColor Cyan\n\n# \u6784\u5EFA JSON \u6570\u636E\n$updateBody = @{\n    cpu = @{\n        properties = @{\n            usage = [Math]::Round($cpuUsage, 2)\n            cores = [System.Environment]::ProcessorCount\n        }\n    }\n    memory = @{\n        properties = @{\n            usage = [Math]::Round($memUsagePercent, 2)\n            total_gb = [Math]::Round($totalMemory / 1GB, 2)\n            used_gb = [Math]::Round($usedMemory / 1GB, 2)\n            available_gb = [Math]::Round($freeMemory / 1GB, 2)\n        }\n    }\n    disk = @{\n        properties = @{\n            usage = [Math]::Round($diskUsagePercent, 2)\n            total_gb = [Math]::Round(($disk.Used + $disk.Free) / 1GB, 2)\n            used_gb = [Math]::Round($disk.Used / 1GB, 2)\n            free_gb = [Math]::Round($disk.Free / 1GB, 2)\n        }\n    }\n} | ConvertTo-Json -Depth 10\n\n# \u53D1\u9001\u5230 OpenTwins\n$url = "http://localhost:8080/api/2/things/local:pc-monitor/features"\nInvoke-RestMethod -Uri $url -Method PUT -Headers $headers -Body $updateBody\n\nWrite-Host "`n\u2705 \u6570\u636E\u53D1\u9001\u6210\u529F\uFF01" -ForegroundColor Green\n'})}),"\n",(0,s.jsx)(e.h3,{id:"33-\u67E5\u770B\u66F4\u65B0\u540E\u7684\u6570\u636E",children:"3.3 \u67E5\u770B\u66F4\u65B0\u540E\u7684\u6570\u636E"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-powershell",children:'# \u67E5\u8BE2 Thing \u9A8C\u8BC1\u6570\u636E\n$auth = [Convert]::ToBase64String([Text.Encoding]::ASCII.GetBytes("ditto:ditto"))\n$thing = Invoke-RestMethod -Uri "http://localhost:8080/api/2/things/local:pc-monitor" `\n    -Method Get `\n    -Headers @{"Authorization"="Basic $auth"}\n\nWrite-Host "`n\u5F53\u524D\u76D1\u63A7\u6570\u636E:" -ForegroundColor Green\nWrite-Host "  CPU: $($thing.features.cpu.properties.usage)%" -ForegroundColor Cyan\nWrite-Host "  \u5185\u5B58: $($thing.features.memory.properties.usage)%" -ForegroundColor Cyan\nWrite-Host "  \u78C1\u76D8: $($thing.features.disk.properties.usage)%" -ForegroundColor Cyan\n'})}),"\n",(0,s.jsx)(e.h2,{id:"\u56DB\u6301\u7EED\u76D1\u63A7\u53EF\u9009",children:"\u56DB\u3001\u6301\u7EED\u76D1\u63A7\uFF08\u53EF\u9009\uFF09"}),"\n",(0,s.jsx)(e.h3,{id:"41-\u65B9\u6CD5-1\u4F7F\u7528-html-\u7BA1\u7406\u5668\u624B\u52A8\u66F4\u65B0",children:"4.1 \u65B9\u6CD5 1\uFF1A\u4F7F\u7528 HTML \u7BA1\u7406\u5668\u624B\u52A8\u66F4\u65B0"}),"\n",(0,s.jsxs)(e.p,{children:["\u6253\u5F00\u9879\u76EE\u6839\u76EE\u5F55\u7684 ",(0,s.jsx)(e.code,{children:"opentwins-manager.html"}),"\uFF1A"]}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["Thing ID \u586B\u5199\uFF1A",(0,s.jsx)(e.code,{children:"local:pc-monitor"})]}),"\n",(0,s.jsx)(e.li,{children:'\u70B9\u51FB"\u67E5\u8BE2 Thing"\u67E5\u770B\u5F53\u524D\u6570\u636E'}),"\n",(0,s.jsx)(e.li,{children:"CPU \u4F7F\u7528\u7387\u586B\u5199\u65B0\u503C\uFF08\u5982 45.5\uFF09"}),"\n",(0,s.jsx)(e.li,{children:'\u70B9\u51FB"\u66F4\u65B0 CPU"\u6309\u94AE'}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"42-\u65B9\u6CD5-2powershell-\u5FAA\u73AF\u811A\u672C",children:"4.2 \u65B9\u6CD5 2\uFF1APowerShell \u5FAA\u73AF\u811A\u672C"}),"\n",(0,s.jsxs)(e.p,{children:["\u521B\u5EFA\u6587\u4EF6 ",(0,s.jsx)(e.code,{children:"monitor-loop.ps1"}),"\uFF1A"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-powershell",metastring:'title="monitor-loop.ps1"',children:'# OpenTwins PC \u76D1\u63A7 - \u6301\u7EED\u91C7\u96C6\u811A\u672C\n$THING_ID = "local:pc-monitor"\n$INTERVAL = 10  # \u91C7\u96C6\u95F4\u9694\uFF08\u79D2\uFF09\n\n$auth = [Convert]::ToBase64String([Text.Encoding]::ASCII.GetBytes("ditto:ditto"))\n$headers = @{\n    "Content-Type" = "application/json"\n    "Authorization" = "Basic $auth"\n}\n\nWrite-Host "\u5F00\u59CB\u76D1\u63A7... (\u6309 Ctrl+C \u505C\u6B62)" -ForegroundColor Green\nWrite-Host ""\n\nwhile ($true) {\n    try {\n        # \u91C7\u96C6\u6570\u636E\n        $cpu = (Get-Counter \'\\Processor(_Total)\\% Processor Time\').CounterSamples.CookedValue\n        $os = Get-CimInstance Win32_OperatingSystem\n        $cs = Get-CimInstance Win32_ComputerSystem\n        $totalMem = $cs.TotalPhysicalMemory\n        $freeMem = $os.FreePhysicalMemory * 1KB\n        $usedMem = $totalMem - $freeMem\n        $memPct = ($usedMem / $totalMem) * 100\n        $disk = Get-PSDrive C\n        $diskPct = ($disk.Used / ($disk.Used + $disk.Free)) * 100\n        \n        # \u6784\u5EFA\u6570\u636E\n        $body = @{\n            cpu = @{\n                properties = @{\n                    usage = [Math]::Round($cpu, 2)\n                    cores = [System.Environment]::ProcessorCount\n                }\n            }\n            memory = @{\n                properties = @{\n                    usage = [Math]::Round($memPct, 2)\n                    total_gb = [Math]::Round($totalMem / 1GB, 2)\n                    used_gb = [Math]::Round($usedMem / 1GB, 2)\n                }\n            }\n            disk = @{\n                properties = @{\n                    usage = [Math]::Round($diskPct, 2)\n                    total_gb = [Math]::Round(($disk.Used + $disk.Free) / 1GB, 2)\n                    used_gb = [Math]::Round($disk.Used / 1GB, 2)\n                }\n            }\n        } | ConvertTo-Json -Depth 10\n        \n        # \u53D1\u9001\u6570\u636E\n        Invoke-RestMethod -Uri "http://localhost:8080/api/2/things/$THING_ID/features" `\n            -Method PUT -Headers $headers -Body $body | Out-Null\n        \n        # \u663E\u793A\u72B6\u6001\n        $time = Get-Date -Format "HH:mm:ss"\n        $cpuStr = "{0,5:N1}%" -f [Math]::Round($cpu, 2)\n        $memStr = "{0,5:N1}%" -f [Math]::Round($memPct, 2)\n        $diskStr = "{0,5:N1}%" -f [Math]::Round($diskPct, 2)\n        \n        Write-Host "[$time] CPU: $cpuStr | Memory: $memStr | Disk: $diskStr" -ForegroundColor Cyan\n        \n        Start-Sleep -Seconds $INTERVAL\n    }\n    catch {\n        Write-Host "[ERROR] $_" -ForegroundColor Red\n        Start-Sleep -Seconds $INTERVAL\n    }\n}\n'})}),"\n",(0,s.jsx)(e.h3,{id:"43-\u8FD0\u884C\u76D1\u63A7\u811A\u672C",children:"4.3 \u8FD0\u884C\u76D1\u63A7\u811A\u672C"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-powershell",children:"powershell -ExecutionPolicy Bypass -File .\\monitor-loop.ps1\n"})}),"\n",(0,s.jsx)(e.h3,{id:"44-\u65B9\u6CD5-3python-\u811A\u672C\u53EF\u9009",children:"4.4 \u65B9\u6CD5 3\uFF1APython \u811A\u672C\uFF08\u53EF\u9009\uFF09"}),"\n",(0,s.jsx)(e.p,{children:"\u5982\u679C\u60A8\u5DF2\u5B89\u88C5 Python\uFF0C\u53EF\u4EE5\u4F7F\u7528\u539F\u7248\u7684 Python \u811A\u672C\uFF1A"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",metastring:'title="pc-monitor.py"',children:'"""\nOpenTwins \u7535\u8111\u6027\u80FD\u76D1\u63A7\u811A\u672C\n\u5B9E\u65F6\u91C7\u96C6 CPU\u3001\u5185\u5B58\u3001\u78C1\u76D8\u4F7F\u7528\u60C5\u51B5\u5E76\u53D1\u9001\u5230\u6570\u5B57\u5B6A\u751F\u5E73\u53F0\n"""\n\nimport paho.mqtt.client as mqtt\nimport psutil\nimport json\nimport time\nimport platform\nfrom datetime import datetime\n\n# ==================== \u914D\u7F6E ====================\nMQTT_BROKER = "localhost"\nMQTT_PORT = 1883\nTHING_ID = "local:pc-monitor"\nCOLLECT_INTERVAL = 5  # \u91C7\u96C6\u95F4\u9694\uFF08\u79D2\uFF09\n\n# ==================== MQTT \u56DE\u8C03\u51FD\u6570 ====================\ndef on_connect(client, userdata, flags, rc):\n    """MQTT \u8FDE\u63A5\u56DE\u8C03"""\n    if rc == 0:\n        print("\u2705 \u5DF2\u8FDE\u63A5\u5230 MQTT Broker")\n    else:\n        print(f"\u274C \u8FDE\u63A5\u5931\u8D25\uFF0C\u8FD4\u56DE\u7801: {rc}")\n\ndef on_publish(client, userdata, mid):\n    """\u6D88\u606F\u53D1\u5E03\u56DE\u8C03"""\n    pass  # \u53EF\u4EE5\u6DFB\u52A0\u65E5\u5FD7\u8BB0\u5F55\n\n# ==================== \u6570\u636E\u91C7\u96C6\u51FD\u6570 ====================\ndef get_cpu_usage():\n    """\u83B7\u53D6 CPU \u4F7F\u7528\u60C5\u51B5"""\n    cpu_percent = psutil.cpu_percent(interval=1)\n    cpu_freq = psutil.cpu_freq()\n    \n    return {\n        "usage": round(cpu_percent, 2),\n        "cores": psutil.cpu_count(logical=False),\n        "threads": psutil.cpu_count(logical=True),\n        "frequency": round(cpu_freq.current, 2) if cpu_freq else 0\n    }\n\ndef get_memory_usage():\n    """\u83B7\u53D6\u5185\u5B58\u4F7F\u7528\u60C5\u51B5"""\n    mem = psutil.virtual_memory()\n    \n    return {\n        "total": mem.total,\n        "available": mem.available,\n        "used": mem.used,\n        "usage": round(mem.percent, 2),\n        "total_gb": round(mem.total / (1024**3), 2),\n        "used_gb": round(mem.used / (1024**3), 2),\n        "available_gb": round(mem.available / (1024**3), 2)\n    }\n\ndef get_disk_usage():\n    """\u83B7\u53D6 C \u76D8\u4F7F\u7528\u60C5\u51B5"""\n    disk = psutil.disk_usage(\'C:\\\\\')\n    \n    return {\n        "total": disk.total,\n        "free": disk.free,\n        "used": disk.used,\n        "usage": round(disk.percent, 2),\n        "total_gb": round(disk.total / (1024**3), 2),\n        "free_gb": round(disk.free / (1024**3), 2),\n        "used_gb": round(disk.used / (1024**3), 2)\n    }\n\ndef send_metrics(client):\n    """\u91C7\u96C6\u5E76\u53D1\u9001\u6240\u6709\u6307\u6807"""\n    try:\n        # \u91C7\u96C6\u6570\u636E\n        cpu_data = get_cpu_usage()\n        memory_data = get_memory_usage()\n        disk_data = get_disk_usage()\n        \n        # \u6784\u5EFA Ditto \u6D88\u606F\u683C\u5F0F\n        payload = {\n            "topic": f"{THING_ID}/things/twin/commands/modify",\n            "headers": {\n                "response-required": False\n            },\n            "path": "/features",\n            "value": {\n                "cpu": {\n                    "properties": cpu_data\n                },\n                "memory": {\n                    "properties": memory_data\n                },\n                "disk": {\n                    "properties": disk_data\n                }\n            }\n        }\n        \n        # \u53D1\u5E03\u5230 MQTT\n        topic = f"{THING_ID}/things/twin/commands/modify"\n        message = json.dumps(payload)\n        result = client.publish(topic, message, qos=0)\n        \n        # \u6253\u5370\u72B6\u6001\n        timestamp = datetime.now().strftime("%H:%M:%S")\n        print(f"[{timestamp}] "\n              f"CPU: {cpu_data[\'usage\']:5.1f}% | "\n              f"\u5185\u5B58: {memory_data[\'usage\']:5.1f}% ({memory_data[\'used_gb\']:.1f}GB/{memory_data[\'total_gb\']:.1f}GB) | "\n              f"\u78C1\u76D8: {disk_data[\'usage\']:5.1f}% ({disk_data[\'used_gb\']:.0f}GB/{disk_data[\'total_gb\']:.0f}GB)")\n        \n        return True\n        \n    except Exception as e:\n        print(f"\u274C \u53D1\u9001\u6570\u636E\u5931\u8D25: {e}")\n        return False\n\n# ==================== \u4E3B\u7A0B\u5E8F ====================\ndef main():\n    """\u4E3B\u51FD\u6570"""\n    # \u521B\u5EFA MQTT \u5BA2\u6237\u7AEF\n    client = mqtt.Client(client_id=f"pc-monitor-{platform.node()}")\n    client.on_connect = on_connect\n    client.on_publish = on_publish\n    \n    # \u8FDE\u63A5\u5230 MQTT Broker\n    try:\n        client.connect(MQTT_BROKER, MQTT_PORT, 60)\n        client.loop_start()\n        time.sleep(2)  # \u7B49\u5F85\u8FDE\u63A5\u5EFA\u7ACB\n    except Exception as e:\n        print(f"\u274C \u65E0\u6CD5\u8FDE\u63A5\u5230 MQTT Broker: {e}")\n        print("\\n\u8BF7\u786E\u8BA4:")\n        print("1. OpenTwins \u6B63\u5728\u8FD0\u884C")\n        print("2. \u7AEF\u53E3\u8F6C\u53D1\u5DF2\u542F\u52A8: kubectl port-forward svc/opentwins-mosquitto 1883:1883")\n        return\n    \n    # \u663E\u793A\u542F\u52A8\u4FE1\u606F\n    print("\\n" + "=" * 70)\n    print("\u{1F5A5}\uFE0F  OpenTwins \u7535\u8111\u6027\u80FD\u76D1\u63A7\u7CFB\u7EDF")\n    print("=" * 70)\n    print(f"\u{1F4CC} \u7535\u8111\u540D\u79F0: {platform.node()}")\n    print(f"\u{1F4BB} \u64CD\u4F5C\u7CFB\u7EDF: {platform.system()} {platform.release()}")\n    print(f"\u{1F517} Thing ID: {THING_ID}")\n    print(f"\u23F0 \u91C7\u96C6\u95F4\u9694: {COLLECT_INTERVAL} \u79D2")\n    print(f"\u{1F4CA} Grafana: http://localhost:3002")\n    print("=" * 70)\n    print("\\n\u5F00\u59CB\u91C7\u96C6\u6570\u636E... (\u6309 Ctrl+C \u505C\u6B62)\\n")\n    \n    # \u4E3B\u5FAA\u73AF\n    try:\n        while True:\n            send_metrics(client)\n            time.sleep(COLLECT_INTERVAL)\n            \n    except KeyboardInterrupt:\n        print("\\n\\n\u23F9\uFE0F  \u505C\u6B62\u76D1\u63A7")\n        client.loop_stop()\n        client.disconnect()\n        print("\u2705 \u5DF2\u65AD\u5F00\u8FDE\u63A5")\n\nif __name__ == "__main__":\n    main()\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u8FD0\u884C Python \u811A\u672C\uFF1A"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-powershell",children:"pip install paho-mqtt psutil\npython pc-monitor.py\n"})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u9884\u671F\u8F93\u51FA"}),":"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"\u2705 \u5DF2\u8FDE\u63A5\u5230 MQTT Broker\n\n======================================================================\n\u{1F5A5}\uFE0F  OpenTwins \u7535\u8111\u6027\u80FD\u76D1\u63A7\u7CFB\u7EDF\n======================================================================\n\u{1F4CC} \u7535\u8111\u540D\u79F0: YOUR-PC-NAME\n\u{1F4BB} \u64CD\u4F5C\u7CFB\u7EDF: Windows 10\n\u{1F517} Thing ID: local:pc-monitor\n\u23F0 \u91C7\u96C6\u95F4\u9694: 5 \u79D2\n\u{1F4CA} Grafana: http://localhost:3002\n======================================================================\n\n\u5F00\u59CB\u91C7\u96C6\u6570\u636E... (\u6309 Ctrl+C \u505C\u6B62)\n\n[14:30:15] CPU:  25.3% | \u5185\u5B58:  45.2% (7.2GB/16.0GB) | \u78C1\u76D8:  68.5% (342GB/500GB)\n[14:30:20] CPU:  18.7% | \u5185\u5B58:  45.3% (7.2GB/16.0GB) | \u78C1\u76D8:  68.5% (342GB/500GB)\n[14:30:25] CPU:  32.1% | \u5185\u5B58:  45.1% (7.2GB/16.0GB) | \u78C1\u76D8:  68.5% (342GB/500GB)\n"})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u9A8C\u8BC1\u6570\u636E\u66F4\u65B0"}),"\uFF1A"]}),"\n",(0,s.jsx)(e.p,{children:"\u5728\u53E6\u4E00\u4E2A PowerShell \u7A97\u53E3\u4E2D\uFF1A"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-powershell",children:'# \u67E5\u8BE2\u6570\u5B57\u5B6A\u751F\u7684\u5B9E\u65F6\u6570\u636E\n$auth = [Convert]::ToBase64String([Text.Encoding]::ASCII.GetBytes("ditto:ditto"))\nInvoke-RestMethod -Uri "http://localhost:8080/api/2/things/local:pc-monitor" `\n    -Method Get `\n    -Headers @{"Authorization"="Basic $auth"} | ConvertTo-Json -Depth 10\n'})}),"\n",(0,s.jsxs)(e.p,{children:["\u5E94\u8BE5\u80FD\u770B\u5230 ",(0,s.jsx)(e.code,{children:"features"})," \u4E2D\u7684\u6570\u636E\u5728\u5B9E\u65F6\u66F4\u65B0\uFF01"]}),"\n",(0,s.jsx)(e.h2,{id:"\u4E94\u521B\u5EFA-grafana-\u53EF\u89C6\u5316\u5927\u5C4F",children:"\u4E94\u3001\u521B\u5EFA Grafana \u53EF\u89C6\u5316\u5927\u5C4F"}),"\n",(0,s.jsx)(e.h3,{id:"51-\u767B\u5F55-grafana",children:"5.1 \u767B\u5F55 Grafana"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\u8BBF\u95EE ",(0,s.jsx)(e.a,{href:"http://localhost:3002",children:"http://localhost:3002"})]}),"\n",(0,s.jsx)(e.li,{children:"\u767B\u5F55\uFF08admin/admin\uFF09"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"52-\u9A8C\u8BC1\u6570\u636E\u6E90",children:"5.2 \u9A8C\u8BC1\u6570\u636E\u6E90"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\u70B9\u51FB\u5DE6\u4FA7\u83DC\u5355 \u2699\uFE0F ",(0,s.jsx)(e.strong,{children:"Configuration"})," \u2192 ",(0,s.jsx)(e.strong,{children:"Data Sources"})]}),"\n",(0,s.jsxs)(e.li,{children:["\u5E94\u8BE5\u80FD\u770B\u5230 ",(0,s.jsx)(e.code,{children:"InfluxDB"})," \u6570\u636E\u6E90\uFF08\u7EFF\u8272\u2705\u8868\u793A\u6B63\u5E38\uFF09"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"53-\u521B\u5EFA\u65B0\u4EEA\u8868\u677F",children:"5.3 \u521B\u5EFA\u65B0\u4EEA\u8868\u677F"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\u70B9\u51FB\u5DE6\u4FA7 ",(0,s.jsx)(e.strong,{children:"+"})," \u2192 ",(0,s.jsx)(e.strong,{children:"Dashboard"})]}),"\n",(0,s.jsxs)(e.li,{children:["\u70B9\u51FB ",(0,s.jsx)(e.strong,{children:"Add a new panel"})]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"54-\u521B\u5EFA-cpu-\u4F7F\u7528\u7387\u9762\u677F",children:"5.4 \u521B\u5EFA CPU \u4F7F\u7528\u7387\u9762\u677F"}),"\n",(0,s.jsxs)(e.admonition,{title:"\u91CD\u8981\u6B65\u9AA4",type:"warning",children:[(0,s.jsxs)(e.p,{children:["\u5982\u679C\u9762\u677F\u663E\u793A ",(0,s.jsx)(e.strong,{children:'"No data"'}),"\uFF0C\u8BF7\u786E\u4FDD\uFF1A"]}),(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\u2705 \u76D1\u63A7\u811A\u672C ",(0,s.jsx)(e.code,{children:"monitor-loop.ps1"})," \u6B63\u5728\u8FD0\u884C"]}),"\n",(0,s.jsx)(e.li,{children:"\u2705 \u81F3\u5C11\u8FD0\u884C 5-10 \u5206\u949F\u4EE5\u79EF\u7D2F\u6570\u636E"}),"\n",(0,s.jsx)(e.li,{children:'\u2705 \u65F6\u95F4\u8303\u56F4\u8BBE\u7F6E\u4E3A "Last 15 minutes"'}),"\n",(0,s.jsx)(e.li,{children:"\u2705 \u67E5\u8BE2\u8BED\u53E5\u5B8C\u5168\u6B63\u786E\uFF08\u590D\u5236\u7C98\u8D34\u4E0B\u9762\u7684\u67E5\u8BE2\uFF09"}),"\n"]})]}),"\n",(0,s.jsx)(e.h4,{id:"\u6B65\u9AA4-1\u9009\u62E9\u6570\u636E\u6E90",children:"\u6B65\u9AA4 1\uFF1A\u9009\u62E9\u6570\u636E\u6E90"}),"\n",(0,s.jsx)(e.p,{children:"\u5728 Query \u914D\u7F6E\u533A\u57DF\uFF1A"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Data source"}),": \u4E0B\u62C9\u9009\u62E9 ",(0,s.jsx)(e.code,{children:"InfluxDB"})," (opentwins)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Language"}),": \u786E\u4FDD\u9009\u62E9 ",(0,s.jsx)(e.code,{children:"Flux"})," (\u4E0D\u662F InfluxQL)"]}),"\n"]}),"\n",(0,s.jsx)(e.h4,{id:"\u6B65\u9AA4-2\u8F93\u5165\u67E5\u8BE2\u8BED\u53E5",children:"\u6B65\u9AA4 2\uFF1A\u8F93\u5165\u67E5\u8BE2\u8BED\u53E5"}),"\n",(0,s.jsxs)(e.p,{children:["\u70B9\u51FB\u67E5\u8BE2\u7F16\u8F91\u5668\u5E95\u90E8\u7684 ",(0,s.jsx)(e.strong,{children:"Flux language syntax"})," \u6807\u7B7E\uFF0C\u5728\u6587\u672C\u6846\u4E2D\u8F93\u5165\uFF1A"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-flux",children:'from(bucket: "ditto")\n  |> range(start: -1h)\n  |> filter(fn: (r) => r["_measurement"] == "local:pc-monitor")\n  |> filter(fn: (r) => r["_field"] == "features.cpu.properties.usage")\n  |> aggregateWindow(every: 10s, fn: mean, createEmpty: false)\n  |> yield(name: "mean")\n'})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u67E5\u8BE2\u8BF4\u660E"}),"\uFF1A"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:'bucket: "ditto"'})," - InfluxDB \u6570\u636E\u6876\u540D\u79F0"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:'_measurement == "local:pc-monitor"'})," - Thing ID\uFF08\u5FC5\u987B\u5339\u914D\uFF09"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:'_field == "features.cpu.properties.usage"'})," - CPU \u4F7F\u7528\u7387\u5B57\u6BB5\u8DEF\u5F84"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"range(start: -1h)"})," - \u67E5\u8BE2\u6700\u8FD1 1 \u5C0F\u65F6\u7684\u6570\u636E"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"aggregateWindow(every: 10s)"})," - \u6BCF 10 \u79D2\u805A\u5408\u4E00\u6B21\u6570\u636E"]}),"\n"]}),"\n",(0,s.jsx)(e.h4,{id:"\u6B65\u9AA4-3\u6D4B\u8BD5\u67E5\u8BE2",children:"\u6B65\u9AA4 3\uFF1A\u6D4B\u8BD5\u67E5\u8BE2"}),"\n",(0,s.jsxs)(e.p,{children:["\u70B9\u51FB\u53F3\u4E0A\u89D2\u7684 ",(0,s.jsx)(e.strong,{children:"Run Query"})," \u6309\u94AE\uFF08\u6216\u6309 ",(0,s.jsx)(e.code,{children:"Shift+Enter"}),"\uFF09\uFF0C\u5E94\u8BE5\u770B\u5230\uFF1A"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u2705 \u6570\u636E\u66F2\u7EBF\u663E\u793A\u5728\u9884\u89C8\u533A\u57DF"}),"\n",(0,s.jsx)(e.li,{children:'\u274C \u5982\u679C\u663E\u793A "No data"\uFF0C\u68C0\u67E5\u4E0A\u65B9\u7684\u8B66\u544A\u63D0\u793A'}),"\n"]}),"\n",(0,s.jsx)(e.h4,{id:"\u6B65\u9AA4-4\u914D\u7F6E\u9762\u677F\u6837\u5F0F",children:"\u6B65\u9AA4 4\uFF1A\u914D\u7F6E\u9762\u677F\u6837\u5F0F"}),"\n",(0,s.jsx)(e.p,{children:"\u5728\u53F3\u4FA7\u9762\u677F\u914D\u7F6E\u533A\u57DF\uFF1A"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Panel options"}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Panel title"}),": ",(0,s.jsx)(e.code,{children:"CPU \u4F7F\u7528\u7387"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Description"}),": ",(0,s.jsx)(e.code,{children:"\u5B9E\u65F6\u76D1\u63A7 CPU \u4F7F\u7528\u767E\u5206\u6BD4"})]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Visualization"}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u70B9\u51FB\u53F3\u4E0A\u89D2\u53EF\u89C6\u5316\u7C7B\u578B\uFF0C\u9009\u62E9 ",(0,s.jsx)(e.code,{children:"Gauge"})," (\u4EEA\u8868\u76D8)"]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Standard options"}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Unit"}),": \u641C\u7D22\u5E76\u9009\u62E9 ",(0,s.jsx)(e.code,{children:"Percent (0-100)"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Min"}),": ",(0,s.jsx)(e.code,{children:"0"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Max"}),": ",(0,s.jsx)(e.code,{children:"100"})]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Thresholds"}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u70B9\u51FB ",(0,s.jsx)(e.strong,{children:"+ Add threshold"})]}),"\n",(0,s.jsxs)(e.li,{children:["\u8BBE\u7F6E\u9608\u503C\uFF1A","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u{1F7E2} Base (0): Green"}),"\n",(0,s.jsx)(e.li,{children:"\u{1F7E1} 60: Yellow"}),"\n",(0,s.jsx)(e.li,{children:"\u{1F534} 80: Red"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h4,{id:"\u6B65\u9AA4-5\u4FDD\u5B58\u9762\u677F",children:"\u6B65\u9AA4 5\uFF1A\u4FDD\u5B58\u9762\u677F"}),"\n",(0,s.jsxs)(e.p,{children:["\u70B9\u51FB\u53F3\u4E0A\u89D2 ",(0,s.jsx)(e.strong,{children:"Apply"})," \u4FDD\u5B58\u9762\u677F\u3002"]}),"\n",(0,s.jsx)(e.h3,{id:"55-\u521B\u5EFA\u5185\u5B58\u4F7F\u7528\u7387\u9762\u677F",children:"5.5 \u521B\u5EFA\u5185\u5B58\u4F7F\u7528\u7387\u9762\u677F"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\u70B9\u51FB ",(0,s.jsx)(e.strong,{children:"Add panel"})," \u2192 ",(0,s.jsx)(e.strong,{children:"Add a new panel"})]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u67E5\u8BE2\u8BED\u53E5"}),"\uFF1A"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-flux",children:'from(bucket: "ditto")\n  |> range(start: -1h)\n  |> filter(fn: (r) => r["_measurement"] == "local:pc-monitor")\n  |> filter(fn: (r) => r["_field"] == "features.memory.properties.usage")\n  |> aggregateWindow(every: 10s, fn: mean, createEmpty: false)\n  |> yield(name: "mean")\n'})}),"\n",(0,s.jsx)(e.h4,{id:"\u914D\u7F6E\u9762\u677F",children:"\u914D\u7F6E\u9762\u677F"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Panel title"}),": ",(0,s.jsx)(e.code,{children:"\u5185\u5B58\u4F7F\u7528\u7387"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Visualization"}),": ",(0,s.jsx)(e.code,{children:"Gauge"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Unit"}),": ",(0,s.jsx)(e.code,{children:"Percent (0-100)"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Thresholds"}),": 0-70 (\u7EFF), 70-85 (\u9EC4), 85-100 (\u7EA2)"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"56-\u521B\u5EFA\u78C1\u76D8\u4F7F\u7528\u7387\u9762\u677F",children:"5.6 \u521B\u5EFA\u78C1\u76D8\u4F7F\u7528\u7387\u9762\u677F"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u67E5\u8BE2\u8BED\u53E5"}),"\uFF1A"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-flux",children:'from(bucket: "ditto")\n  |> range(start: -1h)\n  |> filter(fn: (r) => r["_measurement"] == "local:pc-monitor")\n  |> filter(fn: (r) => r["_field"] == "features.disk.properties.usage")\n  |> aggregateWindow(every: 10s, fn: mean, createEmpty: false)\n  |> yield(name: "mean")\n'})}),"\n",(0,s.jsx)(e.h4,{id:"\u914D\u7F6E\u9762\u677F-1",children:"\u914D\u7F6E\u9762\u677F"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Panel title"}),": ",(0,s.jsx)(e.code,{children:"\u78C1\u76D8\u4F7F\u7528\u7387"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Visualization"}),": ",(0,s.jsx)(e.code,{children:"Gauge"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Unit"}),": ",(0,s.jsx)(e.code,{children:"Percent (0-100)"})]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"57-\u521B\u5EFA\u8D8B\u52BF\u56FE\u9762\u677F",children:"5.7 \u521B\u5EFA\u8D8B\u52BF\u56FE\u9762\u677F"}),"\n",(0,s.jsx)(e.h4,{id:"cpu-\u8D8B\u52BF\u56FE",children:"CPU \u8D8B\u52BF\u56FE"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u67E5\u8BE2\u8BED\u53E5"}),"\uFF1A"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-flux",children:'from(bucket: "ditto")\n  |> range(start: -30m)\n  |> filter(fn: (r) => r["_measurement"] == "local:pc-monitor")\n  |> filter(fn: (r) => r["_field"] == "features.cpu.properties.usage")\n  |> aggregateWindow(every: 10s, fn: mean, createEmpty: false)\n'})}),"\n",(0,s.jsx)(e.h4,{id:"\u914D\u7F6E\u9762\u677F-2",children:"\u914D\u7F6E\u9762\u677F"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Panel title"}),": ",(0,s.jsx)(e.code,{children:"CPU \u4F7F\u7528\u7387\u8D8B\u52BF\uFF0830\u5206\u949F\uFF09"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Visualization"}),": ",(0,s.jsx)(e.code,{children:"Time series"})," (\u65F6\u95F4\u5E8F\u5217\u56FE)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Unit"}),": ",(0,s.jsx)(e.code,{children:"Percent (0-100)"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Graph style"}),": ",(0,s.jsx)(e.code,{children:"Lines"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Fill opacity"}),": ",(0,s.jsx)(e.code,{children:"20"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Line width"}),": ",(0,s.jsx)(e.code,{children:"2"})]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"58-\u521B\u5EFA\u7EDF\u8BA1\u5361\u7247",children:"5.8 \u521B\u5EFA\u7EDF\u8BA1\u5361\u7247"}),"\n",(0,s.jsx)(e.h4,{id:"\u5F53\u524D-cpu-\u4F7F\u7528\u7387\u5361\u7247",children:"\u5F53\u524D CPU \u4F7F\u7528\u7387\u5361\u7247"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u67E5\u8BE2\u8BED\u53E5"}),"\uFF1A"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-flux",children:'from(bucket: "ditto")\n  |> range(start: -1m)\n  |> filter(fn: (r) => r["_measurement"] == "local:pc-monitor")\n  |> filter(fn: (r) => r["_field"] == "features.cpu.properties.usage")\n  |> last()\n'})}),"\n",(0,s.jsx)(e.h4,{id:"\u914D\u7F6E\u9762\u677F-3",children:"\u914D\u7F6E\u9762\u677F"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Panel title"}),": ",(0,s.jsx)(e.code,{children:"\u5F53\u524D CPU"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Visualization"}),": ",(0,s.jsx)(e.code,{children:"Stat"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Value"}),": ",(0,s.jsx)(e.code,{children:"Last"})," (\u6700\u65B0\u503C)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Unit"}),": ",(0,s.jsx)(e.code,{children:"Percent (0-100)"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Text size"}),": ",(0,s.jsx)(e.code,{children:"Title"})," \u8BBE\u7F6E\u4E3A\u5927\u5B57\u4F53"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"59-\u63A8\u8350\u7684\u5927\u5C4F\u5E03\u5C40",children:"5.9 \u63A8\u8350\u7684\u5927\u5C4F\u5E03\u5C40"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  \u7535\u8111\u6027\u80FD\u76D1\u63A7\u5927\u5C4F \u{1F5A5}\uFE0F                                    \u2502\n\u2502  YOUR-PC-NAME                                           \u2502\n\u251C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 CPU       \u2502 \u5185\u5B58      \u2502 \u78C1\u76D8      \u2502  \u7CFB\u7EDF\u4FE1\u606F           \u2502\n\u2502 32.5%     \u2502 45.2%     \u2502 68.5%     \u2502  \u6838\u5FC3: 8            \u2502\n\u2502 (Gauge)   \u2502 (Gauge)   \u2502 (Gauge)   \u2502  \u5185\u5B58: 16GB         \u2502\n\u2502           \u2502           \u2502           \u2502  \u78C1\u76D8: 500GB        \u2502\n\u251C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  CPU \u4F7F\u7528\u7387\u8D8B\u52BF\uFF0830\u5206\u949F\uFF09                               \u2502\n\u2502  [\u6298\u7EBF\u56FE\u663E\u793A CPU \u6CE2\u52A8]                                  \u2502\n\u251C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  \u5185\u5B58\u4F7F\u7528\u7387\u8D8B\u52BF\uFF0830\u5206\u949F\uFF09                               \u2502\n\u2502  [\u6298\u7EBF\u56FE\u663E\u793A\u5185\u5B58\u4F7F\u7528]                                   \u2502\n\u251C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  \u78C1\u76D8\u4F7F\u7528\u7387\u8D8B\u52BF\uFF0830\u5206\u949F\uFF09                               \u2502\n\u2502  [\u6298\u7EBF\u56FE\u663E\u793A\u78C1\u76D8\u53D8\u5316]                                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(e.h3,{id:"510-\u4FDD\u5B58\u4EEA\u8868\u677F",children:"5.10 \u4FDD\u5B58\u4EEA\u8868\u677F"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\u70B9\u51FB\u53F3\u4E0A\u89D2 \u{1F4BE} ",(0,s.jsx)(e.strong,{children:"Save dashboard"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Dashboard name"}),": ",(0,s.jsx)(e.code,{children:"\u7535\u8111\u6027\u80FD\u76D1\u63A7\u5927\u5C4F"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Folder"}),": ",(0,s.jsx)(e.code,{children:"General"})," \u6216\u521B\u5EFA\u65B0\u6587\u4EF6\u5939"]}),"\n",(0,s.jsxs)(e.li,{children:["\u70B9\u51FB ",(0,s.jsx)(e.strong,{children:"Save"})]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"511-\u8BBE\u7F6E\u81EA\u52A8\u5237\u65B0",children:"5.11 \u8BBE\u7F6E\u81EA\u52A8\u5237\u65B0"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u70B9\u51FB\u53F3\u4E0A\u89D2\u7684\u65F6\u95F4\u8303\u56F4\u9009\u62E9\u5668\u65C1\u8FB9\u7684\u5237\u65B0\u56FE\u6807"}),"\n",(0,s.jsxs)(e.li,{children:["\u9009\u62E9 ",(0,s.jsx)(e.strong,{children:"5s"})," (\u6BCF 5 \u79D2\u81EA\u52A8\u5237\u65B0)"]}),"\n",(0,s.jsxs)(e.li,{children:["\u6216\u9009\u62E9 ",(0,s.jsx)(e.strong,{children:"10s"})," / ",(0,s.jsx)(e.strong,{children:"30s"})," \u6839\u636E\u9700\u8981"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"512-\u5168\u5C4F\u663E\u793A",children:"5.12 \u5168\u5C4F\u663E\u793A"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\u70B9\u51FB\u53F3\u4E0A\u89D2\u7684 ",(0,s.jsx)(e.strong,{children:"Cycle view mode"})," \u56FE\u6807\uFF08\u5168\u5C4F\u6309\u94AE\uFF09"]}),"\n",(0,s.jsxs)(e.li,{children:["\u6216\u6309\u952E\u76D8 ",(0,s.jsx)(e.code,{children:"F"})," \u952E\u8FDB\u5165\u5168\u5C4F\u6A21\u5F0F"]}),"\n",(0,s.jsxs)(e.li,{children:["\u6309 ",(0,s.jsx)(e.code,{children:"Esc"})," \u9000\u51FA\u5168\u5C4F"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u516D\u9AD8\u7EA7\u529F\u80FD",children:"\u516D\u3001\u9AD8\u7EA7\u529F\u80FD"}),"\n",(0,s.jsx)(e.h3,{id:"61-\u6DFB\u52A0\u544A\u8B66",children:"6.1 \u6DFB\u52A0\u544A\u8B66"}),"\n",(0,s.jsx)(e.h4,{id:"\u521B\u5EFA-cpu-\u9AD8\u4F7F\u7528\u7387\u544A\u8B66",children:"\u521B\u5EFA CPU \u9AD8\u4F7F\u7528\u7387\u544A\u8B66"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u7F16\u8F91 CPU \u4F7F\u7528\u7387\u9762\u677F"}),"\n",(0,s.jsxs)(e.li,{children:["\u70B9\u51FB ",(0,s.jsx)(e.strong,{children:"Alert"})," \u6807\u7B7E"]}),"\n",(0,s.jsxs)(e.li,{children:["\u70B9\u51FB ",(0,s.jsx)(e.strong,{children:"Create alert rule from this panel"})]}),"\n",(0,s.jsxs)(e.li,{children:["\u914D\u7F6E\u6761\u4EF6\uFF1A","\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"WHEN avg() OF query(A, 5m, now) IS ABOVE 80\n"})}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"\u914D\u7F6E\u901A\u77E5\u6E20\u9053\uFF08\u90AE\u4EF6\u3001Webhook \u7B49\uFF09"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"62-\u76D1\u63A7\u591A\u53F0\u7535\u8111",children:"6.2 \u76D1\u63A7\u591A\u53F0\u7535\u8111"}),"\n",(0,s.jsx)(e.h4,{id:"\u4FEE\u6539\u811A\u672C\u652F\u6301\u591A\u53F0\u7535\u8111",children:"\u4FEE\u6539\u811A\u672C\u652F\u6301\u591A\u53F0\u7535\u8111"}),"\n",(0,s.jsxs)(e.p,{children:["\u5728 ",(0,s.jsx)(e.code,{children:"pc-monitor.py"})," \u4E2D\u4FEE\u6539\uFF1A"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'# \u4F7F\u7528\u7535\u8111\u540D\u79F0\u4F5C\u4E3A Thing ID\nimport socket\nTHING_ID = f"local:pc-{socket.gethostname().lower()}"\n'})}),"\n",(0,s.jsx)(e.h4,{id:"\u5728-grafana-\u4E2D\u6DFB\u52A0\u53D8\u91CF",children:"\u5728 Grafana \u4E2D\u6DFB\u52A0\u53D8\u91CF"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["Dashboard Settings \u2192 ",(0,s.jsx)(e.strong,{children:"Variables"})," \u2192 ",(0,s.jsx)(e.strong,{children:"Add variable"})]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Name"}),": ",(0,s.jsx)(e.code,{children:"hostname"})]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Type"}),": ",(0,s.jsx)(e.code,{children:"Query"})]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Query"}),":"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-flux",children:'import "influxdata/influxdb/schema"\nschema.measurementTagValues(\n  bucket: "ditto",\n  measurement: "local:pc-*",\n  tag: "_measurement"\n)\n'})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u5728\u67E5\u8BE2\u4E2D\u4F7F\u7528\u53D8\u91CF\uFF1A"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-flux",children:'filter(fn: (r) => r["_measurement"] == "${hostname}")\n'})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"63-\u6DFB\u52A0\u7F51\u7EDC\u76D1\u63A7",children:"6.3 \u6DFB\u52A0\u7F51\u7EDC\u76D1\u63A7"}),"\n",(0,s.jsxs)(e.p,{children:["\u5728 ",(0,s.jsx)(e.code,{children:"pc-monitor.py"})," \u4E2D\u6DFB\u52A0\uFF1A"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'def get_network_usage():\n    """\u83B7\u53D6\u7F51\u7EDC\u4F7F\u7528\u60C5\u51B5"""\n    net_io = psutil.net_io_counters()\n    return {\n        "bytes_sent": net_io.bytes_sent,\n        "bytes_recv": net_io.bytes_recv,\n        "packets_sent": net_io.packets_sent,\n        "packets_recv": net_io.packets_recv,\n        "bytes_sent_mb": round(net_io.bytes_sent / (1024**2), 2),\n        "bytes_recv_mb": round(net_io.bytes_recv / (1024**2), 2)\n    }\n\n# \u5728 send_metrics \u4E2D\u6DFB\u52A0\nnetwork_data = get_network_usage()\npayload["value"]["network"] = {\n    "properties": network_data\n}\n'})}),"\n",(0,s.jsx)(e.h3,{id:"64-\u6DFB\u52A0\u8FDB\u7A0B\u76D1\u63A7",children:"6.4 \u6DFB\u52A0\u8FDB\u7A0B\u76D1\u63A7"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"def get_top_processes(limit=5):\n    \"\"\"\u83B7\u53D6 CPU \u5360\u7528\u6700\u9AD8\u7684\u524D N \u4E2A\u8FDB\u7A0B\"\"\"\n    processes = []\n    for proc in psutil.process_iter(['pid', 'name', 'cpu_percent']):\n        try:\n            processes.append({\n                'pid': proc.info['pid'],\n                'name': proc.info['name'],\n                'cpu': proc.info['cpu_percent']\n            })\n        except:\n            pass\n    \n    # \u6309 CPU \u4F7F\u7528\u7387\u6392\u5E8F\n    processes.sort(key=lambda x: x['cpu'], reverse=True)\n    return processes[:limit]\n"})}),"\n",(0,s.jsx)(e.h3,{id:"65-\u540E\u53F0\u8FD0\u884C\u811A\u672C",children:"6.5 \u540E\u53F0\u8FD0\u884C\u811A\u672C"}),"\n",(0,s.jsx)(e.h4,{id:"\u65B9\u6CD5-1\u4F7F\u7528-windows-\u4EFB\u52A1\u8BA1\u5212\u7A0B\u5E8F",children:"\u65B9\u6CD5 1\uFF1A\u4F7F\u7528 Windows \u4EFB\u52A1\u8BA1\u5212\u7A0B\u5E8F"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\u6253\u5F00 ",(0,s.jsx)(e.strong,{children:"\u4EFB\u52A1\u8BA1\u5212\u7A0B\u5E8F"})]}),"\n",(0,s.jsx)(e.li,{children:"\u521B\u5EFA\u57FA\u672C\u4EFB\u52A1"}),"\n",(0,s.jsxs)(e.li,{children:["\u540D\u79F0: ",(0,s.jsx)(e.code,{children:"PC Monitor"})]}),"\n",(0,s.jsxs)(e.li,{children:["\u89E6\u53D1\u5668: ",(0,s.jsx)(e.strong,{children:"\u8BA1\u7B97\u673A\u542F\u52A8\u65F6"})]}),"\n",(0,s.jsxs)(e.li,{children:["\u64CD\u4F5C: ",(0,s.jsx)(e.strong,{children:"\u542F\u52A8\u7A0B\u5E8F"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u7A0B\u5E8F: ",(0,s.jsx)(e.code,{children:"python.exe"})]}),"\n",(0,s.jsxs)(e.li,{children:["\u53C2\u6570: ",(0,s.jsx)(e.code,{children:"D:\\path\\to\\pc-monitor.py"})]}),"\n",(0,s.jsxs)(e.li,{children:["\u8D77\u59CB\u4E8E: ",(0,s.jsx)(e.code,{children:"D:\\path\\to\\"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h4,{id:"\u65B9\u6CD5-2\u521B\u5EFA\u6279\u5904\u7406\u6587\u4EF6",children:"\u65B9\u6CD5 2\uFF1A\u521B\u5EFA\u6279\u5904\u7406\u6587\u4EF6"}),"\n",(0,s.jsxs)(e.p,{children:["\u521B\u5EFA ",(0,s.jsx)(e.code,{children:"start-monitor.bat"}),"\uFF1A"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-batch",children:'@echo off\ncd /d "%~dp0"\npython pc-monitor.py\npause\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u53CC\u51FB\u8FD0\u884C\u5373\u53EF\u3002"}),"\n",(0,s.jsx)(e.h4,{id:"\u65B9\u6CD5-3\u4F7F\u7528-pythonw\u65E0\u7A97\u53E3\u8FD0\u884C",children:"\u65B9\u6CD5 3\uFF1A\u4F7F\u7528 pythonw\uFF08\u65E0\u7A97\u53E3\u8FD0\u884C\uFF09"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-powershell",children:"pythonw pc-monitor.py\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u4E03\u6545\u969C\u6392\u67E5",children:"\u4E03\u3001\u6545\u969C\u6392\u67E5"}),"\n",(0,s.jsx)(e.h3,{id:"71-\u5E38\u89C1\u95EE\u9898",children:"7.1 \u5E38\u89C1\u95EE\u9898"}),"\n",(0,s.jsx)(e.h4,{id:"\u95EE\u9898-1\u811A\u672C\u65E0\u6CD5\u8FDE\u63A5-mqtt",children:"\u95EE\u9898 1\uFF1A\u811A\u672C\u65E0\u6CD5\u8FDE\u63A5 MQTT"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u75C7\u72B6"}),"\uFF1A"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"\u274C \u65E0\u6CD5\u8FDE\u63A5\u5230 MQTT Broker: [Errno 10061] \u7531\u4E8E\u76EE\u6807\u8BA1\u7B97\u673A\u79EF\u6781\u62D2\u7EDD\uFF0C\u65E0\u6CD5\u8FDE\u63A5\u3002\n"})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u89E3\u51B3\u65B9\u6848"}),"\uFF1A"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-powershell",children:"# 1. \u786E\u8BA4\u7AEF\u53E3\u8F6C\u53D1\u6B63\u5728\u8FD0\u884C\nTest-NetConnection -ComputerName localhost -Port 1883\n\n# 2. \u5982\u679C\u5931\u8D25\uFF0C\u91CD\u65B0\u542F\u52A8\u7AEF\u53E3\u8F6C\u53D1\nkubectl port-forward svc/opentwins-mosquitto 1883:1883\n"})}),"\n",(0,s.jsx)(e.h4,{id:"\u95EE\u9898-2grafana-\u4E2D\u6CA1\u6709\u6570\u636E",children:"\u95EE\u9898 2\uFF1AGrafana \u4E2D\u6CA1\u6709\u6570\u636E"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u68C0\u67E5\u6E05\u5355"}),"\uFF1A"]}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u786E\u8BA4\u811A\u672C\u6B63\u5728\u8FD0\u884C"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-powershell",children:"# \u5E94\u8BE5\u770B\u5230\u6301\u7EED\u7684\u6570\u636E\u8F93\u51FA\n"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u9A8C\u8BC1 Ditto \u6536\u5230\u6570\u636E"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-powershell",children:'Invoke-RestMethod -Uri "http://localhost:8080/api/2/things/local:pc-monitor" -Method Get\n'})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u68C0\u67E5 InfluxDB"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u8BBF\u95EE ",(0,s.jsx)(e.a,{href:"http://localhost:8086",children:"http://localhost:8086"})]}),"\n",(0,s.jsxs)(e.li,{children:["\u767B\u5F55\u540E\u67E5\u770B ",(0,s.jsx)(e.code,{children:"ditto"})," bucket"]}),"\n",(0,s.jsxs)(e.li,{children:["Data Explorer \u2192 \u9009\u62E9 ",(0,s.jsx)(e.code,{children:"local:pc-monitor"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u68C0\u67E5 Grafana \u67E5\u8BE2\u8BED\u53E5"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["measurement \u540D\u79F0\u662F\u5426\u6B63\u786E\uFF1A",(0,s.jsx)(e.code,{children:"local:pc-monitor"})]}),"\n",(0,s.jsxs)(e.li,{children:["field \u540D\u79F0\u683C\u5F0F\uFF1A",(0,s.jsx)(e.code,{children:"features.cpu.properties.usage"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h4,{id:"\u95EE\u9898-3\u6570\u636E\u4E0D\u66F4\u65B0",children:"\u95EE\u9898 3\uFF1A\u6570\u636E\u4E0D\u66F4\u65B0"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u53EF\u80FD\u539F\u56E0"}),"\uFF1A"]}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Thing ID \u4E0D\u5339\u914D"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'# \u68C0\u67E5\u811A\u672C\u4E2D\u7684 THING_ID\nTHING_ID = "local:pc-monitor"  # \u5FC5\u987B\u4E0E Grafana \u67E5\u8BE2\u4E2D\u7684\u4E00\u81F4\n'})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u65F6\u95F4\u8303\u56F4\u592A\u77ED"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u5728 Grafana \u53F3\u4E0A\u89D2\u8C03\u6574\u65F6\u95F4\u8303\u56F4\u4E3A ",(0,s.jsx)(e.code,{children:"Last 5 minutes"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u805A\u5408\u7A97\u53E3\u592A\u5927"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-flux",children:"# \u51CF\u5C0F\u805A\u5408\u7A97\u53E3\n|> aggregateWindow(every: 5s, fn: mean, createEmpty: false)\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h4,{id:"\u95EE\u9898-4python-\u6A21\u5757\u672A\u5B89\u88C5",children:"\u95EE\u9898 4\uFF1APython \u6A21\u5757\u672A\u5B89\u88C5"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-powershell",children:"# \u91CD\u65B0\u5B89\u88C5\npip install paho-mqtt psutil --upgrade\n\n# \u6216\u4F7F\u7528\u56FD\u5185\u955C\u50CF\npip install paho-mqtt psutil -i https://pypi.tuna.tsinghua.edu.cn/simple\n"})}),"\n",(0,s.jsx)(e.h3,{id:"72-\u8C03\u8BD5\u6280\u5DE7",children:"7.2 \u8C03\u8BD5\u6280\u5DE7"}),"\n",(0,s.jsx)(e.h4,{id:"\u542F\u7528\u8BE6\u7EC6\u65E5\u5FD7",children:"\u542F\u7528\u8BE6\u7EC6\u65E5\u5FD7"}),"\n",(0,s.jsxs)(e.p,{children:["\u5728 ",(0,s.jsx)(e.code,{children:"pc-monitor.py"})," \u4E2D\u6DFB\u52A0\uFF1A"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"import logging\nlogging.basicConfig(level=logging.DEBUG)\n"})}),"\n",(0,s.jsx)(e.h4,{id:"\u67E5\u770B-mqtt-\u6D88\u606F",children:"\u67E5\u770B MQTT \u6D88\u606F"}),"\n",(0,s.jsxs)(e.p,{children:["\u4F7F\u7528 MQTT Explorer \u8FDE\u63A5\u5230 ",(0,s.jsx)(e.code,{children:"localhost:1883"}),"\uFF0C\u8BA2\u9605\u4E3B\u9898\uFF1A"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"local:pc-monitor/#\n"})}),"\n",(0,s.jsx)(e.h4,{id:"\u624B\u52A8\u6D4B\u8BD5-ditto-api",children:"\u624B\u52A8\u6D4B\u8BD5 Ditto API"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-powershell",children:'# \u624B\u52A8\u66F4\u65B0 CPU \u6570\u636E\n$body = @{\n    "usage" = 50.0\n} | ConvertTo-Json\n\nInvoke-RestMethod -Uri "http://localhost:8080/api/2/things/local:pc-monitor/features/cpu/properties" `\n    -Method PUT `\n    -Headers @{"Content-Type"="application/json"} `\n    -Body $body\n'})}),"\n",(0,s.jsx)(e.h2,{id:"\u516B\u6027\u80FD\u4F18\u5316",children:"\u516B\u3001\u6027\u80FD\u4F18\u5316"}),"\n",(0,s.jsx)(e.h3,{id:"81-\u8C03\u6574\u91C7\u96C6\u9891\u7387",children:"8.1 \u8C03\u6574\u91C7\u96C6\u9891\u7387"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"# \u5728 pc-monitor.py \u4E2D\nCOLLECT_INTERVAL = 10  # \u4ECE 5 \u79D2\u6539\u4E3A 10 \u79D2\uFF0C\u51CF\u5C11\u6570\u636E\u91CF\n"})}),"\n",(0,s.jsx)(e.h3,{id:"82-\u6570\u636E\u4FDD\u7559\u7B56\u7565",children:"8.2 \u6570\u636E\u4FDD\u7559\u7B56\u7565"}),"\n",(0,s.jsx)(e.p,{children:"\u5728 InfluxDB \u4E2D\u8BBE\u7F6E\u6570\u636E\u4FDD\u7559\u65F6\u95F4\uFF1A"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\u8BBF\u95EE ",(0,s.jsx)(e.a,{href:"http://localhost:8086",children:"http://localhost:8086"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Data"})," \u2192 ",(0,s.jsx)(e.strong,{children:"Buckets"})," \u2192 ",(0,s.jsx)(e.code,{children:"ditto"})]}),"\n",(0,s.jsx)(e.li,{children:"\u8BBE\u7F6E\u4FDD\u7559\u65F6\u95F4\uFF08\u5982 7 \u5929\u300130 \u5929\uFF09"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"83-\u4F18\u5316-grafana-\u67E5\u8BE2",children:"8.3 \u4F18\u5316 Grafana \u67E5\u8BE2"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-flux",children:'# \u4F7F\u7528\u66F4\u5927\u7684\u805A\u5408\u7A97\u53E3\u51CF\u5C11\u6570\u636E\u70B9\nfrom(bucket: "ditto")\n  |> range(start: -1h)\n  |> filter(fn: (r) => r["_measurement"] == "local:pc-monitor")\n  |> filter(fn: (r) => r["_field"] == "features.cpu.properties.usage")\n  |> aggregateWindow(every: 30s, fn: mean, createEmpty: false)  # 30\u79D2\u805A\u5408\n'})}),"\n",(0,s.jsx)(e.h2,{id:"\u4E5D\u6269\u5C55\u65B9\u6848",children:"\u4E5D\u3001\u6269\u5C55\u65B9\u6848"}),"\n",(0,s.jsx)(e.h3,{id:"91-\u76D1\u63A7\u670D\u52A1\u5668\u96C6\u7FA4",children:"9.1 \u76D1\u63A7\u670D\u52A1\u5668\u96C6\u7FA4"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5728\u6BCF\u53F0\u670D\u52A1\u5668\u4E0A\u8FD0\u884C\u76D1\u63A7\u811A\u672C"}),"\n",(0,s.jsx)(e.li,{children:"\u4F7F\u7528\u4E0D\u540C\u7684 Thing ID"}),"\n",(0,s.jsx)(e.li,{children:"\u5728 Grafana \u4E2D\u521B\u5EFA\u591A\u670D\u52A1\u5668\u6982\u89C8\u4EEA\u8868\u677F"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"92-\u79FB\u52A8\u7AEF\u8BBF\u95EE",children:"9.2 \u79FB\u52A8\u7AEF\u8BBF\u95EE"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u914D\u7F6E Grafana \u7684\u79FB\u52A8\u7AEF\u663E\u793A"}),"\n",(0,s.jsx)(e.li,{children:"\u4F7F\u7528 Grafana Cloud \u5B9E\u73B0\u8FDC\u7A0B\u8BBF\u95EE"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"93-\u96C6\u6210\u544A\u8B66\u7CFB\u7EDF",children:"9.3 \u96C6\u6210\u544A\u8B66\u7CFB\u7EDF"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u90AE\u4EF6\u544A\u8B66"}),"\n",(0,s.jsx)(e.li,{children:"\u4F01\u4E1A\u5FAE\u4FE1/\u9489\u9489\u544A\u8B66"}),"\n",(0,s.jsx)(e.li,{children:"Webhook \u96C6\u6210\u5176\u4ED6\u7CFB\u7EDF"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"94-\u6570\u636E\u5206\u6790",children:"9.4 \u6570\u636E\u5206\u6790"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5BFC\u51FA\u5386\u53F2\u6570\u636E\u5230 Excel"}),"\n",(0,s.jsx)(e.li,{children:"\u4F7F\u7528 Python/Jupyter \u8FDB\u884C\u6570\u636E\u5206\u6790"}),"\n",(0,s.jsx)(e.li,{children:"\u9884\u6D4B\u8D44\u6E90\u4F7F\u7528\u8D8B\u52BF"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u5341\u603B\u7ED3",children:"\u5341\u3001\u603B\u7ED3"}),"\n",(0,s.jsx)(e.h3,{id:"101-\u5B66\u5230\u7684\u77E5\u8BC6",children:"10.1 \u5B66\u5230\u7684\u77E5\u8BC6"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u2705 \u5982\u4F55\u4F7F\u7528 Ditto API \u521B\u5EFA\u6570\u5B57\u5B6A\u751F"}),"\n",(0,s.jsx)(e.li,{children:"\u2705 \u5982\u4F55\u901A\u8FC7 MQTT \u53D1\u9001\u6570\u636E\u5230 OpenTwins"}),"\n",(0,s.jsx)(e.li,{children:"\u2705 \u5982\u4F55\u5728 Grafana \u4E2D\u521B\u5EFA\u53EF\u89C6\u5316\u5927\u5C4F"}),"\n",(0,s.jsx)(e.li,{children:"\u2705 \u5982\u4F55\u7F16\u5199 Flux \u67E5\u8BE2\u8BED\u53E5"}),"\n",(0,s.jsx)(e.li,{children:"\u2705 \u5982\u4F55\u4F7F\u7528 Python \u91C7\u96C6\u7CFB\u7EDF\u6027\u80FD\u6570\u636E"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"102-\u5B8C\u6574\u4EE3\u7801",children:"10.2 \u5B8C\u6574\u4EE3\u7801"}),"\n",(0,s.jsx)(e.p,{children:"\u6240\u6709\u793A\u4F8B\u4EE3\u7801\u5DF2\u5305\u542B\u5728\u6559\u7A0B\u4E2D\uFF0C\u5B8C\u6574\u7684\u9879\u76EE\u7ED3\u6784\uFF1A"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"pc-monitor/\n\u251C\u2500\u2500 pc-monitor.py          # \u4E3B\u76D1\u63A7\u811A\u672C\n\u251C\u2500\u2500 requirements.txt       # Python \u4F9D\u8D56\n\u251C\u2500\u2500 start-monitor.bat      # Windows \u542F\u52A8\u811A\u672C\n\u2514\u2500\u2500 README.md             # \u8BF4\u660E\u6587\u6863\n"})}),"\n",(0,s.jsx)(e.h3,{id:"103-\u4E0B\u4E00\u6B65",children:"10.3 \u4E0B\u4E00\u6B65"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u5C1D\u8BD5\u6DFB\u52A0\u66F4\u591A\u76D1\u63A7\u6307\u6807\uFF08\u7F51\u7EDC\u3001GPU\u3001\u6E29\u5EA6\uFF09"}),"\n",(0,s.jsx)(e.li,{children:"\u521B\u5EFA\u66F4\u590D\u6742\u7684 Grafana \u4EEA\u8868\u677F"}),"\n",(0,s.jsx)(e.li,{children:"\u914D\u7F6E\u544A\u8B66\u89C4\u5219"}),"\n",(0,s.jsx)(e.li,{children:"\u76D1\u63A7\u591A\u53F0\u7535\u8111"}),"\n",(0,s.jsx)(e.li,{children:"\u63A2\u7D22 OpenTwins \u7684\u5176\u4ED6\u529F\u80FD"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u5341\u4E00\u53C2\u8003\u8D44\u6E90",children:"\u5341\u4E00\u3001\u53C2\u8003\u8D44\u6E90"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://ertis-research.github.io/opentwins/",children:"OpenTwins \u5B98\u65B9\u6587\u6863"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.eclipse.org/ditto/httpapi-overview.html",children:"Eclipse Ditto API \u6587\u6863"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://grafana.com/docs/",children:"Grafana \u6587\u6863"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://docs.influxdata.com/influxdb/v2.0/query-data/get-started/",children:"InfluxDB Flux \u67E5\u8BE2\u8BED\u8A00"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://psutil.readthedocs.io/",children:"Python psutil \u6587\u6863"})}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u6559\u7A0B\u7248\u672C"}),": 1.0",(0,s.jsx)(e.br,{}),"\n",(0,s.jsx)(e.strong,{children:"\u6700\u540E\u66F4\u65B0"}),": 2025-01-19",(0,s.jsx)(e.br,{}),"\n",(0,s.jsx)(e.strong,{children:"\u96BE\u5EA6"}),": \u2B50\u2B50\u2B50 \u4E2D\u7EA7"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsxs)(e.strong,{children:["\u5982\u6709\u95EE\u9898\uFF0C\u8BF7\u53C2\u8003 ",(0,s.jsx)(e.a,{href:"/en/docs/digital-twin/opentwins-windows-deployment",children:"OpenTwins \u90E8\u7F72\u6587\u6863"})," \u7684\u6545\u969C\u6392\u67E5\u90E8\u5206\u3002"]})})]})}function h(n={}){let{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(a,{...n})}):a(n)}},28453:function(n,e,i){i.d(e,{R:()=>t,x:()=>d});var l=i(96540);let s={},r=l.createContext(s);function t(n){let e=l.useContext(r);return l.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:t(n.components),l.createElement(r.Provider,{value:e},n.children)}}}]);