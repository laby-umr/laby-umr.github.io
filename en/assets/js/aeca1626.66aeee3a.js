"use strict";(self.webpackChunkfullstack_dev_blog=self.webpackChunkfullstack_dev_blog||[]).push([["61601"],{91190:function(n,e,t){t.r(e),t.d(e,{metadata:()=>i,default:()=>h,frontMatter:()=>c,contentTitle:()=>u,toc:()=>p,assets:()=>o});var i=JSON.parse('{"id":"backend/big-data/influxdb-data-collection","title":"InfluxDB\u6570\u636E\u91C7\u96C6\u8BE6\u89E3","description":"\u6DF1\u5165\u7406\u89E3InfluxDB\u65F6\u5E8F\u6570\u636E\u5E93\u3001\u6570\u636E\u91C7\u96C6\u65B9\u6CD5\u3001\u6027\u80FD\u4F18\u5316\u548C\u6700\u4F73\u5B9E\u8DF5","source":"@site/docs/backend/big-data/influxdb-data-collection.mdx","sourceDirName":"backend/big-data","slug":"/backend/big-data/influxdb-data-collection","permalink":"/en/docs/backend/big-data/influxdb-data-collection","draft":false,"unlisted":false,"editUrl":"https://github.com/MasterLiu93/blog-web/tree/main/docs/backend/big-data/influxdb-data-collection.mdx","tags":[],"version":"current","lastUpdatedBy":"Laby","lastUpdatedAt":1755302400000,"sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"InfluxDB\u6570\u636E\u91C7\u96C6\u8BE6\u89E3","description":"\u6DF1\u5165\u7406\u89E3InfluxDB\u65F6\u5E8F\u6570\u636E\u5E93\u3001\u6570\u636E\u91C7\u96C6\u65B9\u6CD5\u3001\u6027\u80FD\u4F18\u5316\u548C\u6700\u4F73\u5B9E\u8DF5","authors":["Laby"],"last_update":{"date":"2025-08-16T00:00:00.000Z","author":"Laby"}},"sidebar":"tutorialSidebar","previous":{"title":"\u6570\u636E\u4ED3\u5E93\u4E0EETL\u6280\u672F","permalink":"/en/docs/backend/big-data/data-warehouse-etl"},"next":{"title":"\u5927\u6570\u636E\u6280\u672F\u603B\u7ED3","permalink":"/en/docs/backend/big-data/big-data-summary"}}'),r=t(74848),l=t(28453),a=t(78010),s=t(57250),d=t(19007);let c={sidebar_position:6,title:"InfluxDB\u6570\u636E\u91C7\u96C6\u8BE6\u89E3",description:"\u6DF1\u5165\u7406\u89E3InfluxDB\u65F6\u5E8F\u6570\u636E\u5E93\u3001\u6570\u636E\u91C7\u96C6\u65B9\u6CD5\u3001\u6027\u80FD\u4F18\u5316\u548C\u6700\u4F73\u5B9E\u8DF5",authors:["Laby"],last_update:{date:new Date("2025-08-16T00:00:00.000Z"),author:"Laby"}},u="InfluxDB\u6570\u636E\u91C7\u96C6\u8BE6\u89E3",o={},p=[{value:"1. InfluxDB\u57FA\u7840\u6982\u5FF5",id:"1-influxdb\u57FA\u7840\u6982\u5FF5",level:2},{value:"1.1 \u4EC0\u4E48\u662FInfluxDB\uFF1F",id:"11-\u4EC0\u4E48\u662Finfluxdb",level:3},{value:"InfluxDB\u6838\u5FC3\u6982\u5FF5",id:"influxdb\u6838\u5FC3\u6982\u5FF5",level:4},{value:"1.2 \u6570\u636E\u6A21\u578B",id:"12-\u6570\u636E\u6A21\u578B",level:3},{value:"\u6570\u636E\u70B9\u7ED3\u6784\u793A\u4F8B",id:"\u6570\u636E\u70B9\u7ED3\u6784\u793A\u4F8B",level:4},{value:"2. InfluxDB\u5B89\u88C5\u548C\u914D\u7F6E",id:"2-influxdb\u5B89\u88C5\u548C\u914D\u7F6E",level:2},{value:"2.1 \u5B89\u88C5\u65B9\u6CD5",id:"21-\u5B89\u88C5\u65B9\u6CD5",level:3},{value:"2.2 \u914D\u7F6E\u6587\u4EF6",id:"22-\u914D\u7F6E\u6587\u4EF6",level:3},{value:"3. \u6570\u636E\u91C7\u96C6\u65B9\u6CD5",id:"3-\u6570\u636E\u91C7\u96C6\u65B9\u6CD5",level:2},{value:"3.1 HTTP API\u5199\u5165",id:"31-http-api\u5199\u5165",level:3},{value:"3.2 \u5BA2\u6237\u7AEF\u5E93\u5199\u5165",id:"32-\u5BA2\u6237\u7AEF\u5E93\u5199\u5165",level:3},{value:"3.3 \u6279\u91CF\u5199\u5165\u4F18\u5316",id:"33-\u6279\u91CF\u5199\u5165\u4F18\u5316",level:3},{value:"4. \u6570\u636E\u91C7\u96C6\u6700\u4F73\u5B9E\u8DF5",id:"4-\u6570\u636E\u91C7\u96C6\u6700\u4F73\u5B9E\u8DF5",level:2},{value:"4.1 \u6570\u636E\u6A21\u578B\u8BBE\u8BA1",id:"41-\u6570\u636E\u6A21\u578B\u8BBE\u8BA1",level:3},{value:"\u597D\u7684\u6570\u636E\u6A21\u578B\u793A\u4F8B",id:"\u597D\u7684\u6570\u636E\u6A21\u578B\u793A\u4F8B",level:4},{value:"4.2 \u6027\u80FD\u4F18\u5316\u7B56\u7565",id:"42-\u6027\u80FD\u4F18\u5316\u7B56\u7565",level:3},{value:"5. \u6570\u636E\u91C7\u96C6\u5E94\u7528\u573A\u666F",id:"5-\u6570\u636E\u91C7\u96C6\u5E94\u7528\u573A\u666F",level:2},{value:"5.1 \u7CFB\u7EDF\u76D1\u63A7",id:"51-\u7CFB\u7EDF\u76D1\u63A7",level:3},{value:"5.2 IoT\u8BBE\u5907\u6570\u636E\u91C7\u96C6",id:"52-iot\u8BBE\u5907\u6570\u636E\u91C7\u96C6",level:3},{value:"6. \u6570\u636E\u67E5\u8BE2\u548C\u5206\u6790",id:"6-\u6570\u636E\u67E5\u8BE2\u548C\u5206\u6790",level:2},{value:"6.1 \u57FA\u672C\u67E5\u8BE2",id:"61-\u57FA\u672C\u67E5\u8BE2",level:3},{value:"6.2 \u9AD8\u7EA7\u67E5\u8BE2\u548C\u5206\u6790",id:"62-\u9AD8\u7EA7\u67E5\u8BE2\u548C\u5206\u6790",level:3},{value:"7. \u76D1\u63A7\u548C\u544A\u8B66",id:"7-\u76D1\u63A7\u548C\u544A\u8B66",level:2},{value:"7.1 \u6570\u636E\u8D28\u91CF\u76D1\u63A7",id:"71-\u6570\u636E\u8D28\u91CF\u76D1\u63A7",level:3},{value:"7.2 \u544A\u8B66\u89C4\u5219\u914D\u7F6E",id:"72-\u544A\u8B66\u89C4\u5219\u914D\u7F6E",level:3},{value:"8. \u6027\u80FD\u4F18\u5316\u548C\u8C03\u4F18",id:"8-\u6027\u80FD\u4F18\u5316\u548C\u8C03\u4F18",level:2},{value:"8.1 \u5199\u5165\u6027\u80FD\u4F18\u5316",id:"81-\u5199\u5165\u6027\u80FD\u4F18\u5316",level:3},{value:"8.2 \u67E5\u8BE2\u6027\u80FD\u4F18\u5316",id:"82-\u67E5\u8BE2\u6027\u80FD\u4F18\u5316",level:3},{value:"9. \u96C6\u7FA4\u90E8\u7F72\u548C\u9AD8\u53EF\u7528",id:"9-\u96C6\u7FA4\u90E8\u7F72\u548C\u9AD8\u53EF\u7528",level:2},{value:"9.1 \u96C6\u7FA4\u67B6\u6784",id:"91-\u96C6\u7FA4\u67B6\u6784",level:3},{value:"9.2 \u9AD8\u53EF\u7528\u914D\u7F6E",id:"92-\u9AD8\u53EF\u7528\u914D\u7F6E",level:3},{value:"10. \u603B\u7ED3",id:"10-\u603B\u7ED3",level:2},{value:"\u5173\u952E\u8981\u70B9",id:"\u5173\u952E\u8981\u70B9",level:3},{value:"\u5B66\u4E60\u5EFA\u8BAE",id:"\u5B66\u4E60\u5EFA\u8BAE",level:3}];function m(n){let e={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"influxdb\u6570\u636E\u91C7\u96C6\u8BE6\u89E3",children:"InfluxDB\u6570\u636E\u91C7\u96C6\u8BE6\u89E3"})}),"\n",(0,r.jsx)(e.p,{children:"InfluxDB\u662F\u4E00\u4E2A\u4E13\u4E3A\u65F6\u95F4\u5E8F\u5217\u6570\u636E\u8BBE\u8BA1\u7684\u9AD8\u6027\u80FD\u6570\u636E\u5E93\uFF0C\u5E7F\u6CDB\u5E94\u7528\u4E8E\u76D1\u63A7\u7CFB\u7EDF\u3001IoT\u8BBE\u5907\u3001\u5B9E\u65F6\u5206\u6790\u7B49\u573A\u666F\u3002\u5B83\u63D0\u4F9B\u4E86\u9AD8\u6548\u7684\u6570\u636E\u5199\u5165\u3001\u67E5\u8BE2\u548C\u805A\u5408\u80FD\u529B\uFF0C\u662F\u6784\u5EFA\u5B9E\u65F6\u6570\u636E\u91C7\u96C6\u7CFB\u7EDF\u7684\u7406\u60F3\u9009\u62E9\u3002"}),"\n",(0,r.jsx)(e.admonition,{title:"\u672C\u6587\u5185\u5BB9\u6982\u89C8",type:"info",children:(0,r.jsx)(d.A,{toc:p})}),"\n",(0,r.jsxs)(e.admonition,{title:"\u6838\u5FC3\u4EF7\u503C",type:"tip",children:[(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"InfluxDB\u6570\u636E\u91C7\u96C6 = \u9AD8\u6027\u80FD\u65F6\u5E8F\u5B58\u50A8 + \u5B9E\u65F6\u6570\u636E\u5199\u5165 + \u7075\u6D3B\u67E5\u8BE2\u8BED\u8A00 + \u6570\u636E\u538B\u7F29\u4F18\u5316 + \u96C6\u7FA4\u6269\u5C55\u80FD\u529B"})}),(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u{1F680} ",(0,r.jsx)(e.strong,{children:"\u9AD8\u6027\u80FD\u65F6\u5E8F\u5B58\u50A8"}),"\uFF1A\u4E13\u4E3A\u65F6\u95F4\u5E8F\u5217\u6570\u636E\u4F18\u5316\u7684\u5B58\u50A8\u5F15\u64CE"]}),"\n",(0,r.jsxs)(e.li,{children:["\u{1F468}\u200D\u{1F4BB} ",(0,r.jsx)(e.strong,{children:"\u5B9E\u65F6\u6570\u636E\u5199\u5165"}),"\uFF1A\u652F\u6301\u9AD8\u541E\u5410\u91CF\u7684\u6570\u636E\u5199\u5165\u64CD\u4F5C"]}),"\n",(0,r.jsxs)(e.li,{children:["\u{1F50D} ",(0,r.jsx)(e.strong,{children:"\u7075\u6D3B\u67E5\u8BE2\u8BED\u8A00"}),"\uFF1AInfluxQL\u548CFlux\u67E5\u8BE2\u8BED\u8A00\u652F\u6301\u590D\u6742\u67E5\u8BE2"]}),"\n",(0,r.jsxs)(e.li,{children:["\u{1F517} ",(0,r.jsx)(e.strong,{children:"\u6570\u636E\u538B\u7F29\u4F18\u5316"}),"\uFF1A\u81EA\u52A8\u6570\u636E\u538B\u7F29\uFF0C\u8282\u7701\u5B58\u50A8\u7A7A\u95F4"]}),"\n",(0,r.jsxs)(e.li,{children:["\u{1F4DA} ",(0,r.jsx)(e.strong,{children:"\u96C6\u7FA4\u6269\u5C55\u80FD\u529B"}),"\uFF1A\u652F\u6301\u6C34\u5E73\u6269\u5C55\uFF0C\u6EE1\u8DB3\u5927\u89C4\u6A21\u6570\u636E\u9700\u6C42"]}),"\n"]})]}),"\n",(0,r.jsx)(e.h2,{id:"1-influxdb\u57FA\u7840\u6982\u5FF5",children:"1. InfluxDB\u57FA\u7840\u6982\u5FF5"}),"\n",(0,r.jsx)(e.h3,{id:"11-\u4EC0\u4E48\u662Finfluxdb",children:"1.1 \u4EC0\u4E48\u662FInfluxDB\uFF1F"}),"\n",(0,r.jsx)(e.p,{children:"InfluxDB\u662F\u4E00\u4E2A\u5F00\u6E90\u7684\u65F6\u5E8F\u6570\u636E\u5E93\uFF0C\u4E13\u95E8\u8BBE\u8BA1\u7528\u4E8E\u5904\u7406\u65F6\u95F4\u5E8F\u5217\u6570\u636E\u3002\u5B83\u5177\u6709\u4EE5\u4E0B\u7279\u70B9\uFF1A"}),"\n",(0,r.jsx)(e.mermaid,{value:'graph TD\n    A[InfluxDB\u7279\u70B9] --\x3e B[\u65F6\u5E8F\u4F18\u5316]\n    A --\x3e C[\u9AD8\u6027\u80FD]\n    A --\x3e D[\u6613\u6269\u5C55]\n    A --\x3e E[SQL\u517C\u5BB9]\n    \n    B --\x3e B1["\u65F6\u95F4\u7D22\u5F15\u4F18\u5316"]\n    B --\x3e B2["\u81EA\u52A8\u6570\u636E\u538B\u7F29"]\n    \n    C --\x3e C1["\u9AD8\u5199\u5165\u541E\u5410\u91CF"]\n    C --\x3e C2["\u5FEB\u901F\u67E5\u8BE2\u54CD\u5E94"]\n    \n    D --\x3e D1["\u6C34\u5E73\u6269\u5C55"]\n    D --\x3e D2["\u96C6\u7FA4\u90E8\u7F72"]\n    \n    E --\x3e E1["InfluxQL\u8BED\u6CD5"]\n    E --\x3e E2["Flux\u67E5\u8BE2\u8BED\u8A00"]'}),"\n",(0,r.jsx)(e.h4,{id:"influxdb\u6838\u5FC3\u6982\u5FF5",children:"InfluxDB\u6838\u5FC3\u6982\u5FF5"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",metastring:'title="InfluxDB\u6838\u5FC3\u6982\u5FF5\u793A\u4F8B"',children:'public class InfluxDBConcepts {\n    public static void main(String[] args) {\n        // 1. Database - \u6570\u636E\u5E93\n        System.out.println("Database: \u5B58\u50A8\u65F6\u95F4\u5E8F\u5217\u6570\u636E\u7684\u5BB9\u5668");\n        \n        // 2. Measurement - \u6D4B\u91CF\u503C\uFF08\u7C7B\u4F3C\u5173\u7CFB\u6570\u636E\u5E93\u7684\u8868\uFF09\n        System.out.println("Measurement: \u5B58\u50A8\u76F8\u5173\u65F6\u95F4\u5E8F\u5217\u6570\u636E\u7684\u96C6\u5408");\n        \n        // 3. Tag - \u6807\u7B7E\uFF08\u7D22\u5F15\u5B57\u6BB5\uFF09\n        System.out.println("Tag: \u7528\u4E8E\u67E5\u8BE2\u548C\u5206\u7EC4\u7684\u5143\u6570\u636E\u5B57\u6BB5");\n        \n        // 4. Field - \u5B57\u6BB5\uFF08\u5B9E\u9645\u6570\u636E\u503C\uFF09\n        System.out.println("Field: \u5B58\u50A8\u5B9E\u9645\u6D4B\u91CF\u503C\u7684\u5B57\u6BB5");\n        \n        // 5. Timestamp - \u65F6\u95F4\u6233\n        System.out.println("Timestamp: \u6570\u636E\u70B9\u7684\u65F6\u95F4\u6807\u8BC6");\n        \n        // 6. Retention Policy - \u4FDD\u7559\u7B56\u7565\n        System.out.println("Retention Policy: \u6570\u636E\u4FDD\u7559\u65F6\u95F4\u548C\u5206\u7247\u7B56\u7565");\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"12-\u6570\u636E\u6A21\u578B",children:"1.2 \u6570\u636E\u6A21\u578B"}),"\n",(0,r.jsx)(e.p,{children:"InfluxDB\u7684\u6570\u636E\u6A21\u578B\u4E0E\u4F20\u7EDF\u5173\u7CFB\u6570\u636E\u5E93\u4E0D\u540C\uFF1A"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u6982\u5FF5"}),(0,r.jsx)(e.th,{children:"\u5173\u7CFB\u6570\u636E\u5E93"}),(0,r.jsx)(e.th,{children:"InfluxDB"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"\u6570\u636E\u5E93"})}),(0,r.jsx)(e.td,{children:"Database"}),(0,r.jsx)(e.td,{children:"Database"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"\u8868"})}),(0,r.jsx)(e.td,{children:"Table"}),(0,r.jsx)(e.td,{children:"Measurement"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"\u884C"})}),(0,r.jsx)(e.td,{children:"Row"}),(0,r.jsx)(e.td,{children:"Point"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"\u5217"})}),(0,r.jsx)(e.td,{children:"Column"}),(0,r.jsx)(e.td,{children:"Tag/Field"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"\u4E3B\u952E"})}),(0,r.jsx)(e.td,{children:"Primary Key"}),(0,r.jsx)(e.td,{children:"Timestamp + Tag Set"})]})]})]}),"\n",(0,r.jsx)(e.h4,{id:"\u6570\u636E\u70B9\u7ED3\u6784\u793A\u4F8B",children:"\u6570\u636E\u70B9\u7ED3\u6784\u793A\u4F8B"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",metastring:'title="\u6570\u636E\u70B9\u7ED3\u6784\u793A\u4F8B"',children:'public class DataPointStructure {\n    // InfluxDB\u6570\u636E\u70B9\u7ED3\u6784\n    public static class DataPoint {\n        private String measurement;        // \u6D4B\u91CF\u503C\u540D\u79F0\n        private Map<String, String> tags; // \u6807\u7B7E\u96C6\u5408\n        private Map<String, Object> fields; // \u5B57\u6BB5\u96C6\u5408\n        private long timestamp;            // \u65F6\u95F4\u6233\n        \n        // \u793A\u4F8B\uFF1ACPU\u4F7F\u7528\u7387\u6570\u636E\u70B9\n        public static DataPoint createCPUUsagePoint() {\n            DataPoint point = new DataPoint();\n            point.measurement = "cpu_usage";\n            \n            // \u6807\u7B7E\uFF1A\u7528\u4E8E\u67E5\u8BE2\u548C\u5206\u7EC4\n            point.tags = new HashMap<>();\n            point.tags.put("host", "server-01");\n            point.tags.put("region", "us-west");\n            point.tags.put("cpu_core", "0");\n            \n            // \u5B57\u6BB5\uFF1A\u5B9E\u9645\u6D4B\u91CF\u503C\n            point.fields = new HashMap<>();\n            point.fields.put("usage_percent", 75.5);\n            point.fields.put("temperature", 45.2);\n            \n            // \u65F6\u95F4\u6233\n            point.timestamp = System.currentTimeMillis();\n            \n            return point;\n        }\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"2-influxdb\u5B89\u88C5\u548C\u914D\u7F6E",children:"2. InfluxDB\u5B89\u88C5\u548C\u914D\u7F6E"}),"\n",(0,r.jsx)(e.h3,{id:"21-\u5B89\u88C5\u65B9\u6CD5",children:"2.1 \u5B89\u88C5\u65B9\u6CD5"}),"\n",(0,r.jsxs)(a.A,{children:[(0,r.jsx)(s.A,{value:"docker",label:"Docker\u5B89\u88C5",default:!0,children:(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u4F7F\u7528Docker\u5B89\u88C5InfluxDB\ndocker run -d \\\n  --name influxdb \\\n  -p 8086:8086 \\\n  -v influxdb-data:/var/lib/influxdb2 \\\n  -v influxdb-config:/etc/influxdb2 \\\n  -e DOCKER_INFLUXDB_INIT_MODE=setup \\\n  -e DOCKER_INFLUXDB_INIT_USERNAME=admin \\\n  -e DOCKER_INFLUXDB_INIT_PASSWORD=password123 \\\n  -e DOCKER_INFLUXDB_INIT_ORG=myorg \\\n  -e DOCKER_INFLUXDB_INIT_BUCKET=mybucket \\\n  influxdb:2.7\n"})})}),(0,r.jsx)(s.A,{value:"package",label:"\u5305\u7BA1\u7406\u5668\u5B89\u88C5",children:(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Ubuntu/Debian\nwget https://dl.influxdata.com/influxdb/releases/influxdb2-2.7.1-amd64.deb\nsudo dpkg -i influxdb2-2.7.1-amd64.deb\n\n# CentOS/RHEL\nwget https://dl.influxdata.com/influxdb/releases/influxdb2-2.7.1.x86_64.rpm\nsudo yum localinstall influxdb2-2.7.1.x86_64.rpm\n"})})}),(0,r.jsx)(s.A,{value:"binary",label:"\u4E8C\u8FDB\u5236\u5B89\u88C5",children:(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u4E0B\u8F7D\u4E8C\u8FDB\u5236\u6587\u4EF6\nwget https://dl.influxdata.com/influxdb/releases/influxdb2-2.7.1-linux-amd64.tar.gz\ntar xvfz influxdb2-2.7.1-linux-amd64.tar.gz\ncd influxdb2-2.7.1-linux-amd64\n\n# \u542F\u52A8\u670D\u52A1\n./influxd\n"})})})]}),"\n",(0,r.jsx)(e.h3,{id:"22-\u914D\u7F6E\u6587\u4EF6",children:"2.2 \u914D\u7F6E\u6587\u4EF6"}),"\n",(0,r.jsx)(e.p,{children:"InfluxDB\u7684\u4E3B\u8981\u914D\u7F6E\u6587\u4EF6\uFF1A"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",metastring:'title="influxdb.yml\u914D\u7F6E\u793A\u4F8B"',children:'# InfluxDB\u914D\u7F6E\u6587\u4EF6\napi:\n  bind-address: ":8086"\n  auth-enabled: true\n\nmeta:\n  dir: "/var/lib/influxdb2/meta"\n  bind-address: ":8089"\n\ndata:\n  dir: "/var/lib/influxdb2/data"\n  wal-dir: "/var/lib/influxdb2/wal"\n  series-id-set-cache-size: 100\n\nhttp:\n  bind-address: ":8086"\n  auth-enabled: true\n  log-enabled: true\n  write-tracing: false\n  pprof-enabled: false\n\nlogging:\n  level: "info"\n  format: "auto"\n'})}),"\n",(0,r.jsx)(e.h2,{id:"3-\u6570\u636E\u91C7\u96C6\u65B9\u6CD5",children:"3. \u6570\u636E\u91C7\u96C6\u65B9\u6CD5"}),"\n",(0,r.jsx)(e.h3,{id:"31-http-api\u5199\u5165",children:"3.1 HTTP API\u5199\u5165"}),"\n",(0,r.jsx)(e.p,{children:"InfluxDB\u63D0\u4F9B\u4E86RESTful HTTP API\u7528\u4E8E\u6570\u636E\u5199\u5165\uFF1A"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",metastring:'title="HTTP API\u6570\u636E\u5199\u5165\u793A\u4F8B"',children:'public class InfluxDBHTTPWriter {\n    private final String url;\n    private final String token;\n    private final String org;\n    private final String bucket;\n    \n    public InfluxDBHTTPWriter(String url, String token, String org, String bucket) {\n        this.url = url;\n        this.token = token;\n        this.org = org;\n        this.bucket = bucket;\n    }\n    \n    public void writeDataPoint(DataPoint point) throws IOException {\n        // \u6784\u5EFALine Protocol\u683C\u5F0F\u7684\u6570\u636E\n        String lineProtocol = buildLineProtocol(point);\n        \n        // \u53D1\u9001HTTP POST\u8BF7\u6C42\n        URL writeUrl = new URL(url + "/api/v2/write?org=" + org + "&bucket=" + bucket);\n        HttpURLConnection connection = (HttpURLConnection) writeUrl.openConnection();\n        connection.setRequestMethod("POST");\n        connection.setRequestProperty("Authorization", "Token " + token);\n        connection.setRequestProperty("Content-Type", "text/plain; charset=utf-8");\n        connection.setDoOutput(true);\n        \n        try (OutputStreamWriter writer = new OutputStreamWriter(connection.getOutputStream())) {\n            writer.write(lineProtocol);\n        }\n        \n        int responseCode = connection.getResponseCode();\n        if (responseCode != 204) {\n            throw new IOException("Write failed with response code: " + responseCode);\n        }\n    }\n    \n    private String buildLineProtocol(DataPoint point) {\n        StringBuilder sb = new StringBuilder();\n        \n        // \u6D4B\u91CF\u503C\u540D\u79F0\n        sb.append(point.measurement);\n        \n        // \u6807\u7B7E\n        if (point.tags != null && !point.tags.isEmpty()) {\n            for (Map.Entry<String, String> tag : point.tags.entrySet()) {\n                sb.append(",").append(tag.getKey()).append("=").append(tag.getValue());\n            }\n        }\n        \n        // \u5B57\u6BB5\n        sb.append(" ");\n        boolean first = true;\n        for (Map.Entry<String, Object> field : point.fields.entrySet()) {\n            if (!first) sb.append(",");\n            sb.append(field.getKey()).append("=");\n            \n            Object value = field.getValue();\n            if (value instanceof String) {\n                sb.append("\\"").append(value).append("\\"");\n            } else {\n                sb.append(value);\n            }\n            first = false;\n        }\n        \n        // \u65F6\u95F4\u6233\uFF08\u7EB3\u79D2\uFF09\n        sb.append(" ").append(point.timestamp * 1_000_000);\n        \n        return sb.toString();\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"32-\u5BA2\u6237\u7AEF\u5E93\u5199\u5165",children:"3.2 \u5BA2\u6237\u7AEF\u5E93\u5199\u5165"}),"\n",(0,r.jsx)(e.p,{children:"\u4F7F\u7528\u5B98\u65B9Java\u5BA2\u6237\u7AEF\u5E93\uFF1A"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",metastring:'title="Java\u5BA2\u6237\u7AEF\u5199\u5165\u793A\u4F8B"',children:"public class InfluxDBClientWriter {\n    private final InfluxDBClient client;\n    private final WriteApi writeApi;\n    \n    public InfluxDBClientWriter(String url, String token, String org, String bucket) {\n        this.client = InfluxDBClientFactory.create(url, token.toCharArray(), org, bucket);\n        this.writeApi = client.getWriteApi();\n    }\n    \n    public void writeDataPoint(DataPoint point) {\n        Point influxPoint = Point.measurement(point.measurement)\n            .addTags(point.tags)\n            .addFields(point.fields)\n            .time(point.timestamp, WritePrecision.MS);\n        \n        writeApi.writePoint(influxPoint);\n    }\n    \n    public void writeBatch(List<DataPoint> points) {\n        List<Point> influxPoints = points.stream()\n            .map(point -> Point.measurement(point.measurement)\n                .addTags(point.tags)\n                .addFields(point.fields)\n                .time(point.timestamp, WritePrecision.MS))\n            .collect(Collectors.toList());\n        \n        writeApi.writePoints(influxPoints);\n    }\n    \n    public void close() {\n        writeApi.close();\n        client.close();\n    }\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"33-\u6279\u91CF\u5199\u5165\u4F18\u5316",children:"3.3 \u6279\u91CF\u5199\u5165\u4F18\u5316"}),"\n",(0,r.jsx)(e.p,{children:"\u5BF9\u4E8E\u9AD8\u541E\u5410\u91CF\u573A\u666F\uFF0C\u6279\u91CF\u5199\u5165\u662F\u5FC5\u8981\u7684\uFF1A"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",metastring:'title="\u6279\u91CF\u5199\u5165\u4F18\u5316\u793A\u4F8B"',children:"public class BatchWriter {\n    private final InfluxDBClient client;\n    private final WriteApi writeApi;\n    private final int batchSize;\n    private final long flushInterval;\n    \n    private final List<Point> buffer = new ArrayList<>();\n    private final ScheduledExecutorService scheduler;\n    \n    public BatchWriter(String url, String token, String org, String bucket, \n                      int batchSize, long flushInterval) {\n        this.client = InfluxDBClientFactory.create(url, token.toCharArray(), org, bucket);\n        this.writeApi = client.getWriteApi();\n        this.batchSize = batchSize;\n        this.flushInterval = flushInterval;\n        \n        // \u8BBE\u7F6E\u6279\u91CF\u5199\u5165\u9009\u9879\n        writeApi.setWriteOptions(WriteOptions.builder()\n            .batchSize(batchSize)\n            .flushDuration(flushInterval)\n            .jitterDuration(1000)\n            .retryBufferLimit(50000)\n            .maxRetries(5)\n            .maxRetryDelay(30000)\n            .exponentialBase(2)\n            .build());\n        \n        // \u542F\u52A8\u5B9A\u65F6\u5237\u65B0\u4EFB\u52A1\n        this.scheduler = Executors.newScheduledThreadPool(1);\n        this.scheduler.scheduleAtFixedRate(this::flush, flushInterval, flushInterval, TimeUnit.MILLISECONDS);\n    }\n    \n    public void writePoint(Point point) {\n        synchronized (buffer) {\n            buffer.add(point);\n            if (buffer.size() >= batchSize) {\n                flush();\n            }\n        }\n    }\n    \n    private void flush() {\n        synchronized (buffer) {\n            if (!buffer.isEmpty()) {\n                writeApi.writePoints(buffer);\n                buffer.clear();\n            }\n        }\n    }\n    \n    public void close() {\n        flush();\n        scheduler.shutdown();\n        writeApi.close();\n        client.close();\n    }\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"4-\u6570\u636E\u91C7\u96C6\u6700\u4F73\u5B9E\u8DF5",children:"4. \u6570\u636E\u91C7\u96C6\u6700\u4F73\u5B9E\u8DF5"}),"\n",(0,r.jsx)(e.h3,{id:"41-\u6570\u636E\u6A21\u578B\u8BBE\u8BA1",children:"4.1 \u6570\u636E\u6A21\u578B\u8BBE\u8BA1"}),"\n",(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"card__header",children:(0,r.jsx)("h4",{children:"\u65F6\u5E8F\u6570\u636E\u6A21\u578B\u8BBE\u8BA1\u539F\u5219"})}),(0,r.jsx)("div",{className:"card__body",children:(0,r.jsxs)("ol",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"\u5408\u7406\u4F7F\u7528\u6807\u7B7E"}),"\uFF1A\u6807\u7B7E\u7528\u4E8E\u67E5\u8BE2\u548C\u5206\u7EC4\uFF0C\u5B57\u6BB5\u7528\u4E8E\u5B58\u50A8\u5B9E\u9645\u503C"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"\u907F\u514D\u9AD8\u57FA\u6570\u6807\u7B7E"}),"\uFF1A\u9AD8\u57FA\u6570\u6807\u7B7E\u4F1A\u5BFC\u81F4\u6027\u80FD\u95EE\u9898"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"\u65F6\u95F4\u7CBE\u5EA6\u9009\u62E9"}),"\uFF1A\u6839\u636E\u4E1A\u52A1\u9700\u6C42\u9009\u62E9\u5408\u9002\u7684\u65F6\u95F4\u7CBE\u5EA6"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"\u6570\u636E\u538B\u7F29"}),"\uFF1A\u5229\u7528InfluxDB\u7684\u81EA\u52A8\u538B\u7F29\u529F\u80FD"]})]})})]}),"\n",(0,r.jsx)(e.h4,{id:"\u597D\u7684\u6570\u636E\u6A21\u578B\u793A\u4F8B",children:"\u597D\u7684\u6570\u636E\u6A21\u578B\u793A\u4F8B"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",metastring:'title="\u597D\u7684\u6570\u636E\u6A21\u578B\u793A\u4F8B"',children:'public class GoodDataModel {\n    // \u597D\u7684\u6570\u636E\u6A21\u578B\uFF1ACPU\u76D1\u63A7\u6570\u636E\n    public static class CPUMeasurement {\n        // \u6D4B\u91CF\u503C\u540D\u79F0\n        public static final String MEASUREMENT = "cpu_metrics";\n        \n        // \u6807\u7B7E\uFF1A\u7528\u4E8E\u67E5\u8BE2\u548C\u5206\u7EC4\n        public static final Map<String, String> TAGS = Map.of(\n            "host", "server-01",\n            "datacenter", "dc-west",\n            "environment", "production"\n        );\n        \n        // \u5B57\u6BB5\uFF1A\u5B9E\u9645\u6D4B\u91CF\u503C\n        public static final Map<String, Object> FIELDS = Map.of(\n            "cpu_usage", 75.5,\n            "cpu_temperature", 45.2,\n            "cpu_frequency", 2400.0\n        );\n    }\n    \n    // \u907F\u514D\u7684\u9AD8\u57FA\u6570\u6807\u7B7E\u793A\u4F8B\n    public static class BadDataModel {\n        // \u9519\u8BEF\uFF1A\u4F7F\u7528\u9AD8\u57FA\u6570\u6807\u7B7E\n        public static final Map<String, String> HIGH_CARDINALITY_TAGS = Map.of(\n            "user_id", "12345",        // \u9AD8\u57FA\u6570\uFF1A\u7528\u6237ID\n            "session_id", "abc123",    // \u9AD8\u57FA\u6570\uFF1A\u4F1A\u8BDDID\n            "request_id", "req-456"    // \u9AD8\u57FA\u6570\uFF1A\u8BF7\u6C42ID\n        );\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"42-\u6027\u80FD\u4F18\u5316\u7B56\u7565",children:"4.2 \u6027\u80FD\u4F18\u5316\u7B56\u7565"}),"\n",(0,r.jsxs)(a.A,{children:[(0,r.jsx)(s.A,{value:"influxdb-batch",label:"\u6279\u91CF\u5199\u5165",default:!0,children:(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"// \u6279\u91CF\u5199\u5165\u4F18\u5316\npublic class PerformanceOptimization {\n    public void optimizeBatchWriting() {\n        // 1. \u8BBE\u7F6E\u5408\u9002\u7684\u6279\u91CF\u5927\u5C0F\n        int batchSize = 1000;\n        \n        // 2. \u8BBE\u7F6E\u5237\u65B0\u95F4\u9694\n        long flushInterval = 1000; // 1\u79D2\n        \n        // 3. \u4F7F\u7528\u5F02\u6B65\u5199\u5165\n        WriteApi writeApi = client.getWriteApi();\n        writeApi.setWriteOptions(WriteOptions.builder()\n            .batchSize(batchSize)\n            .flushDuration(flushInterval)\n            .build());\n    }\n}\n"})})}),(0,r.jsx)(s.A,{value:"compression",label:"\u6570\u636E\u538B\u7F29",children:(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:'// \u6570\u636E\u538B\u7F29\u4F18\u5316\npublic class CompressionOptimization {\n    public void optimizeCompression() {\n        // 1. \u4F7F\u7528\u5408\u9002\u7684\u6570\u636E\u7C7B\u578B\n        Map<String, Object> fields = new HashMap<>();\n        fields.put("cpu_usage", 75.5);      // \u6D6E\u70B9\u6570\n        fields.put("status", 1);            // \u6574\u6570\u800C\u4E0D\u662F\u5B57\u7B26\u4E32\n        fields.put("is_active", true);      // \u5E03\u5C14\u503C\n        \n        // 2. \u907F\u514D\u5B58\u50A8\u91CD\u590D\u6570\u636E\n        // \u9519\u8BEF\uFF1A\u5B58\u50A8\u91CD\u590D\u7684\u65F6\u95F4\u6233\n        // \u6B63\u786E\uFF1A\u4F7F\u7528\u76F8\u5BF9\u65F6\u95F4\u6216\u65F6\u95F4\u504F\u79FB\n    }\n}\n'})})}),(0,r.jsx)(s.A,{value:"indexing",label:"\u7D22\u5F15\u4F18\u5316",children:(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:'// \u7D22\u5F15\u4F18\u5316\npublic class IndexOptimization {\n    public void optimizeIndexing() {\n        // 1. \u5408\u7406\u4F7F\u7528\u6807\u7B7E\n        Map<String, String> tags = new HashMap<>();\n        tags.put("host", "server-01");      // \u4F4E\u57FA\u6570\u6807\u7B7E\n        tags.put("service", "web");         // \u4F4E\u57FA\u6570\u6807\u7B7E\n        tags.put("version", "v1.0");       // \u4F4E\u57FA\u6570\u6807\u7B7E\n        \n        // 2. \u907F\u514D\u9AD8\u57FA\u6570\u6807\u7B7E\n        // \u9519\u8BEF\uFF1A\u4F7F\u7528\u7528\u6237ID\u4F5C\u4E3A\u6807\u7B7E\n        // tags.put("user_id", "12345");\n        \n        // 3. \u4F7F\u7528\u5B57\u6BB5\u5B58\u50A8\u9AD8\u57FA\u6570\u6570\u636E\n        Map<String, Object> fields = new HashMap<>();\n        fields.put("user_id", "12345");    // \u4F5C\u4E3A\u5B57\u6BB5\u5B58\u50A8\n    }\n}\n'})})})]}),"\n",(0,r.jsx)(e.h2,{id:"5-\u6570\u636E\u91C7\u96C6\u5E94\u7528\u573A\u666F",children:"5. \u6570\u636E\u91C7\u96C6\u5E94\u7528\u573A\u666F"}),"\n",(0,r.jsx)(e.h3,{id:"51-\u7CFB\u7EDF\u76D1\u63A7",children:"5.1 \u7CFB\u7EDF\u76D1\u63A7"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",metastring:'title="\u7CFB\u7EDF\u76D1\u63A7\u6570\u636E\u91C7\u96C6\u793A\u4F8B"',children:'public class SystemMonitoring {\n    public void collectSystemMetrics() {\n        // 1. CPU\u76D1\u63A7\n        collectCPUMetrics();\n        \n        // 2. \u5185\u5B58\u76D1\u63A7\n        collectMemoryMetrics();\n        \n        // 3. \u78C1\u76D8\u76D1\u63A7\n        collectDiskMetrics();\n        \n        // 4. \u7F51\u7EDC\u76D1\u63A7\n        collectNetworkMetrics();\n    }\n    \n    private void collectCPUMetrics() {\n        OperatingSystemMXBean osBean = ManagementFactory.getOperatingSystemMXBean();\n        if (osBean instanceof com.sun.management.OperatingSystemMXBean) {\n            com.sun.management.OperatingSystemMXBean sunOsBean = \n                (com.sun.management.OperatingSystemMXBean) osBean;\n            \n            double cpuLoad = sunOsBean.getCpuLoad();\n            double cpuUsage = cpuLoad * 100;\n            \n            Point cpuPoint = Point.measurement("system_cpu")\n                .addTag("host", getHostname())\n                .addTag("metric", "usage_percent")\n                .addField("value", cpuUsage)\n                .time(System.currentTimeMillis(), WritePrecision.MS);\n            \n            writePoint(cpuPoint);\n        }\n    }\n    \n    private void collectMemoryMetrics() {\n        MemoryMXBean memoryBean = ManagementFactory.getMemoryMXBean();\n        MemoryUsage heapUsage = memoryBean.getHeapMemoryUsage();\n        \n        long usedMemory = heapUsage.getUsed();\n        long maxMemory = heapUsage.getMax();\n        double memoryUsage = (double) usedMemory / maxMemory * 100;\n        \n        Point memoryPoint = Point.measurement("system_memory")\n            .addTag("host", getHostname())\n            .addTag("type", "heap")\n            .addField("used_bytes", usedMemory)\n            .addField("max_bytes", maxMemory)\n            .addField("usage_percent", memoryUsage)\n            .time(System.currentTimeMillis(), WritePrecision.MS);\n        \n        writePoint(memoryPoint);\n    }\n    \n    private String getHostname() {\n        try {\n            return InetAddress.getLocalHost().getHostName();\n        } catch (UnknownHostException e) {\n            return "unknown";\n        }\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"52-iot\u8BBE\u5907\u6570\u636E\u91C7\u96C6",children:"5.2 IoT\u8BBE\u5907\u6570\u636E\u91C7\u96C6"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",metastring:'title="IoT\u8BBE\u5907\u6570\u636E\u91C7\u96C6\u793A\u4F8B"',children:'public class IoTDataCollection {\n    public void collectSensorData() {\n        // 1. \u6E29\u5EA6\u4F20\u611F\u5668\u6570\u636E\n        collectTemperatureData();\n        \n        // 2. \u6E7F\u5EA6\u4F20\u611F\u5668\u6570\u636E\n        collectHumidityData();\n        \n        // 3. \u538B\u529B\u4F20\u611F\u5668\u6570\u636E\n        collectPressureData();\n        \n        // 4. \u4F4D\u7F6E\u6570\u636E\n        collectLocationData();\n    }\n    \n    private void collectTemperatureData() {\n        // \u6A21\u62DF\u6E29\u5EA6\u4F20\u611F\u5668\u6570\u636E\n        double temperature = 20.0 + Math.random() * 10.0;\n        double humidity = 40.0 + Math.random() * 20.0;\n        \n        Point tempPoint = Point.measurement("sensor_data")\n            .addTag("device_id", "temp_sensor_001")\n            .addTag("sensor_type", "temperature")\n            .addTag("location", "room_101")\n            .addField("temperature_c", temperature)\n            .addField("humidity_percent", humidity)\n            .addField("battery_level", 85.0)\n            .time(System.currentTimeMillis(), WritePrecision.MS);\n        \n        writePoint(tempPoint);\n    }\n    \n    private void collectLocationData() {\n        // \u6A21\u62DFGPS\u4F4D\u7F6E\u6570\u636E\n        double latitude = 37.7749 + (Math.random() - 0.5) * 0.01;\n        double longitude = -122.4194 + (Math.random() - 0.5) * 0.01;\n        double altitude = 100.0 + Math.random() * 50.0;\n        \n        Point locationPoint = Point.measurement("gps_data")\n            .addTag("device_id", "gps_tracker_001")\n            .addTag("vehicle_type", "delivery_truck")\n            .addField("latitude", latitude)\n            .addField("longitude", longitude)\n            .addField("altitude_m", altitude)\n            .addField("speed_kmh", 35.0 + Math.random() * 20.0)\n            .time(System.currentTimeMillis(), WritePrecision.MS);\n        \n        writePoint(locationPoint);\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"6-\u6570\u636E\u67E5\u8BE2\u548C\u5206\u6790",children:"6. \u6570\u636E\u67E5\u8BE2\u548C\u5206\u6790"}),"\n",(0,r.jsx)(e.h3,{id:"61-\u57FA\u672C\u67E5\u8BE2",children:"6.1 \u57FA\u672C\u67E5\u8BE2"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",metastring:'title="\u57FA\u672C\u67E5\u8BE2\u793A\u4F8B"',children:'public class InfluxDBQueries {\n    private final InfluxDBClient client;\n    private final QueryApi queryApi;\n    \n    public InfluxDBQueries(String url, String token, String org) {\n        this.client = InfluxDBClientFactory.create(url, token.toCharArray(), org);\n        this.queryApi = client.getQueryApi();\n    }\n    \n    // \u67E5\u8BE2\u6700\u8FD11\u5C0F\u65F6\u7684CPU\u4F7F\u7528\u7387\n    public List<FluxTable> queryRecentCPUUsage() {\n        String flux = """\n            from(bucket: "system_metrics")\n                |> range(start: -1h)\n                |> filter(fn: (r) => r._measurement == "system_cpu")\n                |> filter(fn: (r) => r._field == "value")\n                |> aggregateWindow(every: 1m, fn: mean)\n                |> yield(name: "mean")\n            """;\n        \n        return queryApi.query(flux);\n    }\n    \n    // \u67E5\u8BE2\u7279\u5B9A\u4E3B\u673A\u7684\u5185\u5B58\u4F7F\u7528\u60C5\u51B5\n    public List<FluxTable> queryHostMemoryUsage(String hostname, Duration duration) {\n        String flux = String.format("""\n            from(bucket: "system_metrics")\n                |> range(start: -%ds)\n                |> filter(fn: (r) => r._measurement == "system_memory")\n                |> filter(fn: (r) => r.host == "%s")\n                |> filter(fn: (r) => r._field == "usage_percent")\n                |> aggregateWindow(every: 5m, fn: mean)\n                |> yield(name: "mean")\n            """, duration.getSeconds(), hostname);\n        \n        return queryApi.query(flux);\n    }\n    \n    // \u805A\u5408\u67E5\u8BE2\uFF1A\u8BA1\u7B97\u6BCF\u5C0F\u65F6\u7684\u5E73\u5747\u503C\n    public List<FluxTable> queryHourlyAggregation() {\n        String flux = """\n            from(bucket: "system_metrics")\n                |> range(start: -24h)\n                |> filter(fn: (r) => r._measurement == "system_cpu")\n                |> filter(fn: (r) => r._field == "value")\n                |> aggregateWindow(every: 1h, fn: mean)\n                |> yield(name: "hourly_mean")\n            """;\n        \n        return queryApi.query(flux);\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"62-\u9AD8\u7EA7\u67E5\u8BE2\u548C\u5206\u6790",children:"6.2 \u9AD8\u7EA7\u67E5\u8BE2\u548C\u5206\u6790"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",metastring:'title="\u9AD8\u7EA7\u67E5\u8BE2\u793A\u4F8B"',children:'public class AdvancedQueries {\n    private final QueryApi queryApi;\n    \n    public AdvancedQueries(QueryApi queryApi) {\n        this.queryApi = queryApi;\n    }\n    \n    // \u5F02\u5E38\u68C0\u6D4B\uFF1A\u68C0\u6D4BCPU\u4F7F\u7528\u7387\u5F02\u5E38\n    public List<FluxTable> detectCPUAnomalies() {\n        String flux = """\n            from(bucket: "system_metrics")\n                |> range(start: -1h)\n                |> filter(fn: (r) => r._measurement == "system_cpu")\n                |> filter(fn: (r) => r._field == "value")\n                |> aggregateWindow(every: 1m, fn: mean)\n                |> map(fn: (r) => ({\n                    _value: r._value,\n                    anomaly: if r._value > 90.0 then "high" else "normal"\n                }))\n                |> filter(fn: (r) => r.anomaly == "high")\n            """;\n        \n        return queryApi.query(flux);\n    }\n    \n    // \u8D8B\u52BF\u5206\u6790\uFF1A\u8BA1\u7B97CPU\u4F7F\u7528\u7387\u8D8B\u52BF\n    public List<FluxTable> analyzeCPUTrend() {\n        String flux = """\n            from(bucket: "system_metrics")\n                |> range(start: -7d)\n                |> filter(fn: (r) => r._measurement == "system_cpu")\n                |> filter(fn: (r) => r._field == "value")\n                |> aggregateWindow(every: 1h, fn: mean)\n                |> linearRegression(predict: 24h)\n            """;\n        \n        return queryApi.query(flux);\n    }\n    \n    // \u591A\u7EF4\u5EA6\u5206\u6790\uFF1A\u6309\u4E3B\u673A\u548C\u670D\u52A1\u5206\u7EC4\n    public List<FluxTable> multiDimensionalAnalysis() {\n        String flux = """\n            from(bucket: "system_metrics")\n                |> range(start: -1h)\n                |> filter(fn: (r) => r._measurement == "system_cpu")\n                |> filter(fn: (r) => r._field == "value")\n                |> group(columns: ["host", "service"])\n                |> aggregateWindow(every: 5m, fn: mean)\n                |> pivot(rowKey:["_time"], columnKey: ["_field"], valueColumn: "_value")\n            """;\n        \n        return queryApi.query(flux);\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"7-\u76D1\u63A7\u548C\u544A\u8B66",children:"7. \u76D1\u63A7\u548C\u544A\u8B66"}),"\n",(0,r.jsx)(e.h3,{id:"71-\u6570\u636E\u8D28\u91CF\u76D1\u63A7",children:"7.1 \u6570\u636E\u8D28\u91CF\u76D1\u63A7"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",metastring:'title="\u6570\u636E\u8D28\u91CF\u76D1\u63A7\u793A\u4F8B"',children:'public class DataQualityMonitoring {\n    private final InfluxDBClient client;\n    private final WriteApi writeApi;\n    \n    public DataQualityMonitoring(String url, String token, String org, String bucket) {\n        this.client = InfluxDBClientFactory.create(url, token.toCharArray(), org, bucket);\n        this.writeApi = client.getWriteApi();\n    }\n    \n    // \u76D1\u63A7\u6570\u636E\u91C7\u96C6\u5EF6\u8FDF\n    public void monitorDataLatency(String measurement, long expectedInterval) {\n        long currentTime = System.currentTimeMillis();\n        long lastDataTime = getLastDataTime(measurement);\n        long latency = currentTime - lastDataTime;\n        \n        // \u5982\u679C\u5EF6\u8FDF\u8D85\u8FC7\u9884\u671F\uFF0C\u8BB0\u5F55\u544A\u8B66\n        if (latency > expectedInterval * 2) {\n            Point alertPoint = Point.measurement("data_quality_alerts")\n                .addTag("alert_type", "data_latency")\n                .addTag("measurement", measurement)\n                .addTag("severity", "warning")\n                .addField("expected_interval_ms", expectedInterval)\n                .addField("actual_latency_ms", latency)\n                .addField("message", "Data collection delayed")\n                .time(currentTime, WritePrecision.MS);\n            \n            writeApi.writePoint(alertPoint);\n        }\n    }\n    \n    // \u76D1\u63A7\u6570\u636E\u5B8C\u6574\u6027\n    public void monitorDataCompleteness(String measurement, int expectedCount, Duration window) {\n        int actualCount = getDataCount(measurement, window);\n        double completeness = (double) actualCount / expectedCount * 100;\n        \n        if (completeness < 90.0) {\n            Point alertPoint = Point.measurement("data_quality_alerts")\n                .addTag("alert_type", "data_completeness")\n                .addTag("measurement", measurement)\n                .addTag("severity", "error")\n                .addField("expected_count", expectedCount)\n                .addField("actual_count", actualCount)\n                .addField("completeness_percent", completeness)\n                .addField("message", "Data completeness below threshold")\n                .time(System.currentTimeMillis(), WritePrecision.MS);\n            \n            writeApi.writePoint(alertPoint);\n        }\n    }\n    \n    private long getLastDataTime(String measurement) {\n        // \u5B9E\u73B0\u83B7\u53D6\u6700\u540E\u6570\u636E\u65F6\u95F4\u7684\u903B\u8F91\n        return System.currentTimeMillis() - 60000; // \u6A21\u62DF\u6570\u636E\n    }\n    \n    private int getDataCount(String measurement, Duration window) {\n        // \u5B9E\u73B0\u83B7\u53D6\u6570\u636E\u8BA1\u6570\u7684\u903B\u8F91\n        return 85; // \u6A21\u62DF\u6570\u636E\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"72-\u544A\u8B66\u89C4\u5219\u914D\u7F6E",children:"7.2 \u544A\u8B66\u89C4\u5219\u914D\u7F6E"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",metastring:'title="\u544A\u8B66\u89C4\u5219\u914D\u7F6E\u793A\u4F8B"',children:'# InfluxDB\u544A\u8B66\u89C4\u5219\u914D\u7F6E\nalerts:\n  - name: "High CPU Usage"\n    query: |\n      from(bucket: "system_metrics")\n        |> range(start: -5m)\n        |> filter(fn: (r) => r._measurement == "system_cpu")\n        |> filter(fn: (r) => r._field == "value")\n        |> aggregateWindow(every: 1m, fn: mean)\n        |> filter(fn: (r) => r._value > 90.0)\n    condition: "count() > 0"\n    message: "CPU usage is above 90% for the last 5 minutes"\n    severity: "warning"\n    \n  - name: "Data Collection Failure"\n    query: |\n      from(bucket: "system_metrics")\n        |> range(start: -10m)\n        |> filter(fn: (r) => r._measurement == "data_quality_alerts")\n        |> filter(fn: (r) => r.alert_type == "data_latency")\n        |> filter(fn: (r) => r.severity == "error")\n    condition: "count() > 0"\n    message: "Data collection has failed or is severely delayed"\n    severity: "critical"\n'})}),"\n",(0,r.jsx)(e.h2,{id:"8-\u6027\u80FD\u4F18\u5316\u548C\u8C03\u4F18",children:"8. \u6027\u80FD\u4F18\u5316\u548C\u8C03\u4F18"}),"\n",(0,r.jsx)(e.h3,{id:"81-\u5199\u5165\u6027\u80FD\u4F18\u5316",children:"8.1 \u5199\u5165\u6027\u80FD\u4F18\u5316"}),"\n",(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("div",{className:"card__body",children:[(0,r.jsx)("h5",{children:"\u5199\u5165\u6027\u80FD\u4F18\u5316\u7B56\u7565"}),(0,r.jsxs)("ol",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"\u6279\u91CF\u5199\u5165"}),"\uFF1A\u4F7F\u7528\u5408\u9002\u7684\u6279\u91CF\u5927\u5C0F\uFF0C\u901A\u5E381000-5000\u4E2A\u70B9"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"\u5F02\u6B65\u5199\u5165"}),"\uFF1A\u4F7F\u7528\u5F02\u6B65\u5199\u5165API\uFF0C\u907F\u514D\u963B\u585E"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"\u8FDE\u63A5\u6C60"}),"\uFF1A\u590D\u7528HTTP\u8FDE\u63A5\uFF0C\u51CF\u5C11\u8FDE\u63A5\u5EFA\u7ACB\u5F00\u9500"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"\u6570\u636E\u538B\u7F29"}),"\uFF1A\u542F\u7528gzip\u538B\u7F29\uFF0C\u51CF\u5C11\u7F51\u7EDC\u4F20\u8F93"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"\u5E76\u884C\u5199\u5165"}),"\uFF1A\u4F7F\u7528\u591A\u4E2A\u7EBF\u7A0B\u5E76\u884C\u5199\u5165\u6570\u636E"]})]})]})}),"\n",(0,r.jsx)(e.h3,{id:"82-\u67E5\u8BE2\u6027\u80FD\u4F18\u5316",children:"8.2 \u67E5\u8BE2\u6027\u80FD\u4F18\u5316"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",metastring:'title="\u67E5\u8BE2\u6027\u80FD\u4F18\u5316\u793A\u4F8B"',children:'public class QueryPerformanceOptimization {\n    private final QueryApi queryApi;\n    \n    public QueryPerformanceOptimization(QueryApi queryApi) {\n        this.queryApi = queryApi;\n    }\n    \n    // \u4F18\u5316\u67E5\u8BE2\uFF1A\u4F7F\u7528\u65F6\u95F4\u8303\u56F4\u9650\u5236\n    public List<FluxTable> optimizedTimeRangeQuery() {\n        String flux = """\n            from(bucket: "system_metrics")\n                |> range(start: -1h)  // \u9650\u5236\u65F6\u95F4\u8303\u56F4\n                |> filter(fn: (r) => r._measurement == "system_cpu")\n                |> filter(fn: (r) => r.host == "server-01")  // \u5148\u8FC7\u6EE4\u6807\u7B7E\n                |> filter(fn: (r) => r._field == "value")\n                |> aggregateWindow(every: 5m, fn: mean)  // \u805A\u5408\u51CF\u5C11\u6570\u636E\u91CF\n                |> yield(name: "optimized_result")\n            """;\n        \n        return queryApi.query(flux);\n    }\n    \n    // \u4F7F\u7528\u7D22\u5F15\u4F18\u5316\u67E5\u8BE2\n    public List<FluxTable> indexedQuery() {\n        String flux = """\n            from(bucket: "system_metrics")\n                |> range(start: -1h)\n                |> filter(fn: (r) => r._measurement == "system_cpu")\n                |> filter(fn: (r) => r.host == "server-01")  // \u4F7F\u7528\u7D22\u5F15\u6807\u7B7E\n                |> filter(fn: (r) => r.service == "web")     // \u4F7F\u7528\u7D22\u5F15\u6807\u7B7E\n                |> filter(fn: (r) => r._field == "value")\n                |> yield(name: "indexed_result")\n            """;\n        \n        return queryApi.query(flux);\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"9-\u96C6\u7FA4\u90E8\u7F72\u548C\u9AD8\u53EF\u7528",children:"9. \u96C6\u7FA4\u90E8\u7F72\u548C\u9AD8\u53EF\u7528"}),"\n",(0,r.jsx)(e.h3,{id:"91-\u96C6\u7FA4\u67B6\u6784",children:"9.1 \u96C6\u7FA4\u67B6\u6784"}),"\n",(0,r.jsx)(e.mermaid,{value:"graph TB\n    A[\u8D1F\u8F7D\u5747\u8861\u5668] --\x3e B[InfluxDB\u8282\u70B91]\n    A --\x3e C[InfluxDB\u8282\u70B92]\n    A --\x3e D[InfluxDB\u8282\u70B93]\n    \n    B --\x3e E[\u5143\u6570\u636E\u5B58\u50A8]\n    C --\x3e E\n    D --\x3e E\n    \n    B --\x3e F[\u6570\u636E\u5B58\u50A8]\n    C --\x3e F\n    D --\x3e F\n    \n    G[\u76D1\u63A7\u7CFB\u7EDF] --\x3e H[Prometheus]\n    G --\x3e I[Grafana]"}),"\n",(0,r.jsx)(e.h3,{id:"92-\u9AD8\u53EF\u7528\u914D\u7F6E",children:"9.2 \u9AD8\u53EF\u7528\u914D\u7F6E"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",metastring:'title="\u9AD8\u53EF\u7528\u914D\u7F6E\u793A\u4F8B"',children:'# InfluxDB\u96C6\u7FA4\u914D\u7F6E\nmeta:\n  dir: "/var/lib/influxdb2/meta"\n  bind-address: ":8089"\n  http-bind-address: ":8091"\n  auth-enabled: true\n  auth-secret: "your-auth-secret"\n  \ndata:\n  dir: "/var/lib/influxdb2/data"\n  wal-dir: "/var/lib/influxdb2/wal"\n  series-id-set-cache-size: 100\n  series-file-max-concurrent-snapshot-compactions: 4\n  \nhttp:\n  bind-address: ":8086"\n  auth-enabled: true\n  log-enabled: true\n  \n# \u96C6\u7FA4\u914D\u7F6E\ncluster:\n  enabled: true\n  meta-nodes: ["node1:8089", "node2:8089", "node3:8089"]\n  data-nodes: ["node1:8086", "node2:8086", "node3:8086"]\n'})}),"\n",(0,r.jsx)(e.h2,{id:"10-\u603B\u7ED3",children:"10. \u603B\u7ED3"}),"\n",(0,r.jsx)(e.p,{children:"InfluxDB\u4F5C\u4E3A\u4E13\u4E1A\u7684\u65F6\u5E8F\u6570\u636E\u5E93\uFF0C\u4E3A\u6570\u636E\u91C7\u96C6\u7CFB\u7EDF\u63D0\u4F9B\u4E86\u5F3A\u5927\u7684\u652F\u6301\u3002\u901A\u8FC7\u5408\u7406\u7684\u8BBE\u8BA1\u548C\u4F18\u5316\uFF0C\u53EF\u4EE5\u6784\u5EFA\u9AD8\u6027\u80FD\u3001\u9AD8\u53EF\u9760\u7684\u6570\u636E\u91C7\u96C6\u7CFB\u7EDF\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"\u5173\u952E\u8981\u70B9",children:"\u5173\u952E\u8981\u70B9"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u6570\u636E\u6A21\u578B\u8BBE\u8BA1"}),"\uFF1A\u5408\u7406\u4F7F\u7528\u6807\u7B7E\u548C\u5B57\u6BB5\uFF0C\u907F\u514D\u9AD8\u57FA\u6570\u95EE\u9898"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u6027\u80FD\u4F18\u5316"}),"\uFF1A\u6279\u91CF\u5199\u5165\u3001\u5F02\u6B65\u5904\u7406\u3001\u67E5\u8BE2\u4F18\u5316"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u76D1\u63A7\u544A\u8B66"}),"\uFF1A\u5EFA\u7ACB\u5B8C\u5584\u7684\u6570\u636E\u8D28\u91CF\u76D1\u63A7\u4F53\u7CFB"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u9AD8\u53EF\u7528\u90E8\u7F72"}),"\uFF1A\u96C6\u7FA4\u90E8\u7F72\u3001\u8D1F\u8F7D\u5747\u8861\u3001\u6545\u969C\u6062\u590D"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"\u5B66\u4E60\u5EFA\u8BAE",children:"\u5B66\u4E60\u5EFA\u8BAE"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u638C\u63E1\u57FA\u7840\u6982\u5FF5"}),"\uFF1A\u7406\u89E3\u65F6\u5E8F\u6570\u636E\u5E93\u7684\u7279\u70B9\u548C\u6570\u636E\u6A21\u578B"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u5B9E\u8DF5\u6570\u636E\u91C7\u96C6"}),"\uFF1A\u4ECE\u7B80\u5355\u7684\u7CFB\u7EDF\u76D1\u63A7\u5F00\u59CB\uFF0C\u9010\u6B65\u6269\u5C55\u5230\u590D\u6742\u573A\u666F"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u6027\u80FD\u8C03\u4F18"}),"\uFF1A\u5B66\u4E60\u67E5\u8BE2\u4F18\u5316\u548C\u5199\u5165\u4F18\u5316\u6280\u5DE7"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u8FD0\u7EF4\u7BA1\u7406"}),"\uFF1A\u638C\u63E1\u96C6\u7FA4\u90E8\u7F72\u548C\u76D1\u63A7\u544A\u8B66\u914D\u7F6E"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"InfluxDB\u6570\u636E\u91C7\u96C6\u6280\u672F\u662F\u73B0\u4EE3\u6570\u636E\u67B6\u6784\u7684\u91CD\u8981\u7EC4\u6210\u90E8\u5206\uFF0C\u638C\u63E1\u5B83\u5C06\u4E3A\u6784\u5EFA\u5B9E\u65F6\u6570\u636E\u5904\u7406\u7CFB\u7EDF\u5960\u5B9A\u575A\u5B9E\u57FA\u7840\u3002"})]})}function h(n={}){let{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(m,{...n})}):m(n)}}}]);