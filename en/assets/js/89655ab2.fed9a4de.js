"use strict";(self.webpackChunkfullstack_dev_blog=self.webpackChunkfullstack_dev_blog||[]).push([["7944"],{43867:function(e,n,i){i.r(n),i.d(n,{metadata:()=>r,default:()=>u,frontMatter:()=>d,contentTitle:()=>o,toc:()=>x,assets:()=>h});var r=JSON.parse('{"id":"backend/spring/aop","title":"Spring AOP\u8BE6\u89E3","description":"\u6DF1\u5165\u7406\u89E3Spring\u9762\u5411\u5207\u9762\u7F16\u7A0B\u539F\u7406\u4E0E\u5B9E\u8DF5","source":"@site/docs/backend/spring/aop.mdx","sourceDirName":"backend/spring","slug":"/backend/spring/aop","permalink":"/en/docs/backend/spring/aop","draft":false,"unlisted":false,"editUrl":"https://github.com/MasterLiu93/blog-web/tree/main/docs/backend/spring/aop.mdx","tags":[],"version":"current","lastUpdatedBy":"Laby","lastUpdatedAt":1754524800000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Spring AOP\u8BE6\u89E3","description":"\u6DF1\u5165\u7406\u89E3Spring\u9762\u5411\u5207\u9762\u7F16\u7A0B\u539F\u7406\u4E0E\u5B9E\u8DF5","authors":["Laby"],"last_update":{"date":"2025-08-07T00:00:00.000Z","author":"Laby"}},"sidebar":"tutorialSidebar","previous":{"title":"Spring IOC\u8BE6\u89E3","permalink":"/en/docs/backend/spring/ioc"},"next":{"title":"Spring MVC\u8BE6\u89E3","permalink":"/en/docs/backend/spring/spring-mvc"}}'),s=i(74848),t=i(28453),l=i(78010),c=i(57250),a=i(19007);let d={sidebar_position:2,title:"Spring AOP\u8BE6\u89E3",description:"\u6DF1\u5165\u7406\u89E3Spring\u9762\u5411\u5207\u9762\u7F16\u7A0B\u539F\u7406\u4E0E\u5B9E\u8DF5",authors:["Laby"],last_update:{date:new Date("2025-08-07T00:00:00.000Z"),author:"Laby"}},o="Spring AOP \u8BE6\u89E3",h={},x=[{value:"1. AOP\u57FA\u7840\u6982\u5FF5",id:"1-aop\u57FA\u7840\u6982\u5FF5",level:2},{value:"1.1 \u4EC0\u4E48\u662FAOP\uFF1F",id:"11-\u4EC0\u4E48\u662Faop",level:3},{value:"\u4F20\u7EDF\u7F16\u7A0B vs AOP\u7F16\u7A0B",id:"\u4F20\u7EDF\u7F16\u7A0B-vs-aop\u7F16\u7A0B",level:4},{value:"1.2 AOP\u6838\u5FC3\u6982\u5FF5",id:"12-aop\u6838\u5FC3\u6982\u5FF5",level:3},{value:"2. AOP\u5B9E\u73B0\u539F\u7406",id:"2-aop\u5B9E\u73B0\u539F\u7406",level:2},{value:"2.1 \u52A8\u6001\u4EE3\u7406\u673A\u5236",id:"21-\u52A8\u6001\u4EE3\u7406\u673A\u5236",level:3},{value:"2.2 \u4EE3\u7406\u9009\u62E9\u673A\u5236",id:"22-\u4EE3\u7406\u9009\u62E9\u673A\u5236",level:3},{value:"3. \u5207\u70B9\u8868\u8FBE\u5F0F",id:"3-\u5207\u70B9\u8868\u8FBE\u5F0F",level:2},{value:"3.1 \u5207\u70B9\u8868\u8FBE\u5F0F\u8BED\u6CD5",id:"31-\u5207\u70B9\u8868\u8FBE\u5F0F\u8BED\u6CD5",level:3},{value:"3.2 \u5E38\u7528\u5207\u70B9\u8868\u8FBE\u5F0F",id:"32-\u5E38\u7528\u5207\u70B9\u8868\u8FBE\u5F0F",level:3},{value:"4. \u901A\u77E5\u7C7B\u578B",id:"4-\u901A\u77E5\u7C7B\u578B",level:2},{value:"4.1 \u901A\u77E5\u7C7B\u578B\u5BF9\u6BD4",id:"41-\u901A\u77E5\u7C7B\u578B\u5BF9\u6BD4",level:3},{value:"5. \u5B9E\u9645\u5E94\u7528\u573A\u666F",id:"5-\u5B9E\u9645\u5E94\u7528\u573A\u666F",level:2},{value:"5.1 \u65E5\u5FD7\u5207\u9762",id:"51-\u65E5\u5FD7\u5207\u9762",level:3},{value:"5.2 \u7F13\u5B58\u5207\u9762",id:"52-\u7F13\u5B58\u5207\u9762",level:3},{value:"5.3 \u4E8B\u52A1\u5207\u9762",id:"53-\u4E8B\u52A1\u5207\u9762",level:3},{value:"5.4 \u6743\u9650\u5207\u9762",id:"54-\u6743\u9650\u5207\u9762",level:3},{value:"6. \u6027\u80FD\u76D1\u63A7\u5207\u9762",id:"6-\u6027\u80FD\u76D1\u63A7\u5207\u9762",level:2},{value:"6.1 \u65B9\u6CD5\u6267\u884C\u65F6\u95F4\u76D1\u63A7",id:"61-\u65B9\u6CD5\u6267\u884C\u65F6\u95F4\u76D1\u63A7",level:3},{value:"7. \u9762\u8BD5\u9898\u7CBE\u9009",id:"7-\u9762\u8BD5\u9898\u7CBE\u9009",level:2},{value:"7.1 \u57FA\u7840\u6982\u5FF5\u9898",id:"71-\u57FA\u7840\u6982\u5FF5\u9898",level:3},{value:"7.2 \u5B9E\u8DF5\u9898",id:"72-\u5B9E\u8DF5\u9898",level:3},{value:"7.3 \u9AD8\u7EA7\u9898",id:"73-\u9AD8\u7EA7\u9898",level:3},{value:"8. \u5B9E\u7528\u793A\u4F8B",id:"8-\u5B9E\u7528\u793A\u4F8B",level:2},{value:"8.1 \u6027\u80FD\u65E5\u5FD7\u8BB0\u5F55\u5668",id:"81-\u6027\u80FD\u65E5\u5FD7\u8BB0\u5F55\u5668",level:3}];function j(e){let n={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components},{Details:i}=n;return i||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"spring-aop-\u8BE6\u89E3",children:"Spring AOP \u8BE6\u89E3"})}),"\n",(0,s.jsx)(n.p,{children:"AOP\uFF08Aspect-Oriented Programming\uFF0C\u9762\u5411\u5207\u9762\u7F16\u7A0B\uFF09\u662FSpring\u6846\u67B6\u7684\u91CD\u8981\u7279\u6027\uFF0C\u5B83\u5141\u8BB8\u5F00\u53D1\u8005\u5C06\u6A2A\u5207\u5173\u6CE8\u70B9\uFF08\u5982\u65E5\u5FD7\u3001\u4E8B\u52A1\u3001\u5B89\u5168\u7B49\uFF09\u4ECE\u4E1A\u52A1\u903B\u8F91\u4E2D\u5206\u79BB\u51FA\u6765\uFF0C\u5B9E\u73B0\u5173\u6CE8\u70B9\u7684\u6A21\u5757\u5316\u3002"}),"\n",(0,s.jsx)(n.admonition,{title:"\u672C\u6587\u5185\u5BB9\u6982\u89C8",type:"info",children:(0,s.jsx)(a.A,{toc:x})}),"\n",(0,s.jsxs)(n.admonition,{title:"\u6838\u5FC3\u4EF7\u503C",type:"tip",children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Spring AOP = \u5173\u6CE8\u70B9\u5206\u79BB + \u4EE3\u7801\u590D\u7528 + \u6A21\u5757\u5316\u8BBE\u8BA1 + \u52A8\u6001\u4EE3\u7406"})}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u{1F50D} ",(0,s.jsx)(n.strong,{children:"\u5173\u6CE8\u70B9\u5206\u79BB"}),"\uFF1A\u5C06\u6A2A\u5207\u5173\u6CE8\u70B9\u4E0E\u4E1A\u52A1\u903B\u8F91\u89E3\u8026"]}),"\n",(0,s.jsxs)(n.li,{children:["\u{1F504} ",(0,s.jsx)(n.strong,{children:"\u4EE3\u7801\u590D\u7528"}),"\uFF1A\u6D88\u9664\u91CD\u590D\u4EE3\u7801\uFF0C\u63D0\u9AD8\u53EF\u7EF4\u62A4\u6027"]}),"\n",(0,s.jsxs)(n.li,{children:["\u{1F4E6} ",(0,s.jsx)(n.strong,{children:"\u6A21\u5757\u5316\u8BBE\u8BA1"}),"\uFF1A\u72EC\u7ACB\u7BA1\u7406\u901A\u7528\u529F\u80FD\uFF0C\u6613\u4E8E\u6269\u5C55"]}),"\n",(0,s.jsxs)(n.li,{children:["\u{1F527} ",(0,s.jsx)(n.strong,{children:"\u52A8\u6001\u4EE3\u7406"}),"\uFF1A\u8FD0\u884C\u65F6\u52A8\u6001\u589E\u5F3A\uFF0C\u65E0\u4FB5\u5165\u6027"]}),"\n"]})]}),"\n",(0,s.jsx)(n.h2,{id:"1-aop\u57FA\u7840\u6982\u5FF5",children:"1. AOP\u57FA\u7840\u6982\u5FF5"}),"\n",(0,s.jsx)(n.h3,{id:"11-\u4EC0\u4E48\u662Faop",children:"1.1 \u4EC0\u4E48\u662FAOP\uFF1F"}),"\n",(0,s.jsx)(n.p,{children:"AOP\u662F\u4E00\u79CD\u7F16\u7A0B\u8303\u5F0F\uFF0C\u5B83\u901A\u8FC7\u9884\u7F16\u8BD1\u65B9\u5F0F\u548C\u8FD0\u884C\u671F\u52A8\u6001\u4EE3\u7406\u5B9E\u73B0\u7A0B\u5E8F\u529F\u80FD\u7684\u7EDF\u4E00\u7EF4\u62A4\u3002AOP\u7684\u6838\u5FC3\u601D\u60F3\u662F\u5C06\u6A2A\u5207\u5173\u6CE8\u70B9\u4ECE\u4E3B\u4E1A\u52A1\u903B\u8F91\u4E2D\u5206\u79BB\u51FA\u6765\u3002"}),"\n",(0,s.jsx)(n.mermaid,{value:"flowchart LR\n    A[\u4F20\u7EDF\u7F16\u7A0B] --\x3e B{\u4E1A\u52A1\u65B9\u6CD5}\n    B --\x3e C[\u65E5\u5FD7\u8BB0\u5F55]\n    B --\x3e D[\u4E8B\u52A1\u7BA1\u7406]\n    B --\x3e E[\u5B89\u5168\u68C0\u67E5]\n    B --\x3e F[\u4E1A\u52A1\u903B\u8F91]\n    \n    G[AOP\u7F16\u7A0B] --\x3e H{\u4EE3\u7406\u5BF9\u8C61}\n    H --\x3e I[\u4E1A\u52A1\u65B9\u6CD5]\n    I --\x3e J[\u7EAF\u4E1A\u52A1\u903B\u8F91]\n    H -.-> K[\u5207\u9762]\n    K -.-> L[\u65E5\u5FD7\u5207\u9762]\n    K -.-> M[\u4E8B\u52A1\u5207\u9762]\n    K -.-> N[\u5B89\u5168\u5207\u9762]\n    \n    style A fill:#ffcccc\n    style G fill:#ccffcc\n    style K fill:#ccccff"}),"\n",(0,s.jsx)(n.h4,{id:"\u4F20\u7EDF\u7F16\u7A0B-vs-aop\u7F16\u7A0B",children:"\u4F20\u7EDF\u7F16\u7A0B vs AOP\u7F16\u7A0B"}),"\n",(0,s.jsxs)(l.A,{children:[(0,s.jsxs)(c.A,{value:"traditional",label:"\u4F20\u7EDF\u7F16\u7A0B\u65B9\u5F0F",default:!0,children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="\u4F20\u7EDF\u7F16\u7A0B\u65B9\u5F0F"',children:'// \u4F20\u7EDF\u65B9\u5F0F - \u4E1A\u52A1\u903B\u8F91\u548C\u6A2A\u5207\u5173\u6CE8\u70B9\u6DF7\u5408\npublic class UserService {\n    public void createUser(User user) {\n        // \u65E5\u5FD7\u8BB0\u5F55\n        System.out.println("\u5F00\u59CB\u521B\u5EFA\u7528\u6237: " + user.getName());\n        \n        // \u4E1A\u52A1\u903B\u8F91\n        userRepository.save(user);\n        \n        // \u65E5\u5FD7\u8BB0\u5F55\n        System.out.println("\u7528\u6237\u521B\u5EFA\u5B8C\u6210: " + user.getName());\n    }\n    \n    public void updateUser(User user) {\n        // \u65E5\u5FD7\u8BB0\u5F55\n        System.out.println("\u5F00\u59CB\u66F4\u65B0\u7528\u6237: " + user.getName());\n        \n        // \u4E1A\u52A1\u903B\u8F91\n        userRepository.update(user);\n        \n        // \u65E5\u5FD7\u8BB0\u5F55\n        System.out.println("\u7528\u6237\u66F4\u65B0\u5B8C\u6210: " + user.getName());\n    }\n}\n'})}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card__header",children:(0,s.jsx)("h4",{children:"\u4F20\u7EDF\u65B9\u5F0F\u7684\u7F3A\u70B9"})}),(0,s.jsx)("div",{className:"card__body",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"\u6A2A\u5207\u5173\u6CE8\u70B9\u4EE3\u7801\u4E0E\u4E1A\u52A1\u903B\u8F91\u6DF7\u5408"}),(0,s.jsx)("li",{children:"\u4EE3\u7801\u91CD\u590D\uFF0C\u96BE\u4EE5\u7EF4\u62A4"}),(0,s.jsx)("li",{children:"\u804C\u8D23\u4E0D\u660E\u786E\uFF0C\u8FDD\u53CD\u5355\u4E00\u804C\u8D23\u539F\u5219"}),(0,s.jsx)("li",{children:"\u4FEE\u6539\u6A2A\u5207\u903B\u8F91\u9700\u8981\u4FEE\u6539\u591A\u5904\u4EE3\u7801"})]})})]})]}),(0,s.jsxs)(c.A,{value:"aop",label:"AOP\u7F16\u7A0B\u65B9\u5F0F",children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="AOP\u7F16\u7A0B\u65B9\u5F0F"',children:'// AOP\u65B9\u5F0F - \u5206\u79BB\u5173\u6CE8\u70B9\n@Service\npublic class UserService {\n    public void createUser(User user) {\n        // \u7EAF\u4E1A\u52A1\u903B\u8F91\n        userRepository.save(user);\n    }\n    \n    public void updateUser(User user) {\n        // \u7EAF\u4E1A\u52A1\u903B\u8F91\n        userRepository.update(user);\n    }\n}\n\n@Aspect\n@Component\npublic class LoggingAspect {\n    @Around("execution(* com.example.service.*.*(..))")\n    public Object logAround(ProceedingJoinPoint joinPoint) throws Throwable {\n        System.out.println("\u5F00\u59CB\u6267\u884C: " + joinPoint.getSignature().getName());\n        Object result = joinPoint.proceed();\n        System.out.println("\u6267\u884C\u5B8C\u6210: " + joinPoint.getSignature().getName());\n        return result;\n    }\n}\n'})}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card__header",children:(0,s.jsx)("h4",{children:"AOP\u65B9\u5F0F\u7684\u4F18\u70B9"})}),(0,s.jsx)("div",{className:"card__body",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"\u5173\u6CE8\u70B9\u5206\u79BB\uFF0C\u4E1A\u52A1\u903B\u8F91\u66F4\u7EAF\u7CB9"}),(0,s.jsx)("li",{children:"\u907F\u514D\u4EE3\u7801\u91CD\u590D\uFF0C\u63D0\u9AD8\u53EF\u7EF4\u62A4\u6027"}),(0,s.jsx)("li",{children:"\u96C6\u4E2D\u7BA1\u7406\u6A2A\u5207\u5173\u6CE8\u70B9"}),(0,s.jsx)("li",{children:"\u975E\u4FB5\u5165\u5F0F\uFF0C\u4E0D\u4FEE\u6539\u539F\u6709\u4E1A\u52A1\u4EE3\u7801"})]})})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"12-aop\u6838\u5FC3\u6982\u5FF5",children:"1.2 AOP\u6838\u5FC3\u6982\u5FF5"}),"\n",(0,s.jsx)(n.mermaid,{value:"classDiagram\n    class Aspect {\n        <<\u5207\u9762>>\n        +\u5207\u70B9\u8868\u8FBE\u5F0F\n        +\u901A\u77E5\u65B9\u6CD5\n    }\n    class Pointcut {\n        <<\u5207\u70B9>>\n        +\u8868\u8FBE\u5F0F\n    }\n    class Advice {\n        <<\u901A\u77E5>>\n        +\u524D\u7F6E\u901A\u77E5\n        +\u540E\u7F6E\u901A\u77E5\n        +\u73AF\u7ED5\u901A\u77E5\n    }\n    class JoinPoint {\n        <<\u8FDE\u63A5\u70B9>>\n        +\u65B9\u6CD5\u6267\u884C\n        +\u5F02\u5E38\u5904\u7406\n    }\n    class Target {\n        <<\u76EE\u6807\u5BF9\u8C61>>\n        +\u4E1A\u52A1\u65B9\u6CD5\n    }\n    class Proxy {\n        <<\u4EE3\u7406\u5BF9\u8C61>>\n        +\u589E\u5F3A\u65B9\u6CD5\n    }\n    \n    Aspect --\x3e Pointcut : \u5B9A\u4E49\n    Aspect --\x3e Advice : \u5305\u542B\n    Pointcut --\x3e JoinPoint : \u5339\u914D\n    Target --\x3e JoinPoint : \u63D0\u4F9B\n    Proxy --\x3e Target : \u4EE3\u7406\n    Advice --\x3e Proxy : \u589E\u5F3A"}),"\n",(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card__header",children:(0,s.jsx)("h4",{children:"AOP\u6838\u5FC3\u6982\u5FF5"})}),(0,s.jsx)("div",{className:"card__body",children:(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u6982\u5FF5"}),(0,s.jsx)(n.th,{children:"\u8BF4\u660E"}),(0,s.jsx)(n.th,{children:"\u793A\u4F8B"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Aspect\uFF08\u5207\u9762\uFF09"})}),(0,s.jsx)(n.td,{children:"\u6A2A\u5207\u5173\u6CE8\u70B9\u7684\u6A21\u5757\u5316"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"@Aspect"}),"\u6CE8\u89E3\u7684\u7C7B"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Join Point\uFF08\u8FDE\u63A5\u70B9\uFF09"})}),(0,s.jsx)(n.td,{children:"\u7A0B\u5E8F\u6267\u884C\u8FC7\u7A0B\u4E2D\u7684\u67D0\u4E2A\u7279\u5B9A\u70B9"}),(0,s.jsx)(n.td,{children:"\u65B9\u6CD5\u8C03\u7528\u3001\u5F02\u5E38\u629B\u51FA"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Pointcut\uFF08\u5207\u70B9\uFF09"})}),(0,s.jsx)(n.td,{children:"\u5339\u914D\u8FDE\u63A5\u70B9\u7684\u8868\u8FBE\u5F0F"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"execution(* com.example.service.*.*(..))"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Advice\uFF08\u901A\u77E5\uFF09"})}),(0,s.jsx)(n.td,{children:"\u5728\u5207\u70B9\u5904\u8981\u6267\u884C\u7684\u4EE3\u7801"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"@Before"}),"\u3001",(0,s.jsx)(n.code,{children:"@After"}),"\u3001",(0,s.jsx)(n.code,{children:"@Around"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Target Object\uFF08\u76EE\u6807\u5BF9\u8C61\uFF09"})}),(0,s.jsx)(n.td,{children:"\u88AB\u4EE3\u7406\u7684\u5BF9\u8C61"}),(0,s.jsx)(n.td,{children:"\u4E1A\u52A1\u670D\u52A1\u7C7B"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Proxy\uFF08\u4EE3\u7406\uFF09"})}),(0,s.jsx)(n.td,{children:"AOP\u6846\u67B6\u521B\u5EFA\u7684\u5BF9\u8C61"}),(0,s.jsx)(n.td,{children:"Spring\u81EA\u52A8\u521B\u5EFA"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Weaving\uFF08\u7EC7\u5165\uFF09"})}),(0,s.jsx)(n.td,{children:"\u5C06\u5207\u9762\u5E94\u7528\u5230\u76EE\u6807\u5BF9\u8C61\u7684\u8FC7\u7A0B"}),(0,s.jsx)(n.td,{children:"\u7F16\u8BD1\u65F6\u3001\u7C7B\u52A0\u8F7D\u65F6\u3001\u8FD0\u884C\u65F6"})]})]})]})})]}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsx)("summary",{children:"AOP\u6982\u5FF5\u793A\u4F8B\u4EE3\u7801"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="AOP\u6982\u5FF5\u793A\u4F8B"',children:'// 1. Aspect\uFF08\u5207\u9762\uFF09\n@Aspect\n@Component\npublic class LoggingAspect {\n    // \u5207\u9762\u5B9E\u73B0\n}\n\n// 2. Pointcut\uFF08\u5207\u70B9\uFF09\n@Pointcut("execution(* com.example.service.*.*(..))")\npublic void serviceMethods() {}\n\n// 3. Advice\uFF08\u901A\u77E5\uFF09\n@Before("serviceMethods()")\npublic void beforeAdvice() {\n    System.out.println("\u65B9\u6CD5\u6267\u884C\u524D");\n}\n\n// 4. Target Object\uFF08\u76EE\u6807\u5BF9\u8C61\uFF09\n@Service\npublic class UserService {\n    // \u76EE\u6807\u5BF9\u8C61\n}\n'})})]}),"\n",(0,s.jsx)(n.h2,{id:"2-aop\u5B9E\u73B0\u539F\u7406",children:"2. AOP\u5B9E\u73B0\u539F\u7406"}),"\n",(0,s.jsx)(n.h3,{id:"21-\u52A8\u6001\u4EE3\u7406\u673A\u5236",children:"2.1 \u52A8\u6001\u4EE3\u7406\u673A\u5236"}),"\n",(0,s.jsx)(n.p,{children:"Spring AOP\u57FA\u4E8E\u52A8\u6001\u4EE3\u7406\u5B9E\u73B0\uFF0C\u652F\u6301JDK\u52A8\u6001\u4EE3\u7406\u548CCGLIB\u4EE3\u7406\uFF1A"}),"\n",(0,s.jsx)(n.mermaid,{value:"flowchart TD\n    A[Spring AOP] --\x3e B{\u76EE\u6807\u7C7B\u662F\u5426\u5B9E\u73B0\u63A5\u53E3?}\n    B --\x3e|\u662F| C[JDK\u52A8\u6001\u4EE3\u7406]\n    B --\x3e|\u5426| D[CGLIB\u4EE3\u7406]\n    \n    C --\x3e E[\u751F\u6210\u63A5\u53E3\u5B9E\u73B0\u7C7B]\n    D --\x3e F[\u751F\u6210\u5B50\u7C7B]\n    \n    E --\x3e G[\u65B9\u6CD5\u8C03\u7528]\n    F --\x3e G\n    G --\x3e H[\u62E6\u622A\u5668\u94FE]\n    H --\x3e I[\u524D\u7F6E\u901A\u77E5]\n    I --\x3e J[\u76EE\u6807\u65B9\u6CD5]\n    J --\x3e K[\u540E\u7F6E\u901A\u77E5]\n    K --\x3e L[\u8FD4\u56DE\u7ED3\u679C]"}),"\n",(0,s.jsxs)(l.A,{children:[(0,s.jsxs)(c.A,{value:"jdk",label:"JDK\u52A8\u6001\u4EE3\u7406",default:!0,children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="JDK\u52A8\u6001\u4EE3\u7406\u793A\u4F8B"',children:'public class JdkDynamicProxyExample {\n    \n    public static void main(String[] args) {\n        UserService userService = new UserService();\n        \n        // \u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61\n        UserService proxy = (UserService) Proxy.newProxyInstance(\n            UserService.class.getClassLoader(),\n            new Class<?>[]{UserService.class},\n            new LoggingInvocationHandler(userService)\n        );\n        \n        // \u8C03\u7528\u4EE3\u7406\u65B9\u6CD5\n        proxy.createUser(new User("\u5F20\u4E09"));\n    }\n}\n\nclass LoggingInvocationHandler implements InvocationHandler {\n    private final Object target;\n    \n    public LoggingInvocationHandler(Object target) {\n        this.target = target;\n    }\n    \n    @Override\n    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n        System.out.println("\u65B9\u6CD5\u6267\u884C\u524D: " + method.getName());\n        Object result = method.invoke(target, args);\n        System.out.println("\u65B9\u6CD5\u6267\u884C\u540E: " + method.getName());\n        return result;\n    }\n}\n'})}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card__header",children:(0,s.jsx)("h4",{children:"JDK\u52A8\u6001\u4EE3\u7406\u7279\u70B9"})}),(0,s.jsx)("div",{className:"card__body",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"\u8981\u6C42\u76EE\u6807\u7C7B\u5FC5\u987B\u5B9E\u73B0\u63A5\u53E3"}),(0,s.jsx)("li",{children:"\u57FA\u4E8EJava\u53CD\u5C04\u673A\u5236"}),(0,s.jsx)("li",{children:"\u751F\u6210\u7684\u4EE3\u7406\u7C7B\u5B9E\u73B0\u4E86\u76F8\u540C\u7684\u63A5\u53E3"}),(0,s.jsx)("li",{children:"\u901A\u8FC7InvocationHandler\u62E6\u622A\u65B9\u6CD5\u8C03\u7528"})]})})]})]}),(0,s.jsxs)(c.A,{value:"cglib",label:"CGLIB\u4EE3\u7406",children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="CGLIB\u4EE3\u7406\u793A\u4F8B"',children:'public class CglibProxyExample {\n    \n    public static void main(String[] args) {\n        Enhancer enhancer = new Enhancer();\n        enhancer.setSuperclass(UserService.class);\n        enhancer.setCallback(new LoggingMethodInterceptor());\n        \n        UserService proxy = (UserService) enhancer.create();\n        proxy.createUser(new User("\u674E\u56DB"));\n    }\n}\n\nclass LoggingMethodInterceptor implements MethodInterceptor {\n    \n    @Override\n    public Object intercept(Object obj, Method method, Object[] args, MethodProxy proxy) throws Throwable {\n        System.out.println("\u65B9\u6CD5\u6267\u884C\u524D: " + method.getName());\n        Object result = proxy.invokeSuper(obj, args);\n        System.out.println("\u65B9\u6CD5\u6267\u884C\u540E: " + method.getName());\n        return result;\n    }\n}\n'})}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card__header",children:(0,s.jsx)("h4",{children:"CGLIB\u4EE3\u7406\u7279\u70B9"})}),(0,s.jsx)("div",{className:"card__body",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"\u4E0D\u8981\u6C42\u76EE\u6807\u7C7B\u5B9E\u73B0\u63A5\u53E3"}),(0,s.jsx)("li",{children:"\u57FA\u4E8EASM\u5B57\u8282\u7801\u64CD\u4F5C\u6846\u67B6"}),(0,s.jsx)("li",{children:"\u751F\u6210\u76EE\u6807\u7C7B\u7684\u5B50\u7C7B\u4F5C\u4E3A\u4EE3\u7406"}),(0,s.jsx)("li",{children:"\u901A\u8FC7\u8986\u76D6\u7236\u7C7B\u65B9\u6CD5\u5B9E\u73B0\u4EE3\u7406"}),(0,s.jsx)("li",{children:"\u65E0\u6CD5\u4EE3\u7406final\u7C7B\u548Cfinal\u65B9\u6CD5"})]})})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"22-\u4EE3\u7406\u9009\u62E9\u673A\u5236",children:"2.2 \u4EE3\u7406\u9009\u62E9\u673A\u5236"}),"\n",(0,s.jsx)(n.p,{children:"Spring AOP\u6839\u636E\u76EE\u6807\u5BF9\u8C61\u7C7B\u578B\u81EA\u52A8\u9009\u62E9\u4EE3\u7406\u65B9\u5F0F\uFF1A"}),"\n",(0,s.jsx)(n.mermaid,{value:"flowchart TD\n    A[\u76EE\u6807\u5BF9\u8C61] --\x3e B{\u662F\u5426\u5B9E\u73B0\u63A5\u53E3?}\n    B --\x3e|\u662F| C[\u4F7F\u7528JDK\u52A8\u6001\u4EE3\u7406]\n    B --\x3e|\u5426| D[\u4F7F\u7528CGLIB\u4EE3\u7406]\n    C --\x3e E[\u751F\u6210\u63A5\u53E3\u5B9E\u73B0\u7C7B]\n    D --\x3e F[\u751F\u6210\u5B50\u7C7B]\n    E --\x3e G[\u8FD4\u56DE\u4EE3\u7406\u5BF9\u8C61]\n    F --\x3e G"}),"\n",(0,s.jsx)("div",{className:"card",children:(0,s.jsx)("div",{className:"card__body",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="\u4EE3\u7406\u9009\u62E9\u903B\u8F91"',children:"public class ProxySelectionLogic {\n    \n    public static Object createProxy(Object target) {\n        // \u5982\u679C\u76EE\u6807\u5BF9\u8C61\u5B9E\u73B0\u4E86\u63A5\u53E3\uFF0C\u4F7F\u7528JDK\u52A8\u6001\u4EE3\u7406\n        if (target.getClass().getInterfaces().length > 0) {\n            return createJdkProxy(target);\n        } else {\n            // \u5426\u5219\u4F7F\u7528CGLIB\u4EE3\u7406\n            return createCglibProxy(target);\n        }\n    }\n    \n    private static Object createJdkProxy(Object target) {\n        // JDK\u52A8\u6001\u4EE3\u7406\u5B9E\u73B0\n        return Proxy.newProxyInstance(\n            target.getClass().getClassLoader(),\n            target.getClass().getInterfaces(),\n            new LoggingInvocationHandler(target)\n        );\n    }\n    \n    private static Object createCglibProxy(Object target) {\n        // CGLIB\u4EE3\u7406\u5B9E\u73B0\n        Enhancer enhancer = new Enhancer();\n        enhancer.setSuperclass(target.getClass());\n        enhancer.setCallback(new LoggingMethodInterceptor());\n        return enhancer.create();\n    }\n}\n"})})})}),"\n",(0,s.jsx)(n.h2,{id:"3-\u5207\u70B9\u8868\u8FBE\u5F0F",children:"3. \u5207\u70B9\u8868\u8FBE\u5F0F"}),"\n",(0,s.jsx)(n.h3,{id:"31-\u5207\u70B9\u8868\u8FBE\u5F0F\u8BED\u6CD5",children:"3.1 \u5207\u70B9\u8868\u8FBE\u5F0F\u8BED\u6CD5"}),"\n",(0,s.jsx)(n.p,{children:"Spring AOP\u4F7F\u7528AspectJ\u5207\u70B9\u8868\u8FBE\u5F0F\u8BED\u8A00\uFF1A"}),"\n",(0,s.jsx)(n.mermaid,{value:'graph TD\n    A[\u5207\u70B9\u8868\u8FBE\u5F0F\u8BED\u6CD5] --\x3e B[execution]\n    A --\x3e C[within]\n    A --\x3e D[this]\n    A --\x3e E[target]\n    A --\x3e F[args]\n    A --\x3e G["annotation"]\n    A --\x3e H["within\u6CE8\u89E3"]\n    A --\x3e I["target\u6CE8\u89E3"]\n    A --\x3e J["args\u6CE8\u89E3"]\n    \n    B --\x3e B1["\u65B9\u6CD5\u6267\u884C\u5339\u914D<br>execution(* com.example.service.*.*(..))"]\n    C --\x3e C1["\u7C7B\u578B\u5339\u914D<br>within(com.example.service.*)"]\n    D --\x3e D1["\u4EE3\u7406\u5BF9\u8C61\u5339\u914D<br>this(com.example.service.UserService)"]\n    E --\x3e E1["\u76EE\u6807\u5BF9\u8C61\u5339\u914D<br>target(com.example.service.UserService)"]\n    F --\x3e F1["\u53C2\u6570\u5339\u914D<br>args(String, int)"]\n    G --\x3e G1["\u6CE8\u89E3\u5339\u914D<br>@annotation\u6CE8\u89E3\u5339\u914D"]'}),"\n",(0,s.jsxs)(l.A,{children:[(0,s.jsxs)(c.A,{value:"basic",label:"\u57FA\u7840\u8868\u8FBE\u5F0F",default:!0,children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="\u57FA\u7840\u5207\u70B9\u8868\u8FBE\u5F0F\u793A\u4F8B"',children:'@Aspect\n@Component\npublic class BasicPointcutExamples {\n    \n    // 1. \u65B9\u6CD5\u6267\u884C\u5207\u70B9 - \u5339\u914Dservice\u5305\u4E0B\u6240\u6709\u7C7B\u7684\u6240\u6709\u65B9\u6CD5\n    @Pointcut("execution(* com.example.service.*.*(..))")\n    public void serviceMethods() {}\n    \n    // 2. \u65B9\u6CD5\u53C2\u6570\u5207\u70B9 - \u5339\u914D\u6709\u4E24\u4E2A\u53C2\u6570(String\u548Cint)\u7684\u65B9\u6CD5\n    @Pointcut("execution(* *.*(String, int))")\n    public void methodsWithStringAndInt() {}\n    \n    // 3. \u8FD4\u56DE\u7C7B\u578B\u5207\u70B9 - \u5339\u914D\u8FD4\u56DE\u7C7B\u578B\u4E3Avoid\u7684\u65B9\u6CD5\n    @Pointcut("execution(void *.*(..))")\n    public void voidMethods() {}\n    \n    // 4. \u5305\u5207\u70B9 - \u5339\u914Dservice\u5305\u53CA\u5B50\u5305\u4E2D\u7684\u6240\u6709\u65B9\u6CD5\n    @Pointcut("execution(* com.example.service..*.*(..))")\n    public void servicePackageAndSubpackages() {}\n}\n'})}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card__header",children:(0,s.jsx)("h4",{children:"\u6267\u884C\u8868\u8FBE\u5F0F\u683C\u5F0F"})}),(0,s.jsxs)("div",{className:"card__body",children:[(0,s.jsx)("code",{children:"execution(modifiers-pattern? return-type-pattern declaring-type-pattern? method-name-pattern(parameter-pattern) throws-pattern?)"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"modifiers-pattern"}),"\uFF1A\u8BBF\u95EE\u4FEE\u9970\u7B26\u6A21\u5F0F\uFF0C\u5982public\u3001protected\uFF08\u53EF\u9009\uFF09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"return-type-pattern"}),"\uFF1A\u8FD4\u56DE\u7C7B\u578B\u6A21\u5F0F\uFF0C\u5982void\u3001String\u3001*\uFF08\u5FC5\u9009\uFF09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"declaring-type-pattern"}),"\uFF1A\u58F0\u660E\u7C7B\u578B\u6A21\u5F0F\uFF0C\u5982com.example.service.*\uFF08\u53EF\u9009\uFF09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"method-name-pattern"}),"\uFF1A\u65B9\u6CD5\u540D\u6A21\u5F0F\uFF0C\u5982get*\u3001save\u3001*\uFF08\u5FC5\u9009\uFF09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"parameter-pattern"}),"\uFF1A\u53C2\u6570\u6A21\u5F0F\uFF0C\u5982(..)\u8868\u793A\u4EFB\u610F\u53C2\u6570\u3001(String)\u8868\u793A\u4E00\u4E2AString\u53C2\u6570\uFF08\u5FC5\u9009\uFF09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"throws-pattern"}),"\uFF1A\u5F02\u5E38\u6A21\u5F0F\uFF08\u53EF\u9009\uFF09"]}),"\n"]})]})]})]}),(0,s.jsx)(c.A,{value:"annotation",label:"\u6CE8\u89E3\u8868\u8FBE\u5F0F",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="\u6CE8\u89E3\u5207\u70B9\u8868\u8FBE\u5F0F\u793A\u4F8B"',children:'@Aspect\n@Component\npublic class AnnotationPointcutExamples {\n    \n    // 1. \u6CE8\u89E3\u5207\u70B9 - \u5339\u914D\u5E26\u6709@Transactional\u6CE8\u89E3\u7684\u65B9\u6CD5\n    @Pointcut("@annotation(org.springframework.transaction.annotation.Transactional)")\n    public void transactionalMethods() {}\n    \n    // 2. \u7C7B\u578B\u6CE8\u89E3\u5207\u70B9 - \u5339\u914D\u5E26\u6709@Service\u6CE8\u89E3\u7684\u7C7B\u4E2D\u7684\u6240\u6709\u65B9\u6CD5\n    @Pointcut("@within(org.springframework.stereotype.Service)")\n    public void serviceClassMethods() {}\n    \n    // 3. \u53C2\u6570\u6CE8\u89E3\u5207\u70B9 - \u5339\u914D\u81F3\u5C11\u6709\u4E00\u4E2A\u53C2\u6570\u5E26\u6709@Valid\u6CE8\u89E3\u7684\u65B9\u6CD5\n    @Pointcut("@args(javax.validation.Valid)")\n    public void methodsWithValidatedParams() {}\n    \n    // 4. \u81EA\u5B9A\u4E49\u6CE8\u89E3\u793A\u4F8B\n    @Pointcut("@annotation(com.example.annotation.LogExecutionTime)")\n    public void logExecutionTimeMethods() {}\n}\n'})})}),(0,s.jsx)(c.A,{value:"combined",label:"\u7EC4\u5408\u8868\u8FBE\u5F0F",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="\u7EC4\u5408\u5207\u70B9\u8868\u8FBE\u5F0F\u793A\u4F8B"',children:'@Aspect\n@Component\npublic class CombinedPointcutExamples {\n    \n    // 1. AND\u7EC4\u5408 - \u5339\u914Dservice\u5305\u4E0B\u4E14\u6709@Transactional\u6CE8\u89E3\u7684\u65B9\u6CD5\n    @Pointcut("execution(* com.example.service.*.*(..)) && @annotation(org.springframework.transaction.annotation.Transactional)")\n    public void serviceTransactionalMethods() {}\n    \n    // 2. OR\u7EC4\u5408 - \u5339\u914D\u4EFB\u4F55\u63A7\u5236\u5668\u6216\u670D\u52A1\u65B9\u6CD5\n    @Pointcut("within(com.example.controller.*) || within(com.example.service.*)")\n    public void controllerOrServiceMethods() {}\n    \n    // 3. NOT\u7EC4\u5408 - \u5339\u914Dservice\u5305\u4E0B\u975E\u79C1\u6709\u65B9\u6CD5\n    @Pointcut("execution(* com.example.service.*.*(..)) && !execution(private * *.*(..))")\n    public void nonPrivateServiceMethods() {}\n    \n    // 4. \u590D\u6742\u7EC4\u5408 - \u5339\u914D\u6709@Transactional\u6CE8\u89E3\u7684\u975Egetter\u3001setter\u65B9\u6CD5\n    @Pointcut("@annotation(org.springframework.transaction.annotation.Transactional) && !execution(* get*()) && !execution(* set*(*))")\n    public void transactionalNonAccessorMethods() {}\n}\n'})})})]}),"\n",(0,s.jsx)(n.h3,{id:"32-\u5E38\u7528\u5207\u70B9\u8868\u8FBE\u5F0F",children:"3.2 \u5E38\u7528\u5207\u70B9\u8868\u8FBE\u5F0F"}),"\n",(0,s.jsx)("div",{className:"card",children:(0,s.jsx)("div",{className:"card__body",children:(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u8868\u8FBE\u5F0F"}),(0,s.jsx)(n.th,{children:"\u8BF4\u660E"}),(0,s.jsx)(n.th,{children:"\u793A\u4F8B"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"execution(* *.*(..))"})}),(0,s.jsx)(n.td,{children:"\u6240\u6709\u65B9\u6CD5\u6267\u884C"}),(0,s.jsx)(n.td,{children:"\u5339\u914D\u6240\u6709\u65B9\u6CD5"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"execution(* com.example.service.*.*(..))"})}),(0,s.jsx)(n.td,{children:"\u6307\u5B9A\u5305\u4E0B\u7684\u65B9\u6CD5"}),(0,s.jsx)(n.td,{children:"\u5339\u914Dservice\u5305\u4E0B\u6240\u6709\u65B9\u6CD5"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"execution(* *.*(String, int))"})}),(0,s.jsx)(n.td,{children:"\u6307\u5B9A\u53C2\u6570\u7684\u65B9\u6CD5"}),(0,s.jsx)(n.td,{children:"\u5339\u914D\u6709\u4E24\u4E2A\u53C2\u6570\u7684\u65B9\u6CD5"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"@annotation(Transactional)"})}),(0,s.jsx)(n.td,{children:"\u6CE8\u89E3\u65B9\u6CD5"}),(0,s.jsx)(n.td,{children:"\u5339\u914D\u6709@Transactional\u6CE8\u89E3\u7684\u65B9\u6CD5"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"within(com.example.service.*)"})}),(0,s.jsx)(n.td,{children:"\u6307\u5B9A\u5305\u5185\u7684\u8FDE\u63A5\u70B9"}),(0,s.jsx)(n.td,{children:"\u5339\u914Dservice\u5305\u5185\u7684\u6240\u6709\u8FDE\u63A5\u70B9"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"this(com.example.service.UserService)"})}),(0,s.jsx)(n.td,{children:"\u4EE3\u7406\u5BF9\u8C61\u7C7B\u578B"}),(0,s.jsx)(n.td,{children:"\u5339\u914D\u4EE3\u7406\u5BF9\u8C61\u4E3AUserService\u7684\u8FDE\u63A5\u70B9"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"target(com.example.service.UserService)"})}),(0,s.jsx)(n.td,{children:"\u76EE\u6807\u5BF9\u8C61\u7C7B\u578B"}),(0,s.jsx)(n.td,{children:"\u5339\u914D\u76EE\u6807\u5BF9\u8C61\u4E3AUserService\u7684\u8FDE\u63A5\u70B9"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"args(String, ..)"})}),(0,s.jsx)(n.td,{children:"\u53C2\u6570\u7C7B\u578B\u5339\u914D"}),(0,s.jsx)(n.td,{children:"\u5339\u914D\u7B2C\u4E00\u4E2A\u53C2\u6570\u4E3AString\u7684\u65B9\u6CD5"})]})]})]})})}),"\n",(0,s.jsx)(n.h2,{id:"4-\u901A\u77E5\u7C7B\u578B",children:"4. \u901A\u77E5\u7C7B\u578B"}),"\n",(0,s.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant Client as \u5BA2\u6237\u7AEF\n    participant Proxy as \u4EE3\u7406\u5BF9\u8C61\n    participant Target as \u76EE\u6807\u5BF9\u8C61\n    \n    Client->>Proxy: \u8C03\u7528\u65B9\u6CD5\n    \n    Note over Proxy: @Before \u524D\u7F6E\u901A\u77E5\n    \n    opt try \u5757\n        Note over Proxy: @Around \u73AF\u7ED5\u901A\u77E5\u5F00\u59CB\n        Proxy->>Target: \u8C03\u7528\u76EE\u6807\u65B9\u6CD5\n        Target--\x3e>Proxy: \u8FD4\u56DE\u7ED3\u679C\n        Note over Proxy: @AfterReturning \u8FD4\u56DE\u901A\u77E5\n    end\n    \n    opt catch \u5757\n        Note over Proxy: @AfterThrowing \u5F02\u5E38\u901A\u77E5\n    end\n    \n    opt finally \u5757\n        Note over Proxy: @After \u540E\u7F6E\u901A\u77E5\n    end\n    \n    Note over Proxy: @Around \u73AF\u7ED5\u901A\u77E5\u7ED3\u675F\n    \n    Proxy--\x3e>Client: \u8FD4\u56DE\u7ED3\u679C"}),"\n",(0,s.jsxs)(l.A,{children:[(0,s.jsxs)(c.A,{value:"before",label:"\u524D\u7F6E\u901A\u77E5(@Before)",default:!0,children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="\u524D\u7F6E\u901A\u77E5\u793A\u4F8B"',children:'@Aspect\n@Component\npublic class BeforeAdviceExample {\n    \n    @Before("execution(* com.example.service.*.*(..))")\n    public void beforeAdvice(JoinPoint joinPoint) {\n        String methodName = joinPoint.getSignature().getName();\n        Object[] args = joinPoint.getArgs();\n        \n        System.out.println("\u65B9\u6CD5\u6267\u884C\u524D: " + methodName);\n        System.out.println("\u53C2\u6570: " + Arrays.toString(args));\n    }\n    \n    @Before("@annotation(org.springframework.transaction.annotation.Transactional)")\n    public void beforeTransactional(JoinPoint joinPoint) {\n        System.out.println("\u4E8B\u52A1\u65B9\u6CD5\u6267\u884C\u524D: " + joinPoint.getSignature().getName());\n    }\n}\n'})}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card__header",children:(0,s.jsx)("h4",{children:"\u524D\u7F6E\u901A\u77E5\u7279\u70B9"})}),(0,s.jsx)("div",{className:"card__body",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"\u5728\u76EE\u6807\u65B9\u6CD5\u6267\u884C\u524D\u6267\u884C"}),(0,s.jsx)("li",{children:"\u65E0\u6CD5\u963B\u6B62\u65B9\u6CD5\u6267\u884C\uFF08\u9664\u975E\u629B\u51FA\u5F02\u5E38\uFF09"}),(0,s.jsx)("li",{children:"\u53EF\u4EE5\u8BBF\u95EE\u65B9\u6CD5\u53C2\u6570\uFF0C\u4F46\u4E0D\u80FD\u4FEE\u6539\u8FD4\u56DE\u503C"}),(0,s.jsx)("li",{children:"\u9002\u7528\u573A\u666F\uFF1A\u53C2\u6570\u6821\u9A8C\u3001\u6743\u9650\u68C0\u67E5\u3001\u65E5\u5FD7\u8BB0\u5F55"})]})})]})]}),(0,s.jsxs)(c.A,{value:"after",label:"\u540E\u7F6E\u901A\u77E5(@After)",children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="\u540E\u7F6E\u901A\u77E5\u793A\u4F8B"',children:'@Aspect\n@Component\npublic class AfterAdviceExample {\n    \n    @After("execution(* com.example.service.*.*(..))")\n    public void afterAdvice(JoinPoint joinPoint) {\n        String methodName = joinPoint.getSignature().getName();\n        System.out.println("\u65B9\u6CD5\u6267\u884C\u540E: " + methodName);\n    }\n    \n    @After("execution(* com.example.repository.*.*(..))")\n    public void afterRepositoryMethod(JoinPoint joinPoint) {\n        String methodName = joinPoint.getSignature().getName();\n        System.out.println("\u6570\u636E\u64CD\u4F5C\u5B8C\u6210: " + methodName);\n    }\n}\n'})}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card__header",children:(0,s.jsx)("h4",{children:"\u540E\u7F6E\u901A\u77E5\u7279\u70B9"})}),(0,s.jsx)("div",{className:"card__body",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"\u5728\u76EE\u6807\u65B9\u6CD5\u6267\u884C\u540E\u6267\u884C\uFF08\u65E0\u8BBA\u662F\u5426\u629B\u51FA\u5F02\u5E38\uFF09"}),(0,s.jsx)("li",{children:"\u7C7B\u4F3C\u4E8Efinally\u5757"}),(0,s.jsx)("li",{children:"\u65E0\u6CD5\u8BBF\u95EE\u65B9\u6CD5\u8FD4\u56DE\u503C"}),(0,s.jsx)("li",{children:"\u9002\u7528\u573A\u666F\uFF1A\u8D44\u6E90\u6E05\u7406\u3001\u91CA\u653E\u8FDE\u63A5\u3001\u8BB0\u5F55\u65B9\u6CD5\u6267\u884C\u65F6\u95F4"})]})})]})]}),(0,s.jsxs)(c.A,{value:"around",label:"\u73AF\u7ED5\u901A\u77E5(@Around)",children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="\u73AF\u7ED5\u901A\u77E5\u793A\u4F8B"',children:'@Aspect\n@Component\npublic class AroundAdviceExample {\n    \n    @Around("execution(* com.example.service.*.*(..))")\n    public Object aroundAdvice(ProceedingJoinPoint joinPoint) throws Throwable {\n        String methodName = joinPoint.getSignature().getName();\n        long startTime = System.currentTimeMillis();\n        \n        try {\n            // \u6267\u884C\u76EE\u6807\u65B9\u6CD5\n            Object result = joinPoint.proceed();\n            \n            long endTime = System.currentTimeMillis();\n            System.out.println("\u65B9\u6CD5 " + methodName + " \u6267\u884C\u65F6\u95F4: " + (endTime - startTime) + "ms");\n            \n            return result;\n        } catch (Exception e) {\n            System.out.println("\u65B9\u6CD5 " + methodName + " \u6267\u884C\u5F02\u5E38: " + e.getMessage());\n            throw e;\n        }\n    }\n    \n    @Around("@annotation(com.example.annotation.LogExecutionTime)")\n    public Object logExecutionTime(ProceedingJoinPoint joinPoint) throws Throwable {\n        long start = System.currentTimeMillis();\n        Object result = joinPoint.proceed();\n        long executionTime = System.currentTimeMillis() - start;\n        \n        System.out.println(joinPoint.getSignature() + " executed in " + executionTime + "ms");\n        return result;\n    }\n}\n'})}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card__header",children:(0,s.jsx)("h4",{children:"\u73AF\u7ED5\u901A\u77E5\u7279\u70B9"})}),(0,s.jsx)("div",{className:"card__body",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"\u53EF\u4EE5\u5728\u65B9\u6CD5\u6267\u884C\u524D\u540E\u6DFB\u52A0\u81EA\u5B9A\u4E49\u884C\u4E3A"}),(0,s.jsx)("li",{children:"\u5B8C\u5168\u63A7\u5236\u76EE\u6807\u65B9\u6CD5\u7684\u6267\u884C\uFF08\u51B3\u5B9A\u662F\u5426\u6267\u884C\u3001\u4F55\u65F6\u6267\u884C\uFF09"}),(0,s.jsx)("li",{children:"\u53EF\u4EE5\u4FEE\u6539\u65B9\u6CD5\u7684\u8FD4\u56DE\u503C\u6216\u629B\u51FA\u7684\u5F02\u5E38"}),(0,s.jsx)("li",{children:"\u9700\u8981\u624B\u52A8\u8C03\u7528joinPoint.proceed()\u6267\u884C\u76EE\u6807\u65B9\u6CD5"}),(0,s.jsx)("li",{children:"\u6700\u5F3A\u5927\u4F46\u4E5F\u6700\u590D\u6742\u7684\u901A\u77E5\u7C7B\u578B"}),(0,s.jsx)("li",{children:"\u9002\u7528\u573A\u666F\uFF1A\u4E8B\u52A1\u7BA1\u7406\u3001\u6027\u80FD\u76D1\u63A7\u3001\u7F13\u5B58\u3001\u91CD\u8BD5\u903B\u8F91"})]})})]})]}),(0,s.jsxs)(c.A,{value:"afterReturning",label:"\u8FD4\u56DE\u901A\u77E5(@AfterReturning)",children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="\u8FD4\u56DE\u901A\u77E5\u793A\u4F8B"',children:'@Aspect\n@Component\npublic class AfterReturningAdviceExample {\n    \n    @AfterReturning(\n        pointcut = "execution(* com.example.service.*.*(..))",\n        returning = "result"\n    )\n    public void afterReturningAdvice(JoinPoint joinPoint, Object result) {\n        String methodName = joinPoint.getSignature().getName();\n        System.out.println("\u65B9\u6CD5 " + methodName + " \u6B63\u5E38\u8FD4\u56DE: " + result);\n    }\n    \n    @AfterReturning(\n        pointcut = "execution(java.util.List com.example.service.*.*(..))",\n        returning = "resultList"\n    )\n    public void afterReturningList(JoinPoint joinPoint, List<?> resultList) {\n        System.out.println("\u8FD4\u56DE\u5217\u8868\u5927\u5C0F: " + resultList.size());\n    }\n}\n'})}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card__header",children:(0,s.jsx)("h4",{children:"\u8FD4\u56DE\u901A\u77E5\u7279\u70B9"})}),(0,s.jsx)("div",{className:"card__body",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"\u5728\u76EE\u6807\u65B9\u6CD5\u6210\u529F\u6267\u884C\u540E\u6267\u884C"}),(0,s.jsx)("li",{children:"\u53EF\u4EE5\u8BBF\u95EE\u65B9\u6CD5\u7684\u8FD4\u56DE\u503C\uFF0C\u4F46\u4E0D\u80FD\u4FEE\u6539"}),(0,s.jsx)("li",{children:"\u4EC5\u5728\u65B9\u6CD5\u6B63\u5E38\u8FD4\u56DE\u65F6\u6267\u884C\uFF08\u6CA1\u6709\u629B\u51FA\u5F02\u5E38\uFF09"}),(0,s.jsx)("li",{children:"\u9002\u7528\u573A\u666F\uFF1A\u65E5\u5FD7\u8BB0\u5F55\u3001\u7EDF\u8BA1\u5206\u6790\u3001\u8FD4\u56DE\u503C\u5904\u7406"})]})})]})]}),(0,s.jsxs)(c.A,{value:"afterThrowing",label:"\u5F02\u5E38\u901A\u77E5(@AfterThrowing)",children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="\u5F02\u5E38\u901A\u77E5\u793A\u4F8B"',children:'@Aspect\n@Component\npublic class AfterThrowingAdviceExample {\n    \n    @AfterThrowing(\n        pointcut = "execution(* com.example.service.*.*(..))",\n        throwing = "ex"\n    )\n    public void afterThrowingAdvice(JoinPoint joinPoint, Exception ex) {\n        String methodName = joinPoint.getSignature().getName();\n        System.out.println("\u65B9\u6CD5 " + methodName + " \u629B\u51FA\u5F02\u5E38: " + ex.getMessage());\n        \n        // \u8BB0\u5F55\u5F02\u5E38\u65E5\u5FD7\n        // \u53D1\u9001\u5F02\u5E38\u901A\u77E5\n        // \u6E05\u7406\u8D44\u6E90\n    }\n    \n    @AfterThrowing(\n        pointcut = "execution(* com.example.repository.*.*(..))",\n        throwing = "dataEx"\n    )\n    public void afterThrowingDataException(JoinPoint joinPoint, DataAccessException dataEx) {\n        // \u5904\u7406\u6570\u636E\u8BBF\u95EE\u5F02\u5E38\n        System.out.println("\u6570\u636E\u8BBF\u95EE\u5F02\u5E38: " + dataEx.getMessage());\n    }\n}\n'})}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card__header",children:(0,s.jsx)("h4",{children:"\u5F02\u5E38\u901A\u77E5\u7279\u70B9"})}),(0,s.jsx)("div",{className:"card__body",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"\u5728\u76EE\u6807\u65B9\u6CD5\u629B\u51FA\u5F02\u5E38\u65F6\u6267\u884C"}),(0,s.jsx)("li",{children:"\u53EF\u4EE5\u8BBF\u95EE\u629B\u51FA\u7684\u5F02\u5E38\u5BF9\u8C61"}),(0,s.jsx)("li",{children:"\u4E0D\u80FD\u963B\u6B62\u5F02\u5E38\u4F20\u64AD\uFF08\u9664\u975E\u4F7F\u7528\u73AF\u7ED5\u901A\u77E5\uFF09"}),(0,s.jsx)("li",{children:"\u9002\u7528\u573A\u666F\uFF1A\u5F02\u5E38\u65E5\u5FD7\u3001\u9519\u8BEF\u901A\u77E5\u3001\u8D44\u6E90\u6E05\u7406"})]})})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"41-\u901A\u77E5\u7C7B\u578B\u5BF9\u6BD4",children:"4.1 \u901A\u77E5\u7C7B\u578B\u5BF9\u6BD4"}),"\n",(0,s.jsx)("div",{className:"card",children:(0,s.jsx)("div",{className:"card__body",children:(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u901A\u77E5\u7C7B\u578B"}),(0,s.jsx)(n.th,{children:"\u6CE8\u89E3"}),(0,s.jsx)(n.th,{children:"\u6267\u884C\u65F6\u673A"}),(0,s.jsx)(n.th,{children:"\u80FD\u5426\u63A7\u5236\u65B9\u6CD5\u6267\u884C"}),(0,s.jsx)(n.th,{children:"\u80FD\u5426\u8BBF\u95EE\u8FD4\u56DE\u503C"}),(0,s.jsx)(n.th,{children:"\u80FD\u5426\u8BBF\u95EE\u5F02\u5E38"}),(0,s.jsx)(n.th,{children:"\u9002\u7528\u573A\u666F"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"\u524D\u7F6E\u901A\u77E5"})}),(0,s.jsx)(n.td,{children:"@Before"}),(0,s.jsx)(n.td,{children:"\u65B9\u6CD5\u6267\u884C\u524D"}),(0,s.jsx)(n.td,{children:"\u274C"}),(0,s.jsx)(n.td,{children:"\u274C"}),(0,s.jsx)(n.td,{children:"\u274C"}),(0,s.jsx)(n.td,{children:"\u53C2\u6570\u6821\u9A8C\u3001\u6743\u9650\u68C0\u67E5"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"\u540E\u7F6E\u901A\u77E5"})}),(0,s.jsx)(n.td,{children:"@After"}),(0,s.jsx)(n.td,{children:"\u65B9\u6CD5\u6267\u884C\u540E(finally)"}),(0,s.jsx)(n.td,{children:"\u274C"}),(0,s.jsx)(n.td,{children:"\u274C"}),(0,s.jsx)(n.td,{children:"\u274C"}),(0,s.jsx)(n.td,{children:"\u8D44\u6E90\u6E05\u7406\u3001\u65E5\u5FD7\u8BB0\u5F55"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"\u8FD4\u56DE\u901A\u77E5"})}),(0,s.jsx)(n.td,{children:"@AfterReturning"}),(0,s.jsx)(n.td,{children:"\u65B9\u6CD5\u6B63\u5E38\u8FD4\u56DE\u540E"}),(0,s.jsx)(n.td,{children:"\u274C"}),(0,s.jsx)(n.td,{children:"\u2705(\u53EA\u8BFB)"}),(0,s.jsx)(n.td,{children:"\u274C"}),(0,s.jsx)(n.td,{children:"\u7ED3\u679C\u5904\u7406\u3001\u65E5\u5FD7\u8BB0\u5F55"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"\u5F02\u5E38\u901A\u77E5"})}),(0,s.jsx)(n.td,{children:"@AfterThrowing"}),(0,s.jsx)(n.td,{children:"\u65B9\u6CD5\u629B\u51FA\u5F02\u5E38\u65F6"}),(0,s.jsx)(n.td,{children:"\u274C"}),(0,s.jsx)(n.td,{children:"\u274C"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{children:"\u5F02\u5E38\u5904\u7406\u3001\u9519\u8BEF\u901A\u77E5"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"\u73AF\u7ED5\u901A\u77E5"})}),(0,s.jsx)(n.td,{children:"@Around"}),(0,s.jsx)(n.td,{children:"\u65B9\u6CD5\u524D\u540E\u90FD\u53EF"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{children:"\u2705(\u53EF\u4FEE\u6539)"}),(0,s.jsx)(n.td,{children:"\u2705(\u53EF\u5904\u7406)"}),(0,s.jsx)(n.td,{children:"\u4E8B\u52A1\u7BA1\u7406\u3001\u6027\u80FD\u76D1\u63A7"})]})]})]})})}),"\n",(0,s.jsx)(n.h2,{id:"5-\u5B9E\u9645\u5E94\u7528\u573A\u666F",children:"5. \u5B9E\u9645\u5E94\u7528\u573A\u666F"}),"\n",(0,s.jsx)(n.mermaid,{value:'graph TD\n    A[AOP\u5E94\u7528\u573A\u666F] --\x3e B[\u65E5\u5FD7\u8BB0\u5F55]\n    A --\x3e C[\u6027\u80FD\u76D1\u63A7]\n    A --\x3e D[\u4E8B\u52A1\u7BA1\u7406]\n    A --\x3e E[\u5B89\u5168\u63A7\u5236]\n    A --\x3e F[\u7F13\u5B58\u7BA1\u7406]\n    A --\x3e G[\u91CD\u8BD5\u673A\u5236]\n    A --\x3e H[\u6570\u636E\u5BA1\u8BA1]\n    \n    B --\x3e B1["\u8BB0\u5F55\u65B9\u6CD5\u8C03\u7528<br>\u53C2\u6570\u548C\u8FD4\u56DE\u503C"]\n    C --\x3e C1["\u6D4B\u91CF\u65B9\u6CD5\u6267\u884C\u65F6\u95F4<br>\u8BC6\u522B\u6027\u80FD\u74F6\u9888"]\n    D --\x3e D1["\u81EA\u52A8\u5F00\u542F/\u63D0\u4EA4/\u56DE\u6EDA\u4E8B\u52A1"]\n    E --\x3e E1["\u6743\u9650\u6821\u9A8C<br>\u8BA4\u8BC1\u6388\u6743"]\n    F --\x3e F1["\u65B9\u6CD5\u7ED3\u679C\u7F13\u5B58<br>\u7F13\u5B58\u5931\u6548"]\n    G --\x3e G1["\u5931\u8D25\u81EA\u52A8\u91CD\u8BD5<br>\u8D85\u65F6\u5904\u7406"]\n    H --\x3e H1["\u8BB0\u5F55\u6570\u636E\u53D8\u66F4<br>\u64CD\u4F5C\u5BA1\u8BA1"]'}),"\n",(0,s.jsx)(n.h3,{id:"51-\u65E5\u5FD7\u5207\u9762",children:"5.1 \u65E5\u5FD7\u5207\u9762"}),"\n",(0,s.jsxs)(l.A,{children:[(0,s.jsx)(c.A,{value:"log",label:"\u65E5\u5FD7\u5207\u9762",default:!0,children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="\u65E5\u5FD7\u5207\u9762"',children:'@Aspect\n@Component\n@Slf4j\npublic class LoggingAspect {\n    \n    @Around("@annotation(com.example.annotation.LogExecutionTime)")\n    public Object logExecutionTime(ProceedingJoinPoint joinPoint) throws Throwable {\n        String methodName = joinPoint.getSignature().getName();\n        String className = joinPoint.getTarget().getClass().getSimpleName();\n        \n        log.info("\u5F00\u59CB\u6267\u884C\u65B9\u6CD5: {}.{}", className, methodName);\n        long startTime = System.currentTimeMillis();\n        \n        try {\n            Object result = joinPoint.proceed();\n            long endTime = System.currentTimeMillis();\n            log.info("\u65B9\u6CD5 {}.{} \u6267\u884C\u5B8C\u6210\uFF0C\u8017\u65F6: {}ms", className, methodName, endTime - startTime);\n            return result;\n        } catch (Exception e) {\n            log.error("\u65B9\u6CD5 {}.{} \u6267\u884C\u5F02\u5E38: {}", className, methodName, e.getMessage());\n            throw e;\n        }\n    }\n    \n    @Before("@annotation(com.example.annotation.LogParameters)")\n    public void logParameters(JoinPoint joinPoint) {\n        String methodName = joinPoint.getSignature().getName();\n        Object[] args = joinPoint.getArgs();\n        \n        log.info("\u65B9\u6CD5 {} \u7684\u53C2\u6570: {}", methodName, Arrays.toString(args));\n    }\n}\n'})})}),(0,s.jsxs)(c.A,{value:"log-annotation",label:"\u81EA\u5B9A\u4E49\u65E5\u5FD7\u6CE8\u89E3",children:[(0,s.jsxs)(i,{children:[(0,s.jsx)("summary",{children:"\u81EA\u5B9A\u4E49\u65E5\u5FD7\u6CE8\u89E3\u793A\u4F8B"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="LogExecutionTime\u6CE8\u89E3"',children:'@Target({ElementType.METHOD})\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface LogExecutionTime {\n    String value() default "";\n}\n\n@Target({ElementType.METHOD})\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface LogParameters {\n    String value() default "";\n}\n'})})]}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card__header",children:(0,s.jsx)("h4",{children:"\u65E5\u5FD7\u5207\u9762\u529F\u80FD"})}),(0,s.jsx)("div",{className:"card__body",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"\u65B9\u6CD5\u8C03\u7528\u8BB0\u5F55\uFF1A\u8BB0\u5F55\u65B9\u6CD5\u7684\u8C03\u7528\u4FE1\u606F\uFF0C\u5305\u62EC\u65B9\u6CD5\u540D\u3001\u53C2\u6570\u7B49"}),(0,s.jsx)("li",{children:"\u6267\u884C\u65F6\u95F4\u7EDF\u8BA1\uFF1A\u8BB0\u5F55\u65B9\u6CD5\u7684\u6267\u884C\u65F6\u957F\uFF0C\u7528\u4E8E\u6027\u80FD\u5206\u6790"}),(0,s.jsx)("li",{children:"\u5F02\u5E38\u6355\u83B7\uFF1A\u8BB0\u5F55\u65B9\u6CD5\u6267\u884C\u8FC7\u7A0B\u4E2D\u7684\u5F02\u5E38\u4FE1\u606F"}),(0,s.jsx)("li",{children:"\u7ED3\u679C\u8DDF\u8E2A\uFF1A\u8BB0\u5F55\u65B9\u6CD5\u7684\u8FD4\u56DE\u503C"}),(0,s.jsx)("li",{children:"\u8C03\u7528\u94FE\u8DDF\u8E2A\uFF1A\u8DDF\u8E2A\u5B8C\u6574\u7684\u65B9\u6CD5\u8C03\u7528\u94FE"})]})})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"52-\u7F13\u5B58\u5207\u9762",children:"5.2 \u7F13\u5B58\u5207\u9762"}),"\n",(0,s.jsxs)(l.A,{children:[(0,s.jsx)(c.A,{value:"cache",label:"\u7F13\u5B58\u5207\u9762",default:!0,children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="\u7F13\u5B58\u5207\u9762"',children:'@Aspect\n@Component\npublic class CacheAspect {\n    \n    @Autowired\n    private RedisTemplate<String, Object> redisTemplate;\n    \n    @Around("@annotation(com.example.annotation.Cacheable)")\n    public Object cache(ProceedingJoinPoint joinPoint) throws Throwable {\n        String key = generateCacheKey(joinPoint);\n        \n        // \u5C1D\u8BD5\u4ECE\u7F13\u5B58\u83B7\u53D6\n        Object cachedValue = redisTemplate.opsForValue().get(key);\n        if (cachedValue != null) {\n            return cachedValue;\n        }\n        \n        // \u6267\u884C\u65B9\u6CD5\u5E76\u7F13\u5B58\u7ED3\u679C\n        Object result = joinPoint.proceed();\n        redisTemplate.opsForValue().set(key, result, Duration.ofMinutes(30));\n        \n        return result;\n    }\n    \n    @AfterReturning("@annotation(com.example.annotation.CacheEvict)")\n    public void evictCache(JoinPoint joinPoint) {\n        String key = generateCacheKey(joinPoint);\n        redisTemplate.delete(key);\n    }\n    \n    private String generateCacheKey(JoinPoint joinPoint) {\n        String methodName = joinPoint.getSignature().getName();\n        Object[] args = joinPoint.getArgs();\n        return methodName + ":" + Arrays.toString(args);\n    }\n}\n'})})}),(0,s.jsxs)(c.A,{value:"cache-usage",label:"\u7F13\u5B58\u4F7F\u7528\u793A\u4F8B",children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="\u7F13\u5B58\u4F7F\u7528\u793A\u4F8B"',children:"@Service\npublic class UserService {\n    \n    @Autowired\n    private UserRepository userRepository;\n    \n    @Cacheable\n    public User getUserById(Long id) {\n        // \u8FD9\u4E2A\u65B9\u6CD5\u7684\u7ED3\u679C\u4F1A\u88AB\u7F13\u5B58\n        return userRepository.findById(id).orElse(null);\n    }\n    \n    @CacheEvict\n    public void updateUser(User user) {\n        // \u66F4\u65B0\u7528\u6237\u540E\uFF0C\u76F8\u5173\u7F13\u5B58\u4F1A\u88AB\u6E05\u9664\n        userRepository.save(user);\n    }\n}\n"})}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card__header",children:(0,s.jsx)("h4",{children:"\u7F13\u5B58\u5207\u9762\u4F18\u52BF"})}),(0,s.jsx)("div",{className:"card__body",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"\u51CF\u5C11\u6570\u636E\u5E93\u8D1F\u8F7D\uFF1A\u907F\u514D\u91CD\u590D\u67E5\u8BE2\u76F8\u540C\u6570\u636E"}),(0,s.jsx)("li",{children:"\u63D0\u9AD8\u54CD\u5E94\u901F\u5EA6\uFF1A\u76F4\u63A5\u4ECE\u7F13\u5B58\u8FD4\u56DE\u7ED3\u679C"}),(0,s.jsx)("li",{children:"\u900F\u660E\u5B9E\u73B0\uFF1A\u4E1A\u52A1\u4EE3\u7801\u65E0\u611F\u77E5\u7F13\u5B58\u64CD\u4F5C"}),(0,s.jsx)("li",{children:"\u96C6\u4E2D\u7BA1\u7406\uFF1A\u7F13\u5B58\u7B56\u7565\u96C6\u4E2D\u914D\u7F6E"})]})})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"53-\u4E8B\u52A1\u5207\u9762",children:"5.3 \u4E8B\u52A1\u5207\u9762"}),"\n",(0,s.jsxs)(l.A,{children:[(0,s.jsxs)(c.A,{value:"transaction",label:"\u4E8B\u52A1\u5207\u9762",default:!0,children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="\u4E8B\u52A1\u5207\u9762"',children:'@Aspect\n@Component\npublic class TransactionAspect {\n    \n    @Autowired\n    private PlatformTransactionManager transactionManager;\n    \n    @Around("@annotation(com.example.annotation.Transactional)")\n    public Object handleTransaction(ProceedingJoinPoint joinPoint) throws Throwable {\n        TransactionStatus status = null;\n        \n        try {\n            // \u5F00\u542F\u4E8B\u52A1\n            DefaultTransactionDefinition def = new DefaultTransactionDefinition();\n            status = transactionManager.getTransaction(def);\n            \n            // \u6267\u884C\u76EE\u6807\u65B9\u6CD5\n            Object result = joinPoint.proceed();\n            \n            // \u63D0\u4EA4\u4E8B\u52A1\n            transactionManager.commit(status);\n            \n            return result;\n        } catch (Exception e) {\n            // \u56DE\u6EDA\u4E8B\u52A1\n            if (status != null) {\n                transactionManager.rollback(status);\n            }\n            throw e;\n        }\n    }\n}\n'})}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card__header",children:(0,s.jsx)("h4",{children:"\u4E8B\u52A1\u5207\u9762\u529F\u80FD"})}),(0,s.jsx)("div",{className:"card__body",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"\u81EA\u52A8\u4E8B\u52A1\u7BA1\u7406\uFF1A\u65E0\u9700\u624B\u52A8\u5F00\u542F/\u63D0\u4EA4/\u56DE\u6EDA\u4E8B\u52A1"}),(0,s.jsx)("li",{children:"\u58F0\u660E\u5F0F\u4E8B\u52A1\uFF1A\u4F7F\u7528\u6CE8\u89E3\u5373\u53EF\u542F\u7528\u4E8B\u52A1"}),(0,s.jsx)("li",{children:"\u4E8B\u52A1\u4F20\u64AD\uFF1A\u652F\u6301\u4E0D\u540C\u7684\u4E8B\u52A1\u4F20\u64AD\u884C\u4E3A"}),(0,s.jsx)("li",{children:"\u4E8B\u52A1\u9694\u79BB\uFF1A\u652F\u6301\u4E0D\u540C\u7684\u4E8B\u52A1\u9694\u79BB\u7EA7\u522B"}),(0,s.jsx)("li",{children:"\u5F02\u5E38\u5904\u7406\uFF1A\u81EA\u52A8\u6839\u636E\u5F02\u5E38\u7C7B\u578B\u56DE\u6EDA\u4E8B\u52A1"})]})})]})]}),(0,s.jsx)(c.A,{value:"transaction-usage",label:"\u4E8B\u52A1\u4F7F\u7528\u793A\u4F8B",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="\u4E8B\u52A1\u4F7F\u7528\u793A\u4F8B"',children:"@Service\npublic class OrderService {\n    \n    @Autowired\n    private OrderRepository orderRepository;\n    \n    @Autowired\n    private PaymentService paymentService;\n    \n    @Transactional\n    public Order createOrder(Order order) {\n        // \u4FDD\u5B58\u8BA2\u5355\n        Order savedOrder = orderRepository.save(order);\n        \n        // \u5904\u7406\u652F\u4ED8\uFF0C\u5982\u679C\u652F\u4ED8\u5931\u8D25\uFF0C\u6574\u4E2A\u4E8B\u52A1\u4F1A\u56DE\u6EDA\n        paymentService.processPayment(order.getPayment());\n        \n        return savedOrder;\n    }\n}\n"})})})]}),"\n",(0,s.jsx)(n.h3,{id:"54-\u6743\u9650\u5207\u9762",children:"5.4 \u6743\u9650\u5207\u9762"}),"\n",(0,s.jsxs)(l.A,{children:[(0,s.jsx)(c.A,{value:"security",label:"\u6743\u9650\u5207\u9762",default:!0,children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="\u6743\u9650\u5207\u9762"',children:'@Aspect\n@Component\npublic class SecurityAspect {\n    \n    @Autowired\n    private SecurityService securityService;\n    \n    @Before("@annotation(com.example.annotation.RequiresPermission)")\n    public void checkPermission(JoinPoint joinPoint) {\n        MethodSignature signature = (MethodSignature) joinPoint.getSignature();\n        RequiresPermission annotation = signature.getMethod().getAnnotation(RequiresPermission.class);\n        String permission = annotation.value();\n        \n        if (!securityService.hasPermission(permission)) {\n            throw new AccessDeniedException("\u6743\u9650\u4E0D\u8DB3: " + permission);\n        }\n    }\n    \n    @Before("@annotation(com.example.annotation.RequiresRole)")\n    public void checkRole(JoinPoint joinPoint) {\n        MethodSignature signature = (MethodSignature) joinPoint.getSignature();\n        RequiresRole annotation = signature.getMethod().getAnnotation(RequiresRole.class);\n        String role = annotation.value();\n        \n        if (!securityService.hasRole(role)) {\n            throw new AccessDeniedException("\u89D2\u8272\u4E0D\u8DB3: " + role);\n        }\n    }\n}\n'})})}),(0,s.jsxs)(c.A,{value:"security-usage",label:"\u6743\u9650\u4F7F\u7528\u793A\u4F8B",children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="\u6743\u9650\u4F7F\u7528\u793A\u4F8B"',children:'@RestController\n@RequestMapping("/api/admin")\npublic class AdminController {\n    \n    @RequiresRole("ADMIN")\n    @GetMapping("/users")\n    public List<User> getAllUsers() {\n        // \u53EA\u6709ADMIN\u89D2\u8272\u624D\u80FD\u8BBF\u95EE\n        return userService.findAll();\n    }\n    \n    @RequiresPermission("user:delete")\n    @DeleteMapping("/users/{id}")\n    public void deleteUser(@PathVariable Long id) {\n        // \u53EA\u6709\u62E5\u6709user:delete\u6743\u9650\u624D\u80FD\u5220\u9664\u7528\u6237\n        userService.deleteById(id);\n    }\n}\n'})}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card__header",children:(0,s.jsx)("h4",{children:"\u6743\u9650\u5207\u9762\u4F18\u52BF"})}),(0,s.jsx)("div",{className:"card__body",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"\u58F0\u660E\u5F0F\u5B89\u5168\u63A7\u5236\uFF1A\u901A\u8FC7\u6CE8\u89E3\u58F0\u660E\u6743\u9650\u9700\u6C42"}),(0,s.jsx)("li",{children:"\u7EC6\u7C92\u5EA6\u6743\u9650\u63A7\u5236\uFF1A\u7CBE\u786E\u5230\u65B9\u6CD5\u7EA7\u522B"}),(0,s.jsx)("li",{children:"\u96C6\u4E2D\u7BA1\u7406\uFF1A\u5B89\u5168\u903B\u8F91\u4E0E\u4E1A\u52A1\u903B\u8F91\u5206\u79BB"}),(0,s.jsx)("li",{children:"\u53EF\u6269\u5C55\u6027\uFF1A\u6613\u4E8E\u6DFB\u52A0\u65B0\u7684\u6743\u9650\u7C7B\u578B"}),(0,s.jsx)("li",{children:"\u4E00\u81F4\u6027\uFF1A\u7EDF\u4E00\u7684\u6743\u9650\u63A7\u5236\u673A\u5236"})]})})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"6-\u6027\u80FD\u76D1\u63A7\u5207\u9762",children:"6. \u6027\u80FD\u76D1\u63A7\u5207\u9762"}),"\n",(0,s.jsx)(n.h3,{id:"61-\u65B9\u6CD5\u6267\u884C\u65F6\u95F4\u76D1\u63A7",children:"6.1 \u65B9\u6CD5\u6267\u884C\u65F6\u95F4\u76D1\u63A7"}),"\n",(0,s.jsx)("div",{className:"card",children:(0,s.jsx)("div",{className:"card__body",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="\u6027\u80FD\u76D1\u63A7\u5207\u9762"',children:'@Aspect\n@Component\npublic class PerformanceMonitorAspect {\n    \n    private final MeterRegistry meterRegistry;\n    \n    public PerformanceMonitorAspect(MeterRegistry meterRegistry) {\n        this.meterRegistry = meterRegistry;\n    }\n    \n    @Around("execution(* com.example.service.*.*(..))")\n    public Object monitorPerformance(ProceedingJoinPoint joinPoint) throws Throwable {\n        String methodName = joinPoint.getSignature().getName();\n        String className = joinPoint.getTarget().getClass().getSimpleName();\n        String metricName = className + "." + methodName;\n        \n        Timer.Sample sample = Timer.start(meterRegistry);\n        \n        try {\n            Object result = joinPoint.proceed();\n            sample.stop(Timer.builder("method.execution.time")\n                .tag("class", className)\n                .tag("method", methodName)\n                .tag("status", "success")\n                .register(meterRegistry));\n            return result;\n        } catch (Exception e) {\n            sample.stop(Timer.builder("method.execution.time")\n                .tag("class", className)\n                .tag("method", methodName)\n                .tag("status", "error")\n                .register(meterRegistry));\n            \n            // \u8BB0\u5F55\u5F02\u5E38\u8BA1\u6570\n            meterRegistry.counter("method.execution.errors",\n                "class", className,\n                "method", methodName,\n                "exception", e.getClass().getSimpleName()).increment();\n            \n            throw e;\n        }\n    }\n}\n'})})})}),"\n",(0,s.jsx)(n.mermaid,{value:'graph TD\n    A[\u6027\u80FD\u76D1\u63A7\u5207\u9762] --\x3e B[\u65B9\u6CD5\u6267\u884C\u65F6\u95F4]\n    A --\x3e C[\u8C03\u7528\u9891\u7387]\n    A --\x3e D[\u5F02\u5E38\u76D1\u63A7]\n    A --\x3e E[\u8D44\u6E90\u4F7F\u7528]\n    \n    B --\x3e B1["Timer\u6307\u6807"]\n    C --\x3e C1["Counter\u6307\u6807"]\n    D --\x3e D1["\u5F02\u5E38\u8BA1\u6570\u5668"]\n    E --\x3e E1["Gauge\u6307\u6807"]\n    \n    B1 --\x3e F[Prometheus]\n    C1 --\x3e F\n    D1 --\x3e F\n    E1 --\x3e F\n    \n    F --\x3e G[Grafana]\n    G --\x3e H[\u6027\u80FD\u76D1\u63A7\u4EEA\u8868\u76D8]'}),"\n",(0,s.jsx)(n.h2,{id:"7-\u9762\u8BD5\u9898\u7CBE\u9009",children:"7. \u9762\u8BD5\u9898\u7CBE\u9009"}),"\n",(0,s.jsx)(n.h3,{id:"71-\u57FA\u7840\u6982\u5FF5\u9898",children:"7.1 \u57FA\u7840\u6982\u5FF5\u9898"}),"\n",(0,s.jsxs)(l.A,{children:[(0,s.jsx)(c.A,{value:"q1",label:"\u4EC0\u4E48\u662FAOP",default:!0,children:(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card__header",children:(0,s.jsx)("h4",{children:"Q: \u4EC0\u4E48\u662FAOP\uFF1F\u5B83\u7684\u6838\u5FC3\u6982\u5FF5\u6709\u54EA\u4E9B\uFF1F"})}),(0,s.jsxs)("div",{className:"card__body",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"A:"})," AOP\uFF08\u9762\u5411\u5207\u9762\u7F16\u7A0B\uFF09\u662F\u4E00\u79CD\u7F16\u7A0B\u8303\u5F0F\uFF0C\u7528\u4E8E\u5C06\u6A2A\u5207\u5173\u6CE8\u70B9\u4ECE\u4E3B\u4E1A\u52A1\u903B\u8F91\u4E2D\u5206\u79BB\u51FA\u6765\u3002\u6838\u5FC3\u6982\u5FF5\u5305\u62EC\uFF1A"]}),(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"Aspect\uFF08\u5207\u9762\uFF09"}),"\uFF1A\u6A2A\u5207\u5173\u6CE8\u70B9\u7684\u6A21\u5757\u5316"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"Join Point\uFF08\u8FDE\u63A5\u70B9\uFF09"}),"\uFF1A\u7A0B\u5E8F\u6267\u884C\u8FC7\u7A0B\u4E2D\u7684\u67D0\u4E2A\u7279\u5B9A\u70B9"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"Pointcut\uFF08\u5207\u70B9\uFF09"}),"\uFF1A\u5339\u914D\u8FDE\u63A5\u70B9\u7684\u8868\u8FBE\u5F0F"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"Advice\uFF08\u901A\u77E5\uFF09"}),"\uFF1A\u5728\u5207\u70B9\u5904\u8981\u6267\u884C\u7684\u4EE3\u7801"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"Target Object\uFF08\u76EE\u6807\u5BF9\u8C61\uFF09"}),"\uFF1A\u88AB\u4EE3\u7406\u7684\u5BF9\u8C61"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"Proxy\uFF08\u4EE3\u7406\uFF09"}),"\uFF1AAOP\u6846\u67B6\u521B\u5EFA\u7684\u5BF9\u8C61"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"Weaving\uFF08\u7EC7\u5165\uFF09"}),"\uFF1A\u5C06\u5207\u9762\u5E94\u7528\u5230\u76EE\u6807\u5BF9\u8C61\u7684\u8FC7\u7A0B"]})]})]})]})}),(0,s.jsx)(c.A,{value:"q2",label:"AOP\u5B9E\u73B0\u539F\u7406",children:(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card__header",children:(0,s.jsx)("h4",{children:"Q: Spring AOP\u7684\u5B9E\u73B0\u539F\u7406\u662F\u4EC0\u4E48\uFF1F"})}),(0,s.jsxs)("div",{className:"card__body",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"A:"})," Spring AOP\u57FA\u4E8E\u52A8\u6001\u4EE3\u7406\u5B9E\u73B0\uFF1A"]}),(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"JDK\u52A8\u6001\u4EE3\u7406"}),"\uFF1A\u9002\u7528\u4E8E\u5B9E\u73B0\u4E86\u63A5\u53E3\u7684\u76EE\u6807\u5BF9\u8C61"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"CGLIB\u4EE3\u7406"}),"\uFF1A\u9002\u7528\u4E8E\u6CA1\u6709\u5B9E\u73B0\u63A5\u53E3\u7684\u76EE\u6807\u5BF9\u8C61"]}),(0,s.jsx)("li",{children:"Spring\u6839\u636E\u76EE\u6807\u5BF9\u8C61\u7C7B\u578B\u81EA\u52A8\u9009\u62E9\u4EE3\u7406\u65B9\u5F0F"}),(0,s.jsx)("li",{children:"\u901A\u8FC7\u4EE3\u7406\u5BF9\u8C61\u62E6\u622A\u65B9\u6CD5\u8C03\u7528\uFF0C\u5728\u65B9\u6CD5\u6267\u884C\u524D\u540E\u63D2\u5165\u6A2A\u5207\u903B\u8F91"})]}),(0,s.jsx)("p",{children:"\u5B9E\u73B0\u6D41\u7A0B\uFF1A"}),(0,s.jsxs)("ol",{children:[(0,s.jsx)("li",{children:"\u89E3\u6790\u5207\u9762\u53CA\u5207\u70B9\u8868\u8FBE\u5F0F"}),(0,s.jsx)("li",{children:"\u521B\u5EFA\u76EE\u6807\u5BF9\u8C61\u7684\u4EE3\u7406"}),(0,s.jsx)("li",{children:"\u8C03\u7528\u4EE3\u7406\u5BF9\u8C61\u7684\u65B9\u6CD5\u65F6\uFF0C\u901A\u8FC7\u62E6\u622A\u5668\u94FE\u6267\u884C\u901A\u77E5\u548C\u76EE\u6807\u65B9\u6CD5"})]})]})]})}),(0,s.jsx)(c.A,{value:"q3",label:"\u5207\u70B9\u8868\u8FBE\u5F0F",children:(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card__header",children:(0,s.jsx)("h4",{children:"Q: \u5E38\u7528\u7684\u5207\u70B9\u8868\u8FBE\u5F0F\u6709\u54EA\u4E9B\uFF1F"})}),(0,s.jsxs)("div",{className:"card__body",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"A:"})," \u5E38\u7528\u7684\u5207\u70B9\u8868\u8FBE\u5F0F\u5305\u62EC\uFF1A"]}),(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:[(0,s.jsxs)("code",{children:["execution(* com.example.service.",(0,s.jsx)(n.em,{children:"."}),"(..))"]}),"\uFF1A\u5339\u914Dservice\u5305\u4E2D\u7684\u6240\u6709\u65B9\u6CD5"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"@annotation(org.springframework.transaction.annotation.Transactional)"}),"\uFF1A\u5339\u914D\u5E26\u6709@Transactional\u6CE8\u89E3\u7684\u65B9\u6CD5"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"within(com.example.service.*)"}),"\uFF1A\u5339\u914Dservice\u5305\u4E2D\u6240\u6709\u7C7B\u7684\u6240\u6709\u65B9\u6CD5"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"this(com.example.service.UserService)"}),"\uFF1A\u5339\u914D\u4EE3\u7406\u5BF9\u8C61\u4E3AUserService\u7684\u8FDE\u63A5\u70B9"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"target(com.example.service.UserService)"}),"\uFF1A\u5339\u914D\u76EE\u6807\u5BF9\u8C61\u4E3AUserService\u7684\u8FDE\u63A5\u70B9"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"args(String, int)"}),"\uFF1A\u5339\u914D\u63A5\u53D7String\u548Cint\u53C2\u6570\u7684\u65B9\u6CD5"]})]}),(0,s.jsx)("p",{children:"\u8FD9\u4E9B\u8868\u8FBE\u5F0F\u53EF\u4EE5\u901A\u8FC7&&\uFF08and\uFF09\u3001||\uFF08or\uFF09\u3001!\uFF08not\uFF09\u7EC4\u5408\u4F7F\u7528\uFF0C\u5F62\u6210\u66F4\u590D\u6742\u7684\u5339\u914D\u89C4\u5219\u3002"})]})]})})]}),"\n",(0,s.jsx)(n.h3,{id:"72-\u5B9E\u8DF5\u9898",children:"7.2 \u5B9E\u8DF5\u9898"}),"\n",(0,s.jsxs)(l.A,{children:[(0,s.jsx)(c.A,{value:"q4",label:"\u65E5\u5FD7\u5207\u9762",default:!0,children:(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card__header",children:(0,s.jsx)("h4",{children:"Q: \u5982\u4F55\u5B9E\u73B0\u4E00\u4E2A\u65E5\u5FD7\u5207\u9762\uFF1F"})}),(0,s.jsxs)("div",{className:"card__body",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"A:"})," \u5B9E\u73B0\u65E5\u5FD7\u5207\u9762\u7684\u6B65\u9AA4\uFF1A"]}),(0,s.jsxs)("ol",{children:[(0,s.jsxs)("li",{children:["\u521B\u5EFA\u5207\u9762\u7C7B\u5E76\u4F7F\u7528",(0,s.jsx)("code",{children:"@Aspect"}),"\u6CE8\u89E3"]}),(0,s.jsx)("li",{children:"\u5B9A\u4E49\u5207\u70B9\u8868\u8FBE\u5F0F"}),(0,s.jsxs)("li",{children:["\u4F7F\u7528\u901A\u77E5\u6CE8\u89E3\uFF08\u5982",(0,s.jsx)("code",{children:"@Around"}),"\uFF09\u5B9E\u73B0\u65E5\u5FD7\u903B\u8F91"]}),(0,s.jsx)("li",{children:"\u5728\u5207\u9762\u4E2D\u8BB0\u5F55\u65B9\u6CD5\u6267\u884C\u65F6\u95F4\u3001\u53C2\u6570\u3001\u8FD4\u56DE\u503C\u7B49\u4FE1\u606F"})]}),(0,s.jsx)("p",{children:(0,s.jsx)("strong",{children:"\u6838\u5FC3\u4EE3\u7801\u793A\u4F8B\uFF1A"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'@Aspect\n@Component\npublic class LoggingAspect {\n  @Around("execution(* com.example.service.*.*(..))")\n  public Object logMethod(ProceedingJoinPoint joinPoint) throws Throwable {\n      String methodName = joinPoint.getSignature().getName();\n      log.info("\u5F00\u59CB\u6267\u884C: {}", methodName);\n      long start = System.currentTimeMillis();\n      try {\n          Object result = joinPoint.proceed();\n          log.info("\u6267\u884C\u5B8C\u6210: {}, \u8017\u65F6: {}ms", methodName, System.currentTimeMillis() - start);\n          return result;\n      } catch (Exception e) {\n          log.error("\u6267\u884C\u5F02\u5E38: {}, \u5F02\u5E38: {}", methodName, e.getMessage());\n          throw e;\n      }\n  }\n}\n'})})]})]})}),(0,s.jsx)(c.A,{value:"q5",label:"AOP\u901A\u77E5\u7C7B\u578B",children:(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card__header",children:(0,s.jsx)("h4",{children:"Q: AOP\u6709\u54EA\u4E9B\u901A\u77E5\u7C7B\u578B\uFF1F"})}),(0,s.jsxs)("div",{className:"card__body",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"A:"})," Spring AOP\u63D0\u4F9B\u4E94\u79CD\u901A\u77E5\u7C7B\u578B\uFF1A"]}),(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"@Before"}),"\uFF1A\u524D\u7F6E\u901A\u77E5\uFF0C\u5728\u65B9\u6CD5\u6267\u884C\u524D\u6267\u884C"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"@After"}),"\uFF1A\u540E\u7F6E\u901A\u77E5\uFF0C\u5728\u65B9\u6CD5\u6267\u884C\u540E\u6267\u884C"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"@Around"}),"\uFF1A\u73AF\u7ED5\u901A\u77E5\uFF0C\u53EF\u4EE5\u63A7\u5236\u65B9\u6CD5\u6267\u884C"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"@AfterReturning"}),"\uFF1A\u8FD4\u56DE\u901A\u77E5\uFF0C\u5728\u65B9\u6CD5\u6B63\u5E38\u8FD4\u56DE\u540E\u6267\u884C"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"@AfterThrowing"}),"\uFF1A\u5F02\u5E38\u901A\u77E5\uFF0C\u5728\u65B9\u6CD5\u629B\u51FA\u5F02\u5E38\u540E\u6267\u884C"]})]}),(0,s.jsx)("p",{children:(0,s.jsx)("strong",{children:"\u901A\u77E5\u7C7B\u578B\u9009\u62E9\u539F\u5219\uFF1A"})}),(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"\u9700\u8981\u5728\u65B9\u6CD5\u6267\u884C\u524D\u540E\u90FD\u6DFB\u52A0\u903B\u8F91\uFF0C\u9009\u62E9\u73AF\u7ED5\u901A\u77E5"}),(0,s.jsx)("li",{children:"\u53EA\u9700\u8981\u5728\u65B9\u6CD5\u6267\u884C\u524D\u6DFB\u52A0\u903B\u8F91\uFF0C\u9009\u62E9\u524D\u7F6E\u901A\u77E5"}),(0,s.jsx)("li",{children:"\u53EA\u9700\u8981\u5728\u65B9\u6CD5\u6267\u884C\u540E\u6DFB\u52A0\u903B\u8F91\uFF0C\u9009\u62E9\u540E\u7F6E\u901A\u77E5\u6216\u8FD4\u56DE\u901A\u77E5"}),(0,s.jsx)("li",{children:"\u9700\u8981\u5904\u7406\u65B9\u6CD5\u6267\u884C\u5F02\u5E38\uFF0C\u9009\u62E9\u5F02\u5E38\u901A\u77E5\u6216\u73AF\u7ED5\u901A\u77E5"}),(0,s.jsx)("li",{children:"\u4F18\u5148\u4F7F\u7528\u6700\u7B80\u5355\u7684\u901A\u77E5\u7C7B\u578B\uFF0C\u907F\u514D\u4F7F\u7528\u8FC7\u4E8E\u590D\u6742\u7684\u73AF\u7ED5\u901A\u77E5"})]})]})]})})]}),"\n",(0,s.jsx)(n.h3,{id:"73-\u9AD8\u7EA7\u9898",children:"7.3 \u9AD8\u7EA7\u9898"}),"\n",(0,s.jsxs)(l.A,{children:[(0,s.jsx)(c.A,{value:"q6",label:"Spring AOP vs AspectJ",default:!0,children:(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card__header",children:(0,s.jsx)("h4",{children:"Q: Spring AOP\u548CAspectJ\u6709\u4EC0\u4E48\u533A\u522B\uFF1F"})}),(0,s.jsxs)("div",{className:"card__body",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"A:"})," \u4E3B\u8981\u533A\u522B\u5305\u62EC\uFF1A"]}),(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"\u6BD4\u8F83\u9879"}),(0,s.jsx)("th",{children:"Spring AOP"}),(0,s.jsx)("th",{children:"AspectJ"})]})}),(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"\u5B9E\u73B0\u65B9\u5F0F"}),(0,s.jsx)("td",{children:"\u57FA\u4E8E\u52A8\u6001\u4EE3\u7406"}),(0,s.jsx)("td",{children:"\u57FA\u4E8E\u5B57\u8282\u7801\u589E\u5F3A"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"\u7EC7\u5165\u65F6\u673A"}),(0,s.jsx)("td",{children:"\u8FD0\u884C\u65F6\u7EC7\u5165"}),(0,s.jsx)("td",{children:"\u7F16\u8BD1\u65F6\u3001\u7F16\u8BD1\u540E\u3001\u52A0\u8F7D\u65F6\u7EC7\u5165"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"\u6027\u80FD"}),(0,s.jsx)("td",{children:"\u8F83\u6162"}),(0,s.jsx)("td",{children:"\u66F4\u597D"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"\u529F\u80FD"}),(0,s.jsx)("td",{children:"\u6709\u9650"}),(0,s.jsx)("td",{children:"\u66F4\u5F3A\u5927"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"\u5207\u70B9\u8868\u8FBE\u5F0F"}),(0,s.jsx)("td",{children:"\u652F\u6301\u90E8\u5206AspectJ\u8868\u8FBE\u5F0F"}),(0,s.jsx)("td",{children:"\u652F\u6301\u5B8C\u6574\u7684\u5207\u70B9\u8868\u8FBE\u5F0F\u8BED\u8A00"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"\u8FDE\u63A5\u70B9\u7C7B\u578B"}),(0,s.jsx)("td",{children:"\u4EC5\u65B9\u6CD5\u6267\u884C"}),(0,s.jsx)("td",{children:"\u65B9\u6CD5\u8C03\u7528\u3001\u5B57\u6BB5\u8BBF\u95EE\u3001\u6784\u9020\u5668\u8C03\u7528\u7B49"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"\u6613\u7528\u6027"}),(0,s.jsx)("td",{children:"\u7B80\u5355\u6613\u7528"}),(0,s.jsx)("td",{children:"\u66F4\u590D\u6742\u4F46\u529F\u80FD\u5F3A\u5927"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"\u5E94\u7528\u573A\u666F"}),(0,s.jsx)("td",{children:"\u7B80\u5355\u5E94\u7528"}),(0,s.jsx)("td",{children:"\u590D\u6742\u5E94\u7528"})]})]})]})]})]})}),(0,s.jsx)(c.A,{value:"q7",label:"AOP\u81EA\u8C03\u7528\u95EE\u9898",children:(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card__header",children:(0,s.jsx)("h4",{children:"Q: \u5982\u4F55\u89E3\u51B3AOP\u4E2D\u7684\u81EA\u8C03\u7528\u95EE\u9898\uFF1F"})}),(0,s.jsxs)("div",{className:"card__body",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"A:"})," \u81EA\u8C03\u7528\u95EE\u9898\u662F\u6307\u540C\u4E00\u4E2A\u7C7B\u4E2D\u7684\u65B9\u6CD5\u8C03\u7528\u4E0D\u4F1A\u7ECF\u8FC7\u4EE3\u7406\u3002\u89E3\u51B3\u65B9\u6848\uFF1A"]}),(0,s.jsx)("p",{children:(0,s.jsx)("strong",{children:"1. \u4F7F\u7528AopContext"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"@Service\npublic class UserService {\n  public void createUser(User user) {\n      userRepository.save(user);\n      // \u4F7F\u7528AopContext\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61\n      ((UserService) AopContext.currentProxy()).sendEmail(user);\n  }\n  \n  @Transactional\n  public void sendEmail(User user) {\n      // \u53D1\u9001\u90AE\u4EF6\u7684\u4E8B\u52A1\u65B9\u6CD5\n  }\n}\n"})}),(0,s.jsxs)("p",{children:["\u6CE8\u610F\uFF1A\u9700\u8981\u5728\u914D\u7F6E\u4E2D\u542F\u7528",(0,s.jsx)("code",{children:"@EnableAspectJAutoProxy(exposeProxy = true)"})]}),(0,s.jsx)("p",{children:(0,s.jsx)("strong",{children:"2. \u6CE8\u5165\u81EA\u8EAB\u4EE3\u7406"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"@Service\npublic class UserService {\n  @Autowired\n  private UserService self; // \u6CE8\u5165\u7684\u662F\u4EE3\u7406\u5BF9\u8C61\n  \n  public void createUser(User user) {\n      userRepository.save(user);\n      self.sendEmail(user); // \u901A\u8FC7\u4EE3\u7406\u8C03\u7528\n  }\n  \n  @Transactional\n  public void sendEmail(User user) {\n      // \u53D1\u9001\u90AE\u4EF6\u7684\u4E8B\u52A1\u65B9\u6CD5\n  }\n}\n"})}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"3. \u65B9\u6CD5\u62BD\u53D6"}),"\uFF1A\u5C06\u65B9\u6CD5\u79FB\u5230\u53E6\u4E00\u4E2A\u7C7B\u4E2D"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"4. \u4F7F\u7528AspectJ"}),"\uFF1A\u4F7F\u7528AspectJ\u7684\u7F16\u8BD1\u65F6\u6216\u52A0\u8F7D\u65F6\u7EC7\u5165\uFF0C\u53EF\u4EE5\u89E3\u51B3\u81EA\u8C03\u7528\u95EE\u9898"]})]})]})})]}),"\n",(0,s.jsx)(n.admonition,{title:"AOP\u5B66\u4E60\u8981\u70B9",type:"tip",children:(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u7406\u89E3\u6838\u5FC3\u6982\u5FF5"}),"\uFF1A\u638C\u63E1Aspect\u3001Pointcut\u3001Advice\u7B49\u6982\u5FF5"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u719F\u6089\u5207\u70B9\u8868\u8FBE\u5F0F"}),"\uFF1A\u5B66\u4F1A\u7F16\u5199\u5404\u79CD\u5207\u70B9\u8868\u8FBE\u5F0F"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u638C\u63E1\u901A\u77E5\u7C7B\u578B"}),"\uFF1A\u4E86\u89E3\u4E94\u79CD\u901A\u77E5\u7684\u4F7F\u7528\u573A\u666F"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5B66\u4F1A\u5B9E\u9645\u5E94\u7528"}),"\uFF1A\u638C\u63E1\u65E5\u5FD7\u3001\u7F13\u5B58\u3001\u4E8B\u52A1\u7B49\u5207\u9762\u5B9E\u73B0"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u4E86\u89E3\u6027\u80FD\u4F18\u5316"}),"\uFF1A\u5B66\u4F1A\u6027\u80FD\u76D1\u63A7\u548C\u4F18\u5316\u6280\u5DE7"]}),"\n"]})}),"\n",(0,s.jsx)(n.mermaid,{value:"mindmap\n  root((Spring AOP))\n    \u6838\u5FC3\u6982\u5FF5\n      \u5207\u9762(Aspect)\n      \u8FDE\u63A5\u70B9(Join Point)\n      \u5207\u70B9(Pointcut)\n      \u901A\u77E5(Advice)\n      \u4EE3\u7406(Proxy)\n      \u7EC7\u5165(Weaving)\n    \u5B9E\u73B0\u539F\u7406\n      JDK\u52A8\u6001\u4EE3\u7406\n      CGLIB\u4EE3\u7406\n      \u4EE3\u7406\u9009\u62E9\u903B\u8F91\n      \u62E6\u622A\u5668\u94FE\n    \u5207\u70B9\u8868\u8FBE\u5F0F\n      execution\n      within\n      this/target\n      args\n      @annotation\n      \u7EC4\u5408\u8868\u8FBE\u5F0F\n    \u901A\u77E5\u7C7B\u578B\n      \u524D\u7F6E\u901A\u77E5(@Before)\n      \u540E\u7F6E\u901A\u77E5(@After)\n      \u73AF\u7ED5\u901A\u77E5(@Around)\n      \u8FD4\u56DE\u901A\u77E5(@AfterReturning)\n      \u5F02\u5E38\u901A\u77E5(@AfterThrowing)\n    \u5E94\u7528\u573A\u666F\n      \u65E5\u5FD7\u8BB0\u5F55\n      \u6027\u80FD\u76D1\u63A7\n      \u4E8B\u52A1\u7BA1\u7406\n      \u5B89\u5168\u63A7\u5236\n      \u7F13\u5B58\u7BA1\u7406\n    \u9AD8\u7EA7\u7279\u6027\n      \u81EA\u8C03\u7528\u95EE\u9898\n      Spring AOP vs AspectJ\n      \u5207\u9762\u4F18\u5148\u7EA7\n      \u4EE3\u7406\u9650\u5236"}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.p,{children:"\u901A\u8FC7\u672C\u7AE0\u7684\u5B66\u4E60\uFF0C\u4F60\u5E94\u8BE5\u5DF2\u7ECF\u638C\u63E1\u4E86Spring AOP\u7684\u6838\u5FC3\u6982\u5FF5\u3001\u5B9E\u73B0\u539F\u7406\u548C\u5B9E\u9645\u5E94\u7528\u3002AOP\u662FSpring\u6846\u67B6\u7684\u91CD\u8981\u7279\u6027\uFF0C\u638C\u63E1AOP\u53EF\u4EE5\u5E2E\u52A9\u4F60\u7F16\u5199\u66F4\u52A0\u6A21\u5757\u5316\u3001\u53EF\u7EF4\u62A4\u7684\u4EE3\u7801\u3002\u5728\u5B9E\u9645\u9879\u76EE\u4E2D\uFF0C\u5408\u7406\u4F7F\u7528AOP\u53EF\u4EE5\u5927\u5927\u51CF\u5C11\u91CD\u590D\u4EE3\u7801\uFF0C\u63D0\u9AD8\u5F00\u53D1\u6548\u7387\u3002"}),"\n",(0,s.jsx)(n.h2,{id:"8-\u5B9E\u7528\u793A\u4F8B",children:"8. \u5B9E\u7528\u793A\u4F8B"}),"\n",(0,s.jsx)(n.h3,{id:"81-\u6027\u80FD\u65E5\u5FD7\u8BB0\u5F55\u5668",children:"8.1 \u6027\u80FD\u65E5\u5FD7\u8BB0\u5F55\u5668"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="\u6027\u80FD\u65E5\u5FD7\u8BB0\u5F55\u5668"',children:'@Aspect\n@Component\n@Slf4j\npublic class LoggingAspect {\n    @Around("execution(* com.example.service.*.*(..))")\n    public Object logMethod(ProceedingJoinPoint joinPoint) throws Throwable {\n        String methodName = joinPoint.getSignature().getName();\n        log.info("\u5F00\u59CB\u6267\u884C: {}", methodName);\n        long start = System.currentTimeMillis();\n        try {\n            Object result = joinPoint.proceed();\n            log.info("\u6267\u884C\u5B8C\u6210: {}, \u8017\u65F6: {}ms", methodName, System.currentTimeMillis() - start);\n            return result;\n        } catch (Exception e) {\n            log.error("\u6267\u884C\u5F02\u5E38: {}, \u5F02\u5E38: {}", methodName, e.getMessage());\n            throw e;\n        }\n    }\n}\n'})})]})}function u(e={}){let{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(j,{...e})}):j(e)}}}]);