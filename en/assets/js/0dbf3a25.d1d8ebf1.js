"use strict";(self.webpackChunkfullstack_dev_blog=self.webpackChunkfullstack_dev_blog||[]).push([["91949"],{74588:function(n,s,e){e.r(s),e.d(s,{metadata:()=>l,default:()=>a,frontMatter:()=>d,contentTitle:()=>c,toc:()=>x,assets:()=>h});var l=JSON.parse('{"id":"interview/mysql-interview","title":"MySQL \u9762\u8BD5\u9898\u96C6","description":"\u603B\u9898\u6570 \u7D22\u5F15\u3001\u4E8B\u52A1\u3001\u9501\u673A\u5236 |  \u96BE\u5EA6\u5206\u5E03: \u4E2D\u9AD8\u7EA7","source":"@site/docs/interview/mysql-interview.md","sourceDirName":"interview","slug":"/interview/mysql-interview","permalink":"/en/docs/interview/mysql-interview","draft":false,"unlisted":false,"editUrl":"https://github.com/MasterLiu93/blog-web/tree/main/docs/interview/mysql-interview.md","tags":[],"version":"current","lastUpdatedBy":"laby","lastUpdatedAt":1763643037000,"frontMatter":{}}'),r=e(74848),i=e(28453);let d={},c="MySQL \u9762\u8BD5\u9898\u96C6",h={},x=[{value:"\u9762\u8BD5\u9898\u76EE\u5217\u8868",id:"\u9762\u8BD5\u9898\u76EE\u5217\u8868",level:2},{value:"1. MySQL\u7684\u5B58\u50A8\u5F15\u64CE\u6709\u54EA\u4E9B\uFF1F\u5B83\u4EEC\u6709\u4EC0\u4E48\u533A\u522B\uFF1F",id:"1-mysql\u7684\u5B58\u50A8\u5F15\u64CE\u6709\u54EA\u4E9B\u5B83\u4EEC\u6709\u4EC0\u4E48\u533A\u522B",level:3},{value:"2. MySQL\u4E2D\u7684\u7D22\u5F15\u7C7B\u578B\u6709\u54EA\u4E9B\uFF1F\u5982\u4F55\u9009\u62E9\u5408\u9002\u7684\u7D22\u5F15\uFF1F",id:"2-mysql\u4E2D\u7684\u7D22\u5F15\u7C7B\u578B\u6709\u54EA\u4E9B\u5982\u4F55\u9009\u62E9\u5408\u9002\u7684\u7D22\u5F15",level:3},{value:"3. \u4EC0\u4E48\u662F\u56DE\u8868\u67E5\u8BE2\uFF1F\u4EC0\u4E48\u662F\u8986\u76D6\u7D22\u5F15\uFF1F",id:"3-\u4EC0\u4E48\u662F\u56DE\u8868\u67E5\u8BE2\u4EC0\u4E48\u662F\u8986\u76D6\u7D22\u5F15",level:3},{value:"4. MySQL\u7684\u4E8B\u52A1\u7279\u6027\uFF08ACID\uFF09\u662F\u4EC0\u4E48\uFF1F",id:"4-mysql\u7684\u4E8B\u52A1\u7279\u6027acid\u662F\u4EC0\u4E48",level:3},{value:"5. MySQL\u7684\u56DB\u79CD\u9694\u79BB\u7EA7\u522B\u662F\u4EC0\u4E48\uFF1F\u5206\u522B\u4F1A\u4EA7\u751F\u4EC0\u4E48\u95EE\u9898\uFF1F",id:"5-mysql\u7684\u56DB\u79CD\u9694\u79BB\u7EA7\u522B\u662F\u4EC0\u4E48\u5206\u522B\u4F1A\u4EA7\u751F\u4EC0\u4E48\u95EE\u9898",level:3},{value:"6. \u4EC0\u4E48\u662FMVCC\uFF1F\u5B83\u662F\u5982\u4F55\u5DE5\u4F5C\u7684\uFF1F",id:"6-\u4EC0\u4E48\u662Fmvcc\u5B83\u662F\u5982\u4F55\u5DE5\u4F5C\u7684",level:3},{value:"7. MySQL\u4E2D\u7684\u9501\u6709\u54EA\u4E9B\u7C7B\u578B\uFF1F",id:"7-mysql\u4E2D\u7684\u9501\u6709\u54EA\u4E9B\u7C7B\u578B",level:3},{value:"8. \u4EC0\u4E48\u662F\u6B7B\u9501\uFF1F\u5982\u4F55\u907F\u514D\u6B7B\u9501\uFF1F",id:"8-\u4EC0\u4E48\u662F\u6B7B\u9501\u5982\u4F55\u907F\u514D\u6B7B\u9501",level:3},{value:"9. MySQL\u7684\u4E3B\u4ECE\u590D\u5236\u539F\u7406\u662F\u4EC0\u4E48\uFF1F",id:"9-mysql\u7684\u4E3B\u4ECE\u590D\u5236\u539F\u7406\u662F\u4EC0\u4E48",level:3},{value:"10. \u5982\u4F55\u4F18\u5316MySQL\u67E5\u8BE2\u6027\u80FD\uFF1F",id:"10-\u5982\u4F55\u4F18\u5316mysql\u67E5\u8BE2\u6027\u80FD",level:3},{value:"11. \u4EC0\u4E48\u662F\u6162\u67E5\u8BE2\u65E5\u5FD7\uFF1F\u5982\u4F55\u4F7F\u7528\uFF1F",id:"11-\u4EC0\u4E48\u662F\u6162\u67E5\u8BE2\u65E5\u5FD7\u5982\u4F55\u4F7F\u7528",level:3},{value:"12. Explain\u6267\u884C\u8BA1\u5212\u5982\u4F55\u5206\u6790\uFF1F",id:"12-explain\u6267\u884C\u8BA1\u5212\u5982\u4F55\u5206\u6790",level:3},{value:"13. MySQL\u7684\u5206\u533A\u8868\u662F\u4EC0\u4E48\uFF1F",id:"13-mysql\u7684\u5206\u533A\u8868\u662F\u4EC0\u4E48",level:3},{value:"14. \u4EC0\u4E48\u662F\u8868\u9501\u548C\u884C\u9501\uFF1F",id:"14-\u4EC0\u4E48\u662F\u8868\u9501\u548C\u884C\u9501",level:3},{value:"15. InnoDB\u7684Buffer Pool\u662F\u4EC0\u4E48\uFF1F",id:"15-innodb\u7684buffer-pool\u662F\u4EC0\u4E48",level:3},{value:"16. \u4EC0\u4E48\u662Fbinlog\u3001redo log\u548Cundo log\uFF1F",id:"16-\u4EC0\u4E48\u662Fbinlogredo-log\u548Cundo-log",level:3},{value:"17. MySQL\u5982\u4F55\u5B9E\u73B0\u9AD8\u53EF\u7528\uFF1F",id:"17-mysql\u5982\u4F55\u5B9E\u73B0\u9AD8\u53EF\u7528",level:3},{value:"18. \u4EC0\u4E48\u662F\u8BFB\u5199\u5206\u79BB\uFF1F",id:"18-\u4EC0\u4E48\u662F\u8BFB\u5199\u5206\u79BB",level:3},{value:"19. \u5982\u4F55\u8FDB\u884CMySQL\u5907\u4EFD\u548C\u6062\u590D\uFF1F",id:"19-\u5982\u4F55\u8FDB\u884Cmysql\u5907\u4EFD\u548C\u6062\u590D",level:3},{value:"20. MySQL\u7684\u5B57\u7B26\u96C6\u548C\u6392\u5E8F\u89C4\u5219\u662F\u4EC0\u4E48\uFF1F",id:"20-mysql\u7684\u5B57\u7B26\u96C6\u548C\u6392\u5E8F\u89C4\u5219\u662F\u4EC0\u4E48",level:3},{value:"21. \u4EC0\u4E48\u662F\u8054\u5408\u7D22\u5F15\u7684\u6700\u5DE6\u524D\u7F00\u539F\u5219\uFF1F",id:"21-\u4EC0\u4E48\u662F\u8054\u5408\u7D22\u5F15\u7684\u6700\u5DE6\u524D\u7F00\u539F\u5219",level:3},{value:"22. \u4E3A\u4EC0\u4E48InnoDB\u4F7F\u7528B+\u6811\u800C\u4E0D\u662FB\u6811\uFF1F",id:"22-\u4E3A\u4EC0\u4E48innodb\u4F7F\u7528b\u6811\u800C\u4E0D\u662Fb\u6811",level:3},{value:"23. MySQL\u7684JOIN\u67E5\u8BE2\u6709\u54EA\u4E9B\u7C7B\u578B\uFF1F",id:"23-mysql\u7684join\u67E5\u8BE2\u6709\u54EA\u4E9B\u7C7B\u578B",level:3},{value:"24. \u4EC0\u4E48\u662F\u4E34\u65F6\u8868\uFF1F",id:"24-\u4EC0\u4E48\u662F\u4E34\u65F6\u8868",level:3},{value:"25. \u5982\u4F55\u5904\u7406\u5927\u8868\u7684DDL\u64CD\u4F5C\uFF1F",id:"25-\u5982\u4F55\u5904\u7406\u5927\u8868\u7684ddl\u64CD\u4F5C",level:3},{value:"26. MySQL\u7684\u5206\u5E93\u5206\u8868\u7B56\u7565\u6709\u54EA\u4E9B\uFF1F",id:"26-mysql\u7684\u5206\u5E93\u5206\u8868\u7B56\u7565\u6709\u54EA\u4E9B",level:3},{value:"27. \u4EC0\u4E48\u662FSQL\u6CE8\u5165\uFF1F\u5982\u4F55\u9632\u6B62\uFF1F",id:"27-\u4EC0\u4E48\u662Fsql\u6CE8\u5165\u5982\u4F55\u9632\u6B62",level:3},{value:"28. MySQL\u7684\u5B58\u50A8\u8FC7\u7A0B\u548C\u51FD\u6570\u6709\u4EC0\u4E48\u533A\u522B\uFF1F",id:"28-mysql\u7684\u5B58\u50A8\u8FC7\u7A0B\u548C\u51FD\u6570\u6709\u4EC0\u4E48\u533A\u522B",level:3},{value:"29. \u4EC0\u4E48\u662F\u89E6\u53D1\u5668\uFF1F",id:"29-\u4EC0\u4E48\u662F\u89E6\u53D1\u5668",level:3},{value:"30. MySQL\u7684\u89C6\u56FE\u662F\u4EC0\u4E48\uFF1F",id:"30-mysql\u7684\u89C6\u56FE\u662F\u4EC0\u4E48",level:3},{value:"31. \u5982\u4F55\u8FDB\u884CMySQL\u6027\u80FD\u76D1\u63A7\uFF1F",id:"31-\u5982\u4F55\u8FDB\u884Cmysql\u6027\u80FD\u76D1\u63A7",level:3},{value:"32. \u4EC0\u4E48\u662FMySQL\u7684\u8FDE\u63A5\u6C60\uFF1F",id:"32-\u4EC0\u4E48\u662Fmysql\u7684\u8FDE\u63A5\u6C60",level:3},{value:"33. InnoDB\u548CMyISAM\u7684\u7D22\u5F15\u5B9E\u73B0\u6709\u4EC0\u4E48\u533A\u522B\uFF1F",id:"33-innodb\u548Cmyisam\u7684\u7D22\u5F15\u5B9E\u73B0\u6709\u4EC0\u4E48\u533A\u522B",level:3},{value:"34. \u4EC0\u4E48\u662F\u81EA\u589E\u4E3B\u952E\uFF1F\u4E3A\u4EC0\u4E48\u63A8\u8350\u4F7F\u7528\uFF1F",id:"34-\u4EC0\u4E48\u662F\u81EA\u589E\u4E3B\u952E\u4E3A\u4EC0\u4E48\u63A8\u8350\u4F7F\u7528",level:3},{value:"35. MySQL\u7684COUNT(*)\u548CCOUNT(1)\u6709\u4EC0\u4E48\u533A\u522B\uFF1F",id:"35-mysql\u7684count\u548Ccount1\u6709\u4EC0\u4E48\u533A\u522B",level:3},{value:"36. \u5982\u4F55\u5904\u7406MySQL\u7684\u5927\u6570\u636E\u91CF\u5206\u9875\uFF1F",id:"36-\u5982\u4F55\u5904\u7406mysql\u7684\u5927\u6570\u636E\u91CF\u5206\u9875",level:3},{value:"37. \u4EC0\u4E48\u662FMySQL\u7684\u534A\u540C\u6B65\u590D\u5236\uFF1F",id:"37-\u4EC0\u4E48\u662Fmysql\u7684\u534A\u540C\u6B65\u590D\u5236",level:3},{value:"38. \u5982\u4F55\u4F18\u5316INSERT\u8BED\u53E5\uFF1F",id:"38-\u5982\u4F55\u4F18\u5316insert\u8BED\u53E5",level:3},{value:"39. MySQL\u7684GROUP BY\u548CHAVING\u6709\u4EC0\u4E48\u533A\u522B\uFF1F",id:"39-mysql\u7684group-by\u548Chaving\u6709\u4EC0\u4E48\u533A\u522B",level:3},{value:"40. \u4EC0\u4E48\u662F\u5916\u952E\u7EA6\u675F\uFF1F",id:"40-\u4EC0\u4E48\u662F\u5916\u952E\u7EA6\u675F",level:3},{value:"41-60\u9898\u7B80\u8981\u7B54\u6848",id:"41-60\u9898\u7B80\u8981\u7B54\u6848",level:3},{value:"41. MySQL\u7684UNION\u548CUNION ALL\u6709\u4EC0\u4E48\u533A\u522B\uFF1F",id:"41-mysql\u7684union\u548Cunion-all\u6709\u4EC0\u4E48\u533A\u522B",level:3},{value:"42. \u5982\u4F55\u67E5\u770BMySQL\u7684\u6267\u884C\u8BA1\u5212\uFF1F",id:"42-\u5982\u4F55\u67E5\u770Bmysql\u7684\u6267\u884C\u8BA1\u5212",level:3},{value:"43. \u4EC0\u4E48\u662FMySQL\u7684\u5168\u6587\u7D22\u5F15\uFF1F",id:"43-\u4EC0\u4E48\u662Fmysql\u7684\u5168\u6587\u7D22\u5F15",level:3},{value:"44. \u5982\u4F55\u5904\u7406MySQL\u7684\u4E71\u7801\u95EE\u9898\uFF1F",id:"44-\u5982\u4F55\u5904\u7406mysql\u7684\u4E71\u7801\u95EE\u9898",level:3},{value:"45. MySQL\u7684LEFT JOIN\u548CRIGHT JOIN\u6709\u4EC0\u4E48\u533A\u522B\uFF1F",id:"45-mysql\u7684left-join\u548Cright-join\u6709\u4EC0\u4E48\u533A\u522B",level:3},{value:"46. \u4EC0\u4E48\u662FMySQL\u7684\u590D\u5408\u7D22\u5F15\uFF1F",id:"46-\u4EC0\u4E48\u662Fmysql\u7684\u590D\u5408\u7D22\u5F15",level:3},{value:"47. \u5982\u4F55\u8FDB\u884CMySQL\u7684\u5BB9\u91CF\u89C4\u5212\uFF1F",id:"47-\u5982\u4F55\u8FDB\u884Cmysql\u7684\u5BB9\u91CF\u89C4\u5212",level:3},{value:"48. \u4EC0\u4E48\u662FMySQL\u7684\u67E5\u8BE2\u7F13\u5B58\uFF1F",id:"48-\u4EC0\u4E48\u662Fmysql\u7684\u67E5\u8BE2\u7F13\u5B58",level:3},{value:"49. \u5982\u4F55\u4F18\u5316MySQL\u7684\u914D\u7F6E\u53C2\u6570\uFF1F",id:"49-\u5982\u4F55\u4F18\u5316mysql\u7684\u914D\u7F6E\u53C2\u6570",level:3},{value:"50. \u4EC0\u4E48\u662FMySQL\u7684\u4E8B\u4EF6\u8C03\u5EA6\u5668\uFF1F",id:"50-\u4EC0\u4E48\u662Fmysql\u7684\u4E8B\u4EF6\u8C03\u5EA6\u5668",level:3},{value:"51. \u5982\u4F55\u5904\u7406MySQL\u7684\u9501\u7B49\u5F85\u8D85\u65F6\uFF1F",id:"51-\u5982\u4F55\u5904\u7406mysql\u7684\u9501\u7B49\u5F85\u8D85\u65F6",level:3},{value:"52. \u4EC0\u4E48\u662FMySQL\u7684\u6E38\u6807\uFF1F",id:"52-\u4EC0\u4E48\u662Fmysql\u7684\u6E38\u6807",level:3},{value:"53. \u5982\u4F55\u8FDB\u884CMySQL\u7684\u7248\u672C\u5347\u7EA7\uFF1F",id:"53-\u5982\u4F55\u8FDB\u884Cmysql\u7684\u7248\u672C\u5347\u7EA7",level:3},{value:"54. \u4EC0\u4E48\u662FMySQL\u7684\u5206\u5E03\u5F0F\u4E8B\u52A1\uFF1F",id:"54-\u4EC0\u4E48\u662Fmysql\u7684\u5206\u5E03\u5F0F\u4E8B\u52A1",level:3},{value:"55. \u5982\u4F55\u5904\u7406MySQL\u7684\u4E3B\u952E\u51B2\u7A81\uFF1F",id:"55-\u5982\u4F55\u5904\u7406mysql\u7684\u4E3B\u952E\u51B2\u7A81",level:3},{value:"56. \u4EC0\u4E48\u662FMySQL\u7684\u5B58\u50A8\u51FD\u6570\uFF1F",id:"56-\u4EC0\u4E48\u662Fmysql\u7684\u5B58\u50A8\u51FD\u6570",level:3},{value:"57. \u5982\u4F55\u8FDB\u884CMySQL\u7684\u5B89\u5168\u52A0\u56FA\uFF1F",id:"57-\u5982\u4F55\u8FDB\u884Cmysql\u7684\u5B89\u5168\u52A0\u56FA",level:3},{value:"58. \u4EC0\u4E48\u662FMySQL\u7684\u590D\u5236\u5EF6\u8FDF\uFF1F",id:"58-\u4EC0\u4E48\u662Fmysql\u7684\u590D\u5236\u5EF6\u8FDF",level:3},{value:"59. \u5982\u4F55\u4F18\u5316MySQL\u7684\u78C1\u76D8I/O\uFF1F",id:"59-\u5982\u4F55\u4F18\u5316mysql\u7684\u78C1\u76D8io",level:3},{value:"60. MySQL 8.0\u6709\u54EA\u4E9B\u65B0\u7279\u6027\uFF1F",id:"60-mysql-80\u6709\u54EA\u4E9B\u65B0\u7279\u6027",level:3},{value:"\u603B\u7ED3",id:"\u603B\u7ED3",level:2},{value:"41. MySQL\u7684UNION\u548CUNION ALL\u6709\u4EC0\u4E48\u533A\u522B\uFF1F",id:"41-mysql\u7684union\u548Cunion-all\u6709\u4EC0\u4E48\u533A\u522B-1",level:3},{value:"42. \u5982\u4F55\u67E5\u770BMySQL\u7684\u6267\u884C\u8BA1\u5212\uFF1F",id:"42-\u5982\u4F55\u67E5\u770Bmysql\u7684\u6267\u884C\u8BA1\u5212-1",level:3},{value:"43. \u4EC0\u4E48\u662FMySQL\u7684\u5168\u6587\u7D22\u5F15\uFF1F",id:"43-\u4EC0\u4E48\u662Fmysql\u7684\u5168\u6587\u7D22\u5F15-1",level:3},{value:"44. \u5982\u4F55\u5904\u7406MySQL\u7684\u4E71\u7801\u95EE\u9898\uFF1F",id:"44-\u5982\u4F55\u5904\u7406mysql\u7684\u4E71\u7801\u95EE\u9898-1",level:3},{value:"45. MySQL\u7684LEFT JOIN\u548CRIGHT JOIN\u6709\u4EC0\u4E48\u533A\u522B\uFF1F",id:"45-mysql\u7684left-join\u548Cright-join\u6709\u4EC0\u4E48\u533A\u522B-1",level:3},{value:"46. \u4EC0\u4E48\u662FMySQL\u7684\u590D\u5408\u7D22\u5F15\uFF1F",id:"46-\u4EC0\u4E48\u662Fmysql\u7684\u590D\u5408\u7D22\u5F15-1",level:3},{value:"47. \u5982\u4F55\u8FDB\u884CMySQL\u7684\u5BB9\u91CF\u89C4\u5212\uFF1F",id:"47-\u5982\u4F55\u8FDB\u884Cmysql\u7684\u5BB9\u91CF\u89C4\u5212-1",level:3},{value:"48. \u4EC0\u4E48\u662FMySQL\u7684\u67E5\u8BE2\u7F13\u5B58\uFF1F",id:"48-\u4EC0\u4E48\u662Fmysql\u7684\u67E5\u8BE2\u7F13\u5B58-1",level:3},{value:"49. \u5982\u4F55\u4F18\u5316MySQL\u7684\u914D\u7F6E\u53C2\u6570\uFF1F",id:"49-\u5982\u4F55\u4F18\u5316mysql\u7684\u914D\u7F6E\u53C2\u6570-1",level:3},{value:"50. \u4EC0\u4E48\u662FMySQL\u7684\u4E8B\u4EF6\u8C03\u5EA6\u5668\uFF1F",id:"50-\u4EC0\u4E48\u662Fmysql\u7684\u4E8B\u4EF6\u8C03\u5EA6\u5668-1",level:3},{value:"51. \u5982\u4F55\u5904\u7406MySQL\u7684\u9501\u7B49\u5F85\u8D85\u65F6\uFF1F",id:"51-\u5982\u4F55\u5904\u7406mysql\u7684\u9501\u7B49\u5F85\u8D85\u65F6-1",level:3},{value:"52. \u4EC0\u4E48\u662FMySQL\u7684\u6E38\u6807\uFF1F",id:"52-\u4EC0\u4E48\u662Fmysql\u7684\u6E38\u6807-1",level:3},{value:"53. \u5982\u4F55\u8FDB\u884CMySQL\u7684\u7248\u672C\u5347\u7EA7\uFF1F",id:"53-\u5982\u4F55\u8FDB\u884Cmysql\u7684\u7248\u672C\u5347\u7EA7-1",level:3},{value:"54. \u4EC0\u4E48\u662FMySQL\u7684\u5206\u5E03\u5F0F\u4E8B\u52A1\uFF1F",id:"54-\u4EC0\u4E48\u662Fmysql\u7684\u5206\u5E03\u5F0F\u4E8B\u52A1-1",level:3},{value:"55. \u5982\u4F55\u5904\u7406MySQL\u7684\u4E3B\u952E\u51B2\u7A81\uFF1F",id:"55-\u5982\u4F55\u5904\u7406mysql\u7684\u4E3B\u952E\u51B2\u7A81-1",level:3},{value:"56. \u4EC0\u4E48\u662FMySQL\u7684\u5B58\u50A8\u51FD\u6570\uFF1F",id:"56-\u4EC0\u4E48\u662Fmysql\u7684\u5B58\u50A8\u51FD\u6570-1",level:3},{value:"57. \u5982\u4F55\u8FDB\u884CMySQL\u7684\u5B89\u5168\u52A0\u56FA\uFF1F",id:"57-\u5982\u4F55\u8FDB\u884Cmysql\u7684\u5B89\u5168\u52A0\u56FA-1",level:3},{value:"58. \u4EC0\u4E48\u662FMySQL\u7684\u590D\u5236\u5EF6\u8FDF\uFF1F",id:"58-\u4EC0\u4E48\u662Fmysql\u7684\u590D\u5236\u5EF6\u8FDF-1",level:3},{value:"59. \u5982\u4F55\u4F18\u5316MySQL\u7684\u78C1\u76D8I/O\uFF1F",id:"59-\u5982\u4F55\u4F18\u5316mysql\u7684\u78C1\u76D8io-1",level:3},{value:"60. MySQL 8.0\u6709\u54EA\u4E9B\u65B0\u7279\u6027\uFF1F",id:"60-mysql-80\u6709\u54EA\u4E9B\u65B0\u7279\u6027-1",level:3}];function j(n){let s={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"mysql-\u9762\u8BD5\u9898\u96C6",children:"MySQL \u9762\u8BD5\u9898\u96C6"})}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u603B\u9898\u6570"}),": 60\u9053 |  ",(0,r.jsx)(s.strong,{children:"\u91CD\u70B9\u9886\u57DF"}),": \u7D22\u5F15\u3001\u4E8B\u52A1\u3001\u9501\u673A\u5236 |  ",(0,r.jsx)(s.strong,{children:"\u96BE\u5EA6\u5206\u5E03"}),": \u4E2D\u9AD8\u7EA7"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"\u672C\u6587\u6863\u6574\u7406\u4E86 MySQL \u6570\u636E\u5E93\u7684\u6838\u5FC3\u9762\u8BD5\u9898\u76EE\uFF0C\u6DB5\u76D6\u7D22\u5F15\u539F\u7406\u3001\u4E8B\u52A1\u7279\u6027\u3001\u9501\u673A\u5236\u3001\u6027\u80FD\u4F18\u5316\u7B49\u5404\u4E2A\u65B9\u9762\u3002"}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"\u9762\u8BD5\u9898\u76EE\u5217\u8868",children:"\u9762\u8BD5\u9898\u76EE\u5217\u8868"}),"\n",(0,r.jsx)(s.h3,{id:"1-mysql\u7684\u5B58\u50A8\u5F15\u64CE\u6709\u54EA\u4E9B\u5B83\u4EEC\u6709\u4EC0\u4E48\u533A\u522B",children:"1. MySQL\u7684\u5B58\u50A8\u5F15\u64CE\u6709\u54EA\u4E9B\uFF1F\u5B83\u4EEC\u6709\u4EC0\u4E48\u533A\u522B\uFF1F"}),"\n",(0,r.jsx)(s.p,{children:"MySQL\u652F\u6301\u591A\u79CD\u5B58\u50A8\u5F15\u64CE\uFF0C\u5141\u8BB8\u9488\u5BF9\u4E0D\u540C\u7684\u5E94\u7528\u573A\u666F\u9009\u62E9\u6700\u9002\u5408\u7684\u5B58\u50A8\u5F15\u64CE\u3002\u4E3B\u8981\u7684\u5B58\u50A8\u5F15\u64CE\u5305\u62EC\uFF1A"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"InnoDB"}),"\uFF08\u9ED8\u8BA4\u5B58\u50A8\u5F15\u64CE\uFF09\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7279\u70B9"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u652F\u6301\u4E8B\u52A1\uFF0C\u9075\u5FAAACID\u7279\u6027"}),"\n",(0,r.jsx)(s.li,{children:"\u652F\u6301\u884C\u7EA7\u9501\uFF0C\u63D0\u9AD8\u5E76\u53D1\u6027\u80FD"}),"\n",(0,r.jsx)(s.li,{children:"\u652F\u6301\u5916\u952E\u7EA6\u675F"}),"\n",(0,r.jsx)(s.li,{children:"\u5B9E\u73B0\u4E86\u56DB\u79CD\u9694\u79BB\u7EA7\u522B"}),"\n",(0,r.jsx)(s.li,{children:"\u91C7\u7528MVCC(\u591A\u7248\u672C\u5E76\u53D1\u63A7\u5236)\u6765\u652F\u6301\u9AD8\u5E76\u53D1"}),"\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528\u805A\u7C07\u7D22\u5F15\u5B58\u50A8\u6570\u636E"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u9002\u7528\u573A\u666F"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9700\u8981\u4E8B\u52A1\u652F\u6301\u7684\u5E94\u7528"}),"\n",(0,r.jsx)(s.li,{children:"\u9700\u8981\u5916\u952E\u7EA6\u675F\u7684\u5E94\u7528"}),"\n",(0,r.jsx)(s.li,{children:"\u9AD8\u5E76\u53D1\u3001\u6570\u636E\u4E00\u81F4\u6027\u8981\u6C42\u9AD8\u7684\u573A\u666F"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MyISAM"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7279\u70B9"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4E0D\u652F\u6301\u4E8B\u52A1"}),"\n",(0,r.jsx)(s.li,{children:"\u8868\u7EA7\u9501\u5B9A\uFF0C\u5E76\u53D1\u6027\u80FD\u8F83\u5DEE"}),"\n",(0,r.jsx)(s.li,{children:"\u4E0D\u652F\u6301\u5916\u952E"}),"\n",(0,r.jsx)(s.li,{children:"\u66F4\u7B80\u5355\u7684\u8868\u7ED3\u6784"}),"\n",(0,r.jsx)(s.li,{children:"\u62E5\u6709\u8F83\u9AD8\u7684\u63D2\u5165\u548C\u67E5\u8BE2\u901F\u5EA6"}),"\n",(0,r.jsx)(s.li,{children:"\u652F\u6301\u5168\u6587\u7D22\u5F15"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u9002\u7528\u573A\u666F"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8BFB\u5BC6\u96C6\u578B\u5E94\u7528\uFF08\u5982Web\u5E94\u7528\u7684\u53EA\u8BFB\u6570\u636E\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"\u9700\u8981\u5168\u6587\u7D22\u5F15\u7684\u5E94\u7528"}),"\n",(0,r.jsx)(s.li,{children:"\u4E0D\u9700\u8981\u4E8B\u52A1\u652F\u6301\u7684\u7B80\u5355\u5E94\u7528"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Memory"}),"\uFF08HEAP\uFF09\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7279\u70B9"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6570\u636E\u5B58\u50A8\u5728\u5185\u5B58\u4E2D\uFF0C\u901F\u5EA6\u6781\u5FEB"}),"\n",(0,r.jsx)(s.li,{children:"\u91CD\u542F\u540E\u6570\u636E\u4E22\u5931"}),"\n",(0,r.jsx)(s.li,{children:"\u8868\u7EA7\u9501"}),"\n",(0,r.jsx)(s.li,{children:"\u4E0D\u652F\u6301BLOB\u548CTEXT\u7C7B\u578B"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u9002\u7528\u573A\u666F"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4E34\u65F6\u8868\u548C\u4E2D\u95F4\u7ED3\u679C\u7684\u5B58\u50A8"}),"\n",(0,r.jsx)(s.li,{children:"\u9700\u8981\u5FEB\u901F\u8BBF\u95EE\u4E14\u65E0\u9700\u6301\u4E45\u5316\u7684\u6570\u636E"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Archive"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7279\u70B9"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9AD8\u5EA6\u538B\u7F29\u5B58\u50A8"}),"\n",(0,r.jsx)(s.li,{children:"\u53EA\u652F\u6301INSERT\u548CSELECT\u64CD\u4F5C"}),"\n",(0,r.jsx)(s.li,{children:"\u4E0D\u652F\u6301\u7D22\u5F15\uFF08\u9664\u4E3B\u952E\u5916\uFF09"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u9002\u7528\u573A\u666F"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u65E5\u5FD7\u548C\u5386\u53F2\u6570\u636E\u5F52\u6863"}),"\n",(0,r.jsx)(s.li,{children:"\u9700\u8981\u9AD8\u538B\u7F29\u7387\u7684\u6570\u636E"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"CSV"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7279\u70B9"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4EE5CSV\u683C\u5F0F\u5B58\u50A8\u6570\u636E"}),"\n",(0,r.jsx)(s.li,{children:"\u6570\u636E\u53EF\u76F4\u63A5\u88AB\u7535\u5B50\u8868\u683C\u8F6F\u4EF6\u8BFB\u53D6"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u9002\u7528\u573A\u666F"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6570\u636E\u5BFC\u5165\u5BFC\u51FA"}),"\n",(0,r.jsx)(s.li,{children:"\u4E0E\u5176\u4ED6\u5E94\u7528\u7A0B\u5E8F\u4EA4\u6362\u6570\u636E"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Blackhole"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7279\u70B9"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u63A5\u6536\u6570\u636E\u4F46\u4E0D\u5B58\u50A8"}),"\n",(0,r.jsx)(s.li,{children:"\u53EF\u7528\u4E8E\u4E3B\u4ECE\u590D\u5236\u6216\u65E5\u5FD7\u6536\u96C6"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u9002\u7528\u573A\u666F"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4E3B\u4ECE\u590D\u5236\u4E2D\u7684\u4E2D\u7EE7"}),"\n",(0,r.jsx)(s.li,{children:"\u6570\u636E\u4E22\u5F03\u4F46\u9700\u8BB0\u5F55binlog"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Federated"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7279\u70B9"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8BBF\u95EE\u8FDC\u7A0BMySQL\u670D\u52A1\u5668\u4E0A\u7684\u8868"}),"\n",(0,r.jsx)(s.li,{children:"\u672C\u5730\u4E0D\u5B58\u50A8\u6570\u636E"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u9002\u7528\u573A\u666F"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5206\u5E03\u5F0F\u6570\u636E\u5E93\u73AF\u5883"}),"\n",(0,r.jsx)(s.li,{children:"\u591A\u6570\u636E\u5E93\u6574\u5408"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"NDB Cluster"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7279\u70B9"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5206\u5E03\u5F0F\u5B58\u50A8\u5F15\u64CE"}),"\n",(0,r.jsx)(s.li,{children:"\u9AD8\u53EF\u7528\u6027\u548C\u53EF\u6269\u5C55\u6027"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u9002\u7528\u573A\u666F"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9AD8\u53EF\u7528\u6027\u96C6\u7FA4\u73AF\u5883"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5BF9\u6BD4\u8868"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u7279\u6027"}),(0,r.jsx)(s.th,{children:"InnoDB"}),(0,r.jsx)(s.th,{children:"MyISAM"}),(0,r.jsx)(s.th,{children:"Memory"}),(0,r.jsx)(s.th,{children:"Archive"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u4E8B\u52A1\u652F\u6301"}),(0,r.jsx)(s.td,{children:"\u662F"}),(0,r.jsx)(s.td,{children:"\u5426"}),(0,r.jsx)(s.td,{children:"\u5426"}),(0,r.jsx)(s.td,{children:"\u5426"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u9501\u7C92\u5EA6"}),(0,r.jsx)(s.td,{children:"\u884C\u7EA7\u9501"}),(0,r.jsx)(s.td,{children:"\u8868\u7EA7\u9501"}),(0,r.jsx)(s.td,{children:"\u8868\u7EA7\u9501"}),(0,r.jsx)(s.td,{children:"\u884C\u7EA7\u9501"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u5916\u952E\u652F\u6301"}),(0,r.jsx)(s.td,{children:"\u662F"}),(0,r.jsx)(s.td,{children:"\u5426"}),(0,r.jsx)(s.td,{children:"\u5426"}),(0,r.jsx)(s.td,{children:"\u5426"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u5168\u6587\u7D22\u5F15"}),(0,r.jsx)(s.td,{children:"\u652F\u6301(5.6+)"}),(0,r.jsx)(s.td,{children:"\u652F\u6301"}),(0,r.jsx)(s.td,{children:"\u5426"}),(0,r.jsx)(s.td,{children:"\u5426"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u5B58\u50A8\u9650\u5236"}),(0,r.jsx)(s.td,{children:"64TB"}),(0,r.jsx)(s.td,{children:"\u6587\u4EF6\u7CFB\u7EDF\u9650\u5236"}),(0,r.jsx)(s.td,{children:"\u5185\u5B58\u5927\u5C0F"}),(0,r.jsx)(s.td,{children:"\u65E0"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u6570\u636E\u5B58\u50A8"}),(0,r.jsx)(s.td,{children:"\u805A\u7C07\u7D22\u5F15"}),(0,r.jsx)(s.td,{children:"\u72EC\u7ACB\u8868"}),(0,r.jsx)(s.td,{children:"\u5185\u5B58"}),(0,r.jsx)(s.td,{children:"\u538B\u7F29\u5B58\u50A8"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u6027\u80FD\u4F18\u52BF"}),(0,r.jsx)(s.td,{children:"\u9AD8\u5E76\u53D1\u5199"}),(0,r.jsx)(s.td,{children:"\u9AD8\u901F\u8BFB"}),(0,r.jsx)(s.td,{children:"\u6781\u901F\u67E5\u8BE2"}),(0,r.jsx)(s.td,{children:"\u9AD8\u538B\u7F29\u7387"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"B\u6811\u7D22\u5F15"}),(0,r.jsx)(s.td,{children:"\u652F\u6301"}),(0,r.jsx)(s.td,{children:"\u652F\u6301"}),(0,r.jsx)(s.td,{children:"\u652F\u6301"}),(0,r.jsx)(s.td,{children:"\u4E0D\u652F\u6301"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u54C8\u5E0C\u7D22\u5F15"}),(0,r.jsx)(s.td,{children:"\u81EA\u9002\u5E94"}),(0,r.jsx)(s.td,{children:"\u4E0D\u652F\u6301"}),(0,r.jsx)(s.td,{children:"\u652F\u6301"}),(0,r.jsx)(s.td,{children:"\u4E0D\u652F\u6301"})]})]})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5982\u4F55\u9009\u62E9\u5B58\u50A8\u5F15\u64CE"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u9700\u8981\u4E8B\u52A1\u548C\u5916\u952E"}),"\uFF1A\u4F7F\u7528InnoDB"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u53EA\u8BFB\u6216\u8BFB\u591A\u5199\u5C11"}),"\uFF1A\u8003\u8651MyISAM"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4E34\u65F6\u6570\u636E\uFF0C\u901F\u5EA6\u4F18\u5148"}),"\uFF1AMemory"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5F52\u6863\u6570\u636E\uFF0C\u538B\u7F29\u4F18\u5148"}),"\uFF1AArchive"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u67E5\u770B\u548C\u4FEE\u6539\u5B58\u50A8\u5F15\u64CE"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770B\u652F\u6301\u7684\u5B58\u50A8\u5F15\u64CE\nSHOW ENGINES;\n\n-- \u67E5\u770B\u8868\u7684\u5B58\u50A8\u5F15\u64CE\nSHOW TABLE STATUS WHERE Name = 'table_name';\n\n-- \u521B\u5EFA\u8868\u65F6\u6307\u5B9A\u5B58\u50A8\u5F15\u64CE\nCREATE TABLE mytable (id INT) ENGINE = InnoDB;\n\n-- \u4FEE\u6539\u8868\u7684\u5B58\u50A8\u5F15\u64CE\nALTER TABLE mytable ENGINE = MyISAM;\n"})}),"\n",(0,r.jsx)(s.h3,{id:"2-mysql\u4E2D\u7684\u7D22\u5F15\u7C7B\u578B\u6709\u54EA\u4E9B\u5982\u4F55\u9009\u62E9\u5408\u9002\u7684\u7D22\u5F15",children:"2. MySQL\u4E2D\u7684\u7D22\u5F15\u7C7B\u578B\u6709\u54EA\u4E9B\uFF1F\u5982\u4F55\u9009\u62E9\u5408\u9002\u7684\u7D22\u5F15\uFF1F"}),"\n",(0,r.jsx)(s.p,{children:"MySQL\u4E2D\u7684\u7D22\u5F15\u662F\u63D0\u9AD8\u67E5\u8BE2\u6548\u7387\u7684\u5173\u952E\u673A\u5236\uFF0C\u6839\u636E\u4E0D\u540C\u7684\u9700\u6C42\u548C\u6570\u636E\u7279\u70B9\uFF0C\u53EF\u4EE5\u9009\u62E9\u4E0D\u540C\u7C7B\u578B\u7684\u7D22\u5F15\u3002"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E3B\u8981\u7D22\u5F15\u7C7B\u578B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u6309\u6570\u636E\u7ED3\u6784\u5206\u7C7B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"B+\u6811\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"MySQL\u4E2D\u6700\u5E38\u7528\u7684\u7D22\u5F15\u7C7B\u578B"}),"\n",(0,r.jsx)(s.li,{children:"InnoDB\u548CMyISAM\u9ED8\u8BA4\u4F7F\u7528"}),"\n",(0,r.jsx)(s.li,{children:"\u591A\u8DEF\u5E73\u8861\u67E5\u627E\u6811\uFF0C\u53F6\u8282\u70B9\u5B58\u50A8\u6570\u636E"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u5408\u8303\u56F4\u67E5\u8BE2\u548C\u6392\u5E8F"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u54C8\u5E0C\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u57FA\u4E8E\u54C8\u5E0C\u8868\u5B9E\u73B0\uFF0C\u53EA\u6709\u7CBE\u786E\u5339\u914D\u624D\u6709\u6548"}),"\n",(0,r.jsx)(s.li,{children:"Memory\u5B58\u50A8\u5F15\u64CE\u9ED8\u8BA4\u4F7F\u7528"}),"\n",(0,r.jsx)(s.li,{children:"InnoDB\u652F\u6301\u81EA\u9002\u5E94\u54C8\u5E0C\u7D22\u5F15"}),"\n",(0,r.jsx)(s.li,{children:"\u7B49\u503C\u67E5\u8BE2\u6027\u80FD\u6781\u9AD8\uFF0C\u4F46\u4E0D\u652F\u6301\u8303\u56F4\u67E5\u8BE2\u548C\u6392\u5E8F"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"R\u6811\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u7528\u4E8E\u7A7A\u95F4\u6570\u636E\u7D22\u5F15\uFF08\u5982\u5730\u7406\u4FE1\u606F\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"MyISAM\u652F\u6301\u7A7A\u95F4\u7D22\u5F15"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u7528\u4E8E\u591A\u7EF4\u6570\u636E\u7684\u8303\u56F4\u67E5\u8BE2"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5168\u6587\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u7528\u4E8E\u5168\u6587\u641C\u7D22"}),"\n",(0,r.jsx)(s.li,{children:"MyISAM\u548CInnoDB(5.6+)\u652F\u6301"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u7528\u4E8E\u6587\u672C\u5185\u5BB9\u7684\u6A21\u7CCA\u67E5\u8BE2"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u6309\u7269\u7406\u5B9E\u73B0\u5206\u7C7B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u805A\u7C07\u7D22\u5F15(Clustered Index)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u7D22\u5F15\u548C\u6570\u636E\u5B58\u50A8\u5728\u4E00\u8D77"}),"\n",(0,r.jsx)(s.li,{children:"\u6BCF\u4E2A\u8868\u53EA\u80FD\u6709\u4E00\u4E2A\uFF08\u901A\u5E38\u662F\u4E3B\u952E\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"InnoDB\u9ED8\u8BA4\u4F7F\u7528"}),"\n",(0,r.jsx)(s.li,{children:"\u901A\u8FC7\u4E3B\u952E\u8BBF\u95EE\u6570\u636E\u975E\u5E38\u5FEB"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u975E\u805A\u7C07\u7D22\u5F15(Non-Clustered Index)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u7D22\u5F15\u548C\u6570\u636E\u5206\u5F00\u5B58\u50A8"}),"\n",(0,r.jsx)(s.li,{children:"\u53EF\u4EE5\u521B\u5EFA\u591A\u4E2A"}),"\n",(0,r.jsx)(s.li,{children:"\u67E5\u8BE2\u9700\u8981\u989D\u5916\u7684\u56DE\u8868\u64CD\u4F5C"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u6309\u7D22\u5F15\u5217\u6570\u5206\u7C7B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5355\u5217\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u53EA\u5305\u542B\u4E00\u4E2A\u5217\u7684\u7D22\u5F15"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u5408\u5355\u5217\u67E5\u8BE2\u6761\u4EF6"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8054\u5408\u7D22\u5F15/\u590D\u5408\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5305\u542B\u591A\u4E2A\u5217\u7684\u7D22\u5F15"}),"\n",(0,r.jsx)(s.li,{children:"\u9075\u5FAA\u6700\u5DE6\u524D\u7F00\u539F\u5219"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u5408\u591A\u6761\u4EF6\u67E5\u8BE2\u548C\u8986\u76D6\u7D22\u5F15\u67E5\u8BE2"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. \u6309\u5E94\u7528\u573A\u666F\u5206\u7C7B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u666E\u901A\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u57FA\u672C\u7D22\u5F15\u7C7B\u578B\uFF0C\u65E0\u7279\u6B8A\u9650\u5236"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u552F\u4E00\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8981\u6C42\u7D22\u5F15\u5217\u503C\u552F\u4E00"}),"\n",(0,r.jsx)(s.li,{children:"\u53EF\u4EE5\u5305\u542BNULL\u503C(MySQL\u4E2DNULL\u4E0D\u7B49\u4E8ENULL)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E3B\u952E\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u7279\u6B8A\u7684\u552F\u4E00\u7D22\u5F15\uFF0C\u4E0D\u5141\u8BB8NULL"}),"\n",(0,r.jsx)(s.li,{children:"\u7528\u4E8E\u552F\u4E00\u6807\u8BC6\u8868\u4E2D\u7684\u8BB0\u5F55"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u524D\u7F00\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5BF9\u5B57\u7B26\u4E32\u5217\u7684\u524D\u51E0\u4E2A\u5B57\u7B26\u5EFA\u7ACB\u7D22\u5F15"}),"\n",(0,r.jsx)(s.li,{children:"\u51CF\u5C11\u7D22\u5F15\u7A7A\u95F4\u5360\u7528"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8986\u76D6\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u67E5\u8BE2\u7684\u5217\u90FD\u5305\u542B\u5728\u7D22\u5F15\u4E2D\uFF0C\u65E0\u9700\u56DE\u8868"}),"\n",(0,r.jsx)(s.li,{children:"\u53EF\u663E\u8457\u63D0\u9AD8\u67E5\u8BE2\u6548\u7387"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9009\u62E9\u5408\u9002\u7D22\u5F15\u7684\u539F\u5219"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u5217\u7684\u9009\u62E9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5728WHERE\u3001JOIN\u3001ORDER BY\u3001GROUP BY\u5B50\u53E5\u4E2D\u9891\u7E41\u51FA\u73B0\u7684\u5217"}),"\n",(0,r.jsx)(s.li,{children:"\u533A\u5206\u5EA6\u9AD8\uFF08\u57FA\u6570\u5927\uFF09\u7684\u5217\u4F18\u5148"}),"\n",(0,r.jsx)(s.li,{children:"\u66F4\u65B0\u9891\u7387\u4F4E\u7684\u5217\u4F18\u5148"}),"\n",(0,r.jsx)(s.li,{children:"\u5C3D\u91CF\u9009\u62E9\u6570\u636E\u7C7B\u578B\u8F83\u5C0F\u7684\u5217"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u7D22\u5F15\u7C7B\u578B\u9009\u62E9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7B49\u503C\u67E5\u8BE2\u591A"}),"\uFF1A\u8003\u8651\u54C8\u5E0C\u7D22\u5F15\u6216B+\u6811"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u8303\u56F4\u67E5\u8BE2\u591A"}),"\uFF1A\u4F7F\u7528B+\u6811\u7D22\u5F15"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6587\u672C\u641C\u7D22"}),"\uFF1A\u4F7F\u7528\u5168\u6587\u7D22\u5F15"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u591A\u6761\u4EF6\u67E5\u8BE2"}),"\uFF1A\u8003\u8651\u590D\u5408\u7D22\u5F15"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u552F\u4E00\u6027\u7EA6\u675F"}),"\uFF1A\u4F7F\u7528\u552F\u4E00\u7D22\u5F15\u6216\u4E3B\u952E"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u590D\u5408\u7D22\u5F15\u8BBE\u8BA1"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u628A\u533A\u5206\u5EA6\u9AD8\u7684\u5217\u653E\u5728\u524D\u9762"}),"\n",(0,r.jsx)(s.li,{children:"\u8003\u8651\u67E5\u8BE2\u6761\u4EF6\u7684\u987A\u5E8F"}),"\n",(0,r.jsx)(s.li,{children:"\u9075\u5FAA\u6700\u5DE6\u524D\u7F00\u539F\u5219"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. \u7D22\u5F15\u4F18\u5316\u7B56\u7565"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u8986\u76D6\u7D22\u5F15"}),"\uFF1A\u5C3D\u91CF\u4F7F\u7528\u7D22\u5F15\u8986\u76D6\u67E5\u8BE2"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7D22\u5F15\u4E0B\u63A8"}),"\uFF1A\u5229\u7528\u7D22\u5F15\u8FC7\u6EE4\u66F4\u591A\u6570\u636E"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u524D\u7F00\u7D22\u5F15"}),"\uFF1A\u5BF9\u957F\u5B57\u7B26\u4E32\u4F7F\u7528\u524D\u7F00\u7D22\u5F15"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u907F\u514D\u8FC7\u5EA6\u7D22\u5F15"}),"\uFF1A\u7D22\u5F15\u4F1A\u5360\u7528\u7A7A\u95F4\u5E76\u5F71\u54CD\u5199\u6027\u80FD"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"5. \u5E38\u89C1\u7D22\u5F15\u9677\u9631"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5728\u4F4E\u57FA\u6570\u5217\u4E0A\u5EFA\u7ACB\u7D22\u5F15\u53EF\u80FD\u65E0\u6548"}),"\n",(0,r.jsx)(s.li,{children:"\u7D22\u5F15\u5217\u4E0A\u4F7F\u7528\u51FD\u6570\u4F1A\u5BFC\u81F4\u7D22\u5F15\u5931\u6548"}),"\n",(0,r.jsx)(s.li,{children:"\u9690\u5F0F\u7C7B\u578B\u8F6C\u6362\u4F1A\u5BFC\u81F4\u7D22\u5F15\u5931\u6548"}),"\n",(0,r.jsx)(s.li,{children:"Like\u4EE5\u901A\u914D\u7B26\u5F00\u5934\u4F1A\u5BFC\u81F4\u7D22\u5F15\u5931\u6548"}),"\n",(0,r.jsx)(s.li,{children:"Or\u6761\u4EF6\u53EF\u80FD\u5BFC\u81F4\u7D22\u5F15\u5931\u6548"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B9E\u9645\u5E94\u7528\u793A\u4F8B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFA\u666E\u901A\u7D22\u5F15\nCREATE INDEX idx_name ON users(name);\n\n-- \u521B\u5EFA\u552F\u4E00\u7D22\u5F15\nCREATE UNIQUE INDEX idx_email ON users(email);\n\n-- \u521B\u5EFA\u590D\u5408\u7D22\u5F15\nCREATE INDEX idx_name_age ON users(name, age);\n\n-- \u521B\u5EFA\u524D\u7F00\u7D22\u5F15\nCREATE INDEX idx_address ON users(address(10));\n\n-- \u521B\u5EFA\u5168\u6587\u7D22\u5F15\nCREATE FULLTEXT INDEX idx_content ON articles(content);\n\n-- \u5206\u6790\u7D22\u5F15\u4F7F\u7528\u60C5\u51B5\nEXPLAIN SELECT * FROM users WHERE name = 'John' AND age > 20;\n"})}),"\n",(0,r.jsx)(s.h3,{id:"3-\u4EC0\u4E48\u662F\u56DE\u8868\u67E5\u8BE2\u4EC0\u4E48\u662F\u8986\u76D6\u7D22\u5F15",children:"3. \u4EC0\u4E48\u662F\u56DE\u8868\u67E5\u8BE2\uFF1F\u4EC0\u4E48\u662F\u8986\u76D6\u7D22\u5F15\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u56DE\u8868\u67E5\u8BE2"}),"\u548C",(0,r.jsx)(s.strong,{children:"\u8986\u76D6\u7D22\u5F15"}),"\u662F\u7406\u89E3MySQL\u7D22\u5F15\u4F7F\u7528\u6548\u7387\u7684\u4E24\u4E2A\u91CD\u8981\u6982\u5FF5\uFF0C\u5B83\u4EEC\u4E0E\u67E5\u8BE2\u6267\u884C\u8FC7\u7A0B\u548C\u6027\u80FD\u606F\u606F\u76F8\u5173\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u56DE\u8868\u67E5\u8BE2"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B9A\u4E49"}),"\uFF1A\n\u56DE\u8868\u67E5\u8BE2\u662F\u6307\u5728\u4F7F\u7528\u975E\u805A\u7C07\u7D22\u5F15(\u4E5F\u79F0\u4E3A\u4E8C\u7EA7\u7D22\u5F15\u6216\u8F85\u52A9\u7D22\u5F15)\u8FDB\u884C\u67E5\u8BE2\u65F6\uFF0C\u9700\u8981\u5148\u901A\u8FC7\u7D22\u5F15\u627E\u5230\u5BF9\u5E94\u7684\u4E3B\u952E\u503C\uFF0C\u7136\u540E\u518D\u6839\u636E\u4E3B\u952E\u503C\u5230\u805A\u7C07\u7D22\u5F15\u4E2D\u67E5\u627E\u5B8C\u6574\u7684\u884C\u6570\u636E\u7684\u8FC7\u7A0B\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4EA7\u751F\u539F\u56E0"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5728InnoDB\u5B58\u50A8\u5F15\u64CE\u4E2D\uFF0C\u975E\u805A\u7C07\u7D22\u5F15\u7684\u53F6\u5B50\u8282\u70B9\u5B58\u50A8\u7684\u662F\u8BE5\u7D22\u5F15\u5217\u7684\u503C\u548C\u5BF9\u5E94\u7684\u4E3B\u952E\u503C"}),"\n",(0,r.jsx)(s.li,{children:"\u800C\u4E0D\u662F\u5B8C\u6574\u7684\u884C\u6570\u636E(\u8FD9\u70B9\u4E0E\u805A\u7C07\u7D22\u5F15\u4E0D\u540C)"}),"\n",(0,r.jsx)(s.li,{children:'\u56E0\u6B64\u9700\u8981\u989D\u5916\u7684\u6B65\u9AA4"\u56DE\u8868"\u67E5\u627E\u5B8C\u6574\u6570\u636E'}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5DE5\u4F5C\u6D41\u7A0B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"\u901A\u8FC7\u975E\u805A\u7C07\u7D22\u5F15\u5B9A\u4F4D\u5230\u5BF9\u5E94\u7684\u53F6\u5B50\u8282\u70B9\uFF0C\u83B7\u53D6\u4E3B\u952E\u503C"}),"\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528\u83B7\u53D6\u5230\u7684\u4E3B\u952E\u503C\u5728\u805A\u7C07\u7D22\u5F15\u4E2D\u8FDB\u884C\u7B2C\u4E8C\u6B21\u67E5\u627E"}),"\n",(0,r.jsx)(s.li,{children:"\u4ECE\u805A\u7C07\u7D22\u5F15\u4E2D\u83B7\u53D6\u5B8C\u6574\u7684\u884C\u6570\u636E"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u793A\u4F8B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5047\u8BBE\u5728name\u5217\u4E0A\u6709\u7D22\u5F15\uFF0Cid\u662F\u4E3B\u952E\nSELECT * FROM users WHERE name = 'John';\n"})}),"\n",(0,r.jsx)(s.p,{children:"\u6267\u884C\u8FC7\u7A0B\uFF1A"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"\u901A\u8FC7name\u7D22\u5F15\u627E\u5230'John'\u5BF9\u5E94\u7684\u8BB0\u5F55\uFF0C\u83B7\u53D6\u4E3B\u952Eid\u503C(\u4F8B\u5982id=10)"}),"\n",(0,r.jsx)(s.li,{children:"\u518D\u901A\u8FC7\u4E3B\u952E\u7D22\u5F15\u67E5\u627Eid=10\u7684\u5B8C\u6574\u884C\u6570\u636E"}),"\n",(0,r.jsx)(s.li,{children:'\u8FD9\u4E2A\u8FC7\u7A0B\u5C31\u662F"\u56DE\u8868"'}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6027\u80FD\u5F71\u54CD"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u56DE\u8868\u4F1A\u589E\u52A0\u989D\u5916\u7684IO\u64CD\u4F5C"}),"\n",(0,r.jsx)(s.li,{children:"\u5927\u91CF\u56DE\u8868\u64CD\u4F5C\u4F1A\u663E\u8457\u964D\u4F4E\u67E5\u8BE2\u6548\u7387"}),"\n",(0,r.jsx)(s.li,{children:"\u7279\u522B\u662F\u5728\u6570\u636E\u91CF\u5927\u7684\u8868\u4E0A\u66F4\u4E3A\u660E\u663E"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8986\u76D6\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B9A\u4E49"}),"\uFF1A\n\u8986\u76D6\u7D22\u5F15\u662F\u6307\u67E5\u8BE2\u7684\u6240\u6709\u5217\u90FD\u5305\u542B\u5728\u7D22\u5F15\u4E2D\uFF0C\u6570\u636E\u5E93\u53EF\u4EE5\u76F4\u63A5\u4ECE\u7D22\u5F15\u4E2D\u83B7\u53D6\u6240\u9700\u6570\u636E\uFF0C\u800C\u65E0\u9700\u56DE\u8868\u67E5\u8BE2\u7684\u60C5\u51B5\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5DE5\u4F5C\u539F\u7406"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5F53\u7D22\u5F15\u5305\u542B\u67E5\u8BE2\u6240\u9700\u7684\u6240\u6709\u5217\u65F6\uFF0C\u53EF\u4EE5\u76F4\u63A5\u4ECE\u7D22\u5F15\u83B7\u53D6\u6570\u636E"}),"\n",(0,r.jsx)(s.li,{children:'MySQL\u53EF\u4EE5\u5728\u67E5\u8BE2\u6267\u884C\u8BA1\u5212\u4E2D\u901A\u8FC7"Using index"\u6807\u8BC6\u8986\u76D6\u7D22\u5F15\u7684\u4F7F\u7528'}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u793A\u4F8B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5047\u8BBE\u6709\u4E00\u4E2A\u8054\u5408\u7D22\u5F15(name, age)\nSELECT name, age FROM users WHERE name = 'John';\n"})}),"\n",(0,r.jsx)(s.p,{children:"\u6267\u884C\u8FC7\u7A0B\uFF1A"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"\u901A\u8FC7name\u7D22\u5F15\u627E\u5230'John'\u5BF9\u5E94\u7684\u8BB0\u5F55"}),"\n",(0,r.jsx)(s.li,{children:"\u7531\u4E8E\u7D22\u5F15\u4E2D\u5DF2\u5305\u542Bname\u548Cage\u5217\uFF0C\u76F4\u63A5\u8FD4\u56DE\u7ED3\u679C"}),"\n",(0,r.jsx)(s.li,{children:"\u65E0\u9700\u56DE\u8868\u67E5\u8BE2"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8986\u76D6\u7D22\u5F15\u7684\u4F18\u52BF"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u51CF\u5C11IO\u64CD\u4F5C\uFF0C\u907F\u514D\u56DE\u8868"}),"\n",(0,r.jsx)(s.li,{children:"\u7D22\u5F15\u901A\u5E38\u6BD4\u8868\u6570\u636E\u66F4\u5C0F\uFF0C\u53EF\u4EE5\u51CF\u5C11\u6570\u636E\u626B\u63CF\u91CF"}),"\n",(0,r.jsx)(s.li,{children:"\u63D0\u9AD8\u7F13\u5B58\u6548\u7387\uFF0C\u66F4\u591A\u7D22\u5F15\u53EF\u4EE5\u52A0\u8F7D\u5230\u5185\u5B58"}),"\n",(0,r.jsx)(s.li,{children:"\u663E\u8457\u63D0\u5347\u67E5\u8BE2\u6027\u80FD"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5982\u4F55\u5B9E\u73B0\u8986\u76D6\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"\u521B\u5EFA\u5305\u542B\u67E5\u8BE2\u6240\u9700\u6240\u6709\u5217\u7684\u8054\u5408\u7D22\u5F15"}),"\n",(0,r.jsx)(s.li,{children:"\u8C03\u6574\u67E5\u8BE2\uFF0C\u53EA\u9009\u62E9\u7D22\u5F15\u4E2D\u5305\u542B\u7684\u5217"}),"\n",(0,r.jsx)(s.li,{children:"\u5408\u7406\u8BBE\u8BA1\u7D22\u5F15\u4EE5\u652F\u6301\u9891\u7E41\u67E5\u8BE2"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFA\u8986\u76D6\u5E38\u89C1\u67E5\u8BE2\u9700\u6C42\u7684\u7D22\u5F15\nCREATE INDEX idx_name_age_email ON users(name, age, email);\n\n-- \u73B0\u5728\u53EF\u4EE5\u8986\u76D6\u4EE5\u4E0B\u67E5\u8BE2\nSELECT name, age, email FROM users WHERE name = 'John';\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E24\u8005\u5BF9\u6BD4"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u7279\u6027"}),(0,r.jsx)(s.th,{children:"\u56DE\u8868\u67E5\u8BE2"}),(0,r.jsx)(s.th,{children:"\u8986\u76D6\u7D22\u5F15"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"IO\u6B21\u6570"}),(0,r.jsx)(s.td,{children:"\u81F3\u5C11\u4E24\u6B21(\u7D22\u5F15+\u6570\u636E)"}),(0,r.jsx)(s.td,{children:"\u4E00\u6B21(\u4EC5\u7D22\u5F15)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u6027\u80FD"}),(0,r.jsx)(s.td,{children:"\u8F83\u6162"}),(0,r.jsx)(s.td,{children:"\u8F83\u5FEB"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u7D22\u5F15\u8BBE\u8BA1"}),(0,r.jsx)(s.td,{children:"\u666E\u901A\u5355\u5217\u7D22\u5F15\u8DB3\u591F"}),(0,r.jsx)(s.td,{children:"\u9700\u8981\u7CBE\u5FC3\u8BBE\u8BA1\u5305\u542B\u6240\u9700\u5217"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u5185\u5B58\u5360\u7528"}),(0,r.jsx)(s.td,{children:"\u7D22\u5F15\u8F83\u5C0F"}),(0,r.jsx)(s.td,{children:"\u7D22\u5F15\u53EF\u80FD\u8F83\u5927"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u9002\u7528\u573A\u666F"}),(0,r.jsx)(s.td,{children:"\u901A\u7528\u67E5\u8BE2"}),(0,r.jsx)(s.td,{children:"\u9488\u5BF9\u7279\u5B9A\u67E5\u8BE2\u4F18\u5316"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"EXPLAIN\u7279\u5F81"}),(0,r.jsx)(s.td,{children:"NULL(ref\u5217)"}),(0,r.jsx)(s.td,{children:"Using index"})]})]})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B9E\u9645\u5E94\u7528\u4E2D\u7684\u4F18\u5316\u7B56\u7565"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"\u8BC6\u522B\u9891\u7E41\u67E5\u8BE2\u7684\u5217\u7EC4\u5408\uFF0C\u4E3A\u5176\u521B\u5EFA\u8986\u76D6\u7D22\u5F15"}),"\n",(0,r.jsx)(s.li,{children:"\u907F\u514D\u4F7F\u7528SELECT *\uFF0C\u53EA\u67E5\u8BE2\u5FC5\u8981\u7684\u5217"}),"\n",(0,r.jsx)(s.li,{children:"\u5408\u7406\u4F7F\u7528\u8054\u5408\u7D22\u5F15\u4EE5\u652F\u6301\u66F4\u591A\u7684\u8986\u76D6\u67E5\u8BE2"}),"\n",(0,r.jsx)(s.li,{children:"\u9488\u5BF9\u5927\u8868\u548C\u9AD8\u9891\u67E5\u8BE2\u4F18\u5148\u8003\u8651\u8986\u76D6\u7D22\u5F15\u4F18\u5316"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"4-mysql\u7684\u4E8B\u52A1\u7279\u6027acid\u662F\u4EC0\u4E48",children:"4. MySQL\u7684\u4E8B\u52A1\u7279\u6027\uFF08ACID\uFF09\u662F\u4EC0\u4E48\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL\u4E8B\u52A1\u7684ACID\u7279\u6027"}),"\u662F\u5173\u7CFB\u6570\u636E\u5E93\u7BA1\u7406\u7CFB\u7EDF\u4FDD\u8BC1\u6570\u636E\u5B8C\u6574\u6027\u548C\u53EF\u9760\u6027\u7684\u57FA\u7840\u3002ACID\u662F\u56DB\u4E2A\u7279\u6027\u7684\u9996\u5B57\u6BCD\u7F29\u5199\uFF1A\u539F\u5B50\u6027(Atomicity)\u3001\u4E00\u81F4\u6027(Consistency)\u3001\u9694\u79BB\u6027(Isolation)\u548C\u6301\u4E45\u6027(Durability)\u3002InnoDB\u5B58\u50A8\u5F15\u64CE\u5B8C\u5168\u652F\u6301ACID\u7279\u6027\uFF0C\u800CMyISAM\u7B49\u975E\u4E8B\u52A1\u5B58\u50A8\u5F15\u64CE\u5219\u4E0D\u652F\u6301\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u539F\u5B50\u6027(Atomicity)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B9A\u4E49"}),"\uFF1A\n\u4E8B\u52A1\u662F\u4E0D\u53EF\u5206\u5272\u7684\u5DE5\u4F5C\u5355\u4F4D\uFF0C\u4E8B\u52A1\u4E2D\u7684\u64CD\u4F5C\u8981\u4E48\u5168\u90E8\u5B8C\u6210\uFF0C\u8981\u4E48\u5168\u90E8\u4E0D\u6267\u884C\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B9E\u73B0\u673A\u5236"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\u57FA\u4E8E",(0,r.jsxs)(s.strong,{children:["\u91CD\u505A\u65E5\u5FD7(redo log)",(0,r.jsx)(s.strong,{children:"\u548C"}),"\u56DE\u6EDA\u65E5\u5FD7(undo log)"]})]}),"\n",(0,r.jsx)(s.li,{children:"\u64CD\u4F5C\u6267\u884C\u524D\uFF0C\u5148\u5199\u5165\u56DE\u6EDA\u65E5\u5FD7\uFF0C\u8BB0\u5F55\u4FEE\u6539\u524D\u7684\u6570\u636E"}),"\n",(0,r.jsx)(s.li,{children:"\u5982\u679C\u4E8B\u52A1\u5931\u8D25\uFF0C\u4F7F\u7528\u56DE\u6EDA\u65E5\u5FD7\u6062\u590D\u5230\u4E8B\u52A1\u5F00\u59CB\u524D\u7684\u72B6\u6001"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u793A\u4F8B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"START TRANSACTION;\nUPDATE accounts SET balance = balance - 100 WHERE user_id = 1;\nUPDATE accounts SET balance = balance + 100 WHERE user_id = 2;\nCOMMIT;  -- \u4E24\u4E2A\u66F4\u65B0\u64CD\u4F5C\u540C\u65F6\u6210\u529F\n\n-- \u6216\u8005\nROLLBACK;  -- \u4E24\u4E2A\u66F4\u65B0\u64CD\u4F5C\u90FD\u4E0D\u6267\u884C\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u4E00\u81F4\u6027(Consistency)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B9A\u4E49"}),"\uFF1A\n\u4E8B\u52A1\u6267\u884C\u524D\u540E\uFF0C\u6570\u636E\u5E93\u4ECE\u4E00\u4E2A\u4E00\u81F4\u6027\u72B6\u6001\u8F6C\u53D8\u4E3A\u53E6\u4E00\u4E2A\u4E00\u81F4\u6027\u72B6\u6001\uFF0C\u4E0D\u4F1A\u7834\u574F\u6570\u636E\u5E93\u7684\u5B8C\u6574\u6027\u7EA6\u675F\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B9E\u73B0\u673A\u5236"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\u901A\u8FC7",(0,r.jsx)(s.strong,{children:"\u5B8C\u6574\u6027\u7EA6\u675F"}),"\uFF08\u5982\u4E3B\u952E\u3001\u5916\u952E\u3001\u552F\u4E00\u6027\u7EA6\u675F\uFF09"]}),"\n",(0,r.jsxs)(s.li,{children:["\u901A\u8FC7",(0,r.jsx)(s.strong,{children:"\u89E6\u53D1\u5668"}),"\u548C",(0,r.jsx)(s.strong,{children:"\u5B58\u50A8\u8FC7\u7A0B"}),"\u4E2D\u7684\u4E1A\u52A1\u903B\u8F91"]}),"\n",(0,r.jsx)(s.li,{children:"\u5E94\u7528\u7A0B\u5E8F\u5C42\u9762\u7684\u4E1A\u52A1\u89C4\u5219"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u793A\u4F8B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u94F6\u884C\u8F6C\u8D26\u4FDD\u6301\u603B\u91D1\u989D\u4E0D\u53D8\nSTART TRANSACTION;\nUPDATE accounts SET balance = balance - 100 WHERE user_id = 1;\nUPDATE accounts SET balance = balance + 100 WHERE user_id = 2;\nCOMMIT;  -- \u603B\u91D1\u989D\u4FDD\u6301\u4E0D\u53D8\uFF0C\u4E00\u81F4\u6027\u5F97\u5230\u4FDD\u969C\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u9694\u79BB\u6027(Isolation)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B9A\u4E49"}),"\uFF1A\n\u591A\u4E2A\u4E8B\u52A1\u5E76\u53D1\u6267\u884C\u65F6\uFF0C\u4E00\u4E2A\u4E8B\u52A1\u7684\u6267\u884C\u4E0D\u5E94\u8BE5\u88AB\u5176\u4ED6\u4E8B\u52A1\u5E72\u6270\uFF0C\u5C31\u50CF\u5B83\u4EEC\u662F\u4E32\u884C\u6267\u884C\u4E00\u6837\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B9E\u73B0\u673A\u5236"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\u901A\u8FC7",(0,r.jsx)(s.strong,{children:"\u9501\u673A\u5236"}),"\u548C**MVCC(\u591A\u7248\u672C\u5E76\u53D1\u63A7\u5236)**\u5B9E\u73B0"]}),"\n",(0,r.jsxs)(s.li,{children:["\u4E0D\u540C\u7684\u9694\u79BB\u7EA7\u522B\u63D0\u4F9B\u4E0D\u540C\u7A0B\u5EA6\u7684\u9694\u79BB\u6027","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"READ UNCOMMITTED\uFF08\u8BFB\u672A\u63D0\u4EA4\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"READ COMMITTED\uFF08\u8BFB\u5DF2\u63D0\u4EA4\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"REPEATABLE READ\uFF08\u53EF\u91CD\u590D\u8BFB\uFF0CInnoDB\u9ED8\u8BA4\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"SERIALIZABLE\uFF08\u4E32\u884C\u5316\uFF09"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u793A\u4F8B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u8BBE\u7F6E\u4E8B\u52A1\u9694\u79BB\u7EA7\u522B\nSET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;\n\n-- \u4E8B\u52A1A\nSTART TRANSACTION;\nSELECT * FROM accounts WHERE user_id = 1;  -- \u8BFB\u53D6\u65F6\u4E0D\u53D7\u5176\u4ED6\u4E8B\u52A1\u5F71\u54CD\n-- \u4E2D\u95F4\u5176\u4ED6\u4E8B\u52A1\u53EF\u80FD\u4FEE\u6539\u4E86\u6570\u636E\nSELECT * FROM accounts WHERE user_id = 1;  -- \u5728\u53EF\u91CD\u590D\u8BFB\u7EA7\u522B\u4E0B\uFF0C\u8BFB\u5230\u7684\u6570\u636E\u4E0E\u7B2C\u4E00\u6B21\u76F8\u540C\nCOMMIT;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. \u6301\u4E45\u6027(Durability)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B9A\u4E49"}),"\uFF1A\n\u4E00\u65E6\u4E8B\u52A1\u63D0\u4EA4\uFF0C\u5176\u6240\u505A\u7684\u4FEE\u6539\u5C31\u4F1A\u6C38\u4E45\u4FDD\u5B58\u5728\u6570\u636E\u5E93\u4E2D\uFF0C\u5373\u4F7F\u7CFB\u7EDF\u5D29\u6E83\u4E5F\u4E0D\u4F1A\u4E22\u5931\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B9E\u73B0\u673A\u5236"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u901A\u8FC7**\u91CD\u505A\u65E5\u5FD7(redo log)**\u5B9E\u73B0"}),"\n",(0,r.jsx)(s.li,{children:"\u4E8B\u52A1\u63D0\u4EA4\u65F6\uFF0C\u786E\u4FDD\u6240\u6709\u4FEE\u6539\u90FD\u5DF2\u5199\u5165\u91CD\u505A\u65E5\u5FD7"}),"\n",(0,r.jsx)(s.li,{children:"\u7CFB\u7EDF\u5D29\u6E83\u540E\uFF0C\u901A\u8FC7\u91CD\u505A\u65E5\u5FD7\u6062\u590D\u672A\u5199\u5165\u78C1\u76D8\u7684\u6570\u636E"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u793A\u4F8B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"START TRANSACTION;\nUPDATE important_data SET value = 'new_value' WHERE id = 1;\nCOMMIT;  -- \u6570\u636E\u6C38\u4E45\u4FDD\u5B58\uFF0C\u5373\u4F7F\u7ACB\u5373\u53D1\u751F\u670D\u52A1\u5668\u5D29\u6E83\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL InnoDB\u7684ACID\u5B9E\u73B0\u673A\u5236"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u539F\u5B50\u6027\u548C\u6301\u4E45\u6027\u5B9E\u73B0"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u91CD\u505A\u65E5\u5FD7(redo log)"}),"\uFF1A\u8BB0\u5F55\u4E8B\u52A1\u4FEE\u6539\u7684\u9875\u9762\u6570\u636E\uFF0C\u7528\u4E8E\u6062\u590D\u5DF2\u63D0\u4EA4\u4E8B\u52A1\u7684\u6570\u636E"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u56DE\u6EDA\u6BB5(undo log)"}),"\uFF1A\u8BB0\u5F55\u6570\u636E\u88AB\u4FEE\u6539\u524D\u7684\u503C\uFF0C\u7528\u4E8E\u56DE\u6EDA\u672A\u63D0\u4EA4\u7684\u4E8B\u52A1"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4E24\u9636\u6BB5\u63D0\u4EA4"}),"\uFF1A\u5148\u5199\u91CD\u505A\u65E5\u5FD7\uFF0C\u518D\u4FEE\u6539\u6570\u636E\u9875"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7EC4\u63D0\u4EA4"}),"\uFF1A\u591A\u4E2A\u4E8B\u52A1\u7684\u65E5\u5FD7\u4E00\u8D77\u5237\u5165\u78C1\u76D8\uFF0C\u63D0\u9AD8\u6027\u80FD"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u4E00\u81F4\u6027\u5B9E\u73B0"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5F3A\u5236\u7EA6\u675F"}),"\uFF1A\u4E3B\u952E\u3001\u5916\u952E\u3001\u552F\u4E00\u6027\u7EA6\u675F\u7B49"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u56DE\u6EDA\u673A\u5236"}),"\uFF1A\u5F53\u8FDD\u53CD\u7EA6\u675F\u65F6\u56DE\u6EDA\u4E8B\u52A1"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5D29\u6E83\u6062\u590D"}),"\uFF1A\u670D\u52A1\u5668\u5D29\u6E83\u540E\u81EA\u52A8\u6062\u590D\u5230\u4E00\u81F4\u72B6\u6001"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u9694\u79BB\u6027\u5B9E\u73B0"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u9501\u673A\u5236"}),"\uFF1A\u8868\u9501\u3001\u884C\u9501\u3001\u610F\u5411\u9501\u3001\u95F4\u9699\u9501\u7B49"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"MVCC"}),"\uFF1A\u901A\u8FC7\u56DE\u6EDA\u6BB5\u5B9E\u73B0\u7684\u591A\u7248\u672C\u5E76\u53D1\u63A7\u5236"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4E8B\u52A1ID\u548C\u7248\u672C\u53F7"}),"\uFF1A\u6BCF\u4E2A\u4E8B\u52A1\u6709\u552F\u4E00ID\uFF0C\u6BCF\u6B21\u4FEE\u6539\u751F\u6210\u65B0\u7248\u672C"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4E00\u81F4\u6027\u8BFB\u89C6\u56FE"}),"\uFF1A\u4E8B\u52A1\u5F00\u59CB\u65F6\u786E\u5B9A\u53EF\u89C1\u7684\u7248\u672C\u8303\u56F4"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E8B\u52A1\u76F8\u5173\u914D\u7F6E"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770B\u5F53\u524D\u4F1A\u8BDD\u9694\u79BB\u7EA7\u522B\nSELECT @@transaction_isolation;\n\n-- \u67E5\u770B\u81EA\u52A8\u63D0\u4EA4\u72B6\u6001\nSELECT @@autocommit;\n\n-- \u8BBE\u7F6E\u81EA\u52A8\u63D0\u4EA4\nSET autocommit = 1;  -- \u5F00\u542F\nSET autocommit = 0;  -- \u5173\u95ED\n\n-- \u624B\u52A8\u63A7\u5236\u4E8B\u52A1\nSTART TRANSACTION;\n-- \u6267\u884CSQL\u8BED\u53E5\nCOMMIT;  -- \u6216 ROLLBACK;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E8B\u52A1\u7684\u6027\u80FD\u5F71\u54CD"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u66F4\u9AD8\u7684\u9694\u79BB\u7EA7\u522B\u901A\u5E38\u610F\u5473\u7740\u66F4\u4F4E\u7684\u5E76\u53D1\u6027\u80FD"}),"\n",(0,r.jsx)(s.li,{children:"\u4E8B\u52A1\u65E5\u5FD7\u4F1A\u589E\u52A0I/O\u64CD\u4F5C"}),"\n",(0,r.jsx)(s.li,{children:"\u957F\u4E8B\u52A1\u4F1A\u5360\u7528\u7CFB\u7EDF\u8D44\u6E90\uFF0C\u5E94\u907F\u514D"}),"\n",(0,r.jsx)(s.li,{children:"\u5408\u7406\u8BBE\u7F6E\u9694\u79BB\u7EA7\u522B\u53EF\u4EE5\u5E73\u8861\u4E00\u81F4\u6027\u548C\u6027\u80FD"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"5-mysql\u7684\u56DB\u79CD\u9694\u79BB\u7EA7\u522B\u662F\u4EC0\u4E48\u5206\u522B\u4F1A\u4EA7\u751F\u4EC0\u4E48\u95EE\u9898",children:"5. MySQL\u7684\u56DB\u79CD\u9694\u79BB\u7EA7\u522B\u662F\u4EC0\u4E48\uFF1F\u5206\u522B\u4F1A\u4EA7\u751F\u4EC0\u4E48\u95EE\u9898\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL\u7684\u56DB\u79CD\u4E8B\u52A1\u9694\u79BB\u7EA7\u522B"}),"\u5B9A\u4E49\u4E86\u5728\u591A\u4E2A\u4E8B\u52A1\u5E76\u53D1\u6267\u884C\u65F6\uFF0C\u4E00\u4E2A\u4E8B\u52A1\u7684\u64CD\u4F5C\u5BF9\u5176\u4ED6\u4E8B\u52A1\u7684\u53EF\u89C1\u7A0B\u5EA6\u3002\u4E0D\u540C\u7684\u9694\u79BB\u7EA7\u522B\u89E3\u51B3\u4E86\u4E0D\u540C\u7684\u5E76\u53D1\u95EE\u9898\uFF0C\u4F46\u4E5F\u5E26\u6765\u4E86\u6027\u80FD\u548C\u529F\u80FD\u4E0A\u7684\u6743\u8861\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u8BFB\u672A\u63D0\u4EA4(READ UNCOMMITTED)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B9A\u4E49"}),"\uFF1A\n\u4E00\u4E2A\u4E8B\u52A1\u53EF\u4EE5\u8BFB\u53D6\u53E6\u4E00\u4E2A\u672A\u63D0\u4EA4\u4E8B\u52A1\u7684\u6570\u636E\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7279\u70B9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6700\u4F4E\u7684\u9694\u79BB\u7EA7\u522B\uFF0C\u63D0\u4F9B\u6700\u9AD8\u7684\u5E76\u53D1\u6027"}),"\n",(0,r.jsx)(s.li,{children:"\u4E0D\u4F7F\u7528\u9501\u673A\u5236\uFF0C\u4E0D\u963B\u585E\u5176\u4ED6\u4E8B\u52A1"}),"\n",(0,r.jsx)(s.li,{children:'\u53EF\u80FD\u8BFB\u53D6\u5230\u5176\u4ED6\u4E8B\u52A1\u672A\u63D0\u4EA4\u7684"\u810F"\u6570\u636E'}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B58\u5728\u7684\u95EE\u9898"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u810F\u8BFB(Dirty Read)"}),"\uFF1A\u4E8B\u52A1A\u8BFB\u53D6\u4E86\u4E8B\u52A1B\u4FEE\u6539\u4F46\u672A\u63D0\u4EA4\u7684\u6570\u636E\uFF0C\u5982\u679C\u4E8B\u52A1B\u56DE\u6EDA\uFF0C\u5219\u4E8B\u52A1A\u8BFB\u53D6\u7684\u6570\u636E\u662F\u65E0\u6548\u7684"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4E0D\u53EF\u91CD\u590D\u8BFB(Non-repeatable Read)"}),"\uFF1A\u540C\u4E00\u4E8B\u52A1\u5185\uFF0C\u591A\u6B21\u8BFB\u53D6\u540C\u4E00\u6570\u636E\u8FD4\u56DE\u7684\u7ED3\u679C\u4E0D\u540C"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5E7B\u8BFB(Phantom Read)"}),"\uFF1A\u540C\u4E00\u4E8B\u52A1\u5185\uFF0C\u540C\u6837\u7684\u67E5\u8BE2\u6761\u4EF6\u8FD4\u56DE\u4E0D\u540C\u7684\u7ED3\u679C\u96C6"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u793A\u4F8B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4F1A\u8BDD1\nSET SESSION TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;\nSTART TRANSACTION;\n-- \u6B64\u65F6\u4F1A\u770B\u5230\u4F1A\u8BDD2\u672A\u63D0\u4EA4\u7684\u4FEE\u6539\nSELECT * FROM accounts WHERE id = 1;\nCOMMIT;\n\n-- \u4F1A\u8BDD2\nSTART TRANSACTION;\nUPDATE accounts SET balance = 2000 WHERE id = 1;\n-- \u6B64\u65F6\u8FD8\u672A\u63D0\u4EA4\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u8BFB\u5DF2\u63D0\u4EA4(READ COMMITTED)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B9A\u4E49"}),"\uFF1A\n\u4E00\u4E2A\u4E8B\u52A1\u53EA\u80FD\u8BFB\u53D6\u53E6\u4E00\u4E2A\u5DF2\u63D0\u4EA4\u4E8B\u52A1\u7684\u6570\u636E\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7279\u70B9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528\u884C\u7EA7\u9501\u548CMVCC\u673A\u5236"}),"\n",(0,r.jsx)(s.li,{children:"\u6BCF\u6B21\u67E5\u8BE2\u90FD\u751F\u6210\u4E00\u4E2A\u65B0\u7684\u5FEB\u7167"}),"\n",(0,r.jsx)(s.li,{children:"\u53EA\u80FD\u8BFB\u53D6\u5230\u5DF2\u63D0\u4EA4\u7684\u6570\u636E\uFF0C\u89E3\u51B3\u4E86\u810F\u8BFB\u95EE\u9898"}),"\n",(0,r.jsx)(s.li,{children:"\u5927\u591A\u6570\u6570\u636E\u5E93\u7684\u9ED8\u8BA4\u9694\u79BB\u7EA7\u522B(\u4F46\u4E0D\u662FMySQL InnoDB)"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B58\u5728\u7684\u95EE\u9898"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4E0D\u53EF\u91CD\u590D\u8BFB(Non-repeatable Read)"}),"\uFF1A\u540C\u4E00\u4E8B\u52A1\u5185\uFF0C\u591A\u6B21\u8BFB\u53D6\u540C\u4E00\u6570\u636E\u8FD4\u56DE\u7684\u7ED3\u679C\u4E0D\u540C"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5E7B\u8BFB(Phantom Read)"}),"\uFF1A\u540C\u4E00\u4E8B\u52A1\u5185\uFF0C\u540C\u6837\u7684\u67E5\u8BE2\u6761\u4EF6\u8FD4\u56DE\u4E0D\u540C\u7684\u7ED3\u679C\u96C6"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u793A\u4F8B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4F1A\u8BDD1\nSET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED;\nSTART TRANSACTION;\nSELECT * FROM accounts WHERE id = 1;  -- balance=1000\n-- \u4F1A\u8BDD2\u6267\u884C\u66F4\u65B0\u5E76\u63D0\u4EA4\u540E\nSELECT * FROM accounts WHERE id = 1;  -- balance=2000\uFF0C\u51FA\u73B0\u4E0D\u53EF\u91CD\u590D\u8BFB\nCOMMIT;\n\n-- \u4F1A\u8BDD2\nSTART TRANSACTION;\nUPDATE accounts SET balance = 2000 WHERE id = 1;\nCOMMIT;  -- \u63D0\u4EA4\u4E8B\u52A1\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u53EF\u91CD\u590D\u8BFB(REPEATABLE READ)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B9A\u4E49"}),"\uFF1A\n\u4E00\u4E2A\u4E8B\u52A1\u6267\u884C\u8FC7\u7A0B\u4E2D\u770B\u5230\u7684\u6570\u636E\u59CB\u7EC8\u662F\u4E00\u81F4\u7684\uFF0C\u65E0\u8BBA\u5176\u4ED6\u4E8B\u52A1\u5BF9\u6570\u636E\u505A\u4E86\u4EC0\u4E48\u4FEE\u6539\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7279\u70B9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"MySQL InnoDB\u7684\u9ED8\u8BA4\u9694\u79BB\u7EA7\u522B"}),"\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528\u884C\u7EA7\u9501\u548CMVCC\u673A\u5236"}),"\n",(0,r.jsx)(s.li,{children:"\u4E8B\u52A1\u5F00\u59CB\u65F6\u521B\u5EFA\u4E00\u4E2A\u5FEB\u7167\uFF0C\u6574\u4E2A\u4E8B\u52A1\u671F\u95F4\u90FD\u4F7F\u7528\u8BE5\u5FEB\u7167"}),"\n",(0,r.jsx)(s.li,{children:"\u89E3\u51B3\u4E86\u810F\u8BFB\u548C\u4E0D\u53EF\u91CD\u590D\u8BFB\u95EE\u9898"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B58\u5728\u7684\u95EE\u9898"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5E7B\u8BFB(Phantom Read)"}),"\uFF1A\u7406\u8BBA\u4E0A\u4F1A\u5B58\u5728\uFF0C\u4F46InnoDB\u901A\u8FC7\u95F4\u9699\u9501(Gap Lock)\u89E3\u51B3\u4E86\u5927\u90E8\u5206\u5E7B\u8BFB\u95EE\u9898"]}),"\n",(0,r.jsx)(s.li,{children:"\u95F4\u9699\u9501\u53EF\u80FD\u5BFC\u81F4\u6B7B\u9501\u51E0\u7387\u589E\u52A0"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u793A\u4F8B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4F1A\u8BDD1\nSET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;\nSTART TRANSACTION;\nSELECT * FROM accounts WHERE id = 1;  -- balance=1000\n-- \u4F1A\u8BDD2\u6267\u884C\u66F4\u65B0\u5E76\u63D0\u4EA4\u540E\nSELECT * FROM accounts WHERE id = 1;  -- balance\u4ECD\u4E3A1000\uFF0C\u89E3\u51B3\u4E86\u4E0D\u53EF\u91CD\u590D\u8BFB\nCOMMIT;\n\n-- \u4F1A\u8BDD2\nSTART TRANSACTION;\nUPDATE accounts SET balance = 2000 WHERE id = 1;\nCOMMIT;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. \u4E32\u884C\u5316(SERIALIZABLE)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B9A\u4E49"}),"\uFF1A\n\u6700\u9AD8\u7684\u9694\u79BB\u7EA7\u522B\uFF0C\u5F3A\u5236\u4E8B\u52A1\u4E32\u884C\u6267\u884C\uFF0C\u5C31\u50CF\u5B83\u4EEC\u662F\u4E00\u4E2A\u63A5\u4E00\u4E2A\u6267\u884C\u7684\u4E00\u6837\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7279\u70B9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528\u8868\u7EA7\u8BFB\u5199\u9501\u6216\u884C\u7EA7\u9501"}),"\n",(0,r.jsx)(s.li,{children:"\u8BFB\u53D6\u6570\u636E\u65F6\u52A0\u5171\u4EAB\u9501\uFF0C\u5176\u4ED6\u4E8B\u52A1\u65E0\u6CD5\u4FEE\u6539\u8FD9\u4E9B\u6570\u636E"}),"\n",(0,r.jsx)(s.li,{children:"\u5199\u5165\u6570\u636E\u65F6\u52A0\u6392\u4ED6\u9501\uFF0C\u5176\u4ED6\u4E8B\u52A1\u65E0\u6CD5\u8BFB\u53D6\u6216\u4FEE\u6539\u8FD9\u4E9B\u6570\u636E"}),"\n",(0,r.jsx)(s.li,{children:"\u53EF\u80FD\u5BFC\u81F4\u5927\u91CF\u963B\u585E\u548C\u8D85\u65F6"}),"\n",(0,r.jsx)(s.li,{children:"\u89E3\u51B3\u4E86\u6240\u6709\u5E76\u53D1\u95EE\u9898"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u89E3\u51B3\u7684\u95EE\u9898"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5B8C\u5168\u89E3\u51B3\u4E86\u810F\u8BFB\u3001\u4E0D\u53EF\u91CD\u590D\u8BFB\u548C\u5E7B\u8BFB\u95EE\u9898"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u793A\u4F8B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4F1A\u8BDD1\nSET SESSION TRANSACTION ISOLATION LEVEL SERIALIZABLE;\nSTART TRANSACTION;\nSELECT * FROM accounts WHERE balance > 1000;  -- \u4F1A\u5BF9\u7B26\u5408\u6761\u4EF6\u7684\u884C\u52A0\u9501\n-- \u6B64\u65F6\u4F1A\u8BDD2\u65E0\u6CD5\u63D2\u5165\u65B0\u7B26\u5408\u6761\u4EF6\u7684\u8BB0\u5F55\uFF0C\u907F\u514D\u4E86\u5E7B\u8BFB\nCOMMIT;\n\n-- \u4F1A\u8BDD2\nSTART TRANSACTION;\nINSERT INTO accounts VALUES(3, 'User3', 1500);  -- \u4F1A\u88AB\u963B\u585E\u76F4\u5230\u4F1A\u8BDD1\u63D0\u4EA4\u6216\u8D85\u65F6\nCOMMIT;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u56DB\u79CD\u9694\u79BB\u7EA7\u522B\u5BF9\u6BD4"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u9694\u79BB\u7EA7\u522B"}),(0,r.jsx)(s.th,{children:"\u810F\u8BFB"}),(0,r.jsx)(s.th,{children:"\u4E0D\u53EF\u91CD\u590D\u8BFB"}),(0,r.jsx)(s.th,{children:"\u5E7B\u8BFB"}),(0,r.jsx)(s.th,{children:"\u9501\u673A\u5236"}),(0,r.jsx)(s.th,{children:"\u6027\u80FD"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u8BFB\u672A\u63D0\u4EA4"}),(0,r.jsx)(s.td,{children:"\u53EF\u80FD"}),(0,r.jsx)(s.td,{children:"\u53EF\u80FD"}),(0,r.jsx)(s.td,{children:"\u53EF\u80FD"}),(0,r.jsx)(s.td,{children:"\u6700\u5C11"}),(0,r.jsx)(s.td,{children:"\u6700\u9AD8"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u8BFB\u5DF2\u63D0\u4EA4"}),(0,r.jsx)(s.td,{children:"\u907F\u514D"}),(0,r.jsx)(s.td,{children:"\u53EF\u80FD"}),(0,r.jsx)(s.td,{children:"\u53EF\u80FD"}),(0,r.jsx)(s.td,{children:"\u8F83\u5C11"}),(0,r.jsx)(s.td,{children:"\u9AD8"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u53EF\u91CD\u590D\u8BFB"}),(0,r.jsx)(s.td,{children:"\u907F\u514D"}),(0,r.jsx)(s.td,{children:"\u907F\u514D"}),(0,r.jsx)(s.td,{children:"\u57FA\u672C\u907F\u514D*"}),(0,r.jsx)(s.td,{children:"\u8F83\u591A"}),(0,r.jsx)(s.td,{children:"\u4E2D\u7B49"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u4E32\u884C\u5316"}),(0,r.jsx)(s.td,{children:"\u907F\u514D"}),(0,r.jsx)(s.td,{children:"\u907F\u514D"}),(0,r.jsx)(s.td,{children:"\u907F\u514D"}),(0,r.jsx)(s.td,{children:"\u6700\u591A"}),(0,r.jsx)(s.td,{children:"\u6700\u4F4E"})]})]})]}),"\n",(0,r.jsx)(s.p,{children:"*\u6CE8\uFF1AInnoDB\u5728\u53EF\u91CD\u590D\u8BFB\u7EA7\u522B\u4E0B\u4F7F\u7528\u95F4\u9699\u9501\u89E3\u51B3\u4E86\u5927\u90E8\u5206\u5E7B\u8BFB\u95EE\u9898"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL\u4E2D\u67E5\u770B\u548C\u8BBE\u7F6E\u9694\u79BB\u7EA7\u522B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770B\u5168\u5C40\u9694\u79BB\u7EA7\u522B\nSELECT @@GLOBAL.transaction_isolation;\n\n-- \u67E5\u770B\u5F53\u524D\u4F1A\u8BDD\u9694\u79BB\u7EA7\u522B\nSELECT @@SESSION.transaction_isolation;\n\n-- \u8BBE\u7F6E\u5168\u5C40\u9694\u79BB\u7EA7\u522B\nSET GLOBAL TRANSACTION ISOLATION LEVEL READ COMMITTED;\n\n-- \u8BBE\u7F6E\u5F53\u524D\u4F1A\u8BDD\u9694\u79BB\u7EA7\u522B\nSET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B9E\u9645\u5E94\u7528\u4E2D\u7684\u9009\u62E9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u8BFB\u672A\u63D0\u4EA4"}),"\uFF1A\u51E0\u4E4E\u4E0D\u4F7F\u7528\uFF0C\u9664\u975E\u5BF9\u6570\u636E\u4E00\u81F4\u6027\u6CA1\u6709\u8981\u6C42"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u8BFB\u5DF2\u63D0\u4EA4"}),"\uFF1A\u9002\u5408\u5927\u591A\u6570Web\u5E94\u7528\uFF0C\u51CF\u5C11\u9501\u7ADE\u4E89"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u53EF\u91CD\u590D\u8BFB"}),"\uFF1A\u9002\u5408\u5BF9\u6570\u636E\u4E00\u81F4\u6027\u8981\u6C42\u8F83\u9AD8\u7684\u573A\u666F\uFF0C\u5982\u91D1\u878D\u7CFB\u7EDF"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4E32\u884C\u5316"}),"\uFF1A\u53EA\u9002\u7528\u4E8E\u4E8B\u52A1\u91CF\u6781\u4F4E\u4F46\u5BF9\u4E00\u81F4\u6027\u8981\u6C42\u6781\u9AD8\u7684\u573A\u666F"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"InnoDB\u7279\u6B8A\u5904\u7406"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"InnoDB\u5728\u53EF\u91CD\u590D\u8BFB\u9694\u79BB\u7EA7\u522B\u4E0B\uFF0C\u901A\u8FC7Next-Key Lock(\u8BB0\u5F55\u9501+\u95F4\u9699\u9501)\u89E3\u51B3\u4E86\u5927\u90E8\u5206\u5E7B\u8BFB\u95EE\u9898"}),"\n",(0,r.jsx)(s.li,{children:"\u8FD9\u4F7F\u5F97InnoDB\u7684\u53EF\u91CD\u590D\u8BFB\u9694\u79BB\u7EA7\u522B\u6BD4\u6807\u51C6SQL\u89C4\u8303\u4E2D\u7684\u5B9A\u4E49\u66F4\u4E3A\u4E25\u683C"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"6-\u4EC0\u4E48\u662Fmvcc\u5B83\u662F\u5982\u4F55\u5DE5\u4F5C\u7684",children:"6. \u4EC0\u4E48\u662FMVCC\uFF1F\u5B83\u662F\u5982\u4F55\u5DE5\u4F5C\u7684\uFF1F"}),"\n",(0,r.jsx)(s.p,{children:"**MVCC(Multi-Version Concurrency Control\uFF0C\u591A\u7248\u672C\u5E76\u53D1\u63A7\u5236)**\u662FInnoDB\u5B9E\u73B0\u9AD8\u5E76\u53D1\u7684\u6838\u5FC3\u673A\u5236\uFF0C\u5B83\u901A\u8FC7\u4FDD\u5B58\u6570\u636E\u7684\u591A\u4E2A\u7248\u672C\u6765\u5B9E\u73B0\u8BFB\u5199\u4E0D\u963B\u585E\u3002"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6838\u5FC3\u6982\u5FF5"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u7248\u672C\u94FE"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\u6BCF\u884C\u6570\u636E\u90FD\u6709\u4E24\u4E2A\u9690\u85CF\u5217\uFF1A",(0,r.jsx)(s.code,{children:"DB_TRX_ID"}),"(\u4E8B\u52A1ID)\u548C",(0,r.jsx)(s.code,{children:"DB_ROLL_PTR"}),"(\u56DE\u6EDA\u6307\u9488)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"DB_TRX_ID"}),"\uFF1A\u8BB0\u5F55\u6700\u540E\u4FEE\u6539\u8BE5\u884C\u7684\u4E8B\u52A1ID"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"DB_ROLL_PTR"}),"\uFF1A\u6307\u5411undo log\u4E2D\u8BE5\u884C\u7684\u4E0A\u4E00\u4E2A\u7248\u672C"]}),"\n",(0,r.jsx)(s.li,{children:"\u901A\u8FC7\u56DE\u6EDA\u6307\u9488\u5F62\u6210\u7248\u672C\u94FE"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. Read View(\u8BFB\u89C6\u56FE)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4E8B\u52A1\u5F00\u59CB\u65F6\u521B\u5EFA\u7684\u4E00\u81F4\u6027\u89C6\u56FE"}),"\n",(0,r.jsx)(s.li,{children:"\u5305\u542B\u5F53\u524D\u6D3B\u8DC3\u4E8B\u52A1\u5217\u8868"}),"\n",(0,r.jsx)(s.li,{children:"\u51B3\u5B9A\u5F53\u524D\u4E8B\u52A1\u80FD\u770B\u5230\u54EA\u4E9B\u7248\u672C\u7684\u6570\u636E"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5DE5\u4F5C\u539F\u7406"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"\u5F53\u524D\u6570\u636E\u884C\uFF1A\nid | name | age | DB_TRX_ID | DB_ROLL_PTR\n1  | Tom  | 25  | 100       | ptr1\n\n\u7248\u672C\u94FE(undo log):\nptr1 -> (name=John, age=20, TRX_ID=80)\n     -> (name=Mike, age=18, TRX_ID=60)\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Read View\u5224\u65AD\u89C4\u5219"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- Read View\u5305\u542B\uFF1A\n- m_ids: \u5F53\u524D\u6D3B\u8DC3\u4E8B\u52A1ID\u5217\u8868\n- min_trx_id: \u6700\u5C0F\u6D3B\u8DC3\u4E8B\u52A1ID\n- max_trx_id: \u4E0B\u4E00\u4E2A\u8981\u5206\u914D\u7684\u4E8B\u52A1ID\n- creator_trx_id: \u521B\u5EFA\u8BE5Read View\u7684\u4E8B\u52A1ID\n\n-- \u53EF\u89C1\u6027\u5224\u65AD\uFF1A\n1. \u5982\u679C DB_TRX_ID < min_trx_id\uFF1A\u53EF\u89C1(\u5DF2\u63D0\u4EA4)\n2. \u5982\u679C DB_TRX_ID >= max_trx_id\uFF1A\u4E0D\u53EF\u89C1(\u672A\u6765\u4E8B\u52A1)\n3. \u5982\u679C min_trx_id <= DB_TRX_ID < max_trx_id\uFF1A\n   - \u5982\u679C DB_TRX_ID \u5728 m_ids \u4E2D\uFF1A\u4E0D\u53EF\u89C1(\u672A\u63D0\u4EA4)\n   - \u5426\u5219\uFF1A\u53EF\u89C1(\u5DF2\u63D0\u4EA4)\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E0D\u540C\u9694\u79BB\u7EA7\u522B\u7684MVCC\u5B9E\u73B0"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"READ COMMITTED"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6BCF\u6B21\u67E5\u8BE2\u90FD\u521B\u5EFA\u65B0\u7684Read View"}),"\n",(0,r.jsx)(s.li,{children:"\u80FD\u8BFB\u5230\u5176\u4ED6\u4E8B\u52A1\u5DF2\u63D0\u4EA4\u7684\u4FEE\u6539"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"REPEATABLE READ"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4E8B\u52A1\u5F00\u59CB\u65F6\u521B\u5EFARead View\uFF0C\u6574\u4E2A\u4E8B\u52A1\u671F\u95F4\u4F7F\u7528\u540C\u4E00\u4E2A"}),"\n",(0,r.jsx)(s.li,{children:"\u4FDD\u8BC1\u53EF\u91CD\u590D\u8BFB"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u793A\u4F8B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4E8B\u52A1A (TRX_ID=100)\nSTART TRANSACTION;\nSELECT * FROM users WHERE id = 1;  -- age=20\n\n-- \u4E8B\u52A1B (TRX_ID=101)\nSTART TRANSACTION;\nUPDATE users SET age = 25 WHERE id = 1;\nCOMMIT;\n\n-- \u4E8B\u52A1A\u7EE7\u7EED\nSELECT * FROM users WHERE id = 1;  \n-- RC\u7EA7\u522B\uFF1Aage=25 (\u770B\u5230\u65B0\u7248\u672C)\n-- RR\u7EA7\u522B\uFF1Aage=20 (\u770B\u5230\u65E7\u7248\u672C)\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MVCC\u7684\u4F18\u52BF"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"\u8BFB\u4E0D\u52A0\u9501\uFF0C\u5199\u4E0D\u963B\u585E\u8BFB"}),"\n",(0,r.jsx)(s.li,{children:"\u63D0\u9AD8\u5E76\u53D1\u6027\u80FD"}),"\n",(0,r.jsx)(s.li,{children:"\u5B9E\u73B0\u4E00\u81F4\u6027\u975E\u9501\u5B9A\u8BFB"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MVCC\u7684\u5C40\u9650"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"\u53EA\u5728RC\u548CRR\u9694\u79BB\u7EA7\u522B\u4E0B\u5DE5\u4F5C"}),"\n",(0,r.jsx)(s.li,{children:"\u4E0D\u80FD\u5B8C\u5168\u907F\u514D\u5E7B\u8BFB(\u9700\u8981\u914D\u5408\u95F4\u9699\u9501)"}),"\n",(0,r.jsx)(s.li,{children:"undo log\u53EF\u80FD\u5360\u7528\u5927\u91CF\u7A7A\u95F4"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"7-mysql\u4E2D\u7684\u9501\u6709\u54EA\u4E9B\u7C7B\u578B",children:"7. MySQL\u4E2D\u7684\u9501\u6709\u54EA\u4E9B\u7C7B\u578B\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL\u7684\u9501\u673A\u5236"}),"\u7528\u4E8E\u63A7\u5236\u5E76\u53D1\u8BBF\u95EE\uFF0C\u4FDD\u8BC1\u6570\u636E\u4E00\u81F4\u6027\u3002\u6839\u636E\u4E0D\u540C\u7684\u5206\u7C7B\u7EF4\u5EA6\uFF0CMySQL\u6709\u591A\u79CD\u9501\u7C7B\u578B\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6309\u9501\u7C92\u5EA6\u5206\u7C7B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u8868\u7EA7\u9501(Table Lock)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9501\u5B9A\u6574\u5F20\u8868"}),"\n",(0,r.jsx)(s.li,{children:"\u5F00\u9500\u5C0F\uFF0C\u52A0\u9501\u5FEB"}),"\n",(0,r.jsx)(s.li,{children:"\u9501\u7C92\u5EA6\u5927\uFF0C\u5E76\u53D1\u5EA6\u4F4E"}),"\n",(0,r.jsx)(s.li,{children:"MyISAM\u9ED8\u8BA4\u4F7F\u7528"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u624B\u52A8\u52A0\u8868\u9501\nLOCK TABLES users READ;   -- \u8BFB\u9501\nLOCK TABLES users WRITE;  -- \u5199\u9501\nUNLOCK TABLES;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u884C\u7EA7\u9501(Row Lock)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9501\u5B9A\u5355\u884C\u6570\u636E"}),"\n",(0,r.jsx)(s.li,{children:"\u5F00\u9500\u5927\uFF0C\u52A0\u9501\u6162"}),"\n",(0,r.jsx)(s.li,{children:"\u9501\u7C92\u5EA6\u5C0F\uFF0C\u5E76\u53D1\u5EA6\u9AD8"}),"\n",(0,r.jsx)(s.li,{children:"InnoDB\u9ED8\u8BA4\u4F7F\u7528"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u9875\u7EA7\u9501(Page Lock)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9501\u5B9A\u6570\u636E\u9875"}),"\n",(0,r.jsx)(s.li,{children:"\u4ECB\u4E8E\u8868\u9501\u548C\u884C\u9501\u4E4B\u95F4"}),"\n",(0,r.jsx)(s.li,{children:"BDB\u5B58\u50A8\u5F15\u64CE\u4F7F\u7528"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6309\u9501\u7C7B\u578B\u5206\u7C7B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u5171\u4EAB\u9501(S Lock\uFF0C\u8BFB\u9501)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5141\u8BB8\u591A\u4E2A\u4E8B\u52A1\u540C\u65F6\u8BFB\u53D6"}),"\n",(0,r.jsx)(s.li,{children:"\u963B\u6B62\u5176\u4ED6\u4E8B\u52A1\u5199\u5165"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"SELECT * FROM users WHERE id = 1 LOCK IN SHARE MODE;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u6392\u4ED6\u9501(X Lock\uFF0C\u5199\u9501)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u963B\u6B62\u5176\u4ED6\u4E8B\u52A1\u8BFB\u53D6\u548C\u5199\u5165"}),"\n",(0,r.jsx)(s.li,{children:"\u53EA\u6709\u6301\u9501\u4E8B\u52A1\u53EF\u4EE5\u8BBF\u95EE"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"SELECT * FROM users WHERE id = 1 FOR UPDATE;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"InnoDB\u7279\u6709\u9501"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u8BB0\u5F55\u9501(Record Lock)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9501\u5B9A\u7D22\u5F15\u8BB0\u5F55"}),"\n",(0,r.jsx)(s.li,{children:"\u9632\u6B62\u5176\u4ED6\u4E8B\u52A1\u4FEE\u6539\u8BE5\u884C"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u95F4\u9699\u9501(Gap Lock)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9501\u5B9A\u7D22\u5F15\u8BB0\u5F55\u4E4B\u95F4\u7684\u95F4\u9699"}),"\n",(0,r.jsx)(s.li,{children:"\u9632\u6B62\u5176\u4ED6\u4E8B\u52A1\u63D2\u5165\u6570\u636E"}),"\n",(0,r.jsx)(s.li,{children:"\u89E3\u51B3\u5E7B\u8BFB\u95EE\u9898"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. Next-Key Lock"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8BB0\u5F55\u9501 + \u95F4\u9699\u9501"}),"\n",(0,r.jsx)(s.li,{children:"\u9501\u5B9A\u8BB0\u5F55\u53CA\u5176\u524D\u9762\u7684\u95F4\u9699"}),"\n",(0,r.jsx)(s.li,{children:"RR\u9694\u79BB\u7EA7\u522B\u9ED8\u8BA4\u4F7F\u7528"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5047\u8BBEid\u6709\u7D22\u5F15\uFF0C\u503C\u4E3A1,5,10\nSELECT * FROM users WHERE id > 5 FOR UPDATE;\n-- \u9501\u5B9A\uFF1A(5,10]\u548C(10,+\u221E)\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. \u63D2\u5165\u610F\u5411\u9501(Insert Intention Lock)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u63D2\u5165\u524D\u83B7\u53D6\u7684\u7279\u6B8A\u95F4\u9699\u9501"}),"\n",(0,r.jsx)(s.li,{children:"\u591A\u4E2A\u4E8B\u52A1\u53EF\u4EE5\u540C\u65F6\u6301\u6709\u4E0D\u540C\u4F4D\u7F6E\u7684\u63D2\u5165\u610F\u5411\u9501"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"5. \u81EA\u589E\u9501(AUTO-INC Lock)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u7528\u4E8E\u81EA\u589E\u5217"}),"\n",(0,r.jsx)(s.li,{children:"\u4FDD\u8BC1\u81EA\u589E\u503C\u7684\u8FDE\u7EED\u6027"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6309\u9501\u6A21\u5F0F\u5206\u7C7B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u610F\u5411\u9501(Intention Lock)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8868\u7EA7\u9501\uFF0C\u7528\u4E8E\u534F\u8C03\u8868\u9501\u548C\u884C\u9501"}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u610F\u5411\u5171\u4EAB\u9501(IS)"}),"\uFF1A\u4E8B\u52A1\u60F3\u83B7\u53D6\u884C\u7684\u5171\u4EAB\u9501"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u610F\u5411\u6392\u4ED6\u9501(IX)"}),"\uFF1A\u4E8B\u52A1\u60F3\u83B7\u53D6\u884C\u7684\u6392\u4ED6\u9501"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9501\u517C\u5BB9\u6027\u77E9\u9635"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{}),(0,r.jsx)(s.th,{children:"X"}),(0,r.jsx)(s.th,{children:"IX"}),(0,r.jsx)(s.th,{children:"S"}),(0,r.jsx)(s.th,{children:"IS"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"X"}),(0,r.jsx)(s.td,{children:"\u2717"}),(0,r.jsx)(s.td,{children:"\u2717"}),(0,r.jsx)(s.td,{children:"\u2717"}),(0,r.jsx)(s.td,{children:"\u2717"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"IX"}),(0,r.jsx)(s.td,{children:"\u2717"}),(0,r.jsx)(s.td,{children:"\u2713"}),(0,r.jsx)(s.td,{children:"\u2717"}),(0,r.jsx)(s.td,{children:"\u2713"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"S"}),(0,r.jsx)(s.td,{children:"\u2717"}),(0,r.jsx)(s.td,{children:"\u2717"}),(0,r.jsx)(s.td,{children:"\u2713"}),(0,r.jsx)(s.td,{children:"\u2713"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"IS"}),(0,r.jsx)(s.td,{children:"\u2717"}),(0,r.jsx)(s.td,{children:"\u2713"}),(0,r.jsx)(s.td,{children:"\u2713"}),(0,r.jsx)(s.td,{children:"\u2713"})]})]})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u67E5\u770B\u9501\u4FE1\u606F"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770B\u5F53\u524D\u9501\nSHOW ENGINE INNODB STATUS;\n\n-- \u67E5\u770B\u9501\u7B49\u5F85\nSELECT * FROM information_schema.INNODB_LOCKS;\n\n-- \u67E5\u770B\u9501\u7B49\u5F85\u5173\u7CFB\nSELECT * FROM information_schema.INNODB_LOCK_WAITS;\n"})}),"\n",(0,r.jsx)(s.h3,{id:"8-\u4EC0\u4E48\u662F\u6B7B\u9501\u5982\u4F55\u907F\u514D\u6B7B\u9501",children:"8. \u4EC0\u4E48\u662F\u6B7B\u9501\uFF1F\u5982\u4F55\u907F\u514D\u6B7B\u9501\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6B7B\u9501"}),"\u662F\u6307\u4E24\u4E2A\u6216\u591A\u4E2A\u4E8B\u52A1\u4E92\u76F8\u6301\u6709\u5BF9\u65B9\u9700\u8981\u7684\u9501\uFF0C\u5BFC\u81F4\u6240\u6709\u4E8B\u52A1\u90FD\u65E0\u6CD5\u7EE7\u7EED\u6267\u884C\u7684\u60C5\u51B5\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6B7B\u9501\u793A\u4F8B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4E8B\u52A1A\nSTART TRANSACTION;\nUPDATE users SET name='A' WHERE id=1;  -- \u83B7\u53D6id=1\u7684\u9501\n-- \u7B49\u5F85\u83B7\u53D6id=2\u7684\u9501\nUPDATE users SET name='A' WHERE id=2;\n\n-- \u4E8B\u52A1B\nSTART TRANSACTION;\nUPDATE users SET name='B' WHERE id=2;  -- \u83B7\u53D6id=2\u7684\u9501\n-- \u7B49\u5F85\u83B7\u53D6id=1\u7684\u9501\nUPDATE users SET name='B' WHERE id=1;\n\n-- \u5F62\u6210\u6B7B\u9501\uFF1AA\u7B49B\u91CA\u653Eid=2\uFF0CB\u7B49A\u91CA\u653Eid=1\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6B7B\u9501\u7684\u56DB\u4E2A\u5FC5\u8981\u6761\u4EF6"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4E92\u65A5"}),"\uFF1A\u8D44\u6E90\u4E0D\u80FD\u88AB\u5171\u4EAB"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6301\u6709\u5E76\u7B49\u5F85"}),"\uFF1A\u6301\u6709\u8D44\u6E90\u7684\u540C\u65F6\u7B49\u5F85\u5176\u4ED6\u8D44\u6E90"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4E0D\u53EF\u5265\u593A"}),"\uFF1A\u8D44\u6E90\u4E0D\u80FD\u88AB\u5F3A\u5236\u91CA\u653E"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5FAA\u73AF\u7B49\u5F85"}),"\uFF1A\u5F62\u6210\u8D44\u6E90\u7B49\u5F85\u73AF\u8DEF"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL\u7684\u6B7B\u9501\u68C0\u6D4B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"InnoDB\u81EA\u52A8\u68C0\u6D4B\u6B7B\u9501"}),"\n",(0,r.jsx)(s.li,{children:"\u9009\u62E9\u56DE\u6EDA\u4EE3\u4EF7\u6700\u5C0F\u7684\u4E8B\u52A1"}),"\n",(0,r.jsx)(s.li,{children:"\u5176\u4ED6\u4E8B\u52A1\u53EF\u4EE5\u7EE7\u7EED\u6267\u884C"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u907F\u514D\u6B7B\u9501\u7684\u7B56\u7565"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u6309\u76F8\u540C\u987A\u5E8F\u8BBF\u95EE\u8D44\u6E90"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u597D\u7684\u505A\u6CD5\uFF1A\u7EDF\u4E00\u6309id\u5347\u5E8F\u8BBF\u95EE\nUPDATE users SET name='X' WHERE id IN (1,2,3) ORDER BY id;\n\n-- \u907F\u514D\uFF1A\u4E0D\u540C\u4E8B\u52A1\u4EE5\u4E0D\u540C\u987A\u5E8F\u8BBF\u95EE\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u7F29\u5C0F\u4E8B\u52A1\u8303\u56F4"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4E0D\u597D\uFF1A\u4E8B\u52A1\u65F6\u95F4\u8FC7\u957F\nSTART TRANSACTION;\nSELECT * FROM users;  -- \u5927\u91CF\u6570\u636E\n-- \u590D\u6742\u4E1A\u52A1\u903B\u8F91\nUPDATE users SET status=1;\nCOMMIT;\n\n-- \u597D\uFF1A\u53EA\u5728\u5FC5\u8981\u65F6\u4F7F\u7528\u4E8B\u52A1\n-- \u5148\u67E5\u8BE2\u6570\u636E\nSELECT * FROM users;\n-- \u4E1A\u52A1\u903B\u8F91\u5904\u7406\nSTART TRANSACTION;\nUPDATE users SET status=1;\nCOMMIT;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u964D\u4F4E\u9694\u79BB\u7EA7\u522B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4ECERR\u964D\u4F4E\u5230RC\uFF0C\u51CF\u5C11\u95F4\u9699\u9501\nSET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. \u6DFB\u52A0\u5408\u7406\u7684\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u51CF\u5C11\u9501\u5B9A\u7684\u884C\u6570"}),"\n",(0,r.jsx)(s.li,{children:"\u907F\u514D\u5168\u8868\u626B\u63CF"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"5. \u4F7F\u7528\u8F83\u5C0F\u7684\u4E8B\u52A1"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u51CF\u5C11\u9501\u6301\u6709\u65F6\u95F4"}),"\n",(0,r.jsx)(s.li,{children:"\u964D\u4F4E\u6B7B\u9501\u6982\u7387"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"6. \u8BBE\u7F6E\u9501\u7B49\u5F85\u8D85\u65F6"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u8BBE\u7F6E\u9501\u7B49\u5F85\u8D85\u65F6\u65F6\u95F4(\u79D2)\nSET innodb_lock_wait_timeout = 50;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"7. \u4F7F\u7528\u4E50\u89C2\u9501"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4F7F\u7528\u7248\u672C\u53F7\nUPDATE users SET balance=balance-100, version=version+1 \nWHERE id=1 AND version=10;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5904\u7406\u6B7B\u9501"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770B\u6700\u8FD1\u7684\u6B7B\u9501\u4FE1\u606F\nSHOW ENGINE INNODB STATUS;\n\n-- \u5728\u5E94\u7528\u5C42\u6355\u83B7\u6B7B\u9501\u5F02\u5E38\u5E76\u91CD\u8BD5\ntry {\n    // \u6267\u884C\u4E8B\u52A1\n} catch (DeadlockException e) {\n    // \u91CD\u8BD5\u903B\u8F91\n    retry();\n}\n"})}),"\n",(0,r.jsx)(s.h3,{id:"9-mysql\u7684\u4E3B\u4ECE\u590D\u5236\u539F\u7406\u662F\u4EC0\u4E48",children:"9. MySQL\u7684\u4E3B\u4ECE\u590D\u5236\u539F\u7406\u662F\u4EC0\u4E48\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL\u4E3B\u4ECE\u590D\u5236"}),"\u662F\u5B9E\u73B0\u6570\u636E\u5E93\u9AD8\u53EF\u7528\u3001\u8BFB\u5199\u5206\u79BB\u548C\u6570\u636E\u5907\u4EFD\u7684\u57FA\u7840\u6280\u672F\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u590D\u5236\u67B6\u6784"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"Master(\u4E3B\u5E93) --binlog--\x3e Slave(\u4ECE\u5E93)\n    |                        |\n  \u5199\u64CD\u4F5C                   \u8BFB\u64CD\u4F5C\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u590D\u5236\u539F\u7406(\u4E09\u4E2A\u7EBF\u7A0B)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. Master\u7684Binlog Dump\u7EBF\u7A0B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8BFB\u53D6binlog\u65E5\u5FD7"}),"\n",(0,r.jsx)(s.li,{children:"\u53D1\u9001\u7ED9Slave\u7684I/O\u7EBF\u7A0B"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. Slave\u7684I/O\u7EBF\u7A0B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8FDE\u63A5\u5230Master"}),"\n",(0,r.jsx)(s.li,{children:"\u8BF7\u6C42binlog\u65E5\u5FD7"}),"\n",(0,r.jsx)(s.li,{children:"\u5199\u5165\u672C\u5730relay log(\u4E2D\u7EE7\u65E5\u5FD7)"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. Slave\u7684SQL\u7EBF\u7A0B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8BFB\u53D6relay log"}),"\n",(0,r.jsx)(s.li,{children:"\u89E3\u6790\u5E76\u6267\u884CSQL\u8BED\u53E5"}),"\n",(0,r.jsx)(s.li,{children:"\u66F4\u65B0\u4ECE\u5E93\u6570\u636E"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u590D\u5236\u8FC7\u7A0B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"1. Master\u6267\u884CSQL -> \u5199\u5165binlog\n2. Slave I/O\u7EBF\u7A0B -> \u8BF7\u6C42binlog\n3. Master Dump\u7EBF\u7A0B -> \u53D1\u9001binlog\n4. Slave I/O\u7EBF\u7A0B -> \u5199\u5165relay log\n5. Slave SQL\u7EBF\u7A0B -> \u8BFB\u53D6relay log\n6. Slave SQL\u7EBF\u7A0B -> \u6267\u884CSQL\u66F4\u65B0\u6570\u636E\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u914D\u7F6E\u4E3B\u4ECE\u590D\u5236"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Master\u914D\u7F6E"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- my.cnf\n[mysqld]\nserver-id=1\nlog-bin=mysql-bin\nbinlog-format=ROW\n\n-- \u521B\u5EFA\u590D\u5236\u7528\u6237\nCREATE USER 'repl'@'%' IDENTIFIED BY 'password';\nGRANT REPLICATION SLAVE ON *.* TO 'repl'@'%';\n\n-- \u67E5\u770Bmaster\u72B6\u6001\nSHOW MASTER STATUS;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Slave\u914D\u7F6E"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- my.cnf\n[mysqld]\nserver-id=2\nrelay-log=relay-bin\nread-only=1\n\n-- \u914D\u7F6E\u4E3B\u5E93\u4FE1\u606F\nCHANGE MASTER TO\n  MASTER_HOST='master_ip',\n  MASTER_USER='repl',\n  MASTER_PASSWORD='password',\n  MASTER_LOG_FILE='mysql-bin.000001',\n  MASTER_LOG_POS=154;\n\n-- \u542F\u52A8\u590D\u5236\nSTART SLAVE;\n\n-- \u67E5\u770Bslave\u72B6\u6001\nSHOW SLAVE STATUS\\G\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u590D\u5236\u6A21\u5F0F"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u5F02\u6B65\u590D\u5236(\u9ED8\u8BA4)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Master\u4E0D\u7B49\u5F85Slave\u786E\u8BA4"}),"\n",(0,r.jsx)(s.li,{children:"\u6027\u80FD\u6700\u597D\uFF0C\u4F46\u53EF\u80FD\u4E22\u6570\u636E"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u534A\u540C\u6B65\u590D\u5236"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Master\u7B49\u5F85\u81F3\u5C11\u4E00\u4E2ASlave\u786E\u8BA4"}),"\n",(0,r.jsx)(s.li,{children:"\u5E73\u8861\u6027\u80FD\u548C\u6570\u636E\u5B89\u5168"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u5168\u540C\u6B65\u590D\u5236"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Master\u7B49\u5F85\u6240\u6709Slave\u786E\u8BA4"}),"\n",(0,r.jsx)(s.li,{children:"\u6570\u636E\u6700\u5B89\u5168\uFF0C\u4F46\u6027\u80FD\u6700\u5DEE"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"binlog\u683C\u5F0F"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. Statement(\u8BED\u53E5)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8BB0\u5F55SQL\u8BED\u53E5"}),"\n",(0,r.jsx)(s.li,{children:"\u65E5\u5FD7\u91CF\u5C0F\uFF0C\u4F46\u53EF\u80FD\u4E0D\u4E00\u81F4"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. Row(\u884C)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8BB0\u5F55\u6BCF\u884C\u7684\u53D8\u5316"}),"\n",(0,r.jsx)(s.li,{children:"\u65E5\u5FD7\u91CF\u5927\uFF0C\u4F46\u5B8C\u5168\u4E00\u81F4"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. Mixed(\u6DF7\u5408)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u81EA\u52A8\u9009\u62E9Statement\u6216Row"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5E38\u89C1\u95EE\u9898"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u4E3B\u4ECE\u5EF6\u8FDF"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u539F\u56E0\uFF1A\u4ECE\u5E93\u6027\u80FD\u4E0D\u8DB3\u3001\u7F51\u7EDC\u5EF6\u8FDF\u3001\u5927\u4E8B\u52A1"}),"\n",(0,r.jsx)(s.li,{children:"\u89E3\u51B3\uFF1A\u5E76\u884C\u590D\u5236\u3001\u4F18\u5316SQL\u3001\u589E\u52A0\u4ECE\u5E93"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u6570\u636E\u4E0D\u4E00\u81F4"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u539F\u56E0\uFF1A\u4ECE\u5E93\u5199\u5165\u3001binlog\u683C\u5F0F\u95EE\u9898"}),"\n",(0,r.jsx)(s.li,{children:"\u89E3\u51B3\uFF1A\u8BBE\u7F6Eread-only\u3001\u4F7F\u7528Row\u683C\u5F0F"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u590D\u5236\u4E2D\u65AD"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u539F\u56E0\uFF1A\u7F51\u7EDC\u95EE\u9898\u3001SQL\u6267\u884C\u5931\u8D25"}),"\n",(0,r.jsx)(s.li,{children:"\u89E3\u51B3\uFF1A\u8DF3\u8FC7\u9519\u8BEF\u3001\u91CD\u5EFA\u590D\u5236"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"10-\u5982\u4F55\u4F18\u5316mysql\u67E5\u8BE2\u6027\u80FD",children:"10. \u5982\u4F55\u4F18\u5316MySQL\u67E5\u8BE2\u6027\u80FD\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL\u67E5\u8BE2\u4F18\u5316"}),"\u662F\u4E00\u4E2A\u7CFB\u7EDF\u5DE5\u7A0B\uFF0C\u9700\u8981\u4ECE\u591A\u4E2A\u7EF4\u5EA6\u8FDB\u884C\u4F18\u5316\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u7D22\u5F15\u4F18\u5316"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u521B\u5EFA\u5408\u9002\u7684\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4E3AWHERE\u6761\u4EF6\u5217\u521B\u5EFA\u7D22\u5F15\nCREATE INDEX idx_status ON orders(status);\n\n-- \u4E3AJOIN\u5217\u521B\u5EFA\u7D22\u5F15\nCREATE INDEX idx_user_id ON orders(user_id);\n\n-- \u521B\u5EFA\u8986\u76D6\u7D22\u5F15\nCREATE INDEX idx_cover ON orders(user_id, status, create_time);\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u907F\u514D\u7D22\u5F15\u5931\u6548"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4E0D\u8981\u5728\u7D22\u5F15\u5217\u4E0A\u4F7F\u7528\u51FD\u6570\n-- \u9519\u8BEF\nSELECT * FROM users WHERE YEAR(create_time) = 2024;\n-- \u6B63\u786E\nSELECT * FROM users WHERE create_time >= '2024-01-01' \n  AND create_time < '2025-01-01';\n\n-- \u907F\u514D\u9690\u5F0F\u7C7B\u578B\u8F6C\u6362\n-- \u9519\u8BEF(id\u662Fint\u7C7B\u578B)\nSELECT * FROM users WHERE id = '123';\n-- \u6B63\u786E\nSELECT * FROM users WHERE id = 123;\n\n-- Like\u4E0D\u8981\u4EE5%\u5F00\u5934\n-- \u9519\u8BEF\nSELECT * FROM users WHERE name LIKE '%john%';\n-- \u6B63\u786E\nSELECT * FROM users WHERE name LIKE 'john%';\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. SQL\u8BED\u53E5\u4F18\u5316"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.p,{children:"**\u907F\u514DSELECT ***\uFF1A"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4E0D\u597D\nSELECT * FROM users WHERE id = 1;\n\n-- \u597D\nSELECT id, name, email FROM users WHERE id = 1;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F7F\u7528LIMIT"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u9650\u5236\u8FD4\u56DE\u884C\u6570\nSELECT * FROM users WHERE status = 1 LIMIT 100;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F18\u5316\u5B50\u67E5\u8BE2"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4E0D\u597D\uFF1A\u5B50\u67E5\u8BE2\nSELECT * FROM orders WHERE user_id IN (\n  SELECT id FROM users WHERE status = 1\n);\n\n-- \u597D\uFF1AJOIN\nSELECT o.* FROM orders o\nINNER JOIN users u ON o.user_id = u.id\nWHERE u.status = 1;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u8868\u7ED3\u6784\u4F18\u5316"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9009\u62E9\u5408\u9002\u7684\u6570\u636E\u7C7B\u578B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4F7F\u7528\u6700\u5C0F\u7684\u6570\u636E\u7C7B\u578B\nage TINYINT UNSIGNED  -- \u800C\u4E0D\u662FINT\n\n-- \u4F7F\u7528ENUM\u4EE3\u66FF\u5B57\u7B26\u4E32\nstatus ENUM('active', 'inactive', 'pending')\n\n-- \u56FA\u5B9A\u957F\u5EA6\u5B57\u7B26\u4E32\u7528CHAR\ncountry_code CHAR(2)  -- \u800C\u4E0D\u662FVARCHAR(2)\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5782\u76F4\u5206\u8868"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5C06\u5927\u5B57\u6BB5\u5206\u79BB\n-- users\u8868\uFF1Aid, name, email\n-- user_profiles\u8868\uFF1Auser_id, bio, avatar\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. \u67E5\u8BE2\u7F13\u5B58\u4F18\u5316"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u542F\u7528\u67E5\u8BE2\u7F13\u5B58(MySQL 5.7\u53CA\u4EE5\u524D)\nSET GLOBAL query_cache_type = ON;\nSET GLOBAL query_cache_size = 268435456;  -- 256MB\n\n-- \u6CE8\u610F\uFF1AMySQL 8.0\u5DF2\u79FB\u9664\u67E5\u8BE2\u7F13\u5B58\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"5. \u914D\u7F6E\u53C2\u6570\u4F18\u5316"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u589E\u52A0\u7F13\u51B2\u6C60\u5927\u5C0F\ninnodb_buffer_pool_size = 8G\n\n-- \u8C03\u6574\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\ninnodb_log_file_size = 512M\n\n-- \u589E\u52A0\u8FDE\u63A5\u6570\nmax_connections = 1000\n\n-- \u8C03\u6574\u7EBF\u7A0B\u7F13\u5B58\nthread_cache_size = 64\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"6. \u786C\u4EF6\u548C\u67B6\u6784\u4F18\u5316"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528SSD\u786C\u76D8"}),"\n",(0,r.jsx)(s.li,{children:"\u589E\u52A0\u5185\u5B58"}),"\n",(0,r.jsx)(s.li,{children:"\u8BFB\u5199\u5206\u79BB"}),"\n",(0,r.jsx)(s.li,{children:"\u5206\u5E93\u5206\u8868"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"7. \u4F7F\u7528EXPLAIN\u5206\u6790"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"EXPLAIN SELECT * FROM users WHERE name = 'John';\n\n-- \u5173\u6CE8\uFF1A\n-- type: ALL(\u5168\u8868\u626B\u63CF)\u9700\u8981\u4F18\u5316\n-- key: NULL\u8868\u793A\u672A\u4F7F\u7528\u7D22\u5F15\n-- rows: \u626B\u63CF\u884C\u6570\uFF0C\u8D8A\u5C11\u8D8A\u597D\n-- Extra: Using filesort/Using temporary\u9700\u8981\u4F18\u5316\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"8. \u6162\u67E5\u8BE2\u4F18\u5316"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5F00\u542F\u6162\u67E5\u8BE2\u65E5\u5FD7\nSET GLOBAL slow_query_log = ON;\nSET GLOBAL long_query_time = 2;  -- 2\u79D2\n\n-- \u5206\u6790\u6162\u67E5\u8BE2\nmysqldumpslow /var/log/mysql/slow.log\n"})}),"\n",(0,r.jsx)(s.h3,{id:"11-\u4EC0\u4E48\u662F\u6162\u67E5\u8BE2\u65E5\u5FD7\u5982\u4F55\u4F7F\u7528",children:"11. \u4EC0\u4E48\u662F\u6162\u67E5\u8BE2\u65E5\u5FD7\uFF1F\u5982\u4F55\u4F7F\u7528\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6162\u67E5\u8BE2\u65E5\u5FD7"}),"\u8BB0\u5F55\u6267\u884C\u65F6\u95F4\u8D85\u8FC7\u6307\u5B9A\u9608\u503C\u7684SQL\u8BED\u53E5\uFF0C\u662F\u5B9A\u4F4D\u6027\u80FD\u95EE\u9898\u7684\u91CD\u8981\u5DE5\u5177\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u914D\u7F6E\u6162\u67E5\u8BE2\u65E5\u5FD7"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770B\u6162\u67E5\u8BE2\u914D\u7F6E\nSHOW VARIABLES LIKE 'slow_query%';\nSHOW VARIABLES LIKE 'long_query_time';\n\n-- \u5F00\u542F\u6162\u67E5\u8BE2\u65E5\u5FD7\nSET GLOBAL slow_query_log = ON;\n\n-- \u8BBE\u7F6E\u6162\u67E5\u8BE2\u9608\u503C(\u79D2)\nSET GLOBAL long_query_time = 2;\n\n-- \u8BBE\u7F6E\u65E5\u5FD7\u6587\u4EF6\u8DEF\u5F84\nSET GLOBAL slow_query_log_file = '/var/log/mysql/slow.log';\n\n-- \u8BB0\u5F55\u672A\u4F7F\u7528\u7D22\u5F15\u7684\u67E5\u8BE2\nSET GLOBAL log_queries_not_using_indexes = ON;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"my.cnf\u914D\u7F6E"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ini",children:"[mysqld]\nslow_query_log = 1\nslow_query_log_file = /var/log/mysql/slow.log\nlong_query_time = 2\nlog_queries_not_using_indexes = 1\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u6790\u6162\u67E5\u8BE2\u65E5\u5FD7"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# \u4F7F\u7528mysqldumpslow\u5206\u6790\nmysqldumpslow -s t -t 10 /var/log/mysql/slow.log\n# -s t: \u6309\u67E5\u8BE2\u65F6\u95F4\u6392\u5E8F\n# -t 10: \u663E\u793A\u524D10\u6761\n\n# \u5E38\u7528\u9009\u9879\nmysqldumpslow -s c -t 10 slow.log  # \u6309\u67E5\u8BE2\u6B21\u6570\u6392\u5E8F\nmysqldumpslow -s r -t 10 slow.log  # \u6309\u8FD4\u56DE\u8BB0\u5F55\u6570\u6392\u5E8F\nmysqldumpslow -s al -t 10 slow.log # \u6309\u5E73\u5747\u9501\u65F6\u95F4\u6392\u5E8F\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F7F\u7528pt-query-digest\u5206\u6790"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# \u66F4\u5F3A\u5927\u7684\u5206\u6790\u5DE5\u5177\npt-query-digest /var/log/mysql/slow.log > report.txt\n"})}),"\n",(0,r.jsx)(s.h3,{id:"12-explain\u6267\u884C\u8BA1\u5212\u5982\u4F55\u5206\u6790",children:"12. Explain\u6267\u884C\u8BA1\u5212\u5982\u4F55\u5206\u6790\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"EXPLAIN"}),"\u663E\u793AMySQL\u5982\u4F55\u6267\u884C\u67E5\u8BE2\uFF0C\u662FSQL\u4F18\u5316\u7684\u6838\u5FC3\u5DE5\u5177\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u57FA\u672C\u7528\u6CD5"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"EXPLAIN SELECT * FROM users WHERE name = 'John';\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8F93\u51FA\u5B57\u6BB5\u89E3\u6790"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. id"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u67E5\u8BE2\u7684\u5E8F\u5217\u53F7"}),"\n",(0,r.jsx)(s.li,{children:"id\u76F8\u540C\uFF1A\u6267\u884C\u987A\u5E8F\u4ECE\u4E0A\u5230\u4E0B"}),"\n",(0,r.jsx)(s.li,{children:"id\u4E0D\u540C\uFF1Aid\u8D8A\u5927\u8D8A\u5148\u6267\u884C"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. select_type"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"SIMPLE\uFF1A\u7B80\u5355\u67E5\u8BE2"}),"\n",(0,r.jsx)(s.li,{children:"PRIMARY\uFF1A\u6700\u5916\u5C42\u67E5\u8BE2"}),"\n",(0,r.jsx)(s.li,{children:"SUBQUERY\uFF1A\u5B50\u67E5\u8BE2"}),"\n",(0,r.jsx)(s.li,{children:"DERIVED\uFF1A\u6D3E\u751F\u8868"}),"\n",(0,r.jsx)(s.li,{children:"UNION\uFF1AUNION\u67E5\u8BE2"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. table"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8BBF\u95EE\u7684\u8868\u540D"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. type"}),"\uFF08\u91CD\u8981\uFF09\uFF1A\n\u8BBF\u95EE\u7C7B\u578B\uFF0C\u6027\u80FD\u4ECE\u597D\u5230\u5DEE\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"system\uFF1A\u8868\u53EA\u6709\u4E00\u884C"}),"\n",(0,r.jsx)(s.li,{children:"const\uFF1A\u4E3B\u952E\u6216\u552F\u4E00\u7D22\u5F15\u67E5\u8BE2"}),"\n",(0,r.jsx)(s.li,{children:"eq_ref\uFF1A\u552F\u4E00\u7D22\u5F15\u626B\u63CF"}),"\n",(0,r.jsx)(s.li,{children:"ref\uFF1A\u975E\u552F\u4E00\u7D22\u5F15\u626B\u63CF"}),"\n",(0,r.jsx)(s.li,{children:"range\uFF1A\u8303\u56F4\u626B\u63CF"}),"\n",(0,r.jsx)(s.li,{children:"index\uFF1A\u7D22\u5F15\u5168\u626B\u63CF"}),"\n",(0,r.jsx)(s.li,{children:"ALL\uFF1A\u5168\u8868\u626B\u63CF\uFF08\u9700\u8981\u4F18\u5316\uFF09"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"5. possible_keys"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u53EF\u80FD\u4F7F\u7528\u7684\u7D22\u5F15"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"6. key"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5B9E\u9645\u4F7F\u7528\u7684\u7D22\u5F15"}),"\n",(0,r.jsx)(s.li,{children:"NULL\u8868\u793A\u672A\u4F7F\u7528\u7D22\u5F15"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"7. key_len"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528\u7684\u7D22\u5F15\u957F\u5EA6"}),"\n",(0,r.jsx)(s.li,{children:"\u8D8A\u77ED\u8D8A\u597D"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"8. ref"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4E0E\u7D22\u5F15\u6BD4\u8F83\u7684\u5217\u6216\u5E38\u91CF"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"9. rows"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9884\u8BA1\u626B\u63CF\u7684\u884C\u6570"}),"\n",(0,r.jsx)(s.li,{children:"\u8D8A\u5C11\u8D8A\u597D"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"10. Extra"}),"\uFF08\u91CD\u8981\uFF09\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Using index\uFF1A\u4F7F\u7528\u8986\u76D6\u7D22\u5F15\uFF08\u597D\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"Using where\uFF1A\u4F7F\u7528WHERE\u8FC7\u6EE4"}),"\n",(0,r.jsx)(s.li,{children:"Using filesort\uFF1A\u9700\u8981\u989D\u5916\u6392\u5E8F\uFF08\u9700\u4F18\u5316\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"Using temporary\uFF1A\u4F7F\u7528\u4E34\u65F6\u8868\uFF08\u9700\u4F18\u5316\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"Using index condition\uFF1A\u7D22\u5F15\u4E0B\u63A8"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F18\u5316\u793A\u4F8B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5DEE\u7684\u6267\u884C\u8BA1\u5212\nEXPLAIN SELECT * FROM orders WHERE status = 1;\n-- type: ALL, Extra: Using where\n\n-- \u4F18\u5316\uFF1A\u6DFB\u52A0\u7D22\u5F15\nCREATE INDEX idx_status ON orders(status);\n-- type: ref, key: idx_status\n\n-- \u66F4\u597D\uFF1A\u4F7F\u7528\u8986\u76D6\u7D22\u5F15\nCREATE INDEX idx_cover ON orders(status, order_no, amount);\nSELECT status, order_no, amount FROM orders WHERE status = 1;\n-- Extra: Using index\n"})}),"\n",(0,r.jsx)(s.h3,{id:"13-mysql\u7684\u5206\u533A\u8868\u662F\u4EC0\u4E48",children:"13. MySQL\u7684\u5206\u533A\u8868\u662F\u4EC0\u4E48\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u533A\u8868"}),"\u5C06\u4E00\u4E2A\u5927\u8868\u7684\u6570\u636E\u5206\u6563\u5B58\u50A8\u5230\u591A\u4E2A\u7269\u7406\u5206\u533A\u4E2D\uFF0C\u63D0\u9AD8\u67E5\u8BE2\u6027\u80FD\u548C\u7BA1\u7406\u6548\u7387\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u533A\u7C7B\u578B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. RANGE\u5206\u533A"}),"\uFF1A\n\u6309\u8303\u56F4\u5206\u533A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"CREATE TABLE orders (\n    id INT,\n    order_date DATE,\n    amount DECIMAL(10,2)\n) PARTITION BY RANGE (YEAR(order_date)) (\n    PARTITION p2020 VALUES LESS THAN (2021),\n    PARTITION p2021 VALUES LESS THAN (2022),\n    PARTITION p2022 VALUES LESS THAN (2023),\n    PARTITION p2023 VALUES LESS THAN (2024),\n    PARTITION p_future VALUES LESS THAN MAXVALUE\n);\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. LIST\u5206\u533A"}),"\uFF1A\n\u6309\u5217\u8868\u503C\u5206\u533A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"CREATE TABLE users (\n    id INT,\n    region VARCHAR(20)\n) PARTITION BY LIST COLUMNS(region) (\n    PARTITION p_north VALUES IN ('Beijing', 'Tianjin'),\n    PARTITION p_south VALUES IN ('Shanghai', 'Guangzhou'),\n    PARTITION p_west VALUES IN ('Chengdu', 'Chongqing')\n);\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. HASH\u5206\u533A"}),"\uFF1A\n\u6309\u54C8\u5E0C\u503C\u5206\u533A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"CREATE TABLE logs (\n    id INT,\n    log_time DATETIME\n) PARTITION BY HASH(YEAR(log_time))\nPARTITIONS 4;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. KEY\u5206\u533A"}),"\uFF1A\n\u7C7B\u4F3CHASH\uFF0C\u4F7F\u7528MySQL\u63D0\u4F9B\u7684\u54C8\u5E0C\u51FD\u6570"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"CREATE TABLE sessions (\n    id INT,\n    user_id INT\n) PARTITION BY KEY(user_id)\nPARTITIONS 4;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u533A\u7BA1\u7406"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770B\u5206\u533A\u4FE1\u606F\nSELECT * FROM information_schema.PARTITIONS \nWHERE TABLE_NAME = 'orders';\n\n-- \u6DFB\u52A0\u5206\u533A\nALTER TABLE orders ADD PARTITION (\n    PARTITION p2024 VALUES LESS THAN (2025)\n);\n\n-- \u5220\u9664\u5206\u533A\nALTER TABLE orders DROP PARTITION p2020;\n\n-- \u91CD\u7EC4\u5206\u533A\nALTER TABLE orders REORGANIZE PARTITION p_future INTO (\n    PARTITION p2024 VALUES LESS THAN (2025),\n    PARTITION p_future VALUES LESS THAN MAXVALUE\n);\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u533A\u7684\u4F18\u52BF"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"\u63D0\u9AD8\u67E5\u8BE2\u6027\u80FD\uFF08\u5206\u533A\u88C1\u526A\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"\u4FBF\u4E8E\u6570\u636E\u7BA1\u7406\uFF08\u6309\u5206\u533A\u5220\u9664\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"\u63D0\u9AD8\u5E76\u53D1\u6027\u80FD"}),"\n",(0,r.jsx)(s.li,{children:"\u4FBF\u4E8E\u6570\u636E\u5F52\u6863"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6CE8\u610F\u4E8B\u9879"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5206\u533A\u952E\u5FC5\u987B\u662F\u4E3B\u952E\u6216\u552F\u4E00\u952E\u7684\u4E00\u90E8\u5206"}),"\n",(0,r.jsx)(s.li,{children:"\u6700\u591A\u652F\u63018192\u4E2A\u5206\u533A"}),"\n",(0,r.jsx)(s.li,{children:"\u5206\u533A\u8868\u4E0D\u652F\u6301\u5916\u952E"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"14-\u4EC0\u4E48\u662F\u8868\u9501\u548C\u884C\u9501",children:"14. \u4EC0\u4E48\u662F\u8868\u9501\u548C\u884C\u9501\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8868\u9501\u548C\u884C\u9501"}),"\u662FMySQL\u4E2D\u4E24\u79CD\u4E0D\u540C\u7C92\u5EA6\u7684\u9501\u673A\u5236\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8868\u9501(Table Lock)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7279\u70B9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9501\u5B9A\u6574\u5F20\u8868"}),"\n",(0,r.jsx)(s.li,{children:"\u5F00\u9500\u5C0F\uFF0C\u52A0\u9501\u5FEB"}),"\n",(0,r.jsx)(s.li,{children:"\u4E0D\u4F1A\u51FA\u73B0\u6B7B\u9501"}),"\n",(0,r.jsx)(s.li,{children:"\u9501\u7C92\u5EA6\u5927\uFF0C\u5E76\u53D1\u5EA6\u4F4E"}),"\n",(0,r.jsx)(s.li,{children:"MyISAM\u9ED8\u8BA4\u4F7F\u7528"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7C7B\u578B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u8BFB\u9501(\u5171\u4EAB\u9501)\nLOCK TABLES users READ;\n-- \u5F53\u524D\u4F1A\u8BDD\u548C\u5176\u4ED6\u4F1A\u8BDD\u90FD\u53EF\u4EE5\u8BFB\uFF0C\u4F46\u4E0D\u80FD\u5199\n\n-- \u5199\u9501(\u6392\u4ED6\u9501)\nLOCK TABLES users WRITE;\n-- \u53EA\u6709\u5F53\u524D\u4F1A\u8BDD\u53EF\u4EE5\u8BFB\u5199\uFF0C\u5176\u4ED6\u4F1A\u8BDD\u88AB\u963B\u585E\n\n-- \u91CA\u653E\u9501\nUNLOCK TABLES;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u884C\u9501(Row Lock)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7279\u70B9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9501\u5B9A\u5355\u884C\u6216\u591A\u884C"}),"\n",(0,r.jsx)(s.li,{children:"\u5F00\u9500\u5927\uFF0C\u52A0\u9501\u6162"}),"\n",(0,r.jsx)(s.li,{children:"\u53EF\u80FD\u51FA\u73B0\u6B7B\u9501"}),"\n",(0,r.jsx)(s.li,{children:"\u9501\u7C92\u5EA6\u5C0F\uFF0C\u5E76\u53D1\u5EA6\u9AD8"}),"\n",(0,r.jsx)(s.li,{children:"InnoDB\u9ED8\u8BA4\u4F7F\u7528"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7C7B\u578B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5171\u4EAB\u9501(S\u9501)\nSELECT * FROM users WHERE id = 1 LOCK IN SHARE MODE;\n-- \u5141\u8BB8\u5176\u4ED6\u4E8B\u52A1\u8BFB\u53D6\uFF0C\u4F46\u4E0D\u80FD\u4FEE\u6539\n\n-- \u6392\u4ED6\u9501(X\u9501)\nSELECT * FROM users WHERE id = 1 FOR UPDATE;\n-- \u5176\u4ED6\u4E8B\u52A1\u4E0D\u80FD\u8BFB\u53D6\u548C\u4FEE\u6539\n\n-- UPDATE/DELETE\u81EA\u52A8\u52A0\u6392\u4ED6\u9501\nUPDATE users SET name = 'John' WHERE id = 1;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5BF9\u6BD4"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u7279\u6027"}),(0,r.jsx)(s.th,{children:"\u8868\u9501"}),(0,r.jsx)(s.th,{children:"\u884C\u9501"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u9501\u7C92\u5EA6"}),(0,r.jsx)(s.td,{children:"\u6574\u8868"}),(0,r.jsx)(s.td,{children:"\u5355\u884C"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u5E76\u53D1\u6027"}),(0,r.jsx)(s.td,{children:"\u4F4E"}),(0,r.jsx)(s.td,{children:"\u9AD8"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u6B7B\u9501"}),(0,r.jsx)(s.td,{children:"\u4E0D\u4F1A"}),(0,r.jsx)(s.td,{children:"\u53EF\u80FD"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u5F00\u9500"}),(0,r.jsx)(s.td,{children:"\u5C0F"}),(0,r.jsx)(s.td,{children:"\u5927"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u9002\u7528\u573A\u666F"}),(0,r.jsx)(s.td,{children:"\u6279\u91CF\u64CD\u4F5C"}),(0,r.jsx)(s.td,{children:"\u9AD8\u5E76\u53D1"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u5B58\u50A8\u5F15\u64CE"}),(0,r.jsx)(s.td,{children:"MyISAM"}),(0,r.jsx)(s.td,{children:"InnoDB"})]})]})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"InnoDB\u7684\u884C\u9501\u5B9E\u73B0"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u57FA\u4E8E\u7D22\u5F15\u5B9E\u73B0"}),"\n",(0,r.jsx)(s.li,{children:"\u5982\u679C\u6CA1\u6709\u7D22\u5F15\uFF0C\u4F1A\u5347\u7EA7\u4E3A\u8868\u9501"}),"\n",(0,r.jsx)(s.li,{children:"\u9501\u5B9A\u7684\u662F\u7D22\u5F15\u8BB0\u5F55\uFF0C\u4E0D\u662F\u6570\u636E\u884C"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u793A\u4F8B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u6709\u7D22\u5F15\uFF1A\u884C\u9501\nUPDATE users SET name = 'John' WHERE id = 1;  -- \u53EA\u9501id=1\n\n-- \u65E0\u7D22\u5F15\uFF1A\u8868\u9501\nUPDATE users SET name = 'John' WHERE email = 'a@b.com';  -- \u9501\u5168\u8868\n"})}),"\n",(0,r.jsx)(s.h3,{id:"15-innodb\u7684buffer-pool\u662F\u4EC0\u4E48",children:"15. InnoDB\u7684Buffer Pool\u662F\u4EC0\u4E48\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Buffer Pool"}),"\u662FInnoDB\u6700\u91CD\u8981\u7684\u5185\u5B58\u7ED3\u6784\uFF0C\u7528\u4E8E\u7F13\u5B58\u6570\u636E\u548C\u7D22\u5F15\u9875\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F5C\u7528"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"\u7F13\u5B58\u6570\u636E\u9875\u548C\u7D22\u5F15\u9875"}),"\n",(0,r.jsx)(s.li,{children:"\u51CF\u5C11\u78C1\u76D8I/O"}),"\n",(0,r.jsx)(s.li,{children:"\u63D0\u9AD8\u67E5\u8BE2\u6027\u80FD"}),"\n",(0,r.jsx)(s.li,{children:"\u7F13\u51B2\u5199\u5165\u64CD\u4F5C"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7ED3\u6784"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"Buffer Pool\n\u251C\u2500\u2500 \u6570\u636E\u9875\u7F13\u5B58\n\u251C\u2500\u2500 \u7D22\u5F15\u9875\u7F13\u5B58\n\u251C\u2500\u2500 \u63D2\u5165\u7F13\u51B2(Insert Buffer)\n\u251C\u2500\u2500 \u81EA\u9002\u5E94\u54C8\u5E0C\u7D22\u5F15\n\u251C\u2500\u2500 \u9501\u4FE1\u606F\n\u2514\u2500\u2500 \u6570\u636E\u5B57\u5178\u4FE1\u606F\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9875\u9762\u7BA1\u7406"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9ED8\u8BA4\u9875\u5927\u5C0F\uFF1A16KB"}),"\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528LRU\u7B97\u6CD5\u7BA1\u7406"}),"\n",(0,r.jsx)(s.li,{children:"\u5206\u4E3Ayoung\u533A\u548Cold\u533A"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"LRU\u94FE\u8868"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"New Page -> young\u533A(5/8) -> old\u533A(3/8) -> \u6DD8\u6C70\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u914D\u7F6E"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770BBuffer Pool\u5927\u5C0F\nSHOW VARIABLES LIKE 'innodb_buffer_pool_size';\n\n-- \u8BBE\u7F6EBuffer Pool\u5927\u5C0F(\u5EFA\u8BAE\u7269\u7406\u5185\u5B58\u768450-80%)\nSET GLOBAL innodb_buffer_pool_size = 8589934592;  -- 8GB\n\n-- Buffer Pool\u5B9E\u4F8B\u6570\nSET GLOBAL innodb_buffer_pool_instances = 8;\n\n-- \u67E5\u770BBuffer Pool\u72B6\u6001\nSHOW ENGINE INNODB STATUS;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u76D1\u63A7\u6307\u6807"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770BBuffer Pool\u4F7F\u7528\u60C5\u51B5\nSELECT \n  POOL_ID,\n  POOL_SIZE,\n  FREE_BUFFERS,\n  DATABASE_PAGES\nFROM information_schema.INNODB_BUFFER_POOL_STATS;\n\n-- \u547D\u4E2D\u7387\nSHOW STATUS LIKE 'Innodb_buffer_pool%';\n-- \u5173\u6CE8\uFF1A\n-- Innodb_buffer_pool_read_requests: \u8BFB\u8BF7\u6C42\u6570\n-- Innodb_buffer_pool_reads: \u4ECE\u78C1\u76D8\u8BFB\u53D6\u6B21\u6570\n-- \u547D\u4E2D\u7387 = 1 - (reads / read_requests)\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F18\u5316\u5EFA\u8BAE"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"\u8BBE\u7F6E\u5408\u9002\u7684\u5927\u5C0F\uFF08\u7269\u7406\u5185\u5B58\u768450-80%\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528\u591A\u4E2ABuffer Pool\u5B9E\u4F8B\u51CF\u5C11\u7ADE\u4E89"}),"\n",(0,r.jsx)(s.li,{children:"\u9884\u70EDBuffer Pool\uFF08\u542F\u52A8\u65F6\u52A0\u8F7D\u70ED\u6570\u636E\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"\u76D1\u63A7\u547D\u4E2D\u7387\uFF08\u5E94>99%\uFF09"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"16-\u4EC0\u4E48\u662Fbinlogredo-log\u548Cundo-log",children:"16. \u4EC0\u4E48\u662Fbinlog\u3001redo log\u548Cundo log\uFF1F"}),"\n",(0,r.jsx)(s.p,{children:"MySQL\u7684\u4E09\u79CD\u65E5\u5FD7\u662F\u4FDD\u8BC1\u6570\u636E\u4E00\u81F4\u6027\u548C\u6301\u4E45\u6027\u7684\u6838\u5FC3\u673A\u5236\u3002"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"binlog\uFF08\u4E8C\u8FDB\u5236\u65E5\u5FD7\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F5C\u7528"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8BB0\u5F55\u6240\u6709DDL\u548CDML\u8BED\u53E5"}),"\n",(0,r.jsx)(s.li,{children:"\u7528\u4E8E\u4E3B\u4ECE\u590D\u5236"}),"\n",(0,r.jsx)(s.li,{children:"\u7528\u4E8E\u6570\u636E\u6062\u590D"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7279\u70B9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Server\u5C42\u5B9E\u73B0\uFF0C\u6240\u6709\u5B58\u50A8\u5F15\u64CE\u90FD\u53EF\u7528"}),"\n",(0,r.jsx)(s.li,{children:"\u903B\u8F91\u65E5\u5FD7\uFF0C\u8BB0\u5F55SQL\u8BED\u53E5"}),"\n",(0,r.jsx)(s.li,{children:"\u8FFD\u52A0\u5199\u5165\uFF0C\u4E0D\u4F1A\u8986\u76D6"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u683C\u5F0F"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- Statement\uFF1A\u8BB0\u5F55SQL\u8BED\u53E5\n-- Row\uFF1A\u8BB0\u5F55\u6BCF\u884C\u7684\u53D8\u5316\uFF08\u63A8\u8350\uFF09\n-- Mixed\uFF1A\u6DF7\u5408\u6A21\u5F0F\n\n-- \u67E5\u770Bbinlog\u683C\u5F0F\nSHOW VARIABLES LIKE 'binlog_format';\n\n-- \u67E5\u770Bbinlog\u6587\u4EF6\nSHOW BINARY LOGS;\n\n-- \u67E5\u770Bbinlog\u5185\u5BB9\nSHOW BINLOG EVENTS IN 'mysql-bin.000001';\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"redo log\uFF08\u91CD\u505A\u65E5\u5FD7\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F5C\u7528"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4FDD\u8BC1\u4E8B\u52A1\u6301\u4E45\u6027"}),"\n",(0,r.jsx)(s.li,{children:"\u5D29\u6E83\u6062\u590D"}),"\n",(0,r.jsx)(s.li,{children:"\u5B9E\u73B0WAL\uFF08Write-Ahead Logging\uFF09"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7279\u70B9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"InnoDB\u7279\u6709"}),"\n",(0,r.jsx)(s.li,{children:"\u7269\u7406\u65E5\u5FD7\uFF0C\u8BB0\u5F55\u6570\u636E\u9875\u7684\u4FEE\u6539"}),"\n",(0,r.jsx)(s.li,{children:"\u5FAA\u73AF\u5199\u5165\uFF0C\u56FA\u5B9A\u5927\u5C0F"}),"\n",(0,r.jsx)(s.li,{children:"\u5148\u5199redo log\uFF0C\u518D\u5199\u6570\u636E\u6587\u4EF6"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5DE5\u4F5C\u539F\u7406"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"1. \u4E8B\u52A1\u63D0\u4EA4\u65F6\uFF0C\u5148\u5199redo log\n2. redo log\u5199\u5165\u6210\u529F\uFF0C\u4E8B\u52A1\u63D0\u4EA4\u6210\u529F\n3. \u540E\u53F0\u7EBF\u7A0B\u5F02\u6B65\u5C06\u810F\u9875\u5237\u5165\u78C1\u76D8\n4. \u5D29\u6E83\u6062\u590D\u65F6\uFF0C\u91CD\u653Eredo log\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u914D\u7F6E"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- redo log\u6587\u4EF6\u5927\u5C0F\ninnodb_log_file_size = 512M\n\n-- redo log\u6587\u4EF6\u6570\u91CF\ninnodb_log_files_in_group = 2\n\n-- \u5237\u76D8\u7B56\u7565\ninnodb_flush_log_at_trx_commit = 1\n-- 0: \u6BCF\u79D2\u5237\u76D8\n-- 1: \u6BCF\u6B21\u4E8B\u52A1\u63D0\u4EA4\u5237\u76D8\uFF08\u6700\u5B89\u5168\uFF09\n-- 2: \u6BCF\u6B21\u63D0\u4EA4\u5199\u5165OS\u7F13\u5B58\uFF0C\u6BCF\u79D2\u5237\u76D8\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"undo log\uFF08\u56DE\u6EDA\u65E5\u5FD7\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F5C\u7528"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4FDD\u8BC1\u4E8B\u52A1\u539F\u5B50\u6027"}),"\n",(0,r.jsx)(s.li,{children:"\u5B9E\u73B0MVCC"}),"\n",(0,r.jsx)(s.li,{children:"\u4E8B\u52A1\u56DE\u6EDA"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7279\u70B9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"InnoDB\u7279\u6709"}),"\n",(0,r.jsx)(s.li,{children:"\u903B\u8F91\u65E5\u5FD7\uFF0C\u8BB0\u5F55\u76F8\u53CD\u64CD\u4F5C"}),"\n",(0,r.jsx)(s.li,{children:"\u5B58\u50A8\u5728\u56DE\u6EDA\u6BB5\u4E2D"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5DE5\u4F5C\u539F\u7406"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- INSERT\u64CD\u4F5C\uFF1A\u8BB0\u5F55DELETE\nINSERT INTO users VALUES (1, 'John');\n-- undo log: DELETE FROM users WHERE id = 1;\n\n-- UPDATE\u64CD\u4F5C\uFF1A\u8BB0\u5F55\u65E7\u503C\nUPDATE users SET name = 'Tom' WHERE id = 1;\n-- undo log: UPDATE users SET name = 'John' WHERE id = 1;\n\n-- DELETE\u64CD\u4F5C\uFF1A\u8BB0\u5F55INSERT\nDELETE FROM users WHERE id = 1;\n-- undo log: INSERT INTO users VALUES (1, 'John');\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E09\u79CD\u65E5\u5FD7\u5BF9\u6BD4"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u7279\u6027"}),(0,r.jsx)(s.th,{children:"binlog"}),(0,r.jsx)(s.th,{children:"redo log"}),(0,r.jsx)(s.th,{children:"undo log"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u5C42\u6B21"}),(0,r.jsx)(s.td,{children:"Server\u5C42"}),(0,r.jsx)(s.td,{children:"InnoDB\u5C42"}),(0,r.jsx)(s.td,{children:"InnoDB\u5C42"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u7C7B\u578B"}),(0,r.jsx)(s.td,{children:"\u903B\u8F91\u65E5\u5FD7"}),(0,r.jsx)(s.td,{children:"\u7269\u7406\u65E5\u5FD7"}),(0,r.jsx)(s.td,{children:"\u903B\u8F91\u65E5\u5FD7"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u4F5C\u7528"}),(0,r.jsx)(s.td,{children:"\u590D\u5236\u3001\u6062\u590D"}),(0,r.jsx)(s.td,{children:"\u5D29\u6E83\u6062\u590D"}),(0,r.jsx)(s.td,{children:"\u56DE\u6EDA\u3001MVCC"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u5199\u5165\u65B9\u5F0F"}),(0,r.jsx)(s.td,{children:"\u8FFD\u52A0\u5199"}),(0,r.jsx)(s.td,{children:"\u5FAA\u73AF\u5199"}),(0,r.jsx)(s.td,{children:"\u968F\u673A\u5199"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u6301\u4E45\u5316"}),(0,r.jsx)(s.td,{children:"\u662F"}),(0,r.jsx)(s.td,{children:"\u662F"}),(0,r.jsx)(s.td,{children:"\u5426"})]})]})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E24\u9636\u6BB5\u63D0\u4EA4"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"1. \u51C6\u5907\u9636\u6BB5\uFF1A\u5199\u5165redo log\uFF0C\u72B6\u6001\u4E3Aprepare\n2. \u63D0\u4EA4\u9636\u6BB5\uFF1A\u5199\u5165binlog\n3. \u5B8C\u6210\u9636\u6BB5\uFF1Aredo log\u72B6\u6001\u6539\u4E3Acommit\n"})}),"\n",(0,r.jsx)(s.h3,{id:"17-mysql\u5982\u4F55\u5B9E\u73B0\u9AD8\u53EF\u7528",children:"17. MySQL\u5982\u4F55\u5B9E\u73B0\u9AD8\u53EF\u7528\uFF1F"}),"\n",(0,r.jsx)(s.p,{children:"MySQL\u9AD8\u53EF\u7528\u65B9\u6848\u786E\u4FDD\u6570\u636E\u5E93\u670D\u52A1\u7684\u8FDE\u7EED\u6027\u548C\u6570\u636E\u5B89\u5168\u3002"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u4E3B\u4ECE\u590D\u5236\uFF08Master-Slave\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u67B6\u6784"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"Master\uFF08\u4E3B\u5E93\uFF09\n  \u251C\u2500\u2500 Slave1\uFF08\u4ECE\u5E93\uFF09\n  \u251C\u2500\u2500 Slave2\uFF08\u4ECE\u5E93\uFF09\n  \u2514\u2500\u2500 Slave3\uFF08\u4ECE\u5E93\uFF09\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F18\u70B9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u7B80\u5355\u6613\u5B9E\u73B0"}),"\n",(0,r.jsx)(s.li,{children:"\u8BFB\u5199\u5206\u79BB"}),"\n",(0,r.jsx)(s.li,{children:"\u6570\u636E\u5907\u4EFD"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7F3A\u70B9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4E3B\u5E93\u5355\u70B9\u6545\u969C"}),"\n",(0,r.jsx)(s.li,{children:"\u9700\u8981\u624B\u52A8\u5207\u6362"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u4E3B\u4E3B\u590D\u5236\uFF08Master-Master\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u67B6\u6784"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"Master1 <--\x3e Master2\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u914D\u7F6E"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- Master1\nauto_increment_increment = 2\nauto_increment_offset = 1\n\n-- Master2\nauto_increment_increment = 2\nauto_increment_offset = 2\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F18\u70B9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u53CC\u5411\u590D\u5236"}),"\n",(0,r.jsx)(s.li,{children:"\u4E92\u4E3A\u5907\u4EFD"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7F3A\u70B9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u53EF\u80FD\u6570\u636E\u51B2\u7A81"}),"\n",(0,r.jsx)(s.li,{children:"\u590D\u6742\u5EA6\u9AD8"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. MHA\uFF08Master High Availability\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7279\u70B9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u81EA\u52A8\u6545\u969C\u5207\u6362"}),"\n",(0,r.jsx)(s.li,{children:"\u76D1\u63A7\u4E3B\u5E93\u72B6\u6001"}),"\n",(0,r.jsx)(s.li,{children:"\u63D0\u5347\u4ECE\u5E93\u4E3A\u4E3B\u5E93"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5DE5\u4F5C\u6D41\u7A0B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"1. \u76D1\u63A7\u4E3B\u5E93\u5FC3\u8DF3\n2. \u68C0\u6D4B\u4E3B\u5E93\u6545\u969C\n3. \u9009\u62E9\u6700\u65B0\u7684\u4ECE\u5E93\n4. \u5E94\u7528\u5DEE\u5F02\u65E5\u5FD7\n5. \u63D0\u5347\u4E3A\u65B0\u4E3B\u5E93\n6. \u4FEE\u6539\u5176\u4ED6\u4ECE\u5E93\u914D\u7F6E\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. MGR\uFF08MySQL Group Replication\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7279\u70B9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"MySQL\u5B98\u65B9\u65B9\u6848"}),"\n",(0,r.jsx)(s.li,{children:"\u591A\u4E3B\u6A21\u5F0F"}),"\n",(0,r.jsx)(s.li,{children:"\u81EA\u52A8\u6545\u969C\u8F6C\u79FB"}),"\n",(0,r.jsx)(s.li,{children:"\u5F3A\u4E00\u81F4\u6027"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u67B6\u6784"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"Node1 <--\x3e Node2 <--\x3e Node3\n\uFF08\u4EFB\u610F\u8282\u70B9\u53EF\u8BFB\u5199\uFF09\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"5. Galera Cluster"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7279\u70B9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u591A\u4E3B\u540C\u6B65\u590D\u5236"}),"\n",(0,r.jsx)(s.li,{children:"\u771F\u6B63\u7684\u591A\u4E3B\u67B6\u6784"}),"\n",(0,r.jsx)(s.li,{children:"\u65E0\u5EF6\u8FDF\u590D\u5236"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"6. \u4F7F\u7528\u4E2D\u95F4\u4EF6"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"ProxySQL"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"\u5E94\u7528 -> ProxySQL -> MySQL\u96C6\u7FA4\n- \u8BFB\u5199\u5206\u79BB\n- \u8D1F\u8F7D\u5747\u8861\n- \u6545\u969C\u5207\u6362\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MaxScale"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"\u5E94\u7528 -> MaxScale -> MySQL\u96C6\u7FA4\n- \u81EA\u52A8\u8DEF\u7531\n- \u67E5\u8BE2\u7F13\u5B58\n- \u76D1\u63A7\u7BA1\u7406\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"7. \u4E91\u670D\u52A1\u65B9\u6848"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u963F\u91CC\u4E91RDS"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u81EA\u52A8\u5907\u4EFD"}),"\n",(0,r.jsx)(s.li,{children:"\u4E00\u952E\u5207\u6362"}),"\n",(0,r.jsx)(s.li,{children:"\u8BFB\u5199\u5206\u79BB"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"AWS RDS"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Multi-AZ\u90E8\u7F72"}),"\n",(0,r.jsx)(s.li,{children:"\u81EA\u52A8\u6545\u969C\u8F6C\u79FB"}),"\n",(0,r.jsx)(s.li,{children:"\u53EA\u8BFB\u526F\u672C"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9AD8\u53EF\u7528\u67B6\u6784\u793A\u4F8B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"                 VIP\n                  |\n            +-----+-----+\n            |           |\n         Master      Slave\n            |           |\n      (\u4E3B\u5E93\u5199\u5165)   (\u4ECE\u5E93\u8BFB\u53D6)\n            |           |\n        MHA Manager\n       (\u76D1\u63A7\u548C\u5207\u6362)\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6700\u4F73\u5B9E\u8DF5"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528\u534A\u540C\u6B65\u590D\u5236"}),"\n",(0,r.jsx)(s.li,{children:"\u914D\u7F6E\u76D1\u63A7\u544A\u8B66"}),"\n",(0,r.jsx)(s.li,{children:"\u5B9A\u671F\u6F14\u7EC3\u5207\u6362"}),"\n",(0,r.jsx)(s.li,{children:"\u4FDD\u6301\u6570\u636E\u4E00\u81F4\u6027"}),"\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528VIP\u5B9E\u73B0\u900F\u660E\u5207\u6362"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"18-\u4EC0\u4E48\u662F\u8BFB\u5199\u5206\u79BB",children:"18. \u4EC0\u4E48\u662F\u8BFB\u5199\u5206\u79BB\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8BFB\u5199\u5206\u79BB"}),"\u662F\u5C06\u6570\u636E\u5E93\u7684\u8BFB\u64CD\u4F5C\u548C\u5199\u64CD\u4F5C\u5206\u6563\u5230\u4E0D\u540C\u7684\u6570\u636E\u5E93\u670D\u52A1\u5668\u4E0A\uFF0C\u63D0\u9AD8\u7CFB\u7EDF\u6027\u80FD\u548C\u53EF\u7528\u6027\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u67B6\u6784"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"\u5E94\u7528\u5C42\n  |\n\u4E2D\u95F4\u4EF6/\u4EE3\u7406\n  |\n  \u251C\u2500\u2500 Master\uFF08\u5199\uFF09\n  \u2514\u2500\u2500 Slave1, Slave2, Slave3\uFF08\u8BFB\uFF09\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B9E\u73B0\u65B9\u5F0F"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u5E94\u7528\u5C42\u5B9E\u73B0"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:"public class DataSourceRouter {\n    private DataSource masterDS;\n    private List<DataSource> slaveDS;\n    \n    public DataSource getDataSource(boolean isRead) {\n        if (isRead) {\n            // \u8D1F\u8F7D\u5747\u8861\u9009\u62E9\u4ECE\u5E93\n            return selectSlave();\n        }\n        return masterDS;\n    }\n    \n    private DataSource selectSlave() {\n        // \u8F6E\u8BE2\u3001\u968F\u673A\u3001\u6743\u91CD\u7B49\u7B56\u7565\n        int index = random.nextInt(slaveDS.size());\n        return slaveDS.get(index);\n    }\n}\n\n// \u4F7F\u7528\n@Transactional(readOnly = true)\npublic User getUser(Long id) {\n    // \u81EA\u52A8\u8DEF\u7531\u5230\u4ECE\u5E93\n    return userMapper.selectById(id);\n}\n\n@Transactional\npublic void updateUser(User user) {\n    // \u81EA\u52A8\u8DEF\u7531\u5230\u4E3B\u5E93\n    userMapper.updateById(user);\n}\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u4E2D\u95F4\u4EF6\u5B9E\u73B0"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MyCAT"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-xml",children:'<dataHost name="localhost1" maxCon="1000" minCon="10" \n          balance="1" writeType="0" dbType="mysql">\n    \x3c!-- \u5199\u4E3B\u673A --\x3e\n    <writeHost host="master" url="192.168.1.1:3306" \n               user="root" password="123456">\n        \x3c!-- \u8BFB\u4E3B\u673A --\x3e\n        <readHost host="slave1" url="192.168.1.2:3306" \n                  user="root" password="123456"/>\n        <readHost host="slave2" url="192.168.1.3:3306" \n                  user="root" password="123456"/>\n    </writeHost>\n</dataHost>\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"ProxySQL"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u914D\u7F6E\u8BFB\u5199\u5206\u79BB\u89C4\u5219\nINSERT INTO mysql_query_rules (rule_id, active, match_pattern, \n                                destination_hostgroup, apply)\nVALUES \n(1, 1, '^SELECT.*FOR UPDATE$', 1, 1),  -- \u5199\n(2, 1, '^SELECT', 2, 1);                -- \u8BFB\n\n-- \u914D\u7F6E\u670D\u52A1\u5668\u7EC4\nINSERT INTO mysql_servers (hostgroup_id, hostname, port)\nVALUES \n(1, '192.168.1.1', 3306),  -- \u5199\u7EC4\n(2, '192.168.1.2', 3306),  -- \u8BFB\u7EC4\n(2, '192.168.1.3', 3306);  -- \u8BFB\u7EC4\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. Spring Boot\u5B9E\u73B0"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:'@Configuration\npublic class DataSourceConfig {\n    \n    @Bean\n    public DataSource routingDataSource() {\n        Map<Object, Object> targetDataSources = new HashMap<>();\n        targetDataSources.put("master", masterDataSource());\n        targetDataSources.put("slave", slaveDataSource());\n        \n        DynamicDataSource dataSource = new DynamicDataSource();\n        dataSource.setTargetDataSources(targetDataSources);\n        dataSource.setDefaultTargetDataSource(masterDataSource());\n        return dataSource;\n    }\n}\n\n// \u52A8\u6001\u6570\u636E\u6E90\npublic class DynamicDataSource extends AbstractRoutingDataSource {\n    @Override\n    protected Object determineCurrentLookupKey() {\n        return DataSourceContextHolder.getDataSource();\n    }\n}\n\n// AOP\u62E6\u622A\n@Aspect\npublic class DataSourceAspect {\n    @Around("@annotation(readOnly)")\n    public Object setReadDataSource(ProceedingJoinPoint point, \n                                    ReadOnly readOnly) {\n        DataSourceContextHolder.setDataSource("slave");\n        try {\n            return point.proceed();\n        } finally {\n            DataSourceContextHolder.clearDataSource();\n        }\n    }\n}\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8D1F\u8F7D\u5747\u8861\u7B56\u7565"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u8F6E\u8BE2\uFF08Round Robin\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:"int index = counter++ % slaves.size();\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u968F\u673A\uFF08Random\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:"int index = random.nextInt(slaves.size());\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u6743\u91CD\uFF08Weighted\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:"// slave1: \u6743\u91CD3, slave2: \u6743\u91CD1\n// slave1\u88AB\u9009\u4E2D\u6982\u738775%, slave2\u88AB\u9009\u4E2D\u6982\u738725%\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. \u6700\u5C11\u8FDE\u63A5\uFF08Least Connections\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:"// \u9009\u62E9\u5F53\u524D\u8FDE\u63A5\u6570\u6700\u5C11\u7684\u4ECE\u5E93\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6CE8\u610F\u4E8B\u9879"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u4E3B\u4ECE\u5EF6\u8FDF\u95EE\u9898"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:'// \u5199\u540E\u7ACB\u5373\u8BFB\u53EF\u80FD\u8BFB\u4E0D\u5230\nuser.setName("Tom");\nuserService.update(user);  // \u5199\u4E3B\u5E93\nUser u = userService.get(id);  // \u8BFB\u4ECE\u5E93\uFF0C\u53EF\u80FD\u8FD8\u662F\u65E7\u6570\u636E\n\n// \u89E3\u51B3\u65B9\u6848\uFF1A\n// 1. \u5F3A\u5236\u8BFB\u4E3B\u5E93\n@ReadMaster\npublic User getUser(Long id);\n\n// 2. \u5EF6\u8FDF\u8BFB\u53D6\nThread.sleep(100);\n\n// 3. \u4F7F\u7528\u7F13\u5B58\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u4E8B\u52A1\u4E00\u81F4\u6027"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:"@Transactional\npublic void transfer() {\n    // \u4E8B\u52A1\u5185\u7684\u6240\u6709\u64CD\u4F5C\u90FD\u5E94\u8BE5\u5728\u4E3B\u5E93\n    accountService.deduct(fromId, amount);\n    accountService.add(toId, amount);\n}\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F18\u52BF"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"\u63D0\u9AD8\u67E5\u8BE2\u6027\u80FD"}),"\n",(0,r.jsx)(s.li,{children:"\u964D\u4F4E\u4E3B\u5E93\u538B\u529B"}),"\n",(0,r.jsx)(s.li,{children:"\u63D0\u9AD8\u7CFB\u7EDF\u53EF\u7528\u6027"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"19-\u5982\u4F55\u8FDB\u884Cmysql\u5907\u4EFD\u548C\u6062\u590D",children:"19. \u5982\u4F55\u8FDB\u884CMySQL\u5907\u4EFD\u548C\u6062\u590D\uFF1F"}),"\n",(0,r.jsx)(s.p,{children:"MySQL\u5907\u4EFD\u548C\u6062\u590D\u662F\u4FDD\u8BC1\u6570\u636E\u5B89\u5168\u7684\u91CD\u8981\u624B\u6BB5\u3002"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5907\u4EFD\u7C7B\u578B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u903B\u8F91\u5907\u4EFD"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"mysqldump"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# \u5907\u4EFD\u5355\u4E2A\u6570\u636E\u5E93\nmysqldump -u root -p database_name > backup.sql\n\n# \u5907\u4EFD\u591A\u4E2A\u6570\u636E\u5E93\nmysqldump -u root -p --databases db1 db2 > backup.sql\n\n# \u5907\u4EFD\u6240\u6709\u6570\u636E\u5E93\nmysqldump -u root -p --all-databases > all_backup.sql\n\n# \u5907\u4EFD\u8868\u7ED3\u6784\nmysqldump -u root -p -d database_name > schema.sql\n\n# \u5907\u4EFD\u6570\u636E\uFF08\u4E0D\u542B\u7ED3\u6784\uFF09\nmysqldump -u root -p -t database_name > data.sql\n\n# \u538B\u7F29\u5907\u4EFD\nmysqldump -u root -p database_name | gzip > backup.sql.gz\n\n# \u5907\u4EFD\u65F6\u6DFB\u52A0\u9009\u9879\nmysqldump -u root -p \\\n  --single-transaction \\  # \u4E00\u81F4\u6027\u5907\u4EFD\uFF08InnoDB\uFF09\n  --master-data=2 \\       # \u8BB0\u5F55binlog\u4F4D\u7F6E\n  --flush-logs \\          # \u5237\u65B0\u65E5\u5FD7\n  --routines \\            # \u5907\u4EFD\u5B58\u50A8\u8FC7\u7A0B\n  --triggers \\            # \u5907\u4EFD\u89E6\u53D1\u5668\n  database_name > backup.sql\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6062\u590D"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# \u6062\u590D\u6570\u636E\u5E93\nmysql -u root -p database_name < backup.sql\n\n# \u6062\u590D\u538B\u7F29\u6587\u4EF6\ngunzip < backup.sql.gz | mysql -u root -p database_name\n\n# \u5728MySQL\u4E2D\u6267\u884C\nmysql> source /path/to/backup.sql;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u7269\u7406\u5907\u4EFD"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u76F4\u63A5\u590D\u5236\u6587\u4EF6"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# \u505C\u6B62MySQL\nsystemctl stop mysqld\n\n# \u590D\u5236\u6570\u636E\u76EE\u5F55\ncp -r /var/lib/mysql /backup/mysql_$(date +%Y%m%d)\n\n# \u542F\u52A8MySQL\nsystemctl start mysqld\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F7F\u7528XtraBackup"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# \u5168\u91CF\u5907\u4EFD\nxtrabackup --backup --target-dir=/backup/full\n\n# \u589E\u91CF\u5907\u4EFD\nxtrabackup --backup --target-dir=/backup/inc1 \\\n  --incremental-basedir=/backup/full\n\n# \u51C6\u5907\u6062\u590D\nxtrabackup --prepare --target-dir=/backup/full\nxtrabackup --prepare --target-dir=/backup/full \\\n  --incremental-dir=/backup/inc1\n\n# \u6062\u590D\nxtrabackup --copy-back --target-dir=/backup/full\nchown -R mysql:mysql /var/lib/mysql\nsystemctl start mysqld\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u4E8C\u8FDB\u5236\u65E5\u5FD7\u5907\u4EFD"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'# \u5237\u65B0\u65E5\u5FD7\nmysqladmin -u root -p flush-logs\n\n# \u5907\u4EFDbinlog\ncp /var/lib/mysql/mysql-bin.* /backup/binlog/\n\n# \u4F7F\u7528binlog\u6062\u590D\uFF08\u65F6\u95F4\u70B9\u6062\u590D\uFF09\nmysqlbinlog --start-datetime="2024-01-01 00:00:00" \\\n            --stop-datetime="2024-01-01 23:59:59" \\\n            mysql-bin.000001 | mysql -u root -p\n\n# \u4F7F\u7528binlog\u6062\u590D\uFF08\u4F4D\u7F6E\u6062\u590D\uFF09\nmysqlbinlog --start-position=1000 \\\n            --stop-position=2000 \\\n            mysql-bin.000001 | mysql -u root -p\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5907\u4EFD\u7B56\u7565"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u5168\u91CF\u5907\u4EFD + \u589E\u91CF\u5907\u4EFD"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# \u5468\u65E5\uFF1A\u5168\u91CF\u5907\u4EFD\nmysqldump --all-databases > full_backup_sunday.sql\n\n# \u5468\u4E00\u5230\u5468\u516D\uFF1A\u589E\u91CF\u5907\u4EFD\uFF08binlog\uFF09\nmysqladmin flush-logs\ncp mysql-bin.* /backup/incremental/\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u5B9A\u65F6\u5907\u4EFD\u811A\u672C"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'#!/bin/bash\nDATE=$(date +%Y%m%d_%H%M%S)\nBACKUP_DIR="/backup/mysql"\nDB_NAME="mydb"\n\n# \u521B\u5EFA\u5907\u4EFD\u76EE\u5F55\nmkdir -p $BACKUP_DIR\n\n# \u6267\u884C\u5907\u4EFD\nmysqldump -u root -p\'password\' \\\n  --single-transaction \\\n  --master-data=2 \\\n  --flush-logs \\\n  $DB_NAME | gzip > $BACKUP_DIR/${DB_NAME}_${DATE}.sql.gz\n\n# \u5220\u96647\u5929\u524D\u7684\u5907\u4EFD\nfind $BACKUP_DIR -name "*.sql.gz" -mtime +7 -delete\n\n# \u8BB0\u5F55\u65E5\u5FD7\necho "Backup completed at $(date)" >> $BACKUP_DIR/backup.log\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u5B9A\u65F6\u4EFB\u52A1"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# \u6DFB\u52A0\u5230crontab\ncrontab -e\n\n# \u6BCF\u5929\u51CC\u66682\u70B9\u6267\u884C\u5907\u4EFD\n0 2 * * * /path/to/backup.sh\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6062\u590D\u573A\u666F"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u5B8C\u5168\u6062\u590D"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"mysql -u root -p < full_backup.sql\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u65F6\u95F4\u70B9\u6062\u590D"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'# 1. \u6062\u590D\u5168\u91CF\u5907\u4EFD\nmysql -u root -p < full_backup.sql\n\n# 2. \u5E94\u7528binlog\u5230\u6307\u5B9A\u65F6\u95F4\u70B9\nmysqlbinlog --stop-datetime="2024-01-01 10:00:00" \\\n  mysql-bin.000001 mysql-bin.000002 | mysql -u root -p\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u8DF3\u8FC7\u9519\u8BEF\u6062\u590D"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# \u8DF3\u8FC7\u4E00\u4E2A\u9519\u8BEF\nSET GLOBAL sql_slave_skip_counter = 1;\nSTART SLAVE;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5907\u4EFD\u9A8C\u8BC1"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# \u5B9A\u671F\u9A8C\u8BC1\u5907\u4EFD\u53EF\u7528\u6027\nmysql -u root -p test_db < backup.sql\n"})}),"\n",(0,r.jsx)(s.h3,{id:"20-mysql\u7684\u5B57\u7B26\u96C6\u548C\u6392\u5E8F\u89C4\u5219\u662F\u4EC0\u4E48",children:"20. MySQL\u7684\u5B57\u7B26\u96C6\u548C\u6392\u5E8F\u89C4\u5219\u662F\u4EC0\u4E48\uFF1F"}),"\n",(0,r.jsx)(s.p,{children:"**\u5B57\u7B26\u96C6\uFF08Character Set\uFF09**\u5B9A\u4E49\u4E86\u5B57\u7B26\u7684\u7F16\u7801\u65B9\u5F0F\uFF0C**\u6392\u5E8F\u89C4\u5219\uFF08Collation\uFF09**\u5B9A\u4E49\u4E86\u5B57\u7B26\u7684\u6BD4\u8F83\u548C\u6392\u5E8F\u89C4\u5219\u3002"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5E38\u7528\u5B57\u7B26\u96C6"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. latin1"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"MySQL\u9ED8\u8BA4\u5B57\u7B26\u96C6\uFF085.7\u53CA\u4EE5\u524D\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"\u5355\u5B57\u8282\u7F16\u7801"}),"\n",(0,r.jsx)(s.li,{children:"\u4E0D\u652F\u6301\u4E2D\u6587"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. utf8"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6700\u591A3\u5B57\u8282"}),"\n",(0,r.jsx)(s.li,{children:"\u4E0D\u5B8C\u6574\u7684UTF-8\u5B9E\u73B0"}),"\n",(0,r.jsx)(s.li,{children:"\u4E0D\u652F\u6301emoji\u7B494\u5B57\u8282\u5B57\u7B26"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. utf8mb4"}),"\uFF08\u63A8\u8350\uFF09\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5B8C\u6574\u7684UTF-8\u5B9E\u73B0"}),"\n",(0,r.jsx)(s.li,{children:"\u6700\u591A4\u5B57\u8282"}),"\n",(0,r.jsx)(s.li,{children:"\u652F\u6301emoji"}),"\n",(0,r.jsx)(s.li,{children:"MySQL 8.0\u9ED8\u8BA4\u5B57\u7B26\u96C6"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. gbk"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4E2D\u6587\u7F16\u7801"}),"\n",(0,r.jsx)(s.li,{children:"\u53CC\u5B57\u8282"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u67E5\u770B\u5B57\u7B26\u96C6"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770B\u652F\u6301\u7684\u5B57\u7B26\u96C6\nSHOW CHARACTER SET;\n\n-- \u67E5\u770B\u5F53\u524D\u5B57\u7B26\u96C6\nSHOW VARIABLES LIKE 'character%';\n\n-- \u67E5\u770B\u6570\u636E\u5E93\u5B57\u7B26\u96C6\nSELECT DEFAULT_CHARACTER_SET_NAME \nFROM information_schema.SCHEMATA \nWHERE SCHEMA_NAME = 'mydb';\n\n-- \u67E5\u770B\u8868\u5B57\u7B26\u96C6\nSHOW CREATE TABLE users;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8BBE\u7F6E\u5B57\u7B26\u96C6"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u670D\u52A1\u5668\u7EA7\u522B\uFF08my.cnf\uFF09\n[mysqld]\ncharacter-set-server=utf8mb4\ncollation-server=utf8mb4_unicode_ci\n\n[client]\ndefault-character-set=utf8mb4\n\n-- \u6570\u636E\u5E93\u7EA7\u522B\nCREATE DATABASE mydb \nCHARACTER SET utf8mb4 \nCOLLATE utf8mb4_unicode_ci;\n\nALTER DATABASE mydb \nCHARACTER SET utf8mb4 \nCOLLATE utf8mb4_unicode_ci;\n\n-- \u8868\u7EA7\u522B\nCREATE TABLE users (\n  id INT,\n  name VARCHAR(50)\n) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\n\nALTER TABLE users \nCHARACTER SET utf8mb4 \nCOLLATE utf8mb4_unicode_ci;\n\n-- \u5217\u7EA7\u522B\nALTER TABLE users \nMODIFY name VARCHAR(50) \nCHARACTER SET utf8mb4 \nCOLLATE utf8mb4_unicode_ci;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6392\u5E8F\u89C4\u5219"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5E38\u7528Collation"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. utf8mb4_general_ci"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4E0D\u533A\u5206\u5927\u5C0F\u5199"}),"\n",(0,r.jsx)(s.li,{children:"\u6027\u80FD\u8F83\u597D"}),"\n",(0,r.jsx)(s.li,{children:"\u51C6\u786E\u6027\u7A0D\u5DEE"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. utf8mb4_unicode_ci"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4E0D\u533A\u5206\u5927\u5C0F\u5199"}),"\n",(0,r.jsx)(s.li,{children:"\u51C6\u786E\u6027\u597D"}),"\n",(0,r.jsx)(s.li,{children:"\u6027\u80FD\u7A0D\u5DEE"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. utf8mb4_bin"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u533A\u5206\u5927\u5C0F\u5199"}),"\n",(0,r.jsx)(s.li,{children:"\u4E8C\u8FDB\u5236\u6BD4\u8F83"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. utf8mb4_0900_ai_ci"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"MySQL 8.0\u9ED8\u8BA4"}),"\n",(0,r.jsx)(s.li,{children:"\u652F\u6301\u66F4\u591A\u8BED\u8A00"}),"\n",(0,r.jsx)(s.li,{children:"ai: accent insensitive\uFF08\u4E0D\u533A\u5206\u91CD\u97F3\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"ci: case insensitive\uFF08\u4E0D\u533A\u5206\u5927\u5C0F\u5199\uFF09"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u793A\u4F8B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFA\u6D4B\u8BD5\u8868\nCREATE TABLE test (\n  name VARCHAR(50)\n) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;\n\nINSERT INTO test VALUES ('A'), ('a'), ('B'), ('b');\n\n-- \u4E0D\u533A\u5206\u5927\u5C0F\u5199\nSELECT * FROM test WHERE name = 'a';\n-- \u8FD4\u56DE\uFF1AA, a\n\n-- \u533A\u5206\u5927\u5C0F\u5199\nSELECT * FROM test \nWHERE name = 'a' COLLATE utf8mb4_bin;\n-- \u8FD4\u56DE\uFF1Aa\n\n-- \u6392\u5E8F\nSELECT * FROM test ORDER BY name;\n-- utf8mb4_general_ci: A, a, B, b\n-- utf8mb4_bin: A, B, a, b\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B57\u7B26\u96C6\u8F6C\u6362"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u8F6C\u6362\u8868\u5B57\u7B26\u96C6\nALTER TABLE users \nCONVERT TO CHARACTER SET utf8mb4 \nCOLLATE utf8mb4_unicode_ci;\n\n-- \u53EA\u4FEE\u6539\u8868\u5B9A\u4E49\uFF0C\u4E0D\u8F6C\u6362\u6570\u636E\nALTER TABLE users \nDEFAULT CHARACTER SET utf8mb4 \nCOLLATE utf8mb4_unicode_ci;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8FDE\u63A5\u5B57\u7B26\u96C6"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u8BBE\u7F6E\u8FDE\u63A5\u5B57\u7B26\u96C6\nSET NAMES utf8mb4;\n\n-- \u7B49\u4EF7\u4E8E\nSET character_set_client = utf8mb4;\nSET character_set_results = utf8mb4;\nSET character_set_connection = utf8mb4;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6700\u4F73\u5B9E\u8DF5"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"\u7EDF\u4E00\u4F7F\u7528utf8mb4"}),"\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528utf8mb4_unicode_ci\u6216utf8mb4_0900_ai_ci"}),"\n",(0,r.jsx)(s.li,{children:"\u5728my.cnf\u4E2D\u914D\u7F6E\u9ED8\u8BA4\u5B57\u7B26\u96C6"}),"\n",(0,r.jsx)(s.li,{children:"\u521B\u5EFA\u6570\u636E\u5E93\u65F6\u660E\u786E\u6307\u5B9A\u5B57\u7B26\u96C6"}),"\n",(0,r.jsx)(s.li,{children:"\u5E94\u7528\u7A0B\u5E8F\u8FDE\u63A5\u65F6\u8BBE\u7F6E\u5B57\u7B26\u96C6"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"21-\u4EC0\u4E48\u662F\u8054\u5408\u7D22\u5F15\u7684\u6700\u5DE6\u524D\u7F00\u539F\u5219",children:"21. \u4EC0\u4E48\u662F\u8054\u5408\u7D22\u5F15\u7684\u6700\u5DE6\u524D\u7F00\u539F\u5219\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6700\u5DE6\u524D\u7F00\u539F\u5219"}),"\u662F\u8054\u5408\u7D22\u5F15\u4F7F\u7528\u7684\u6838\u5FC3\u89C4\u5219\uFF0C\u51B3\u5B9A\u4E86\u7D22\u5F15\u662F\u5426\u80FD\u88AB\u6709\u6548\u5229\u7528\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u539F\u7406"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.p,{children:"\u8054\u5408\u7D22\u5F15\u6309\u7167\u7D22\u5F15\u5217\u7684\u987A\u5E8F\u8FDB\u884C\u6392\u5E8F\u548C\u67E5\u627E\uFF0C\u53EA\u6709\u4ECE\u6700\u5DE6\u8FB9\u7684\u5217\u5F00\u59CB\u8FDE\u7EED\u5339\u914D\uFF0C\u7D22\u5F15\u624D\u80FD\u751F\u6548\u3002"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u793A\u4F8B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFA\u8054\u5408\u7D22\u5F15\nCREATE INDEX idx_abc ON users(a, b, c);\n\n-- \u7D22\u5F15\u7ED3\u6784\uFF08\u903B\u8F91\u4E0A\uFF09\na | b | c | \u4E3B\u952E\n1 | 1 | 1 | id1\n1 | 1 | 2 | id2\n1 | 2 | 1 | id3\n2 | 1 | 1 | id4\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u80FD\u4F7F\u7528\u7D22\u5F15\u7684\u60C5\u51B5"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- 1. \u4F7F\u7528a\uFF08\u2713\uFF09\nSELECT * FROM users WHERE a = 1;\n\n-- 2. \u4F7F\u7528a, b\uFF08\u2713\uFF09\nSELECT * FROM users WHERE a = 1 AND b = 2;\n\n-- 3. \u4F7F\u7528a, b, c\uFF08\u2713\uFF09\nSELECT * FROM users WHERE a = 1 AND b = 2 AND c = 3;\n\n-- 4. \u4F7F\u7528a, c\uFF08\u2713 \u90E8\u5206\u4F7F\u7528\uFF0C\u53EA\u7528\u5230a\uFF09\nSELECT * FROM users WHERE a = 1 AND c = 3;\n\n-- 5. \u987A\u5E8F\u65E0\u5173\uFF08\u2713 \u4F18\u5316\u5668\u4F1A\u8C03\u6574\uFF09\nSELECT * FROM users WHERE b = 2 AND a = 1;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E0D\u80FD\u4F7F\u7528\u7D22\u5F15\u7684\u60C5\u51B5"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- 1. \u8DF3\u8FC7a\uFF0C\u4ECEb\u5F00\u59CB\uFF08\u2717\uFF09\nSELECT * FROM users WHERE b = 2;\n\n-- 2. \u8DF3\u8FC7a\uFF0C\u4ECEc\u5F00\u59CB\uFF08\u2717\uFF09\nSELECT * FROM users WHERE c = 3;\n\n-- 3. \u53EA\u7528b\u548Cc\uFF08\u2717\uFF09\nSELECT * FROM users WHERE b = 2 AND c = 3;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8303\u56F4\u67E5\u8BE2\u7684\u5F71\u54CD"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- 1. a\u4F7F\u7528\u7B49\u503C\uFF0Cb\u4F7F\u7528\u8303\u56F4\uFF0Cc\u5931\u6548\nSELECT * FROM users WHERE a = 1 AND b > 2 AND c = 3;\n-- \u4F7F\u7528\u7D22\u5F15\uFF1Aa, b\n-- \u672A\u4F7F\u7528\uFF1Ac\n\n-- 2. a\u4F7F\u7528\u8303\u56F4\uFF0Cb\u548Cc\u5931\u6548\nSELECT * FROM users WHERE a > 1 AND b = 2 AND c = 3;\n-- \u4F7F\u7528\u7D22\u5F15\uFF1Aa\n-- \u672A\u4F7F\u7528\uFF1Ab, c\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7D22\u5F15\u8BBE\u8BA1\u5EFA\u8BAE"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u533A\u5206\u5EA6\u9AD8\u7684\u5217\u653E\u524D\u9762"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u597D\u7684\u8BBE\u8BA1\nCREATE INDEX idx_status_create_time ON orders(status, create_time);\n-- status\u533A\u5206\u5EA6\u4F4E\uFF0C\u4F46\u67E5\u8BE2\u9891\u7E41\n-- create_time\u533A\u5206\u5EA6\u9AD8\n\n-- \u5982\u679C\u4E3B\u8981\u67E5\u8BE2\u662F\uFF1A\nWHERE status = 1 AND create_time > '2024-01-01'\n-- \u8FD9\u4E2A\u7D22\u5F15\u5F88\u5408\u9002\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u8003\u8651\u67E5\u8BE2\u9891\u7387"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u8BE21\uFF1AWHERE a = 1 AND b = 2\uFF08\u9891\u7E41\uFF09\n-- \u67E5\u8BE22\uFF1AWHERE a = 1\uFF08\u5076\u5C14\uFF09\n-- \u67E5\u8BE23\uFF1AWHERE b = 2\uFF08\u5F88\u5C11\uFF09\n\n-- \u63A8\u8350\u7D22\u5F15\nCREATE INDEX idx_ab ON table(a, b);\n-- \u53EF\u4EE5\u8986\u76D6\u67E5\u8BE21\u548C\u67E5\u8BE22\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u8986\u76D6\u7D22\u5F15\u4F18\u5316"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u8BE2\nSELECT a, b, c FROM users WHERE a = 1 AND b = 2;\n\n-- \u7D22\u5F15\nCREATE INDEX idx_abc ON users(a, b, c);\n-- \u8986\u76D6\u7D22\u5F15\uFF0C\u65E0\u9700\u56DE\u8868\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9A8C\u8BC1\u7D22\u5F15\u4F7F\u7528"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"EXPLAIN SELECT * FROM users WHERE a = 1 AND b = 2;\n-- \u67E5\u770Bkey_len\u5224\u65AD\u4F7F\u7528\u4E86\u51E0\u4E2A\u5217\n-- a(INT): 4\u5B57\u8282\n-- a+b(INT): 8\u5B57\u8282\n-- a+b+c(INT): 12\u5B57\u8282\n"})}),"\n",(0,r.jsx)(s.h3,{id:"22-\u4E3A\u4EC0\u4E48innodb\u4F7F\u7528b\u6811\u800C\u4E0D\u662Fb\u6811",children:"22. \u4E3A\u4EC0\u4E48InnoDB\u4F7F\u7528B+\u6811\u800C\u4E0D\u662FB\u6811\uFF1F"}),"\n",(0,r.jsx)(s.p,{children:"InnoDB\u9009\u62E9B+\u6811\u4F5C\u4E3A\u7D22\u5F15\u7ED3\u6784\u662F\u7ECF\u8FC7\u6DF1\u601D\u719F\u8651\u7684\u8BBE\u8BA1\u51B3\u7B56\u3002"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"B\u6811 vs B+\u6811\u7ED3\u6784\u5BF9\u6BD4"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"B\u6811"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"        [10, 20]\n       /    |    \\\n   [5,8]  [15]  [25,30]\n   / | \\   |    /  |  \\\n  \u6570\u636E\u8282\u70B9\uFF08\u6BCF\u4E2A\u8282\u70B9\u90FD\u5B58\u6570\u636E\uFF09\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"B+\u6811"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"        [10, 20]\n       /    |    \\\n   [5,8]  [15]  [25,30]\n   / | \\   |    /  |  \\\n  \u53F6\u5B50\u8282\u70B9\uFF08\u53EA\u6709\u53F6\u5B50\u8282\u70B9\u5B58\u6570\u636E\uFF09\n  [5]\u2192[8]\u2192[10]\u2192[15]\u2192[20]\u2192[25]\u2192[30]\n  \uFF08\u53F6\u5B50\u8282\u70B9\u901A\u8FC7\u6307\u9488\u8FDE\u63A5\uFF09\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"B+\u6811\u7684\u4F18\u52BF"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u66F4\u9AD8\u7684\u6247\u51FA\u5EA6\uFF08Fan-out\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"B\u6811\uFF1A\n- \u975E\u53F6\u5B50\u8282\u70B9\u5B58\u50A8\u952E\u548C\u6570\u636E\n- \u6BCF\u4E2A\u8282\u70B9\u80FD\u5B58\u50A8\u7684\u952E\u8F83\u5C11\n- \u6811\u7684\u9AD8\u5EA6\u8F83\u9AD8\n\nB+\u6811\uFF1A\n- \u975E\u53F6\u5B50\u8282\u70B9\u53EA\u5B58\u50A8\u952E\n- \u6BCF\u4E2A\u8282\u70B9\u80FD\u5B58\u50A8\u66F4\u591A\u7684\u952E\n- \u6811\u7684\u9AD8\u5EA6\u8F83\u4F4E\n\n\u793A\u4F8B\uFF08\u5047\u8BBE\u9875\u5927\u5C0F16KB\uFF09\uFF1A\nB\u6811\uFF1A\u4E00\u4E2A\u8282\u70B9\u53EF\u80FD\u5B58100\u4E2A\u952E\nB+\u6811\uFF1A\u4E00\u4E2A\u8282\u70B9\u53EF\u80FD\u5B581000\u4E2A\u952E\n\n\u67E5\u627E\u6548\u7387\uFF1A\n3\u5C42B+\u6811\u53EF\u4EE5\u5B58\u50A8\uFF1A1000 * 1000 * 1000 = 10\u4EBF\u6761\u8BB0\u5F55\n3\u5C42B\u6811\u53EF\u80FD\u53EA\u80FD\u5B58\u50A8\uFF1A100 * 100 * 100 = 100\u4E07\u6761\u8BB0\u5F55\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u8303\u56F4\u67E5\u8BE2\u6548\u7387\u9AD8"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u8BE2\u8303\u56F4\u6570\u636E\nSELECT * FROM users WHERE id BETWEEN 100 AND 200;\n\n-- B\u6811\uFF1A\n\u9700\u8981\u591A\u6B21\u968F\u673A\u8BBF\u95EE\u4E0D\u540C\u7684\u8282\u70B9\n\n-- B+\u6811\uFF1A\n1. \u5B9A\u4F4D\u5230\u8D77\u59CB\u53F6\u5B50\u8282\u70B9\uFF08id=100\uFF09\n2. \u987A\u5E8F\u904D\u5386\u53F6\u5B50\u8282\u70B9\u94FE\u8868\u5230\u7ED3\u675F\uFF08id=200\uFF09\n3. \u6240\u6709\u6570\u636E\u90FD\u5728\u53F6\u5B50\u8282\u70B9\uFF0C\u4E14\u6709\u5E8F\u8FDE\u63A5\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u5168\u8868\u626B\u63CF\u6548\u7387\u9AD8"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"SELECT * FROM users;\n\n-- B\u6811\uFF1A\n\u9700\u8981\u904D\u5386\u6240\u6709\u8282\u70B9\uFF08\u5305\u62EC\u975E\u53F6\u5B50\u8282\u70B9\uFF09\n\n-- B+\u6811\uFF1A\n\u53EA\u9700\u904D\u5386\u53F6\u5B50\u8282\u70B9\u94FE\u8868\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. \u7A33\u5B9A\u7684\u67E5\u8BE2\u6027\u80FD"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"B\u6811\uFF1A\n- \u6570\u636E\u5206\u5E03\u5728\u5404\u5C42\n- \u67E5\u8BE2\u6027\u80FD\u4E0D\u7A33\u5B9A\n- \u6700\u597D\u60C5\u51B5\uFF1AO(1)\uFF08\u6839\u8282\u70B9\uFF09\n- \u6700\u574F\u60C5\u51B5\uFF1AO(log n)\uFF08\u53F6\u5B50\u8282\u70B9\uFF09\n\nB+\u6811\uFF1A\n- \u6240\u6709\u6570\u636E\u90FD\u5728\u53F6\u5B50\u8282\u70B9\n- \u67E5\u8BE2\u6027\u80FD\u7A33\u5B9A\n- \u6240\u6709\u67E5\u8BE2\u90FD\u662F\uFF1AO(log n)\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"5. \u66F4\u597D\u7684\u78C1\u76D8\u9884\u8BFB"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"\u64CD\u4F5C\u7CFB\u7EDF\u7684\u78C1\u76D8\u9884\u8BFB\uFF1A\n- \u4E00\u6B21\u8BFB\u53D6\u4E00\u4E2A\u9875\uFF08\u901A\u5E384KB\u621616KB\uFF09\n- B+\u6811\u7684\u8282\u70B9\u5927\u5C0F\u901A\u5E38\u8BBE\u8BA1\u4E3A\u9875\u7684\u6574\u6570\u500D\n\nB+\u6811\u4F18\u52BF\uFF1A\n- \u975E\u53F6\u5B50\u8282\u70B9\u53EA\u5B58\u952E\uFF0C\u53EF\u4EE5\u5728\u4E00\u4E2A\u9875\u4E2D\u5B58\u66F4\u591A\u952E\n- \u51CF\u5C11\u78C1\u76D8I/O\u6B21\u6570\n- \u63D0\u9AD8\u7F13\u5B58\u547D\u4E2D\u7387\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"6. \u652F\u6301\u6570\u636E\u5E93\u7684\u987A\u5E8F\u8BBF\u95EE"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- ORDER BY\u67E5\u8BE2\nSELECT * FROM users ORDER BY id;\n\n-- B+\u6811\uFF1A\n\u76F4\u63A5\u904D\u5386\u53F6\u5B50\u8282\u70B9\u94FE\u8868\uFF0C\u6570\u636E\u5DF2\u6392\u5E8F\n\n-- B\u6811\uFF1A\n\u9700\u8981\u4E2D\u5E8F\u904D\u5386\u6574\u68F5\u6811\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B9E\u9645\u6848\u4F8B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5047\u8BBEInnoDB\u9875\u5927\u5C0F16KB\uFF0C\u4E3B\u952EINT(4\u5B57\u8282)\uFF0C\u6307\u94886\u5B57\u8282\n\n-- B+\u6811\u975E\u53F6\u5B50\u8282\u70B9\uFF1A\n\u6BCF\u4E2A\u952E\u503C\u5BF9\uFF1A4 + 6 = 10\u5B57\u8282\n\u4E00\u4E2A\u8282\u70B9\u53EF\u5B58\uFF1A16KB / 10B \u2248 1600\u4E2A\u952E\n\n-- 3\u5C42B+\u6811\uFF1A\n\u7B2C1\u5C42\uFF1A1\u4E2A\u8282\u70B9\uFF08\u6839\uFF09\n\u7B2C2\u5C42\uFF1A1600\u4E2A\u8282\u70B9\n\u7B2C3\u5C42\uFF1A1600 * 1600 = 256\u4E07\u4E2A\u8282\u70B9\n\u53EF\u5B58\u50A8\uFF1A256\u4E07\u6761\u8BB0\u5F55\n\n-- \u67E5\u8BE2\u4EFB\u610F\u8BB0\u5F55\uFF1A\n\u6700\u591A3\u6B21\u78C1\u76D8I/O\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E3A\u4EC0\u4E48\u4E0D\u7528\u5176\u4ED6\u6570\u636E\u7ED3\u6784"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u54C8\u5E0C\u8868"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4E0D\u652F\u6301\u8303\u56F4\u67E5\u8BE2"}),"\n",(0,r.jsx)(s.li,{children:"\u4E0D\u652F\u6301\u6392\u5E8F"}),"\n",(0,r.jsx)(s.li,{children:"\u4E0D\u652F\u6301\u6A21\u7CCA\u67E5\u8BE2"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E8C\u53C9\u641C\u7D22\u6811"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6811\u7684\u9AD8\u5EA6\u592A\u9AD8"}),"\n",(0,r.jsx)(s.li,{children:"\u78C1\u76D8I/O\u6B21\u6570\u591A"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7EA2\u9ED1\u6811"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6811\u7684\u9AD8\u5EA6\u4ECD\u7136\u8F83\u9AD8"}),"\n",(0,r.jsx)(s.li,{children:"\u4E0D\u9002\u5408\u78C1\u76D8\u5B58\u50A8"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"23-mysql\u7684join\u67E5\u8BE2\u6709\u54EA\u4E9B\u7C7B\u578B",children:"23. MySQL\u7684JOIN\u67E5\u8BE2\u6709\u54EA\u4E9B\u7C7B\u578B\uFF1F"}),"\n",(0,r.jsx)(s.p,{children:"MySQL\u652F\u6301\u591A\u79CDJOIN\u7C7B\u578B\uFF0C\u7528\u4E8E\u8FDE\u63A5\u591A\u4E2A\u8868\u7684\u6570\u636E\u3002"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"JOIN\u7C7B\u578B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. INNER JOIN\uFF08\u5185\u8FDE\u63A5\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u53EA\u8FD4\u56DE\u4E24\u8868\u90FD\u5339\u914D\u7684\u8BB0\u5F55\nSELECT u.name, o.order_no\nFROM users u\nINNER JOIN orders o ON u.id = o.user_id;\n\n-- \u7B80\u5199\uFF08\u7B49\u4EF7\uFF09\nSELECT u.name, o.order_no\nFROM users u, orders o\nWHERE u.id = o.user_id;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7ED3\u679C"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"users:        orders:       \u7ED3\u679C:\nid | name     user_id | no  name | no\n1  | Alice   1       | A1  Alice| A1\n2  | Bob     1       | A2  Alice| A2\n3  | Carol   2       | B1  Bob  | B1\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. LEFT JOIN\uFF08\u5DE6\u8FDE\u63A5\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u8FD4\u56DE\u5DE6\u8868\u6240\u6709\u8BB0\u5F55\uFF0C\u53F3\u8868\u5339\u914D\u7684\u8BB0\u5F55\nSELECT u.name, o.order_no\nFROM users u\nLEFT JOIN orders o ON u.id = o.user_id;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7ED3\u679C"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"users:        orders:       \u7ED3\u679C:\nid | name     user_id | no  name  | no\n1  | Alice   1       | A1  Alice | A1\n2  | Bob     1       | A2  Alice | A2\n3  | Carol   2       | B1  Bob   | B1\n                          Carol | NULL\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. RIGHT JOIN\uFF08\u53F3\u8FDE\u63A5\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u8FD4\u56DE\u53F3\u8868\u6240\u6709\u8BB0\u5F55\uFF0C\u5DE6\u8868\u5339\u914D\u7684\u8BB0\u5F55\nSELECT u.name, o.order_no\nFROM users u\nRIGHT JOIN orders o ON u.id = o.user_id;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. FULL OUTER JOIN\uFF08\u5168\u5916\u8FDE\u63A5\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- MySQL\u4E0D\u76F4\u63A5\u652F\u6301\uFF0C\u9700\u8981\u7528UNION\u6A21\u62DF\nSELECT u.name, o.order_no\nFROM users u\nLEFT JOIN orders o ON u.id = o.user_id\nUNION\nSELECT u.name, o.order_no\nFROM users u\nRIGHT JOIN orders o ON u.id = o.user_id;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"5. CROSS JOIN\uFF08\u4EA4\u53C9\u8FDE\u63A5\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u7B1B\u5361\u5C14\u79EF\uFF0C\u8FD4\u56DE\u6240\u6709\u53EF\u80FD\u7684\u7EC4\u5408\nSELECT u.name, o.order_no\nFROM users u\nCROSS JOIN orders o;\n\n-- \u7ED3\u679C\uFF1A3\u4E2A\u7528\u6237 \xd7 3\u4E2A\u8BA2\u5355 = 9\u6761\u8BB0\u5F55\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"6. SELF JOIN\uFF08\u81EA\u8FDE\u63A5\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u8868\u4E0E\u81EA\u5DF1\u8FDE\u63A5\n-- \u67E5\u627E\u540C\u4E00\u90E8\u95E8\u7684\u5458\u5DE5\nSELECT e1.name AS employee, e2.name AS colleague\nFROM employees e1\nJOIN employees e2 ON e1.dept_id = e2.dept_id\nWHERE e1.id != e2.id;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"JOIN\u4F18\u5316\u6280\u5DE7"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u4F7F\u7528\u5C0F\u8868\u9A71\u52A8\u5927\u8868"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u597D\uFF1A\u5C0F\u8868\u5728\u524D\nSELECT *\nFROM small_table s\nJOIN large_table l ON s.id = l.small_id;\n\n-- \u4E0D\u597D\uFF1A\u5927\u8868\u5728\u524D\nSELECT *\nFROM large_table l\nJOIN small_table s ON l.small_id = s.id;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u786E\u4FDDJOIN\u5217\u6709\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4E3AJOIN\u5217\u521B\u5EFA\u7D22\u5F15\nCREATE INDEX idx_user_id ON orders(user_id);\n\n-- \u67E5\u8BE2\u4F1A\u4F7F\u7528\u7D22\u5F15\nSELECT *\nFROM users u\nJOIN orders o ON u.id = o.user_id;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u907F\u514DJOIN\u8FC7\u591A\u8868"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4E0D\u597D\uFF1AJOIN\u592A\u591A\u8868\nSELECT *\nFROM t1\nJOIN t2 ON t1.id = t2.t1_id\nJOIN t3 ON t2.id = t3.t2_id\nJOIN t4 ON t3.id = t4.t3_id\nJOIN t5 ON t4.id = t5.t4_id;  -- \u6027\u80FD\u5DEE\n\n-- \u597D\uFF1A\u5206\u6B65\u67E5\u8BE2\u6216\u4F7F\u7528\u4E2D\u95F4\u8868\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. \u4F7F\u7528STRAIGHT_JOIN\u5F3A\u5236\u987A\u5E8F"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5F3A\u5236MySQL\u6309\u6307\u5B9A\u987A\u5E8FJOIN\nSELECT *\nFROM small_table\nSTRAIGHT_JOIN large_table ON small_table.id = large_table.small_id;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B9E\u9645\u5E94\u7528\u793A\u4F8B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u67E5\u627E\u6CA1\u6709\u8BA2\u5355\u7684\u7528\u6237"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"SELECT u.*\nFROM users u\nLEFT JOIN orders o ON u.id = o.user_id\nWHERE o.id IS NULL;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u67E5\u627E\u6709\u8BA2\u5355\u7684\u7528\u6237"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"SELECT DISTINCT u.*\nFROM users u\nINNER JOIN orders o ON u.id = o.user_id;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7EDF\u8BA1\u6BCF\u4E2A\u7528\u6237\u7684\u8BA2\u5355\u6570"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"SELECT u.name, COUNT(o.id) AS order_count\nFROM users u\nLEFT JOIN orders o ON u.id = o.user_id\nGROUP BY u.id, u.name;\n"})}),"\n",(0,r.jsx)(s.h3,{id:"24-\u4EC0\u4E48\u662F\u4E34\u65F6\u8868",children:"24. \u4EC0\u4E48\u662F\u4E34\u65F6\u8868\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E34\u65F6\u8868"}),"\u662FMySQL\u4E2D\u7528\u4E8E\u5B58\u50A8\u4E34\u65F6\u6570\u636E\u7684\u7279\u6B8A\u8868\uFF0C\u4F1A\u8BDD\u7ED3\u675F\u540E\u81EA\u52A8\u5220\u9664\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E34\u65F6\u8868\u7C7B\u578B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u7528\u6237\u521B\u5EFA\u7684\u4E34\u65F6\u8868"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFA\u4E34\u65F6\u8868\nCREATE TEMPORARY TABLE temp_users (\n    id INT,\n    name VARCHAR(50)\n);\n\n-- \u63D2\u5165\u6570\u636E\nINSERT INTO temp_users VALUES (1, 'Alice');\n\n-- \u67E5\u8BE2\nSELECT * FROM temp_users;\n\n-- \u4F1A\u8BDD\u7ED3\u675F\u540E\u81EA\u52A8\u5220\u9664\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7279\u70B9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u53EA\u5BF9\u5F53\u524D\u4F1A\u8BDD\u53EF\u89C1"}),"\n",(0,r.jsx)(s.li,{children:"\u4F1A\u8BDD\u7ED3\u675F\u81EA\u52A8\u5220\u9664"}),"\n",(0,r.jsx)(s.li,{children:"\u53EF\u4EE5\u4E0E\u666E\u901A\u8868\u540C\u540D\uFF08\u4E34\u65F6\u8868\u4F18\u5148\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"\u5B58\u50A8\u5728tmpdir\u76EE\u5F55"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. MySQL\u5185\u90E8\u4E34\u65F6\u8868"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.p,{children:"MySQL\u5728\u6267\u884C\u67D0\u4E9B\u67E5\u8BE2\u65F6\u4F1A\u81EA\u52A8\u521B\u5EFA\u5185\u90E8\u4E34\u65F6\u8868\uFF1A"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u89E6\u53D1\u573A\u666F"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- 1. UNION\u67E5\u8BE2\nSELECT id FROM users\nUNION\nSELECT id FROM orders;\n\n-- 2. DISTINCT + ORDER BY\u4E0D\u540C\u5217\nSELECT DISTINCT name FROM users ORDER BY age;\n\n-- 3. GROUP BY + ORDER BY\u4E0D\u540C\u5217\nSELECT name, COUNT(*) FROM users \nGROUP BY name ORDER BY age;\n\n-- 4. \u5B50\u67E5\u8BE2\u5728FROM\u5B50\u53E5\nSELECT * FROM (\n    SELECT * FROM users WHERE age > 18\n) AS t;\n\n-- 5. \u4F7F\u7528SQL_BUFFER_RESULT\nSELECT SQL_BUFFER_RESULT * FROM users;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5185\u90E8\u4E34\u65F6\u8868\u7C7B\u578B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Memory\u5F15\u64CE\u4E34\u65F6\u8868"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5B58\u50A8\u5728\u5185\u5B58\u4E2D"}),"\n",(0,r.jsx)(s.li,{children:"\u901F\u5EA6\u5FEB"}),"\n",(0,r.jsx)(s.li,{children:"\u53D7\u9650\u4E8Etmp_table_size\u548Cmax_heap_table_size"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"InnoDB\u5F15\u64CE\u4E34\u65F6\u8868"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5B58\u50A8\u5728\u78C1\u76D8"}),"\n",(0,r.jsx)(s.li,{children:"\u5F53\u5185\u5B58\u4E34\u65F6\u8868\u8D85\u8FC7\u9650\u5236\u65F6\u8F6C\u6362"}),"\n",(0,r.jsx)(s.li,{children:"\u6027\u80FD\u8F83\u5DEE"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u67E5\u770B\u4E34\u65F6\u8868\u4F7F\u7528"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770B\u4E34\u65F6\u8868\u7EDF\u8BA1\nSHOW STATUS LIKE 'Created_tmp%';\n-- Created_tmp_tables: \u521B\u5EFA\u7684\u4E34\u65F6\u8868\u6570\n-- Created_tmp_disk_tables: \u78C1\u76D8\u4E34\u65F6\u8868\u6570\n\n-- \u4F7F\u7528EXPLAIN\u67E5\u770B\nEXPLAIN SELECT DISTINCT name FROM users ORDER BY age;\n-- Extra: Using temporary\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F18\u5316\u4E34\u65F6\u8868"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u589E\u52A0\u5185\u5B58\u4E34\u65F6\u8868\u5927\u5C0F"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"SET tmp_table_size = 64M;\nSET max_heap_table_size = 64M;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u907F\u514D\u4EA7\u751F\u4E34\u65F6\u8868"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4E0D\u597D\uFF1A\u4EA7\u751F\u4E34\u65F6\u8868\nSELECT DISTINCT name FROM users ORDER BY age;\n\n-- \u597D\uFF1A\u4F7F\u7528\u7D22\u5F15\u907F\u514D\u4E34\u65F6\u8868\nCREATE INDEX idx_name_age ON users(name, age);\nSELECT DISTINCT name FROM users ORDER BY name;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u4F7F\u7528\u7D22\u5F15\u8986\u76D6"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFA\u8986\u76D6\u7D22\u5F15\nCREATE INDEX idx_cover ON users(name, age);\n\n-- \u67E5\u8BE2\u53EF\u4EE5\u4F7F\u7528\u8986\u76D6\u7D22\u5F15\nSELECT name, age FROM users WHERE name = 'Alice';\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E34\u65F6\u8868\u5E94\u7528\u573A\u666F"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u590D\u6742\u67E5\u8BE2\u7684\u4E2D\u95F4\u7ED3\u679C"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5206\u6B65\u5904\u7406\u590D\u6742\u67E5\u8BE2\nCREATE TEMPORARY TABLE temp_result AS\nSELECT user_id, SUM(amount) AS total\nFROM orders\nWHERE create_time > '2024-01-01'\nGROUP BY user_id;\n\n-- \u4F7F\u7528\u4E34\u65F6\u8868\u7EE7\u7EED\u5904\u7406\nSELECT u.name, t.total\nFROM users u\nJOIN temp_result t ON u.id = t.user_id\nWHERE t.total > 1000;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u6570\u636E\u53BB\u91CD"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"CREATE TEMPORARY TABLE temp_unique AS\nSELECT DISTINCT * FROM users;\n\nDELETE FROM users;\nINSERT INTO users SELECT * FROM temp_unique;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u6279\u91CF\u6570\u636E\u5904\u7406"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5BFC\u5165\u6570\u636E\u5230\u4E34\u65F6\u8868\nLOAD DATA INFILE 'data.csv'\nINTO TABLE temp_import;\n\n-- \u9A8C\u8BC1\u548C\u6E05\u6D17\nDELETE FROM temp_import WHERE invalid_data;\n\n-- \u5BFC\u5165\u5230\u6B63\u5F0F\u8868\nINSERT INTO users SELECT * FROM temp_import;\n"})}),"\n",(0,r.jsx)(s.h3,{id:"25-\u5982\u4F55\u5904\u7406\u5927\u8868\u7684ddl\u64CD\u4F5C",children:"25. \u5982\u4F55\u5904\u7406\u5927\u8868\u7684DDL\u64CD\u4F5C\uFF1F"}),"\n",(0,r.jsx)(s.p,{children:"\u5927\u8868DDL\u64CD\u4F5C\uFF08\u5982ALTER TABLE\uFF09\u53EF\u80FD\u5BFC\u81F4\u957F\u65F6\u95F4\u9501\u8868\uFF0C\u5F71\u54CD\u4E1A\u52A1\u3002"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u95EE\u9898"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4F20\u7EDFDDL\u4F1A\u9501\u8868\nALTER TABLE large_table ADD COLUMN new_col VARCHAR(50);\n-- \u53EF\u80FD\u9501\u8868\u6570\u5C0F\u65F6\uFF0C\u671F\u95F4\u65E0\u6CD5\u8BFB\u5199\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u89E3\u51B3\u65B9\u6848"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u4F7F\u7528Online DDL\uFF08MySQL 5.6+\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5728\u7EBF\u6DFB\u52A0\u5217\nALTER TABLE users \nADD COLUMN phone VARCHAR(20),\nALGORITHM=INPLACE, LOCK=NONE;\n\n-- ALGORITHM\u9009\u9879\uFF1A\n-- COPY: \u521B\u5EFA\u4E34\u65F6\u8868\uFF0C\u590D\u5236\u6570\u636E\uFF08\u9501\u8868\uFF09\n-- INPLACE: \u539F\u5730\u4FEE\u6539\uFF08\u4E0D\u9501\u8868\u6216\u77ED\u6682\u9501\u8868\uFF09\n\n-- LOCK\u9009\u9879\uFF1A\n-- NONE: \u4E0D\u9501\u8868\n-- SHARED: \u5141\u8BB8\u8BFB\uFF0C\u4E0D\u5141\u8BB8\u5199\n-- EXCLUSIVE: \u5B8C\u5168\u9501\u8868\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u652F\u6301Online DDL\u7684\u64CD\u4F5C"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u6DFB\u52A0\u7D22\u5F15\uFF08INPLACE\uFF09\nALTER TABLE users ADD INDEX idx_name(name);\n\n-- \u5220\u9664\u7D22\u5F15\uFF08INPLACE\uFF09\nALTER TABLE users DROP INDEX idx_name;\n\n-- \u6DFB\u52A0\u5217\uFF08INPLACE\uFF0C\u672B\u5C3E\uFF09\nALTER TABLE users ADD COLUMN age INT;\n\n-- \u4FEE\u6539\u5217\u9ED8\u8BA4\u503C\uFF08INPLACE\uFF09\nALTER TABLE users ALTER COLUMN status SET DEFAULT 1;\n\n-- \u91CD\u547D\u540D\u5217\uFF08INPLACE\uFF09\nALTER TABLE users CHANGE old_name new_name VARCHAR(50);\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E0D\u652F\u6301Online DDL\u7684\u64CD\u4F5C"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4FEE\u6539\u5217\u7C7B\u578B\uFF08\u9700\u8981COPY\uFF09\nALTER TABLE users MODIFY COLUMN name VARCHAR(100);\n\n-- \u6DFB\u52A0\u4E3B\u952E\uFF08\u9700\u8981\u91CD\u5EFA\u8868\uFF09\nALTER TABLE users ADD PRIMARY KEY (id);\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u4F7F\u7528pt-online-schema-change"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.p,{children:"Percona Toolkit\u5DE5\u5177\uFF0C\u9002\u7528\u4E8E\u6240\u6709DDL\u64CD\u4F5C\u3002"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'pt-online-schema-change \\\n  --alter "ADD COLUMN phone VARCHAR(20)" \\\n  --execute \\\n  D=mydb,t=users\n\n# \u5DE5\u4F5C\u539F\u7406\uFF1A\n# 1. \u521B\u5EFA\u65B0\u8868\uFF08\u5E26\u65B0\u7ED3\u6784\uFF09\n# 2. \u521B\u5EFA\u89E6\u53D1\u5668\uFF08\u540C\u6B65\u6570\u636E\u53D8\u66F4\uFF09\n# 3. \u5206\u6279\u590D\u5236\u6570\u636E\n# 4. \u5207\u6362\u8868\u540D\n# 5. \u5220\u9664\u65E7\u8868\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u4F7F\u7528gh-ost"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.p,{children:"GitHub\u5F00\u6E90\u5DE5\u5177\uFF0C\u65E0\u89E6\u53D1\u5668\u65B9\u6848\u3002"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'gh-ost \\\n  --user=root \\\n  --password=password \\\n  --host=localhost \\\n  --database=mydb \\\n  --table=users \\\n  --alter="ADD COLUMN phone VARCHAR(20)" \\\n  --execute\n\n# \u5DE5\u4F5C\u539F\u7406\uFF1A\n# 1. \u521B\u5EFAghost\u8868\uFF08\u65B0\u7ED3\u6784\uFF09\n# 2. \u901A\u8FC7binlog\u540C\u6B65\u6570\u636E\u53D8\u66F4\n# 3. \u5206\u6279\u590D\u5236\u6570\u636E\n# 4. \u5207\u6362\u8868\u540D\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. \u5206\u6279\u5904\u7406"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.p,{children:"\u5BF9\u4E8E\u67D0\u4E9B\u64CD\u4F5C\uFF0C\u53EF\u4EE5\u5206\u6279\u6267\u884C\uFF1A"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5220\u9664\u5927\u91CF\u6570\u636E\n-- \u4E0D\u597D\uFF1A\u4E00\u6B21\u5220\u9664\nDELETE FROM users WHERE create_time < '2020-01-01';\n\n-- \u597D\uFF1A\u5206\u6279\u5220\u9664\nDELIMITER $$\nCREATE PROCEDURE batch_delete()\nBEGIN\n    DECLARE rows INT DEFAULT 1;\n    WHILE rows > 0 DO\n        DELETE FROM users \n        WHERE create_time < '2020-01-01'\n        LIMIT 1000;\n        \n        SET rows = ROW_COUNT();\n        SELECT SLEEP(0.1);  -- \u907F\u514D\u5F71\u54CD\u4E1A\u52A1\n    END WHILE;\nEND$$\nDELIMITER ;\n\nCALL batch_delete();\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"5. \u4F7F\u7528\u65B0\u8868\u66FF\u6362"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- 1. \u521B\u5EFA\u65B0\u8868\nCREATE TABLE users_new LIKE users;\nALTER TABLE users_new ADD COLUMN phone VARCHAR(20);\n\n-- 2. \u590D\u5236\u6570\u636E\nINSERT INTO users_new SELECT *, NULL FROM users;\n\n-- 3. \u5207\u6362\u8868\u540D\nRENAME TABLE users TO users_old, users_new TO users;\n\n-- 4. \u5220\u9664\u65E7\u8868\nDROP TABLE users_old;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"6. \u5728\u4ECE\u5E93\u6267\u884C"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- 1. \u5728\u4ECE\u5E93\u505C\u6B62\u590D\u5236\nSTOP SLAVE;\n\n-- 2. \u6267\u884CDDL\nALTER TABLE users ADD COLUMN phone VARCHAR(20);\n\n-- 3. \u4E3B\u4ECE\u5207\u6362\n-- \u63D0\u5347\u4ECE\u5E93\u4E3A\u4E3B\u5E93\n\n-- 4. \u5728\u65B0\u4ECE\u5E93\uFF08\u539F\u4E3B\u5E93\uFF09\u6267\u884CDDL\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6700\u4F73\u5B9E\u8DF5"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u9009\u62E9\u4F4E\u5CF0\u671F"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5728\u51CC\u6668\u6216\u4E1A\u52A1\u4F4E\u5CF0\u671F\u6267\u884C\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u63D0\u524D\u6D4B\u8BD5"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5728\u6D4B\u8BD5\u73AF\u5883\u9A8C\u8BC1DDL\u65F6\u95F4\n-- \u8BC4\u4F30\u5BF9\u4E1A\u52A1\u7684\u5F71\u54CD\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u76D1\u63A7\u6267\u884C\u8FDB\u5EA6"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770BDDL\u8FDB\u5EA6\uFF08MySQL 5.7+\uFF09\nSELECT * FROM performance_schema.events_stages_current;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. \u51C6\u5907\u56DE\u6EDA\u65B9\u6848"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4FDD\u7559\u65E7\u8868\u5907\u4EFD\n-- \u51C6\u5907\u5FEB\u901F\u56DE\u6EDA\u811A\u672C\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"5. \u901A\u77E5\u76F8\u5173\u4EBA\u5458"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u63D0\u524D\u901A\u77E5\u8FD0\u7EF4\u548C\u5F00\u53D1\n-- \u51C6\u5907\u5E94\u6025\u9884\u6848\n"})}),"\n",(0,r.jsx)(s.h3,{id:"26-mysql\u7684\u5206\u5E93\u5206\u8868\u7B56\u7565\u6709\u54EA\u4E9B",children:"26. MySQL\u7684\u5206\u5E93\u5206\u8868\u7B56\u7565\u6709\u54EA\u4E9B\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u5E93\u5206\u8868"}),"\u662F\u5E94\u5BF9\u6D77\u91CF\u6570\u636E\u548C\u9AD8\u5E76\u53D1\u7684\u6838\u5FC3\u89E3\u51B3\u65B9\u6848\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E3A\u4EC0\u4E48\u9700\u8981\u5206\u5E93\u5206\u8868"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5355\u8868\u6570\u636E\u91CF\u8FC7\u5927\uFF08>1000\u4E07\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"\u5E76\u53D1\u538B\u529B\u5927"}),"\n",(0,r.jsx)(s.li,{children:"\u78C1\u76D8I/O\u74F6\u9888"}),"\n",(0,r.jsx)(s.li,{children:"\u5355\u5E93\u8FDE\u63A5\u6570\u9650\u5236"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u62C6\u5206\u65B9\u5F0F"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u5782\u76F4\u62C6\u5206"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5782\u76F4\u5206\u5E93"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"\u539F\u6765\uFF1A\nuser_db\n\u251C\u2500\u2500 users\uFF08\u7528\u6237\u8868\uFF09\n\u251C\u2500\u2500 orders\uFF08\u8BA2\u5355\u8868\uFF09\n\u2514\u2500\u2500 products\uFF08\u5546\u54C1\u8868\uFF09\n\n\u62C6\u5206\u540E\uFF1A\nuser_db\uFF08\u7528\u6237\u5E93\uFF09\n\u2514\u2500\u2500 users\n\norder_db\uFF08\u8BA2\u5355\u5E93\uFF09\n\u2514\u2500\u2500 orders\n\nproduct_db\uFF08\u5546\u54C1\u5E93\uFF09\n\u2514\u2500\u2500 products\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5782\u76F4\u5206\u8868"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u539F\u8868\uFF1Ausers\uFF08\u5B57\u6BB5\u5F88\u591A\uFF09\nid, name, email, phone, address, avatar, bio, settings...\n\n-- \u62C6\u5206\u540E\uFF1A\n-- users\uFF08\u5E38\u7528\u5B57\u6BB5\uFF09\nid, name, email, phone\n\n-- user_profiles\uFF08\u4E0D\u5E38\u7528\u5B57\u6BB5\uFF09\nuser_id, address, avatar, bio, settings\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u6C34\u5E73\u62C6\u5206"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6C34\u5E73\u5206\u5E93"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"user_db_0\n\u2514\u2500\u2500 users\uFF08id % 4 = 0\uFF09\n\nuser_db_1\n\u2514\u2500\u2500 users\uFF08id % 4 = 1\uFF09\n\nuser_db_2\n\u2514\u2500\u2500 users\uFF08id % 4 = 2\uFF09\n\nuser_db_3\n\u2514\u2500\u2500 users\uFF08id % 4 = 3\uFF09\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6C34\u5E73\u5206\u8868"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u540C\u4E00\u4E2A\u5E93\uFF0C\u591A\u4E2A\u8868\nusers_0\uFF08id % 4 = 0\uFF09\nusers_1\uFF08id % 4 = 1\uFF09\nusers_2\uFF08id % 4 = 2\uFF09\nusers_3\uFF08id % 4 = 3\uFF09\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u7247\u7B56\u7565"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u8303\u56F4\u5206\u7247\uFF08Range\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u6309ID\u8303\u56F4\nusers_0: id 1-1000000\nusers_1: id 1000001-2000000\nusers_2: id 2000001-3000000\n\n-- \u6309\u65F6\u95F4\u8303\u56F4\norders_2024_01\norders_2024_02\norders_2024_03\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F18\u70B9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6269\u5BB9\u7B80\u5355"}),"\n",(0,r.jsx)(s.li,{children:"\u8303\u56F4\u67E5\u8BE2\u6548\u7387\u9AD8"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7F3A\u70B9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6570\u636E\u5206\u5E03\u53EF\u80FD\u4E0D\u5747\u5300"}),"\n",(0,r.jsx)(s.li,{children:"\u70ED\u70B9\u95EE\u9898"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u54C8\u5E0C\u5206\u7247\uFF08Hash\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:'// \u6309\u7528\u6237ID\u53D6\u6A21\nint shardIndex = userId % 4;\nString tableName = "users_" + shardIndex;\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F18\u70B9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6570\u636E\u5206\u5E03\u5747\u5300"}),"\n",(0,r.jsx)(s.li,{children:"\u65E0\u70ED\u70B9\u95EE\u9898"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7F3A\u70B9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6269\u5BB9\u56F0\u96BE"}),"\n",(0,r.jsx)(s.li,{children:"\u8303\u56F4\u67E5\u8BE2\u9700\u8981\u67E5\u6240\u6709\u5206\u7247"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u4E00\u81F4\u6027\u54C8\u5E0C"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:"// \u4F7F\u7528\u4E00\u81F4\u6027\u54C8\u5E0C\u73AF\nint hash = consistentHash(userId);\nString shardKey = getShardByHash(hash);\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F18\u70B9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6269\u5BB9\u65F6\u6570\u636E\u8FC1\u79FB\u5C11"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. \u5730\u7406\u4F4D\u7F6E\u5206\u7247"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u6309\u5730\u533A\nusers_beijing\nusers_shanghai\nusers_guangzhou\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"5. \u65F6\u95F4\u5206\u7247"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u6309\u6708\u4EFD\norders_202401\norders_202402\norders_202403\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u5E93\u5206\u8868\u4E2D\u95F4\u4EF6"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. ShardingSphere\uFF08\u63A8\u8350\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:"# \u914D\u7F6E\u793A\u4F8B\nshardingSphere:\n  dataSources:\n    ds0: # \u6570\u636E\u6E900\n    ds1: # \u6570\u636E\u6E901\n  shardingRule:\n    tables:\n      users:\n        actualDataNodes: ds${0..1}.users_${0..3}\n        databaseStrategy:\n          inline:\n            shardingColumn: user_id\n            algorithmExpression: ds${user_id % 2}\n        tableStrategy:\n          inline:\n            shardingColumn: user_id\n            algorithmExpression: users_${user_id % 4}\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. MyCAT"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-xml",children:'<table name="users" dataNode="dn1,dn2,dn3,dn4" rule="mod-long">\n    <childTable name="orders" joinKey="user_id" parentKey="id"/>\n</table>\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u5E93\u5206\u8868\u5E26\u6765\u7684\u95EE\u9898"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u8DE8\u5E93JOIN"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:"// \u89E3\u51B3\u65B9\u6848\uFF1A\n// 1. \u5E94\u7528\u5C42JOIN\nList<User> users = userDao.getUsers(ids);\nList<Order> orders = orderDao.getOrders(ids);\n// \u5728\u5E94\u7528\u5C42\u5173\u8054\n\n// 2. \u6570\u636E\u5197\u4F59\n// \u5728\u8BA2\u5355\u8868\u4E2D\u5197\u4F59\u7528\u6237\u4FE1\u606F\n\n// 3. \u5168\u5C40\u8868\n// \u5B57\u5178\u8868\u5728\u6BCF\u4E2A\u5E93\u90FD\u6709\u4E00\u4EFD\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u5206\u5E03\u5F0F\u4E8B\u52A1"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:"// \u89E3\u51B3\u65B9\u6848\uFF1A\n// 1. \u907F\u514D\u8DE8\u5E93\u4E8B\u52A1\n// 2. \u4F7F\u7528\u6700\u7EC8\u4E00\u81F4\u6027\n// 3. \u4F7F\u7528\u5206\u5E03\u5F0F\u4E8B\u52A1\u6846\u67B6\uFF08Seata\uFF09\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u5168\u5C40\u552F\u4E00ID"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:"// \u89E3\u51B3\u65B9\u6848\uFF1A\n// 1. \u96EA\u82B1\u7B97\u6CD5\uFF08Snowflake\uFF09\nlong id = snowflake.nextId();\n\n// 2. \u6570\u636E\u5E93\u53F7\u6BB5\u6A21\u5F0F\n// 3. Redis\u81EA\u589E\n// 4. UUID\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. \u5206\u9875\u67E5\u8BE2"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u95EE\u9898\uFF1A\u8DE8\u5206\u7247\u5206\u9875\nSELECT * FROM users ORDER BY create_time LIMIT 0, 20;\n\n-- \u89E3\u51B3\u65B9\u6848\uFF1A\n-- 1. \u6BCF\u4E2A\u5206\u7247\u67E5\u8BE2\uFF0C\u5E94\u7528\u5C42\u5408\u5E76\u6392\u5E8F\n-- 2. \u4F7F\u7528ES\u7B49\u641C\u7D22\u5F15\u64CE\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6700\u4F73\u5B9E\u8DF5"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"\u4F18\u5148\u8003\u8651\u4F18\u5316\uFF0C\u518D\u8003\u8651\u5206\u5E93\u5206\u8868"}),"\n",(0,r.jsx)(s.li,{children:"\u9009\u62E9\u5408\u9002\u7684\u5206\u7247\u952E\uFF08\u9AD8\u9891\u67E5\u8BE2\u5B57\u6BB5\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"\u907F\u514D\u8DE8\u5E93JOIN\u548C\u4E8B\u52A1"}),"\n",(0,r.jsx)(s.li,{children:"\u63D0\u524D\u89C4\u5212\u6269\u5BB9\u65B9\u6848"}),"\n",(0,r.jsx)(s.li,{children:"\u505A\u597D\u6570\u636E\u8FC1\u79FB\u5DE5\u5177"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"27-\u4EC0\u4E48\u662Fsql\u6CE8\u5165\u5982\u4F55\u9632\u6B62",children:"27. \u4EC0\u4E48\u662FSQL\u6CE8\u5165\uFF1F\u5982\u4F55\u9632\u6B62\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"SQL\u6CE8\u5165"}),"\u662F\u6700\u5E38\u89C1\u7684Web\u5B89\u5168\u6F0F\u6D1E\uFF0C\u653B\u51FB\u8005\u901A\u8FC7\u5728\u8F93\u5165\u4E2D\u63D2\u5165\u6076\u610FSQL\u4EE3\u7801\u6765\u653B\u51FB\u6570\u636E\u5E93\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"SQL\u6CE8\u5165\u793A\u4F8B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u573A\u666F1\uFF1A\u767B\u5F55\u7ED5\u8FC7"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:"// \u5371\u9669\u4EE3\u7801\nString sql = \"SELECT * FROM users WHERE username = '\" + username \n           + \"' AND password = '\" + password + \"'\";\n\n// \u653B\u51FB\u8F93\u5165\nusername: admin' OR '1'='1\npassword: anything\n\n// \u5B9E\u9645\u6267\u884C\u7684SQL\nSELECT * FROM users WHERE username = 'admin' OR '1'='1' AND password = 'anything'\n// \u6C38\u8FDC\u8FD4\u56DEtrue\uFF0C\u7ED5\u8FC7\u767B\u5F55\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u573A\u666F2\uFF1A\u6570\u636E\u6CC4\u9732"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:'// \u5371\u9669\u4EE3\u7801\nString sql = "SELECT * FROM products WHERE id = " + productId;\n\n// \u653B\u51FB\u8F93\u5165\nproductId: 1 UNION SELECT username, password FROM users\n\n// \u5B9E\u9645\u6267\u884C\u7684SQL\nSELECT * FROM products WHERE id = 1 UNION SELECT username, password FROM users\n// \u6CC4\u9732\u7528\u6237\u6570\u636E\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u573A\u666F3\uFF1A\u6570\u636E\u7834\u574F"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:"// \u5371\u9669\u4EE3\u7801\nString sql = \"UPDATE users SET email = '\" + email + \"' WHERE id = \" + userId;\n\n// \u653B\u51FB\u8F93\u5165\nemail: test@test.com'; DROP TABLE users; --\n\n// \u5B9E\u9645\u6267\u884C\u7684SQL\nUPDATE users SET email = 'test@test.com'; DROP TABLE users; --' WHERE id = 1\n// \u5220\u9664\u6574\u4E2A\u8868\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9632\u6B62SQL\u6CE8\u5165\u7684\u65B9\u6CD5"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u4F7F\u7528\u9884\u7F16\u8BD1\u8BED\u53E5\uFF08PreparedStatement\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:'// \u5B89\u5168\u4EE3\u7801\nString sql = "SELECT * FROM users WHERE username = ? AND password = ?";\nPreparedStatement pstmt = conn.prepareStatement(sql);\npstmt.setString(1, username);\npstmt.setString(2, password);\nResultSet rs = pstmt.executeQuery();\n\n// \u539F\u7406\uFF1A\u53C2\u6570\u4F1A\u88AB\u6B63\u786E\u8F6C\u4E49\uFF0C\u4E0D\u4F1A\u88AB\u5F53\u4F5CSQL\u4EE3\u7801\u6267\u884C\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u4F7F\u7528ORM\u6846\u67B6"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:'// MyBatis\uFF08\u5B89\u5168\uFF09\n@Select("SELECT * FROM users WHERE username = #{username}")\nUser findByUsername(String username);\n\n// \u6CE8\u610F\uFF1A\u4F7F\u7528#{}\u800C\u4E0D\u662F${}\n// #{} \u4F1A\u9884\u7F16\u8BD1\n// ${} \u4F1A\u76F4\u63A5\u62FC\u63A5\uFF08\u5371\u9669\uFF09\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u8F93\u5165\u9A8C\u8BC1\u548C\u8FC7\u6EE4"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:'// \u767D\u540D\u5355\u9A8C\u8BC1\npublic boolean isValidUsername(String username) {\n    return username.matches("^[a-zA-Z0-9_]{3,20}$");\n}\n\n// \u8FC7\u6EE4\u7279\u6B8A\u5B57\u7B26\npublic String escapeSQL(String input) {\n    return input.replace("\'", "\'\'")\n                .replace("\\\\", "\\\\\\\\")\n                .replace(";", "");\n}\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. \u6700\u5C0F\u6743\u9650\u539F\u5219"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5E94\u7528\u7A0B\u5E8F\u4F7F\u7528\u7684\u6570\u636E\u5E93\u8D26\u53F7\u53EA\u6388\u4E88\u5FC5\u8981\u6743\u9650\nGRANT SELECT, INSERT, UPDATE ON mydb.* TO 'app_user'@'localhost';\n-- \u4E0D\u8981\u6388\u4E88DROP\u3001CREATE\u7B49\u5371\u9669\u6743\u9650\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"5. \u9519\u8BEF\u4FE1\u606F\u5904\u7406"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:'// \u4E0D\u597D\uFF1A\u66B4\u9732\u6570\u636E\u5E93\u4FE1\u606F\ncatch (SQLException e) {\n    return "Error: " + e.getMessage();\n}\n\n// \u597D\uFF1A\u8FD4\u56DE\u901A\u7528\u9519\u8BEF\u4FE1\u606F\ncatch (SQLException e) {\n    logger.error("Database error", e);\n    return "\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5";\n}\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"6. \u4F7F\u7528\u5B58\u50A8\u8FC7\u7A0B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFA\u5B58\u50A8\u8FC7\u7A0B\nDELIMITER $$\nCREATE PROCEDURE getUserByUsername(IN p_username VARCHAR(50))\nBEGIN\n    SELECT * FROM users WHERE username = p_username;\nEND$$\nDELIMITER ;\n\n-- \u8C03\u7528\u5B58\u50A8\u8FC7\u7A0B\nCALL getUserByUsername('admin');\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"7. Web\u5E94\u7528\u9632\u706B\u5899\uFF08WAF\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528ModSecurity\u7B49WAF"}),"\n",(0,r.jsx)(s.li,{children:"\u68C0\u6D4B\u548C\u963B\u6B62SQL\u6CE8\u5165\u653B\u51FB"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u68C0\u6D4BSQL\u6CE8\u5165"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'# \u4F7F\u7528sqlmap\u5DE5\u5177\nsqlmap -u "http://example.com/product?id=1" --dbs\n\n# \u624B\u52A8\u6D4B\u8BD5\n# 1. \u5355\u5F15\u53F7\u6D4B\u8BD5\nid=1\'\n\n# 2. \u903B\u8F91\u6D4B\u8BD5\nid=1 OR 1=1\n\n# 3. \u65F6\u95F4\u5EF6\u8FDF\u6D4B\u8BD5\nid=1 AND SLEEP(5)\n'})}),"\n",(0,r.jsx)(s.h3,{id:"28-mysql\u7684\u5B58\u50A8\u8FC7\u7A0B\u548C\u51FD\u6570\u6709\u4EC0\u4E48\u533A\u522B",children:"28. MySQL\u7684\u5B58\u50A8\u8FC7\u7A0B\u548C\u51FD\u6570\u6709\u4EC0\u4E48\u533A\u522B\uFF1F"}),"\n",(0,r.jsx)(s.p,{children:"**\u5B58\u50A8\u8FC7\u7A0B\uFF08Procedure\uFF09\u548C\u51FD\u6570\uFF08Function\uFF09**\u90FD\u662F\u9884\u7F16\u8BD1\u7684SQL\u4EE3\u7801\u5757\uFF0C\u4F46\u6709\u91CD\u8981\u533A\u522B\u3002"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E3B\u8981\u533A\u522B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u7279\u6027"}),(0,r.jsx)(s.th,{children:"\u5B58\u50A8\u8FC7\u7A0B"}),(0,r.jsx)(s.th,{children:"\u51FD\u6570"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u8FD4\u56DE\u503C"}),(0,r.jsx)(s.td,{children:"\u53EF\u4EE5\u6709\u591A\u4E2A\uFF08OUT\u53C2\u6570\uFF09"}),(0,r.jsx)(s.td,{children:"\u53EA\u80FD\u8FD4\u56DE\u4E00\u4E2A\u503C"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u8C03\u7528\u65B9\u5F0F"}),(0,r.jsx)(s.td,{children:"CALL procedure_name()"}),(0,r.jsx)(s.td,{children:"SELECT function_name()"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u4E8B\u52A1"}),(0,r.jsx)(s.td,{children:"\u53EF\u4EE5\u5305\u542B\u4E8B\u52A1"}),(0,r.jsx)(s.td,{children:"\u4E0D\u80FD\u5305\u542B\u4E8B\u52A1"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"DML\u64CD\u4F5C"}),(0,r.jsx)(s.td,{children:"\u53EF\u4EE5\u6267\u884C"}),(0,r.jsx)(s.td,{children:"\u53D7\u9650\u5236"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u4F7F\u7528\u573A\u666F"}),(0,r.jsx)(s.td,{children:"\u590D\u6742\u4E1A\u52A1\u903B\u8F91"}),(0,r.jsx)(s.td,{children:"\u8BA1\u7B97\u548C\u8F6C\u6362"})]})]})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B58\u50A8\u8FC7\u7A0B\u793A\u4F8B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFA\u5B58\u50A8\u8FC7\u7A0B\nDELIMITER $$\nCREATE PROCEDURE transfer_money(\n    IN from_account INT,\n    IN to_account INT,\n    IN amount DECIMAL(10,2),\n    OUT result VARCHAR(50)\n)\nBEGIN\n    DECLARE from_balance DECIMAL(10,2);\n    \n    -- \u5F00\u542F\u4E8B\u52A1\n    START TRANSACTION;\n    \n    -- \u68C0\u67E5\u4F59\u989D\n    SELECT balance INTO from_balance \n    FROM accounts WHERE id = from_account FOR UPDATE;\n    \n    IF from_balance < amount THEN\n        SET result = '\u4F59\u989D\u4E0D\u8DB3';\n        ROLLBACK;\n    ELSE\n        -- \u6263\u6B3E\n        UPDATE accounts SET balance = balance - amount \n        WHERE id = from_account;\n        \n        -- \u5165\u8D26\n        UPDATE accounts SET balance = balance + amount \n        WHERE id = to_account;\n        \n        SET result = '\u8F6C\u8D26\u6210\u529F';\n        COMMIT;\n    END IF;\nEND$$\nDELIMITER ;\n\n-- \u8C03\u7528\u5B58\u50A8\u8FC7\u7A0B\nCALL transfer_money(1, 2, 100.00, @result);\nSELECT @result;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u51FD\u6570\u793A\u4F8B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFA\u51FD\u6570\nDELIMITER $$\nCREATE FUNCTION calculate_age(birth_date DATE)\nRETURNS INT\nDETERMINISTIC\nBEGIN\n    DECLARE age INT;\n    SET age = YEAR(CURDATE()) - YEAR(birth_date);\n    \n    IF DATE_FORMAT(CURDATE(), '%m%d') < DATE_FORMAT(birth_date, '%m%d') THEN\n        SET age = age - 1;\n    END IF;\n    \n    RETURN age;\nEND$$\nDELIMITER ;\n\n-- \u4F7F\u7528\u51FD\u6570\nSELECT name, calculate_age(birth_date) AS age FROM users;\n\n-- \u5728WHERE\u5B50\u53E5\u4E2D\u4F7F\u7528\nSELECT * FROM users WHERE calculate_age(birth_date) > 18;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B58\u50A8\u8FC7\u7A0B\u7684\u4F18\u70B9"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- 1. \u53EF\u4EE5\u8FD4\u56DE\u591A\u4E2A\u503C\nCREATE PROCEDURE get_user_stats(\n    IN user_id INT,\n    OUT order_count INT,\n    OUT total_amount DECIMAL(10,2)\n)\nBEGIN\n    SELECT COUNT(*), SUM(amount) \n    INTO order_count, total_amount\n    FROM orders WHERE user_id = user_id;\nEND;\n\n-- 2. \u53EF\u4EE5\u6267\u884C\u590D\u6742\u903B\u8F91\nCREATE PROCEDURE process_orders()\nBEGIN\n    DECLARE done INT DEFAULT 0;\n    DECLARE order_id INT;\n    DECLARE cur CURSOR FOR SELECT id FROM orders WHERE status = 'pending';\n    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;\n    \n    OPEN cur;\n    \n    read_loop: LOOP\n        FETCH cur INTO order_id;\n        IF done THEN\n            LEAVE read_loop;\n        END IF;\n        \n        -- \u5904\u7406\u8BA2\u5355\n        UPDATE orders SET status = 'processing' WHERE id = order_id;\n    END LOOP;\n    \n    CLOSE cur;\nEND;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u51FD\u6570\u7684\u9650\u5236"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u51FD\u6570\u4E0D\u80FD\u6267\u884C\u4EE5\u4E0B\u64CD\u4F5C\uFF1A\n-- 1. \u4E0D\u80FD\u4FEE\u6539\u8868\u6570\u636E\uFF08\u5728\u67D0\u4E9B\u914D\u7F6E\u4E0B\uFF09\n-- 2. \u4E0D\u80FD\u4F7F\u7528\u4E8B\u52A1\n-- 3. \u4E0D\u80FD\u8C03\u7528\u5B58\u50A8\u8FC7\u7A0B\n-- 4. \u4E0D\u80FD\u4F7F\u7528\u52A8\u6001SQL\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F55\u65F6\u4F7F\u7528"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F7F\u7528\u5B58\u50A8\u8FC7\u7A0B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u590D\u6742\u7684\u4E1A\u52A1\u903B\u8F91"}),"\n",(0,r.jsx)(s.li,{children:"\u9700\u8981\u4E8B\u52A1\u5904\u7406"}),"\n",(0,r.jsx)(s.li,{children:"\u9700\u8981\u591A\u4E2A\u8FD4\u56DE\u503C"}),"\n",(0,r.jsx)(s.li,{children:"\u6279\u91CF\u6570\u636E\u5904\u7406"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F7F\u7528\u51FD\u6570"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u7B80\u5355\u7684\u8BA1\u7B97"}),"\n",(0,r.jsx)(s.li,{children:"\u6570\u636E\u8F6C\u6362"}),"\n",(0,r.jsx)(s.li,{children:"\u9700\u8981\u5728SELECT\u4E2D\u4F7F\u7528"}),"\n",(0,r.jsx)(s.li,{children:"\u8FD4\u56DE\u5355\u4E2A\u503C"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"29-\u4EC0\u4E48\u662F\u89E6\u53D1\u5668",children:"29. \u4EC0\u4E48\u662F\u89E6\u53D1\u5668\uFF1F"}),"\n",(0,r.jsx)(s.p,{children:"**\u89E6\u53D1\u5668\uFF08Trigger\uFF09**\u662F\u5728\u7279\u5B9A\u6570\u636E\u5E93\u4E8B\u4EF6\u53D1\u751F\u65F6\u81EA\u52A8\u6267\u884C\u7684\u5B58\u50A8\u8FC7\u7A0B\u3002"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u89E6\u53D1\u5668\u7C7B\u578B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6309\u65F6\u673A\u5206\u7C7B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"BEFORE\uFF1A\u5728\u4E8B\u4EF6\u53D1\u751F\u524D\u89E6\u53D1"}),"\n",(0,r.jsx)(s.li,{children:"AFTER\uFF1A\u5728\u4E8B\u4EF6\u53D1\u751F\u540E\u89E6\u53D1"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6309\u4E8B\u4EF6\u5206\u7C7B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"INSERT\uFF1A\u63D2\u5165\u6570\u636E\u65F6"}),"\n",(0,r.jsx)(s.li,{children:"UPDATE\uFF1A\u66F4\u65B0\u6570\u636E\u65F6"}),"\n",(0,r.jsx)(s.li,{children:"DELETE\uFF1A\u5220\u9664\u6570\u636E\u65F6"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u521B\u5EFA\u89E6\u53D1\u5668"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. BEFORE INSERT\u89E6\u53D1\u5668"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u81EA\u52A8\u8BBE\u7F6E\u521B\u5EFA\u65F6\u95F4\nDELIMITER $$\nCREATE TRIGGER before_user_insert\nBEFORE INSERT ON users\nFOR EACH ROW\nBEGIN\n    SET NEW.create_time = NOW();\n    SET NEW.update_time = NOW();\nEND$$\nDELIMITER ;\n\n-- \u6D4B\u8BD5\nINSERT INTO users (name, email) VALUES ('Alice', 'alice@test.com');\n-- create_time\u548Cupdate_time\u4F1A\u81EA\u52A8\u8BBE\u7F6E\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. AFTER INSERT\u89E6\u53D1\u5668"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u63D2\u5165\u8BA2\u5355\u540E\u66F4\u65B0\u7EDF\u8BA1\nDELIMITER $$\nCREATE TRIGGER after_order_insert\nAFTER INSERT ON orders\nFOR EACH ROW\nBEGIN\n    UPDATE user_stats \n    SET order_count = order_count + 1,\n        total_amount = total_amount + NEW.amount\n    WHERE user_id = NEW.user_id;\nEND$$\nDELIMITER ;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. BEFORE UPDATE\u89E6\u53D1\u5668"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u66F4\u65B0\u65F6\u81EA\u52A8\u8BB0\u5F55\u4FEE\u6539\u65F6\u95F4\nDELIMITER $$\nCREATE TRIGGER before_user_update\nBEFORE UPDATE ON users\nFOR EACH ROW\nBEGIN\n    SET NEW.update_time = NOW();\n    \n    -- \u9632\u6B62\u67D0\u4E9B\u5B57\u6BB5\u88AB\u4FEE\u6539\n    IF OLD.id != NEW.id THEN\n        SIGNAL SQLSTATE '45000'\n        SET MESSAGE_TEXT = '\u4E0D\u80FD\u4FEE\u6539ID';\n    END IF;\nEND$$\nDELIMITER ;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. AFTER DELETE\u89E6\u53D1\u5668"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5220\u9664\u7528\u6237\u65F6\u8BB0\u5F55\u65E5\u5FD7\nDELIMITER $$\nCREATE TRIGGER after_user_delete\nAFTER DELETE ON users\nFOR EACH ROW\nBEGIN\n    INSERT INTO user_delete_log (user_id, username, delete_time)\n    VALUES (OLD.id, OLD.name, NOW());\nEND$$\nDELIMITER ;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B9E\u9645\u5E94\u7528\u573A\u666F"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u5BA1\u8BA1\u65E5\u5FD7"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"CREATE TRIGGER audit_user_changes\nAFTER UPDATE ON users\nFOR EACH ROW\nBEGIN\n    INSERT INTO audit_log (\n        table_name, \n        record_id, \n        old_value, \n        new_value, \n        change_time\n    ) VALUES (\n        'users',\n        NEW.id,\n        CONCAT('name:', OLD.name, ',email:', OLD.email),\n        CONCAT('name:', NEW.name, ',email:', NEW.email),\n        NOW()\n    );\nEND;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u6570\u636E\u9A8C\u8BC1"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"CREATE TRIGGER validate_order\nBEFORE INSERT ON orders\nFOR EACH ROW\nBEGIN\n    IF NEW.amount <= 0 THEN\n        SIGNAL SQLSTATE '45000'\n        SET MESSAGE_TEXT = '\u8BA2\u5355\u91D1\u989D\u5FC5\u987B\u5927\u4E8E0';\n    END IF;\n    \n    IF NEW.quantity <= 0 THEN\n        SIGNAL SQLSTATE '45000'\n        SET MESSAGE_TEXT = '\u8BA2\u5355\u6570\u91CF\u5FC5\u987B\u5927\u4E8E0';\n    END IF;\nEND;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u6570\u636E\u540C\u6B65"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"CREATE TRIGGER sync_to_cache\nAFTER UPDATE ON products\nFOR EACH ROW\nBEGIN\n    -- \u6807\u8BB0\u7F13\u5B58\u9700\u8981\u66F4\u65B0\n    INSERT INTO cache_invalidation (table_name, record_id)\n    VALUES ('products', NEW.id);\nEND;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u67E5\u770B\u548C\u7BA1\u7406\u89E6\u53D1\u5668"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770B\u6240\u6709\u89E6\u53D1\u5668\nSHOW TRIGGERS;\n\n-- \u67E5\u770B\u7279\u5B9A\u8868\u7684\u89E6\u53D1\u5668\nSHOW TRIGGERS WHERE `Table` = 'users';\n\n-- \u67E5\u770B\u89E6\u53D1\u5668\u5B9A\u4E49\nSHOW CREATE TRIGGER trigger_name;\n\n-- \u5220\u9664\u89E6\u53D1\u5668\nDROP TRIGGER IF EXISTS trigger_name;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u89E6\u53D1\u5668\u7684\u6CE8\u610F\u4E8B\u9879"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F18\u70B9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u81EA\u52A8\u6267\u884C\uFF0C\u65E0\u9700\u5E94\u7528\u5C42\u5E72\u9884"}),"\n",(0,r.jsx)(s.li,{children:"\u4FDD\u8BC1\u6570\u636E\u5B8C\u6574\u6027"}),"\n",(0,r.jsx)(s.li,{children:"\u96C6\u4E2D\u7BA1\u7406\u4E1A\u52A1\u89C4\u5219"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7F3A\u70B9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9690\u85CF\u7684\u4E1A\u52A1\u903B\u8F91\uFF0C\u96BE\u4EE5\u8C03\u8BD5"}),"\n",(0,r.jsx)(s.li,{children:"\u53EF\u80FD\u5F71\u54CD\u6027\u80FD"}),"\n",(0,r.jsx)(s.li,{children:"\u89E6\u53D1\u5668\u94FE\u53EF\u80FD\u5BFC\u81F4\u590D\u6742\u95EE\u9898"}),"\n",(0,r.jsx)(s.li,{children:"\u4E0D\u6613\u7EF4\u62A4"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6700\u4F73\u5B9E\u8DF5"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"\u907F\u514D\u590D\u6742\u903B\u8F91"}),"\n",(0,r.jsx)(s.li,{children:"\u4E0D\u8981\u5728\u89E6\u53D1\u5668\u4E2D\u8C03\u7528\u5B58\u50A8\u8FC7\u7A0B"}),"\n",(0,r.jsx)(s.li,{children:"\u907F\u514D\u89E6\u53D1\u5668\u94FE"}),"\n",(0,r.jsx)(s.li,{children:"\u505A\u597D\u6587\u6863\u8BB0\u5F55"}),"\n",(0,r.jsx)(s.li,{children:"\u8003\u8651\u4F7F\u7528\u5E94\u7528\u5C42\u903B\u8F91\u66FF\u4EE3"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"30-mysql\u7684\u89C6\u56FE\u662F\u4EC0\u4E48",children:"30. MySQL\u7684\u89C6\u56FE\u662F\u4EC0\u4E48\uFF1F"}),"\n",(0,r.jsx)(s.p,{children:"**\u89C6\u56FE\uFF08View\uFF09**\u662F\u57FA\u4E8ESQL\u67E5\u8BE2\u7ED3\u679C\u7684\u865A\u62DF\u8868\uFF0C\u4E0D\u5B58\u50A8\u5B9E\u9645\u6570\u636E\u3002"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u521B\u5EFA\u89C6\u56FE"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u7B80\u5355\u89C6\u56FE\nCREATE VIEW active_users AS\nSELECT id, name, email\nFROM users\nWHERE status = 'active';\n\n-- \u4F7F\u7528\u89C6\u56FE\nSELECT * FROM active_users;\n\n-- \u590D\u6742\u89C6\u56FE\uFF08\u591A\u8868JOIN\uFF09\nCREATE VIEW order_details AS\nSELECT \n    o.id AS order_id,\n    o.order_no,\n    u.name AS user_name,\n    p.name AS product_name,\n    o.quantity,\n    o.amount\nFROM orders o\nJOIN users u ON o.user_id = u.id\nJOIN products p ON o.product_id = p.id;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u89C6\u56FE\u7684\u4F18\u70B9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u7B80\u5316\u590D\u6742\u67E5\u8BE2"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4E0D\u7528\u6BCF\u6B21\u90FD\u5199\u590D\u6742\u7684JOIN\nSELECT * FROM order_details WHERE user_name = 'Alice';\n\n-- \u800C\u4E0D\u662F\nSELECT o.*, u.name, p.name\nFROM orders o\nJOIN users u ON o.user_id = u.id\nJOIN products p ON o.product_id = p.id\nWHERE u.name = 'Alice';\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u6570\u636E\u5B89\u5168\u6027"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u53EA\u66B4\u9732\u90E8\u5206\u5B57\u6BB5\nCREATE VIEW public_users AS\nSELECT id, name, email\nFROM users;\n-- \u9690\u85CF\u4E86password\u3001phone\u7B49\u654F\u611F\u5B57\u6BB5\n\n-- \u6388\u6743\u7ED9\u5E94\u7528\nGRANT SELECT ON public_users TO 'app_user'@'localhost';\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u903B\u8F91\u72EC\u7ACB\u6027"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u8868\u7ED3\u6784\u53D8\u5316\u65F6\uFF0C\u53EA\u9700\u4FEE\u6539\u89C6\u56FE\n-- \u5E94\u7528\u4EE3\u7801\u4E0D\u9700\u8981\u6539\u52A8\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u53EF\u66F4\u65B0\u89C6\u56FE"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u7B80\u5355\u89C6\u56FE\u53EF\u4EE5\u66F4\u65B0\nCREATE VIEW simple_view AS\nSELECT id, name, email FROM users;\n\n-- \u53EF\u4EE5\u6267\u884CINSERT\u3001UPDATE\u3001DELETE\nUPDATE simple_view SET name = 'Bob' WHERE id = 1;\n\n-- \u590D\u6742\u89C6\u56FE\uFF08\u5305\u542BJOIN\u3001\u805A\u5408\u7B49\uFF09\u901A\u5E38\u4E0D\u53EF\u66F4\u65B0\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"WITH CHECK OPTION"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u786E\u4FDD\u901A\u8FC7\u89C6\u56FE\u7684\u66F4\u65B0\u7B26\u5408\u89C6\u56FE\u6761\u4EF6\nCREATE VIEW active_users AS\nSELECT * FROM users WHERE status = 'active'\nWITH CHECK OPTION;\n\n-- \u8FD9\u4E2A\u66F4\u65B0\u4F1A\u5931\u8D25\uFF0C\u56E0\u4E3A\u8FDD\u53CD\u4E86\u89C6\u56FE\u6761\u4EF6\nUPDATE active_users SET status = 'inactive' WHERE id = 1;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u89C6\u56FE\u7BA1\u7406"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770B\u6240\u6709\u89C6\u56FE\nSHOW FULL TABLES WHERE TABLE_TYPE = 'VIEW';\n\n-- \u67E5\u770B\u89C6\u56FE\u5B9A\u4E49\nSHOW CREATE VIEW view_name;\n\n-- \u4FEE\u6539\u89C6\u56FE\nALTER VIEW active_users AS\nSELECT id, name, email, phone\nFROM users\nWHERE status = 'active';\n\n-- \u5220\u9664\u89C6\u56FE\nDROP VIEW IF EXISTS view_name;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7269\u5316\u89C6\u56FE"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.p,{children:"MySQL\u4E0D\u76F4\u63A5\u652F\u6301\u7269\u5316\u89C6\u56FE\uFF0C\u4F46\u53EF\u4EE5\u6A21\u62DF\uFF1A"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFA\u5B9E\u4F53\u8868\u5B58\u50A8\u89C6\u56FE\u6570\u636E\nCREATE TABLE mv_order_stats AS\nSELECT \n    user_id,\n    COUNT(*) AS order_count,\n    SUM(amount) AS total_amount\nFROM orders\nGROUP BY user_id;\n\n-- \u521B\u5EFA\u7D22\u5F15\nCREATE INDEX idx_user_id ON mv_order_stats(user_id);\n\n-- \u5B9A\u671F\u5237\u65B0\uFF08\u4F7F\u7528\u4E8B\u4EF6\u8C03\u5EA6\u5668\uFF09\nCREATE EVENT refresh_order_stats\nON SCHEDULE EVERY 1 HOUR\nDO\nBEGIN\n    TRUNCATE TABLE mv_order_stats;\n    INSERT INTO mv_order_stats\n    SELECT user_id, COUNT(*), SUM(amount)\n    FROM orders\n    GROUP BY user_id;\nEND;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u89C6\u56FE\u7684\u6027\u80FD\u8003\u8651"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u95EE\u9898"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u89C6\u56FE\u6BCF\u6B21\u67E5\u8BE2\u90FD\u4F1A\u6267\u884C\u5E95\u5C42SQL"}),"\n",(0,r.jsx)(s.li,{children:"\u590D\u6742\u89C6\u56FE\u53EF\u80FD\u6027\u80FD\u8F83\u5DEE"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F18\u5316"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- 1. \u4E3A\u89C6\u56FE\u6D89\u53CA\u7684\u8868\u521B\u5EFA\u7D22\u5F15\nCREATE INDEX idx_status ON users(status);\n\n-- 2. \u907F\u514D\u5D4C\u5957\u89C6\u56FE\n-- \u4E0D\u597D\nCREATE VIEW view1 AS SELECT * FROM table1;\nCREATE VIEW view2 AS SELECT * FROM view1;\n\n-- 3. \u4F7F\u7528\u7269\u5316\u89C6\u56FE\uFF08\u5B9E\u4F53\u8868\uFF09\u4EE3\u66FF\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6700\u4F73\u5B9E\u8DF5"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"\u7528\u4E8E\u7B80\u5316\u590D\u6742\u67E5\u8BE2"}),"\n",(0,r.jsx)(s.li,{children:"\u7528\u4E8E\u6570\u636E\u5B89\u5168\u63A7\u5236"}),"\n",(0,r.jsx)(s.li,{children:"\u907F\u514D\u8FC7\u5EA6\u4F7F\u7528"}),"\n",(0,r.jsx)(s.li,{children:"\u6CE8\u610F\u6027\u80FD\u5F71\u54CD"}),"\n",(0,r.jsx)(s.li,{children:"\u505A\u597D\u6587\u6863\u8BB0\u5F55"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"31-\u5982\u4F55\u8FDB\u884Cmysql\u6027\u80FD\u76D1\u63A7",children:"31. \u5982\u4F55\u8FDB\u884CMySQL\u6027\u80FD\u76D1\u63A7\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL\u6027\u80FD\u76D1\u63A7"}),"\u5E2E\u52A9\u53CA\u65F6\u53D1\u73B0\u548C\u89E3\u51B3\u6027\u80FD\u95EE\u9898\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u76D1\u63A7\u5DE5\u5177\u548C\u65B9\u6CD5"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. SHOW STATUS"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770B\u670D\u52A1\u5668\u72B6\u6001\nSHOW GLOBAL STATUS;\n\n-- \u5173\u952E\u6307\u6807\nSHOW STATUS LIKE 'Threads_connected';  -- \u5F53\u524D\u8FDE\u63A5\u6570\nSHOW STATUS LIKE 'Threads_running';    -- \u6D3B\u8DC3\u8FDE\u63A5\u6570\nSHOW STATUS LIKE 'Queries';            -- \u67E5\u8BE2\u603B\u6570\nSHOW STATUS LIKE 'Slow_queries';       -- \u6162\u67E5\u8BE2\u6570\nSHOW STATUS LIKE 'Innodb_buffer_pool_read_requests';  -- Buffer Pool\u8BFB\u8BF7\u6C42\nSHOW STATUS LIKE 'Innodb_buffer_pool_reads';          -- \u78C1\u76D8\u8BFB\u53D6\u6B21\u6570\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. Performance Schema"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u542F\u7528Performance Schema\nUPDATE performance_schema.setup_instruments \nSET ENABLED = 'YES', TIMED = 'YES';\n\n-- \u67E5\u770B\u6700\u8017\u65F6\u7684SQL\nSELECT \n    DIGEST_TEXT,\n    COUNT_STAR,\n    AVG_TIMER_WAIT/1000000000 AS avg_ms\nFROM performance_schema.events_statements_summary_by_digest\nORDER BY AVG_TIMER_WAIT DESC\nLIMIT 10;\n\n-- \u67E5\u770B\u8868\u7684I/O\u7EDF\u8BA1\nSELECT * FROM performance_schema.table_io_waits_summary_by_table\nORDER BY sum_timer_wait DESC LIMIT 10;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u6162\u67E5\u8BE2\u65E5\u5FD7"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u542F\u7528\u6162\u67E5\u8BE2\u65E5\u5FD7\nSET GLOBAL slow_query_log = ON;\nSET GLOBAL long_query_time = 1;\n\n-- \u5206\u6790\u6162\u67E5\u8BE2\nmysqldumpslow -s t -t 10 /var/log/mysql/slow.log\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. SHOW PROCESSLIST"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770B\u5F53\u524D\u6267\u884C\u7684\u67E5\u8BE2\nSHOW FULL PROCESSLIST;\n\n-- \u6740\u6B7B\u957F\u65F6\u95F4\u8FD0\u884C\u7684\u67E5\u8BE2\nKILL QUERY 12345;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"5. \u76D1\u63A7\u5DE5\u5177"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Prometheus + Grafana"}),"\uFF1A\u5F00\u6E90\u76D1\u63A7\u65B9\u6848"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Percona Monitoring and Management (PMM)"}),"\uFF1A\u4E13\u4E1AMySQL\u76D1\u63A7"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"MySQL Enterprise Monitor"}),"\uFF1A\u5B98\u65B9\u5546\u4E1A\u76D1\u63A7"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Zabbix"}),"\uFF1A\u901A\u7528\u76D1\u63A7\u5E73\u53F0"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5173\u952E\u6027\u80FD\u6307\u6807\uFF08KPI\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"1. QPS\uFF08\u6BCF\u79D2\u67E5\u8BE2\u6570\uFF09\n2. TPS\uFF08\u6BCF\u79D2\u4E8B\u52A1\u6570\uFF09\n3. \u8FDE\u63A5\u6570\n4. \u6162\u67E5\u8BE2\u6570\u91CF\n5. Buffer Pool\u547D\u4E2D\u7387\n6. \u9501\u7B49\u5F85\u65F6\u95F4\n7. \u590D\u5236\u5EF6\u8FDF\n8. \u78C1\u76D8I/O\n"})}),"\n",(0,r.jsx)(s.h3,{id:"32-\u4EC0\u4E48\u662Fmysql\u7684\u8FDE\u63A5\u6C60",children:"32. \u4EC0\u4E48\u662FMySQL\u7684\u8FDE\u63A5\u6C60\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8FDE\u63A5\u6C60"}),"\u662F\u9884\u5148\u521B\u5EFA\u5E76\u7EF4\u62A4\u4E00\u5B9A\u6570\u91CF\u7684\u6570\u636E\u5E93\u8FDE\u63A5\uFF0C\u4F9B\u5E94\u7528\u7A0B\u5E8F\u91CD\u590D\u4F7F\u7528\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E3A\u4EC0\u4E48\u9700\u8981\u8FDE\u63A5\u6C60"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:"// \u4E0D\u4F7F\u7528\u8FDE\u63A5\u6C60\uFF08\u6027\u80FD\u5DEE\uFF09\nfor (int i = 0; i < 1000; i++) {\n    Connection conn = DriverManager.getConnection(url, user, password);\n    // \u6267\u884CSQL\n    conn.close();  // \u6BCF\u6B21\u90FD\u521B\u5EFA\u548C\u5173\u95ED\u8FDE\u63A5\uFF0C\u5F00\u9500\u5927\n}\n\n// \u4F7F\u7528\u8FDE\u63A5\u6C60\uFF08\u6027\u80FD\u597D\uFF09\nfor (int i = 0; i < 1000; i++) {\n    Connection conn = dataSource.getConnection();  // \u4ECE\u6C60\u4E2D\u83B7\u53D6\n    // \u6267\u884CSQL\n    conn.close();  // \u5F52\u8FD8\u5230\u6C60\u4E2D\uFF0C\u4E0D\u662F\u771F\u6B63\u5173\u95ED\n}\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5E38\u7528\u8FDE\u63A5\u6C60"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. HikariCP\uFF08\u63A8\u8350\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:'HikariConfig config = new HikariConfig();\nconfig.setJdbcUrl("jdbc:mysql://localhost:3306/mydb");\nconfig.setUsername("root");\nconfig.setPassword("password");\nconfig.setMaximumPoolSize(10);          // \u6700\u5927\u8FDE\u63A5\u6570\nconfig.setMinimumIdle(5);               // \u6700\u5C0F\u7A7A\u95F2\u8FDE\u63A5\u6570\nconfig.setConnectionTimeout(30000);     // \u8FDE\u63A5\u8D85\u65F6\nconfig.setIdleTimeout(600000);          // \u7A7A\u95F2\u8D85\u65F6\nconfig.setMaxLifetime(1800000);         // \u6700\u5927\u751F\u547D\u5468\u671F\n\nHikariDataSource dataSource = new HikariDataSource(config);\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. Druid"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:'DruidDataSource dataSource = new DruidDataSource();\ndataSource.setUrl("jdbc:mysql://localhost:3306/mydb");\ndataSource.setUsername("root");\ndataSource.setPassword("password");\ndataSource.setInitialSize(5);           // \u521D\u59CB\u8FDE\u63A5\u6570\ndataSource.setMaxActive(20);            // \u6700\u5927\u8FDE\u63A5\u6570\ndataSource.setMinIdle(5);               // \u6700\u5C0F\u7A7A\u95F2\u8FDE\u63A5\u6570\ndataSource.setMaxWait(60000);           // \u83B7\u53D6\u8FDE\u63A5\u6700\u5927\u7B49\u5F85\u65F6\u95F4\ndataSource.setValidationQuery("SELECT 1");  // \u9A8C\u8BC1\u67E5\u8BE2\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8FDE\u63A5\u6C60\u53C2\u6570\u914D\u7F6E"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-properties",children:"# \u6838\u5FC3\u53C2\u6570\nmaximumPoolSize=20        # \u6700\u5927\u8FDE\u63A5\u6570\uFF08CPU\u6838\u5FC3\u6570 * 2 + \u78C1\u76D8\u6570\uFF09\nminimumIdle=5             # \u6700\u5C0F\u7A7A\u95F2\u8FDE\u63A5\u6570\nconnectionTimeout=30000   # \u83B7\u53D6\u8FDE\u63A5\u8D85\u65F6\u65F6\u95F4\uFF08\u6BEB\u79D2\uFF09\nidleTimeout=600000        # \u7A7A\u95F2\u8FDE\u63A5\u8D85\u65F6\u65F6\u95F4\uFF0810\u5206\u949F\uFF09\nmaxLifetime=1800000       # \u8FDE\u63A5\u6700\u5927\u751F\u547D\u5468\u671F\uFF0830\u5206\u949F\uFF09\n\n# \u8FDE\u63A5\u6D4B\u8BD5\nconnectionTestQuery=SELECT 1\nvalidationTimeout=5000\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8FDE\u63A5\u6C60\u76D1\u63A7"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:'// HikariCP\u76D1\u63A7\nHikariPoolMXBean poolMXBean = dataSource.getHikariPoolMXBean();\nSystem.out.println("Active: " + poolMXBean.getActiveConnections());\nSystem.out.println("Idle: " + poolMXBean.getIdleConnections());\nSystem.out.println("Total: " + poolMXBean.getTotalConnections());\nSystem.out.println("Waiting: " + poolMXBean.getThreadsAwaitingConnection());\n'})}),"\n",(0,r.jsx)(s.h3,{id:"33-innodb\u548Cmyisam\u7684\u7D22\u5F15\u5B9E\u73B0\u6709\u4EC0\u4E48\u533A\u522B",children:"33. InnoDB\u548CMyISAM\u7684\u7D22\u5F15\u5B9E\u73B0\u6709\u4EC0\u4E48\u533A\u522B\uFF1F"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"\u6838\u5FC3\u533A\u522B\uFF1A\u805A\u7C07\u7D22\u5F15 vs \u975E\u805A\u7C07\u7D22\u5F15"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"InnoDB\uFF08\u805A\u7C07\u7D22\u5F15\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"\u4E3B\u952E\u7D22\u5F15\uFF08\u805A\u7C07\u7D22\u5F15\uFF09\uFF1A\n    \u7D22\u5F15\u548C\u6570\u636E\u5B58\u50A8\u5728\u4E00\u8D77\n    \u53F6\u5B50\u8282\u70B9\u5B58\u50A8\u5B8C\u6574\u7684\u884C\u6570\u636E\n    \n    [\u4E3B\u952E\u7D22\u5F15\u6811]\n         10\n       /    \\\n      5      15\n     / \\    /  \\\n   [\u5B8C\u6574\u884C\u6570\u636E]\n\n\u4E8C\u7EA7\u7D22\u5F15\uFF08\u975E\u805A\u7C07\u7D22\u5F15\uFF09\uFF1A\n    \u53F6\u5B50\u8282\u70B9\u5B58\u50A8\u4E3B\u952E\u503C\n    \u9700\u8981\u56DE\u8868\u67E5\u8BE2\n    \n    [name\u7D22\u5F15\u6811]\n       'Bob'\n      /     \\\n   'Alice'  'Carol'\n     |        |\n    [\u4E3B\u952E5]  [\u4E3B\u952E15]\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MyISAM\uFF08\u975E\u805A\u7C07\u7D22\u5F15\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"\u4E3B\u952E\u7D22\u5F15\uFF1A\n    \u7D22\u5F15\u548C\u6570\u636E\u5206\u5F00\u5B58\u50A8\n    \u53F6\u5B50\u8282\u70B9\u5B58\u50A8\u6570\u636E\u6587\u4EF6\u6307\u9488\n    \n    [\u4E3B\u952E\u7D22\u5F15\u6811]\n         10\n       /    \\\n      5      15\n     / \\    /  \\\n   [\u6307\u9488] [\u6307\u9488]\n     \u2193      \u2193\n   [\u6570\u636E\u6587\u4EF6]\n\n\u4E8C\u7EA7\u7D22\u5F15\uFF1A\n    \u4E0E\u4E3B\u952E\u7D22\u5F15\u7ED3\u6784\u76F8\u540C\n    \u90FD\u5B58\u50A8\u6570\u636E\u6587\u4EF6\u6307\u9488\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5BF9\u6BD4"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u7279\u6027"}),(0,r.jsx)(s.th,{children:"InnoDB"}),(0,r.jsx)(s.th,{children:"MyISAM"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u7D22\u5F15\u7C7B\u578B"}),(0,r.jsx)(s.td,{children:"\u805A\u7C07\u7D22\u5F15"}),(0,r.jsx)(s.td,{children:"\u975E\u805A\u7C07\u7D22\u5F15"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u4E3B\u952E\u67E5\u8BE2"}),(0,r.jsx)(s.td,{children:"\u4E00\u6B21\u67E5\u8BE2"}),(0,r.jsx)(s.td,{children:"\u4E24\u6B21\u67E5\u8BE2\uFF08\u7D22\u5F15+\u6570\u636E\uFF09"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u4E8C\u7EA7\u7D22\u5F15\u67E5\u8BE2"}),(0,r.jsx)(s.td,{children:"\u4E24\u6B21\u67E5\u8BE2\uFF08\u7D22\u5F15+\u56DE\u8868\uFF09"}),(0,r.jsx)(s.td,{children:"\u4E24\u6B21\u67E5\u8BE2\uFF08\u7D22\u5F15+\u6570\u636E\uFF09"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u6570\u636E\u5B58\u50A8"}),(0,r.jsx)(s.td,{children:"\u6309\u4E3B\u952E\u987A\u5E8F"}),(0,r.jsx)(s.td,{children:"\u6309\u63D2\u5165\u987A\u5E8F"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u8868\u6587\u4EF6"}),(0,r.jsx)(s.td,{children:".ibd\uFF08\u7D22\u5F15+\u6570\u636E\uFF09"}),(0,r.jsx)(s.td,{children:".MYI\uFF08\u7D22\u5F15\uFF09+ .MYD\uFF08\u6570\u636E\uFF09"})]})]})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6027\u80FD\u5F71\u54CD"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- InnoDB\u4E3B\u952E\u67E5\u8BE2\uFF08\u5FEB\uFF09\nSELECT * FROM users WHERE id = 100;  -- \u4E00\u6B21B+\u6811\u67E5\u627E\n\n-- InnoDB\u4E8C\u7EA7\u7D22\u5F15\u67E5\u8BE2\uFF08\u9700\u56DE\u8868\uFF09\nSELECT * FROM users WHERE name = 'Alice';  \n-- 1. name\u7D22\u5F15\u67E5\u627E -> \u5F97\u5230\u4E3B\u952E\n-- 2. \u4E3B\u952E\u7D22\u5F15\u67E5\u627E -> \u5F97\u5230\u5B8C\u6574\u6570\u636E\n\n-- MyISAM\u6240\u6709\u67E5\u8BE2\u90FD\u9700\u8981\u4E24\u6B21\nSELECT * FROM users WHERE id = 100;\n-- 1. \u7D22\u5F15\u67E5\u627E -> \u5F97\u5230\u6307\u9488\n-- 2. \u6839\u636E\u6307\u9488\u8BFB\u53D6\u6570\u636E\n"})}),"\n",(0,r.jsx)(s.h3,{id:"34-\u4EC0\u4E48\u662F\u81EA\u589E\u4E3B\u952E\u4E3A\u4EC0\u4E48\u63A8\u8350\u4F7F\u7528",children:"34. \u4EC0\u4E48\u662F\u81EA\u589E\u4E3B\u952E\uFF1F\u4E3A\u4EC0\u4E48\u63A8\u8350\u4F7F\u7528\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u81EA\u589E\u4E3B\u952E"}),"\u662F\u6570\u636E\u5E93\u81EA\u52A8\u751F\u6210\u7684\u9012\u589E\u6574\u6570\u4E3B\u952E\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B9A\u4E49\u81EA\u589E\u4E3B\u952E"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"CREATE TABLE users (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    name VARCHAR(50)\n);\n\n-- \u63D2\u5165\u6570\u636E\u65F6\u4E0D\u9700\u8981\u6307\u5B9Aid\nINSERT INTO users (name) VALUES ('Alice');\nINSERT INTO users (name) VALUES ('Bob');\n-- id\u81EA\u52A8\u4E3A1, 2, 3...\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E3A\u4EC0\u4E48\u63A8\u8350\u4F7F\u7528"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u987A\u5E8F\u63D2\u5165\uFF0C\u51CF\u5C11\u9875\u5206\u88C2"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"\u4F7F\u7528\u81EA\u589E\u4E3B\u952E\uFF1A\n[1][2][3][4][5] -> \u63D2\u51656 -> [1][2][3][4][5][6]\n\u987A\u5E8F\u63D2\u5165\uFF0C\u4E0D\u9700\u8981\u79FB\u52A8\u6570\u636E\n\n\u4F7F\u7528UUID\uFF1A\n[uuid1][uuid3][uuid5] -> \u63D2\u5165uuid2 -> [uuid1][uuid2][uuid3][uuid5]\n\u9700\u8981\u79FB\u52A8\u6570\u636E\uFF0C\u9875\u5206\u88C2\u9891\u7E41\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u7D22\u5F15\u6548\u7387\u9AD8"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u81EA\u589E\u4E3B\u952E\uFF1AB+\u6811\u7D27\u51D1\n-- \u8303\u56F4\u67E5\u8BE2\u6548\u7387\u9AD8\nSELECT * FROM users WHERE id BETWEEN 100 AND 200;\n\n-- UUID\uFF1AB+\u6811\u7A00\u758F\n-- \u8303\u56F4\u67E5\u8BE2\u6548\u7387\u4F4E\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u5360\u7528\u7A7A\u95F4\u5C0F"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- INT\uFF1A4\u5B57\u8282\nid INT AUTO_INCREMENT\n\n-- BIGINT\uFF1A8\u5B57\u8282\nid BIGINT AUTO_INCREMENT\n\n-- UUID\uFF1A36\u5B57\u8282\uFF08\u5B57\u7B26\u4E32\uFF09\u621616\u5B57\u8282\uFF08BINARY\uFF09\nid CHAR(36)\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. \u6027\u80FD\u5BF9\u6BD4"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"\u63D2\u5165\u6027\u80FD\uFF1A\n- \u81EA\u589E\u4E3B\u952E\uFF1A\u987A\u5E8F\u5199\u5165\uFF0C\u5FEB\n- UUID\uFF1A\u968F\u673A\u5199\u5165\uFF0C\u6162\n\n\u7D22\u5F15\u5927\u5C0F\uFF1A\n- \u81EA\u589E\u4E3B\u952E\uFF1A\u5C0F\n- UUID\uFF1A\u5927\uFF08\u7EA63-4\u500D\uFF09\n\n\u67E5\u8BE2\u6027\u80FD\uFF1A\n- \u81EA\u589E\u4E3B\u952E\uFF1A\u5FEB\n- UUID\uFF1A\u6162\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u81EA\u589E\u4E3B\u952E\u7684\u95EE\u9898"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u5206\u5E03\u5F0F\u73AF\u5883ID\u51B2\u7A81"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:"// \u89E3\u51B3\u65B9\u68481\uFF1A\u96EA\u82B1\u7B97\u6CD5\nlong id = snowflake.nextId();\n\n// \u89E3\u51B3\u65B9\u68482\uFF1A\u6570\u636E\u5E93\u53F7\u6BB5\n// \u6BCF\u4E2A\u670D\u52A1\u5668\u5206\u914D\u4E0D\u540C\u7684\u8D77\u59CB\u503C\u548C\u6B65\u957F\n// \u670D\u52A1\u56681\uFF1A1, 3, 5, 7...\n// \u670D\u52A1\u56682\uFF1A2, 4, 6, 8...\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u6570\u636E\u8FC1\u79FB"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u8BBE\u7F6E\u8D77\u59CB\u503C\nALTER TABLE users AUTO_INCREMENT = 10000;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u5B89\u5168\u95EE\u9898"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"\u66B4\u9732\u6570\u636E\u91CF\uFF1A\n/user/1\n/user/2\n/user/3\n\u53EF\u4EE5\u770B\u51FA\u67093\u4E2A\u7528\u6237\n\n\u89E3\u51B3\uFF1A\u4F7F\u7528\u4E1A\u52A1ID\uFF08\u8BA2\u5355\u53F7\uFF09\u800C\u4E0D\u662F\u81EA\u589EID\n"})}),"\n",(0,r.jsx)(s.h3,{id:"35-mysql\u7684count\u548Ccount1\u6709\u4EC0\u4E48\u533A\u522B",children:"35. MySQL\u7684COUNT(*)\u548CCOUNT(1)\u6709\u4EC0\u4E48\u533A\u522B\uFF1F"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"\u7ED3\u8BBA\uFF1A\u5728InnoDB\u4E2D\uFF0CCOUNT(*) \u548C COUNT(1) \u6027\u80FD\u57FA\u672C\u76F8\u540C\u3002"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"COUNT\u7684\u51E0\u79CD\u5F62\u5F0F"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- 1. COUNT(*)\uFF1A\u7EDF\u8BA1\u6240\u6709\u884C\nSELECT COUNT(*) FROM users;\n\n-- 2. COUNT(1)\uFF1A\u7EDF\u8BA1\u6240\u6709\u884C\nSELECT COUNT(1) FROM users;\n\n-- 3. COUNT(\u5217\u540D)\uFF1A\u7EDF\u8BA1\u975ENULL\u7684\u884C\nSELECT COUNT(name) FROM users;\n\n-- 4. COUNT(DISTINCT \u5217\u540D)\uFF1A\u7EDF\u8BA1\u4E0D\u91CD\u590D\u7684\u975ENULL\u884C\nSELECT COUNT(DISTINCT name) FROM users;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6027\u80FD\u5BF9\u6BD4"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"InnoDB"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- COUNT(*) \u548C COUNT(1) \u6027\u80FD\u76F8\u540C\n-- \u90FD\u4F1A\u9009\u62E9\u6700\u5C0F\u7684\u7D22\u5F15\u8FDB\u884C\u626B\u63CF\nEXPLAIN SELECT COUNT(*) FROM users;\nEXPLAIN SELECT COUNT(1) FROM users;\n-- \u6267\u884C\u8BA1\u5212\u76F8\u540C\n\n-- COUNT(\u5217\u540D) \u9700\u8981\u5224\u65ADNULL\nSELECT COUNT(name) FROM users;\n-- \u7A0D\u6162\uFF0C\u56E0\u4E3A\u9700\u8981\u68C0\u67E5\u6BCF\u884C\u7684name\u662F\u5426\u4E3ANULL\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MyISAM"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- MyISAM\u7EF4\u62A4\u4E86\u884C\u6570\uFF0CCOUNT(*)\u975E\u5E38\u5FEB\nSELECT COUNT(*) FROM users;  -- O(1)\n\n-- \u4F46\u6709WHERE\u6761\u4EF6\u65F6\uFF0C\u4ECD\u9700\u626B\u63CF\nSELECT COUNT(*) FROM users WHERE age > 18;  -- O(n)\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F18\u5316COUNT\u67E5\u8BE2"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u4F7F\u7528\u8986\u76D6\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFA\u7D22\u5F15\nCREATE INDEX idx_status ON users(status);\n\n-- \u4F7F\u7528\u8986\u76D6\u7D22\u5F15\nSELECT COUNT(*) FROM users WHERE status = 1;\n-- \u53EA\u626B\u63CF\u7D22\u5F15\uFF0C\u4E0D\u56DE\u8868\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u4F7F\u7528\u8FD1\u4F3C\u503C"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4F7F\u7528EXPLAIN\u4F30\u7B97\nEXPLAIN SELECT * FROM users;\n-- rows\u5217\u663E\u793A\u4F30\u7B97\u884C\u6570\n\n-- \u67E5\u8BE2\u7EDF\u8BA1\u4FE1\u606F\nSELECT TABLE_ROWS \nFROM information_schema.TABLES \nWHERE TABLE_NAME = 'users';\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u7EF4\u62A4\u8BA1\u6570\u8868"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFA\u8BA1\u6570\u8868\nCREATE TABLE user_count (\n    count INT\n);\n\n-- \u4F7F\u7528\u89E6\u53D1\u5668\u7EF4\u62A4\nCREATE TRIGGER after_user_insert\nAFTER INSERT ON users\nFOR EACH ROW\nUPDATE user_count SET count = count + 1;\n\n-- \u67E5\u8BE2\u65F6\u76F4\u63A5\u8BFB\u53D6\nSELECT count FROM user_count;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. \u4F7F\u7528Redis\u7F13\u5B58"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:'// \u63D2\u5165\u7528\u6237\u65F6\nuserDao.insert(user);\nredis.incr("user:count");\n\n// \u67E5\u8BE2\u603B\u6570\nlong count = redis.get("user:count");\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B9E\u9645\u5E94\u7528\u5EFA\u8BAE"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- 1. \u5C0F\u8868\uFF08<10\u4E07\uFF09\uFF1A\u76F4\u63A5COUNT\nSELECT COUNT(*) FROM small_table;\n\n-- 2. \u5927\u8868\u65E0WHERE\uFF1A\u4F7F\u7528\u7EDF\u8BA1\u8868\u6216\u7F13\u5B58\nSELECT count FROM count_cache;\n\n-- 3. \u5927\u8868\u6709WHERE\uFF1A\u4F18\u5316\u7D22\u5F15\nCREATE INDEX idx_condition ON big_table(condition_column);\nSELECT COUNT(*) FROM big_table WHERE condition_column = value;\n\n-- 4. \u5206\u9875\u573A\u666F\uFF1A\u4F7F\u7528\u6E38\u6807\u5206\u9875\u4EE3\u66FFCOUNT\n-- \u4E0D\u8981\uFF1ASELECT COUNT(*) + LIMIT offset\n-- \u4F7F\u7528\uFF1AWHERE id > last_id LIMIT 20\n"})}),"\n",(0,r.jsx)(s.h3,{id:"36-\u5982\u4F55\u5904\u7406mysql\u7684\u5927\u6570\u636E\u91CF\u5206\u9875",children:"36. \u5982\u4F55\u5904\u7406MySQL\u7684\u5927\u6570\u636E\u91CF\u5206\u9875\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F20\u7EDF\u5206\u9875\u95EE\u9898"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u6DF1\u5EA6\u5206\u9875\u6027\u80FD\u5DEE\nSELECT * FROM users ORDER BY id LIMIT 1000000, 20;\n-- \u9700\u8981\u626B\u63CF1000020\u884C\uFF0C\u4E22\u5F03\u524D1000000\u884C\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F18\u5316\u65B9\u6848"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u4F7F\u7528\u5B50\u67E5\u8BE2\u4F18\u5316"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5148\u67E5ID\uFF0C\u518D\u5173\u8054\nSELECT * FROM users \nWHERE id >= (SELECT id FROM users ORDER BY id LIMIT 1000000, 1)\nLIMIT 20;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u4F7F\u7528\u6E38\u6807\u5206\u9875\uFF08\u63A8\u8350\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u8BB0\u5F55\u4E0A\u6B21\u6700\u540E\u4E00\u6761\u7684ID\nSELECT * FROM users WHERE id > 1000000 ORDER BY id LIMIT 20;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u5EF6\u8FDF\u5173\u8054"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"SELECT * FROM users u\nINNER JOIN (\n    SELECT id FROM users ORDER BY id LIMIT 1000000, 20\n) AS t ON u.id = t.id;\n"})}),"\n",(0,r.jsx)(s.h3,{id:"37-\u4EC0\u4E48\u662Fmysql\u7684\u534A\u540C\u6B65\u590D\u5236",children:"37. \u4EC0\u4E48\u662FMySQL\u7684\u534A\u540C\u6B65\u590D\u5236\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u534A\u540C\u6B65\u590D\u5236"}),"\u662F\u4ECB\u4E8E\u5F02\u6B65\u590D\u5236\u548C\u5168\u540C\u6B65\u590D\u5236\u4E4B\u95F4\u7684\u65B9\u6848\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5DE5\u4F5C\u539F\u7406"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"1. \u4E3B\u5E93\u6267\u884C\u4E8B\u52A1\n2. \u5199\u5165binlog\n3. \u7B49\u5F85\u81F3\u5C11\u4E00\u4E2A\u4ECE\u5E93\u786E\u8BA4\u63A5\u6536binlog\n4. \u8FD4\u56DE\u5BA2\u6237\u7AEF\u6210\u529F\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u914D\u7F6E"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4E3B\u5E93\u5B89\u88C5\u63D2\u4EF6\nINSTALL PLUGIN rpl_semi_sync_master SONAME 'semisync_master.so';\n\n-- \u4ECE\u5E93\u5B89\u88C5\u63D2\u4EF6\nINSTALL PLUGIN rpl_semi_sync_slave SONAME 'semisync_slave.so';\n\n-- \u542F\u7528\u534A\u540C\u6B65\nSET GLOBAL rpl_semi_sync_master_enabled = 1;\nSET GLOBAL rpl_semi_sync_slave_enabled = 1;\n"})}),"\n",(0,r.jsx)(s.h3,{id:"38-\u5982\u4F55\u4F18\u5316insert\u8BED\u53E5",children:"38. \u5982\u4F55\u4F18\u5316INSERT\u8BED\u53E5\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F18\u5316\u65B9\u6CD5"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u6279\u91CF\u63D2\u5165"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4E0D\u597D\nINSERT INTO users VALUES (1, 'A');\nINSERT INTO users VALUES (2, 'B');\n\n-- \u597D\nINSERT INTO users VALUES (1, 'A'), (2, 'B'), (3, 'C');\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u4F7F\u7528LOAD DATA"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"LOAD DATA INFILE 'data.csv'\nINTO TABLE users\nFIELDS TERMINATED BY ','\nLINES TERMINATED BY '\\n';\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u7981\u7528\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"ALTER TABLE users DISABLE KEYS;\n-- \u6279\u91CF\u63D2\u5165\nALTER TABLE users ENABLE KEYS;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. \u8C03\u6574\u53C2\u6570"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"SET autocommit = 0;\n-- \u6279\u91CF\u63D2\u5165\nCOMMIT;\n"})}),"\n",(0,r.jsx)(s.h3,{id:"39-mysql\u7684group-by\u548Chaving\u6709\u4EC0\u4E48\u533A\u522B",children:"39. MySQL\u7684GROUP BY\u548CHAVING\u6709\u4EC0\u4E48\u533A\u522B\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u533A\u522B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u7279\u6027"}),(0,r.jsx)(s.th,{children:"WHERE"}),(0,r.jsx)(s.th,{children:"HAVING"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u4F5C\u7528\u65F6\u673A"}),(0,r.jsx)(s.td,{children:"\u5206\u7EC4\u524D"}),(0,r.jsx)(s.td,{children:"\u5206\u7EC4\u540E"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u4F5C\u7528\u5BF9\u8C61"}),(0,r.jsx)(s.td,{children:"\u884C"}),(0,r.jsx)(s.td,{children:"\u7EC4"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u53EF\u7528\u51FD\u6570"}),(0,r.jsx)(s.td,{children:"\u4E0D\u80FD\u7528\u805A\u5408\u51FD\u6570"}),(0,r.jsx)(s.td,{children:"\u53EF\u4EE5\u7528\u805A\u5408\u51FD\u6570"})]})]})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u793A\u4F8B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"SELECT \n    department,\n    COUNT(*) as emp_count,\n    AVG(salary) as avg_salary\nFROM employees\nWHERE salary > 5000          -- \u8FC7\u6EE4\u884C\nGROUP BY department\nHAVING COUNT(*) > 10;        -- \u8FC7\u6EE4\u7EC4\n"})}),"\n",(0,r.jsx)(s.h3,{id:"40-\u4EC0\u4E48\u662F\u5916\u952E\u7EA6\u675F",children:"40. \u4EC0\u4E48\u662F\u5916\u952E\u7EA6\u675F\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5916\u952E\u7EA6\u675F"}),"\u4FDD\u8BC1\u5F15\u7528\u5B8C\u6574\u6027\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u521B\u5EFA\u5916\u952E"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"CREATE TABLE orders (\n    id INT PRIMARY KEY,\n    user_id INT,\n    FOREIGN KEY (user_id) REFERENCES users(id)\n        ON DELETE CASCADE\n        ON UPDATE CASCADE\n);\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7EA7\u8054\u64CD\u4F5C"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"CASCADE\uFF1A\u7EA7\u8054\u5220\u9664/\u66F4\u65B0"}),"\n",(0,r.jsx)(s.li,{children:"SET NULL\uFF1A\u8BBE\u7F6E\u4E3ANULL"}),"\n",(0,r.jsx)(s.li,{children:"RESTRICT\uFF1A\u62D2\u7EDD\u64CD\u4F5C"}),"\n",(0,r.jsx)(s.li,{children:"NO ACTION\uFF1A\u4E0D\u505A\u4EFB\u4F55\u64CD\u4F5C"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"41-60\u9898\u7B80\u8981\u7B54\u6848",children:"41-60\u9898\u7B80\u8981\u7B54\u6848"}),"\n",(0,r.jsx)(s.h3,{id:"41-mysql\u7684union\u548Cunion-all\u6709\u4EC0\u4E48\u533A\u522B",children:"41. MySQL\u7684UNION\u548CUNION ALL\u6709\u4EC0\u4E48\u533A\u522B\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"UNION"}),"\uFF1A\u5408\u5E76\u7ED3\u679C\u96C6\u5E76\u53BB\u91CD\n",(0,r.jsx)(s.strong,{children:"UNION ALL"}),"\uFF1A\u5408\u5E76\u7ED3\u679C\u96C6\u4E0D\u53BB\u91CD\uFF08\u6027\u80FD\u66F4\u597D\uFF09"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"SELECT id FROM users\nUNION          -- \u53BB\u91CD\uFF0C\u6162\nSELECT id FROM orders;\n\nSELECT id FROM users\nUNION ALL      -- \u4E0D\u53BB\u91CD\uFF0C\u5FEB\nSELECT id FROM orders;\n"})}),"\n",(0,r.jsx)(s.h3,{id:"42-\u5982\u4F55\u67E5\u770Bmysql\u7684\u6267\u884C\u8BA1\u5212",children:"42. \u5982\u4F55\u67E5\u770BMySQL\u7684\u6267\u884C\u8BA1\u5212\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:["\u4F7F\u7528",(0,r.jsx)(s.strong,{children:"EXPLAIN"}),"\u6216",(0,r.jsx)(s.strong,{children:"EXPLAIN ANALYZE"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"EXPLAIN SELECT * FROM users WHERE name = 'Alice';\nEXPLAIN ANALYZE SELECT * FROM users WHERE name = 'Alice';\n"})}),"\n",(0,r.jsx)(s.h3,{id:"43-\u4EC0\u4E48\u662Fmysql\u7684\u5168\u6587\u7D22\u5F15",children:"43. \u4EC0\u4E48\u662FMySQL\u7684\u5168\u6587\u7D22\u5F15\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5168\u6587\u7D22\u5F15"}),"\u7528\u4E8E\u6587\u672C\u641C\u7D22\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"CREATE FULLTEXT INDEX idx_content ON articles(content);\n\nSELECT * FROM articles \nWHERE MATCH(content) AGAINST('MySQL' IN NATURAL LANGUAGE MODE);\n"})}),"\n",(0,r.jsx)(s.h3,{id:"44-\u5982\u4F55\u5904\u7406mysql\u7684\u4E71\u7801\u95EE\u9898",children:"44. \u5982\u4F55\u5904\u7406MySQL\u7684\u4E71\u7801\u95EE\u9898\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u539F\u56E0"}),"\uFF1A\u5B57\u7B26\u96C6\u4E0D\u4E00\u81F4"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u89E3\u51B3"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u7EDF\u4E00\u4F7F\u7528utf8mb4\nALTER DATABASE mydb CHARACTER SET utf8mb4;\nALTER TABLE users CONVERT TO CHARACTER SET utf8mb4;\nSET NAMES utf8mb4;\n"})}),"\n",(0,r.jsx)(s.h3,{id:"45-mysql\u7684left-join\u548Cright-join\u6709\u4EC0\u4E48\u533A\u522B",children:"45. MySQL\u7684LEFT JOIN\u548CRIGHT JOIN\u6709\u4EC0\u4E48\u533A\u522B\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"LEFT JOIN"}),"\uFF1A\u4FDD\u7559\u5DE6\u8868\u6240\u6709\u8BB0\u5F55\n",(0,r.jsx)(s.strong,{children:"RIGHT JOIN"}),"\uFF1A\u4FDD\u7559\u53F3\u8868\u6240\u6709\u8BB0\u5F55"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"SELECT * FROM users u LEFT JOIN orders o ON u.id = o.user_id;\n-- \u8FD4\u56DE\u6240\u6709\u7528\u6237\uFF0C\u5305\u62EC\u6CA1\u6709\u8BA2\u5355\u7684\u7528\u6237\n"})}),"\n",(0,r.jsx)(s.h3,{id:"46-\u4EC0\u4E48\u662Fmysql\u7684\u590D\u5408\u7D22\u5F15",children:"46. \u4EC0\u4E48\u662FMySQL\u7684\u590D\u5408\u7D22\u5F15\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u590D\u5408\u7D22\u5F15"}),"\u662F\u5305\u542B\u591A\u4E2A\u5217\u7684\u7D22\u5F15\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"CREATE INDEX idx_name_age ON users(name, age);\n-- \u9075\u5FAA\u6700\u5DE6\u524D\u7F00\u539F\u5219\n"})}),"\n",(0,r.jsx)(s.h3,{id:"47-\u5982\u4F55\u8FDB\u884Cmysql\u7684\u5BB9\u91CF\u89C4\u5212",children:"47. \u5982\u4F55\u8FDB\u884CMySQL\u7684\u5BB9\u91CF\u89C4\u5212\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8BC4\u4F30\u56E0\u7D20"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"\u6570\u636E\u589E\u957F\u901F\u5EA6"}),"\n",(0,r.jsx)(s.li,{children:"\u67E5\u8BE2QPS"}),"\n",(0,r.jsx)(s.li,{children:"\u5B58\u50A8\u7A7A\u95F4\u9700\u6C42"}),"\n",(0,r.jsx)(s.li,{children:"\u5907\u4EFD\u7B56\u7565"}),"\n",(0,r.jsx)(s.li,{children:"\u6269\u5C55\u6027\u9700\u6C42"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"48-\u4EC0\u4E48\u662Fmysql\u7684\u67E5\u8BE2\u7F13\u5B58",children:"48. \u4EC0\u4E48\u662FMySQL\u7684\u67E5\u8BE2\u7F13\u5B58\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u67E5\u8BE2\u7F13\u5B58"}),"\uFF08MySQL 8.0\u5DF2\u79FB\u9664\uFF09\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- MySQL 5.7\nSET GLOBAL query_cache_type = ON;\nSET GLOBAL query_cache_size = 256M;\n"})}),"\n",(0,r.jsx)(s.h3,{id:"49-\u5982\u4F55\u4F18\u5316mysql\u7684\u914D\u7F6E\u53C2\u6570",children:"49. \u5982\u4F55\u4F18\u5316MySQL\u7684\u914D\u7F6E\u53C2\u6570\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5173\u952E\u53C2\u6570"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ini",children:"innodb_buffer_pool_size = 8G    # \u7269\u7406\u5185\u5B58\u768450-80%\ninnodb_log_file_size = 512M\nmax_connections = 1000\ninnodb_flush_log_at_trx_commit = 1\n"})}),"\n",(0,r.jsx)(s.h3,{id:"50-\u4EC0\u4E48\u662Fmysql\u7684\u4E8B\u4EF6\u8C03\u5EA6\u5668",children:"50. \u4EC0\u4E48\u662FMySQL\u7684\u4E8B\u4EF6\u8C03\u5EA6\u5668\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E8B\u4EF6\u8C03\u5EA6\u5668"}),"\u7528\u4E8E\u5B9A\u65F6\u4EFB\u52A1\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"CREATE EVENT clean_old_data\nON SCHEDULE EVERY 1 DAY\nDO\nDELETE FROM logs WHERE create_time < DATE_SUB(NOW(), INTERVAL 30 DAY);\n"})}),"\n",(0,r.jsx)(s.h3,{id:"51-\u5982\u4F55\u5904\u7406mysql\u7684\u9501\u7B49\u5F85\u8D85\u65F6",children:"51. \u5982\u4F55\u5904\u7406MySQL\u7684\u9501\u7B49\u5F85\u8D85\u65F6\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u914D\u7F6E\u8D85\u65F6\u65F6\u95F4"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"SET innodb_lock_wait_timeout = 50;  -- \u79D2\n"})}),"\n",(0,r.jsx)(s.h3,{id:"52-\u4EC0\u4E48\u662Fmysql\u7684\u6E38\u6807",children:"52. \u4EC0\u4E48\u662FMySQL\u7684\u6E38\u6807\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6E38\u6807"}),"\u7528\u4E8E\u9010\u884C\u5904\u7406\u7ED3\u679C\u96C6\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"DECLARE cur CURSOR FOR SELECT id FROM users;\nOPEN cur;\nFETCH cur INTO user_id;\nCLOSE cur;\n"})}),"\n",(0,r.jsx)(s.h3,{id:"53-\u5982\u4F55\u8FDB\u884Cmysql\u7684\u7248\u672C\u5347\u7EA7",children:"53. \u5982\u4F55\u8FDB\u884CMySQL\u7684\u7248\u672C\u5347\u7EA7\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6B65\u9AA4"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"\u5907\u4EFD\u6570\u636E"}),"\n",(0,r.jsx)(s.li,{children:"\u6D4B\u8BD5\u73AF\u5883\u9A8C\u8BC1"}),"\n",(0,r.jsx)(s.li,{children:"\u68C0\u67E5\u517C\u5BB9\u6027"}),"\n",(0,r.jsx)(s.li,{children:"\u7070\u5EA6\u5347\u7EA7"}),"\n",(0,r.jsx)(s.li,{children:"\u76D1\u63A7\u89C2\u5BDF"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"54-\u4EC0\u4E48\u662Fmysql\u7684\u5206\u5E03\u5F0F\u4E8B\u52A1",children:"54. \u4EC0\u4E48\u662FMySQL\u7684\u5206\u5E03\u5F0F\u4E8B\u52A1\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"XA\u4E8B\u52A1"}),"\u652F\u6301\u5206\u5E03\u5F0F\u4E8B\u52A1\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"XA START 'xid1';\nUPDATE accounts SET balance = balance - 100 WHERE id = 1;\nXA END 'xid1';\nXA PREPARE 'xid1';\nXA COMMIT 'xid1';\n"})}),"\n",(0,r.jsx)(s.h3,{id:"55-\u5982\u4F55\u5904\u7406mysql\u7684\u4E3B\u952E\u51B2\u7A81",children:"55. \u5982\u4F55\u5904\u7406MySQL\u7684\u4E3B\u952E\u51B2\u7A81\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u65B9\u6CD5"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5FFD\u7565\u51B2\u7A81\nINSERT IGNORE INTO users VALUES (1, 'Alice');\n\n-- \u66F4\u65B0\u51B2\u7A81\nINSERT INTO users VALUES (1, 'Alice')\nON DUPLICATE KEY UPDATE name = 'Alice';\n\n-- \u66FF\u6362\nREPLACE INTO users VALUES (1, 'Alice');\n"})}),"\n",(0,r.jsx)(s.h3,{id:"56-\u4EC0\u4E48\u662Fmysql\u7684\u5B58\u50A8\u51FD\u6570",children:"56. \u4EC0\u4E48\u662FMySQL\u7684\u5B58\u50A8\u51FD\u6570\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B58\u50A8\u51FD\u6570"}),"\u8FD4\u56DE\u5355\u4E2A\u503C\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"CREATE FUNCTION get_user_name(uid INT)\nRETURNS VARCHAR(50)\nBEGIN\n    DECLARE uname VARCHAR(50);\n    SELECT name INTO uname FROM users WHERE id = uid;\n    RETURN uname;\nEND;\n"})}),"\n",(0,r.jsx)(s.h3,{id:"57-\u5982\u4F55\u8FDB\u884Cmysql\u7684\u5B89\u5168\u52A0\u56FA",children:"57. \u5982\u4F55\u8FDB\u884CMySQL\u7684\u5B89\u5168\u52A0\u56FA\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u63AA\u65BD"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"\u6700\u5C0F\u6743\u9650\u539F\u5219"}),"\n",(0,r.jsx)(s.li,{children:"\u7981\u7528root\u8FDC\u7A0B\u767B\u5F55"}),"\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528SSL\u8FDE\u63A5"}),"\n",(0,r.jsx)(s.li,{children:"\u5B9A\u671F\u66F4\u65B0\u5BC6\u7801"}),"\n",(0,r.jsx)(s.li,{children:"\u542F\u7528\u5BA1\u8BA1\u65E5\u5FD7"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"58-\u4EC0\u4E48\u662Fmysql\u7684\u590D\u5236\u5EF6\u8FDF",children:"58. \u4EC0\u4E48\u662FMySQL\u7684\u590D\u5236\u5EF6\u8FDF\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u590D\u5236\u5EF6\u8FDF"}),"\u662F\u4E3B\u4ECE\u6570\u636E\u540C\u6B65\u7684\u65F6\u95F4\u5DEE\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u76D1\u63A7"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"SHOW SLAVE STATUS\\G\n-- \u67E5\u770BSeconds_Behind_Master\n"})}),"\n",(0,r.jsx)(s.h3,{id:"59-\u5982\u4F55\u4F18\u5316mysql\u7684\u78C1\u76D8io",children:"59. \u5982\u4F55\u4F18\u5316MySQL\u7684\u78C1\u76D8I/O\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F18\u5316\u65B9\u6CD5"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528SSD"}),"\n",(0,r.jsx)(s.li,{children:"RAID\u914D\u7F6E"}),"\n",(0,r.jsx)(s.li,{children:"\u8C03\u6574innodb_flush_method"}),"\n",(0,r.jsx)(s.li,{children:"\u589E\u52A0Buffer Pool"}),"\n",(0,r.jsx)(s.li,{children:"\u4F18\u5316SQL\u51CF\u5C11I/O"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"60-mysql-80\u6709\u54EA\u4E9B\u65B0\u7279\u6027",children:"60. MySQL 8.0\u6709\u54EA\u4E9B\u65B0\u7279\u6027\uFF1F"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E3B\u8981\u65B0\u7279\u6027"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7A97\u53E3\u51FD\u6570"}),"\uFF1AROW_NUMBER(), RANK()"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"CTE\uFF08\u516C\u7528\u8868\u8868\u8FBE\u5F0F\uFF09"}),"\uFF1AWITH\u5B50\u53E5"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"JSON\u589E\u5F3A"}),"\uFF1AJSON_TABLE()"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u9690\u85CF\u7D22\u5F15"}),"\uFF1A\u6D4B\u8BD5\u7D22\u5F15\u5F71\u54CD"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u964D\u5E8F\u7D22\u5F15"}),"\uFF1A\u771F\u6B63\u7684\u964D\u5E8F"]}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.strong,{children:"\u9ED8\u8BA4utf8mb4"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.strong,{children:"\u539F\u5B50DDL"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.strong,{children:"\u89D2\u8272\u7BA1\u7406"})}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u7A97\u53E3\u51FD\u6570\nSELECT \n    name,\n    salary,\n    ROW_NUMBER() OVER (ORDER BY salary DESC) as rank\nFROM employees;\n\n-- CTE\nWITH high_salary AS (\n    SELECT * FROM employees WHERE salary > 10000\n)\nSELECT * FROM high_salary;\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"\u603B\u7ED3",children:"\u603B\u7ED3"}),"\n",(0,r.jsx)(s.p,{children:"\u672C\u6587\u6863\u6DB5\u76D6\u4E86MySQL\u9762\u8BD5\u768460\u4E2A\u6838\u5FC3\u95EE\u9898\uFF0C\u5305\u62EC\uFF1A"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5B58\u50A8\u5F15\u64CE\u548C\u7D22\u5F15"}),"\uFF1AInnoDB\u3001MyISAM\u3001B+\u6811\u3001\u7D22\u5F15\u4F18\u5316"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4E8B\u52A1\u548C\u9501"}),"\uFF1AACID\u3001\u9694\u79BB\u7EA7\u522B\u3001MVCC\u3001\u6B7B\u9501"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6027\u80FD\u4F18\u5316"}),"\uFF1A\u6162\u67E5\u8BE2\u3001EXPLAIN\u3001\u5206\u5E93\u5206\u8868\u3001\u7F13\u5B58"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u9AD8\u53EF\u7528"}),"\uFF1A\u4E3B\u4ECE\u590D\u5236\u3001\u8BFB\u5199\u5206\u79BB\u3001\u5907\u4EFD\u6062\u590D"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5B89\u5168"}),"\uFF1ASQL\u6CE8\u5165\u3001\u6743\u9650\u7BA1\u7406\u3001\u5B57\u7B26\u96C6"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u9AD8\u7EA7\u7279\u6027"}),"\uFF1A\u5B58\u50A8\u8FC7\u7A0B\u3001\u89E6\u53D1\u5668\u3001\u89C6\u56FE\u3001\u5206\u533A\u8868"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"\u638C\u63E1\u8FD9\u4E9B\u77E5\u8BC6\u70B9\uFF0C\u80FD\u591F\u5E94\u5BF9\u5927\u90E8\u5206MySQL\u76F8\u5173\u7684\u9762\u8BD5\u95EE\u9898\u3002"}),"\n",(0,r.jsx)(s.h3,{id:"41-mysql\u7684union\u548Cunion-all\u6709\u4EC0\u4E48\u533A\u522B-1",children:"41. MySQL\u7684UNION\u548CUNION ALL\u6709\u4EC0\u4E48\u533A\u522B\uFF1F"}),"\n",(0,r.jsx)(s.h3,{id:"42-\u5982\u4F55\u67E5\u770Bmysql\u7684\u6267\u884C\u8BA1\u5212-1",children:"42. \u5982\u4F55\u67E5\u770BMySQL\u7684\u6267\u884C\u8BA1\u5212\uFF1F"}),"\n",(0,r.jsx)(s.h3,{id:"43-\u4EC0\u4E48\u662Fmysql\u7684\u5168\u6587\u7D22\u5F15-1",children:"43. \u4EC0\u4E48\u662FMySQL\u7684\u5168\u6587\u7D22\u5F15\uFF1F"}),"\n",(0,r.jsx)(s.h3,{id:"44-\u5982\u4F55\u5904\u7406mysql\u7684\u4E71\u7801\u95EE\u9898-1",children:"44. \u5982\u4F55\u5904\u7406MySQL\u7684\u4E71\u7801\u95EE\u9898\uFF1F"}),"\n",(0,r.jsx)(s.h3,{id:"45-mysql\u7684left-join\u548Cright-join\u6709\u4EC0\u4E48\u533A\u522B-1",children:"45. MySQL\u7684LEFT JOIN\u548CRIGHT JOIN\u6709\u4EC0\u4E48\u533A\u522B\uFF1F"}),"\n",(0,r.jsx)(s.h3,{id:"46-\u4EC0\u4E48\u662Fmysql\u7684\u590D\u5408\u7D22\u5F15-1",children:"46. \u4EC0\u4E48\u662FMySQL\u7684\u590D\u5408\u7D22\u5F15\uFF1F"}),"\n",(0,r.jsx)(s.h3,{id:"47-\u5982\u4F55\u8FDB\u884Cmysql\u7684\u5BB9\u91CF\u89C4\u5212-1",children:"47. \u5982\u4F55\u8FDB\u884CMySQL\u7684\u5BB9\u91CF\u89C4\u5212\uFF1F"}),"\n",(0,r.jsx)(s.h3,{id:"48-\u4EC0\u4E48\u662Fmysql\u7684\u67E5\u8BE2\u7F13\u5B58-1",children:"48. \u4EC0\u4E48\u662FMySQL\u7684\u67E5\u8BE2\u7F13\u5B58\uFF1F"}),"\n",(0,r.jsx)(s.h3,{id:"49-\u5982\u4F55\u4F18\u5316mysql\u7684\u914D\u7F6E\u53C2\u6570-1",children:"49. \u5982\u4F55\u4F18\u5316MySQL\u7684\u914D\u7F6E\u53C2\u6570\uFF1F"}),"\n",(0,r.jsx)(s.h3,{id:"50-\u4EC0\u4E48\u662Fmysql\u7684\u4E8B\u4EF6\u8C03\u5EA6\u5668-1",children:"50. \u4EC0\u4E48\u662FMySQL\u7684\u4E8B\u4EF6\u8C03\u5EA6\u5668\uFF1F"}),"\n",(0,r.jsx)(s.h3,{id:"51-\u5982\u4F55\u5904\u7406mysql\u7684\u9501\u7B49\u5F85\u8D85\u65F6-1",children:"51. \u5982\u4F55\u5904\u7406MySQL\u7684\u9501\u7B49\u5F85\u8D85\u65F6\uFF1F"}),"\n",(0,r.jsx)(s.h3,{id:"52-\u4EC0\u4E48\u662Fmysql\u7684\u6E38\u6807-1",children:"52. \u4EC0\u4E48\u662FMySQL\u7684\u6E38\u6807\uFF1F"}),"\n",(0,r.jsx)(s.h3,{id:"53-\u5982\u4F55\u8FDB\u884Cmysql\u7684\u7248\u672C\u5347\u7EA7-1",children:"53. \u5982\u4F55\u8FDB\u884CMySQL\u7684\u7248\u672C\u5347\u7EA7\uFF1F"}),"\n",(0,r.jsx)(s.h3,{id:"54-\u4EC0\u4E48\u662Fmysql\u7684\u5206\u5E03\u5F0F\u4E8B\u52A1-1",children:"54. \u4EC0\u4E48\u662FMySQL\u7684\u5206\u5E03\u5F0F\u4E8B\u52A1\uFF1F"}),"\n",(0,r.jsx)(s.h3,{id:"55-\u5982\u4F55\u5904\u7406mysql\u7684\u4E3B\u952E\u51B2\u7A81-1",children:"55. \u5982\u4F55\u5904\u7406MySQL\u7684\u4E3B\u952E\u51B2\u7A81\uFF1F"}),"\n",(0,r.jsx)(s.h3,{id:"56-\u4EC0\u4E48\u662Fmysql\u7684\u5B58\u50A8\u51FD\u6570-1",children:"56. \u4EC0\u4E48\u662FMySQL\u7684\u5B58\u50A8\u51FD\u6570\uFF1F"}),"\n",(0,r.jsx)(s.h3,{id:"57-\u5982\u4F55\u8FDB\u884Cmysql\u7684\u5B89\u5168\u52A0\u56FA-1",children:"57. \u5982\u4F55\u8FDB\u884CMySQL\u7684\u5B89\u5168\u52A0\u56FA\uFF1F"}),"\n",(0,r.jsx)(s.h3,{id:"58-\u4EC0\u4E48\u662Fmysql\u7684\u590D\u5236\u5EF6\u8FDF-1",children:"58. \u4EC0\u4E48\u662FMySQL\u7684\u590D\u5236\u5EF6\u8FDF\uFF1F"}),"\n",(0,r.jsx)(s.h3,{id:"59-\u5982\u4F55\u4F18\u5316mysql\u7684\u78C1\u76D8io-1",children:"59. \u5982\u4F55\u4F18\u5316MySQL\u7684\u78C1\u76D8I/O\uFF1F"}),"\n",(0,r.jsx)(s.h3,{id:"60-mysql-80\u6709\u54EA\u4E9B\u65B0\u7279\u6027-1",children:"60. MySQL 8.0\u6709\u54EA\u4E9B\u65B0\u7279\u6027\uFF1F"})]})}function a(n={}){let{wrapper:s}={...(0,i.R)(),...n.components};return s?(0,r.jsx)(s,{...n,children:(0,r.jsx)(j,{...n})}):j(n)}},28453:function(n,s,e){e.d(s,{R:()=>d,x:()=>c});var l=e(96540);let r={},i=l.createContext(r);function d(n){let s=l.useContext(i);return l.useMemo(function(){return"function"==typeof n?n(s):{...s,...n}},[s,n])}function c(n){let s;return s=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:d(n.components),l.createElement(i.Provider,{value:s},n.children)}}}]);