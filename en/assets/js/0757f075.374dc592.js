"use strict";(self.webpackChunkfullstack_dev_blog=self.webpackChunkfullstack_dev_blog||[]).push([["31115"],{29242:function(n,s,e){e.r(s),e.d(s,{metadata:()=>l,default:()=>o,frontMatter:()=>h,contentTitle:()=>x,toc:()=>t,assets:()=>j});var l=JSON.parse('{"id":"backend/database-orm/mysql","title":"MySQL\u6570\u636E\u5E93\u8BE6\u89E3","description":"\u6DF1\u5165\u7406\u89E3MySQL\u67B6\u6784\u3001\u7D22\u5F15\u539F\u7406\u3001\u4E8B\u52A1\u673A\u5236\u4E0E\u6027\u80FD\u4F18\u5316\u5B9E\u8DF5","source":"@site/docs/backend/database-orm/mysql.mdx","sourceDirName":"backend/database-orm","slug":"/backend/database-orm/mysql","permalink":"/en/docs/backend/database-orm/mysql","draft":false,"unlisted":false,"editUrl":"https://github.com/MasterLiu93/blog-web/tree/main/docs/backend/database-orm/mysql.mdx","tags":[{"inline":true,"label":"MySQL","permalink":"/en/docs/tags/my-sql"},{"inline":true,"label":"\u6570\u636E\u5E93","permalink":"/en/docs/tags/\u6570\u636E\u5E93"},{"inline":true,"label":"\u7D22\u5F15","permalink":"/en/docs/tags/\u7D22\u5F15"},{"inline":true,"label":"\u4E8B\u52A1","permalink":"/en/docs/tags/\u4E8B\u52A1"},{"inline":true,"label":"\u6027\u80FD\u4F18\u5316","permalink":"/en/docs/tags/\u6027\u80FD\u4F18\u5316"},{"inline":true,"label":"\u9AD8\u53EF\u7528","permalink":"/en/docs/tags/\u9AD8\u53EF\u7528"}],"version":"current","lastUpdatedBy":"Laby","lastUpdatedAt":1754870400000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"MySQL\u6570\u636E\u5E93\u8BE6\u89E3","description":"\u6DF1\u5165\u7406\u89E3MySQL\u67B6\u6784\u3001\u7D22\u5F15\u539F\u7406\u3001\u4E8B\u52A1\u673A\u5236\u4E0E\u6027\u80FD\u4F18\u5316\u5B9E\u8DF5","authors":["Laby"],"tags":["MySQL","\u6570\u636E\u5E93","\u7D22\u5F15","\u4E8B\u52A1","\u6027\u80FD\u4F18\u5316","\u9AD8\u53EF\u7528"],"last_update":{"date":"2025-08-11T00:00:00.000Z","author":"Laby"}},"sidebar":"tutorialSidebar","previous":{"title":"MyBatis-Plus\u6846\u67B6\u8BE6\u89E3","permalink":"/en/docs/backend/database-orm/mybatis-plus"},"next":{"title":"PostgreSQL\u8BE6\u89E3","permalink":"/en/docs/backend/database-orm/postgresql"}}'),r=e(74848),i=e(28453),d=e(78010),c=e(57250);e(25591);let h={sidebar_position:2,title:"MySQL\u6570\u636E\u5E93\u8BE6\u89E3",description:"\u6DF1\u5165\u7406\u89E3MySQL\u67B6\u6784\u3001\u7D22\u5F15\u539F\u7406\u3001\u4E8B\u52A1\u673A\u5236\u4E0E\u6027\u80FD\u4F18\u5316\u5B9E\u8DF5",authors:["Laby"],tags:["MySQL","\u6570\u636E\u5E93","\u7D22\u5F15","\u4E8B\u52A1","\u6027\u80FD\u4F18\u5316","\u9AD8\u53EF\u7528"],last_update:{date:new Date("2025-08-11T00:00:00.000Z"),author:"Laby"}},x="MySQL\u6570\u636E\u5E93\u8BE6\u89E3",j={},t=[{value:"1. MySQL\u57FA\u7840\u67B6\u6784\u4E0E\u7279\u6027",id:"1-mysql\u57FA\u7840\u67B6\u6784\u4E0E\u7279\u6027",level:2},{value:"1.1 MySQL\u67B6\u6784\u7EC4\u6210",id:"11-mysql\u67B6\u6784\u7EC4\u6210",level:3},{value:"1.2 \u5B58\u50A8\u5F15\u64CE\u5BF9\u6BD4",id:"12-\u5B58\u50A8\u5F15\u64CE\u5BF9\u6BD4",level:3},{value:"1.3 MySQL\u7248\u672C\u7279\u6027",id:"13-mysql\u7248\u672C\u7279\u6027",level:3},{value:"2. \u7D22\u5F15\u539F\u7406\u4E0E\u4F18\u5316",id:"2-\u7D22\u5F15\u539F\u7406\u4E0E\u4F18\u5316",level:2},{value:"2.1 \u7D22\u5F15\u6570\u636E\u7ED3\u6784",id:"21-\u7D22\u5F15\u6570\u636E\u7ED3\u6784",level:3},{value:"2.2 \u7D22\u5F15\u7C7B\u578B\u8BE6\u89E3",id:"22-\u7D22\u5F15\u7C7B\u578B\u8BE6\u89E3",level:3},{value:"2.3 \u7D22\u5F15\u8BBE\u8BA1\u539F\u5219",id:"23-\u7D22\u5F15\u8BBE\u8BA1\u539F\u5219",level:3},{value:"2.4 \u7D22\u5F15\u4F18\u5316\u5B9E\u8DF5",id:"24-\u7D22\u5F15\u4F18\u5316\u5B9E\u8DF5",level:3},{value:"3. \u4E8B\u52A1\u4E0E\u9501\u673A\u5236",id:"3-\u4E8B\u52A1\u4E0E\u9501\u673A\u5236",level:2},{value:"3.1 \u4E8B\u52A1ACID\u7279\u6027",id:"31-\u4E8B\u52A1acid\u7279\u6027",level:3},{value:"3.2 \u4E8B\u52A1\u9694\u79BB\u7EA7\u522B",id:"32-\u4E8B\u52A1\u9694\u79BB\u7EA7\u522B",level:3},{value:"3.3 \u9501\u7C7B\u578B\u4E0E\u5E94\u7528",id:"33-\u9501\u7C7B\u578B\u4E0E\u5E94\u7528",level:3},{value:"3.4 \u6B7B\u9501\u95EE\u9898\u5206\u6790",id:"34-\u6B7B\u9501\u95EE\u9898\u5206\u6790",level:3},{value:"4. \u67E5\u8BE2\u4F18\u5316\u4E0E\u6267\u884C\u8BA1\u5212",id:"4-\u67E5\u8BE2\u4F18\u5316\u4E0E\u6267\u884C\u8BA1\u5212",level:2},{value:"4.1 SQL\u6267\u884C\u6D41\u7A0B",id:"41-sql\u6267\u884C\u6D41\u7A0B",level:3},{value:"4.2 \u6267\u884C\u8BA1\u5212\u89E3\u8BFB",id:"42-\u6267\u884C\u8BA1\u5212\u89E3\u8BFB",level:3},{value:"4.3 \u67E5\u8BE2\u4F18\u5316\u7B56\u7565",id:"43-\u67E5\u8BE2\u4F18\u5316\u7B56\u7565",level:3},{value:"4.4 JOIN\u4F18\u5316\u6280\u5DE7",id:"44-join\u4F18\u5316\u6280\u5DE7",level:3},{value:"5. \u6027\u80FD\u76D1\u63A7\u4E0E\u8C03\u4F18",id:"5-\u6027\u80FD\u76D1\u63A7\u4E0E\u8C03\u4F18",level:2},{value:"5.1 \u6027\u80FD\u76D1\u63A7\u6307\u6807",id:"51-\u6027\u80FD\u76D1\u63A7\u6307\u6807",level:3},{value:"5.2 \u6162\u67E5\u8BE2\u5206\u6790",id:"52-\u6162\u67E5\u8BE2\u5206\u6790",level:3},{value:"5.3 \u914D\u7F6E\u53C2\u6570\u4F18\u5316",id:"53-\u914D\u7F6E\u53C2\u6570\u4F18\u5316",level:3},{value:"5.4 \u6027\u80FD\u8C03\u4F18\u5DE5\u5177",id:"54-\u6027\u80FD\u8C03\u4F18\u5DE5\u5177",level:3},{value:"6. \u5907\u4EFD\u4E0E\u6062\u590D\u7B56\u7565",id:"6-\u5907\u4EFD\u4E0E\u6062\u590D\u7B56\u7565",level:2},{value:"6.1 \u5907\u4EFD\u7C7B\u578B\u4E0E\u65B9\u6CD5",id:"61-\u5907\u4EFD\u7C7B\u578B\u4E0E\u65B9\u6CD5",level:3},{value:"6.2 \u5907\u4EFD\u5DE5\u5177\u5BF9\u6BD4",id:"62-\u5907\u4EFD\u5DE5\u5177\u5BF9\u6BD4",level:3},{value:"6.3 \u6062\u590D\u7B56\u7565\u4E0E\u6F14\u7EC3",id:"63-\u6062\u590D\u7B56\u7565\u4E0E\u6F14\u7EC3",level:3},{value:"6.4 \u707E\u96BE\u6062\u590D\u8BA1\u5212",id:"64-\u707E\u96BE\u6062\u590D\u8BA1\u5212",level:3},{value:"7. \u9AD8\u53EF\u7528\u67B6\u6784\u8BBE\u8BA1",id:"7-\u9AD8\u53EF\u7528\u67B6\u6784\u8BBE\u8BA1",level:2},{value:"7.1 \u4E3B\u4ECE\u590D\u5236\u539F\u7406",id:"71-\u4E3B\u4ECE\u590D\u5236\u539F\u7406",level:3},{value:"7.2 \u9AD8\u53EF\u7528\u67B6\u6784\u65B9\u6848",id:"72-\u9AD8\u53EF\u7528\u67B6\u6784\u65B9\u6848",level:3},{value:"7.3 \u8BFB\u5199\u5206\u79BB\u5B9E\u73B0",id:"73-\u8BFB\u5199\u5206\u79BB\u5B9E\u73B0",level:3},{value:"7.4 \u5206\u5E93\u5206\u8868\u65B9\u6848",id:"74-\u5206\u5E93\u5206\u8868\u65B9\u6848",level:3}];function a(n){let s={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"mysql\u6570\u636E\u5E93\u8BE6\u89E3",children:"MySQL\u6570\u636E\u5E93\u8BE6\u89E3"})}),"\n",(0,r.jsx)(s.p,{children:"MySQL\u662F\u4E00\u4E2A\u5F00\u6E90\u7684\u5173\u7CFB\u578B\u6570\u636E\u5E93\u7BA1\u7406\u7CFB\u7EDF\uFF0C\u7531\u745E\u5178MySQL AB\u516C\u53F8\u5F00\u53D1\uFF0C\u73B0\u5C5E\u4E8EOracle\u516C\u53F8\u3002\u5B83\u662F\u4E16\u754C\u4E0A\u6700\u6D41\u884C\u7684\u5F00\u6E90\u6570\u636E\u5E93\u4E4B\u4E00\uFF0C\u4EE5\u5176\u53EF\u9760\u6027\u3001\u6027\u80FD\u548C\u6613\u7528\u6027\u8457\u79F0\uFF0C\u5E7F\u6CDB\u5E94\u7528\u4E8EWeb\u5E94\u7528\u7A0B\u5E8F\u3001\u4F01\u4E1A\u7EA7\u7CFB\u7EDF\u548C\u4E91\u670D\u52A1\u4E2D\u3002"}),"\n",(0,r.jsxs)(s.admonition,{title:"\u6838\u5FC3\u4EF7\u503C",type:"tip",children:[(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"MySQL = \u9AD8\u6027\u80FD + \u9AD8\u53EF\u9760\u6027 + \u9AD8\u6269\u5C55\u6027 + \u5F00\u6E90\u514D\u8D39"})}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\u{1F680} ",(0,r.jsx)(s.strong,{children:"\u5353\u8D8A\u6027\u80FD"}),"\uFF1A\u4F18\u5316\u7684SQL\u6267\u884C\u5F15\u64CE\uFF0C\u652F\u6301\u591A\u79CD\u7D22\u5F15\u7C7B\u578B"]}),"\n",(0,r.jsxs)(s.li,{children:["\u{1F512} ",(0,r.jsx)(s.strong,{children:"\u5F3A\u5927\u4E8B\u52A1"}),"\uFF1A\u652F\u6301ACID\u4E8B\u52A1\uFF0C\u591A\u79CD\u9694\u79BB\u7EA7\u522B"]}),"\n",(0,r.jsxs)(s.li,{children:["\u{1F50D} ",(0,r.jsx)(s.strong,{children:"\u4E30\u5BCC\u7D22\u5F15"}),"\uFF1AB+\u6811\u7D22\u5F15\u3001\u54C8\u5E0C\u7D22\u5F15\u3001\u5168\u6587\u7D22\u5F15\u7B49"]}),"\n",(0,r.jsxs)(s.li,{children:["\u{1F504} ",(0,r.jsx)(s.strong,{children:"\u9AD8\u53EF\u7528\u67B6\u6784"}),"\uFF1A\u4E3B\u4ECE\u590D\u5236\u3001\u7EC4\u590D\u5236\u3001\u96C6\u7FA4\u65B9\u6848"]}),"\n",(0,r.jsxs)(s.li,{children:["\u{1F6E0}\uFE0F ",(0,r.jsx)(s.strong,{children:"\u4E30\u5BCC\u529F\u80FD"}),"\uFF1A\u5B58\u50A8\u8FC7\u7A0B\u3001\u89E6\u53D1\u5668\u3001\u89C6\u56FE\u3001\u5206\u533A\u8868"]}),"\n"]})]}),"\n",(0,r.jsx)(s.h2,{id:"1-mysql\u57FA\u7840\u67B6\u6784\u4E0E\u7279\u6027",children:"1. MySQL\u57FA\u7840\u67B6\u6784\u4E0E\u7279\u6027"}),"\n",(0,r.jsx)(s.p,{children:"MySQL\u91C7\u7528\u5BA2\u6237\u7AEF/\u670D\u52A1\u5668\u67B6\u6784\u6A21\u5F0F\uFF0C\u7531\u8FDE\u63A5\u5C42\u3001\u670D\u52A1\u5C42\u548C\u5B58\u50A8\u5F15\u64CE\u5C42\u7EC4\u6210\uFF0C\u6BCF\u4E00\u5C42\u90FD\u6709\u5176\u72EC\u7279\u7684\u529F\u80FD\u548C\u7279\u70B9\u3002"}),"\n",(0,r.jsx)(s.mermaid,{value:"graph TB\n    A[MySQL\u67B6\u6784] --\x3e B[\u8FDE\u63A5\u5C42]\n    A --\x3e C[\u670D\u52A1\u5C42]\n    A --\x3e D[\u5B58\u50A8\u5F15\u64CE\u5C42]\n    A --\x3e E[\u7CFB\u7EDF\u6587\u4EF6\u5C42]\n    \n    B --\x3e B1[\u8FDE\u63A5\u5904\u7406]\n    B --\x3e B2[\u8BA4\u8BC1\u5B89\u5168]\n    \n    C --\x3e C1[\u67E5\u8BE2\u7F13\u5B58]\n    C --\x3e C2[\u89E3\u6790\u5668]\n    C --\x3e C3[\u4F18\u5316\u5668]\n    C --\x3e C4[\u6267\u884C\u5668]\n    \n    D --\x3e D1[InnoDB]\n    D --\x3e D2[MyISAM]\n    D --\x3e D3[Memory]\n    D --\x3e D4[\u5176\u4ED6\u5F15\u64CE]\n    \n    E --\x3e E1[\u65E5\u5FD7\u6587\u4EF6]\n    E --\x3e E2[\u6570\u636E\u6587\u4EF6]\n    E --\x3e E3[\u914D\u7F6E\u6587\u4EF6]"}),"\n",(0,r.jsx)(s.h3,{id:"11-mysql\u67B6\u6784\u7EC4\u6210",children:"1.1 MySQL\u67B6\u6784\u7EC4\u6210"}),"\n",(0,r.jsx)(s.p,{children:"MySQL\u6570\u636E\u5E93\u7CFB\u7EDF\u7531\u4EE5\u4E0B\u51E0\u4E2A\u5173\u952E\u7EC4\u4EF6\u6784\u6210\uFF1A"}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"connection",label:"\u8FDE\u63A5\u5C42",children:[(0,r.jsx)(s.p,{children:"\u8FDE\u63A5\u5C42\u8D1F\u8D23\u5BA2\u6237\u7AEF\u4E0EMySQL\u670D\u52A1\u5668\u4E4B\u95F4\u7684\u901A\u4FE1\uFF0C\u4E3B\u8981\u529F\u80FD\u5305\u62EC\uFF1A"}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u8FDE\u63A5\u5904\u7406"}),"\uFF1A\u5904\u7406\u5BA2\u6237\u7AEF\u8FDE\u63A5\u8BF7\u6C42\uFF0C\u5EFA\u7ACB\u548C\u7BA1\u7406\u8FDE\u63A5"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u8BA4\u8BC1\u5B89\u5168"}),"\uFF1A\u9A8C\u8BC1\u7528\u6237\u8EAB\u4EFD\uFF0C\u68C0\u67E5\u6743\u9650\uFF0C\u786E\u4FDD\u8BBF\u95EE\u5B89\u5168"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u534F\u8BAE\u652F\u6301"}),"\uFF1A\u652F\u6301TCP/IP\u3001Unix\u5957\u63A5\u5B57\u3001\u547D\u540D\u7BA1\u9053\u7B49\u901A\u4FE1\u534F\u8BAE"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u8FDE\u63A5\u6C60\u7BA1\u7406"}),"\uFF1A\u7EF4\u62A4\u6D3B\u8DC3\u8FDE\u63A5\u6C60\uFF0C\u5B9E\u73B0\u8FDE\u63A5\u590D\u7528"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770B\u5F53\u524D\u8FDE\u63A5\u6570\nSHOW STATUS LIKE 'Threads_connected';\n\n-- \u67E5\u770B\u6700\u5927\u8FDE\u63A5\u6570\nSHOW VARIABLES LIKE 'max_connections';\n\n-- \u67E5\u770B\u5F53\u524D\u7528\u6237\u8FDE\u63A5\u4FE1\u606F\nSHOW PROCESSLIST;\n"})})]}),(0,r.jsxs)(c.A,{value:"service",label:"\u670D\u52A1\u5C42",children:[(0,r.jsx)(s.p,{children:"\u670D\u52A1\u5C42\u662FMySQL\u7684\u6838\u5FC3\uFF0C\u8D1F\u8D23SQL\u89E3\u6790\u548C\u6267\u884C\uFF1A"}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u67E5\u8BE2\u7F13\u5B58"}),"\uFF1A\u7F13\u5B58SELECT\u67E5\u8BE2\u7ED3\u679C\uFF08MySQL 8.0\u5DF2\u79FB\u9664\uFF09"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u89E3\u6790\u5668"}),"\uFF1A\u89E3\u6790SQL\u8BED\u53E5\uFF0C\u5EFA\u7ACB\u8BED\u6CD5\u6811"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u9884\u5904\u7406\u5668"}),"\uFF1A\u68C0\u67E5\u8868\u548C\u5B57\u6BB5\u662F\u5426\u5B58\u5728"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4F18\u5316\u5668"}),"\uFF1A\u9009\u62E9\u6700\u4F73\u6267\u884C\u8BA1\u5212\uFF0C\u4F18\u5316\u67E5\u8BE2\u7B56\u7565"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6267\u884C\u5668"}),"\uFF1A\u4E0E\u5B58\u50A8\u5F15\u64CE\u4EA4\u4E92\uFF0C\u6267\u884CSQL\u5E76\u8FD4\u56DE\u7ED3\u679C"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770B\u67E5\u8BE2\u6267\u884C\u8BA1\u5212\nEXPLAIN SELECT * FROM users WHERE user_id = 1;\n\n-- \u67E5\u770B\u4F18\u5316\u5668\u8DDF\u8E2A\u4FE1\u606F\nSET optimizer_trace = 'enabled=on';\nSELECT * FROM users WHERE user_id = 1;\nSELECT * FROM information_schema.OPTIMIZER_TRACE;\n"})})]}),(0,r.jsxs)(c.A,{value:"engine",label:"\u5B58\u50A8\u5F15\u64CE\u5C42",children:[(0,r.jsx)(s.p,{children:"\u5B58\u50A8\u5F15\u64CE\u5C42\u8D1F\u8D23\u6570\u636E\u7684\u5B58\u50A8\u548C\u63D0\u53D6\uFF1A"}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u53EF\u63D2\u62D4\u67B6\u6784"}),"\uFF1AMySQL\u652F\u6301\u591A\u79CD\u5B58\u50A8\u5F15\u64CE"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u72EC\u7ACB\u7684\u4E8B\u52A1\u5904\u7406"}),"\uFF1A\u6BCF\u4E2A\u5B58\u50A8\u5F15\u64CE\u53EF\u4EE5\u6709\u81EA\u5DF1\u7684\u4E8B\u52A1\u5904\u7406\u673A\u5236"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6570\u636E\u5B58\u53D6\u63A5\u53E3"}),"\uFF1A\u5B9A\u4E49\u4E86\u8868\u7684\u5B58\u50A8\u683C\u5F0F\u548C\u8BBF\u95EE\u65B9\u6CD5"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7075\u6D3B\u9009\u62E9"}),"\uFF1A\u53EF\u4EE5\u6839\u636E\u9700\u6C42\u9009\u62E9\u5408\u9002\u7684\u5B58\u50A8\u5F15\u64CE"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770B\u652F\u6301\u7684\u5B58\u50A8\u5F15\u64CE\nSHOW ENGINES;\n\n-- \u67E5\u770B\u8868\u4F7F\u7528\u7684\u5B58\u50A8\u5F15\u64CE\nSHOW CREATE TABLE users;\n\n-- \u4FEE\u6539\u8868\u7684\u5B58\u50A8\u5F15\u64CE\nALTER TABLE users ENGINE = InnoDB;\n"})})]}),(0,r.jsxs)(c.A,{value:"file",label:"\u7CFB\u7EDF\u6587\u4EF6\u5C42",children:[(0,r.jsx)(s.p,{children:"\u7CFB\u7EDF\u6587\u4EF6\u5C42\u7BA1\u7406MySQL\u7684\u5404\u79CD\u7269\u7406\u6587\u4EF6\uFF1A"}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6570\u636E\u6587\u4EF6"}),"\uFF1A",(0,r.jsx)(s.code,{children:".ibd"}),"\uFF08\u8868\u6570\u636E\uFF09\u3001",(0,r.jsx)(s.code,{children:".frm"}),"\uFF088.0\u524D\u7684\u8868\u7ED3\u6784\uFF09"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u65E5\u5FD7\u6587\u4EF6"}),"\uFF1A",(0,r.jsx)(s.code,{children:"ib_logfile"}),"\uFF08\u91CD\u505A\u65E5\u5FD7\uFF09\u3001",(0,r.jsx)(s.code,{children:"binlog"}),"\uFF08\u4E8C\u8FDB\u5236\u65E5\u5FD7\uFF09"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u914D\u7F6E\u6587\u4EF6"}),"\uFF1A",(0,r.jsx)(s.code,{children:"my.cnf"}),"/",(0,r.jsx)(s.code,{children:"my.ini"}),"\uFF08MySQL\u914D\u7F6E\uFF09"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u72B6\u6001\u6587\u4EF6"}),"\uFF1A",(0,r.jsx)(s.code,{children:"ibdata"}),"\uFF08\u7CFB\u7EDF\u8868\u7A7A\u95F4\uFF09\u3001",(0,r.jsx)(s.code,{children:"ib_buffer_pool"}),"\uFF08\u7F13\u51B2\u6C60\u72B6\u6001\uFF09"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Linux\u7CFB\u7EDF\u6587\u4EF6\u4F4D\u7F6E\u793A\u4F8B\n/var/lib/mysql/         # \u6570\u636E\u76EE\u5F55\n/var/log/mysql/         # \u65E5\u5FD7\u76EE\u5F55\n/etc/mysql/my.cnf       # \u914D\u7F6E\u6587\u4EF6\n"})})]})]}),"\n",(0,r.jsx)(s.h3,{id:"12-\u5B58\u50A8\u5F15\u64CE\u5BF9\u6BD4",children:"1.2 \u5B58\u50A8\u5F15\u64CE\u5BF9\u6BD4"}),"\n",(0,r.jsx)(s.p,{children:"MySQL\u652F\u6301\u591A\u79CD\u5B58\u50A8\u5F15\u64CE\uFF0C\u5176\u4E2DInnoDB\u548CMyISAM\u6700\u4E3A\u5E38\u7528\u3002\u4E0D\u540C\u5B58\u50A8\u5F15\u64CE\u5177\u6709\u4E0D\u540C\u7684\u7279\u6027\u548C\u9002\u7528\u573A\u666F\uFF1A"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u7279\u6027"}),(0,r.jsx)(s.th,{children:"InnoDB"}),(0,r.jsx)(s.th,{children:"MyISAM"}),(0,r.jsx)(s.th,{children:"Memory"}),(0,r.jsx)(s.th,{children:"Archive"}),(0,r.jsx)(s.th,{children:"NDB"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"\u4E8B\u52A1\u652F\u6301"})}),(0,r.jsx)(s.td,{children:"\u652F\u6301"}),(0,r.jsx)(s.td,{children:"\u4E0D\u652F\u6301"}),(0,r.jsx)(s.td,{children:"\u4E0D\u652F\u6301"}),(0,r.jsx)(s.td,{children:"\u4E0D\u652F\u6301"}),(0,r.jsx)(s.td,{children:"\u652F\u6301"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"\u9501\u673A\u5236"})}),(0,r.jsx)(s.td,{children:"\u884C\u9501(MVCC)"}),(0,r.jsx)(s.td,{children:"\u8868\u9501"}),(0,r.jsx)(s.td,{children:"\u8868\u9501"}),(0,r.jsx)(s.td,{children:"\u884C\u9501"}),(0,r.jsx)(s.td,{children:"\u884C\u9501"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"\u5916\u952E\u7EA6\u675F"})}),(0,r.jsx)(s.td,{children:"\u652F\u6301"}),(0,r.jsx)(s.td,{children:"\u4E0D\u652F\u6301"}),(0,r.jsx)(s.td,{children:"\u4E0D\u652F\u6301"}),(0,r.jsx)(s.td,{children:"\u4E0D\u652F\u6301"}),(0,r.jsx)(s.td,{children:"\u652F\u6301(8.0+)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"\u5168\u6587\u7D22\u5F15"})}),(0,r.jsx)(s.td,{children:"\u652F\u6301(5.6+)"}),(0,r.jsx)(s.td,{children:"\u652F\u6301"}),(0,r.jsx)(s.td,{children:"\u4E0D\u652F\u6301"}),(0,r.jsx)(s.td,{children:"\u4E0D\u652F\u6301"}),(0,r.jsx)(s.td,{children:"\u4E0D\u652F\u6301"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"\u6570\u636E\u7F13\u5B58"})}),(0,r.jsx)(s.td,{children:"\u7F13\u5B58\u6570\u636E\u548C\u7D22\u5F15"}),(0,r.jsx)(s.td,{children:"\u4EC5\u7F13\u5B58\u7D22\u5F15"}),(0,r.jsx)(s.td,{children:"\u5168\u5185\u5B58"}),(0,r.jsx)(s.td,{children:"\u4E0D\u7F13\u5B58"}),(0,r.jsx)(s.td,{children:"\u78C1\u76D8+\u5185\u5B58"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"\u5D29\u6E83\u6062\u590D"})}),(0,r.jsx)(s.td,{children:"\u81EA\u52A8\u6062\u590D"}),(0,r.jsx)(s.td,{children:"\u53EF\u80FD\u4E22\u5931\u6570\u636E"}),(0,r.jsx)(s.td,{children:"\u91CD\u542F\u4E22\u5931"}),(0,r.jsx)(s.td,{children:"\u4E00\u822C"}),(0,r.jsx)(s.td,{children:"\u9AD8\u53EF\u7528"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"\u9002\u7528\u573A\u666F"})}),(0,r.jsxs)(s.td,{children:["\u4E8B\u52A1\u5904\u7406",(0,r.jsx)("br",{}),"\u9AD8\u5E76\u53D1\u5199\u5165"]}),(0,r.jsxs)(s.td,{children:["\u8BFB\u5BC6\u96C6\u578B",(0,r.jsx)("br",{}),"\u4F4E\u5199\u5165\u9700\u6C42"]}),(0,r.jsxs)(s.td,{children:["\u4E34\u65F6\u8868",(0,r.jsx)("br",{}),"\u9AD8\u901F\u67E5\u8BE2"]}),(0,r.jsxs)(s.td,{children:["\u65E5\u5FD7",(0,r.jsx)("br",{}),"\u6570\u636E\u5F52\u6863"]}),(0,r.jsxs)(s.td,{children:["\u9AD8\u53EF\u7528",(0,r.jsx)("br",{}),"\u96C6\u7FA4"]})]})]})]}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"innodb",label:"InnoDB",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"InnoDB\u662FMySQL\u7684\u9ED8\u8BA4\u5B58\u50A8\u5F15\u64CE"}),"\uFF0C\u5177\u6709\u4EE5\u4E0B\u7279\u70B9\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4E8B\u52A1ACID"}),"\uFF1A\u5B8C\u5168\u652F\u6301\u4E8B\u52A1\u7684ACID\u7279\u6027"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u884C\u7EA7\u9501"}),"\uFF1A\u652F\u6301\u884C\u7EA7\u9501\uFF0C\u63D0\u9AD8\u9AD8\u5E76\u53D1\u6027\u80FD"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5916\u952E\u7EA6\u675F"}),"\uFF1A\u652F\u6301\u5916\u952E\uFF0C\u4FDD\u8BC1\u6570\u636E\u5B8C\u6574\u6027"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5D29\u6E83\u6062\u590D"}),"\uFF1A\u652F\u6301\u5D29\u6E83\u6062\u590D\uFF0C\u6570\u636E\u5B89\u5168\u6027\u9AD8"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"MVCC"}),"\uFF1A\u591A\u7248\u672C\u5E76\u53D1\u63A7\u5236\uFF0C\u8BFB\u5199\u4E0D\u963B\u585E"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFAInnoDB\u8868\nCREATE TABLE users (\n    id INT PRIMARY KEY AUTO_INCREMENT,\n    name VARCHAR(100) NOT NULL,\n    email VARCHAR(100) UNIQUE,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n) ENGINE=InnoDB;\n\n-- \u4E8B\u52A1\u64CD\u4F5C\u793A\u4F8B\nSTART TRANSACTION;\nINSERT INTO users (name, email) VALUES ('John', 'john@example.com');\nUPDATE users SET email = 'john.doe@example.com' WHERE name = 'John';\nCOMMIT;\n"})})]}),(0,r.jsxs)(c.A,{value:"myisam",label:"MyISAM",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MyISAM\u662FMySQL 5.5\u4E4B\u524D\u7684\u9ED8\u8BA4\u5F15\u64CE"}),"\uFF0C\u5177\u6709\u4EE5\u4E0B\u7279\u70B9\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u9AD8\u901F\u8BFB\u53D6"}),"\uFF1A\u8BFB\u53D6\u6027\u80FD\u5F88\u597D\uFF0C\u9002\u5408\u67E5\u8BE2\u5BC6\u96C6\u578B\u5E94\u7528"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5168\u6587\u7D22\u5F15"}),"\uFF1A\u8F83\u65E9\u652F\u6301\u5168\u6587\u7D22\u5F15\u529F\u80FD"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u8868\u9501\u5B9A"}),"\uFF1A\u4EC5\u652F\u6301\u8868\u7EA7\u9501\uFF0C\u5E76\u53D1\u5199\u5165\u6027\u80FD\u8F83\u5DEE"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u65E0\u4E8B\u52A1"}),"\uFF1A\u4E0D\u652F\u6301\u4E8B\u52A1\uFF0C\u4E0D\u4FDD\u8BC1\u6570\u636E\u5B8C\u6574\u6027"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5EF6\u8FDF\u7D22\u5F15\u66F4\u65B0"}),"\uFF1A\u652F\u6301\u5EF6\u8FDF\u7D22\u5F15\u66F4\u65B0\uFF0C\u63D0\u9AD8\u6279\u91CF\u63D2\u5165\u6027\u80FD"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFAMyISAM\u8868\nCREATE TABLE articles (\n    id INT PRIMARY KEY AUTO_INCREMENT,\n    title VARCHAR(200) NOT NULL,\n    content TEXT,\n    tags VARCHAR(200),\n    FULLTEXT(title, content, tags)\n) ENGINE=MyISAM;\n\n-- \u5168\u6587\u7D22\u5F15\u641C\u7D22\u793A\u4F8B\nSELECT * FROM articles \nWHERE MATCH(title, content, tags) AGAINST('MySQL tutorial');\n"})})]}),(0,r.jsxs)(c.A,{value:"memory",label:"Memory",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Memory\u5F15\u64CE\u5C06\u6570\u636E\u5B58\u50A8\u5728\u5185\u5B58\u4E2D"}),"\uFF0C\u5177\u6709\u4EE5\u4E0B\u7279\u70B9\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u8D85\u9AD8\u901F"}),"\uFF1A\u6240\u6709\u6570\u636E\u5B58\u50A8\u5728\u5185\u5B58\uFF0C\u8BBF\u95EE\u901F\u5EA6\u6781\u5FEB"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4E34\u65F6\u6027"}),"\uFF1A\u670D\u52A1\u5668\u91CD\u542F\u540E\u6570\u636E\u4E22\u5931"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u8868\u9501"}),"\uFF1A\u4EC5\u652F\u6301\u8868\u7EA7\u9501"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u54C8\u5E0C\u7D22\u5F15"}),"\uFF1A\u9ED8\u8BA4\u4F7F\u7528\u54C8\u5E0C\u7D22\u5F15\uFF0C\u7B49\u503C\u67E5\u8BE2\u6027\u80FD\u6781\u9AD8"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u56FA\u5B9A\u957F\u5EA6"}),"\uFF1A\u4F7F\u7528\u56FA\u5B9A\u957F\u5EA6\u884C\u5B58\u50A8\u683C\u5F0F"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFAMemory\u8868\nCREATE TABLE cache (\n    key_id VARCHAR(100) PRIMARY KEY,\n    value VARCHAR(1000),\n    expires_at TIMESTAMP\n) ENGINE=MEMORY;\n\n-- \u7528\u4E8E\u4E34\u65F6\u8BA1\u7B97\u7684\u793A\u4F8B\nCREATE TEMPORARY TABLE temp_results \nENGINE=MEMORY \nSELECT id, COUNT(*) as count \nFROM orders \nGROUP BY customer_id;\n"})})]}),(0,r.jsxs)(c.A,{value:"others",label:"\u5176\u4ED6\u5F15\u64CE",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5176\u4ED6\u7279\u6B8A\u7528\u9014\u7684\u5B58\u50A8\u5F15\u64CE"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Archive\u5F15\u64CE"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9AD8\u5EA6\u538B\u7F29\uFF0C\u9002\u5408\u5B58\u50A8\u548C\u5F52\u6863\u5386\u53F2\u6570\u636E"}),"\n",(0,r.jsx)(s.li,{children:"\u53EA\u652F\u6301INSERT\u548CSELECT\uFF0C\u4E0D\u652F\u6301DELETE\u548CUPDATE"}),"\n",(0,r.jsx)(s.li,{children:"\u4E0D\u652F\u6301\u7D22\u5F15\uFF0C\u9002\u5408\u65E5\u5FD7\u548C\u5F52\u6863\u6570\u636E"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"CSV\u5F15\u64CE"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4EE5CSV\u683C\u5F0F\u5B58\u50A8\u6570\u636E"}),"\n",(0,r.jsx)(s.li,{children:"\u4FBF\u4E8E\u4E0E\u5176\u4ED6\u5E94\u7528\u7A0B\u5E8F\u4EA4\u6362\u6570\u636E"}),"\n",(0,r.jsx)(s.li,{children:"\u4E0D\u652F\u6301\u7D22\u5F15\uFF0C\u6027\u80FD\u6709\u9650"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Blackhole\u5F15\u64CE"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u63A5\u6536\u6570\u636E\u4F46\u4E0D\u5B58\u50A8"}),"\n",(0,r.jsx)(s.li,{children:"\u5E38\u7528\u4E8E\u6570\u636E\u590D\u5236\u62D3\u6251\u6D4B\u8BD5"}),"\n",(0,r.jsx)(s.li,{children:"\u8BB0\u5F55\u4E8C\u8FDB\u5236\u65E5\u5FD7\u4F46\u4E0D\u4FDD\u5B58\u6570\u636E"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"NDB (MySQL Cluster)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5206\u5E03\u5F0F\u5B58\u50A8\u5F15\u64CE"}),"\n",(0,r.jsx)(s.li,{children:"\u9AD8\u53EF\u7528\u6027\uFF0C\u81EA\u52A8\u5206\u7247"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u5408\u9700\u8981\u9AD8\u53EF\u7528\u6027\u7684\u573A\u666F"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- Archive\u5F15\u64CE\u793A\u4F8B\uFF08\u7528\u4E8E\u65E5\u5FD7\uFF09\nCREATE TABLE access_logs (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    access_time TIMESTAMP,\n    ip_address VARCHAR(15),\n    url VARCHAR(255),\n    status_code SMALLINT\n) ENGINE=ARCHIVE;\n\n-- CSV\u5F15\u64CE\u793A\u4F8B\uFF08\u7528\u4E8E\u6570\u636E\u4EA4\u6362\uFF09\nCREATE TABLE exported_data (\n    id INT,\n    name VARCHAR(50),\n    value DECIMAL(10,2)\n) ENGINE=CSV;\n"})})]})]}),"\n",(0,r.jsx)(s.h3,{id:"13-mysql\u7248\u672C\u7279\u6027",children:"1.3 MySQL\u7248\u672C\u7279\u6027"}),"\n",(0,r.jsx)(s.p,{children:"MySQL\u4ECE\u6700\u521D\u53D1\u5E03\u81F3\u4ECA\u7ECF\u5386\u4E86\u591A\u4E2A\u91CD\u8981\u7248\u672C\u8FED\u4EE3\uFF0C\u6BCF\u4E2A\u7248\u672C\u90FD\u5E26\u6765\u4E86\u529F\u80FD\u6539\u8FDB\u548C\u6027\u80FD\u4F18\u5316\uFF1A"}),"\n",(0,r.jsx)(s.mermaid,{value:"timeline\n    title MySQL\u4E3B\u8981\u7248\u672C\u53D1\u5C55\u5386\u7A0B\n    5.5 : 2010\u5E74<br>InnoDB\u6210\u4E3A\u9ED8\u8BA4\u5F15\u64CE\n    5.6 : 2013\u5E74<br>InnoDB\u5168\u6587\u7D22\u5F15<br>\u5728\u7EBFDDL\n    5.7 : 2015\u5E74<br>JSON\u652F\u6301<br>\u6027\u80FD\u63D0\u5347\n    8.0 : 2018\u5E74<br>\u7A97\u53E3\u51FD\u6570<br>\u9690\u85CF\u7D22\u5F15<br>\u9ED8\u8BA4UTF8MB4"}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"5.7",label:"MySQL 5.7",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL 5.7\u662F\u4E00\u4E2A\u5E7F\u6CDB\u4F7F\u7528\u7684\u7A33\u5B9A\u7248\u672C"}),"\uFF082015\u5E74\u53D1\u5E03\uFF09\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"JSON\u652F\u6301"}),"\uFF1A\u539F\u751F\u652F\u6301JSON\u6570\u636E\u7C7B\u578B\u548C\u51FD\u6570"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6027\u80FD\u63D0\u5347"}),"\uFF1AInnoDB\u6027\u80FD\u5927\u5E45\u63D0\u5347\uFF0C\u4F18\u5316\u5668\u6539\u8FDB"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5B89\u5168\u589E\u5F3A"}),"\uFF1A\u9ED8\u8BA4\u5BC6\u7801\u7B56\u7565\u589E\u5F3A\uFF0CSSL\u6539\u8FDB"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u590D\u5236\u589E\u5F3A"}),"\uFF1A\u591A\u6E90\u590D\u5236\uFF0C\u589E\u5F3A\u578BGTID\uFF0C\u57FA\u4E8E\u7EC4\u7684\u590D\u5236"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7CFB\u7EDF\u8868\u683C\u5F0F"}),"\uFF1A\u7CFB\u7EDF\u8868\u4F7F\u7528InnoDB\u5B58\u50A8\u5F15\u64CE"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:'-- JSON\u6570\u636E\u7C7B\u578B\u793A\u4F8B\nCREATE TABLE products (\n    id INT PRIMARY KEY AUTO_INCREMENT,\n    name VARCHAR(100),\n    attributes JSON\n);\n\nINSERT INTO products (name, attributes) VALUES \n(\'Smartphone\', \'{"color": "black", "storage": 128, "features": ["camera", "wifi", "bluetooth"]}\');\n\n-- JSON\u67E5\u8BE2\nSELECT id, name, \n       JSON_EXTRACT(attributes, \'$.color\') AS color,\n       JSON_EXTRACT(attributes, \'$.storage\') AS storage\nFROM products;\n\n-- \u6216\u4F7F\u7528->\u64CD\u4F5C\u7B26\nSELECT id, name, attributes->\'$.color\' AS color\nFROM products;\n'})})]}),(0,r.jsxs)(c.A,{value:"8.0",label:"MySQL 8.0",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL 8.0\u662F\u5F53\u524D\u6700\u65B0\u7684\u4E3B\u8981\u7248\u672C"}),"\uFF082018\u5E74\u53D1\u5E03\uFF09\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7A97\u53E3\u51FD\u6570"}),"\uFF1A\u652F\u6301SQL\u6807\u51C6\u7A97\u53E3\u51FD\u6570"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u9690\u85CF\u7D22\u5F15"}),"\uFF1A\u652F\u6301\u7981\u7528\u548C\u542F\u7528\u7D22\u5F15\u800C\u4E0D\u5220\u9664"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u9ED8\u8BA4\u5B57\u7B26\u96C6"}),"\uFF1A\u9ED8\u8BA4UTF8MB4\u5B57\u7B26\u96C6"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6539\u8FDB\u7684\u6570\u636E\u5B57\u5178"}),"\uFF1A\u539F\u5B50DDL\uFF0C\u5143\u6570\u636E\u5B58\u50A8\u5728InnoDB\u4E2D"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u8D44\u6E90\u7BA1\u7406"}),"\uFF1A\u8D44\u6E90\u7EC4\u7BA1\u7406\u529F\u80FD"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u76F4\u65B9\u56FE\u7EDF\u8BA1"}),"\uFF1A\u4F18\u5316\u5668\u4F7F\u7528\u76F4\u65B9\u56FE\u7EDF\u8BA1"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u63D0\u5347\u5B89\u5168\u6027"}),"\uFF1A\u5F3A\u5316\u5BC6\u7801\u5B89\u5168\uFF0C\u89D2\u8272\u7BA1\u7406"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u79FB\u9664\u67E5\u8BE2\u7F13\u5B58"}),"\uFF1A\u5B8C\u5168\u79FB\u9664\u4E86\u67E5\u8BE2\u7F13\u5B58\u529F\u80FD"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u7A97\u53E3\u51FD\u6570\u793A\u4F8B\nSELECT \n    department_id, \n    employee_name, \n    salary,\n    RANK() OVER (PARTITION BY department_id ORDER BY salary DESC) as salary_rank,\n    AVG(salary) OVER (PARTITION BY department_id) as dept_avg_salary\nFROM employees;\n\n-- \u9690\u85CF\u7D22\u5F15\nCREATE INDEX idx_email ON customers(email) INVISIBLE;\nALTER TABLE customers ALTER INDEX idx_email VISIBLE;\n\n-- \u521B\u5EFA\u548C\u7BA1\u7406\u89D2\u8272\nCREATE ROLE 'app_read', 'app_write';\nGRANT SELECT ON app_db.* TO 'app_read';\nGRANT INSERT, UPDATE ON app_db.* TO 'app_write';\nGRANT 'app_read' TO 'app_user'@'localhost';\nSET DEFAULT ROLE 'app_read' TO 'app_user'@'localhost';\n"})})]}),(0,r.jsxs)(c.A,{value:"5.6",label:"MySQL 5.6",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL 5.6\u7248\u672C"}),"\uFF082013\u5E74\u53D1\u5E03\uFF09\u5E26\u6765\u4E86\u91CD\u8981\u7684\u7279\u6027\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"InnoDB\u5168\u6587\u7D22\u5F15"}),"\uFF1AInnoDB\u5F15\u64CE\u652F\u6301\u5168\u6587\u7D22\u5F15"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5728\u7EBFDDL"}),"\uFF1A\u652F\u6301\u5728\u7EBF\u67B6\u6784\u53D8\u66F4\uFF0C\u51CF\u5C11\u505C\u673A\u65F6\u95F4"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u590D\u5236\u589E\u5F3A"}),"\uFF1A\u57FA\u4E8EGTID\u7684\u590D\u5236\uFF0C\u5D29\u6E83\u5B89\u5168\u590D\u5236"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4F18\u5316\u5668\u6539\u8FDB"}),"\uFF1A\u5B50\u67E5\u8BE2\u4F18\u5316\uFF0C\u6267\u884C\u8BA1\u5212\u6539\u8FDB"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6027\u80FD\u67B6\u6784"}),"\uFF1A\u6539\u8FDB\u7684\u6027\u80FD\u67B6\u6784\uFF0C\u66F4\u597D\u7684\u76D1\u63A7\u529F\u80FD"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- InnoDB\u5168\u6587\u7D22\u5F15\u793A\u4F8B\nCREATE TABLE articles (\n    id INT PRIMARY KEY AUTO_INCREMENT,\n    title VARCHAR(200),\n    body TEXT,\n    FULLTEXT INDEX (title, body)\n) ENGINE=InnoDB;\n\n-- \u5168\u6587\u68C0\u7D22\nSELECT * FROM articles \nWHERE MATCH(title, body) AGAINST('MySQL performance' IN BOOLEAN MODE);\n\n-- \u5728\u7EBFDDL\u793A\u4F8B\nALTER TABLE customers ADD COLUMN phone VARCHAR(20), ALGORITHM=INPLACE, LOCK=NONE;\n"})})]}),(0,r.jsxs)(c.A,{value:"latest",label:"\u65B0\u7248\u7279\u6027",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL\u6700\u65B0\u7248\u672C"}),"\uFF088.0.30+\uFF09\u5F15\u5165\u7684\u90E8\u5206\u7279\u6027\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u539F\u5B50DDL"}),"\uFF1A\u786E\u4FDDDDL\u64CD\u4F5C\u7684\u539F\u5B50\u6027"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5373\u65F6\u6DFB\u52A0\u5217"}),"\uFF1A\u7ACB\u5373\u6DFB\u52A0\u5217\u800C\u65E0\u9700\u91CD\u5EFA\u8868"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u591A\u503C\u7D22\u5F15"}),"\uFF1A\u652F\u6301JSON\u6570\u7EC4\u7684\u591A\u503C\u7D22\u5F15"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6570\u636E\u590D\u5236\u4F18\u5316"}),"\uFF1A\u6539\u8FDB\u7684\u590D\u5236\u673A\u5236"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"SQL\u589E\u5F3A"}),"\uFF1A\u589E\u5F3A\u7684CTE\u529F\u80FD\uFF0CREGEXP\u529F\u80FD\u6539\u8FDB"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"JSON\u589E\u5F3A"}),"\uFF1A\u6539\u8FDB\u7684JSON\u529F\u80FD\u548C\u6027\u80FD"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"InnoDB\u589E\u5F3A"}),"\uFF1A\u4E34\u65F6\u8868\u6027\u80FD\u63D0\u5347\uFF0C\u7A7A\u95F4\u7D22\u5F15\u6539\u8FDB"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u591A\u503C\u7D22\u5F15\u793A\u4F8B\nCREATE TABLE products (\n    id INT PRIMARY KEY,\n    name VARCHAR(100),\n    tags JSON\n);\n\n-- \u521B\u5EFA\u591A\u503C\u7D22\u5F15\nCREATE INDEX idx_tags ON products((CAST(tags->'$[*]' AS CHAR(50) ARRAY)));\n\n-- \u4F7F\u7528\u591A\u503C\u7D22\u5F15\u67E5\u8BE2\nSELECT * FROM products WHERE 'wireless' MEMBER OF(tags);\n\n-- \u5E26\u6709\u9012\u5F52\u7684CTE\nWITH RECURSIVE employee_paths (id, name, path) AS (\n  SELECT id, name, CAST(name AS CHAR(500))\n  FROM employees\n  WHERE manager_id IS NULL\n  UNION ALL\n  SELECT e.id, e.name, CONCAT(ep.path, ' -> ', e.name)\n  FROM employee_paths AS ep\n  JOIN employees AS e ON ep.id = e.manager_id\n)\nSELECT * FROM employee_paths ORDER BY path;\n"})})]})]}),"\n",(0,r.jsx)(s.h2,{id:"2-\u7D22\u5F15\u539F\u7406\u4E0E\u4F18\u5316",children:"2. \u7D22\u5F15\u539F\u7406\u4E0E\u4F18\u5316"}),"\n",(0,r.jsx)(s.p,{children:"\u7D22\u5F15\u662F\u63D0\u9AD8MySQL\u67E5\u8BE2\u6027\u80FD\u7684\u6700\u91CD\u8981\u624B\u6BB5\uFF0C\u5408\u7406\u8BBE\u8BA1\u548C\u4F7F\u7528\u7D22\u5F15\u53EF\u4EE5\u8BA9\u67E5\u8BE2\u901F\u5EA6\u63D0\u5347\u51E0\u4E2A\u6570\u91CF\u7EA7\u3002MySQL\u652F\u6301\u591A\u79CD\u7D22\u5F15\u7C7B\u578B\uFF0C\u5B83\u4EEC\u57FA\u4E8E\u4E0D\u540C\u7684\u6570\u636E\u7ED3\u6784\u5B9E\u73B0\uFF0C\u5177\u6709\u5404\u81EA\u7684\u4F18\u7F3A\u70B9\u548C\u9002\u7528\u573A\u666F\u3002"}),"\n",(0,r.jsx)(s.mermaid,{value:"graph TD\n    A[MySQL\u7D22\u5F15] --\x3e B[B+\u6811\u7D22\u5F15]\n    A --\x3e C[\u54C8\u5E0C\u7D22\u5F15]\n    A --\x3e D[\u5168\u6587\u7D22\u5F15]\n    A --\x3e E[\u7A7A\u95F4\u7D22\u5F15]\n    \n    B --\x3e B1[\u805A\u7C07\u7D22\u5F15<br>\u4E3B\u952E\u7D22\u5F15]\n    B --\x3e B2[\u975E\u805A\u7C07\u7D22\u5F15<br>\u4E8C\u7EA7\u7D22\u5F15]\n    \n    C --\x3e C1[Memory\u5F15\u64CE<br>\u9ED8\u8BA4\u7D22\u5F15]\n    C --\x3e C2[InnoDB<br>\u81EA\u9002\u5E94\u54C8\u5E0C]\n    \n    D --\x3e D1[MyISAM\u5168\u6587\u7D22\u5F15]\n    D --\x3e D2[InnoDB\u5168\u6587\u7D22\u5F15]\n    \n    E --\x3e E1[R\u6811\u7D22\u5F15]\n    E --\x3e E2[\u5730\u7406\u7A7A\u95F4\u7D22\u5F15]"}),"\n",(0,r.jsx)(s.h3,{id:"21-\u7D22\u5F15\u6570\u636E\u7ED3\u6784",children:"2.1 \u7D22\u5F15\u6570\u636E\u7ED3\u6784"}),"\n",(0,r.jsx)(s.p,{children:"MySQL\u4E2D\u4E3B\u8981\u4F7F\u7528\u7684\u7D22\u5F15\u6570\u636E\u7ED3\u6784\u662FB+\u6811\uFF0C\u4F46\u4E5F\u652F\u6301\u54C8\u5E0C\u7D22\u5F15\u3001\u5168\u6587\u7D22\u5F15\u548C\u7A7A\u95F4\u7D22\u5F15\u7B49\u5176\u4ED6\u7C7B\u578B\u3002"}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"btree",label:"B+\u6811\u7D22\u5F15",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"B+\u6811\u662FMySQL\u4E2D\u6700\u5E38\u7528\u7684\u7D22\u5F15\u6570\u636E\u7ED3\u6784"}),"\uFF0C\u7279\u522B\u662F\u5728InnoDB\u548CMyISAM\u5F15\u64CE\u4E2D\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5E73\u8861\u591A\u8DEF\u641C\u7D22\u6811"}),"\uFF1A\u6BCF\u4E2A\u8282\u70B9\u53EF\u4EE5\u6709\u591A\u4E2A\u5B50\u8282\u70B9\uFF08\u6247\u51FA\u56E0\u5B50\u5927\uFF09"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u53F6\u5B50\u8282\u70B9\u5305\u542B\u6240\u6709\u6570\u636E"}),"\uFF1A\u975E\u53F6\u5B50\u8282\u70B9\u53EA\u5305\u542B\u952E\u503C\u548C\u6307\u9488"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u53F6\u5B50\u8282\u70B9\u5F62\u6210\u6709\u5E8F\u94FE\u8868"}),"\uFF1A\u652F\u6301\u8303\u56F4\u67E5\u8BE2\u548C\u6392\u5E8F"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u591A\u7EA7\u7D22\u5F15\u7ED3\u6784"}),"\uFF1A\u51CF\u5C11I/O\u6B21\u6570\uFF0C\u63D0\u9AD8\u67E5\u8BE2\u6548\u7387"]}),"\n"]}),(0,r.jsx)(s.mermaid,{value:'graph TD\n    subgraph "B+\u6811\u7D22\u5F15\u7ED3\u6784"\n    Root[\u6839\u8282\u70B9] --\x3e Branch1[\u5206\u652F\u8282\u70B91]\n    Root --\x3e Branch2[\u5206\u652F\u8282\u70B92]\n    \n    Branch1 --\x3e Leaf1[\u53F6\u5B50\u8282\u70B91<br>\u6570\u636E\u9875]\n    Branch1 --\x3e Leaf2[\u53F6\u5B50\u8282\u70B92<br>\u6570\u636E\u9875]\n    Branch2 --\x3e Leaf3[\u53F6\u5B50\u8282\u70B93<br>\u6570\u636E\u9875]\n    Branch2 --\x3e Leaf4[\u53F6\u5B50\u8282\u70B94<br>\u6570\u636E\u9875]\n    \n    Leaf1 --- Leaf2\n    Leaf2 --- Leaf3\n    Leaf3 --- Leaf4\n    end'}),(0,r.jsx)(s.p,{children:"B+\u6811\u7D22\u5F15\u7684\u4E3B\u8981\u4F18\u52BF\uFF1A"}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u9AD8\u6548\u67E5\u627E"}),"\uFF1A\u5E73\u5747\u67E5\u8BE2\u65F6\u95F4\u590D\u6742\u5EA6\u4E3AO(log n)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u8303\u56F4\u67E5\u8BE2\u4F18\u5316"}),"\uFF1A\u53F6\u5B50\u8282\u70B9\u94FE\u8868\u652F\u6301\u9AD8\u6548\u8303\u56F4\u626B\u63CF"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7ED3\u6784\u7A33\u5B9A"}),"\uFF1A\u5E73\u8861\u6811\u7ED3\u6784\u786E\u4FDD\u5404\u8DEF\u5F84\u957F\u5EA6\u4E00\u81F4"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u9002\u5408\u78C1\u76D8\u5B58\u50A8"}),"\uFF1A\u8282\u70B9\u5927\u5C0F\u53EF\u4F18\u5316\u4E3A\u78C1\u76D8\u5757\u5927\u5C0F"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFAB+\u6811\u7D22\u5F15\u793A\u4F8B\nCREATE TABLE customers (\n    id INT PRIMARY KEY,            -- \u805A\u7C07\u7D22\u5F15\n    name VARCHAR(100),\n    email VARCHAR(100),\n    created_at TIMESTAMP,\n    INDEX idx_email (email),       -- \u666E\u901AB+\u6811\u7D22\u5F15\n    INDEX idx_created (created_at) -- \u7528\u4E8E\u8303\u56F4\u67E5\u8BE2\u7684B+\u6811\u7D22\u5F15\n);\n"})})]}),(0,r.jsxs)(c.A,{value:"hash",label:"\u54C8\u5E0C\u7D22\u5F15",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u54C8\u5E0C\u7D22\u5F15\u662F\u57FA\u4E8E\u54C8\u5E0C\u8868\u5B9E\u73B0\u7684"}),"\uFF0C\u4E3B\u8981\u7528\u4E8E\u7CBE\u786E\u5339\u914D\u67E5\u8BE2\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u54C8\u5E0C\u51FD\u6570"}),"\uFF1A\u901A\u8FC7\u54C8\u5E0C\u51FD\u6570\u5C06\u952E\u503C\u8F6C\u6362\u4E3A\u54C8\u5E0C\u503C"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u54C8\u5E0C\u8868"}),"\uFF1A\u5B58\u50A8\u54C8\u5E0C\u503C\u548C\u6307\u5411\u6570\u636E\u884C\u7684\u6307\u9488"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6781\u901F\u7B49\u503C\u67E5\u8BE2"}),"\uFF1A\u7406\u60F3\u60C5\u51B5\u4E0BO(1)\u590D\u6742\u5EA6"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4E0D\u652F\u6301\u6392\u5E8F\u548C\u8303\u56F4\u67E5\u8BE2"}),"\uFF1A\u53EA\u80FD\u7528\u4E8E\u7B49\u503C\u6BD4\u8F83"]}),"\n"]}),(0,r.jsx)(s.p,{children:"\u54C8\u5E0C\u7D22\u5F15\u4E3B\u8981\u5B58\u5728\u4E8E\uFF1A"}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Memory\u5B58\u50A8\u5F15\u64CE"}),"\uFF1A\u9ED8\u8BA4\u4F7F\u7528\u54C8\u5E0C\u7D22\u5F15"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"InnoDB\u81EA\u9002\u5E94\u54C8\u5E0C\u7D22\u5F15"}),"\uFF1A\u6839\u636E\u8BBF\u95EE\u6A21\u5F0F\u81EA\u52A8\u521B\u5EFA"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- Memory\u5F15\u64CE\u4F7F\u7528\u54C8\u5E0C\u7D22\u5F15\nCREATE TABLE cache_data (\n    key_id VARCHAR(100) PRIMARY KEY,\n    value TEXT,\n    expires_at DATETIME\n) ENGINE=MEMORY;\n\n-- \u67E5\u770BInnoDB\u81EA\u9002\u5E94\u54C8\u5E0C\u7D22\u5F15\u72B6\u6001\nSHOW ENGINE INNODB STATUS\\G\n"})}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u54C8\u5E0C\u7D22\u5F15\u7684\u4F18\u7F3A\u70B9"}),"\uFF1A"]}),(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u4F18\u70B9"}),(0,r.jsx)(s.th,{children:"\u7F3A\u70B9"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u7B49\u503C\u67E5\u8BE2\u6781\u901F"}),(0,r.jsx)(s.td,{children:"\u4E0D\u652F\u6301\u8303\u56F4\u67E5\u8BE2"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u5185\u5B58\u5360\u7528\u76F8\u5BF9\u8F83\u5C0F"}),(0,r.jsx)(s.td,{children:"\u4E0D\u652F\u6301\u90E8\u5206\u952E\u67E5\u8BE2"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u67E5\u8BE2\u590D\u6742\u5EA6\u4E3AO(1)"}),(0,r.jsx)(s.td,{children:"\u4E0D\u652F\u6301\u6392\u5E8F"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"\u53EF\u80FD\u5B58\u5728\u54C8\u5E0C\u51B2\u7A81"})]})]})]})]}),(0,r.jsxs)(c.A,{value:"fulltext",label:"\u5168\u6587\u7D22\u5F15",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5168\u6587\u7D22\u5F15\u4E13\u4E3A\u641C\u7D22\u5927\u6587\u672C\u5185\u5BB9\u800C\u8BBE\u8BA1"}),"\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5012\u6392\u7D22\u5F15\u7ED3\u6784"}),"\uFF1A\u8BCD\u9879\u5230\u6587\u6863\u7684\u6620\u5C04"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u652F\u6301\u81EA\u7136\u8BED\u8A00\u641C\u7D22"}),"\uFF1A\u66F4\u7B26\u5408\u4EBA\u7C7B\u641C\u7D22\u4E60\u60EF"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u652F\u6301\u5E03\u5C14\u641C\u7D22\u6A21\u5F0F"}),"\uFF1A\u4F7F\u7528\u64CD\u4F5C\u7B26\u7EC4\u5408\u641C\u7D22\u6761\u4EF6"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u652F\u6301\u77ED\u8BED\u641C\u7D22"}),"\uFF1A\u641C\u7D22\u7279\u5B9A\u8BCD\u8BED\u5E8F\u5217"]}),"\n"]}),(0,r.jsx)(s.p,{children:"MySQL\u652F\u6301\u7684\u5168\u6587\u7D22\u5F15\uFF1A"}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"MyISAM\u5168\u6587\u7D22\u5F15"}),"\uFF1A\u65E9\u671F\u5B9E\u73B0"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"InnoDB\u5168\u6587\u7D22\u5F15"}),"\uFF1AMySQL 5.6+\u652F\u6301"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFA\u5168\u6587\u7D22\u5F15\nCREATE TABLE articles (\n    id INT PRIMARY KEY AUTO_INCREMENT,\n    title VARCHAR(200),\n    content TEXT,\n    FULLTEXT INDEX ft_content (title, content)\n) ENGINE=InnoDB;\n\n-- \u81EA\u7136\u8BED\u8A00\u6A21\u5F0F\u641C\u7D22\nSELECT * FROM articles \nWHERE MATCH(title, content) AGAINST('database optimization');\n\n-- \u5E03\u5C14\u6A21\u5F0F\u641C\u7D22\uFF08\u4F7F\u7528\u64CD\u4F5C\u7B26\uFF09\nSELECT * FROM articles \nWHERE MATCH(title, content) \nAGAINST('+MySQL -Oracle \"database performance\"' IN BOOLEAN MODE);\n"})}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5168\u6587\u7D22\u5F15\u914D\u7F6E"}),"\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"innodb_ft_min_token_size"}),"\uFF1A\u6700\u5C0F\u7D22\u5F15\u8BCD\u957F\u5EA6\uFF08\u9ED8\u8BA43\uFF09"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"innodb_ft_max_token_size"}),"\uFF1A\u6700\u5927\u7D22\u5F15\u8BCD\u957F\u5EA6\uFF08\u9ED8\u8BA484\uFF09"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ft_stopword_file"}),"\uFF1A\u505C\u7528\u8BCD\u6587\u4EF6"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"spatial",label:"\u7A7A\u95F4\u7D22\u5F15",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7A7A\u95F4\u7D22\u5F15\u7528\u4E8E\u5730\u7406\u7A7A\u95F4\u6570\u636E"}),"\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"R\u6811\u7ED3\u6784"}),"\uFF1A\u7528\u4E8E\u591A\u7EF4\u7A7A\u95F4\u6570\u636E\u68C0\u7D22"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6700\u5C0F\u8FB9\u754C\u77E9\u5F62(MBR)"}),"\uFF1A\u7528\u77E9\u5F62\u5305\u56F4\u7A7A\u95F4\u5BF9\u8C61"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u652F\u6301\u5730\u7406\u4F4D\u7F6E\u67E5\u8BE2"}),"\uFF1A\u70B9\u3001\u7EBF\u3001\u591A\u8FB9\u5F62\u7B49"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7A7A\u95F4\u5173\u7CFB\u8FD0\u7B97"}),"\uFF1A\u5305\u542B\u3001\u76F8\u4EA4\u3001\u8DDD\u79BB\u7B49"]}),"\n"]}),(0,r.jsx)(s.p,{children:"MySQL 5.7+\u7684InnoDB\u5F15\u64CE\u652F\u6301\u7A7A\u95F4\u7D22\u5F15\uFF1A"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFA\u5305\u542B\u5730\u7406\u7A7A\u95F4\u6570\u636E\u7684\u8868\nCREATE TABLE locations (\n    id INT PRIMARY KEY,\n    name VARCHAR(100),\n    location POINT NOT NULL,\n    SPATIAL INDEX idx_location (location)\n) ENGINE=InnoDB;\n\n-- \u63D2\u5165\u70B9\u6570\u636E\nINSERT INTO locations VALUES \n(1, 'Coffee Shop', ST_GeomFromText('POINT(40.7128 -74.0060)'));\n\n-- \u7A7A\u95F4\u67E5\u8BE2\u793A\u4F8B\n-- \u627E\u51FA\u6307\u5B9A\u70B9\u9644\u8FD15\u516C\u91CC\u5185\u7684\u5730\u70B9\nSELECT id, name, \n       ST_Distance_Sphere(location, \n                         ST_GeomFromText('POINT(40.7128 -74.0060)')) as distance\nFROM locations\nWHERE ST_Distance_Sphere(location, \n                        ST_GeomFromText('POINT(40.7128 -74.0060)')) <= 5000\nORDER BY distance;\n"})}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7A7A\u95F4\u7D22\u5F15\u9002\u7528\u573A\u666F"}),"\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5730\u7406\u4FE1\u606F\u7CFB\u7EDF(GIS)"}),"\n",(0,r.jsx)(s.li,{children:"\u4F4D\u7F6E\u670D\u52A1\u5E94\u7528"}),"\n",(0,r.jsx)(s.li,{children:"\u5730\u56FE\u5E94\u7528"}),"\n",(0,r.jsx)(s.li,{children:"\u8DEF\u5F84\u89C4\u5212"}),"\n"]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"22-\u7D22\u5F15\u7C7B\u578B\u8BE6\u89E3",children:"2.2 \u7D22\u5F15\u7C7B\u578B\u8BE6\u89E3"}),"\n",(0,r.jsx)(s.p,{children:"\u4ECE\u529F\u80FD\u548C\u7ED3\u6784\u89D2\u5EA6\u770B\uFF0CMySQL\u652F\u6301\u591A\u79CD\u7C7B\u578B\u7684\u7D22\u5F15\uFF0C\u6BCF\u79CD\u90FD\u6709\u7279\u5B9A\u7684\u7528\u9014\u548C\u4F18\u5316\u573A\u666F\u3002"}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"primary",label:"\u805A\u7C07\u7D22\u5F15",children:[(0,r.jsx)(s.p,{children:"**\u805A\u7C07\u7D22\u5F15\uFF08\u4E3B\u952E\u7D22\u5F15\uFF09**\u662FInnoDB\u8868\u7684\u6838\u5FC3\u7EC4\u7EC7\u65B9\u5F0F\uFF1A"}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6570\u636E\u5B58\u50A8\u65B9\u5F0F"}),"\uFF1A\u8868\u6570\u636E\u6309\u4E3B\u952E\u987A\u5E8F\u7269\u7406\u5B58\u50A8"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4E00\u8868\u4E00\u4E2A"}),"\uFF1A\u6BCF\u4E2AInnoDB\u8868\u53EA\u6709\u4E00\u4E2A\u805A\u7C07\u7D22\u5F15"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u81EA\u52A8\u521B\u5EFA"}),"\uFF1A\u5982\u679C\u5B9A\u4E49\u4E3B\u952E\u5219\u4F7F\u7528\u4E3B\u952E\uFF0C\u5426\u5219\u4F7F\u7528\u552F\u4E00\u975E\u7A7A\u7D22\u5F15\uFF0C\u5982\u679C\u90FD\u6CA1\u6709\u5219\u4F7F\u7528\u9690\u85CF\u7684\u884CID"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u53F6\u5B50\u8282\u70B9"}),"\uFF1A\u5305\u542B\u6574\u884C\u6570\u636E\u8BB0\u5F55"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u663E\u5F0F\u5B9A\u4E49\u805A\u7C07\u7D22\u5F15\nCREATE TABLE orders (\n    order_id INT PRIMARY KEY,  -- \u8FD9\u5C06\u6210\u4E3A\u805A\u7C07\u7D22\u5F15\n    customer_id INT,\n    order_date DATE,\n    total_amount DECIMAL(10,2)\n);\n\n-- \u4F18\u5316\u805A\u7C07\u7D22\u5F15\u793A\u4F8B\uFF1A\u81EA\u589E\u4E3B\u952E\u901A\u5E38\u662F\u6700\u4F18\u9009\u62E9\nCREATE TABLE products (\n    id INT AUTO_INCREMENT PRIMARY KEY,  -- \u81EA\u589E\u4E3B\u952E\u4F5C\u4E3A\u805A\u7C07\u7D22\u5F15\n    sku VARCHAR(50) UNIQUE,\n    name VARCHAR(100),\n    price DECIMAL(10,2)\n);\n"})}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u805A\u7C07\u7D22\u5F15\u7684\u4F18\u7F3A\u70B9"}),"\uFF1A"]}),(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u4F18\u70B9"}),(0,r.jsx)(s.th,{children:"\u7F3A\u70B9"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u76F8\u5173\u6570\u636E\u805A\u96C6\u5B58\u50A8\uFF0C\u63D0\u9AD8\u67E5\u8BE2\u6548\u7387"}),(0,r.jsx)(s.td,{children:"\u63D2\u5165\u901F\u5EA6\u4F9D\u8D56\u4E8E\u4E3B\u952E\u662F\u5426\u987A\u5E8F\u589E\u957F"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u901A\u8FC7\u4E3B\u952E\u8BBF\u95EE\u6570\u636E\u975E\u5E38\u5FEB"}),(0,r.jsx)(s.td,{children:"\u66F4\u65B0\u4E3B\u952E\u4EE3\u4EF7\u5F88\u9AD8"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u53EF\u51CF\u5C11I/O\u64CD\u4F5C"}),(0,r.jsx)(s.td,{children:"\u53EF\u80FD\u5BFC\u81F4\u9875\u5206\u88C2"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u8303\u56F4\u67E5\u8BE2\u6027\u80FD\u597D"}),(0,r.jsx)(s.td,{children:"\u4E8C\u7EA7\u7D22\u5F15\u9700\u8981\u56DE\u8868"})]})]})]})]}),(0,r.jsxs)(c.A,{value:"secondary",label:"\u4E8C\u7EA7\u7D22\u5F15",children:[(0,r.jsx)(s.p,{children:"**\u4E8C\u7EA7\u7D22\u5F15\uFF08\u975E\u805A\u7C07\u7D22\u5F15/\u8F85\u52A9\u7D22\u5F15\uFF09**\u662F\u9664\u4E3B\u952E\u5916\u7684\u5176\u4ED6\u7D22\u5F15\uFF1A"}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u72EC\u7ACB\u7D22\u5F15\u7ED3\u6784"}),"\uFF1A\u4E0E\u805A\u7C07\u7D22\u5F15\u5206\u79BB"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u56DE\u8868\u67E5\u8BE2"}),"\uFF1A\u53F6\u5B50\u8282\u70B9\u5B58\u50A8\u4E3B\u952E\u503C\uFF0C\u9700\u8981\u4E8C\u6B21\u67E5\u8BE2\u805A\u7C07\u7D22\u5F15"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u8986\u76D6\u7D22\u5F15"}),"\uFF1A\u5982\u679C\u7D22\u5F15\u5305\u542B\u67E5\u8BE2\u6240\u9700\u7684\u6240\u6709\u5B57\u6BB5\uFF0C\u5219\u4E0D\u9700\u56DE\u8868"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u53EF\u591A\u4E2A"}),"\uFF1A\u4E00\u4E2A\u8868\u53EF\u4EE5\u6709\u591A\u4E2A\u4E8C\u7EA7\u7D22\u5F15"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFA\u666E\u901A\u4E8C\u7EA7\u7D22\u5F15\nCREATE INDEX idx_customer_id ON orders(customer_id);\n\n-- \u521B\u5EFA\u7EC4\u5408\u7D22\u5F15\uFF08\u591A\u5217\uFF09\nCREATE INDEX idx_order_date_status ON orders(order_date, status);\n\n-- \u521B\u5EFA\u524D\u7F00\u7D22\u5F15\uFF08\u8282\u7701\u7A7A\u95F4\uFF09\nCREATE INDEX idx_name_prefix ON products(name(20));\n"})}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u56DE\u8868\u67E5\u8BE2\u8FC7\u7A0B"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"\u901A\u8FC7\u4E8C\u7EA7\u7D22\u5F15\u627E\u5230\u6EE1\u8DB3\u6761\u4EF6\u7684\u8BB0\u5F55\u7684\u4E3B\u952E\u503C"}),"\n",(0,r.jsx)(s.li,{children:"\u901A\u8FC7\u4E3B\u952E\u503C\u56DE\u8868\u5230\u805A\u7C07\u7D22\u5F15\u83B7\u53D6\u5B8C\u6574\u8BB0\u5F55"}),"\n"]}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8986\u76D6\u7D22\u5F15\u4F18\u5316"}),"\uFF1A"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u7D22\u5F15\u8986\u76D6\u793A\u4F8B\uFF1A\u7D22\u5F15\u5305\u542B\u6240\u6709\u9700\u8981\u7684\u5B57\u6BB5\nCREATE INDEX idx_customer_date ON orders(customer_id, order_date);\n\n-- \u8BE5\u67E5\u8BE2\u53EF\u4EE5\u53EA\u4F7F\u7528\u7D22\u5F15\u800C\u65E0\u9700\u56DE\u8868\nSELECT customer_id, order_date FROM orders WHERE customer_id = 100;\n"})})]}),(0,r.jsxs)(c.A,{value:"composite",label:"\u7EC4\u5408\u7D22\u5F15",children:[(0,r.jsx)(s.p,{children:"**\u7EC4\u5408\u7D22\u5F15\uFF08\u590D\u5408\u7D22\u5F15/\u8054\u5408\u7D22\u5F15\uFF09**\u5728\u591A\u4E2A\u5217\u4E0A\u521B\u5EFA\u7684\u7D22\u5F15\uFF1A"}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u591A\u5217\u7EC4\u5408"}),"\uFF1A\u8054\u5408\u591A\u4E2A\u5217\u6784\u6210\u7D22\u5F15\u952E"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5DE6\u524D\u7F00\u5339\u914D\u539F\u5219"}),"\uFF1A\u6309\u7167\u7D22\u5F15\u5B9A\u4E49\u987A\u5E8F\u4F7F\u7528"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u9009\u62E9\u6027\u539F\u5219"}),"\uFF1A\u4E00\u822C\u5C06\u9009\u62E9\u6027\u9AD8\u7684\u5217\u653E\u5728\u524D\u9762"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7D22\u5F15\u5408\u5E76"}),"\uFF1A\u53EF\u80FD\u66FF\u4EE3\u591A\u4E2A\u5355\u5217\u7D22\u5F15"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFA\u7EC4\u5408\u7D22\u5F15\nCREATE TABLE employees (\n    id INT PRIMARY KEY,\n    department_id INT,\n    status VARCHAR(20),\n    hire_date DATE,\n    salary DECIMAL(10,2),\n    INDEX idx_dept_status_date (department_id, status, hire_date)\n);\n"})}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5DE6\u524D\u7F00\u5339\u914D\u89C4\u5219\u793A\u4F8B"}),"\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"\u4EE5\u4E0A\u7D22\u5F15\u5BF9\u8FD9\u4E9BWHERE\u6761\u4EF6\u6709\u6548\uFF1A"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.code,{children:"WHERE department_id = 5"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.code,{children:"WHERE department_id = 5 AND status = 'active'"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.code,{children:"WHERE department_id = 5 AND status = 'active' AND hire_date > '2020-01-01'"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"\u4F46\u5BF9\u8FD9\u4E9B\u6761\u4EF6\u65E0\u6548\uFF08\u4E0D\u4F7F\u7528\u7D22\u5F15\u6216\u53EA\u4F7F\u7528\u90E8\u5206\u7D22\u5F15\uFF09\uFF1A"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"WHERE status = 'active'"})," \uFF08\u4E0D\u4F7F\u7528\u7D22\u5F15\uFF09"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"WHERE hire_date > '2020-01-01'"})," \uFF08\u4E0D\u4F7F\u7528\u7D22\u5F15\uFF09"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"WHERE department_id = 5 AND hire_date > '2020-01-01'"})," \uFF08\u53EA\u4F7F\u7528department_id\u90E8\u5206\uFF09"]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u7EC4\u5408\u7D22\u5F15\u6700\u4F73\u5B9E\u8DF5\u793A\u4F8B\nCREATE INDEX idx_search_filter ON products(category_id, brand_id, price);\n\n-- \u53EF\u6709\u6548\u5229\u7528\u8BE5\u7D22\u5F15\u7684\u67E5\u8BE2\nSELECT * FROM products \nWHERE category_id = 10 AND brand_id = 25 AND price > 1000;\n"})})]}),(0,r.jsxs)(c.A,{value:"special",label:"\u7279\u6B8A\u7D22\u5F15\u7C7B\u578B",children:[(0,r.jsx)(s.p,{children:"MySQL\u8FD8\u652F\u6301\u591A\u79CD\u7279\u6B8A\u7C7B\u578B\u7684\u7D22\u5F15\uFF1A"}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"1. \u552F\u4E00\u7D22\u5F15"}),"\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u786E\u4FDD\u7D22\u5F15\u5217\u7684\u503C\u552F\u4E00"}),"\n",(0,r.jsx)(s.li,{children:"\u53EF\u4EE5\u5728\u591A\u4E2A\u5217\u4E0A\u5EFA\u7ACB\u552F\u4E00\u7EA6\u675F"}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"CREATE UNIQUE INDEX idx_email ON users(email);\n"})}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"2. \u524D\u7F00\u7D22\u5F15"}),"\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u53EA\u7D22\u5F15\u5B57\u7B26\u4E32\u7684\u524D\u7F00\u90E8\u5206"}),"\n",(0,r.jsx)(s.li,{children:"\u8282\u7701\u7D22\u5F15\u7A7A\u95F4\uFF0C\u9002\u7528\u4E8E\u957F\u5B57\u7B26\u4E32"}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"CREATE INDEX idx_title ON articles(title(50));\n"})}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"3. \u51FD\u6570\u7D22\u5F15\uFF08\u8868\u8FBE\u5F0F\u7D22\u5F15\uFF09"}),"\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"MySQL 8.0+\u652F\u6301"}),"\n",(0,r.jsx)(s.li,{children:"\u5728\u8868\u8FBE\u5F0F\u6216\u51FD\u6570\u7ED3\u679C\u4E0A\u521B\u5EFA\u7D22\u5F15"}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u51FD\u6570\u7D22\u5F15\u793A\u4F8B\nCREATE INDEX idx_lower_email ON users((LOWER(email)));\nSELECT * FROM users WHERE LOWER(email) = 'user@example.com';\n"})}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"4. \u9690\u85CF\u7D22\u5F15"}),"\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"MySQL 8.0+\u652F\u6301"}),"\n",(0,r.jsx)(s.li,{children:"\u4FDD\u6301\u7D22\u5F15\u7ED3\u6784\u4F46\u4E0D\u4F7F\u7528\u5B83\uFF0C\u7528\u4E8E\u6D4B\u8BD5\u7D22\u5F15\u5220\u9664\u7684\u5F71\u54CD"}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"CREATE INDEX idx_status ON orders(status) INVISIBLE;\nALTER TABLE orders ALTER INDEX idx_status VISIBLE;\n"})}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"5. \u964D\u5E8F\u7D22\u5F15"}),"\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"MySQL 8.0+\u652F\u6301\u771F\u6B63\u7684\u964D\u5E8F\u7D22\u5F15"}),"\n",(0,r.jsx)(s.li,{children:"\u5BF9\u6392\u5E8F\u4F18\u5316\u6709\u5E2E\u52A9"}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"CREATE INDEX idx_created_desc ON logs(created_at DESC);\n"})}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"6. \u591A\u503C\u7D22\u5F15"}),"\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"MySQL 8.0.17+\u652F\u6301"}),"\n",(0,r.jsx)(s.li,{children:"\u7528\u4E8EJSON\u6570\u7EC4"}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"CREATE TABLE products (\n    id INT PRIMARY KEY,\n    tags JSON,\n    INDEX idx_tags ((CAST(tags->'$[*]' AS CHAR(50) ARRAY)))\n);\n"})})]})]}),"\n",(0,r.jsx)(s.h3,{id:"23-\u7D22\u5F15\u8BBE\u8BA1\u539F\u5219",children:"2.3 \u7D22\u5F15\u8BBE\u8BA1\u539F\u5219"}),"\n",(0,r.jsx)(s.p,{children:"\u826F\u597D\u7684\u7D22\u5F15\u8BBE\u8BA1\u5BF9\u4E8E\u6570\u636E\u5E93\u6027\u80FD\u81F3\u5173\u91CD\u8981\uFF0C\u4F46\u8FC7\u591A\u6216\u4E0D\u6070\u5F53\u7684\u7D22\u5F15\u4E5F\u4F1A\u5E26\u6765\u95EE\u9898\u3002"}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"principles",label:"\u57FA\u672C\u539F\u5219",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7D22\u5F15\u8BBE\u8BA1\u7684\u57FA\u672C\u539F\u5219"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9009\u62E9\u6027\u539F\u5219"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9009\u62E9\u533A\u5206\u5EA6\u9AD8\u7684\u5217\u5EFA\u7ACB\u7D22\u5F15"}),"\n",(0,r.jsxs)(s.li,{children:["\u8BA1\u7B97\u9009\u62E9\u6027\uFF1A",(0,r.jsx)(s.code,{children:"COUNT(DISTINCT column) / COUNT(*)"})]}),"\n",(0,r.jsx)(s.li,{children:"\u9009\u62E9\u6027\u63A5\u8FD11\u7684\u5217\u662F\u7406\u60F3\u7684\u7D22\u5F15\u5217"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6700\u5DE6\u524D\u7F00\u539F\u5219"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u590D\u5408\u7D22\u5F15\u6309\u7167\u5B9A\u4E49\u987A\u5E8F\u4F7F\u7528"}),"\n",(0,r.jsx)(s.li,{children:"\u67E5\u8BE2\u6761\u4EF6\u5E94\u5305\u542B\u7D22\u5F15\u6700\u5DE6\u5217\u624D\u80FD\u4F7F\u7528\u8BE5\u7D22\u5F15"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6700\u5C0F\u5316\u7D22\u5F15\u6570\u91CF"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u907F\u514D\u521B\u5EFA\u91CD\u590D\u6216\u5197\u4F59\u7D22\u5F15"}),"\n",(0,r.jsx)(s.li,{children:"\u5408\u7406\u4F7F\u7528\u590D\u5408\u7D22\u5F15\u51CF\u5C11\u7D22\u5F15\u6570\u91CF"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u907F\u514D\u8FC7\u5BBD\u7684\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u7D22\u5F15\u5217\u4E0D\u8981\u8FC7\u591A\u6216\u8FC7\u5BBD"}),"\n",(0,r.jsx)(s.li,{children:"\u8003\u8651\u4F7F\u7528\u524D\u7F00\u7D22\u5F15\u51CF\u5C11\u7D22\u5F15\u5927\u5C0F"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5E38\u7528\u67E5\u8BE2\u4F18\u5148"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4F18\u5148\u8003\u8651\u9891\u7E41\u67E5\u8BE2\u3001\u6392\u5E8F\u548C\u5206\u7EC4\u7684\u5217"}),"\n",(0,r.jsx)(s.li,{children:"\u6743\u8861\u67E5\u8BE2\u9891\u7387\u548C\u5199\u5165\u5F00\u9500"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8986\u76D6\u7D22\u5F15\u8BBE\u8BA1"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5C3D\u53EF\u80FD\u8BBE\u8BA1\u80FD\u8986\u76D6\u5E38\u7528\u67E5\u8BE2\u7684\u7D22\u5F15"}),"\n",(0,r.jsx)(s.li,{children:"\u51CF\u5C11\u56DE\u8868\u64CD\u4F5C\u63D0\u9AD8\u6027\u80FD"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u8BA1\u7B97\u5217\u9009\u62E9\u6027\nSELECT COUNT(DISTINCT email) / COUNT(*) AS selectivity FROM users;\n\n-- \u68C0\u67E5\u5197\u4F59\u7D22\u5F15\nSELECT * FROM information_schema.STATISTICS \nWHERE table_schema = 'your_database' AND table_name = 'your_table';\n"})})]}),(0,r.jsxs)(c.A,{value:"antipatterns",label:"\u5E38\u89C1\u8BEF\u533A",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7D22\u5F15\u8BBE\u8BA1\u4E2D\u7684\u5E38\u89C1\u8BEF\u533A"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8FC7\u5EA6\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6BCF\u4E2A\u7D22\u5F15\u90FD\u4F1A\u5360\u7528\u5B58\u50A8\u7A7A\u95F4"}),"\n",(0,r.jsx)(s.li,{children:"\u5199\u64CD\u4F5C\u9700\u8981\u7EF4\u62A4\u6240\u6709\u7D22\u5F15"}),"\n",(0,r.jsx)(s.li,{children:"\u4F18\u5316\u5668\u53EF\u80FD\u96BE\u4EE5\u9009\u62E9\u6700\u4F73\u7D22\u5F15"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u91CD\u590D\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u521B\u5EFA\u4E86\u529F\u80FD\u91CD\u53E0\u7684\u7D22\u5F15"}),"\n",(0,r.jsx)(s.li,{children:"\u4F8B\u5982\uFF1A\u5BF9\u540C\u4E00\u5217\u521B\u5EFA\u5355\u72EC\u7D22\u5F15\uFF0C\u4E5F\u5C06\u5176\u5305\u542B\u5728\u7EC4\u5408\u7D22\u5F15\u7684\u9996\u5217"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7D22\u5F15\u4E0D\u5E38\u7528\u5217"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5F88\u5C11\u5728\u67E5\u8BE2\u6761\u4EF6\u4E2D\u4F7F\u7528\u7684\u5217"}),"\n",(0,r.jsx)(s.li,{children:"\u7EF4\u62A4\u6210\u672C\u5927\u4E8E\u67E5\u8BE2\u6536\u76CA"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u65E0\u89C6\u5217\u57FA\u6570"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5728\u57FA\u6570\u5F88\u4F4E\u7684\u5217\u4E0A\u5EFA\u7ACB\u7D22\u5F15"}),"\n",(0,r.jsx)(s.li,{children:"\u4F8B\u5982\uFF1A\u6027\u522B\u5217\u53EA\u6709\u51E0\u4E2A\u4E0D\u540C\u503C\uFF0C\u7D22\u5F15\u6548\u679C\u6709\u9650"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7D22\u5F15\u957F\u5B57\u7B26\u5217"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4E0D\u8003\u8651\u4F7F\u7528\u524D\u7F00\u7D22\u5F15"}),"\n",(0,r.jsx)(s.li,{children:"\u5BFC\u81F4\u7D22\u5F15\u5360\u7528\u8FC7\u591A\u7A7A\u95F4"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5FFD\u89C6\u5199\u6027\u80FD"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u53EA\u5173\u6CE8\u67E5\u8BE2\u6027\u80FD\uFF0C\u5FFD\u7565\u7D22\u5F15\u5BF9\u5199\u5165\u7684\u5F71\u54CD"}),"\n",(0,r.jsx)(s.li,{children:"\u6279\u91CF\u63D2\u5165\u524D\u672A\u8003\u8651\u4E34\u65F6\u7981\u7528\u7D22\u5F15"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6848\u4F8B\u5206\u6790"}),"\uFF1A"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u91CD\u590D\u7D22\u5F15\u793A\u4F8B\uFF08\u5E94\u907F\u514D\uFF09\nCREATE INDEX idx_email ON customers(email);\nCREATE INDEX idx_email_name ON customers(email, name);  -- email\u5217\u91CD\u590D\n\n-- \u66F4\u597D\u7684\u505A\u6CD5\uFF1A\u53EA\u4FDD\u7559\u7EC4\u5408\u7D22\u5F15\nCREATE INDEX idx_email_name ON customers(email, name);\n\n-- \u4F4E\u6548\u7D22\u5F15\u793A\u4F8B\uFF08\u57FA\u6570\u4F4E\uFF09\nCREATE INDEX idx_gender ON employees(gender);  -- \u53EF\u80FD\u53EA\u6709M/F\u4E24\u4E2A\u503C\n\n-- \u66F4\u597D\u7684\u7EC4\u5408\u65B9\u5F0F\nCREATE INDEX idx_dept_gender ON employees(department_id, gender);\n"})})]}),(0,r.jsxs)(c.A,{value:"scenarios",label:"\u573A\u666F\u9009\u62E9",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E0D\u540C\u573A\u666F\u7684\u7D22\u5F15\u9009\u62E9\u7B56\u7565"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"OLTP\u7CFB\u7EDF\uFF08\u5728\u7EBF\u4E8B\u52A1\u5904\u7406\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4F18\u5148\u8003\u8651\u9AD8\u9009\u62E9\u6027\u7684\u5355\u5217\u6216\u5C11\u91CF\u5217\u590D\u5408\u7D22\u5F15"}),"\n",(0,r.jsx)(s.li,{children:"\u4E3B\u952E\u4F7F\u7528\u81EA\u589EID\u4EE5\u907F\u514D\u9875\u5206\u88C2"}),"\n",(0,r.jsx)(s.li,{children:"\u5E73\u8861\u8BFB\u5199\u6027\u80FD\uFF0C\u907F\u514D\u8FC7\u5EA6\u7D22\u5F15"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"OLAP\u7CFB\u7EDF\uFF08\u5728\u7EBF\u5206\u6790\u5904\u7406\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4F18\u5148\u8003\u8651\u652F\u6301\u590D\u6742\u5206\u6790\u67E5\u8BE2\u7684\u5BBD\u7D22\u5F15"}),"\n",(0,r.jsx)(s.li,{children:"\u8986\u76D6\u7D22\u5F15\u8BBE\u8BA1\u51CF\u5C11\u56DE\u8868"}),"\n",(0,r.jsx)(s.li,{children:"\u53EF\u4F7F\u7528\u66F4\u591A\u7684\u7D22\u5F15\u652F\u6301\u5404\u79CD\u5206\u6790\u8DEF\u5F84"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8BFB\u591A\u5199\u5C11\u7CFB\u7EDF"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u53EF\u4EE5\u521B\u5EFA\u66F4\u591A\u7D22\u5F15\u63D0\u5347\u67E5\u8BE2\u901F\u5EA6"}),"\n",(0,r.jsx)(s.li,{children:"\u4F18\u5148\u8003\u8651\u8986\u76D6\u7D22\u5F15\u51CF\u5C11I/O"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5199\u5BC6\u96C6\u7CFB\u7EDF"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u51CF\u5C11\u7D22\u5F15\u6570\u91CF\u964D\u4F4E\u5199\u5165\u5F00\u9500"}),"\n",(0,r.jsx)(s.li,{children:"\u8003\u8651\u4F7F\u7528\u5206\u533A\u8868\u548C\u5206\u533A\u7D22\u5F15"}),"\n",(0,r.jsx)(s.li,{children:"\u6279\u91CF\u5199\u5165\u65F6\u53EF\u4E34\u65F6\u7981\u7528\u7D22\u5F15"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6DF7\u5408\u8D1F\u8F7D\u7CFB\u7EDF"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u627E\u5230\u8BFB\u5199\u5E73\u8861\u70B9"}),"\n",(0,r.jsx)(s.li,{children:"\u4F18\u5148\u4E3A\u6838\u5FC3\u67E5\u8BE2\u8DEF\u5F84\u521B\u5EFA\u7D22\u5F15"}),"\n",(0,r.jsx)(s.li,{children:"\u5B9A\u671F\u5206\u6790\u7D22\u5F15\u4F7F\u7528\u60C5\u51B5\u5E76\u4F18\u5316"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9488\u5BF9\u4E1A\u52A1\u573A\u666F\u7684\u7D22\u5F15\u8BBE\u8BA1\u793A\u4F8B"}),"\uFF1A"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u7535\u5546\u5546\u54C1\u8868\u7D22\u5F15\u8BBE\u8BA1\nCREATE TABLE products (\n    id INT AUTO_INCREMENT PRIMARY KEY,  -- \u805A\u7C07\u7D22\u5F15\n    sku VARCHAR(50) UNIQUE,             -- \u552F\u4E00\u7D22\u5F15\uFF0C\u4EA7\u54C1\u67E5\u627E\n    name VARCHAR(200),\n    brand_id INT,\n    category_id INT,\n    price DECIMAL(10,2),\n    stock INT,\n    status ENUM('active', 'inactive'),\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \n    -- \u5546\u54C1\u6D4F\u89C8/\u641C\u7D22\uFF08\u9AD8\u9891\u8BFB\u53D6\uFF09\n    INDEX idx_category_brand_status (category_id, brand_id, status),\n    \n    -- \u4EF7\u683C\u7B5B\u9009/\u6392\u5E8F\uFF08\u5E38\u7528\u4E8E\u8FC7\u6EE4\u548C\u6392\u5E8F\uFF09\n    INDEX idx_category_price (category_id, price),\n    \n    -- \u5E93\u5B58\u7BA1\u7406\uFF08\u9891\u7E41\u66F4\u65B0\uFF0C\u614E\u91CD\u8003\u8651\uFF09\n    INDEX idx_stock_status (stock, status),\n    \n    -- \u5168\u6587\u641C\u7D22\u9700\u6C42\n    FULLTEXT INDEX ft_name (name)\n);\n"})})]}),(0,r.jsxs)(c.A,{value:"monitoring",label:"\u7D22\u5F15\u76D1\u63A7",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7D22\u5F15\u4F7F\u7528\u60C5\u51B5\u76D1\u63A7\u548C\u8C03\u4F18"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u67E5\u770B\u7D22\u5F15\u4F7F\u7528\u60C5\u51B5"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"MySQL 8.0+\u7684\u7D22\u5F15\u4F7F\u7528\u7EDF\u8BA1"}),"\n",(0,r.jsx)(s.li,{children:"Performance Schema\u4E2D\u7684\u7D22\u5F15\u7EDF\u8BA1"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u6790\u672A\u4F7F\u7528\u7684\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8BC6\u522B\u4ECE\u672A\u4F7F\u7528\u7684\u7D22\u5F15"}),"\n",(0,r.jsx)(s.li,{children:"\u8003\u8651\u5220\u9664\u957F\u671F\u672A\u4F7F\u7528\u7684\u7D22\u5F15"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u6790\u67E5\u8BE2\u6267\u884C\u8BA1\u5212"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528EXPLAIN\u5206\u6790\u7D22\u5F15\u4F7F\u7528"}),"\n",(0,r.jsx)(s.li,{children:"\u786E\u4FDD\u5173\u952E\u67E5\u8BE2\u6B63\u786E\u4F7F\u7528\u7D22\u5F15"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7D22\u5F15\u788E\u7247\u76D1\u63A7\u548C\u4F18\u5316"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u76D1\u63A7\u7D22\u5F15\u788E\u7247\u60C5\u51B5"}),"\n",(0,r.jsx)(s.li,{children:"\u5B9A\u671F\u91CD\u5EFA\u9AD8\u788E\u7247\u7387\u7684\u7D22\u5F15"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- MySQL 8.0+ \u67E5\u770B\u7D22\u5F15\u4F7F\u7528\u60C5\u51B5\nSELECT * FROM performance_schema.table_io_waits_summary_by_index_usage\nWHERE object_schema = 'your_database'\nORDER BY count_star DESC;\n\n-- \u67E5\u627E\u672A\u4F7F\u7528\u7684\u7D22\u5F15\nSELECT * FROM performance_schema.table_io_waits_summary_by_index_usage\nWHERE index_name IS NOT NULL\nAND count_star = 0;\n\n-- \u5206\u6790\u8868\u548C\u7D22\u5F15\u788E\u7247\nANALYZE TABLE orders;\nSHOW TABLE STATUS LIKE 'orders';\n\n-- \u91CD\u5EFA\u7D22\u5F15\u6216\u4F18\u5316\u8868\nALTER TABLE orders DROP INDEX idx_name, ADD INDEX idx_name (name);\n-- \u6216\nOPTIMIZE TABLE orders;\n"})}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7D22\u5F15\u76D1\u63A7\u6700\u4F73\u5B9E\u8DF5"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"\u5B9A\u671F\u8FD0\u884C\u7D22\u5F15\u4F7F\u7528\u5206\u6790"}),"\n",(0,r.jsx)(s.li,{children:"\u57FA\u4E8E\u771F\u5B9E\u8D1F\u8F7D\u6D4B\u8BD5\u7D22\u5F15\u6027\u80FD"}),"\n",(0,r.jsx)(s.li,{children:"\u9010\u6B65\u8FDB\u884C\u7D22\u5F15\u53D8\u66F4\uFF0C\u5E76\u76D1\u63A7\u6548\u679C"}),"\n",(0,r.jsx)(s.li,{children:"\u5BF9\u5386\u53F2\u6570\u636E\u8FDB\u884C\u7D22\u5F15\u4F7F\u7528\u8D8B\u52BF\u5206\u6790"}),"\n",(0,r.jsx)(s.li,{children:"\u8BBE\u7F6E\u7D22\u5F15\u76D1\u63A7\u544A\u8B66\uFF0C\u5982\u672A\u4F7F\u7528\u7D22\u5F15\u7684\u67E5\u8BE2\u5360\u6BD4\u8FC7\u9AD8"}),"\n"]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"24-\u7D22\u5F15\u4F18\u5316\u5B9E\u8DF5",children:"2.4 \u7D22\u5F15\u4F18\u5316\u5B9E\u8DF5"}),"\n",(0,r.jsx)(s.p,{children:"\u5C06\u7406\u8BBA\u5E94\u7528\u5230\u5B9E\u8DF5\u4E2D\uFF0C\u8FD9\u91CC\u63D0\u4F9B\u4E00\u4E9B\u5E38\u89C1\u7684\u7D22\u5F15\u4F18\u5316\u6280\u672F\u548C\u6848\u4F8B\u3002"}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"query-optimization",label:"\u67E5\u8BE2\u4F18\u5316",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5229\u7528\u7D22\u5F15\u4F18\u5316\u4E0D\u540C\u7C7B\u578B\u7684\u67E5\u8BE2"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7B49\u503C\u67E5\u8BE2\u4F18\u5316"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u9002\u5408\u5355\u5217\u7D22\u5F15\nCREATE INDEX idx_email ON users(email);\nSELECT * FROM users WHERE email = 'user@example.com';\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8303\u56F4\u67E5\u8BE2\u4F18\u5316"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u8303\u56F4\u67E5\u8BE2\u7D22\u5F15\nCREATE INDEX idx_created_at ON orders(created_at);\nSELECT * FROM orders WHERE created_at BETWEEN '2023-01-01' AND '2023-01-31';\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6392\u5E8F\u4F18\u5316"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u652F\u6301\u6392\u5E8F\u7684\u7D22\u5F15\nCREATE INDEX idx_user_created ON posts(user_id, created_at);\nSELECT * FROM posts WHERE user_id = 100 ORDER BY created_at DESC LIMIT 10;\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"JOIN\u4F18\u5316"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4E3AJOIN\u6761\u4EF6\u521B\u5EFA\u7D22\u5F15\nCREATE INDEX idx_customer_id ON orders(customer_id);\nSELECT o.*, c.name FROM orders o \nJOIN customers c ON o.customer_id = c.id;\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u7EC4\u4F18\u5316"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u652F\u6301GROUP BY\u7684\u7D22\u5F15\nCREATE INDEX idx_status_date ON orders(status, order_date);\nSELECT status, COUNT(*), SUM(amount) \nFROM orders \nGROUP BY status;\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8986\u76D6\u7D22\u5F15\u4F18\u5316"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFA\u8986\u76D6\u7D22\u5F15\uFF0C\u5305\u542B\u67E5\u8BE2\u6240\u9700\u7684\u6240\u6709\u5217\nCREATE INDEX idx_cover_all ON orders(customer_id, order_date, status, amount);\n\n-- \u53EF\u76F4\u63A5\u4ECE\u7D22\u5F15\u83B7\u53D6\u6240\u6709\u6570\u636E\uFF08\u65E0\u9700\u56DE\u8868\uFF09\nSELECT customer_id, order_date, status, amount \nFROM orders \nWHERE customer_id = 100;\n"})}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"advanced-techniques",label:"\u9AD8\u7EA7\u6280\u5DE7",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E00\u4E9B\u9AD8\u7EA7\u7D22\u5F15\u4F18\u5316\u6280\u672F"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u524D\u7F00\u7D22\u5F15\u4F18\u5316"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5206\u6790\u6700\u4F18\u524D\u7F00\u957F\u5EA6\nSELECT COUNT(DISTINCT LEFT(email, 10)) / COUNT(*) AS selectivity10,\n       COUNT(DISTINCT LEFT(email, 15)) / COUNT(*) AS selectivity15,\n       COUNT(DISTINCT LEFT(email, 20)) / COUNT(*) AS selectivity20\nFROM users;\n\n-- \u521B\u5EFA\u6700\u4F18\u524D\u7F00\u7D22\u5F15\nCREATE INDEX idx_email_prefix ON users(email(15));\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F7F\u7528\u51FD\u6570\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- MySQL 8.0+\u51FD\u6570\u7D22\u5F15\nCREATE INDEX idx_lower_email ON users((LOWER(email)));\n\n-- \u4F7F\u7528\u51FD\u6570\u7D22\u5F15\u7684\u67E5\u8BE2\nSELECT * FROM users WHERE LOWER(email) = 'john.doe@example.com';\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7D22\u5F15\u63D0\u793A\u4F7F\u7528"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5F3A\u5236\u4F7F\u7528\u7279\u5B9A\u7D22\u5F15\nSELECT * FROM products USE INDEX (idx_category_price)\nWHERE category_id = 5 AND price > 100;\n\n-- \u5FFD\u7565\u7279\u5B9A\u7D22\u5F15\nSELECT * FROM products IGNORE INDEX (idx_brand)\nWHERE brand_id = 10;\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7D22\u5F15\u5408\u5E76\u4F18\u5316"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u7D22\u5F15\u5408\u5E76\u793A\u4F8B\uFF08MySQL\u53EF\u80FD\u4F7F\u7528\u591A\u4E2A\u5355\u5217\u7D22\u5F15\u7EC4\u5408\uFF09\nCREATE INDEX idx_brand ON products(brand_id);\nCREATE INDEX idx_category ON products(category_id);\n\n-- \u53EF\u80FD\u4F7F\u7528\u7D22\u5F15\u5408\u5E76\nSELECT * FROM products \nWHERE brand_id = 5 AND category_id = 10;\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u90E8\u5206\u7D22\u5F15\uFF08MySQL 8.0+\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4EC5\u4E3A\u6D3B\u8DC3\u4EA7\u54C1\u521B\u5EFA\u7D22\u5F15\nCREATE INDEX idx_active_products ON products(name)\nWHERE status = 'active';\n"})}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"case-studies",label:"\u6848\u4F8B\u5206\u6790",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B9E\u9645\u7D22\u5F15\u4F18\u5316\u6848\u4F8B\u5206\u6790"}),"\uFF1A"]}),(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"\u6848\u4F8B1\uFF1A\u7535\u5546\u8BA2\u5355\u67E5\u8BE2\u4F18\u5316"})}),(0,r.jsx)(s.p,{children:"\u95EE\u9898\uFF1A\u8BA2\u5355\u67E5\u8BE2\u9875\u9762\u52A0\u8F7D\u7F13\u6162\uFF0C\u7279\u522B\u662F\u6309\u72B6\u6001\u548C\u65E5\u671F\u8FC7\u6EE4\u65F6\u3002"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u539F\u59CB\u67E5\u8BE2\uFF08\u6267\u884C\u6162\uFF09\nSELECT * FROM orders \nWHERE customer_id = 10003 \n  AND status = 'shipped' \n  AND order_date BETWEEN '2023-01-01' AND '2023-03-31'\nORDER BY order_date DESC\nLIMIT 20;\n\n-- EXPLAIN\u663E\u793A\u5168\u8868\u626B\u63CF\u6216\u4F7F\u7528\u4E86\u6B21\u4F18\u7D22\u5F15\n"})}),(0,r.jsx)(s.p,{children:"\u4F18\u5316\u65B9\u6848\uFF1A"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFA\u9488\u5BF9\u6027\u7D22\u5F15\nCREATE INDEX idx_customer_status_date ON orders(customer_id, status, order_date);\n\n-- \u67E5\u8BE2\u6027\u80FD\u663E\u8457\u63D0\u5347\n-- EXPLAIN\u663E\u793A\u4F7F\u7528\u4E86\u65B0\u7D22\u5F15\uFF0C\u5E76\u4E14\u7B26\u5408ORDER BY\u6392\u5E8F\n"})}),(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"\u6848\u4F8B2\uFF1A\u65E5\u5FD7\u8868\u67E5\u8BE2\u4F18\u5316"})}),(0,r.jsx)(s.p,{children:"\u95EE\u9898\uFF1A\u5927\u578B\u65E5\u5FD7\u8868\uFF08\u4E0A\u4EBF\u884C\uFF09\u7684\u6309\u65F6\u95F4\u548C\u7EA7\u522B\u67E5\u8BE2\u975E\u5E38\u6162\u3002"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u65E5\u5FD7\u8868\u7ED3\u6784\nCREATE TABLE logs (\n    id BIGINT AUTO_INCREMENT PRIMARY KEY,\n    app_id INT,\n    level ENUM('debug', 'info', 'warn', 'error', 'fatal'),\n    message TEXT,\n    created_at TIMESTAMP\n);\n\n-- \u6162\u67E5\u8BE2\nSELECT * FROM logs \nWHERE app_id = 5 \n  AND level IN ('error', 'fatal')\n  AND created_at > DATE_SUB(NOW(), INTERVAL 1 DAY)\nORDER BY created_at DESC\nLIMIT 100;\n"})}),(0,r.jsx)(s.p,{children:"\u4F18\u5316\u65B9\u6848\uFF1A"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFA\u4F18\u5316\u7D22\u5F15\nCREATE INDEX idx_app_level_date ON logs(app_id, level, created_at);\n\n-- \u8003\u8651\u5206\u533A\u4F18\u5316\nALTER TABLE logs\nPARTITION BY RANGE (TO_DAYS(created_at)) (\n    PARTITION p202301 VALUES LESS THAN (TO_DAYS('2023-02-01')),\n    PARTITION p202302 VALUES LESS THAN (TO_DAYS('2023-03-01')),\n    PARTITION p202303 VALUES LESS THAN (TO_DAYS('2023-04-01'))\n    -- \u66F4\u591A\u5206\u533A...\n);\n"})}),(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"\u6848\u4F8B3\uFF1A\u6A21\u7CCA\u67E5\u8BE2\u4F18\u5316"})}),(0,r.jsx)(s.p,{children:"\u95EE\u9898\uFF1A\u4EA7\u54C1\u641C\u7D22\u4E2D\u7684LIKE\u67E5\u8BE2\u6027\u80FD\u5F88\u5DEE\u3002"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u641C\u7D22\u67E5\u8BE2\uFF08\u975E\u5E38\u6162\uFF09\nSELECT * FROM products \nWHERE name LIKE '%keyword%';  -- \u65E0\u6CD5\u4F7F\u7528\u4F20\u7EDF\u7D22\u5F15\n"})}),(0,r.jsx)(s.p,{children:"\u4F18\u5316\u65B9\u6848\uFF1A"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5168\u6587\u7D22\u5F15\u89E3\u51B3\u65B9\u6848\nCREATE FULLTEXT INDEX ft_name_description \nON products(name, description);\n\n-- \u4F7F\u7528\u5168\u6587\u68C0\u7D22\u66FF\u4EE3LIKE\nSELECT * FROM products \nWHERE MATCH(name, description) AGAINST('keyword' IN NATURAL LANGUAGE MODE);\n"})})]}),(0,r.jsxs)(c.A,{value:"common-issues",label:"\u5E38\u89C1\u95EE\u9898",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7D22\u5F15\u4F7F\u7528\u4E2D\u7684\u5E38\u89C1\u95EE\u9898\u53CA\u89E3\u51B3\u65B9\u6848"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7D22\u5F15\u5931\u6548\u95EE\u9898"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"\u7D22\u5F15\u5B57\u6BB5\u4F7F\u7528\u51FD\u6570"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u7D22\u5F15\u5931\u6548\u793A\u4F8B\nSELECT * FROM users WHERE YEAR(created_at) = 2023;  -- \u4F7F\u7528\u4E86YEAR\u51FD\u6570\n\n-- \u4F18\u5316\u65B9\u6848\nSELECT * FROM users \nWHERE created_at >= '2023-01-01' AND created_at < '2024-01-01';\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"\u9690\u5F0F\u7C7B\u578B\u8F6C\u6362"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFA\u7D22\u5F15\nCREATE INDEX idx_mobile ON users(mobile);\n\n-- \u7D22\u5F15\u5931\u6548\u67E5\u8BE2\uFF08\u9690\u5F0F\u7C7B\u578B\u8F6C\u6362\uFF09\nSELECT * FROM users WHERE mobile = 12345678901;  -- mobile\u662F\u5B57\u7B26\u4E32\u7C7B\u578B\n\n-- \u6B63\u786E\u505A\u6CD5\nSELECT * FROM users WHERE mobile = '12345678901';\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"\u4F7F\u7528\u4E0D\u7B49\u4E8E\u6216NOT\u6761\u4EF6"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u53EF\u80FD\u4E0D\u4F7F\u7528\u7D22\u5F15\u7684\u67E5\u8BE2\nSELECT * FROM products WHERE category_id != 5;\nSELECT * FROM orders WHERE status NOT IN ('completed', 'shipped');\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u56DE\u8868\u95EE\u9898\u4E0E\u4F18\u5316"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u9700\u8981\u56DE\u8868\u7684\u67E5\u8BE2\nSELECT * FROM products WHERE category_id = 10;\n\n-- \u4F7F\u7528\u8986\u76D6\u7D22\u5F15\u907F\u514D\u56DE\u8868\nCREATE INDEX idx_category_cover ON products(category_id, name, price);\n\n-- \u73B0\u5728\u4E0D\u9700\u8981\u56DE\u8868\nSELECT name, price FROM products WHERE category_id = 10;\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u957F\u5EA6\u9650\u5236\u95EE\u9898"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u53EF\u80FD\u8D85\u51FA\u7D22\u5F15\u957F\u5EA6\u9650\u5236\nCREATE INDEX idx_long_text ON articles(content);  -- \u53EF\u80FD\u4F1A\u5931\u8D25\n\n-- \u89E3\u51B3\u65B9\u6848\nCREATE INDEX idx_content_prefix ON articles(content(200));\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9009\u62E9\u6027\u4E0D\u8DB3\u95EE\u9898"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4F4E\u9009\u62E9\u6027\u5217\u7684\u7D22\u5F15\u6548\u679C\u6709\u9650\nCREATE INDEX idx_status ON orders(status);  -- \u5982\u679Cstatus\u53EA\u6709\u5C11\u6570\u51E0\u4E2A\u503C\n\n-- \u6539\u8FDB\u65B9\u6848\uFF1A\u590D\u5408\u7D22\u5F15\nCREATE INDEX idx_status_date ON orders(status, order_date);\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8FC7\u591A\u7D22\u5F15\u5BFC\u81F4\u5199\u5165\u6027\u80FD\u4E0B\u964D"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u68C0\u67E5\u8868\u7684\u6240\u6709\u7D22\u5F15\nSHOW INDEX FROM orders;\n\n-- \u5220\u9664\u4E0D\u5FC5\u8981\u7684\u7D22\u5F15\nALTER TABLE orders DROP INDEX idx_rarely_used;\n"})}),"\n"]}),"\n"]})]})]}),"\n",(0,r.jsx)(s.h2,{id:"3-\u4E8B\u52A1\u4E0E\u9501\u673A\u5236",children:"3. \u4E8B\u52A1\u4E0E\u9501\u673A\u5236"}),"\n",(0,r.jsx)(s.p,{children:"\u4E8B\u52A1\u548C\u9501\u673A\u5236\u662FMySQL\u6570\u636E\u5E93\u4FDD\u8BC1\u6570\u636E\u4E00\u81F4\u6027\u548C\u5E76\u53D1\u63A7\u5236\u7684\u6838\u5FC3\u673A\u5236\uFF0C\u7279\u522B\u662F\u5728InnoDB\u5F15\u64CE\u4E2D\uFF0C\u5B83\u4EEC\u5171\u540C\u5DE5\u4F5C\u4EE5\u63D0\u4F9B\u53EF\u9760\u7684\u6570\u636E\u5904\u7406\u80FD\u529B\u3002"}),"\n",(0,r.jsx)(s.mermaid,{value:"graph TD\n    A[MySQL\u4E8B\u52A1\u4E0E\u9501] --\x3e B[\u4E8B\u52A1\u7279\u6027]\n    A --\x3e C[\u9694\u79BB\u7EA7\u522B]\n    A --\x3e D[\u9501\u673A\u5236]\n    \n    B --\x3e B1[\u539F\u5B50\u6027<br>Atomicity]\n    B --\x3e B2[\u4E00\u81F4\u6027<br>Consistency]\n    B --\x3e B3[\u9694\u79BB\u6027<br>Isolation]\n    B --\x3e B4[\u6301\u4E45\u6027<br>Durability]\n    \n    C --\x3e C1[\u8BFB\u672A\u63D0\u4EA4<br>Read Uncommitted]\n    C --\x3e C2[\u8BFB\u5DF2\u63D0\u4EA4<br>Read Committed]\n    C --\x3e C3[\u53EF\u91CD\u590D\u8BFB<br>Repeatable Read]\n    C --\x3e C4[\u53EF\u4E32\u884C\u5316<br>Serializable]\n    \n    D --\x3e D1[\u5171\u4EAB\u9501<br>S Lock]\n    D --\x3e D2[\u6392\u4ED6\u9501<br>X Lock]\n    D --\x3e D3[\u610F\u5411\u9501<br>Intention Lock]\n    D --\x3e D4[\u7279\u6B8A\u9501<br>\u7279\u5B9A\u5E94\u7528]"}),"\n",(0,r.jsx)(s.h3,{id:"31-\u4E8B\u52A1acid\u7279\u6027",children:"3.1 \u4E8B\u52A1ACID\u7279\u6027"}),"\n",(0,r.jsx)(s.p,{children:"\u4E8B\u52A1\u662F\u4E00\u7CFB\u5217\u64CD\u4F5C\u7684\u96C6\u5408\uFF0C\u5B83\u4EEC\u8981\u4E48\u5168\u90E8\u6267\u884C\u6210\u529F\uFF0C\u8981\u4E48\u5168\u90E8\u56DE\u6EDA\uFF0C\u786E\u4FDD\u6570\u636E\u5E93\u4ECE\u4E00\u4E2A\u4E00\u81F4\u6027\u72B6\u6001\u8F6C\u53D8\u5230\u53E6\u4E00\u4E2A\u4E00\u81F4\u6027\u72B6\u6001\u3002"}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"atomicity",label:"\u539F\u5B50\u6027(Atomicity)",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E8B\u52A1\u7684\u539F\u5B50\u6027\u786E\u4FDD\u4E8B\u52A1\u4E2D\u7684\u6240\u6709\u64CD\u4F5C\u4F5C\u4E3A\u4E00\u4E2A\u6574\u4F53\u6267\u884C"}),"\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5168\u90E8\u6210\u529F\u6216\u5168\u90E8\u5931\u8D25"}),"\uFF1A\u4E8B\u52A1\u4E2D\u7684\u6240\u6709\u64CD\u4F5C\u8981\u4E48\u5168\u90E8\u6267\u884C\u6210\u529F\uFF0C\u8981\u4E48\u5168\u90E8\u4E0D\u6267\u884C"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4E0D\u53EF\u5206\u5272"}),"\uFF1A\u4E8B\u52A1\u4F5C\u4E3A\u4E00\u4E2A\u5DE5\u4F5C\u5355\u5143\u4E0D\u53EF\u518D\u5206\u5272"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u56DE\u6EDA\u673A\u5236"}),"\uFF1A\u5F53\u4E8B\u52A1\u5931\u8D25\u65F6\uFF0C\u80FD\u591F\u56DE\u6EDA\u5230\u4E8B\u52A1\u5F00\u59CB\u524D\u7684\u72B6\u6001"]}),"\n"]}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"InnoDB\u4E2D\u7684\u539F\u5B50\u6027\u5B9E\u73B0"}),"\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528undo\u65E5\u5FD7\u8BB0\u5F55\u4FEE\u6539\u524D\u7684\u6570\u636E"}),"\n",(0,r.jsx)(s.li,{children:"\u4E8B\u52A1\u5931\u8D25\u65F6\uFF0C\u901A\u8FC7undo\u65E5\u5FD7\u64A4\u9500\u66F4\u6539"}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u539F\u5B50\u6027\u793A\u4F8B\nSTART TRANSACTION;\n    UPDATE accounts SET balance = balance - 100 WHERE id = 1; -- \u4ECE\u8D26\u62371\u6263\u6B3E\n    UPDATE accounts SET balance = balance + 100 WHERE id = 2; -- \u8D26\u62372\u6536\u6B3E\nCOMMIT;\n-- \u5982\u679C\u4EFB\u4E00\u6B65\u9AA4\u5931\u8D25\uFF0C\u6574\u4E2A\u8F6C\u8D26\u64CD\u4F5C\u5C06\u88AB\u56DE\u6EDA\n"})})]}),(0,r.jsxs)(c.A,{value:"consistency",label:"\u4E00\u81F4\u6027(Consistency)",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E00\u81F4\u6027\u786E\u4FDD\u6570\u636E\u5E93\u4ECE\u4E00\u4E2A\u4E00\u81F4\u6027\u72B6\u6001\u8F6C\u53D8\u5230\u53E6\u4E00\u4E2A\u4E00\u81F4\u6027\u72B6\u6001"}),"\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5B8C\u6574\u6027\u7EA6\u675F"}),"\uFF1A\u4E8B\u52A1\u6267\u884C\u524D\u540E\u5FC5\u987B\u6EE1\u8DB3\u6240\u6709\u6570\u636E\u5E93\u5B9A\u4E49\u7684\u5B8C\u6574\u6027\u7EA6\u675F"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4E1A\u52A1\u89C4\u5219"}),"\uFF1A\u4E8B\u52A1\u5FC5\u987B\u9075\u5B88\u5E94\u7528\u7A0B\u5E8F\u5B9A\u4E49\u7684\u4E1A\u52A1\u89C4\u5219"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6570\u636E\u6709\u6548\u6027"}),"\uFF1A\u4E8B\u52A1\u7684\u7ED3\u679C\u5FC5\u987B\u4FDD\u6301\u6570\u636E\u5E93\u7684\u6709\u6548\u6027"]}),"\n"]}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E00\u81F4\u6027\u7EF4\u62A4\u65B9\u5F0F"}),"\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u901A\u8FC7\u7EA6\u675F(\u4E3B\u952E\u3001\u5916\u952E\u3001\u552F\u4E00\u6027\u3001\u68C0\u67E5\u7EA6\u675F\u7B49)"}),"\n",(0,r.jsx)(s.li,{children:"\u901A\u8FC7\u89E6\u53D1\u5668"}),"\n",(0,r.jsx)(s.li,{children:"\u901A\u8FC7\u5E94\u7528\u7A0B\u5E8F\u903B\u8F91"}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4E00\u81F4\u6027\u7EA6\u675F\u793A\u4F8B\nCREATE TABLE accounts (\n    id INT PRIMARY KEY,\n    balance DECIMAL(10,2) NOT NULL,\n    CONSTRAINT check_positive_balance CHECK (balance >= 0)\n);\n\n-- \u4EE5\u4E0B\u4E8B\u52A1\u5C06\u4F1A\u5931\u8D25\uFF0C\u56E0\u4E3A\u8FDD\u53CD\u4E86CHECK\u7EA6\u675F\nSTART TRANSACTION;\n    UPDATE accounts SET balance = -100 WHERE id = 1; -- \u8FDD\u53CD\u975E\u8D1F\u4F59\u989D\u7EA6\u675F\nCOMMIT;\n"})})]}),(0,r.jsxs)(c.A,{value:"isolation",label:"\u9694\u79BB\u6027(Isolation)",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9694\u79BB\u6027\u786E\u4FDD\u5E76\u53D1\u4E8B\u52A1\u4E4B\u95F4\u4E92\u4E0D\u5E72\u6270"}),"\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5E76\u53D1\u63A7\u5236"}),"\uFF1A\u591A\u4E2A\u4E8B\u52A1\u540C\u65F6\u6267\u884C\u65F6\u4E0D\u4F1A\u4E92\u76F8\u5F71\u54CD"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u9694\u79BB\u7EA7\u522B"}),"\uFF1A\u901A\u8FC7\u4E0D\u540C\u7684\u9694\u79BB\u7EA7\u522B\u63A7\u5236\u4E8B\u52A1\u95F4\u7684\u53EF\u89C1\u6027"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u907F\u514D\u5E76\u53D1\u95EE\u9898"}),"\uFF1A\u9632\u6B62\u810F\u8BFB\u3001\u4E0D\u53EF\u91CD\u590D\u8BFB\u548C\u5E7B\u8BFB\u7B49\u95EE\u9898"]}),"\n"]}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"InnoDB\u4E2D\u7684\u9694\u79BB\u6027\u5B9E\u73B0"}),"\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u57FA\u4E8EMVCC(\u591A\u7248\u672C\u5E76\u53D1\u63A7\u5236)\u6280\u672F"}),"\n",(0,r.jsx)(s.li,{children:"\u9501\u673A\u5236(\u884C\u9501\u3001\u8868\u9501\u3001\u610F\u5411\u9501\u7B49)"}),"\n",(0,r.jsx)(s.li,{children:"\u652F\u6301\u56DB\u79CD\u6807\u51C6\u9694\u79BB\u7EA7\u522B"}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u8BBE\u7F6E\u4F1A\u8BDD\u9694\u79BB\u7EA7\u522B\nSET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;\n\n-- \u67E5\u770B\u5F53\u524D\u9694\u79BB\u7EA7\u522B\nSELECT @@transaction_isolation;\n"})})]}),(0,r.jsxs)(c.A,{value:"durability",label:"\u6301\u4E45\u6027(Durability)",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6301\u4E45\u6027\u786E\u4FDD\u4E00\u65E6\u4E8B\u52A1\u63D0\u4EA4\uFF0C\u5176\u7ED3\u679C\u5C06\u6C38\u4E45\u4FDD\u5B58\u5728\u6570\u636E\u5E93\u4E2D"}),"\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6C38\u4E45\u4FDD\u5B58"}),"\uFF1A\u5373\u4F7F\u7CFB\u7EDF\u5D29\u6E83\u6216\u65AD\u7535\uFF0C\u5DF2\u63D0\u4EA4\u7684\u4E8B\u52A1\u4E5F\u4E0D\u4F1A\u4E22\u5931"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5199\u5165\u5B58\u50A8"}),"\uFF1A\u63D0\u4EA4\u7684\u6570\u636E\u88AB\u7269\u7406\u5199\u5165\u6301\u4E45\u6027\u5B58\u50A8\u4ECB\u8D28"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6545\u969C\u6062\u590D"}),"\uFF1A\u7CFB\u7EDF\u91CD\u542F\u540E\u80FD\u591F\u6062\u590D\u5230\u6B63\u786E\u7684\u72B6\u6001"]}),"\n"]}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"InnoDB\u4E2D\u7684\u6301\u4E45\u6027\u5B9E\u73B0"}),"\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u91CD\u505A\u65E5\u5FD7(redo log)\uFF1A\u8BB0\u5F55\u4E8B\u52A1\u7684\u6240\u6709\u4FEE\u6539\u64CD\u4F5C"}),"\n",(0,r.jsx)(s.li,{children:"\u53CC\u5199\u7F13\u51B2(doublewrite buffer)\uFF1A\u9632\u6B62\u90E8\u5206\u9875\u5199\u5165\u5BFC\u81F4\u7684\u6570\u636E\u635F\u574F"}),"\n",(0,r.jsx)(s.li,{children:"\u65E5\u5FD7\u5148\u884C(WAL, Write-Ahead Logging)\uFF1A\u786E\u4FDD\u65E5\u5FD7\u5148\u4E8E\u6570\u636E\u6301\u4E45\u5316"}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5F71\u54CD\u6301\u4E45\u6027\u7684\u914D\u7F6E\u53C2\u6570\nSHOW VARIABLES LIKE 'innodb_flush_log_at_trx_commit';\n-- 1 = \u6BCF\u6B21\u4E8B\u52A1\u63D0\u4EA4\u90FD\u5199\u5165\u5E76\u5237\u65B0\u65E5\u5FD7(\u6700\u5B89\u5168\uFF0C\u9ED8\u8BA4)\n-- 0 = \u6BCF\u79D2\u5199\u5165\u5E76\u5237\u65B0\u65E5\u5FD7(\u6027\u80FD\u6700\u597D\uFF0C\u4F46\u53EF\u80FD\u4E22\u59311\u79D2\u6570\u636E)\n-- 2 = \u6BCF\u6B21\u63D0\u4EA4\u5199\u5165\uFF0C\u4F46\u6BCF\u79D2\u624D\u5237\u65B0(\u6298\u4E2D\u65B9\u6848)\n\n-- \u53CC\u5199\u7F13\u51B2\u914D\u7F6E\nSHOW VARIABLES LIKE 'innodb_doublewrite';\n"})})]})]}),"\n",(0,r.jsx)(s.h3,{id:"32-\u4E8B\u52A1\u9694\u79BB\u7EA7\u522B",children:"3.2 \u4E8B\u52A1\u9694\u79BB\u7EA7\u522B"}),"\n",(0,r.jsx)(s.p,{children:"\u4E8B\u52A1\u9694\u79BB\u7EA7\u522B\u5B9A\u4E49\u4E86\u4E00\u4E2A\u4E8B\u52A1\u53EF\u80FD\u53D7\u5176\u4ED6\u5E76\u53D1\u4E8B\u52A1\u5F71\u54CD\u7684\u7A0B\u5EA6\uFF0C\u4E0D\u540C\u7EA7\u522B\u63D0\u4F9B\u4E0D\u540C\u7684\u4FDD\u62A4\uFF0C\u4E5F\u6709\u4E0D\u540C\u7684\u6027\u80FD\u7279\u70B9\u3002"}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"isolation-levels",label:"\u56DB\u79CD\u9694\u79BB\u7EA7\u522B",children:[(0,r.jsx)(s.p,{children:"MySQL\u652F\u6301SQL\u6807\u51C6\u5B9A\u4E49\u7684\u56DB\u79CD\u9694\u79BB\u7EA7\u522B\uFF0C\u6BCF\u4E2A\u7EA7\u522B\u89E3\u51B3\u7279\u5B9A\u7684\u5E76\u53D1\u95EE\u9898\uFF1A"}),(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u9694\u79BB\u7EA7\u522B"}),(0,r.jsx)(s.th,{children:"\u810F\u8BFB"}),(0,r.jsx)(s.th,{children:"\u4E0D\u53EF\u91CD\u590D\u8BFB"}),(0,r.jsx)(s.th,{children:"\u5E7B\u8BFB"}),(0,r.jsx)(s.th,{children:"\u6027\u80FD\u5F71\u54CD"}),(0,r.jsx)(s.th,{children:"\u9501\u5B9E\u73B0"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsxs)(s.td,{children:[(0,r.jsx)(s.strong,{children:"\u8BFB\u672A\u63D0\u4EA4"}),(0,r.jsx)("br",{}),"(Read Uncommitted)"]}),(0,r.jsx)(s.td,{children:"\u53EF\u80FD"}),(0,r.jsx)(s.td,{children:"\u53EF\u80FD"}),(0,r.jsx)(s.td,{children:"\u53EF\u80FD"}),(0,r.jsx)(s.td,{children:"\u6700\u5C0F"}),(0,r.jsx)(s.td,{children:"\u51E0\u4E4E\u65E0\u9501"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsxs)(s.td,{children:[(0,r.jsx)(s.strong,{children:"\u8BFB\u5DF2\u63D0\u4EA4"}),(0,r.jsx)("br",{}),"(Read Committed)"]}),(0,r.jsx)(s.td,{children:"\u4E0D\u53EF\u80FD"}),(0,r.jsx)(s.td,{children:"\u53EF\u80FD"}),(0,r.jsx)(s.td,{children:"\u53EF\u80FD"}),(0,r.jsx)(s.td,{children:"\u8F83\u5C0F"}),(0,r.jsx)(s.td,{children:"\u8BB0\u5F55\u9501"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsxs)(s.td,{children:[(0,r.jsx)(s.strong,{children:"\u53EF\u91CD\u590D\u8BFB"}),(0,r.jsx)("br",{}),"(Repeatable Read)"]}),(0,r.jsx)(s.td,{children:"\u4E0D\u53EF\u80FD"}),(0,r.jsx)(s.td,{children:"\u4E0D\u53EF\u80FD"}),(0,r.jsxs)(s.td,{children:["\u53EF\u80FD",(0,r.jsx)("br",{}),"(InnoDB\u4E2D\u4E0D\u53EF\u80FD)"]}),(0,r.jsx)(s.td,{children:"\u4E2D\u7B49"}),(0,r.jsx)(s.td,{children:"\u8BB0\u5F55\u9501+\u95F4\u9699\u9501"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsxs)(s.td,{children:[(0,r.jsx)(s.strong,{children:"\u53EF\u4E32\u884C\u5316"}),(0,r.jsx)("br",{}),"(Serializable)"]}),(0,r.jsx)(s.td,{children:"\u4E0D\u53EF\u80FD"}),(0,r.jsx)(s.td,{children:"\u4E0D\u53EF\u80FD"}),(0,r.jsx)(s.td,{children:"\u4E0D\u53EF\u80FD"}),(0,r.jsx)(s.td,{children:"\u6700\u5927"}),(0,r.jsx)(s.td,{children:"\u5168\u8868\u9501\u5B9A"})]})]})]}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"InnoDB\u7684\u9ED8\u8BA4\u9694\u79BB\u7EA7\u522B\u662F\u53EF\u91CD\u590D\u8BFB(REPEATABLE READ)"}),"\uFF0C\u4F46\u5B83\u901A\u8FC7Next-Key Locks\u6269\u5C55\u5B9E\u73B0\uFF0C\u5B9E\u9645\u4E0A\u4E5F\u9632\u6B62\u4E86\u5E7B\u8BFB\u3002"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u8BBE\u7F6E\u7CFB\u7EDF\u9ED8\u8BA4\u9694\u79BB\u7EA7\u522B\nSET GLOBAL TRANSACTION ISOLATION LEVEL READ COMMITTED;\n\n-- \u8BBE\u7F6E\u5F53\u524D\u4F1A\u8BDD\u9694\u79BB\u7EA7\u522B\nSET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;\n\n-- \u67E5\u770B\u5F53\u524D\u9694\u79BB\u7EA7\u522B\nSELECT @@global.transaction_isolation, @@session.transaction_isolation;\n"})})]}),(0,r.jsxs)(c.A,{value:"concurrency-issues",label:"\u5E76\u53D1\u95EE\u9898",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E8B\u52A1\u9694\u79BB\u7EA7\u522B\u65E8\u5728\u89E3\u51B3\u4E09\u7C7B\u4E3B\u8981\u7684\u5E76\u53D1\u95EE\u9898"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u810F\u8BFB(Dirty Read)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5B9A\u4E49\uFF1A\u4E00\u4E2A\u4E8B\u52A1\u8BFB\u53D6\u4E86\u53E6\u4E00\u4E2A\u672A\u63D0\u4EA4\u4E8B\u52A1\u4FEE\u6539\u8FC7\u7684\u6570\u636E"}),"\n",(0,r.jsx)(s.li,{children:"\u95EE\u9898\uFF1A\u53EF\u80FD\u8BFB\u53D6\u5230\u6700\u7EC8\u4F1A\u88AB\u56DE\u6EDA\u7684\u6570\u636E"}),"\n",(0,r.jsx)(s.li,{children:"\u793A\u4F8B\uFF1A"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"\u4E8B\u52A1A\u4FEE\u6539\u67D0\u884C\u6570\u636E\u4F46\u672A\u63D0\u4EA4\n\u4E8B\u52A1B\u8BFB\u53D6\u8BE5\u884C\u6570\u636E(\u8BFB\u53D6\u5230\u4E86\u672A\u63D0\u4EA4\u7684\u4FEE\u6539)\n\u4E8B\u52A1A\u56DE\u6EDA\n\u4E8B\u52A1B\u4F7F\u7528\u7684\u6570\u636E\u73B0\u5728\u53D8\u5F97\u65E0\u6548\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E0D\u53EF\u91CD\u590D\u8BFB(Non-repeatable Read)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5B9A\u4E49\uFF1A\u540C\u4E00\u4E8B\u52A1\u5185\u591A\u6B21\u8BFB\u53D6\u540C\u4E00\u6570\u636E\u96C6\u8FD4\u56DE\u4E0D\u540C\u7ED3\u679C"}),"\n",(0,r.jsx)(s.li,{children:"\u95EE\u9898\uFF1A\u4E8B\u52A1\u6267\u884C\u8FC7\u7A0B\u4E2D\uFF0C\u5176\u4ED6\u4E8B\u52A1\u5BF9\u6570\u636E\u7684\u4FEE\u6539\u53EF\u89C1"}),"\n",(0,r.jsx)(s.li,{children:"\u793A\u4F8B\uFF1A"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"\u4E8B\u52A1A\u8BFB\u53D6\u67D0\u884C\u6570\u636E\n\u4E8B\u52A1B\u4FEE\u6539\u8BE5\u884C\u6570\u636E\u5E76\u63D0\u4EA4\n\u4E8B\u52A1A\u518D\u6B21\u8BFB\u53D6\u540C\u4E00\u884C\uFF0C\u53D1\u73B0\u6570\u636E\u5DF2\u7ECF\u53D8\u4E86\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5E7B\u8BFB(Phantom Read)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5B9A\u4E49\uFF1A\u540C\u4E00\u4E8B\u52A1\u5185\u591A\u6B21\u6267\u884C\u540C\u4E00\u67E5\u8BE2\u8FD4\u56DE\u4E0D\u540C\u884C\u96C6\u5408"}),"\n",(0,r.jsx)(s.li,{children:"\u95EE\u9898\uFF1A\u4E3B\u8981\u662F\u63D2\u5165\u548C\u5220\u9664\u64CD\u4F5C\u5F15\u8D77\u7684\u884C\u96C6\u53D8\u5316"}),"\n",(0,r.jsx)(s.li,{children:"\u793A\u4F8B\uFF1A"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:'\u4E8B\u52A1A\u67E5\u8BE2\u6EE1\u8DB3\u6761\u4EF6\u7684\u6240\u6709\u884C\n\u4E8B\u52A1B\u63D2\u5165\u4E00\u884C\u65B0\u6570\u636E\uFF0C\u6EE1\u8DB3\u4E8B\u52A1A\u7684\u67E5\u8BE2\u6761\u4EF6\uFF0C\u5E76\u63D0\u4EA4\n\u4E8B\u52A1A\u518D\u6B21\u67E5\u8BE2\uFF0C\u53D1\u73B0\u7ED3\u679C\u96C6\u4E2D\u51FA\u73B0\u4E86\u65B0\u884C("\u5E7B\u884C")\n'})}),"\n"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u810F\u8BFB\u793A\u4F8B(\u5728Read Uncommitted\u7EA7\u522B)\n-- \u4F1A\u8BDDA\nSTART TRANSACTION;\nUPDATE products SET price = price * 1.1 WHERE id = 101;\n-- \u6B64\u65F6\u672A\u63D0\u4EA4\n\n-- \u4F1A\u8BDDB (Read Uncommitted)\nSELECT price FROM products WHERE id = 101; -- \u4F1A\u770B\u5230\u63D0\u9AD810%\u7684\u4EF7\u683C\n-- \u5982\u679C\u4F1A\u8BDDA\u56DE\u6EDA\uFF0C\u5219\u4F1A\u8BDDB\u8BFB\u53D6\u7684\u662F\u4E34\u65F6\u4E14\u9519\u8BEF\u7684\u6570\u636E\n"})})]}),(0,r.jsxs)(c.A,{value:"isolation-examples",label:"\u9694\u79BB\u7EA7\u522B\u5B9E\u4F8B",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E0D\u540C\u9694\u79BB\u7EA7\u522B\u7684\u5B9E\u9645\u884C\u4E3A\u793A\u4F8B"}),"\uFF1A"]}),(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"1. \u8BFB\u672A\u63D0\u4EA4(Read Uncommitted)"})}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4F1A\u8BDDA\nSET SESSION TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;\nSTART TRANSACTION;\n\n-- \u4F1A\u8BDDB\nSTART TRANSACTION;\nUPDATE accounts SET balance = balance + 100 WHERE id = 1;\n-- \u672A\u63D0\u4EA4\n\n-- \u4F1A\u8BDDA\nSELECT balance FROM accounts WHERE id = 1; -- \u4F1A\u8BFB\u5230\u4F1A\u8BDDB\u672A\u63D0\u4EA4\u7684\u4FEE\u6539\nCOMMIT;\n"})}),(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"2. \u8BFB\u5DF2\u63D0\u4EA4(Read Committed)"})}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4F1A\u8BDDA\nSET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED;\nSTART TRANSACTION;\nSELECT balance FROM accounts WHERE id = 1; -- \u8BFB\u53D6\u521D\u59CB\u4F59\u989D\n\n-- \u4F1A\u8BDDB\nUPDATE accounts SET balance = balance + 100 WHERE id = 1;\nCOMMIT; -- \u63D0\u4EA4\u4FEE\u6539\n\n-- \u4F1A\u8BDDA\nSELECT balance FROM accounts WHERE id = 1; -- \u8BFB\u53D6\u66F4\u65B0\u540E\u7684\u4F59\u989D(\u4E0D\u53EF\u91CD\u590D\u8BFB)\nCOMMIT;\n"})}),(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"3. \u53EF\u91CD\u590D\u8BFB(Repeatable Read)"})}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4F1A\u8BDDA\nSET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;\nSTART TRANSACTION;\nSELECT balance FROM accounts WHERE id = 1; -- \u8BFB\u53D6\u521D\u59CB\u4F59\u989D\n\n-- \u4F1A\u8BDDB\nUPDATE accounts SET balance = balance + 100 WHERE id = 1;\nCOMMIT; -- \u63D0\u4EA4\u4FEE\u6539\n\n-- \u4F1A\u8BDDA\nSELECT balance FROM accounts WHERE id = 1; -- \u4ECD\u7136\u8BFB\u53D6\u5230\u521D\u59CB\u4F59\u989D\nCOMMIT;\n"})}),(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"4. \u53EF\u4E32\u884C\u5316(Serializable)"})}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4F1A\u8BDDA\nSET SESSION TRANSACTION ISOLATION LEVEL SERIALIZABLE;\nSTART TRANSACTION;\nSELECT * FROM accounts WHERE balance > 1000;\n\n-- \u4F1A\u8BDDB\nSTART TRANSACTION;\nINSERT INTO accounts(id, name, balance) VALUES(10, 'New Account', 5000);\n-- \u4F1A\u88AB\u963B\u585E\u76F4\u5230\u4F1A\u8BDDA\u63D0\u4EA4\u6216\u56DE\u6EDA\n\n-- \u4F1A\u8BDDA\nSELECT * FROM accounts WHERE balance > 1000; -- \u4E0D\u4F1A\u770B\u5230\u65B0\u63D2\u5165\u7684\u884C\nCOMMIT;\n\n-- \u4F1A\u8BDDB\u7684INSERT\u6B64\u65F6\u624D\u80FD\u5B8C\u6210\n"})})]}),(0,r.jsxs)(c.A,{value:"choosing-level",label:"\u9009\u62E9\u9694\u79BB\u7EA7\u522B",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5982\u4F55\u9009\u62E9\u5408\u9002\u7684\u4E8B\u52A1\u9694\u79BB\u7EA7\u522B"}),"\uFF1A"]}),(0,r.jsx)(s.p,{children:"\u4E0D\u540C\u7684\u9694\u79BB\u7EA7\u522B\u9002\u7528\u4E8E\u4E0D\u540C\u7684\u5E94\u7528\u573A\u666F\uFF0C\u9009\u62E9\u65F6\u9700\u8981\u5E73\u8861\u6570\u636E\u4E00\u81F4\u6027\u548C\u6027\u80FD\u9700\u6C42\uFF1A"}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"\u8BFB\u672A\u63D0\u4EA4(Read Uncommitted)"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9002\u7528\u573A\u666F\uFF1A\u51E0\u4E4E\u4E0D\u9002\u7528\u4E8E\u751F\u4EA7\u73AF\u5883"}),"\n",(0,r.jsx)(s.li,{children:"\u53EF\u80FD\u7528\u4E8E\uFF1A\u4E0D\u8981\u6C42\u6570\u636E\u4E00\u81F4\u6027\u7684\u6279\u91CF\u62A5\u8868\u751F\u6210"}),"\n",(0,r.jsx)(s.li,{children:"\u98CE\u9669\uFF1A\u6570\u636E\u4E0D\u4E00\u81F4\uFF0C\u53EF\u80FD\u8BFB\u53D6\u5230\u4F1A\u88AB\u56DE\u6EDA\u7684\u6570\u636E"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"\u8BFB\u5DF2\u63D0\u4EA4(Read Committed)"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9002\u7528\u573A\u666F\uFF1A\u5927\u591A\u6570OLTP\u5E94\u7528\uFF0C\u5E76\u53D1\u8981\u6C42\u8F83\u9AD8"}),"\n",(0,r.jsx)(s.li,{children:"\u5E38\u89C1\u4E8E\uFF1AOracle\u3001SQL Server\u3001PostgreSQL\u9ED8\u8BA4\u914D\u7F6E"}),"\n",(0,r.jsx)(s.li,{children:"\u4F18\u70B9\uFF1A\u51CF\u5C11\u9501\u5B9A\uFF0C\u63D0\u9AD8\u5E76\u53D1\u6027\u80FD"}),"\n",(0,r.jsx)(s.li,{children:"\u7F3A\u70B9\uFF1A\u53EF\u80FD\u51FA\u73B0\u4E0D\u53EF\u91CD\u590D\u8BFB\u548C\u5E7B\u8BFB\u95EE\u9898"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"\u53EF\u91CD\u590D\u8BFB(Repeatable Read)"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9002\u7528\u573A\u666F\uFF1A\u9700\u8981\u9AD8\u4E00\u81F4\u6027\u7684\u91D1\u878D\u7CFB\u7EDF\u3001\u5E93\u5B58\u7CFB\u7EDF"}),"\n",(0,r.jsx)(s.li,{children:"MySQL InnoDB\u9ED8\u8BA4\u7EA7\u522B"}),"\n",(0,r.jsx)(s.li,{children:"\u4F18\u70B9\uFF1A\u63D0\u4F9B\u5F3A\u4E00\u81F4\u6027\u4FDD\u8BC1\uFF0C\u907F\u514D\u5927\u591A\u6570\u5E76\u53D1\u95EE\u9898"}),"\n",(0,r.jsx)(s.li,{children:"\u7F3A\u70B9\uFF1A\u589E\u52A0\u9501\u5B9A\uFF0C\u53EF\u80FD\u5F71\u54CD\u5E76\u53D1\u6027\u80FD"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"\u53EF\u4E32\u884C\u5316(Serializable)"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9002\u7528\u573A\u666F\uFF1A\u8981\u6C42\u6781\u9AD8\u6570\u636E\u4E00\u81F4\u6027\u7684\u5173\u952E\u7CFB\u7EDF"}),"\n",(0,r.jsx)(s.li,{children:"\u4F8B\u5982\uFF1A\u91D1\u878D\u4EA4\u6613\u3001\u8D26\u6237\u8F6C\u8D26\u7B49"}),"\n",(0,r.jsx)(s.li,{children:"\u4F18\u70B9\uFF1A\u63D0\u4F9B\u6700\u9AD8\u7EA7\u522B\u7684\u4E00\u81F4\u6027\u4FDD\u8BC1"}),"\n",(0,r.jsx)(s.li,{children:"\u7F3A\u70B9\uFF1A\u4E25\u91CD\u5F71\u54CD\u5E76\u53D1\u6027\u80FD\uFF0C\u5BB9\u6613\u53D1\u751F\u9501\u7B49\u5F85\u548C\u6B7B\u9501"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9009\u62E9\u5EFA\u8BAE"}),"\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4F18\u5148\u8003\u8651\u6570\u636E\u5E93\u9ED8\u8BA4\u8BBE\u7F6E\uFF08MySQL\u4E3AREPEATABLE READ\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"\u5982\u679C\u5E94\u7528\u6709\u9AD8\u5E76\u53D1\u9700\u6C42\uFF0C\u8003\u8651READ COMMITTED"}),"\n",(0,r.jsx)(s.li,{children:"\u5982\u679C\u5E94\u7528\u6709\u7279\u6B8A\u4E00\u81F4\u6027\u8981\u6C42\uFF0C\u8003\u8651SERIALIZABLE"}),"\n",(0,r.jsx)(s.li,{children:"\u5728\u5E94\u7528\u7EA7\u522B\u5B9E\u73B0\u5FC5\u8981\u7684\u5E76\u53D1\u63A7\u5236\uFF0C\u51CF\u8F7B\u6570\u636E\u5E93\u8D1F\u62C5"}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u53EF\u4EE5\u9488\u5BF9\u4E0D\u540C\u8868\u6216\u64CD\u4F5C\u8BBE\u7F6E\u4E0D\u540C\u7684\u9694\u79BB\u7EA7\u522B\n-- \u4F8B\u5982\uFF1A\u62A5\u8868\u67E5\u8BE2\u4F7F\u7528\u8F83\u4F4E\u7EA7\u522B\uFF0C\u8D22\u52A1\u64CD\u4F5C\u4F7F\u7528\u8F83\u9AD8\u7EA7\u522B\n\n-- \u8D22\u52A1\u8F6C\u8D26\u4E8B\u52A1\nSET SESSION TRANSACTION ISOLATION LEVEL SERIALIZABLE;\nSTART TRANSACTION;\n-- \u8F6C\u8D26\u64CD\u4F5C\nCOMMIT;\n\n-- \u65E5\u5E38\u67E5\u8BE2\nSET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED;\nSTART TRANSACTION;\n-- \u67E5\u8BE2\u64CD\u4F5C\nCOMMIT;\n"})})]})]}),"\n",(0,r.jsx)(s.h3,{id:"33-\u9501\u7C7B\u578B\u4E0E\u5E94\u7528",children:"3.3 \u9501\u7C7B\u578B\u4E0E\u5E94\u7528"}),"\n",(0,r.jsx)(s.p,{children:"MySQL\u7684\u9501\u673A\u5236\u662F\u5B9E\u73B0\u4E8B\u52A1\u9694\u79BB\u548C\u5E76\u53D1\u63A7\u5236\u7684\u5173\u952E\u624B\u6BB5\uFF0C\u5C24\u5176\u662F\u5728InnoDB\u5B58\u50A8\u5F15\u64CE\u4E2D\uFF0C\u6709\u7740\u4E30\u5BCC\u7684\u9501\u7C7B\u578B\u548C\u5E94\u7528\u573A\u666F\u3002"}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"lock-types",label:"\u9501\u7684\u5206\u7C7B",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6839\u636E\u9501\u7684\u7C92\u5EA6\u548C\u529F\u80FD\uFF0CMySQL\u7684\u9501\u53EF\u5206\u4E3A\u591A\u79CD\u7C7B\u578B"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6309\u7C92\u5EA6\u5206\u7C7B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u8868\u7EA7\u9501(Table Lock)"}),"\uFF1A\u9501\u5B9A\u6574\u4E2A\u8868\uFF0CMyISAM\u7684\u4E3B\u8981\u9501\u7C7B\u578B"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u884C\u7EA7\u9501(Row Lock)"}),"\uFF1A\u9501\u5B9A\u5355\u884C\u8BB0\u5F55\uFF0CInnoDB\u7684\u7279\u6027"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u9875\u7EA7\u9501(Page Lock)"}),"\uFF1A\u9501\u5B9A\u6570\u636E\u9875\uFF0C\u65E9\u671FInnoDB\u4F7F\u7528"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u8BB0\u5F55\u9501(Record Lock)"}),"\uFF1A\u9501\u5B9A\u7D22\u5F15\u8BB0\u5F55"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u95F4\u9699\u9501(Gap Lock)"}),"\uFF1A\u9501\u5B9A\u7D22\u5F15\u8BB0\u5F55\u4E4B\u95F4\u7684\u95F4\u9699"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Next-Key Lock"}),"\uFF1A\u8BB0\u5F55\u9501+\u95F4\u9699\u9501\u7684\u7EC4\u5408"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6309\u529F\u80FD\u5206\u7C7B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5171\u4EAB\u9501(Shared Lock/S Lock)"}),"\uFF1A\u8BFB\u9501\uFF0C\u591A\u4E2A\u4E8B\u52A1\u53EF\u540C\u65F6\u83B7\u5F97"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6392\u4ED6\u9501(Exclusive Lock/X Lock)"}),"\uFF1A\u5199\u9501\uFF0C\u4E00\u6B21\u53EA\u80FD\u4E00\u4E2A\u4E8B\u52A1\u83B7\u5F97"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u610F\u5411\u9501(Intention Lock)"}),"\uFF1A\u8868\u660E\u4E8B\u52A1\u5C06\u5728\u8868\u7684\u884C\u4E0A\u8BBE\u7F6E\u5171\u4EAB\u6216\u6392\u4ED6\u9501"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"AUTO-INC\u9501"}),"\uFF1A\u7528\u4E8E\u81EA\u589E\u5217\u7684\u7279\u6B8A\u8868\u7EA7\u9501"]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u663E\u5F0F\u52A0\u9501\u793A\u4F8B\n-- \u5171\u4EAB\u9501(\u8BFB\u9501)\nSELECT * FROM products WHERE id = 101 LOCK IN SHARE MODE;\n-- \u6216MySQL 8.0+\u7684\u65B0\u8BED\u6CD5\nSELECT * FROM products WHERE id = 101 FOR SHARE;\n\n-- \u6392\u4ED6\u9501(\u5199\u9501)\nSELECT * FROM products WHERE id = 101 FOR UPDATE;\n\n-- \u67E5\u770B\u5F53\u524D\u9501\u72B6\u6001(MySQL 8.0+)\nSELECT * FROM performance_schema.data_locks;\nSELECT * FROM performance_schema.data_lock_waits;\n"})})]}),(0,r.jsxs)(c.A,{value:"innodb-locks",label:"InnoDB\u9501\u8BE6\u89E3",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"InnoDB\u9501\u673A\u5236\u662F\u5176MVCC\u5E76\u53D1\u63A7\u5236\u7684\u6838\u5FC3\u90E8\u5206"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u884C\u9501(Row-Level Locking)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u539F\u7406"}),"\uFF1A\u9501\u5B9A\u5355\u4E2A\u884C\u8BB0\u5F55\uFF0C\u800C\u975E\u6574\u4E2A\u8868"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4F18\u70B9"}),"\uFF1A\u7C92\u5EA6\u5C0F\uFF0C\u5E76\u53D1\u6027\u80FD\u9AD8"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7F3A\u70B9"}),"\uFF1A\u9501\u7BA1\u7406\u590D\u6742\uFF0C\u53EF\u80FD\u51FA\u73B0\u6B7B\u9501"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5B9E\u73B0"}),"\uFF1A\u901A\u8FC7\u9501\u5B9A\u7D22\u5F15\u8BB0\u5F55\u5B9E\u73B0"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8BB0\u5F55\u9501(Record Lock)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9501\u5B9A\u5355\u4E2A\u7D22\u5F15\u8BB0\u5F55"}),"\n",(0,r.jsx)(s.li,{children:"\u9632\u6B62\u5176\u4ED6\u4E8B\u52A1\u4FEE\u6539\u6216\u5220\u9664\u8BE5\u8BB0\u5F55"}),"\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528\u552F\u4E00\u7D22\u5F15\u7B49\u503C\u67E5\u8BE2\u65F6\u4F7F\u7528"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u95F4\u9699\u9501(Gap Lock)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9501\u5B9A\u7D22\u5F15\u8BB0\u5F55\u4E4B\u95F4\u7684\u95F4\u9699"}),"\n",(0,r.jsx)(s.li,{children:"\u9632\u6B62\u5176\u4ED6\u4E8B\u52A1\u5728\u95F4\u9699\u4E2D\u63D2\u5165\u8BB0\u5F55"}),"\n",(0,r.jsx)(s.li,{children:"\u89E3\u51B3\u5E7B\u8BFB\u95EE\u9898"}),"\n",(0,r.jsx)(s.li,{children:"\u5728REPEATABLE READ\u9694\u79BB\u7EA7\u522B\u4E0B\u4F7F\u7528"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Next-Key Lock"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8BB0\u5F55\u9501\u4E0E\u95F4\u9699\u9501\u7684\u7EC4\u5408"}),"\n",(0,r.jsx)(s.li,{children:"\u9501\u5B9A\u7D22\u5F15\u8BB0\u5F55\u53CA\u5176\u524D\u9762\u7684\u95F4\u9699"}),"\n",(0,r.jsx)(s.li,{children:"InnoDB\u9ED8\u8BA4\u7684\u9501\u5B9A\u65B9\u5F0F"}),"\n",(0,r.jsx)(s.li,{children:"\u53EF\u5B8C\u5168\u907F\u514D\u5E7B\u8BFB"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u610F\u5411\u9501(Intention Lock)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8868\u7EA7\u9501\uFF0C\u6307\u793A\u4E8B\u52A1\u7A0D\u540E\u8981\u83B7\u53D6\u7684\u9501\u7C7B\u578B"}),"\n",(0,r.jsx)(s.li,{children:"\u610F\u5411\u5171\u4EAB\u9501(IS)\uFF1A\u6253\u7B97\u5728\u8868\u7684\u884C\u4E0A\u8BBE\u7F6E\u5171\u4EAB\u9501"}),"\n",(0,r.jsx)(s.li,{children:"\u610F\u5411\u6392\u4ED6\u9501(IX)\uFF1A\u6253\u7B97\u5728\u8868\u7684\u884C\u4E0A\u8BBE\u7F6E\u6392\u4ED6\u9501"}),"\n",(0,r.jsx)(s.li,{children:"\u63D0\u9AD8\u8868\u9501\u548C\u884C\u9501\u7684\u517C\u5BB9\u6027\u5224\u65AD\u6548\u7387"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4E0D\u540C\u67E5\u8BE2\u7C7B\u578B\u7684\u9501\u5B9A\u884C\u4E3A\u793A\u4F8B\n\n-- \u4E3B\u952E\u7B49\u503C\u67E5\u8BE2\uFF1A\u4EC5\u8BB0\u5F55\u9501\nSELECT * FROM users WHERE id = 10 FOR UPDATE;\n\n-- \u552F\u4E00\u7D22\u5F15\u7B49\u503C\u67E5\u8BE2\uFF1A\u4EC5\u8BB0\u5F55\u9501\nSELECT * FROM users WHERE email = 'user@example.com' FOR UPDATE;\n\n-- \u975E\u552F\u4E00\u7D22\u5F15\u7B49\u503C\u67E5\u8BE2\uFF1ANext-Key Lock\nSELECT * FROM users WHERE status = 'active' FOR UPDATE;\n\n-- \u8303\u56F4\u67E5\u8BE2\uFF1A\u591A\u4E2ANext-Key Lock\nSELECT * FROM users WHERE id BETWEEN 10 AND 20 FOR UPDATE;\n"})})]}),(0,r.jsxs)(c.A,{value:"lock-strategies",label:"\u9501\u5B9A\u7B56\u7565",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6709\u6548\u7684\u9501\u5B9A\u7B56\u7565\u53EF\u4EE5\u63D0\u9AD8\u7CFB\u7EDF\u7684\u5E76\u53D1\u6027\u80FD"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9501\u5347\u7EA7/\u9501\u964D\u7EA7"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9501\u5347\u7EA7\uFF1A\u4ECE\u8F83\u5C0F\u7C92\u5EA6\u9501\u8F6C\u53D8\u4E3A\u8F83\u5927\u7C92\u5EA6\u9501"}),"\n",(0,r.jsx)(s.li,{children:"\u9501\u964D\u7EA7\uFF1A\u4ECE\u8F83\u5927\u7C92\u5EA6\u9501\u8F6C\u53D8\u4E3A\u8F83\u5C0F\u7C92\u5EA6\u9501"}),"\n",(0,r.jsx)(s.li,{children:"InnoDB\u4E0D\u81EA\u52A8\u6267\u884C\u9501\u5347\u7EA7\uFF0C\u4EE5\u7EF4\u6301\u9AD8\u5E76\u53D1\u6027\u80FD"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9501\u6301\u6709\u65F6\u95F4\u4F18\u5316"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5C3D\u91CF\u51CF\u5C11\u9501\u7684\u6301\u6709\u65F6\u95F4"}),"\n",(0,r.jsx)(s.li,{children:"\u5C06\u8017\u65F6\u64CD\u4F5C\u79FB\u81F3\u4E8B\u52A1\u5F00\u59CB\u524D\u6216\u63D0\u4EA4\u540E"}),"\n",(0,r.jsx)(s.li,{children:"\u907F\u514D\u5728\u6301\u6709\u9501\u65F6\u8FDB\u884C\u7528\u6237\u4EA4\u4E92\u6216\u7F51\u7EDCI/O"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9009\u62E9\u5408\u9002\u7684\u9501\u7C7B\u578B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u53EA\u8BFB\u67E5\u8BE2\u65E0\u9700\u663E\u5F0F\u52A0\u9501"}),"\n",(0,r.jsx)(s.li,{children:"\u9700\u8981\u4E00\u81F4\u6027\u8BFB\u53D6\u4F46\u65E0\u66F4\u65B0\u7684\u60C5\u51B5\u4F7F\u7528SHARE MODE"}),"\n",(0,r.jsx)(s.li,{children:"\u66F4\u65B0\u524D\u68C0\u67E5\u4F7F\u7528FOR UPDATE\u9632\u6B62\u5E76\u53D1\u66F4\u65B0"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u907F\u514D\u9501\u51B2\u7A81\u7684\u65B9\u6CD5"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5408\u7406\u8BBE\u8BA1\u7D22\u5F15\uFF0C\u51CF\u5C11\u9501\u5B9A\u8303\u56F4"}),"\n",(0,r.jsx)(s.li,{children:"\u6309\u7167\u56FA\u5B9A\u987A\u5E8F\u8BBF\u95EE\u8BB0\u5F55\uFF0C\u51CF\u5C11\u6B7B\u9501\u6982\u7387"}),"\n",(0,r.jsx)(s.li,{children:"\u62C6\u5206\u5927\u4E8B\u52A1\u4E3A\u591A\u4E2A\u5C0F\u4E8B\u52A1\uFF0C\u51CF\u5C11\u9501\u6301\u6709\u65F6\u95F4"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u5F53\u4F7F\u7528\u4E50\u89C2\u9501\u4EE3\u66FF\u60B2\u89C2\u9501"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4F18\u5316\u9501\u5B9A\u8303\u56F4\u7684\u793A\u4F8B\n\n-- \u4E0D\u63A8\u8350\uFF1A\u9501\u5B9A\u6574\u8868\nUPDATE products SET in_stock = true WHERE category_id = 5;\n\n-- \u63A8\u8350\uFF1A\u5148\u786E\u5B9A\u5177\u4F53ID\uFF0C\u518D\u66F4\u65B0(\u51CF\u5C11\u9501\u5B9A\u8303\u56F4)\nSTART TRANSACTION;\nSELECT id FROM products WHERE category_id = 5 FOR UPDATE;\n-- \u4EC5\u5BF9\u4E0A\u8FF0\u67E5\u8BE2\u8FD4\u56DE\u7684ID\u8FDB\u884C\u66F4\u65B0\nUPDATE products SET in_stock = true WHERE id IN (101, 102, 103);\nCOMMIT;\n\n-- \u4E50\u89C2\u9501\u793A\u4F8B(\u57FA\u4E8E\u7248\u672C\u53F7)\nUPDATE products SET \n    stock = stock - 1, \n    version = version + 1\nWHERE id = 101 AND version = 5;\n-- \u5982\u679Cversion\u5DF2\u53D8\u66F4\uFF0C\u8868\u793A\u5DF2\u88AB\u5176\u4ED6\u4E8B\u52A1\u4FEE\u6539\uFF0C\u66F4\u65B0\u5C06\u5931\u8D25\n"})})]}),(0,r.jsxs)(c.A,{value:"monitoring-locks",label:"\u9501\u76D1\u63A7\u4E0E\u6545\u969C\u6392\u9664",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL\u63D0\u4F9B\u591A\u79CD\u5DE5\u5177\u548C\u89C6\u56FE\u7528\u4E8E\u9501\u76D1\u63A7\u548C\u6545\u969C\u6392\u9664"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9501\u76D1\u63A7\u5DE5\u5177"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Performance Schema\u8868"}),"\uFF08MySQL 8.0+\uFF09"]}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.strong,{children:"InnoDB\u76D1\u63A7\u8F93\u51FA"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.strong,{children:"Information Schema\u8868"})}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"SHOW ENGINE INNODB STATUS"}),"\u547D\u4EE4"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9501\u7B49\u5F85\u76D1\u63A7"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8BBE\u7F6E\u9501\u7B49\u5F85\u8D85\u65F6\u9650\u5236"}),"\n",(0,r.jsx)(s.li,{children:"\u76D1\u63A7\u957F\u65F6\u95F4\u9501\u7B49\u5F85"}),"\n",(0,r.jsx)(s.li,{children:"\u8BC6\u522B\u9501\u51B2\u7A81\u6A21\u5F0F"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9501\u6545\u969C\u6392\u9664"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8BC6\u522B\u88AB\u963B\u585E\u7684\u67E5\u8BE2"}),"\n",(0,r.jsx)(s.li,{children:"\u786E\u5B9A\u6301\u6709\u9501\u7684\u4E8B\u52A1"}),"\n",(0,r.jsx)(s.li,{children:"\u5FC5\u8981\u65F6\u7EC8\u6B62\u963B\u585E\u4E8B\u52A1"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u9501\u76D1\u63A7\u67E5\u8BE2\u793A\u4F8B\n\n-- \u67E5\u770B\u5F53\u524D\u9501\u7B49\u5F85\u60C5\u51B5(MySQL 8.0+)\nSELECT * FROM performance_schema.data_lock_waits;\n\n-- \u67E5\u770B\u9501\u8BE6\u60C5\nSELECT * FROM performance_schema.data_locks;\n\n-- \u67E5\u770B\u5F53\u524D\u4E8B\u52A1\nSELECT * FROM information_schema.INNODB_TRX;\n\n-- InnoDB\u72B6\u6001\uFF0C\u5305\u62EC\u9501\u4FE1\u606F\nSHOW ENGINE INNODB STATUS\\G\n\n-- \u68C0\u67E5\u963B\u585E\u7684\u4E8B\u52A1\u548C\u88AB\u963B\u585E\u7684\u4E8B\u52A1\nSELECT \n    r.trx_id waiting_trx_id,\n    r.trx_mysql_thread_id waiting_thread,\n    r.trx_query waiting_query,\n    b.trx_id blocking_trx_id,\n    b.trx_mysql_thread_id blocking_thread,\n    b.trx_query blocking_query\nFROM information_schema.innodb_lock_waits w\nJOIN information_schema.innodb_trx b ON b.trx_id = w.blocking_trx_id\nJOIN information_schema.innodb_trx r ON r.trx_id = w.requesting_trx_id;\n\n-- \u7EC8\u6B62\u957F\u65F6\u95F4\u8FD0\u884C\u7684\u4E8B\u52A1\n-- \u9996\u5148\u627E\u5230\u8FDB\u7A0BID\nSHOW PROCESSLIST;\n-- \u7136\u540E\u7EC8\u6B62\u5B83\nKILL [process_id];\n"})})]})]}),"\n",(0,r.jsx)(s.h3,{id:"34-\u6B7B\u9501\u95EE\u9898\u5206\u6790",children:"3.4 \u6B7B\u9501\u95EE\u9898\u5206\u6790"}),"\n",(0,r.jsx)(s.p,{children:"\u6B7B\u9501\u662F\u6570\u636E\u5E93\u7CFB\u7EDF\u4E2D\u7684\u4E00\u79CD\u5E38\u89C1\u5E76\u53D1\u95EE\u9898\uFF0C\u5F53\u4E24\u4E2A\u6216\u591A\u4E2A\u4E8B\u52A1\u4E92\u76F8\u6301\u6709\u5BF9\u65B9\u9700\u8981\u7684\u9501\u800C\u5F62\u6210\u5FAA\u73AF\u7B49\u5F85\u65F6\uFF0C\u5C31\u4F1A\u53D1\u751F\u6B7B\u9501\u3002"}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"deadlock-basics",label:"\u6B7B\u9501\u539F\u7406",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6B7B\u9501\u7684\u57FA\u672C\u6982\u5FF5\u548C\u5F62\u6210\u6761\u4EF6"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6B7B\u9501\u5B9A\u4E49"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4E24\u4E2A\u6216\u591A\u4E2A\u4E8B\u52A1\u76F8\u4E92\u7B49\u5F85\u5BF9\u65B9\u91CA\u653E\u8D44\u6E90(\u9501)\uFF0C\u5F62\u6210\u73AF\u8DEF\u7B49\u5F85"}),"\n",(0,r.jsx)(s.li,{children:"\u5982\u679C\u6CA1\u6709\u5916\u90E8\u5E72\u9884\uFF0C\u8FD9\u4E9B\u4E8B\u52A1\u6C38\u8FDC\u65E0\u6CD5\u5B8C\u6210"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6B7B\u9501\u5F62\u6210\u7684\u56DB\u4E2A\u5FC5\u8981\u6761\u4EF6"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4E92\u65A5\u6761\u4EF6"}),"\uFF1A\u4E00\u4E2A\u8D44\u6E90\u6BCF\u6B21\u53EA\u80FD\u88AB\u4E00\u4E2A\u4E8B\u52A1\u4F7F\u7528"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6301\u6709\u5E76\u7B49\u5F85\u6761\u4EF6"}),"\uFF1A\u4E8B\u52A1\u6301\u6709\u8D44\u6E90\u7684\u540C\u65F6\u7B49\u5F85\u83B7\u53D6\u5176\u4ED6\u8D44\u6E90"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4E0D\u53EF\u5265\u593A\u6761\u4EF6"}),"\uFF1A\u4E8B\u52A1\u81EA\u613F\u91CA\u653E\u8D44\u6E90\u524D\uFF0C\u5176\u4ED6\u4E8B\u52A1\u4E0D\u80FD\u5F3A\u5236\u83B7\u53D6"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u73AF\u8DEF\u7B49\u5F85\u6761\u4EF6"}),"\uFF1A\u5B58\u5728\u4E00\u4E2A\u4E8B\u52A1\u7B49\u5F85\u94FE\uFF0C\u5F62\u6210\u95ED\u73AF"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5178\u578B\u6B7B\u9501\u573A\u666F"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4E8B\u52A1A\u548CB\u4EE5\u4E0D\u540C\u987A\u5E8F\u8BBF\u95EE\u76F8\u540C\u8BB0\u5F55"}),"\n",(0,r.jsx)(s.li,{children:"\u8303\u56F4\u9501\u5B9A\u548C\u63D2\u5165\u64CD\u4F5C\u4E4B\u95F4\u7684\u51B2\u7A81"}),"\n",(0,r.jsx)(s.li,{children:"\u5916\u952E\u7EA6\u675F\u5BFC\u81F4\u7684\u9690\u5F0F\u9501\u5B9A"}),"\n",(0,r.jsx)(s.li,{children:"\u9501\u5347\u7EA7\u8FC7\u7A0B\u4E2D\u7684\u51B2\u7A81"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.mermaid,{value:"graph LR\n    subgraph \u6B7B\u9501\u793A\u4F8B\n    A[\u4E8B\u52A1A] --\x3e|\u6301\u6709\u9501| R1[\u8D44\u6E901]\n    A -.->|\u8BF7\u6C42\u9501| R2[\u8D44\u6E902]\n    B[\u4E8B\u52A1B] --\x3e|\u6301\u6709\u9501| R2\n    B -.->|\u8BF7\u6C42\u9501| R1\n    end"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5178\u578B\u7684\u6B7B\u9501\u793A\u4F8B\n\n-- \u4F1A\u8BDDA\nSTART TRANSACTION;\nUPDATE accounts SET balance = balance - 100 WHERE id = 1;\n-- \u6B64\u65F6\u6301\u6709id=1\u8BB0\u5F55\u7684X\u9501\n\n-- \u4F1A\u8BDDB\nSTART TRANSACTION;\nUPDATE accounts SET balance = balance - 200 WHERE id = 2;\n-- \u6B64\u65F6\u6301\u6709id=2\u8BB0\u5F55\u7684X\u9501\n\n-- \u4F1A\u8BDDA\nUPDATE accounts SET balance = balance + 100 WHERE id = 2;\n-- \u8BF7\u6C42id=2\u8BB0\u5F55\u7684X\u9501\uFF0C\u88AB\u963B\u585E\n\n-- \u4F1A\u8BDDB\nUPDATE accounts SET balance = balance + 200 WHERE id = 1;\n-- \u8BF7\u6C42id=1\u8BB0\u5F55\u7684X\u9501\uFF0C\u5F62\u6210\u6B7B\u9501\n-- MySQL\u5C06\u68C0\u6D4B\u5230\u6B7B\u9501\u5E76\u56DE\u6EDA\u5176\u4E2D\u4E00\u4E2A\u4E8B\u52A1\n"})})]}),(0,r.jsxs)(c.A,{value:"deadlock-detection",label:"\u6B7B\u9501\u68C0\u6D4B\u4E0E\u5904\u7406",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL\u5177\u6709\u5185\u7F6E\u7684\u6B7B\u9501\u68C0\u6D4B\u548C\u5904\u7406\u673A\u5236"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6B7B\u9501\u68C0\u6D4B\u673A\u5236"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"InnoDB\u6709\u81EA\u52A8\u6B7B\u9501\u68C0\u6D4B\u529F\u80FD"}),"\n",(0,r.jsx)(s.li,{children:"\u901A\u8FC7\u5EFA\u7ACB\u7B49\u5F85\u56FE(wait-for graph)\u68C0\u6D4B\u73AF\u8DEF\u7B49\u5F85"}),"\n",(0,r.jsx)(s.li,{children:"\u68C0\u6D4B\u9891\u7387\u53EF\u914D\u7F6E"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6B7B\u9501\u5904\u7406\u7B56\u7565"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u8D85\u65F6\u89E3\u51B3"}),"\uFF1A\u4E8B\u52A1\u7B49\u5F85\u9501\u7684\u65F6\u95F4\u8D85\u8FC7",(0,r.jsx)(s.code,{children:"innodb_lock_wait_timeout"}),"\u8BBE\u7F6E(\u9ED8\u8BA450\u79D2)\u65F6\u56DE\u6EDA"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6B7B\u9501\u68C0\u6D4B"}),"\uFF1A\u68C0\u6D4B\u5230\u6B7B\u9501\u540E\u7ACB\u5373\u9009\u62E9\u4E00\u4E2A\u4E8B\u52A1\u56DE\u6EDA\uFF0C\u8BA9\u5176\u4ED6\u4E8B\u52A1\u7EE7\u7EED"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4E8B\u52A1\u56DE\u6EDA\u9009\u62E9"}),"\uFF1A\u901A\u5E38\u9009\u62E9\u56DE\u6EDA\u8F83\u5C0F\u7684\u4E8B\u52A1(\u4FEE\u6539\u884C\u6570\u5C11\uFF0C\u8017\u8D39\u8D44\u6E90\u5C11\u7684)"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6B7B\u9501\u65E5\u5FD7\u8BB0\u5F55"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6B7B\u9501\u4FE1\u606F\u8BB0\u5F55\u5728\u9519\u8BEF\u65E5\u5FD7\u4E2D"}),"\n",(0,r.jsxs)(s.li,{children:["\u901A\u8FC7",(0,r.jsx)(s.code,{children:"SHOW ENGINE INNODB STATUS"}),"\u67E5\u770B\u6700\u8FD1\u7684\u6B7B\u9501\u4FE1\u606F"]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u76F8\u5173\u914D\u7F6E\u53C2\u6570\nSHOW VARIABLES LIKE 'innodb_deadlock_detect';      -- \u6B7B\u9501\u68C0\u6D4B\u5F00\u5173(\u9ED8\u8BA4ON)\nSHOW VARIABLES LIKE 'innodb_lock_wait_timeout';    -- \u9501\u7B49\u5F85\u8D85\u65F6\u65F6\u95F4(\u9ED8\u8BA450\u79D2)\n\n-- \u8C03\u6574\u6B7B\u9501\u68C0\u6D4B\u548C\u8D85\u65F6\u8BBE\u7F6E\nSET GLOBAL innodb_deadlock_detect = ON;           -- \u542F\u7528\u6B7B\u9501\u68C0\u6D4B\nSET GLOBAL innodb_lock_wait_timeout = 20;         -- \u8BBE\u7F6E\u9501\u7B49\u5F85\u8D85\u65F6\u4E3A20\u79D2\n\n-- \u67E5\u770B\u6B7B\u9501\u4FE1\u606F\nSHOW ENGINE INNODB STATUS\\G\n\n-- \u6B7B\u9501\u76F8\u5173\u9519\u8BEF\u793A\u4F8B\n-- \u9519\u8BEF\u53F7: 1213\n-- \u9519\u8BEF\u4FE1\u606F: Deadlock found when trying to get lock; try restarting transaction\n"})})]}),(0,r.jsxs)(c.A,{value:"deadlock-prevention",label:"\u6B7B\u9501\u9884\u9632",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u901A\u8FC7\u5408\u7406\u7684\u5E94\u7528\u8BBE\u8BA1\u548C\u4E8B\u52A1\u7BA1\u7406\uFF0C\u53EF\u4EE5\u663E\u8457\u51CF\u5C11\u6B7B\u9501\u53D1\u751F"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8BBF\u95EE\u8D44\u6E90\u987A\u5E8F\u4E00\u81F4\u5316"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6240\u6709\u4E8B\u52A1\u6309\u7167\u76F8\u540C\u7684\u987A\u5E8F\u8BBF\u95EE\u8868\u548C\u884C"}),"\n",(0,r.jsx)(s.li,{children:"\u4F8B\u5982\uFF1A\u603B\u662F\u5148\u64CD\u4F5CID\u8F83\u5C0F\u7684\u8BB0\u5F55\uFF0C\u518D\u64CD\u4F5CID\u8F83\u5927\u7684\u8BB0\u5F55"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u51CF\u5C11\u4E8B\u52A1\u8303\u56F4\u548C\u6301\u7EED\u65F6\u95F4"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5C06\u5927\u4E8B\u52A1\u62C6\u5206\u6210\u591A\u4E2A\u5C0F\u4E8B\u52A1"}),"\n",(0,r.jsx)(s.li,{children:"\u53EA\u5728\u5FC5\u8981\u65F6\u624D\u542F\u52A8\u4E8B\u52A1"}),"\n",(0,r.jsx)(s.li,{children:"\u5C3D\u5FEB\u63D0\u4EA4\u4E8B\u52A1\uFF0C\u51CF\u5C11\u6301\u6709\u9501\u7684\u65F6\u95F4"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F7F\u7528\u5408\u9002\u7684\u9694\u79BB\u7EA7\u522B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8003\u8651\u4F7F\u7528READ COMMITTED\u800C\u975EREPEATABLE READ\u4EE5\u51CF\u5C11\u9501\u8303\u56F4"}),"\n",(0,r.jsx)(s.li,{children:"\u907F\u514D\u4E0D\u5FC5\u8981\u7684SERIALIZABLE\u9694\u79BB\u7EA7\u522B"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u907F\u514D\u70ED\u70B9\u884C\u66F4\u65B0"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4F8B\u5982\u907F\u514D\u4F7F\u7528\u96C6\u4E2D\u5F0F\u8BA1\u6570\u5668"}),"\n",(0,r.jsx)(s.li,{children:"\u53EF\u8003\u8651\u5206\u5E03\u5F0F\u8BA1\u6570\u6216\u5F02\u6B65\u66F4\u65B0"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F7F\u7528\u4E50\u89C2\u9501\u66FF\u4EE3\u60B2\u89C2\u9501"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u901A\u8FC7\u7248\u672C\u53F7\u6216\u65F6\u95F4\u6233\u5B9E\u73B0\u4E50\u89C2\u5E76\u53D1\u63A7\u5236"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u7528\u4E8E\u8BFB\u591A\u5199\u5C11\u7684\u573A\u666F"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u6309\u56FA\u5B9A\u987A\u5E8F\u8BBF\u95EE\u8D44\u6E90\n-- \u4E0D\u597D\u7684\u5B9E\u8DF5(\u53EF\u80FD\u5BFC\u81F4\u6B7B\u9501)\nSTART TRANSACTION;\nUPDATE accounts SET balance = balance - 100 WHERE id = account_from;\nUPDATE accounts SET balance = balance + 100 WHERE id = account_to;\nCOMMIT;\n\n-- \u597D\u7684\u5B9E\u8DF5(\u907F\u514D\u6B7B\u9501)\nSTART TRANSACTION;\n-- \u786E\u4FDD\u6309ID\u5347\u5E8F\u64CD\u4F5C\nSET @id1 = LEAST(account_from, account_to);\nSET @id2 = GREATEST(account_from, account_to);\n\nUPDATE accounts SET balance = balance + (CASE WHEN id = account_from THEN -100 ELSE 100 END) \nWHERE id = @id1;\n\nUPDATE accounts SET balance = balance + (CASE WHEN id = account_from THEN -100 ELSE 100 END) \nWHERE id = @id2;\nCOMMIT;\n"})})]}),(0,r.jsxs)(c.A,{value:"case-studies",label:"\u6B7B\u9501\u6848\u4F8B\u5206\u6790",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u6790\u548C\u89E3\u51B3\u771F\u5B9E\u573A\u666F\u4E2D\u7684\u6B7B\u9501\u95EE\u9898"}),"\uFF1A"]}),(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"\u6848\u4F8B1: \u5E76\u53D1\u66F4\u65B0\u5BFC\u81F4\u7684\u6B7B\u9501"})}),(0,r.jsx)(s.p,{children:"\u95EE\u9898\u63CF\u8FF0\uFF1A\u7535\u5546\u7CFB\u7EDF\u4E2D\uFF0C\u8BA2\u5355\u5904\u7406\u548C\u5E93\u5B58\u66F4\u65B0\u540C\u65F6\u8FDB\u884C\u65F6\u9891\u7E41\u51FA\u73B0\u6B7B\u9501\u3002"}),(0,r.jsx)(s.p,{children:"\u6B7B\u9501\u65E5\u5FD7\uFF1A"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"------------------------\nLATEST DETECTED DEADLOCK\n------------------------\n2023-08-15 14:25:30 0x7f8a4c3bb700\n*** (1) TRANSACTION:\nTRANSACTION 10795, ACTIVE 0 sec starting index read\nmysql tables in use 1, locked 1\nLOCK WAIT 3 lock struct(s), heap size 1136, 2 row lock(s)\nMySQL thread id 115, OS thread handle 139929774170880, query id 42041 localhost root updating\nUPDATE inventory SET stock = stock - 1 WHERE product_id = 101 AND stock > 0\n\n*** (2) TRANSACTION:\nTRANSACTION 10794, ACTIVE 0 sec starting index read, thread declared inside InnoDB 5000\nmysql tables in use 2, locked 2\n4 lock struct(s), heap size 1136, 3 row lock(s)\nMySQL thread id 114, OS thread handle 139929773891328, query id 42036 localhost root updating\nUPDATE orders SET status = 'Processing' WHERE id = 5001 AND product_id = 101\n\n*** (1) HOLDS THE LOCK(S):\nRECORD LOCKS space id 10 page no 4 n bits 72 index PRIMARY of table `shop`.`orders` trx id 10795\n*** (2) HOLDS THE LOCK(S):\nRECORD LOCKS space id 11 page no 5 n bits 72 index PRIMARY of table `shop`.`inventory` trx id 10794\n*** (1) WAITING FOR THIS LOCK TO BE GRANTED:\nRECORD LOCKS space id 11 page no 5 n bits 72 index PRIMARY of table `shop`.`inventory` trx id 10795\n*** (2) WAITING FOR THIS LOCK TO BE GRANTED:\nRECORD LOCKS space id 10 page no 4 n bits 72 index PRIMARY of table `shop`.`orders` trx id 10794\n"})}),(0,r.jsx)(s.p,{children:"\u89E3\u51B3\u65B9\u6848\uFF1A"}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"\u7EDF\u4E00\u8BBF\u95EE\u987A\u5E8F\uFF1A\u5148\u66F4\u65B0inventory\u8868\uFF0C\u518D\u66F4\u65B0orders\u8868"}),"\n",(0,r.jsx)(s.li,{children:"\u4E8B\u52A1\u62C6\u5206\uFF1A\u5C06\u5E93\u5B58\u68C0\u67E5\u548C\u8BA2\u5355\u521B\u5EFA\u5206\u4E3A\u4E24\u4E2A\u72EC\u7ACB\u4E8B\u52A1"}),"\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528\u4E50\u89C2\u9501\uFF1A\u5E93\u5B58\u66F4\u65B0\u65F6\u4F7F\u7528\u6761\u4EF6\u68C0\u67E5\u800C\u4E0D\u662F\u9501\u5B9A\u8BFB"}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u6539\u8FDB\u540E\u7684\u4EE3\u7801\n-- \u5148\u68C0\u67E5\u5E93\u5B58\nSTART TRANSACTION;\nSELECT stock FROM inventory WHERE product_id = 101 FOR UPDATE;\n-- \u5982\u679C\u5E93\u5B58\u8DB3\u591F\uFF0C\u66F4\u65B0\u5E93\u5B58\u5E76\u63D0\u4EA4\nUPDATE inventory SET stock = stock - 1 WHERE product_id = 101;\nCOMMIT;\n\n-- \u518D\u5904\u7406\u8BA2\u5355\nSTART TRANSACTION;\nUPDATE orders SET status = 'Processing' WHERE id = 5001;\nCOMMIT;\n"})}),(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"\u6848\u4F8B2: \u5916\u952E\u7EA6\u675F\u5BFC\u81F4\u7684\u6B7B\u9501"})}),(0,r.jsx)(s.p,{children:"\u95EE\u9898\u63CF\u8FF0\uFF1A\u5305\u542B\u5916\u952E\u5173\u7CFB\u7684\u8868\u5728\u5E76\u53D1\u63D2\u5165\u548C\u66F4\u65B0\u65F6\u4EA7\u751F\u6B7B\u9501\u3002"}),(0,r.jsx)(s.p,{children:"\u89E3\u51B3\u65B9\u6848\uFF1A"}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"\u51CF\u5C11\u5916\u952E\u7EA6\u675F\u6216\u8003\u8651\u5728\u5E94\u7528\u5C42\u5B9E\u73B0\u7EA6\u675F"}),"\n",(0,r.jsx)(s.li,{children:"\u6309\u7167\u4E00\u81F4\u7684\u987A\u5E8F\u8BBF\u95EE\u76F8\u5173\u8868"}),"\n",(0,r.jsx)(s.li,{children:"\u4F18\u5316\u8868\u7ED3\u6784\uFF0C\u51CF\u5C11\u7EA7\u8054\u66F4\u65B0\u548C\u5220\u9664"}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u68C0\u67E5\u5916\u952E\u5B9A\u4E49\nSHOW CREATE TABLE child_table;\n\n-- \u8003\u8651\u4FEE\u6539\u5916\u952E\u9009\u9879\nALTER TABLE child_table \nDROP FOREIGN KEY fk_constraint_name,\nADD CONSTRAINT fk_constraint_name\nFOREIGN KEY (parent_id) REFERENCES parent_table(id)\nON DELETE NO ACTION  -- \u66FF\u4EE3CASCADE\nON UPDATE NO ACTION; -- \u66FF\u4EE3CASCADE\n\n-- \u6216\u5728\u5E94\u7528\u4EE3\u7801\u4E2D\u5B9E\u73B0\u7EA6\u675F\u903B\u8F91\n"})})]})]}),"\n",(0,r.jsx)(s.h2,{id:"4-\u67E5\u8BE2\u4F18\u5316\u4E0E\u6267\u884C\u8BA1\u5212",children:"4. \u67E5\u8BE2\u4F18\u5316\u4E0E\u6267\u884C\u8BA1\u5212"}),"\n",(0,r.jsx)(s.p,{children:"MySQL\u67E5\u8BE2\u4F18\u5316\u548C\u6267\u884C\u8BA1\u5212\u5206\u6790\u662F\u63D0\u9AD8\u6570\u636E\u5E93\u6027\u80FD\u7684\u5173\u952E\u6280\u672F\uFF0C\u5B83\u6D89\u53CA\u7406\u89E3\u67E5\u8BE2\u6267\u884C\u6D41\u7A0B\u3001\u89E3\u8BFB\u6267\u884C\u8BA1\u5212\u5E76\u91C7\u7528\u5408\u9002\u7684\u4F18\u5316\u7B56\u7565\u3002"}),"\n",(0,r.jsx)(s.mermaid,{value:"graph TD\n    A[SQL\u67E5\u8BE2] --\x3e B[\u67E5\u8BE2\u7F13\u5B58]\n    B -- \u547D\u4E2D\u7F13\u5B58 --\x3e C[\u8FD4\u56DE\u7ED3\u679C]\n    B -- \u672A\u547D\u4E2D\u7F13\u5B58 --\x3e D[\u89E3\u6790\u5668]\n    D --\x3e E[\u9884\u5904\u7406\u5668]\n    E --\x3e F[\u4F18\u5316\u5668]\n    F --\x3e G[\u6267\u884C\u5668]\n    G --\x3e H[\u5B58\u50A8\u5F15\u64CE]\n    H --\x3e I[\u8FD4\u56DE\u7ED3\u679C]\n    \n    F1[\u4F18\u5316\u9636\u6BB5] -.-> F\n    F1 -.-> F2[\u7EDF\u8BA1\u4FE1\u606F\u5206\u6790]\n    F1 -.-> F3[\u7D22\u5F15\u9009\u62E9]\n    F1 -.-> F4[\u8FDE\u63A5\u987A\u5E8F\u4F18\u5316]\n    F1 -.-> F5[\u6267\u884C\u8BA1\u5212\u751F\u6210]"}),"\n",(0,r.jsx)(s.h3,{id:"41-sql\u6267\u884C\u6D41\u7A0B",children:"4.1 SQL\u6267\u884C\u6D41\u7A0B"}),"\n",(0,r.jsx)(s.p,{children:"MySQL\u5904\u7406SQL\u67E5\u8BE2\u65F6\u4F1A\u7ECF\u8FC7\u4E00\u7CFB\u5217\u6B65\u9AA4\uFF0C\u4ECE\u89E3\u6790\u5230\u6267\u884C\uFF0C\u6BCF\u4E2A\u9636\u6BB5\u90FD\u6709\u91CD\u8981\u7684\u6027\u80FD\u5F71\u54CD\u3002"}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"execution-flow",label:"\u67E5\u8BE2\u6267\u884C\u6D41\u7A0B",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL\u67E5\u8BE2\u6267\u884C\u7684\u5B8C\u6574\u6D41\u7A0B\u5305\u62EC\u4EE5\u4E0B\u51E0\u4E2A\u9636\u6BB5"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u67E5\u8BE2\u7F13\u5B58\u68C0\u67E5\uFF08MySQL 8.0\u5DF2\u79FB\u9664\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u68C0\u67E5\u67E5\u8BE2\u662F\u5426\u5B8C\u5168\u5339\u914D\u7F13\u5B58\u4E2D\u7684\u67E5\u8BE2"}),"\n",(0,r.jsx)(s.li,{children:"\u5982\u679C\u547D\u4E2D\u7F13\u5B58\uFF0C\u76F4\u63A5\u8FD4\u56DE\u7ED3\u679C\uFF0C\u6D41\u7A0B\u7ED3\u675F"}),"\n",(0,r.jsx)(s.li,{children:"MySQL 8.0\u5DF2\u79FB\u9664\u67E5\u8BE2\u7F13\u5B58\u529F\u80FD"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u89E3\u6790\u9636\u6BB5"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8BCD\u6CD5\u5206\u6790\uFF1A\u8BC6\u522BSQL\u8BED\u53E5\u4E2D\u7684\u5173\u952E\u5B57\u3001\u8868\u540D\u3001\u5217\u540D\u7B49"}),"\n",(0,r.jsx)(s.li,{children:"\u8BED\u6CD5\u5206\u6790\uFF1A\u68C0\u67E5SQL\u8BED\u6CD5\u662F\u5426\u6B63\u786E"}),"\n",(0,r.jsx)(s.li,{children:"\u751F\u6210\u89E3\u6790\u6811\uFF1A\u521B\u5EFASQL\u8BED\u53E5\u7684\u5185\u90E8\u8868\u793A\u7ED3\u6784"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9884\u5904\u7406\u9636\u6BB5"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u68C0\u67E5\u8868\u548C\u5217\u662F\u5426\u5B58\u5728"}),"\n",(0,r.jsx)(s.li,{children:"\u68C0\u67E5\u6743\u9650"}),"\n",(0,r.jsx)(s.li,{children:"\u89E3\u6790\u540D\u79F0\u5E76\u5C06\u5176\u4E0E\u5B9E\u9645\u5BF9\u8C61\u5173\u8054"}),"\n",(0,r.jsx)(s.li,{children:"\u68C0\u67E5\u8BED\u53E5\u7684\u8BED\u4E49\u662F\u5426\u6709\u6548"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F18\u5316\u9636\u6BB5"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u7EDF\u8BA1\u4FE1\u606F\u5206\u6790\uFF1A\u8BC4\u4F30\u8868\u5927\u5C0F\u3001\u5217\u7684\u57FA\u6570\u3001\u7D22\u5F15\u5206\u5E03\u7B49"}),"\n",(0,r.jsx)(s.li,{children:"\u7D22\u5F15\u9009\u62E9\uFF1A\u786E\u5B9A\u6700\u4F73\u7D22\u5F15\u8BBF\u95EE\u65B9\u6CD5"}),"\n",(0,r.jsx)(s.li,{children:"\u8FDE\u63A5\u987A\u5E8F\u4F18\u5316\uFF1A\u51B3\u5B9A\u591A\u8868\u8FDE\u63A5\u7684\u6700\u4F73\u987A\u5E8F"}),"\n",(0,r.jsx)(s.li,{children:"\u751F\u6210\u6267\u884C\u8BA1\u5212\uFF1A\u521B\u5EFASQL\u8BED\u53E5\u6267\u884C\u7684\u8BE6\u7EC6\u6B65\u9AA4"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6267\u884C\u9636\u6BB5"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6839\u636E\u6267\u884C\u8BA1\u5212\u6267\u884CSQL\u64CD\u4F5C"}),"\n",(0,r.jsx)(s.li,{children:"\u4E0E\u5B58\u50A8\u5F15\u64CE\u4EA4\u4E92\u83B7\u53D6\u6570\u636E"}),"\n",(0,r.jsx)(s.li,{children:"\u5904\u7406\u7ED3\u679C\u96C6"}),"\n",(0,r.jsx)(s.li,{children:"\u8FD4\u56DE\u7ED3\u679C\u7ED9\u5BA2\u6237\u7AEF"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770B\u67E5\u8BE2\u6267\u884C\u5404\u9636\u6BB5\u65F6\u95F4\nSET profiling = 1;\nSELECT * FROM users WHERE status = 'active';\nSHOW PROFILE;\n\n-- \u67E5\u770B\u67E5\u8BE2\u4F18\u5316\u5668\u7684\u8DDF\u8E2A\u4FE1\u606F\nSET optimizer_trace = 'enabled=on';\nSELECT * FROM users WHERE status = 'active' ORDER BY created_at DESC LIMIT 10;\nSELECT * FROM information_schema.OPTIMIZER_TRACE;\n"})})]}),(0,r.jsxs)(c.A,{value:"parser",label:"\u89E3\u6790\u4E0E\u9884\u5904\u7406",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u89E3\u6790\u4E0E\u9884\u5904\u7406\u9636\u6BB5\u662FSQL\u6267\u884C\u7684\u57FA\u7840"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8BCD\u6CD5\u5206\u6790"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5C06SQL\u8BED\u53E5\u5206\u89E3\u4E3A\u6807\u8BB0\uFF08tokens\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"\u8BC6\u522B\u5173\u952E\u5B57\u3001\u6807\u8BC6\u7B26\u3001\u64CD\u4F5C\u7B26\u3001\u5E38\u91CF\u7B49"}),"\n",(0,r.jsx)(s.li,{children:"\u5904\u7406\u5B57\u7B26\u96C6\u548C\u7F16\u7801"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8BED\u6CD5\u5206\u6790"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6839\u636EMySQL\u8BED\u6CD5\u89C4\u5219\u68C0\u67E5SQL\u8BED\u53E5"}),"\n",(0,r.jsx)(s.li,{children:"\u6784\u5EFA\u89E3\u6790\u6811\uFF08parse tree\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"\u62A5\u544A\u8BED\u6CD5\u9519\u8BEF"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9884\u5904\u7406"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8868\u540D\u548C\u5217\u540D\u89E3\u6790\uFF1A\u5C06\u540D\u79F0\u6620\u5C04\u5230\u5B9E\u9645\u6570\u636E\u5E93\u5BF9\u8C61"}),"\n",(0,r.jsx)(s.li,{children:"\u6743\u9650\u68C0\u67E5\uFF1A\u9A8C\u8BC1\u7528\u6237\u662F\u5426\u6709\u6743\u6267\u884C\u8BE5\u67E5\u8BE2"}),"\n",(0,r.jsx)(s.li,{children:"\u8BED\u4E49\u5206\u6790\uFF1A\u68C0\u67E5\u67E5\u8BE2\u7684\u903B\u8F91\u6709\u6548\u6027"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5E38\u89C1\u89E3\u6790\u9519\u8BEF\u4E0E\u89E3\u51B3\u65B9\u6CD5"}),"\uFF1A"]}),(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u9519\u8BEF\u7C7B\u578B"}),(0,r.jsx)(s.th,{children:"\u793A\u4F8B\u9519\u8BEF\u4FE1\u606F"}),(0,r.jsx)(s.th,{children:"\u89E3\u51B3\u65B9\u6CD5"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u8BED\u6CD5\u9519\u8BEF"}),(0,r.jsx)(s.td,{children:"You have an error in your SQL syntax"}),(0,r.jsx)(s.td,{children:"\u68C0\u67E5SQL\u8BED\u6CD5\uFF0C\u7279\u522B\u662F\u62EC\u53F7\u3001\u5173\u952E\u5B57\u62FC\u5199"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u8868\u4E0D\u5B58\u5728"}),(0,r.jsx)(s.td,{children:"Table 'db.table' doesn't exist"}),(0,r.jsx)(s.td,{children:"\u786E\u8BA4\u8868\u540D\u548C\u6570\u636E\u5E93\u540D\u79F0"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u5217\u4E0D\u5B58\u5728"}),(0,r.jsx)(s.td,{children:"Unknown column 'column' in 'field list'"}),(0,r.jsx)(s.td,{children:"\u68C0\u67E5\u5217\u540D\u662F\u5426\u6B63\u786E\uFF0C\u6216\u8BE5\u5217\u662F\u5426\u5B58\u5728"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"\u6743\u9650\u95EE\u9898"}),(0,r.jsx)(s.td,{children:"Access denied for user"}),(0,r.jsx)(s.td,{children:"\u68C0\u67E5\u7528\u6237\u6743\u9650"})]})]})]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u8BED\u6CD5\u68C0\u67E5\uFF08\u4E0D\u6267\u884C\uFF09\nEXPLAIN FORMAT=JSON \nSELECT * FROM users WHERE id = 1;\n\n-- \u9884\u5904\u7406\u547D\u4EE4\u67E5\u770B\nPREPARE stmt FROM 'SELECT * FROM users WHERE id = ?';\nEXECUTE stmt USING 1;\nDEALLOCATE PREPARE stmt;\n"})})]}),(0,r.jsxs)(c.A,{value:"optimizer",label:"\u4F18\u5316\u5668",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F18\u5316\u5668\u8D1F\u8D23\u751F\u6210\u6700\u9AD8\u6548\u7684\u6267\u884C\u8BA1\u5212"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F18\u5316\u5668\u7C7B\u578B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u57FA\u4E8E\u89C4\u5219\u7684\u4F18\u5316\uFF08RBO\uFF09"}),"\uFF1A\u4F7F\u7528\u9884\u5B9A\u4E49\u89C4\u5219\u9009\u62E9\u6267\u884C\u7B56\u7565"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u57FA\u4E8E\u6210\u672C\u7684\u4F18\u5316\uFF08CBO\uFF09"}),"\uFF1A\u8BC4\u4F30\u591A\u4E2A\u6267\u884C\u8BA1\u5212\u7684\u6210\u672C\uFF0C\u9009\u62E9\u6210\u672C\u6700\u4F4E\u7684"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F18\u5316\u5668\u7684\u4E3B\u8981\u5DE5\u4F5C"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6761\u4EF6\u5316\u7B80"}),"\uFF1A\u7B80\u5316\u548C\u8F6C\u6362WHERE\u6761\u4EF6"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7D22\u5F15\u9009\u62E9"}),"\uFF1A\u9009\u62E9\u6700\u4F73\u7D22\u5F15\u8BBF\u95EE\u8DEF\u5F84"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u8FDE\u63A5\u4F18\u5316"}),"\uFF1A\u786E\u5B9A\u6700\u4F73\u8868\u8FDE\u63A5\u987A\u5E8F\u548C\u65B9\u6CD5"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5B50\u67E5\u8BE2\u8F6C\u6362"}),"\uFF1A\u5C1D\u8BD5\u5C06\u5B50\u67E5\u8BE2\u8F6C\u6362\u4E3A\u66F4\u9AD8\u6548\u7684\u5F62\u5F0F"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6392\u5E8F\u4F18\u5316"}),"\uFF1A\u51B3\u5B9A\u5982\u4F55\u5904\u7406ORDER BY\u5B50\u53E5"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7EDF\u8BA1\u4FE1\u606F\u7684\u4F5C\u7528"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8868\u884C\u6570\u3001\u5927\u5C0F\u548C\u5206\u5E03\u7EDF\u8BA1"}),"\n",(0,r.jsx)(s.li,{children:"\u7D22\u5F15\u57FA\u6570\u548C\u9009\u62E9\u6027"}),"\n",(0,r.jsx)(s.li,{children:"\u5217\u503C\u5206\u5E03"}),"\n",(0,r.jsx)(s.li,{children:"\u7528\u4E8E\u6210\u672C\u4F30\u7B97\u548C\u7D22\u5F15\u9009\u62E9"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u6536\u96C6\u8868\u7EDF\u8BA1\u4FE1\u606F\nANALYZE TABLE users;\n\n-- \u67E5\u770B\u8868\u7EDF\u8BA1\u4FE1\u606F\nSHOW TABLE STATUS LIKE 'users';\n\n-- \u67E5\u770B\u7D22\u5F15\u7EDF\u8BA1\u4FE1\u606F\nSHOW INDEX FROM users;\n\n-- MySQL 8.0+\u67E5\u770B\u76F4\u65B9\u56FE\u7EDF\u8BA1\nSELECT * FROM information_schema.COLUMN_STATISTICS \nWHERE SCHEMA_NAME = 'your_database' \nAND TABLE_NAME = 'users';\n\n-- \u63A7\u5236\u4F18\u5316\u5668\u884C\u4E3A\nSET optimizer_switch = 'index_merge=on,index_merge_union=on';\n\n-- \u4F18\u5316\u5668\u63D0\u793A(MySQL 8.0+)\nSELECT /*+ INDEX(users idx_email) */ * \nFROM users WHERE email LIKE 'a%';\n"})})]}),(0,r.jsxs)(c.A,{value:"execution",label:"\u6267\u884C\u5668",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6267\u884C\u5668\u8D1F\u8D23\u6309\u7167\u4F18\u5316\u5668\u751F\u6210\u7684\u8BA1\u5212\u6267\u884C\u67E5\u8BE2"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6267\u884C\u5668\u6D41\u7A0B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6253\u5F00\u8868\uFF1A\u4E3A\u6D89\u53CA\u7684\u6BCF\u4E2A\u8868\u521D\u59CB\u5316\u5904\u7406\u5668"}),"\n",(0,r.jsx)(s.li,{children:"\u6743\u9650\u9A8C\u8BC1\uFF1A\u518D\u6B21\u68C0\u67E5\u8868\u7EA7\u6743\u9650"}),"\n",(0,r.jsx)(s.li,{children:"\u6267\u884C\u64CD\u4F5C\uFF1A\u6309\u7167\u6267\u884C\u8BA1\u5212\u8FDB\u884C\u8868\u626B\u63CF\u3001\u8FDE\u63A5\u7B49\u64CD\u4F5C"}),"\n",(0,r.jsx)(s.li,{children:"\u7ED3\u679C\u5904\u7406\uFF1A\u8FD4\u56DE\u6216\u5B58\u50A8\u67E5\u8BE2\u7ED3\u679C"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u64CD\u4F5C\u7C7B\u578B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8868\u626B\u63CF\u64CD\u4F5C\uFF1A\u5168\u8868\u626B\u63CF\u3001\u7D22\u5F15\u626B\u63CF"}),"\n",(0,r.jsx)(s.li,{children:"\u8FDE\u63A5\u64CD\u4F5C\uFF1A\u5D4C\u5957\u5FAA\u73AF\u8FDE\u63A5\u3001\u54C8\u5E0C\u8FDE\u63A5\u7B49"}),"\n",(0,r.jsx)(s.li,{children:"\u6392\u5E8F\u64CD\u4F5C\uFF1A\u5185\u5B58\u6392\u5E8F\u3001\u6587\u4EF6\u6392\u5E8F"}),"\n",(0,r.jsx)(s.li,{children:"\u805A\u5408\u64CD\u4F5C\uFF1A\u5206\u7EC4\u548C\u805A\u5408\u8BA1\u7B97"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B58\u50A8\u5F15\u64CE\u63A5\u53E3"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6267\u884C\u5668\u901A\u8FC7\u5B58\u50A8\u5F15\u64CEAPI\u83B7\u53D6\u6570\u636E"}),"\n",(0,r.jsx)(s.li,{children:"\u4E0D\u540C\u5F15\u64CE\u5B9E\u73B0\u4E0D\u540C\u7684\u8BBF\u95EE\u65B9\u6CD5"}),"\n",(0,r.jsx)(s.li,{children:"\u5E38\u89C1\u8C03\u7528\uFF1A\u7D22\u5F15\u8BFB\u53D6\u3001\u8303\u56F4\u626B\u63CF\u3001\u5168\u8868\u626B\u63CF"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u6267\u884C\u7EDF\u8BA1\u4FE1\u606F\nSHOW STATUS LIKE 'Handler%';\n\n-- \u67E5\u8BE2\u6267\u884C\u72B6\u6001\nSHOW PROCESSLIST;\n\n-- \u6162\u67E5\u8BE2\u76D1\u63A7\nSHOW VARIABLES LIKE 'slow_query_log%';\nSHOW VARIABLES LIKE 'long_query_time';\n\n-- \u7EC8\u6B62\u957F\u65F6\u95F4\u8FD0\u884C\u7684\u67E5\u8BE2\n-- \u5148\u83B7\u53D6\u67E5\u8BE2ID\nSHOW PROCESSLIST;\n-- \u7136\u540E\u7EC8\u6B62\nKILL QUERY <query_id>;\n"})})]})]}),"\n",(0,r.jsx)(s.h3,{id:"42-\u6267\u884C\u8BA1\u5212\u89E3\u8BFB",children:"4.2 \u6267\u884C\u8BA1\u5212\u89E3\u8BFB"}),"\n",(0,r.jsx)(s.p,{children:"EXPLAIN\u547D\u4EE4\u662FMySQL\u4E2D\u5206\u6790\u548C\u4F18\u5316\u67E5\u8BE2\u6027\u80FD\u7684\u91CD\u8981\u5DE5\u5177\uFF0C\u5B83\u63ED\u793A\u4E86MySQL\u5982\u4F55\u6267\u884C\u67E5\u8BE2\uFF0C\u5305\u62EC\u8868\u7684\u8BBF\u95EE\u65B9\u6CD5\u3001\u8FDE\u63A5\u7C7B\u578B\u548C\u7D22\u5F15\u4F7F\u7528\u60C5\u51B5\u3002"}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"explain-basics",label:"EXPLAIN\u57FA\u7840",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"EXPLAIN\u547D\u4EE4\u7684\u57FA\u672C\u7528\u6CD5"}),"\uFF1A"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u57FA\u672C\u8BED\u6CD5\nEXPLAIN SELECT * FROM users WHERE status = 'active' ORDER BY created_at DESC LIMIT 10;\n\n-- MySQL 8.0\u589E\u5F3A\u8BED\u6CD5\nEXPLAIN FORMAT=JSON SELECT * FROM users WHERE status = 'active';\nEXPLAIN ANALYZE SELECT * FROM users WHERE status = 'active';\n"})}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"EXPLAIN\u8F93\u51FA\u7684\u5173\u952E\u5217"}),"\uFF1A"]}),(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u5217\u540D"}),(0,r.jsx)(s.th,{children:"\u8BF4\u660E"}),(0,r.jsx)(s.th,{children:"\u91CD\u8981\u503C"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"id"})}),(0,r.jsx)(s.td,{children:"\u67E5\u8BE2\u4E2DSELECT\u7684\u5E8F\u53F7"}),(0,r.jsx)(s.td,{children:"\u6570\u5B57\u8D8A\u5927\u8D8A\u5148\u6267\u884C\uFF1B\u76F8\u540C\u5219\u4ECE\u4E0A\u5F80\u4E0B"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"select_type"})}),(0,r.jsx)(s.td,{children:"SELECT\u67E5\u8BE2\u7C7B\u578B"}),(0,r.jsx)(s.td,{children:"SIMPLE, PRIMARY, SUBQUERY, DERIVED\u7B49"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"table"})}),(0,r.jsx)(s.td,{children:"\u8868\u540D"}),(0,r.jsx)(s.td,{children:"\u5B9E\u9645\u8868\u540D\u6216\u522B\u540D"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"type"})}),(0,r.jsx)(s.td,{children:"\u8BBF\u95EE\u7C7B\u578B"}),(0,r.jsx)(s.td,{children:"system > const > eq_ref > ref > range > index > ALL"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"possible_keys"})}),(0,r.jsx)(s.td,{children:"\u53EF\u80FD\u4F7F\u7528\u7684\u7D22\u5F15"}),(0,r.jsx)(s.td,{children:"\u53EF\u80FD\u4F7F\u7528\u7684\u7D22\u5F15\u5217\u8868"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"key"})}),(0,r.jsx)(s.td,{children:"\u5B9E\u9645\u4F7F\u7528\u7684\u7D22\u5F15"}),(0,r.jsx)(s.td,{children:"\u5B9E\u9645\u9009\u62E9\u7684\u7D22\u5F15"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"key_len"})}),(0,r.jsx)(s.td,{children:"\u4F7F\u7528\u7684\u7D22\u5F15\u957F\u5EA6"}),(0,r.jsx)(s.td,{children:"\u4F7F\u7528\u7D22\u5F15\u5B57\u8282\u957F\u5EA6"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"ref"})}),(0,r.jsx)(s.td,{children:"\u7D22\u5F15\u6BD4\u8F83\u7684\u5217"}),(0,r.jsx)(s.td,{children:"\u54EA\u4E9B\u5217\u4E0E\u7D22\u5F15\u8FDB\u884C\u6BD4\u8F83"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"rows"})}),(0,r.jsx)(s.td,{children:"\u4F30\u8BA1\u68C0\u67E5\u7684\u884C\u6570"}),(0,r.jsx)(s.td,{children:"\u4F30\u7B97\u7684\u8BB0\u5F55\u6570\uFF0C\u8D8A\u5C11\u8D8A\u597D"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"filtered"})}),(0,r.jsx)(s.td,{children:"\u6309\u6761\u4EF6\u8FC7\u6EE4\u7684\u767E\u5206\u6BD4"}),(0,r.jsx)(s.td,{children:"\u8D8A\u9AD8\u8D8A\u597D"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Extra"})}),(0,r.jsx)(s.td,{children:"\u9644\u52A0\u4FE1\u606F"}),(0,r.jsx)(s.td,{children:"Using index, Using filesort\u7B49"})]})]})]})]}),(0,r.jsxs)(c.A,{value:"access-types",label:"\u8BBF\u95EE\u7C7B\u578B",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"type\u5217\u8868\u793A\u8868\u7684\u8BBF\u95EE\u65B9\u6CD5\uFF0C\u662F\u5224\u65AD\u67E5\u8BE2\u597D\u574F\u7684\u91CD\u8981\u4F9D\u636E"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"system"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8868\u4E2D\u53EA\u6709\u4E00\u884C\u8BB0\u5F55"}),"\n",(0,r.jsx)(s.li,{children:"\u6027\u80FD\u6700\u4F18"}),"\n",(0,r.jsx)(s.li,{children:"\u975E\u5E38\u7F55\u89C1"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"const"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u901A\u8FC7\u4E3B\u952E\u6216\u552F\u4E00\u7D22\u5F15\u8BBF\u95EE\u786E\u5B9A\u552F\u4E00\u4E00\u884C\u6570\u636E"}),"\n",(0,r.jsx)(s.li,{children:"\u975E\u5E38\u5FEB"}),"\n",(0,r.jsxs)(s.li,{children:["\u4F8B\uFF1A",(0,r.jsx)(s.code,{children:"WHERE id = 1"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"eq_ref"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8FDE\u63A5\u67E5\u8BE2\u4E2D\u4F7F\u7528\u4E3B\u952E\u6216\u552F\u4E00\u7D22\u5F15\u5173\u8054"}),"\n",(0,r.jsx)(s.li,{children:"\u6BCF\u4E2A\u7D22\u5F15\u952E\u503C\u53EA\u8BFB\u53D6\u4E00\u884C\u6570\u636E"}),"\n",(0,r.jsxs)(s.li,{children:["\u4F8B\uFF1A",(0,r.jsx)(s.code,{children:"t1 JOIN t2 ON t1.id = t2.id"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"ref"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u975E\u552F\u4E00\u7D22\u5F15\u8BBF\u95EE\uFF0C\u53EF\u80FD\u627E\u5230\u591A\u4E2A\u5339\u914D\u884C"}),"\n",(0,r.jsxs)(s.li,{children:["\u4F8B\uFF1A",(0,r.jsx)(s.code,{children:"WHERE status = 'active'"}),"\uFF08status\u6709\u7D22\u5F15\uFF09"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"range"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u7D22\u5F15\u8303\u56F4\u626B\u63CF"}),"\n",(0,r.jsxs)(s.li,{children:["\u4F8B\uFF1A",(0,r.jsx)(s.code,{children:"WHERE id BETWEEN 1 AND 10"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"index"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5168\u7D22\u5F15\u626B\u63CF\uFF0C\u626B\u63CF\u6574\u4E2A\u7D22\u5F15\u800C\u975E\u8868"}),"\n",(0,r.jsx)(s.li,{children:"\u4F8B\uFF1A\u7D22\u5F15\u8986\u76D6\u67E5\u8BE2\uFF0C\u4F46\u65E0\u6CD5\u4F7F\u7528\u7D22\u5F15\u8FC7\u6EE4"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"ALL"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5168\u8868\u626B\u63CF"}),"\n",(0,r.jsx)(s.li,{children:"\u6027\u80FD\u6700\u5DEE"}),"\n",(0,r.jsx)(s.li,{children:"\u9700\u8981\u4F18\u5316\u7684\u9996\u8981\u76EE\u6807"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- const\u8BBF\u95EE\u7C7B\u578B\nEXPLAIN SELECT * FROM users WHERE id = 1;\n\n-- eq_ref\u8BBF\u95EE\u7C7B\u578B\nEXPLAIN SELECT * FROM orders o JOIN users u ON o.user_id = u.id;\n\n-- ref\u8BBF\u95EE\u7C7B\u578B\nEXPLAIN SELECT * FROM users WHERE status = 'active';\n\n-- range\u8BBF\u95EE\u7C7B\u578B\nEXPLAIN SELECT * FROM users WHERE id BETWEEN 1 AND 100;\n\n-- ALL\u8BBF\u95EE\u7C7B\u578B(\u5168\u8868\u626B\u63CF\uFF0C\u901A\u5E38\u9700\u4F18\u5316)\nEXPLAIN SELECT * FROM users WHERE name LIKE '%John%';\n"})})]}),(0,r.jsxs)(c.A,{value:"extra-info",label:"Extra\u4FE1\u606F",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Extra\u5217\u5305\u542B\u5173\u4E8EMySQL\u5982\u4F55\u89E3\u6790\u67E5\u8BE2\u7684\u91CD\u8981\u4FE1\u606F"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Using index"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528\u8986\u76D6\u7D22\u5F15\uFF0C\u4E0D\u9700\u8981\u56DE\u8868"}),"\n",(0,r.jsx)(s.li,{children:"\u6027\u80FD\u5F88\u597D"}),"\n",(0,r.jsx)(s.li,{children:"\u4F8B\uFF1A\u6240\u6709\u9700\u8981\u7684\u5217\u90FD\u5728\u7D22\u5F15\u4E2D"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Using where"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5B58\u50A8\u5F15\u64CE\u8FD4\u56DE\u7684\u8BB0\u5F55\u9700\u8981\u5728server\u5C42\u8FC7\u6EE4"}),"\n",(0,r.jsx)(s.li,{children:"\u4F8B\uFF1A\u90E8\u5206WHERE\u6761\u4EF6\u65E0\u6CD5\u4F7F\u7528\u7D22\u5F15"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Using temporary"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9700\u8981\u521B\u5EFA\u4E34\u65F6\u8868"}),"\n",(0,r.jsx)(s.li,{children:"\u6027\u80FD\u5F00\u9500\u5927"}),"\n",(0,r.jsx)(s.li,{children:"\u4F8B\uFF1A\u67E5\u8BE2\u5305\u542BGROUP BY/DISTINCT\u548CORDER BY\u4E0D\u540C\u5217"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Using filesort"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9700\u8981\u989D\u5916\u7684\u6392\u5E8F\u64CD\u4F5C"}),"\n",(0,r.jsx)(s.li,{children:"\u6027\u80FD\u5F00\u9500\u8F83\u5927"}),"\n",(0,r.jsx)(s.li,{children:"\u4F8B\uFF1AORDER BY\u5B50\u53E5\u4E2D\u7684\u5217\u4E0D\u5728\u7D22\u5F15\u4E2D\u6216\u987A\u5E8F\u4E0D\u4E00\u81F4"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Using index condition"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u7D22\u5F15\u6761\u4EF6\u4E0B\u63A8(ICP)\uFF0C\u5728\u5B58\u50A8\u5F15\u64CE\u5C42\u8FC7\u6EE4\u6570\u636E"}),"\n",(0,r.jsx)(s.li,{children:"MySQL 5.6+\u7279\u6027"}),"\n",(0,r.jsx)(s.li,{children:"\u63D0\u9AD8\u6027\u80FD"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Using join buffer"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528\u8FDE\u63A5\u7F13\u51B2"}),"\n",(0,r.jsx)(s.li,{children:"\u901A\u5E38\u8868\u793A\u8FDE\u63A5\u4E0D\u9AD8\u6548"}),"\n",(0,r.jsx)(s.li,{children:"\u4F8B\uFF1A\u6CA1\u6709\u4F7F\u7528\u7D22\u5F15\u7684\u8868\u8FDE\u63A5"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u8986\u76D6\u7D22\u5F15\u793A\u4F8B\nEXPLAIN SELECT id, status FROM users WHERE status = 'active';\n-- Extra: Using index\n\n-- \u4F7F\u7528\u4E34\u65F6\u8868\u793A\u4F8B\nEXPLAIN SELECT status, COUNT(*) FROM users GROUP BY status ORDER BY created_at;\n-- Extra: Using temporary; Using filesort\n\n-- \u7D22\u5F15\u6761\u4EF6\u4E0B\u63A8\u793A\u4F8B\nEXPLAIN SELECT * FROM users WHERE name LIKE 'Jo%' AND status = 'active';\n-- Extra: Using index condition\n\n-- \u591A\u91CD\u6392\u5E8F\u793A\u4F8B\nEXPLAIN SELECT * FROM users ORDER BY status, name;\n-- \u53EF\u80FD\u663E\u793A\uFF1AUsing filesort\n"})})]}),(0,r.jsxs)(c.A,{value:"json-format",label:"JSON\u683C\u5F0F\u89E3\u6790",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL 8.0\u7684EXPLAIN FORMAT=JSON\u63D0\u4F9B\u4E86\u66F4\u8BE6\u7EC6\u7684\u6267\u884C\u8BA1\u5212\u4FE1\u606F"}),"\uFF1A"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"EXPLAIN FORMAT=JSON \nSELECT u.*, o.order_id \nFROM users u \nJOIN orders o ON u.id = o.user_id \nWHERE u.status = 'active';\n"})}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"JSON\u683C\u5F0F\u7684\u5173\u952E\u4F18\u52BF"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6210\u672C\u4F30\u7B97\u8BE6\u60C5"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u67E5\u8BE2\u6210\u672C\u7EC6\u8282"}),"\n",(0,r.jsx)(s.li,{children:"\u8BBF\u95EE\u65B9\u6CD5\u8BC4\u4F30"}),"\n",(0,r.jsx)(s.li,{children:"\u7D22\u5F15\u4F7F\u7528\u7EC6\u8282"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5D4C\u5957\u5FAA\u73AF\u7EC6\u8282"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5FAA\u73AF\u8FED\u4EE3\u4FE1\u606F"}),"\n",(0,r.jsx)(s.li,{children:"\u6761\u4EF6\u8BC4\u4F30"}),"\n",(0,r.jsx)(s.li,{children:"\u8FC7\u6EE4\u7387"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7F13\u51B2\u4F7F\u7528\u60C5\u51B5"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4E34\u65F6\u8868\u4FE1\u606F"}),"\n",(0,r.jsx)(s.li,{children:"\u6392\u5E8F\u7F13\u51B2\u7EC6\u8282"}),"\n",(0,r.jsx)(s.li,{children:"\u8FDE\u63A5\u7F13\u51B2\u914D\u7F6E"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7D22\u5F15\u9009\u62E9\u7406\u7531"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u663E\u793A\u4E3A\u4F55\u9009\u62E9\u7279\u5B9A\u7D22\u5F15"}),"\n",(0,r.jsx)(s.li,{children:"\u4E3A\u4F55\u62D2\u7EDD\u5176\u4ED6\u7D22\u5F15"}),"\n",(0,r.jsx)(s.li,{children:"\u57FA\u4E8E\u6210\u672C\u7684\u51B3\u7B56"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"EXPLAIN ANALYZE"}),"\uFF08MySQL 8.0.18+\uFF09:"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"EXPLAIN ANALYZE \nSELECT * FROM users WHERE status = 'active' \nORDER BY created_at DESC LIMIT 10;\n"})}),(0,r.jsx)(s.p,{children:"\u6B64\u547D\u4EE4\u4E0D\u4EC5\u663E\u793A\u6267\u884C\u8BA1\u5212\uFF0C\u8FD8\u4F1A\u5B9E\u9645\u6267\u884C\u67E5\u8BE2\u5E76\u663E\u793A\u6267\u884C\u65F6\u95F4\u548C\u5B9E\u9645\u884C\u6570\uFF0C\u662F\u4F18\u5316\u67E5\u8BE2\u7684\u5F3A\u5927\u5DE5\u5177\u3002"})]})]}),"\n",(0,r.jsx)(s.h3,{id:"43-\u67E5\u8BE2\u4F18\u5316\u7B56\u7565",children:"4.3 \u67E5\u8BE2\u4F18\u5316\u7B56\u7565"}),"\n",(0,r.jsx)(s.p,{children:"\u826F\u597D\u7684\u67E5\u8BE2\u4F18\u5316\u7B56\u7565\u53EF\u4EE5\u663E\u8457\u63D0\u9AD8\u6570\u636E\u5E93\u6027\u80FD\uFF0C\u5305\u62ECSQL\u8BED\u53E5\u4F18\u5316\u3001\u7D22\u5F15\u4F18\u5316\u548C\u67E5\u8BE2\u91CD\u5199\u6280\u672F\u3002"}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"sql-optimization",label:"SQL\u8BED\u53E5\u4F18\u5316",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u57FA\u672C\u7684SQL\u4F18\u5316\u539F\u5219"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u53EA\u67E5\u8BE2\u9700\u8981\u7684\u5217"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4E0D\u63A8\u8350\nSELECT * FROM users WHERE status = 'active';\n\n-- \u63A8\u8350\nSELECT id, name, email FROM users WHERE status = 'active';\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9650\u5236\u7ED3\u679C\u96C6\u5927\u5C0F"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4F7F\u7528LIMIT\u63A7\u5236\u8FD4\u56DE\u884C\u6570\nSELECT * FROM logs ORDER BY created_at DESC LIMIT 100;\n\n-- \u5206\u9875\u67E5\u8BE2\u4F18\u5316\nSELECT * FROM products \nWHERE id > 10000 -- \u4E0A\u6B21\u67E5\u8BE2\u7684\u6700\u540EID\nORDER BY id LIMIT 20;\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u907F\u514D\u5168\u8868\u626B\u63CF"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4E0D\u63A8\u8350(\u5168\u8868\u626B\u63CF)\nSELECT * FROM users WHERE YEAR(created_at) = 2023;\n\n-- \u63A8\u8350(\u4F7F\u7528\u7D22\u5F15)\nSELECT * FROM users \nWHERE created_at >= '2023-01-01' AND created_at < '2024-01-01';\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F18\u5316\u5B50\u67E5\u8BE2"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4E0D\u63A8\u8350(\u76F8\u5173\u5B50\u67E5\u8BE2)\nSELECT * FROM orders o WHERE EXISTS (\n    SELECT 1 FROM order_items oi WHERE oi.order_id = o.id AND oi.price > 100\n);\n\n-- \u63A8\u8350(\u4F7F\u7528JOIN)\nSELECT DISTINCT o.* \nFROM orders o\nJOIN order_items oi ON o.id = oi.order_id\nWHERE oi.price > 100;\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u907F\u514D\u9690\u5F0F\u7C7B\u578B\u8F6C\u6362"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4E0D\u63A8\u8350(\u5BFC\u81F4\u7D22\u5F15\u5931\u6548)\nSELECT * FROM users WHERE id = '10';\n\n-- \u63A8\u8350(\u4FDD\u6301\u7C7B\u578B\u4E00\u81F4)\nSELECT * FROM users WHERE id = 10;\n"})}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"index-optimization",label:"\u7D22\u5F15\u4F18\u5316",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6709\u6548\u5229\u7528\u7D22\u5F15\u7684\u7B56\u7565"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E3A\u5E38\u7528\u67E5\u8BE2\u6DFB\u52A0\u5408\u9002\u7684\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u9488\u5BF9\u5E38\u89C1\u67E5\u8BE2\u521B\u5EFA\u590D\u5408\u7D22\u5F15\nCREATE INDEX idx_status_created \nON users(status, created_at);\n\n-- \u5E38\u7528\u67E5\u8BE2\u73B0\u5728\u53EF\u4EE5\u9AD8\u6548\u6267\u884C\nSELECT * FROM users \nWHERE status = 'active' \nORDER BY created_at DESC LIMIT 10;\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8986\u76D6\u7D22\u5F15\u4F18\u5316"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFA\u5305\u542B\u6240\u6709\u9700\u8981\u5217\u7684\u7D22\u5F15\nCREATE INDEX idx_product_cover \nON products(category_id, status, name, price);\n\n-- \u67E5\u8BE2\u53EA\u4F7F\u7528\u7D22\u5F15\u4E2D\u7684\u5217\uFF0C\u907F\u514D\u56DE\u8868\nSELECT name, price FROM products\nWHERE category_id = 5 AND status = 'active';\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u524D\u7F00\u7D22\u5F15\u4F18\u5316"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5BF9\u957F\u5B57\u7B26\u4E32\u5217\u4F7F\u7528\u524D\u7F00\u7D22\u5F15\nCREATE INDEX idx_email_prefix ON users(email(10));\n\n-- \u67E5\u627E\u524D\u7F00\u9009\u62E9\u6027\nSELECT \n  COUNT(DISTINCT LEFT(email, 5))/COUNT(*) AS sel5,\n  COUNT(DISTINCT LEFT(email, 10))/COUNT(*) AS sel10,\n  COUNT(DISTINCT LEFT(email, 15))/COUNT(*) AS sel15\nFROM users;\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7D22\u5F15\u63D0\u793A"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5F3A\u5236\u4F7F\u7528\u7279\u5B9A\u7D22\u5F15\nSELECT * FROM products USE INDEX(idx_category) \nWHERE category_id = 5;\n\n-- \u5FFD\u7565\u7279\u5B9A\u7D22\u5F15\nSELECT * FROM products IGNORE INDEX(idx_status) \nWHERE category_id = 5 AND status = 'active';\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5EF6\u8FDF\u5173\u8054\u4F18\u5316"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4F7F\u7528\u8986\u76D6\u7D22\u5F15\u548C\u5EF6\u8FDF\u5173\u8054\u5904\u7406\u5927\u7ED3\u679C\u96C6\nSELECT u.* FROM users u\nJOIN (\n  SELECT id FROM users \n  WHERE status = 'active'\n  ORDER BY created_at DESC\n  LIMIT 1000\n) tmp ON u.id = tmp.id;\n"})}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"query-rewrite",label:"\u67E5\u8BE2\u91CD\u5199\u6280\u672F",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u67E5\u8BE2\u91CD\u5199\u6280\u672F\u53EF\u4EE5\u6539\u53D8\u67E5\u8BE2\u7684\u5F62\u5F0F\u4F46\u4FDD\u6301\u529F\u80FD\u7B49\u4EF7"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"IN\u5B50\u53E5\u66FF\u6362OR"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4E0D\u63A8\u8350\nSELECT * FROM products \nWHERE category_id = 1 OR category_id = 2 OR category_id = 3;\n\n-- \u63A8\u8350\nSELECT * FROM products \nWHERE category_id IN (1, 2, 3);\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"UNION ALL\u66FF\u6362UNION"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4F7F\u7528UNION\uFF08\u6267\u884C\u53BB\u91CD\uFF09\nSELECT * FROM orders_2022\nUNION\nSELECT * FROM orders_2023;\n\n-- \u4F7F\u7528UNION ALL\uFF08\u4E0D\u53BB\u91CD\uFF0C\u6027\u80FD\u66F4\u597D\uFF09\nSELECT * FROM orders_2022\nUNION ALL\nSELECT * FROM orders_2023;\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6D3E\u751F\u8868\u4F18\u5316"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u539F\u59CB\u67E5\u8BE2\nSELECT * FROM orders o\nWHERE o.amount > (\n    SELECT AVG(amount) FROM orders\n);\n\n-- \u4F18\u5316\u540E\uFF08\u6D3E\u751F\u8868\uFF09\nSELECT o.* FROM orders o,\n(SELECT AVG(amount) AS avg_amount FROM orders) t\nWHERE o.amount > t.avg_amount;\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5229\u7528EXISTS\u66FF\u4EE3IN\u5B50\u67E5\u8BE2"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4F7F\u7528IN\u5B50\u67E5\u8BE2\nSELECT * FROM orders \nWHERE customer_id IN (\n    SELECT id FROM customers WHERE country = 'USA'\n);\n\n-- \u4F7F\u7528EXISTS\uFF08\u901A\u5E38\u66F4\u9AD8\u6548\uFF09\nSELECT * FROM orders o\nWHERE EXISTS (\n    SELECT 1 FROM customers c \n    WHERE c.id = o.customer_id AND c.country = 'USA'\n);\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F7F\u7528WITH\u5B50\u53E5\uFF08CTE\uFF09\u4F18\u5316\u590D\u6742\u67E5\u8BE2"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4F7F\u7528CTE\u7B80\u5316\u590D\u6742\u67E5\u8BE2\uFF08MySQL 8.0+\uFF09\nWITH customer_stats AS (\n    SELECT customer_id, COUNT(*) AS order_count, \n    SUM(amount) AS total_spent\n    FROM orders\n    GROUP BY customer_id\n)\nSELECT c.name, cs.order_count, cs.total_spent\nFROM customers c\nJOIN customer_stats cs ON c.id = cs.customer_id\nWHERE cs.total_spent > 10000;\n"})}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"common-mistakes",label:"\u5E38\u89C1\u9519\u8BEF",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u907F\u514D\u8FD9\u4E9B\u5E38\u89C1\u7684\u67E5\u8BE2\u6027\u80FD\u8BEF\u533A"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"**SELECT ***\uFF1A"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u95EE\u9898\uFF1A\u68C0\u7D22\u4E0D\u9700\u8981\u7684\u5217\uFF0C\u589E\u52A0I/O\u548C\u7F51\u7EDC\u5F00\u9500"}),"\n",(0,r.jsx)(s.li,{children:"\u89E3\u51B3\uFF1A\u53EA\u9009\u62E9\u9700\u8981\u7684\u5217"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u907F\u514D\nSELECT * FROM large_table;\n-- \u4F18\u5316\nSELECT id, name FROM large_table;\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u51FD\u6570\u4F5C\u7528\u4E8E\u7D22\u5F15\u5217"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u95EE\u9898\uFF1A\u5BFC\u81F4\u7D22\u5F15\u5931\u6548"}),"\n",(0,r.jsx)(s.li,{children:"\u89E3\u51B3\uFF1A\u907F\u514D\u5728\u7D22\u5F15\u5217\u4E0A\u4F7F\u7528\u51FD\u6570"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u907F\u514D\nSELECT * FROM orders WHERE MONTH(order_date) = 6;\n-- \u4F18\u5316\nSELECT * FROM orders \nWHERE order_date >= '2023-06-01' AND order_date < '2023-07-01';\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9690\u5F0F\u7C7B\u578B\u8F6C\u6362"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u95EE\u9898\uFF1A\u5BFC\u81F4\u7D22\u5F15\u5931\u6548\uFF0C\u6267\u884C\u5168\u8868\u626B\u63CF"}),"\n",(0,r.jsx)(s.li,{children:"\u89E3\u51B3\uFF1A\u4FDD\u6301\u7C7B\u578B\u4E00\u81F4\u6027"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u907F\u514D\nSELECT * FROM users WHERE status = 1; -- status\u662FVARCHAR\n-- \u4F18\u5316\nSELECT * FROM users WHERE status = '1';\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5927\u8868JOIN\u65E0\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u95EE\u9898\uFF1A\u5BFC\u81F4\u6027\u80FD\u707E\u96BE"}),"\n",(0,r.jsx)(s.li,{children:"\u89E3\u51B3\uFF1A\u786E\u4FDDJOIN\u5217\u6709\u9002\u5F53\u7684\u7D22\u5F15"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5728JOIN\u524D\u786E\u4FDD\u7D22\u5F15\nCREATE INDEX idx_user_id ON orders(user_id);\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E0D\u5FC5\u8981\u7684ORDER BY"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u95EE\u9898\uFF1A\u5BFC\u81F4\u989D\u5916\u6392\u5E8F\u64CD\u4F5C"}),"\n",(0,r.jsx)(s.li,{children:"\u89E3\u51B3\uFF1A\u53EA\u5728\u9700\u8981\u65F6\u4F7F\u7528ORDER BY"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u907F\u514D(\u5982\u679C\u5E94\u7528\u4E0D\u5173\u5FC3\u987A\u5E8F)\nSELECT * FROM users ORDER BY created_at;\n-- \u4F18\u5316\nSELECT * FROM users; -- \u6CA1\u6709ORDER BY\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"LIMIT\u4E0D\u5E26ORDER BY"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u95EE\u9898\uFF1A\u7ED3\u679C\u4E0D\u786E\u5B9A"}),"\n",(0,r.jsx)(s.li,{children:"\u89E3\u51B3\uFF1A\u4F7F\u7528ORDER BY\u786E\u4FDD\u7ED3\u679C\u4E00\u81F4\u6027"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u907F\u514D\nSELECT * FROM users LIMIT 10;\n-- \u4F18\u5316\nSELECT * FROM users ORDER BY id LIMIT 10;\n"})}),"\n"]}),"\n"]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"44-join\u4F18\u5316\u6280\u5DE7",children:"4.4 JOIN\u4F18\u5316\u6280\u5DE7"}),"\n",(0,r.jsx)(s.p,{children:"\u8FDE\u63A5\u67E5\u8BE2\u662FSQL\u4E2D\u6700\u5F3A\u5927\u4E5F\u6700\u5BB9\u6613\u5BFC\u81F4\u6027\u80FD\u95EE\u9898\u7684\u64CD\u4F5C\u4E4B\u4E00\uFF0C\u5408\u7406\u4F18\u5316JOIN\u64CD\u4F5C\u53EF\u4EE5\u663E\u8457\u63D0\u9AD8\u67E5\u8BE2\u6027\u80FD\u3002"}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"join-types",label:"\u8FDE\u63A5\u7C7B\u578B",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL\u652F\u6301\u591A\u79CDJOIN\u7C7B\u578B\u548C\u5B9E\u73B0\u7B97\u6CD5"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5185\u8FDE\u63A5(INNER JOIN)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4EC5\u8FD4\u56DE\u4E24\u8868\u4E2D\u5339\u914D\u7684\u884C"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"SELECT u.name, o.order_id\nFROM users u\nINNER JOIN orders o ON u.id = o.user_id;\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5DE6\u5916\u8FDE\u63A5(LEFT JOIN)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8FD4\u56DE\u5DE6\u8868\u6240\u6709\u884C\uFF0C\u53F3\u8868\u4E0D\u5339\u914D\u5219\u4E3ANULL"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"SELECT u.name, o.order_id\nFROM users u\nLEFT JOIN orders o ON u.id = o.user_id;\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u53F3\u5916\u8FDE\u63A5(RIGHT JOIN)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8FD4\u56DE\u53F3\u8868\u6240\u6709\u884C\uFF0C\u5DE6\u8868\u4E0D\u5339\u914D\u5219\u4E3ANULL"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"SELECT u.name, o.order_id\nFROM users u\nRIGHT JOIN orders o ON u.id = o.user_id;\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8FDE\u63A5\u7B97\u6CD5"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5D4C\u5957\u5FAA\u73AF\u8FDE\u63A5(Nested-Loop Join)"}),"\uFF1AMySQL\u7684\u4E3B\u8981\u8FDE\u63A5\u7B97\u6CD5"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u54C8\u5E0C\u8FDE\u63A5(Hash Join)"}),"\uFF1AMySQL 8.0.18+\u652F\u6301"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5757\u5D4C\u5957\u5FAA\u73AF(Block Nested-Loop)"}),"\uFF1A\u4F7F\u7528\u8FDE\u63A5\u7F13\u51B2\u533A\u7684\u4F18\u5316"]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770B\u8FDE\u63A5\u4F7F\u7528\u7684\u7B97\u6CD5\nEXPLAIN FORMAT=JSON\nSELECT u.name, o.order_id\nFROM users u\nJOIN orders o ON u.id = o.user_id\nWHERE u.status = 'active';\n"})})]}),(0,r.jsxs)(c.A,{value:"join-optimization",label:"JOIN\u4F18\u5316\u7B56\u7565",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6709\u6548\u7684JOIN\u4F18\u5316\u7B56\u7565"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u786E\u4FDDJOIN\u6761\u4EF6\u5217\u6709\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFA\u8FDE\u63A5\u5217\u4E0A\u7684\u7D22\u5F15\nALTER TABLE orders ADD INDEX idx_user_id (user_id);\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5C0F\u8868\u9A71\u52A8\u5927\u8868"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u901A\u8FC7\u8C03\u6574\u8868\u987A\u5E8F\u4F7F\u5C0F\u8868\u4F5C\u4E3A\u9A71\u52A8\u8868"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u63A8\u8350\uFF08\u5982\u679Cusers\u8868\u6BD4orders\u5C0F\uFF09\nSELECT u.name, o.order_id\nFROM users u\nJOIN orders o ON u.id = o.user_id;\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F7F\u7528JOIN\u800C\u975E\u5B50\u67E5\u8BE2"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4E0D\u63A8\u8350\uFF08\u5B50\u67E5\u8BE2\uFF09\nSELECT * FROM users\nWHERE id IN (SELECT user_id FROM orders WHERE amount > 1000);\n\n-- \u63A8\u8350\uFF08JOIN\uFF09\nSELECT DISTINCT u.*\nFROM users u\nJOIN orders o ON u.id = o.user_id\nWHERE o.amount > 1000;\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9650\u5236JOIN\u8868\u6570\u91CF"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u907F\u514D\u4E00\u6B21JOIN\u8FC7\u591A\u8868\uFF08\u901A\u5E38\u4E0D\u8D85\u8FC75\u4E2A\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"\u8003\u8651\u62C6\u5206\u590D\u6742\u67E5\u8BE2"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F18\u5316JOIN\u7F13\u51B2\u533A"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770B\u548C\u8C03\u6574join_buffer_size\nSHOW VARIABLES LIKE 'join_buffer_size';\nSET SESSION join_buffer_size = 4194304; -- \u8BBE\u7F6E\u4E3A4MB\n"})}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"subquery-vs-join",label:"\u5B50\u67E5\u8BE2\u4E0EJOIN",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E86\u89E3\u4F55\u65F6\u4F7F\u7528\u5B50\u67E5\u8BE2\u548CJOIN"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u76F8\u5173\u5B50\u67E5\u8BE2\u4E0EJOIN\u5BF9\u6BD4"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4F7F\u7528\u5B50\u67E5\u8BE2\nSELECT * FROM departments d\nWHERE EXISTS (\n    SELECT 1 FROM employees e\n    WHERE e.department_id = d.id AND e.salary > 50000\n);\n\n-- \u4F7F\u7528JOIN\nSELECT DISTINCT d.*\nFROM departments d\nJOIN employees e ON d.id = e.department_id\nWHERE e.salary > 50000;\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6D3E\u751F\u8868\u7684\u4F7F\u7528"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4F7F\u7528\u6D3E\u751F\u8868\u4F18\u5316\u590D\u6742\u67E5\u8BE2\nSELECT e.*, avg_dept.avg_salary\nFROM employees e\nJOIN (\n    SELECT department_id, AVG(salary) AS avg_salary\n    FROM employees\n    GROUP BY department_id\n) avg_dept ON e.department_id = avg_dept.department_id\nWHERE e.salary > avg_dept.avg_salary;\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"JOIN\u66FF\u4EE3\u591A\u8868\u5B50\u67E5\u8BE2"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4E0D\u63A8\u8350\uFF08\u591A\u8868\u5B50\u67E5\u8BE2\uFF09\nSELECT * FROM products\nWHERE category_id IN (\n    SELECT id FROM categories\n    WHERE parent_id IN (\n        SELECT id FROM categories WHERE name = 'Electronics'\n    )\n);\n\n-- \u63A8\u8350\uFF08\u591A\u8868JOIN\uFF09\nSELECT p.*\nFROM products p\nJOIN categories c1 ON p.category_id = c1.id\nJOIN categories c2 ON c1.parent_id = c2.id\nWHERE c2.name = 'Electronics';\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"LATERAL JOIN\uFF08MySQL 8.0.14+\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5141\u8BB8\u5728FROM\u5B50\u53E5\u4E2D\u5F15\u7528\u524D\u9762\u8868\u7684\u5217"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"SELECT u.name, r.*\nFROM users u,\nLATERAL (\n    SELECT * FROM reviews r\n    WHERE r.user_id = u.id\n    ORDER BY r.created_at DESC\n    LIMIT 3\n) r;\n"})}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"advanced-techniques",label:"\u9AD8\u7EA7\u6280\u672F",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u590D\u6742\u67E5\u8BE2\u7684\u9AD8\u7EA7\u4F18\u5316\u6280\u672F"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F7F\u7528STRAIGHT_JOIN\u63A7\u5236\u8FDE\u63A5\u987A\u5E8F"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5F3A\u5236\u4F18\u5316\u5668\u6309\u7167FROM\u5B50\u53E5\u4E2D\u8868\u7684\u987A\u5E8F\u6267\u884C\u8FDE\u63A5"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"SELECT STRAIGHT_JOIN u.name, o.order_id\nFROM small_table s\nJOIN large_table l ON s.id = l.s_id;\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u6CBB\u6CD5\u89E3\u51B3\u5927\u8868\u8FDE\u63A5"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5C06\u5927\u8868JOIN\u62C6\u5206\u4E3A\u591A\u4E2A\u5C0F\u67E5\u8BE2"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4EE3\u66FF\u4E00\u6B21\u5927JOIN\nSELECT * FROM orders o\nJOIN users u ON o.user_id = u.id\nWHERE o.created_at BETWEEN '2023-01-01' AND '2023-01-31';\n\n-- \u53EF\u4EE5\u6309\u65F6\u95F4\u5206\u533A\u6267\u884C\u591A\u4E2A\u67E5\u8BE2\n-- \u67E5\u8BE2\u7B2C1\u5468\nSELECT * FROM orders o\nJOIN users u ON o.user_id = u.id\nWHERE o.created_at BETWEEN '2023-01-01' AND '2023-01-07';\n-- \u67E5\u8BE2\u7B2C2\u5468...\u4EE5\u6B64\u7C7B\u63A8\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F7F\u7528\u4E34\u65F6\u8868\u4F18\u5316\u590D\u6742JOIN"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u7B2C1\u6B65\uFF1A\u521B\u5EFA\u4E34\u65F6\u8868\u5B58\u50A8\u4E2D\u95F4\u7ED3\u679C\nCREATE TEMPORARY TABLE tmp_results AS\nSELECT user_id, SUM(amount) AS total_spent\nFROM orders\nGROUP BY user_id;\n\n-- \u7B2C2\u6B65\uFF1A\u4E3A\u4E34\u65F6\u8868\u521B\u5EFA\u7D22\u5F15\nALTER TABLE tmp_results ADD INDEX (user_id);\n\n-- \u7B2C3\u6B65\uFF1A\u4E0E\u4E34\u65F6\u8868JOIN\nSELECT u.*, t.total_spent\nFROM users u\nJOIN tmp_results t ON u.id = t.user_id;\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F7F\u7528\u8054\u5408\u7D22\u5F15\u4F18\u5316JOIN\u548CWHERE\u6761\u4EF6"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u521B\u5EFA\u5305\u542BJOIN\u5217\u548CWHERE\u6761\u4EF6\u5217\u7684\u8054\u5408\u7D22\u5F15\nCREATE INDEX idx_user_status ON orders(user_id, status);\n\n-- \u4F18\u5316\u67E5\u8BE2\nSELECT u.name, o.*\nFROM users u\nJOIN orders o ON u.id = o.user_id\nWHERE o.status = 'completed';\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F7F\u7528\u54C8\u5E0C\u8FDE\u63A5\uFF08MySQL 8.0.18+\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u542F\u7528\u54C8\u5E0C\u8FDE\u63A5\nSET optimizer_switch='block_nested_loop=off,hash_join=on';\n\n-- \u9002\u5408\u65E0\u7D22\u5F15\u7B49\u503C\u8FDE\u63A5\u7684\u67E5\u8BE2\nSELECT *\nFROM large_table1 t1\nJOIN large_table2 t2 ON t1.attr = t2.attr;\n"})}),"\n"]}),"\n"]})]})]}),"\n",(0,r.jsx)(s.h2,{id:"5-\u6027\u80FD\u76D1\u63A7\u4E0E\u8C03\u4F18",children:"5. \u6027\u80FD\u76D1\u63A7\u4E0E\u8C03\u4F18"}),"\n",(0,r.jsx)(s.p,{children:"MySQL\u6027\u80FD\u76D1\u63A7\u4E0E\u8C03\u4F18\u662F\u6570\u636E\u5E93\u7BA1\u7406\u7684\u6838\u5FC3\u4EFB\u52A1\uFF0C\u901A\u8FC7\u76D1\u63A7\u5173\u952E\u6307\u6807\u548C\u4F18\u5316\u914D\u7F6E\u53C2\u6570\uFF0C\u53EF\u4EE5\u663E\u8457\u63D0\u5347\u6570\u636E\u5E93\u6027\u80FD\u3002"}),"\n",(0,r.jsx)(s.mermaid,{value:"graph TD\n    A[MySQL\u6027\u80FD\u8C03\u4F18] --\x3e B[\u76D1\u63A7\u6307\u6807]\n    A --\x3e C[\u6162\u67E5\u8BE2\u5206\u6790]\n    A --\x3e D[\u914D\u7F6E\u53C2\u6570]\n    A --\x3e E[\u5DE5\u5177\u5E94\u7528]\n    \n    B --\x3e B1[\u8D44\u6E90\u4F7F\u7528<br>CPU/\u5185\u5B58/IO]\n    B --\x3e B2[\u8FDE\u63A5\u4E0E\u7EBF\u7A0B]\n    B --\x3e B3[\u67E5\u8BE2\u7EDF\u8BA1]\n    \n    C --\x3e C1[\u6162\u67E5\u8BE2\u65E5\u5FD7]\n    C --\x3e C2[\u5206\u6790\u5DE5\u5177]\n    C --\x3e C3[\u4F18\u5316\u63AA\u65BD]\n    \n    D --\x3e D1[\u7F13\u51B2\u6C60\u914D\u7F6E]\n    D --\x3e D2[\u5E76\u53D1\u53C2\u6570]\n    D --\x3e D3[\u65E5\u5FD7\u53C2\u6570]\n    \n    E --\x3e E1[\u6027\u80FD\u76D1\u63A7\u5DE5\u5177]\n    E --\x3e E2[\u5206\u6790\u5DE5\u5177]\n    E --\x3e E3[\u57FA\u51C6\u6D4B\u8BD5]"}),"\n",(0,r.jsx)(s.h3,{id:"51-\u6027\u80FD\u76D1\u63A7\u6307\u6807",children:"5.1 \u6027\u80FD\u76D1\u63A7\u6307\u6807"}),"\n",(0,r.jsx)(s.p,{children:"\u6709\u6548\u7684\u6027\u80FD\u76D1\u63A7\u662F\u4F18\u5316\u7684\u57FA\u7840\uFF0C\u901A\u8FC7\u76D1\u63A7\u5173\u952E\u6307\u6807\u53EF\u4EE5\u53CA\u65F6\u53D1\u73B0\u6F5C\u5728\u95EE\u9898\u3002"}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"resource-metrics",label:"\u8D44\u6E90\u6307\u6807",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5173\u952E\u8D44\u6E90\u6307\u6807\u76D1\u63A7"}),"\uFF1A"]}),(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u6307\u6807\u7C7B\u522B"}),(0,r.jsx)(s.th,{children:"\u5173\u952E\u6307\u6807"}),(0,r.jsx)(s.th,{children:"\u8BF4\u660E"}),(0,r.jsx)(s.th,{children:"\u95EE\u9898\u8868\u73B0"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"CPU"})}),(0,r.jsx)(s.td,{children:"\u4F7F\u7528\u7387"}),(0,r.jsx)(s.td,{children:"MySQL\u670D\u52A1\u5668CPU\u4F7F\u7528\u7387"}),(0,r.jsx)(s.td,{children:"\u6301\u7EED\u8D85\u8FC770%\u9700\u8981\u5173\u6CE8"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"\u67E5\u8BE2\u7EBF\u7A0BCPU"}),(0,r.jsx)(s.td,{children:"\u5355\u4E2A\u67E5\u8BE2CPU\u5360\u7528"}),(0,r.jsx)(s.td,{children:"\u5F02\u5E38\u9AD8\u53EF\u80FD\u6709\u6027\u80FD\u95EE\u9898"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"\u5185\u5B58"})}),(0,r.jsx)(s.td,{children:"\u7F13\u51B2\u6C60\u4F7F\u7528\u7387"}),(0,r.jsx)(s.td,{children:"InnoDB\u7F13\u51B2\u6C60\u4F7F\u7528\u60C5\u51B5"}),(0,r.jsx)(s.td,{children:"\u4F4E\u547D\u4E2D\u7387\u8868\u793A\u914D\u7F6E\u4E0D\u8DB3"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"Swap\u4F7F\u7528"}),(0,r.jsx)(s.td,{children:"\u7CFB\u7EDF\u4EA4\u6362\u7A7A\u95F4\u4F7F\u7528"}),(0,r.jsx)(s.td,{children:"\u5927\u91CF\u4F7F\u7528\u8868\u793A\u5185\u5B58\u4E0D\u8DB3"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"\u78C1\u76D8IO"})}),(0,r.jsx)(s.td,{children:"IOPS"}),(0,r.jsx)(s.td,{children:"\u6BCF\u79D2I/O\u64CD\u4F5C\u6570"}),(0,r.jsx)(s.td,{children:"\u63A5\u8FD1\u786C\u4EF6\u4E0A\u9650\u8868\u793AI/O\u74F6\u9888"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"\u7B49\u5F85\u65F6\u95F4"}),(0,r.jsx)(s.td,{children:"I/O\u64CD\u4F5C\u7B49\u5F85\u65F6\u95F4"}),(0,r.jsx)(s.td,{children:"\u9AD8\u7B49\u5F85\u8868\u793A\u5B58\u50A8\u7CFB\u7EDF\u95EE\u9898"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"\u7F51\u7EDC"})}),(0,r.jsx)(s.td,{children:"\u541E\u5410\u91CF"}),(0,r.jsx)(s.td,{children:"\u7F51\u7EDC\u6D41\u5165/\u6D41\u51FA\u901F\u7387"}),(0,r.jsx)(s.td,{children:"\u63A5\u8FD1\u5E26\u5BBD\u4E0A\u9650\u8868\u793A\u7F51\u7EDC\u74F6\u9888"})]})]})]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770B\u7CFB\u7EDF\u72B6\u6001\u53D8\u91CF\nSHOW GLOBAL STATUS LIKE 'Innodb_buffer_pool_%';\nSHOW GLOBAL STATUS LIKE 'Threads_%';\nSHOW GLOBAL STATUS LIKE 'Bytes_%';\n\n-- \u67E5\u770BInnoDB\u72B6\u6001\nSHOW ENGINE INNODB STATUS\\G\n"})})]}),(0,r.jsxs)(c.A,{value:"connection-metrics",label:"\u8FDE\u63A5\u4E0E\u7EBF\u7A0B",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8FDE\u63A5\u4E0E\u7EBF\u7A0B\u6307\u6807"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6D3B\u8DC3\u8FDE\u63A5\u6570"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5F53\u524D\u6B63\u5728\u5904\u7406\u7684\u8FDE\u63A5\u6570"}),"\n",(0,r.jsx)(s.li,{children:"\u6301\u7EED\u9AD8\u503C\u8868\u793A\u53EF\u80FD\u9700\u8981\u589E\u52A0max_connections\u6216\u68C0\u67E5\u8FDE\u63A5\u6CC4\u6F0F"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7EBF\u7A0B\u7EDF\u8BA1"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8FD0\u884C\u4E2D\u7EBF\u7A0B\uFF1A\u6B63\u5728\u6267\u884C\u7684\u67E5\u8BE2\u6570"}),"\n",(0,r.jsx)(s.li,{children:"\u8FDE\u63A5\u4E2D\u7EBF\u7A0B\uFF1A\u5DF2\u5EFA\u7ACB\u8FDE\u63A5\u7684\u7EBF\u7A0B\u6570"}),"\n",(0,r.jsx)(s.li,{children:"\u7F13\u5B58\u7EBF\u7A0B\uFF1A\u7EBF\u7A0B\u6C60\u4E2D\u7B49\u5F85\u8FDE\u63A5\u7684\u7EBF\u7A0B"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8FDE\u63A5\u9519\u8BEF"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u62D2\u7EDD\u7684\u8FDE\u63A5"}),"\n",(0,r.jsx)(s.li,{children:"\u4E2D\u65AD\u7684\u8FDE\u63A5"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770B\u5F53\u524D\u8FDE\u63A5\nSHOW PROCESSLIST;\n\n-- \u8FDE\u63A5\u7EDF\u8BA1\nSHOW STATUS LIKE 'Threads_%';\nSHOW STATUS LIKE '%connection%';\n\n-- \u6700\u5927\u8FDE\u63A5\u8BBE\u7F6E\nSHOW VARIABLES LIKE 'max_connections';\n"})})]}),(0,r.jsxs)(c.A,{value:"query-metrics",label:"\u67E5\u8BE2\u6027\u80FD\u6307\u6807",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u67E5\u8BE2\u6027\u80FD\u5173\u952E\u6307\u6807"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u67E5\u8BE2\u541E\u5410\u91CF"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Questions\uFF1A\u670D\u52A1\u5668\u6267\u884C\u7684\u67E5\u8BE2\u6570"}),"\n",(0,r.jsx)(s.li,{children:"Com_select/insert/update/delete\uFF1A\u5404\u7C7B\u578BSQL\u8BED\u53E5\u6267\u884C\u6570"}),"\n",(0,r.jsx)(s.li,{children:"Queries per second (QPS)\uFF1A\u6BCF\u79D2\u67E5\u8BE2\u6570"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u67E5\u8BE2\u6548\u7387\u6307\u6807"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6162\u67E5\u8BE2\u6570\uFF1A\u6267\u884C\u65F6\u95F4\u8D85\u8FC7long_query_time\u7684\u67E5\u8BE2\u6570\u91CF"}),"\n",(0,r.jsx)(s.li,{children:"\u5168\u8868\u626B\u63CF\u6570\uFF1A\u6267\u884C\u5168\u8868\u626B\u63CF\u7684\u67E5\u8BE2\u6570\u91CF"}),"\n",(0,r.jsx)(s.li,{children:"\u4E34\u65F6\u8868\u521B\u5EFA\u6570\uFF1A\u67E5\u8BE2\u6267\u884C\u8FC7\u7A0B\u4E2D\u521B\u5EFA\u7684\u4E34\u65F6\u8868\u6570\u91CF"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7F13\u5B58\u6307\u6807"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"InnoDB\u7F13\u51B2\u6C60\u547D\u4E2D\u7387"}),"\n",(0,r.jsx)(s.li,{children:"\u8868\u7F13\u5B58\u547D\u4E2D\u7387"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u8BE2\u6267\u884C\u7EDF\u8BA1\nSHOW GLOBAL STATUS LIKE 'Com_%';\nSHOW GLOBAL STATUS LIKE 'Slow_queries';\nSHOW GLOBAL STATUS LIKE 'Handler_%';\n\n-- \u8BA1\u7B97QPS\nSELECT VARIABLE_VALUE / UNIX_TIMESTAMP() - (\n    SELECT VARIABLE_VALUE \n    FROM performance_schema.global_status \n    WHERE VARIABLE_NAME = 'UPTIME'\n) AS QPS\nFROM performance_schema.global_status \nWHERE VARIABLE_NAME = 'QUERIES';\n"})})]})]}),"\n",(0,r.jsx)(s.h3,{id:"52-\u6162\u67E5\u8BE2\u5206\u6790",children:"5.2 \u6162\u67E5\u8BE2\u5206\u6790"}),"\n",(0,r.jsx)(s.p,{children:"\u6162\u67E5\u8BE2\u5206\u6790\u662F\u4F18\u5316\u6570\u636E\u5E93\u6027\u80FD\u7684\u91CD\u8981\u624B\u6BB5\uFF0C\u901A\u8FC7\u8BC6\u522B\u548C\u4F18\u5316\u6162SQL\u53EF\u4EE5\u5FEB\u901F\u63D0\u5347\u7CFB\u7EDF\u6574\u4F53\u6027\u80FD\u3002"}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"slow-log",label:"\u6162\u67E5\u8BE2\u65E5\u5FD7",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u542F\u7528\u548C\u914D\u7F6E\u6162\u67E5\u8BE2\u65E5\u5FD7"}),"\uFF1A"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770B\u6162\u67E5\u8BE2\u65E5\u5FD7\u914D\u7F6E\nSHOW VARIABLES LIKE 'slow_query%';\nSHOW VARIABLES LIKE 'long_query_time';\n\n-- \u542F\u7528\u6162\u67E5\u8BE2\u65E5\u5FD7\nSET GLOBAL slow_query_log = 'ON';\nSET GLOBAL long_query_time = 1;  -- \u8BBE\u7F6E\u4E3A1\u79D2\nSET GLOBAL slow_query_log_file = '/var/log/mysql/slow.log';\nSET GLOBAL log_queries_not_using_indexes = 'ON';  -- \u8BB0\u5F55\u672A\u4F7F\u7528\u7D22\u5F15\u7684\u67E5\u8BE2\n"})}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6162\u67E5\u8BE2\u65E5\u5FD7\u5185\u5BB9\u793A\u4F8B"}),"\uFF1A"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"# Time: 2023-08-11T10:15:30.123456Z\n# User@Host: user[user] @ localhost []\n# Query_time: 2.000123  Lock_time: 0.000012  Rows_sent: 1000  Rows_examined: 1000000\nSET timestamp=1628675730;\nSELECT * FROM large_table WHERE non_indexed_column = 'value';\n"})}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6162\u67E5\u8BE2\u65E5\u5FD7\u5B57\u6BB5\u8BF4\u660E"}),"\uFF1A"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Query_time\uFF1A\u67E5\u8BE2\u6267\u884C\u65F6\u95F4\uFF08\u79D2\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"Lock_time\uFF1A\u83B7\u53D6\u9501\u7684\u65F6\u95F4\uFF08\u79D2\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"Rows_sent\uFF1A\u8FD4\u56DE\u7ED9\u5BA2\u6237\u7AEF\u7684\u884C\u6570"}),"\n",(0,r.jsx)(s.li,{children:"Rows_examined\uFF1A\u68C0\u67E5\u7684\u884C\u6570"}),"\n",(0,r.jsx)(s.li,{children:"SQL\u8BED\u53E5\u672C\u8EAB"}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"analysis-tools",label:"\u5206\u6790\u5DE5\u5177",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5E38\u7528\u6162\u67E5\u8BE2\u5206\u6790\u5DE5\u5177"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"mysqldumpslow"}),"\uFF1A\nMySQL\u81EA\u5E26\u7684\u5206\u6790\u5DE5\u5177\uFF0C\u7528\u4E8E\u5206\u6790\u6162\u67E5\u8BE2\u65E5\u5FD7"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# \u663E\u793A\u51FA\u73B0\u6B21\u6570\u6700\u591A\u768410\u4E2A\u6162\u67E5\u8BE2\nmysqldumpslow -t 10 /var/log/mysql/slow.log\n\n# \u6309\u603B\u6267\u884C\u65F6\u95F4\u6392\u5E8F\nmysqldumpslow -t 10 -s t /var/log/mysql/slow.log\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"pt-query-digest"}),"\uFF1A\nPercona Toolkit\u4E2D\u7684\u5DE5\u5177\uFF0C\u529F\u80FD\u66F4\u5F3A\u5927"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# \u5206\u6790\u6162\u67E5\u8BE2\u65E5\u5FD7\npt-query-digest /var/log/mysql/slow.log\n\n# \u76F4\u63A5\u5206\u6790MySQL\u8FDB\u7A0B\npt-query-digest --processlist h=localhost\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL Workbench"}),"\uFF1A\n\u56FE\u5F62\u5316\u5DE5\u5177\uFF0C\u5305\u542B\u6027\u80FD\u4EEA\u8868\u76D8\u548C\u67E5\u8BE2\u5206\u6790\u529F\u80FD"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Performance Schema"}),"\uFF1A\nMySQL\u5185\u7F6E\u7684\u6027\u80FD\u76D1\u63A7\u6846\u67B6\uFF08MySQL 5.6+\uFF09"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u542F\u7528Performance Schema\nSET GLOBAL performance_schema = ON;\n\n-- \u67E5\u770B\u6700\u8017\u65F6\u7684SQL\u8BED\u53E5\nSELECT DIGEST_TEXT, COUNT_STAR, SUM_TIMER_WAIT\nFROM performance_schema.events_statements_summary_by_digest\nORDER BY SUM_TIMER_WAIT DESC LIMIT 10;\n"})}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"optimization-steps",label:"\u4F18\u5316\u6B65\u9AA4",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6162\u67E5\u8BE2\u4F18\u5316\u7684\u4E00\u822C\u6B65\u9AA4"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u6790SQL\u95EE\u9898"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528EXPLAIN\u5206\u6790\u6267\u884C\u8BA1\u5212"}),"\n",(0,r.jsx)(s.li,{children:"\u68C0\u67E5\u662F\u5426\u4F7F\u7528\u4E86\u9002\u5F53\u7684\u7D22\u5F15"}),"\n",(0,r.jsx)(s.li,{children:"\u68C0\u67E5\u626B\u63CF\u7684\u884C\u6570\u662F\u5426\u8FC7\u591A"}),"\n",(0,r.jsx)(s.li,{children:"\u68C0\u67E5\u662F\u5426\u6709\u4E34\u65F6\u8868\u6216\u6392\u5E8F\u64CD\u4F5C"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6DFB\u52A0\u5408\u9002\u7684\u7D22\u5F15"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6839\u636EWHERE\u6761\u4EF6\u3001JOIN\u6761\u4EF6\u3001\u6392\u5E8F\u548C\u5206\u7EC4\u5B57\u6BB5\u6DFB\u52A0\u7D22\u5F15"}),"\n",(0,r.jsx)(s.li,{children:"\u8003\u8651\u4F7F\u7528\u8986\u76D6\u7D22\u5F15\u51CF\u5C11\u56DE\u8868"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F18\u5316SQL\u8BED\u53E5"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u53EA\u67E5\u8BE2\u9700\u8981\u7684\u5217\uFF0C\u907F\u514DSELECT *"}),"\n",(0,r.jsx)(s.li,{children:"\u4F18\u5316WHERE\u6761\u4EF6\uFF0C\u786E\u4FDD\u53EF\u4EE5\u4F7F\u7528\u7D22\u5F15"}),"\n",(0,r.jsx)(s.li,{children:"\u7B80\u5316JOIN\uFF0C\u51CF\u5C11\u8868\u6570\u91CF"}),"\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528LIMIT\u9650\u5236\u7ED3\u679C\u96C6\u5927\u5C0F"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8868\u7ED3\u6784\u4F18\u5316"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528\u9002\u5F53\u7684\u6570\u636E\u7C7B\u578B\uFF08\u5C3D\u91CF\u5C0F\u3001\u5C3D\u91CF\u7B80\u5355\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"\u8003\u8651\u8868\u5206\u533A"}),"\n",(0,r.jsx)(s.li,{children:"\u89C4\u8303\u5316\u6216\u53CD\u89C4\u8303\u5316\u8BBE\u8BA1\uFF0C\u53D6\u51B3\u4E8E\u67E5\u8BE2\u6A21\u5F0F"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u670D\u52A1\u5668\u53C2\u6570\u8C03\u6574"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8C03\u6574InnoDB\u7F13\u51B2\u6C60\u5927\u5C0F"}),"\n",(0,r.jsx)(s.li,{children:"\u8C03\u6574\u6392\u5E8F\u548C\u8FDE\u63A5\u7F13\u51B2\u533A\u5927\u5C0F"}),"\n",(0,r.jsx)(s.li,{children:"\u4F18\u5316IO\u76F8\u5173\u53C2\u6570"}),"\n"]}),"\n"]}),"\n"]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"53-\u914D\u7F6E\u53C2\u6570\u4F18\u5316",children:"5.3 \u914D\u7F6E\u53C2\u6570\u4F18\u5316"}),"\n",(0,r.jsx)(s.p,{children:"\u5408\u7406\u7684MySQL\u914D\u7F6E\u53C2\u6570\u5BF9\u6027\u80FD\u6709\u7740\u91CD\u8981\u5F71\u54CD\uFF0C\u9700\u8981\u6839\u636E\u670D\u52A1\u5668\u786C\u4EF6\u8D44\u6E90\u548C\u4E1A\u52A1\u8D1F\u8F7D\u7279\u70B9\u8FDB\u884C\u8C03\u6574\u3002"}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"memory-config",label:"\u5185\u5B58\u76F8\u5173\u53C2\u6570",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"InnoDB\u7F13\u51B2\u6C60\u914D\u7F6E"}),"\uFF1A"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770B\u5F53\u524D\u5185\u5B58\u914D\u7F6E\nSHOW VARIABLES LIKE 'innodb_buffer_pool_size';\nSHOW VARIABLES LIKE '%buffer%';\n"})}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5173\u952E\u5185\u5B58\u53C2\u6570"}),"\uFF1A"]}),(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u53C2\u6570"}),(0,r.jsx)(s.th,{children:"\u8BF4\u660E"}),(0,r.jsx)(s.th,{children:"\u5EFA\u8BAE\u503C"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"innodb_buffer_pool_size"})}),(0,r.jsx)(s.td,{children:"InnoDB\u7F13\u51B2\u6C60\u5927\u5C0F\uFF0C\u7F13\u5B58\u8868\u548C\u7D22\u5F15\u6570\u636E"}),(0,r.jsx)(s.td,{children:"\u670D\u52A1\u5668\u7269\u7406\u5185\u5B58\u768450%-70%"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"innodb_buffer_pool_instances"})}),(0,r.jsx)(s.td,{children:"\u7F13\u51B2\u6C60\u5B9E\u4F8B\u6570\u91CF\uFF0C\u51CF\u5C11\u5185\u90E8\u7ADE\u4E89"}),(0,r.jsx)(s.td,{children:"\u6BCF\u5B9E\u4F8B\u4E0D\u5C11\u4E8E1GB"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"sort_buffer_size"})}),(0,r.jsx)(s.td,{children:"\u6392\u5E8F\u64CD\u4F5C\u7684\u7F13\u51B2\u533A\u5927\u5C0F"}),(0,r.jsx)(s.td,{children:"256KB-4MB\uFF0C\u8FC7\u5927\u53CD\u800C\u6709\u5BB3"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"join_buffer_size"})}),(0,r.jsx)(s.td,{children:"\u8FDE\u63A5\u64CD\u4F5C\u7684\u7F13\u51B2\u533A\u5927\u5C0F"}),(0,r.jsx)(s.td,{children:"256KB-4MB\uFF0C\u4E0D\u5B9C\u8FC7\u5927"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"read_buffer_size"})}),(0,r.jsx)(s.td,{children:"\u987A\u5E8F\u8BFB\u53D6\u64CD\u4F5C\u7684\u7F13\u51B2\u533A\u5927\u5C0F"}),(0,r.jsx)(s.td,{children:"128KB-8MB"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"read_rnd_buffer_size"})}),(0,r.jsx)(s.td,{children:"\u968F\u673A\u8BFB\u53D6\u64CD\u4F5C\u7684\u7F13\u51B2\u533A\u5927\u5C0F"}),(0,r.jsx)(s.td,{children:"128KB-8MB"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"tmp_table_size"})}),(0,r.jsx)(s.td,{children:"\u5185\u5B58\u4E34\u65F6\u8868\u7684\u6700\u5927\u5927\u5C0F"}),(0,r.jsx)(s.td,{children:"16MB-64MB"})]})]})]}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u914D\u7F6E\u793A\u4F8B"}),"\uFF1A"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ini",children:"[mysqld]\n# \u5047\u8BBE\u670D\u52A1\u5668\u670932GB\u5185\u5B58\ninnodb_buffer_pool_size = 20G\ninnodb_buffer_pool_instances = 8\nsort_buffer_size = 2M\njoin_buffer_size = 2M\nread_buffer_size = 1M\nread_rnd_buffer_size = 1M\ntmp_table_size = 32M\nmax_heap_table_size = 32M\n"})})]}),(0,r.jsxs)(c.A,{value:"io-config",label:"I/O\u76F8\u5173\u53C2\u6570",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"I/O\u548C\u65E5\u5FD7\u76F8\u5173\u53C2\u6570"}),"\uFF1A"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770BI/O\u548C\u65E5\u5FD7\u914D\u7F6E\nSHOW VARIABLES LIKE 'innodb_flush%';\nSHOW VARIABLES LIKE 'innodb_log%';\n"})}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5173\u952EI/O\u53C2\u6570"}),"\uFF1A"]}),(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u53C2\u6570"}),(0,r.jsx)(s.th,{children:"\u8BF4\u660E"}),(0,r.jsx)(s.th,{children:"\u5EFA\u8BAE\u503C"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"innodb_flush_log_at_trx_commit"})}),(0,r.jsx)(s.td,{children:"\u63A7\u5236\u65E5\u5FD7\u5237\u65B0\u5230\u78C1\u76D8\u7684\u9891\u7387"}),(0,r.jsx)(s.td,{children:"1\u6700\u5B89\u5168\uFF0C0\u62162\u6027\u80FD\u66F4\u597D\u4F46\u53EF\u80FD\u4E22\u6570\u636E"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"innodb_flush_method"})}),(0,r.jsx)(s.td,{children:"InnoDB\u6570\u636E\u548C\u65E5\u5FD7\u6587\u4EF6\u7684\u5237\u65B0\u65B9\u6CD5"}),(0,r.jsx)(s.td,{children:"O_DIRECT\u7ED5\u8FC7OS\u7F13\u5B58\uFF0C\u51CF\u5C11\u53CC\u91CD\u7F13\u51B2"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"innodb_log_file_size"})}),(0,r.jsx)(s.td,{children:"\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F"}),(0,r.jsx)(s.td,{children:"128MB-2GB\uFF0C\u5927\u503C\u51CF\u5C11\u68C0\u67E5\u70B9\u9891\u7387"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"innodb_log_buffer_size"})}),(0,r.jsx)(s.td,{children:"\u65E5\u5FD7\u7F13\u51B2\u533A\u5927\u5C0F"}),(0,r.jsx)(s.td,{children:"8MB-64MB"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"innodb_io_capacity"})}),(0,r.jsx)(s.td,{children:"InnoDB\u540E\u53F0I/O\u64CD\u4F5C\u7684\u4E0A\u9650"}),(0,r.jsx)(s.td,{children:"\u6839\u636E\u78C1\u76D8IOPS\u80FD\u529B\u8BBE\u7F6E\uFF0CSSD\u53EF\u8BBE\u9AD8\u503C"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"innodb_write_io_threads"})}),(0,r.jsx)(s.td,{children:"InnoDB\u5199I/O\u7EBF\u7A0B\u6570"}),(0,r.jsx)(s.td,{children:"4-16\uFF0CSSD\u53EF\u8BBE\u66F4\u9AD8"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"innodb_read_io_threads"})}),(0,r.jsx)(s.td,{children:"InnoDB\u8BFBI/O\u7EBF\u7A0B\u6570"}),(0,r.jsx)(s.td,{children:"4-16\uFF0CSSD\u53EF\u8BBE\u66F4\u9AD8"})]})]})]}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u914D\u7F6E\u793A\u4F8B"}),"\uFF1A"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ini",children:"[mysqld]\n# SSD\u5B58\u50A8\u7684\u914D\u7F6E\ninnodb_flush_log_at_trx_commit = 1\ninnodb_flush_method = O_DIRECT\ninnodb_log_file_size = 512M\ninnodb_log_buffer_size = 16M\ninnodb_io_capacity = 2000\ninnodb_io_capacity_max = 4000\ninnodb_write_io_threads = 8\ninnodb_read_io_threads = 8\n"})})]}),(0,r.jsxs)(c.A,{value:"concurrency-config",label:"\u5E76\u53D1\u76F8\u5173\u53C2\u6570",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5E76\u53D1\u63A7\u5236\u53C2\u6570"}),"\uFF1A"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770B\u5E76\u53D1\u76F8\u5173\u914D\u7F6E\nSHOW VARIABLES LIKE 'max_connections';\nSHOW VARIABLES LIKE 'innodb_thread%';\nSHOW VARIABLES LIKE '%timeout%';\n"})}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5173\u952E\u5E76\u53D1\u53C2\u6570"}),"\uFF1A"]}),(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u53C2\u6570"}),(0,r.jsx)(s.th,{children:"\u8BF4\u660E"}),(0,r.jsx)(s.th,{children:"\u5EFA\u8BAE\u503C"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"max_connections"})}),(0,r.jsx)(s.td,{children:"\u6700\u5927\u5BA2\u6237\u7AEF\u8FDE\u63A5\u6570"}),(0,r.jsx)(s.td,{children:"500-2000\uFF0C\u53D6\u51B3\u4E8E\u8D1F\u8F7D\u548C\u786C\u4EF6"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"thread_cache_size"})}),(0,r.jsx)(s.td,{children:"\u7EBF\u7A0B\u7F13\u5B58\u5927\u5C0F"}),(0,r.jsx)(s.td,{children:"8-16\uFF08\u5C0F\u89C4\u6A21\uFF09\uFF0C32-64\uFF08\u5927\u89C4\u6A21\uFF09"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"innodb_thread_concurrency"})}),(0,r.jsx)(s.td,{children:"InnoDB\u5E76\u53D1\u7EBF\u7A0B\u6570\u9650\u5236"}),(0,r.jsx)(s.td,{children:"0\uFF08\u65E0\u9650\u5236\uFF09\u6216\u8BBE\u4E3ACPU\u6838\u5FC3\u6570\u76842\u500D"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"innodb_lock_wait_timeout"})}),(0,r.jsx)(s.td,{children:"\u4E8B\u52A1\u7B49\u5F85\u884C\u9501\u7684\u8D85\u65F6\u65F6\u95F4"}),(0,r.jsx)(s.td,{children:"50\uFF08\u9ED8\u8BA4\uFF09\uFF0C\u9AD8\u5E76\u53D1\u53EF\u8C03\u4F4E"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"wait_timeout"})}),(0,r.jsx)(s.td,{children:"\u975E\u4EA4\u4E92\u5F0F\u8FDE\u63A5\u8D85\u65F6\u65F6\u95F4"}),(0,r.jsx)(s.td,{children:"\u9ED8\u8BA428800\u79D2\uFF0C\u53EF\u51CF\u5C0F\u5230300-1800"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"interactive_timeout"})}),(0,r.jsx)(s.td,{children:"\u4EA4\u4E92\u5F0F\u8FDE\u63A5\u8D85\u65F6\u65F6\u95F4"}),(0,r.jsx)(s.td,{children:"\u4E0Ewait_timeout\u76F8\u540C"})]})]})]}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u914D\u7F6E\u793A\u4F8B"}),"\uFF1A"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ini",children:"[mysqld]\nmax_connections = 1000\nthread_cache_size = 32\ninnodb_thread_concurrency = 0\ninnodb_lock_wait_timeout = 30\nwait_timeout = 600\ninteractive_timeout = 600\n"})})]})]}),"\n",(0,r.jsx)(s.h3,{id:"54-\u6027\u80FD\u8C03\u4F18\u5DE5\u5177",children:"5.4 \u6027\u80FD\u8C03\u4F18\u5DE5\u5177"}),"\n",(0,r.jsx)(s.p,{children:"MySQL\u751F\u6001\u7CFB\u7EDF\u63D0\u4F9B\u4E86\u591A\u79CD\u5DE5\u5177\uFF0C\u5E2E\u52A9DBA\u548C\u5F00\u53D1\u8005\u76D1\u63A7\u3001\u5206\u6790\u548C\u4F18\u5316\u6570\u636E\u5E93\u6027\u80FD\u3002"}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"mysql-tools",label:"MySQL\u5185\u7F6E\u5DE5\u5177",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL\u81EA\u5E26\u7684\u6027\u80FD\u5DE5\u5177"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Performance Schema"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"MySQL 5.6+\u5185\u7F6E\u6027\u80FD\u76D1\u63A7\u7CFB\u7EDF"}),"\n",(0,r.jsx)(s.li,{children:"\u6536\u96C6\u670D\u52A1\u5668\u4E8B\u4EF6\u7684\u4F4E\u7EA7\u4FE1\u606F"}),"\n",(0,r.jsx)(s.li,{children:"\u51E0\u4E4E\u65E0\u6027\u80FD\u5F71\u54CD"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770B\u6D88\u8017\u8D44\u6E90\u6700\u591A\u7684SQL\nSELECT DIGEST_TEXT, COUNT_STAR, AVG_TIMER_WAIT\nFROM performance_schema.events_statements_summary_by_digest\nORDER BY AVG_TIMER_WAIT DESC LIMIT 10;\n\n-- \u67E5\u770B\u7D22\u5F15\u4F7F\u7528\u60C5\u51B5\nSELECT * FROM performance_schema.table_io_waits_summary_by_index_usage\nWHERE INDEX_NAME IS NOT NULL\nORDER BY COUNT_STAR DESC;\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Information Schema"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u63D0\u4F9B\u6570\u636E\u5E93\u5143\u6570\u636E\u7684\u8BBF\u95EE"}),"\n",(0,r.jsx)(s.li,{children:"\u5305\u542B\u8868\u3001\u7D22\u5F15\u3001\u8FDB\u7A0B\u7B49\u4FE1\u606F"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u770B\u8868\u5927\u5C0F\u4FE1\u606F\nSELECT table_name, table_rows, data_length, index_length\nFROM information_schema.tables\nWHERE table_schema = 'your_database'\nORDER BY data_length DESC;\n\n-- \u67E5\u770B\u6B63\u5728\u6267\u884C\u7684\u4E8B\u52A1\nSELECT * FROM information_schema.innodb_trx;\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"sys Schema"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"MySQL 5.7+\u63D0\u4F9B"}),"\n",(0,r.jsx)(s.li,{children:"\u7B80\u5316Performance Schema\u4F7F\u7528\u7684\u89C6\u56FE\u96C6\u5408"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u67E5\u627EIO\u5BC6\u96C6\u578B\u67E5\u8BE2\nSELECT * FROM sys.io_global_by_file_by_bytes;\n\n-- \u672A\u4F7F\u7528\u7684\u7D22\u5F15\nSELECT * FROM sys.schema_unused_indexes;\n"})}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"third-party-tools",label:"\u7B2C\u4E09\u65B9\u5DE5\u5177",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6D41\u884C\u7684\u7B2C\u4E09\u65B9\u76D1\u63A7\u548C\u5206\u6790\u5DE5\u5177"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Percona Toolkit"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5F00\u6E90\u7684MySQL\u7BA1\u7406\u548C\u4F18\u5316\u5DE5\u5177\u96C6"}),"\n",(0,r.jsx)(s.li,{children:"\u5305\u542Bpt-query-digest\uFF08\u6162\u67E5\u8BE2\u5206\u6790\uFF09\u3001pt-online-schema-change\uFF08\u5728\u7EBF\u8868\u7ED3\u6784\u53D8\u66F4\uFF09\u7B49\u5DE5\u5177"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL Workbench"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Oracle\u5B98\u65B9\u56FE\u5F62\u5316\u7BA1\u7406\u5DE5\u5177"}),"\n",(0,r.jsx)(s.li,{children:"\u63D0\u4F9B\u6027\u80FD\u4EEA\u8868\u76D8\u3001\u67E5\u8BE2\u5206\u6790\u548C\u53EF\u89C6\u5316\u6267\u884C\u8BA1\u5212"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"PMM (Percona Monitoring and Management)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5F00\u6E90\u7684MySQL\u76D1\u63A7\u89E3\u51B3\u65B9\u6848"}),"\n",(0,r.jsx)(s.li,{children:"\u63D0\u4F9B\u5B9E\u65F6\u76D1\u63A7\u4EEA\u8868\u76D8\u548C\u6027\u80FD\u5206\u6790"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"ProxySQL"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9AD8\u6027\u80FDMySQL\u4EE3\u7406"}),"\n",(0,r.jsx)(s.li,{children:"\u63D0\u4F9B\u67E5\u8BE2\u8DEF\u7531\u3001\u8FDE\u63A5\u6C60\u548C\u76D1\u63A7\u529F\u80FD"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u76D1\u63A7\u96C6\u6210\u5DE5\u5177"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Prometheus + Grafana\uFF1A\u6D41\u884C\u7684\u76D1\u63A7\u548C\u53EF\u89C6\u5316\u7EC4\u5408"}),"\n",(0,r.jsx)(s.li,{children:"Zabbix\uFF1A\u4F01\u4E1A\u7EA7\u76D1\u63A7\u89E3\u51B3\u65B9\u6848\uFF0C\u6709MySQL\u76D1\u63A7\u6A21\u677F"}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"benchmarking",label:"\u57FA\u51C6\u6D4B\u8BD5",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u57FA\u51C6\u6D4B\u8BD5\u5DE5\u5177\u548C\u65B9\u6CD5"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u57FA\u51C6\u6D4B\u8BD5\u76EE\u7684"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8BC4\u4F30\u670D\u52A1\u5668\u6027\u80FD\u5BB9\u91CF"}),"\n",(0,r.jsx)(s.li,{children:"\u9A8C\u8BC1\u914D\u7F6E\u66F4\u6539\u6548\u679C"}),"\n",(0,r.jsx)(s.li,{children:"\u6BD4\u8F83\u4E0D\u540C\u786C\u4EF6\u6216\u8BBE\u7F6E\u7684\u6027\u80FD\u5DEE\u5F02"}),"\n",(0,r.jsx)(s.li,{children:"\u53D1\u73B0\u6027\u80FD\u74F6\u9888"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5E38\u7528\u5DE5\u5177"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"sysbench"}),"\uFF1A\u591A\u7EBF\u7A0B\u6027\u80FD\u57FA\u51C6\u6D4B\u8BD5\u5DE5\u5177"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"mysqlslap"}),"\uFF1AMySQL\u5185\u7F6E\u7684\u57FA\u51C6\u6D4B\u8BD5\u5DE5\u5177"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"JMeter"}),"\uFF1A\u53EF\u7528\u4E8E\u6A21\u62DF\u771F\u5B9E\u7528\u6237\u8D1F\u8F7D"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u57FA\u51C6\u6D4B\u8BD5\u6700\u4F73\u5B9E\u8DF5"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528\u4E0E\u751F\u4EA7\u73AF\u5883\u76F8\u4F3C\u7684\u6570\u636E\u91CF\u548C\u5206\u5E03"}),"\n",(0,r.jsx)(s.li,{children:"\u6D4B\u8BD5\u591A\u79CD\u5E76\u53D1\u7528\u6237\u573A\u666F"}),"\n",(0,r.jsx)(s.li,{children:"\u6D4B\u8BD5\u4E0D\u540C\u7C7B\u578B\u7684\u67E5\u8BE2\uFF08\u8BFB\u5BC6\u96C6\u3001\u5199\u5BC6\u96C6\u3001\u6DF7\u5408\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"\u76D1\u63A7\u6240\u6709\u76F8\u5173\u7CFB\u7EDF\u6307\u6807\uFF08CPU\u3001\u5185\u5B58\u3001IO\u3001\u7F51\u7EDC\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"\u4FDD\u6301\u9664\u6D4B\u8BD5\u53D8\u91CF\u5916\u7684\u6240\u6709\u914D\u7F6E\u4E0D\u53D8"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# sysbench OLTP\u8BFB\u5199\u6D4B\u8BD5\u793A\u4F8B\nsysbench --db-driver=mysql --mysql-user=user --mysql-password=pass \\\n  --mysql-db=test --table-size=1000000 \\\n  /usr/share/sysbench/oltp_read_write.lua prepare\n\nsysbench --db-driver=mysql --mysql-user=user --mysql-password=pass \\\n  --mysql-db=test --table-size=1000000 --threads=16 --time=60 \\\n  /usr/share/sysbench/oltp_read_write.lua run\n\n# mysqlslap\u5E76\u53D1\u6D4B\u8BD5\u793A\u4F8B\nmysqlslap --user=user --password=pass --host=localhost \\\n  --concurrency=50,100,200 --iterations=3 \\\n  --create-schema=test \\\n  --query=\"SELECT * FROM users WHERE status='active' LIMIT 100;\"\n"})})]})]}),"\n",(0,r.jsx)(s.h2,{id:"6-\u5907\u4EFD\u4E0E\u6062\u590D\u7B56\u7565",children:"6. \u5907\u4EFD\u4E0E\u6062\u590D\u7B56\u7565"}),"\n",(0,r.jsx)(s.p,{children:"\u6570\u636E\u5E93\u5907\u4EFD\u4E0E\u6062\u590D\u662F\u4FDD\u969C\u6570\u636E\u5B89\u5168\u7684\u5173\u952E\u73AF\u8282\uFF0C\u5B8C\u5584\u7684\u5907\u4EFD\u7B56\u7565\u548C\u5B9A\u671F\u7684\u6062\u590D\u6F14\u7EC3\u53EF\u4EE5\u6709\u6548\u964D\u4F4E\u6570\u636E\u4E22\u5931\u98CE\u9669\u3002"}),"\n",(0,r.jsx)(s.mermaid,{value:"graph TD\n    A[\u5907\u4EFD\u4E0E\u6062\u590D\u7B56\u7565] --\x3e B[\u5907\u4EFD\u7C7B\u578B]\n    A --\x3e C[\u5907\u4EFD\u5DE5\u5177]\n    A --\x3e D[\u6062\u590D\u7B56\u7565]\n    A --\x3e E[\u707E\u5907\u89C4\u5212]\n    \n    B --\x3e B1[\u903B\u8F91\u5907\u4EFD]\n    B --\x3e B2[\u7269\u7406\u5907\u4EFD]\n    B --\x3e B3[\u5168\u91CF\u5907\u4EFD]\n    B --\x3e B4[\u589E\u91CF\u5907\u4EFD]\n    \n    C --\x3e C1[MySQL\u81EA\u5E26\u5DE5\u5177]\n    C --\x3e C2[\u7B2C\u4E09\u65B9\u5DE5\u5177]\n    \n    D --\x3e D1[\u6062\u590D\u6D4B\u8BD5]\n    D --\x3e D2[\u6062\u590D\u6D41\u7A0B]\n    \n    E --\x3e E1[RPO\u76EE\u6807]\n    E --\x3e E2[RTO\u76EE\u6807]"}),"\n",(0,r.jsx)(s.h3,{id:"61-\u5907\u4EFD\u7C7B\u578B\u4E0E\u65B9\u6CD5",children:"6.1 \u5907\u4EFD\u7C7B\u578B\u4E0E\u65B9\u6CD5"}),"\n",(0,r.jsx)(s.p,{children:"MySQL\u652F\u6301\u591A\u79CD\u5907\u4EFD\u65B9\u6CD5\uFF0C\u9700\u8981\u6839\u636E\u6570\u636E\u91CF\u3001\u53EF\u7528\u65F6\u95F4\u7A97\u53E3\u548C\u6062\u590D\u9700\u6C42\u9009\u62E9\u5408\u9002\u7684\u5907\u4EFD\u7C7B\u578B\u3002"}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"backup-types",label:"\u5907\u4EFD\u7C7B\u578B",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL\u5907\u4EFD\u7C7B\u578B\u5BF9\u6BD4"}),"\uFF1A"]}),(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u5907\u4EFD\u7C7B\u578B"}),(0,r.jsx)(s.th,{children:"\u7279\u70B9"}),(0,r.jsx)(s.th,{children:"\u4F18\u52BF"}),(0,r.jsx)(s.th,{children:"\u52A3\u52BF"}),(0,r.jsx)(s.th,{children:"\u9002\u7528\u573A\u666F"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"\u903B\u8F91\u5907\u4EFD"})}),(0,r.jsx)(s.td,{children:"\u5BFC\u51FASQL\u8BED\u53E5"}),(0,r.jsx)(s.td,{children:"\u53EF\u8BFB\u6027\u597D\uFF0C\u53EF\u8DE8\u7248\u672C"}),(0,r.jsx)(s.td,{children:"\u6062\u590D\u6162\uFF0C\u5927\u6570\u636E\u91CF\u6548\u7387\u4F4E"}),(0,r.jsx)(s.td,{children:"\u5C0F\u578B\u6570\u636E\u5E93\uFF0C\u9700\u8981\u7F16\u8F91\u5907\u4EFD\u5185\u5BB9"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"\u7269\u7406\u5907\u4EFD"})}),(0,r.jsx)(s.td,{children:"\u590D\u5236\u6570\u636E\u6587\u4EF6"}),(0,r.jsx)(s.td,{children:"\u5907\u4EFD\u548C\u6062\u590D\u901F\u5EA6\u5FEB"}),(0,r.jsx)(s.td,{children:"\u901A\u5E38\u4F9D\u8D56\u7279\u5B9A\u7248\u672C"}),(0,r.jsx)(s.td,{children:"\u5927\u578B\u6570\u636E\u5E93\uFF0C\u8981\u6C42\u5FEB\u901F\u6062\u590D"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"\u5168\u91CF\u5907\u4EFD"})}),(0,r.jsx)(s.td,{children:"\u5907\u4EFD\u5168\u90E8\u6570\u636E"}),(0,r.jsx)(s.td,{children:"\u6062\u590D\u7B80\u5355\u76F4\u63A5"}),(0,r.jsx)(s.td,{children:"\u8017\u65F6\u957F\uFF0C\u5360\u7528\u7A7A\u95F4\u5927"}),(0,r.jsx)(s.td,{children:"\u5B9A\u671F\u57FA\u7840\u5907\u4EFD"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"\u589E\u91CF\u5907\u4EFD"})}),(0,r.jsx)(s.td,{children:"\u4EC5\u5907\u4EFD\u53D8\u5316\u6570\u636E"}),(0,r.jsx)(s.td,{children:"\u5907\u4EFD\u901F\u5EA6\u5FEB\uFF0C\u8282\u7701\u7A7A\u95F4"}),(0,r.jsx)(s.td,{children:"\u6062\u590D\u590D\u6742\uFF0C\u4F9D\u8D56\u524D\u5E8F\u5907\u4EFD"}),(0,r.jsx)(s.td,{children:"\u9891\u7E41\u5907\u4EFD\uFF0C\u8282\u7701\u8D44\u6E90"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"\u5DEE\u5F02\u5907\u4EFD"})}),(0,r.jsx)(s.td,{children:"\u5907\u4EFD\u81EA\u4E0A\u6B21\u5168\u5907\u540E\u7684\u6240\u6709\u53D8\u5316"}),(0,r.jsx)(s.td,{children:"\u6062\u590D\u6BD4\u589E\u91CF\u7B80\u5355"}),(0,r.jsx)(s.td,{children:"\u5907\u4EFD\u4F53\u79EF\u968F\u65F6\u95F4\u589E\u5927"}),(0,r.jsx)(s.td,{children:"\u5E73\u8861\u5907\u4EFD\u901F\u5EA6\u548C\u6062\u590D\u7B80\u4FBF\u6027"})]})]})]}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5176\u4ED6\u5907\u4EFD\u5206\u7C7B\u7EF4\u5EA6"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u70ED\u5907\u4EFD vs \u51B7\u5907\u4EFD"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u70ED\u5907\u4EFD\uFF1A\u5728\u7EBF\u5907\u4EFD\uFF0C\u4E0D\u5F71\u54CD\u4E1A\u52A1"}),"\n",(0,r.jsx)(s.li,{children:"\u51B7\u5907\u4EFD\uFF1A\u79BB\u7EBF\u5907\u4EFD\uFF0C\u9700\u8981\u505C\u6B62\u670D\u52A1"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u672C\u5730\u5907\u4EFD vs \u8FDC\u7A0B\u5907\u4EFD"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u672C\u5730\u5907\u4EFD\uFF1A\u5B58\u50A8\u5728\u672C\u5730\u6587\u4EF6\u7CFB\u7EDF"}),"\n",(0,r.jsx)(s.li,{children:"\u8FDC\u7A0B\u5907\u4EFD\uFF1A\u5B58\u50A8\u5728\u8FDC\u7A0B\u670D\u52A1\u5668\u6216\u4E91\u5B58\u50A8"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u538B\u7F29\u4E0E\u4E0D\u538B\u7F29"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u538B\u7F29\u5907\u4EFD\uFF1A\u8282\u7701\u5B58\u50A8\u7A7A\u95F4\uFF0C\u4F46\u589E\u52A0CPU\u5F00\u9500"}),"\n",(0,r.jsx)(s.li,{children:"\u4E0D\u538B\u7F29\u5907\u4EFD\uFF1A\u5907\u4EFD\u901F\u5EA6\u66F4\u5FEB\uFF0C\u4F46\u5360\u7528\u66F4\u591A\u7A7A\u95F4"}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"backup-methods",label:"\u5907\u4EFD\u65B9\u6CD5",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5E38\u7528\u7684MySQL\u5907\u4EFD\u65B9\u6CD5"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"mysqldump\uFF08\u903B\u8F91\u5907\u4EFD\uFF09"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"MySQL\u81EA\u5E26\u5DE5\u5177\uFF0C\u5BFC\u51FASQL\u8BED\u53E5"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u5408\u4E2D\u5C0F\u578B\u6570\u636E\u5E93"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# \u5168\u5E93\u5907\u4EFD\nmysqldump -u root -p --all-databases > full_backup.sql\n\n# \u5355\u4E2A\u6570\u636E\u5E93\u5907\u4EFD\nmysqldump -u root -p database_name > db_backup.sql\n\n# \u5907\u4EFD\u7279\u5B9A\u8868\nmysqldump -u root -p database_name table1 table2 > tables_backup.sql\n\n# \u5907\u4EFD\u7ED3\u6784\u4E0D\u5907\u4EFD\u6570\u636E\nmysqldump -u root -p --no-data database_name > schema_only.sql\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7269\u7406\u6587\u4EF6\u590D\u5236"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u76F4\u63A5\u590D\u5236MySQL\u7684\u6570\u636E\u6587\u4EF6"}),"\n",(0,r.jsx)(s.li,{children:"\u5FC5\u987B\u5728\u505C\u6B62MySQL\u6216\u9501\u8868\u7684\u60C5\u51B5\u4E0B\u64CD\u4F5C"}),"\n",(0,r.jsx)(s.li,{children:"\u901F\u5EA6\u5FEB\uFF0C\u9002\u5408\u5927\u6570\u636E\u91CF"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# \u505C\u6B62MySQL\u670D\u52A1\nsystemctl stop mysql\n\n# \u590D\u5236\u6570\u636E\u76EE\u5F55\ncp -r /var/lib/mysql /backup/mysql_data\n\n# \u542F\u52A8MySQL\u670D\u52A1\nsystemctl start mysql\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F7F\u7528InnoDB\u7684\u5728\u7EBF\u5907\u4EFD"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5229\u7528InnoDB\u7684\u8868\u7A7A\u95F4\u590D\u5236"}),"\n",(0,r.jsx)(s.li,{children:"\u70ED\u5907\u4EFD\uFF0C\u4E0D\u5F71\u54CD\u4E1A\u52A1\u8FD0\u884C"}),"\n",(0,r.jsx)(s.li,{children:"\u901A\u5E38\u9700\u8981\u7279\u5B9A\u5DE5\u5177\u652F\u6301\uFF08\u5982Percona XtraBackup\uFF09"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E8C\u8FDB\u5236\u65E5\u5FD7\u5907\u4EFD"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8BB0\u5F55\u6570\u636E\u5E93\u7684\u6240\u6709\u53D8\u66F4"}),"\n",(0,r.jsx)(s.li,{children:"\u7528\u4E8E\u65F6\u95F4\u70B9\u6062\u590D\u548C\u589E\u91CF\u5907\u4EFD"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# \u542F\u7528\u4E8C\u8FDB\u5236\u65E5\u5FD7\n# my.cnf\u4E2D\u6DFB\u52A0\uFF1A\n# log-bin=mysql-bin\n\n# \u67E5\u770B\u4E8C\u8FDB\u5236\u65E5\u5FD7\u5217\u8868\nmysqlbinlog --list\n\n# \u5907\u4EFD\u4E8C\u8FDB\u5236\u65E5\u5FD7\ncp /var/lib/mysql/mysql-bin.* /backup/binlogs/\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6570\u636E\u5E93\u590D\u5236"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528MySQL\u7684\u590D\u5236\u529F\u80FD\u4F5C\u4E3A\u5907\u4EFD\u7B56\u7565"}),"\n",(0,r.jsx)(s.li,{children:"\u5B9E\u65F6\u540C\u6B65\u6570\u636E\u5230\u4ECE\u670D\u52A1\u5668"}),"\n",(0,r.jsx)(s.li,{children:"\u63D0\u4F9B\u5FEB\u901F\u7684\u6545\u969C\u5207\u6362\u80FD\u529B"}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"backup-strategy",label:"\u5907\u4EFD\u7B56\u7565",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5236\u5B9A\u6709\u6548\u7684\u5907\u4EFD\u7B56\u7565"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5907\u4EFD\u9891\u7387"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6839\u636E\u6570\u636E\u53D8\u5316\u9891\u7387\u548C\u4E1A\u52A1\u9700\u6C42\u8BBE\u7F6E"}),"\n",(0,r.jsx)(s.li,{children:"\u5178\u578B\u7B56\u7565\uFF1A\u6BCF\u65E5\u5168\u91CF + \u6BCF\u5C0F\u65F6\u589E\u91CF"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5907\u4EFD\u8F6E\u6362"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4FDD\u7559\u591A\u4E2A\u65F6\u95F4\u70B9\u7684\u5907\u4EFD"}),"\n",(0,r.jsx)(s.li,{children:"\u4F8B\u5982\uFF1A\u4FDD\u7559\u6700\u8FD17\u5929\u7684\u6BCF\u65E5\u5907\u4EFD\uFF0C\u6700\u8FD14\u5468\u7684\u6BCF\u5468\u5907\u4EFD\uFF0C\u6700\u8FD112\u4E2A\u6708\u7684\u6BCF\u6708\u5907\u4EFD"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B58\u50A8\u4F4D\u7F6E"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9075\u5FAA3-2-1\u539F\u5219\uFF1A3\u4EFD\u4E0D\u540C\u5907\u4EFD\uFF0C2\u79CD\u5B58\u50A8\u4ECB\u8D28\uFF0C1\u4EFD\u5F02\u5730\u5B58\u50A8"}),"\n",(0,r.jsx)(s.li,{children:"\u8003\u8651\u4F7F\u7528\u4E91\u5B58\u50A8\u4F5C\u4E3A\u5F02\u5730\u5907\u4EFD\u89E3\u51B3\u65B9\u6848"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5907\u4EFD\u9A8C\u8BC1"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5B9A\u671F\u9A8C\u8BC1\u5907\u4EFD\u7684\u5B8C\u6574\u6027"}),"\n",(0,r.jsx)(s.li,{children:"\u5468\u671F\u6027\u6267\u884C\u6062\u590D\u6D4B\u8BD5"}),"\n",(0,r.jsx)(s.li,{children:"\u68C0\u67E5\u5907\u4EFD\u6587\u4EF6\u7684\u6709\u6548\u6027"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5907\u4EFD\u76D1\u63A7"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u76D1\u63A7\u5907\u4EFD\u4EFB\u52A1\u6210\u529F\u6267\u884C"}),"\n",(0,r.jsx)(s.li,{children:"\u68C0\u67E5\u5907\u4EFD\u5927\u5C0F\u5F02\u5E38"}),"\n",(0,r.jsx)(s.li,{children:"\u76D1\u63A7\u5907\u4EFD\u5B58\u50A8\u7A7A\u95F4\u4F7F\u7528\u60C5\u51B5"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u793A\u4F8B\u5907\u4EFD\u7B56\u7565"}),"\uFF1A"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'# \u6BCF\u65E5\u51CC\u6668\u5168\u91CF\u5907\u4EFD\u811A\u672C\u793A\u4F8B\n#!/bin/bash\nDATE=$(date +%Y%m%d)\nmysqldump -u backup_user -ppassword --single-transaction --all-databases | gzip > /backup/daily/mysql_all_$DATE.sql.gz\n\n# \u590D\u5236\u5907\u4EFD\u5230\u8FDC\u7A0B\u5B58\u50A8\nrsync -avz /backup/daily/mysql_all_$DATE.sql.gz backup-server:/remote/backup/\n\n# \u4FDD\u7559\u6700\u8FD130\u5929\u7684\u5907\u4EFD\nfind /backup/daily/ -name "mysql_all_*.sql.gz" -type f -mtime +30 -delete\n'})})]})]}),"\n",(0,r.jsx)(s.h3,{id:"62-\u5907\u4EFD\u5DE5\u5177\u5BF9\u6BD4",children:"6.2 \u5907\u4EFD\u5DE5\u5177\u5BF9\u6BD4"}),"\n",(0,r.jsx)(s.p,{children:"\u591A\u79CD\u5907\u4EFD\u5DE5\u5177\u5404\u6709\u7279\u70B9\uFF0C\u9009\u62E9\u5408\u9002\u7684\u5DE5\u5177\u53EF\u4EE5\u7B80\u5316\u5907\u4EFD\u6D41\u7A0B\u5E76\u63D0\u9AD8\u53EF\u9760\u6027\u3002"}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"mysql-tools",label:"MySQL\u539F\u751F\u5DE5\u5177",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL\u81EA\u5E26\u7684\u5907\u4EFD\u5DE5\u5177"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"mysqldump"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6700\u5E38\u7528\u7684\u903B\u8F91\u5907\u4EFD\u5DE5\u5177"}),"\n",(0,r.jsx)(s.li,{children:"\u4F18\u70B9\uFF1A\u7B80\u5355\u6613\u7528\uFF0C\u8DE8\u7248\u672C\u517C\u5BB9"}),"\n",(0,r.jsx)(s.li,{children:"\u7F3A\u70B9\uFF1A\u5927\u6570\u636E\u91CF\u65F6\u6027\u80FD\u8F83\u5DEE"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u7528\u573A\u666F\uFF1A\u4E2D\u5C0F\u578B\u6570\u636E\u5E93\uFF0C\u9700\u8981\u53EF\u8BFB\u5907\u4EFD"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# \u589E\u5F3A\u7684mysqldump\u9009\u9879\nmysqldump -u root -p \\\n  --single-transaction \\    # \u4E00\u81F4\u6027\u5FEB\u7167\uFF0C\u4E0D\u9501\u8868\n  --routines \\              # \u5305\u542B\u5B58\u50A8\u8FC7\u7A0B\u548C\u51FD\u6570\n  --triggers \\              # \u5305\u542B\u89E6\u53D1\u5668\n  --events \\                # \u5305\u542B\u4E8B\u4EF6\n  --all-databases > full_backup.sql\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"mysqlpump (MySQL 5.7+)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"mysqldump\u7684\u589E\u5F3A\u7248"}),"\n",(0,r.jsx)(s.li,{children:"\u652F\u6301\u5E76\u884C\u5907\u4EFD\u591A\u4E2A\u6570\u636E\u5E93\u6216\u8868"}),"\n",(0,r.jsx)(s.li,{children:"\u5185\u7F6E\u538B\u7F29\u529F\u80FD"}),"\n",(0,r.jsx)(s.li,{children:"\u66F4\u597D\u7684\u8FDB\u5EA6\u62A5\u544A"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# \u4F7F\u7528\u5E76\u884C\u5904\u7406\u63D0\u9AD8\u5907\u4EFD\u901F\u5EA6\nmysqlpump -u root -p \\\n  --parallel-schemas=4 \\    # \u5E76\u884C\u5907\u4EFD4\u4E2Aschema\n  --compress-output=zlib \\  # \u4F7F\u7528zlib\u538B\u7F29\n  --all-databases > backup.sql.gz\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL Shell Utilities (MySQL 8.0+)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u63D0\u4F9B\u5B9E\u4F8B\u5907\u4EFD\u548C\u8868\u5BFC\u51FA\u529F\u80FD"}),"\n",(0,r.jsx)(s.li,{children:"\u652F\u6301\u5E76\u884C\u5904\u7406\u548C\u538B\u7F29"}),"\n",(0,r.jsx)(s.li,{children:"\u73B0\u4EE3CLI\u754C\u9762"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# MySQL Shell\u4E2D\u4F7F\u7528util.dumpInstance()\nmysqlsh -- util dumpInstance('/backup/dump', {\n  'ocimds': true,\n  'compression': 'zstd',\n  'threads': 8\n})\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL Enterprise Backup"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Oracle\u5546\u4E1A\u7248\u5DE5\u5177"}),"\n",(0,r.jsx)(s.li,{children:"\u652F\u6301\u70ED\u5907\u4EFDInnoDB\u8868"}),"\n",(0,r.jsx)(s.li,{children:"\u652F\u6301\u589E\u91CF\u5907\u4EFD"}),"\n",(0,r.jsx)(s.li,{children:"\u52A0\u5BC6\u5907\u4EFD\u652F\u6301"}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"third-party",label:"\u7B2C\u4E09\u65B9\u5907\u4EFD\u5DE5\u5177",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6D41\u884C\u7684\u7B2C\u4E09\u65B9\u5907\u4EFD\u5DE5\u5177"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Percona XtraBackup"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5F00\u6E90\u7684\u7269\u7406\u70ED\u5907\u4EFD\u5DE5\u5177"}),"\n",(0,r.jsx)(s.li,{children:"\u652F\u6301InnoDB\u7684\u5728\u7EBF\u5907\u4EFD"}),"\n",(0,r.jsx)(s.li,{children:"\u5168\u91CF\u548C\u589E\u91CF\u5907\u4EFD\u652F\u6301"}),"\n",(0,r.jsx)(s.li,{children:"\u76F4\u63A5\u5907\u4EFD\u7269\u7406\u6587\u4EF6\uFF0C\u901F\u5EA6\u5FEB"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# \u5168\u91CF\u5907\u4EFD\nxtrabackup --backup --target-dir=/backup/full\n\n# \u51C6\u5907\u5907\u4EFD\uFF08\u4F7F\u5907\u4EFD\u4E00\u81F4\uFF09\nxtrabackup --prepare --target-dir=/backup/full\n\n# \u589E\u91CF\u5907\u4EFD\nxtrabackup --backup --target-dir=/backup/inc1 \\\n  --incremental-basedir=/backup/full\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MariaDB Backup (mariabackup)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u57FA\u4E8EXtraBackup\u7684\u5206\u652F"}),"\n",(0,r.jsx)(s.li,{children:"\u4E13\u4E3AMariaDB\u4F18\u5316"}),"\n",(0,r.jsx)(s.li,{children:"\u529F\u80FD\u4E0EXtraBackup\u7C7B\u4F3C"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"mydumper/myloader"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9AD8\u6027\u80FD\u7684\u591A\u7EBF\u7A0B\u5907\u4EFD\u5DE5\u5177"}),"\n",(0,r.jsx)(s.li,{children:"\u6BD4mysqldump\u5FEB\u6570\u500D"}),"\n",(0,r.jsx)(s.li,{children:"\u652F\u6301\u8868\u7EA7\u5E76\u884C\u5907\u4EFD\u548C\u6062\u590D"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# \u5E76\u884C\u5907\u4EFD\nmydumper -u root -p password -o /backup/mydumper \\\n  --threads=8 --compress --regex '^(?!(mysql|information_schema|performance_schema))'\n\n# \u5E76\u884C\u6062\u590D\nmyloader -u root -p password -d /backup/mydumper --threads=8\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E1A\u52A1\u81EA\u5B9A\u4E49\u5907\u4EFD\u811A\u672C"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u7ED3\u5408\u591A\u79CD\u5DE5\u5177\u5B9A\u5236\u5907\u4EFD\u6D41\u7A0B"}),"\n",(0,r.jsx)(s.li,{children:"\u96C6\u6210\u76D1\u63A7\u548C\u544A\u8B66"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u5E94\u7279\u5B9A\u4E1A\u52A1\u9700\u6C42"}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"comparison",label:"\u5DE5\u5177\u5BF9\u6BD4",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5907\u4EFD\u5DE5\u5177\u7EFC\u5408\u5BF9\u6BD4"}),"\uFF1A"]}),(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u5DE5\u5177"}),(0,r.jsx)(s.th,{children:"\u5907\u4EFD\u7C7B\u578B"}),(0,r.jsx)(s.th,{children:"\u901F\u5EA6"}),(0,r.jsx)(s.th,{children:"\u9002\u7528\u89C4\u6A21"}),(0,r.jsx)(s.th,{children:"\u5728\u7EBF\u5907\u4EFD"}),(0,r.jsx)(s.th,{children:"\u589E\u91CF\u5907\u4EFD"}),(0,r.jsx)(s.th,{children:"\u6613\u7528\u6027"}),(0,r.jsx)(s.th,{children:"\u5F00\u6E90"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"mysqldump"})}),(0,r.jsx)(s.td,{children:"\u903B\u8F91"}),(0,r.jsx)(s.td,{children:"\u6162"}),(0,r.jsx)(s.td,{children:"\u5C0F/\u4E2D"}),(0,r.jsx)(s.td,{children:"\u662F*"}),(0,r.jsx)(s.td,{children:"\u5426"}),(0,r.jsx)(s.td,{children:"\u9AD8"}),(0,r.jsx)(s.td,{children:"\u662F"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"mysqlpump"})}),(0,r.jsx)(s.td,{children:"\u903B\u8F91"}),(0,r.jsx)(s.td,{children:"\u4E2D"}),(0,r.jsx)(s.td,{children:"\u4E2D"}),(0,r.jsx)(s.td,{children:"\u662F*"}),(0,r.jsx)(s.td,{children:"\u5426"}),(0,r.jsx)(s.td,{children:"\u9AD8"}),(0,r.jsx)(s.td,{children:"\u662F"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"MySQL Shell"})}),(0,r.jsx)(s.td,{children:"\u903B\u8F91"}),(0,r.jsx)(s.td,{children:"\u4E2D"}),(0,r.jsx)(s.td,{children:"\u4E2D"}),(0,r.jsx)(s.td,{children:"\u662F*"}),(0,r.jsx)(s.td,{children:"\u5426"}),(0,r.jsx)(s.td,{children:"\u4E2D"}),(0,r.jsx)(s.td,{children:"\u662F"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"XtraBackup"})}),(0,r.jsx)(s.td,{children:"\u7269\u7406"}),(0,r.jsx)(s.td,{children:"\u5FEB"}),(0,r.jsx)(s.td,{children:"\u4E2D/\u5927"}),(0,r.jsx)(s.td,{children:"\u662F"}),(0,r.jsx)(s.td,{children:"\u662F"}),(0,r.jsx)(s.td,{children:"\u4E2D"}),(0,r.jsx)(s.td,{children:"\u662F"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"mydumper"})}),(0,r.jsx)(s.td,{children:"\u903B\u8F91"}),(0,r.jsx)(s.td,{children:"\u4E2D/\u5FEB"}),(0,r.jsx)(s.td,{children:"\u4E2D/\u5927"}),(0,r.jsx)(s.td,{children:"\u662F*"}),(0,r.jsx)(s.td,{children:"\u5426"}),(0,r.jsx)(s.td,{children:"\u4E2D"}),(0,r.jsx)(s.td,{children:"\u662F"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Enterprise Backup"})}),(0,r.jsx)(s.td,{children:"\u7269\u7406"}),(0,r.jsx)(s.td,{children:"\u5FEB"}),(0,r.jsx)(s.td,{children:"\u4E2D/\u5927"}),(0,r.jsx)(s.td,{children:"\u662F"}),(0,r.jsx)(s.td,{children:"\u662F"}),(0,r.jsx)(s.td,{children:"\u4E2D"}),(0,r.jsx)(s.td,{children:"\u5426"})]})]})]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\u4F7F\u7528",(0,r.jsx)(s.code,{children:"--single-transaction"}),"\u9009\u9879\u5728InnoDB\u8868\u4E0A\u5B9E\u73B0\u65E0\u9501\u5907\u4EFD"]}),"\n"]}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9009\u62E9\u5907\u4EFD\u5DE5\u5177\u7684\u8003\u8651\u56E0\u7D20"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6570\u636E\u5E93\u5927\u5C0F"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6570\u636E\u91CF\u5927\u65F6\u4F18\u5148\u8003\u8651\u7269\u7406\u5907\u4EFD\u6216\u5E76\u884C\u903B\u8F91\u5907\u4EFD"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u53EF\u7528\u7EF4\u62A4\u7A97\u53E3"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u7EF4\u62A4\u7A97\u53E3\u77ED\u65F6\u9009\u62E9\u5728\u7EBF\u5907\u4EFD\u5DE5\u5177"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6062\u590D\u65F6\u95F4\u8981\u6C42"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"RTO\u8981\u6C42\u4F4E\u65F6\u4F18\u5148\u8003\u8651\u7269\u7406\u5907\u4EFD"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9884\u7B97\u9650\u5236"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5546\u4E1A\u5DE5\u5177vs\u5F00\u6E90\u5DE5\u5177"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6280\u672F\u56E2\u961F\u80FD\u529B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5DE5\u5177\u7684\u5B66\u4E60\u66F2\u7EBF\u548C\u56E2\u961F\u719F\u6089\u5EA6"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7279\u6B8A\u9700\u6C42"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8DE8\u7248\u672C\u8FC1\u79FB\u3001\u90E8\u5206\u6570\u636E\u6062\u590D\u7B49"}),"\n"]}),"\n"]}),"\n"]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"63-\u6062\u590D\u7B56\u7565\u4E0E\u6F14\u7EC3",children:"6.3 \u6062\u590D\u7B56\u7565\u4E0E\u6F14\u7EC3"}),"\n",(0,r.jsx)(s.p,{children:"\u6709\u6548\u7684\u6062\u590D\u7B56\u7565\u548C\u5B9A\u671F\u7684\u6062\u590D\u6F14\u7EC3\u80FD\u591F\u786E\u4FDD\u5728\u707E\u96BE\u53D1\u751F\u65F6\u80FD\u591F\u5FEB\u901F\u6062\u590D\u6570\u636E\u3002"}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"recovery-types",label:"\u6062\u590D\u7C7B\u578B",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL\u652F\u6301\u591A\u79CD\u6062\u590D\u7C7B\u578B"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B8C\u6574\u6570\u636E\u5E93\u6062\u590D"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6062\u590D\u6574\u4E2A\u6570\u636E\u5E93\u5B9E\u4F8B"}),"\n",(0,r.jsx)(s.li,{children:"\u901A\u5E38\u7528\u4E8E\u707E\u96BE\u6062\u590D"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# \u4ECEmysqldump\u6062\u590D\nmysql -u root -p < full_backup.sql\n\n# \u4ECEXtraBackup\u6062\u590D\nxtrabackup --copy-back --target-dir=/backup/full\nchown -R mysql:mysql /var/lib/mysql\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7279\u5B9A\u6570\u636E\u5E93\u6062\u590D"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u53EA\u6062\u590D\u7279\u5B9A\u7684\u6570\u636E\u5E93"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u7528\u4E8E\u5355\u4E2A\u6570\u636E\u5E93\u635F\u574F\u6216\u8BEF\u5220"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# \u6062\u590D\u5355\u4E2A\u6570\u636E\u5E93\nmysql -u root -p database_name < database_backup.sql\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8868\u7EA7\u6062\u590D"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6062\u590D\u7279\u5B9A\u7684\u8868"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u7528\u4E8E\u8868\u635F\u574F\u6216\u6570\u636E\u9519\u8BEF"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# \u6062\u590D\u5355\u4E2A\u8868\nmysql -u root -p database_name < table_backup.sql\n\n# \u6216\u8005\u4F7F\u7528\u5BFC\u5165\u5BFC\u51FA\nmysqldump -u root -p database_name table_name > table_backup.sql\nmysql -u root -p database_name < table_backup.sql\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u65F6\u95F4\u70B9\u6062\u590D(PITR)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6062\u590D\u5230\u7279\u5B9A\u65F6\u95F4\u70B9\u7684\u72B6\u6001"}),"\n",(0,r.jsx)(s.li,{children:"\u7ED3\u5408\u5168\u91CF\u5907\u4EFD\u548C\u4E8C\u8FDB\u5236\u65E5\u5FD7"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u7528\u4E8E\u6570\u636E\u9519\u8BEF\u6216\u903B\u8F91\u635F\u574F"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'# 1. \u5148\u6062\u590D\u5168\u91CF\u5907\u4EFD\nmysql -u root -p < full_backup.sql\n\n# 2. \u5E94\u7528\u4E8C\u8FDB\u5236\u65E5\u5FD7\u5230\u7279\u5B9A\u65F6\u95F4\u70B9\nmysqlbinlog --stop-datetime="2023-08-11 14:30:00" \\\n  /var/lib/mysql/mysql-bin.000001 | mysql -u root -p\n'})}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"recovery-process",label:"\u6062\u590D\u6D41\u7A0B",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6807\u51C6\u5316\u7684\u6062\u590D\u6D41\u7A0B"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8BC4\u4F30\u4E0E\u51C6\u5907"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u660E\u786E\u6062\u590D\u76EE\u6807\u548C\u8303\u56F4"}),"\n",(0,r.jsx)(s.li,{children:"\u786E\u5B9A\u6700\u4F73\u6062\u590D\u65B9\u6CD5"}),"\n",(0,r.jsx)(s.li,{children:"\u51C6\u5907\u6062\u590D\u73AF\u5883\uFF08\u670D\u52A1\u5668\u3001\u5B58\u50A8\u7B49\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"\u786E\u8BA4\u5907\u4EFD\u6587\u4EF6\u53EF\u7528\u6027"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6267\u884C\u6062\u590D\u524D\u7684\u6B65\u9AA4"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u505C\u6B62\u53D7\u5F71\u54CD\u7684\u670D\u52A1\uFF08\u5982\u9700\u8981\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"\u5907\u4EFD\u5F53\u524D\u6570\u636E\uFF08\u9632\u6B62\u6062\u590D\u8FC7\u7A0B\u9020\u6210\u8FDB\u4E00\u6B65\u635F\u5931\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"\u51C6\u5907\u8DB3\u591F\u7684\u78C1\u76D8\u7A7A\u95F4"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6267\u884C\u6062\u590D"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9075\u5FAA\u9884\u5B9A\u7684\u6062\u590D\u7A0B\u5E8F"}),"\n",(0,r.jsx)(s.li,{children:"\u8BB0\u5F55\u6062\u590D\u8FC7\u7A0B"}),"\n",(0,r.jsx)(s.li,{children:"\u76D1\u63A7\u6062\u590D\u8FDB\u5EA6"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9A8C\u8BC1\u6062\u590D\u7ED3\u679C"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u68C0\u67E5\u6570\u636E\u5B8C\u6574\u6027"}),"\n",(0,r.jsx)(s.li,{children:"\u9A8C\u8BC1\u5E94\u7528\u7A0B\u5E8F\u529F\u80FD"}),"\n",(0,r.jsx)(s.li,{children:"\u786E\u8BA4\u6570\u636E\u4E00\u81F4\u6027"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6062\u590D\u540E\u64CD\u4F5C"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u91CD\u65B0\u542F\u52A8\u670D\u52A1"}),"\n",(0,r.jsx)(s.li,{children:"\u901A\u77E5\u76F8\u5173\u65B9\u6062\u590D\u5B8C\u6210"}),"\n",(0,r.jsx)(s.li,{children:"\u8BB0\u5F55\u6062\u590D\u65F6\u95F4\u548C\u7ED3\u679C"}),"\n",(0,r.jsx)(s.li,{children:"\u66F4\u65B0\u76D1\u63A7\u7CFB\u7EDF"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6062\u590D\u6D41\u7A0B\u6587\u6863\u793A\u4F8B"}),"\uFF1A"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"\u6570\u636E\u5E93\u6062\u590D\u7A0B\u5E8F\n\n1. \u51C6\u5907\u9636\u6BB5\n   - \u786E\u8BA4\u5907\u4EFD\u6587\u4EF6\u4F4D\u7F6E\uFF1A/backup/daily/mysql_all_20230810.sql.gz\n   - \u9A8C\u8BC1\u5907\u4EFD\u6587\u4EF6\u7684\u5B8C\u6574\u6027\uFF1Amd5sum /backup/daily/mysql_all_20230810.sql.gz\n   - \u786E\u4FDD\u6062\u590D\u76EE\u6807\u670D\u52A1\u5668\u78C1\u76D8\u7A7A\u95F4\u5145\u8DB3\n\n2. \u6267\u884C\u6062\u590D\n   - \u505C\u6B62MySQL\u670D\u52A1\uFF1Asystemctl stop mysql\n   - \u6E05\u7406\u76EE\u6807\u6570\u636E\u76EE\u5F55\uFF08\u5982\u9700\u8981\uFF09\uFF1Arm -rf /var/lib/mysql/*\n   - \u6062\u590D\u6570\u636E\uFF1A\n     zcat /backup/daily/mysql_all_20230810.sql.gz | mysql -u root -p\n\n3. \u9A8C\u8BC1\u6062\u590D\n   - \u542F\u52A8MySQL\u670D\u52A1\uFF1Asystemctl start mysql\n   - \u68C0\u67E5\u6570\u636E\u5E93\u72B6\u6001\uFF1Amysqladmin -u root -p status\n   - \u68C0\u67E5\u8868\u6570\u91CF\uFF1Amysql -u root -p -e \"SELECT COUNT(*) FROM information_schema.tables WHERE table_schema NOT IN ('information_schema', 'performance_schema', 'mysql');\"\n   - \u68C0\u67E5\u5173\u952E\u8868\u6570\u636E\uFF1Amysql -u root -p -e \"SELECT COUNT(*) FROM database.important_table;\"\n\n4. \u8BB0\u5F55\u7ED3\u679C\n   - \u8BB0\u5F55\u6062\u590D\u5F00\u59CB\u65F6\u95F4\u548C\u7ED3\u675F\u65F6\u95F4\n   - \u8BB0\u5F55\u6062\u590D\u8FC7\u7A0B\u4E2D\u7684\u4EFB\u4F55\u5F02\u5E38\n   - \u66F4\u65B0\u6062\u590D\u8BB0\u5F55\u6587\u6863\n"})})]}),(0,r.jsxs)(c.A,{value:"recovery-testing",label:"\u6062\u590D\u6F14\u7EC3",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6062\u590D\u6F14\u7EC3\u7684\u91CD\u8981\u6027\u548C\u65B9\u6CD5"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6F14\u7EC3\u76EE\u7684"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9A8C\u8BC1\u5907\u4EFD\u7684\u6709\u6548\u6027\u548C\u5B8C\u6574\u6027"}),"\n",(0,r.jsx)(s.li,{children:"\u6D4B\u8BD5\u6062\u590D\u6D41\u7A0B\u7684\u53EF\u884C\u6027"}),"\n",(0,r.jsx)(s.li,{children:"\u8BC6\u522B\u6D41\u7A0B\u4E2D\u7684\u95EE\u9898\u548C\u74F6\u9888"}),"\n",(0,r.jsx)(s.li,{children:"\u786E\u4FDD\u56E2\u961F\u719F\u6089\u6062\u590D\u6B65\u9AA4"}),"\n",(0,r.jsx)(s.li,{children:"\u8BC4\u4F30\u5B9E\u9645\u6062\u590D\u65F6\u95F4\uFF08RTO\uFF09"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6F14\u7EC3\u9891\u7387"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5E38\u89C4\u6F14\u7EC3\uFF1A\u6BCF\u5B63\u5EA6\u6216\u534A\u5E74\u4E00\u6B21"}),"\n",(0,r.jsx)(s.li,{children:"\u5173\u952E\u7CFB\u7EDF\uFF1A\u66F4\u9891\u7E41\uFF08\u5982\u6BCF\u6708\u4E00\u6B21\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"\u6D41\u7A0B\u53D8\u66F4\u540E\uFF1A\u5E94\u7ACB\u5373\u8FDB\u884C\u6F14\u7EC3\u6D4B\u8BD5"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6F14\u7EC3\u7C7B\u578B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u684C\u9762\u6F14\u7EC3"}),"\uFF1A\u6A21\u62DF\u573A\u666F\uFF0C\u8BA8\u8BBA\u6062\u590D\u6B65\u9AA4"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6C99\u76D2\u6062\u590D"}),"\uFF1A\u5728\u9694\u79BB\u73AF\u5883\u4E2D\u8FDB\u884C\u5B9E\u9645\u6062\u590D"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5168\u9762\u6F14\u7EC3"}),"\uFF1A\u6A21\u62DF\u771F\u5B9E\u707E\u96BE\uFF0C\u6267\u884C\u5B8C\u6574\u6062\u590D\u6D41\u7A0B"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u968F\u673A\u6D4B\u8BD5"}),"\uFF1A\u4E0D\u9884\u5148\u901A\u77E5\u7684\u6062\u590D\u6D4B\u8BD5"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6F14\u7EC3\u6B65\u9AA4"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5B9A\u4E49\u6F14\u7EC3\u76EE\u6807\u548C\u573A\u666F\uFF08\u5982\u6574\u5E93\u6062\u590D\u3001\u8868\u6062\u590D\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"\u51C6\u5907\u6D4B\u8BD5\u73AF\u5883"}),"\n",(0,r.jsx)(s.li,{children:"\u6267\u884C\u6062\u590D\u6B65\u9AA4"}),"\n",(0,r.jsx)(s.li,{children:"\u9A8C\u8BC1\u6062\u590D\u7ED3\u679C"}),"\n",(0,r.jsx)(s.li,{children:"\u8BB0\u5F55\u95EE\u9898\u548C\u6539\u8FDB\u70B9"}),"\n",(0,r.jsx)(s.li,{children:"\u66F4\u65B0\u6062\u590D\u6587\u6863"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6F14\u7EC3\u8BC4\u4F30\u6307\u6807"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6062\u590D\u65F6\u95F4\uFF08\u4E0ERTO\u76EE\u6807\u5BF9\u6BD4\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"\u6570\u636E\u4E22\u5931\u91CF\uFF08\u4E0ERPO\u76EE\u6807\u5BF9\u6BD4\uFF09"}),"\n",(0,r.jsx)(s.li,{children:"\u8FC7\u7A0B\u4E2D\u9047\u5230\u7684\u95EE\u9898"}),"\n",(0,r.jsx)(s.li,{children:"\u56E2\u961F\u534F\u4F5C\u6548\u679C"}),"\n"]}),"\n"]}),"\n"]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"64-\u707E\u96BE\u6062\u590D\u8BA1\u5212",children:"6.4 \u707E\u96BE\u6062\u590D\u8BA1\u5212"}),"\n",(0,r.jsx)(s.p,{children:"\u5B8C\u5584\u7684\u707E\u96BE\u6062\u590D\u8BA1\u5212(DRP)\u662F\u786E\u4FDD\u4E1A\u52A1\u8FDE\u7EED\u6027\u7684\u5173\u952E\u7EC4\u6210\u90E8\u5206\uFF0C\u4E3A\u4E25\u91CD\u6570\u636E\u4E22\u5931\u6216\u7CFB\u7EDF\u6545\u969C\u63D0\u4F9B\u7CFB\u7EDF\u5316\u7684\u5E94\u5BF9\u65B9\u6848\u3002"}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"drp-basics",label:"\u707E\u96BE\u6062\u590D\u57FA\u7840",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u707E\u96BE\u6062\u590D\u5173\u952E\u6982\u5FF5"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6062\u590D\u70B9\u76EE\u6807(RPO)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5B9A\u4E49\uFF1A\u53EF\u63A5\u53D7\u7684\u6700\u5927\u6570\u636E\u4E22\u5931\u65F6\u95F4\u8303\u56F4"}),"\n",(0,r.jsx)(s.li,{children:"\u793A\u4F8B\uFF1ARPO=1\u5C0F\u65F6\u610F\u5473\u7740\u6700\u591A\u53EF\u80FD\u4E22\u59311\u5C0F\u65F6\u7684\u6570\u636E"}),"\n",(0,r.jsx)(s.li,{children:"\u5F71\u54CD\u56E0\u7D20\uFF1A\u5907\u4EFD\u9891\u7387\u3001\u590D\u5236\u5EF6\u8FDF"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6062\u590D\u65F6\u95F4\u76EE\u6807(RTO)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5B9A\u4E49\uFF1A\u7CFB\u7EDF\u6062\u590D\u5230\u53EF\u7528\u72B6\u6001\u7684\u76EE\u6807\u65F6\u95F4"}),"\n",(0,r.jsx)(s.li,{children:"\u793A\u4F8B\uFF1ARTO=4\u5C0F\u65F6\u610F\u5473\u7740\u7CFB\u7EDF\u5E94\u57284\u5C0F\u65F6\u5185\u6062\u590D\u670D\u52A1"}),"\n",(0,r.jsx)(s.li,{children:"\u5F71\u54CD\u56E0\u7D20\uFF1A\u6062\u590D\u8FC7\u7A0B\u590D\u6742\u5EA6\u3001\u6570\u636E\u91CF\u3001\u786C\u4EF6\u53EF\u7528\u6027"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u707E\u96BE\u6062\u590D\u7EA7\u522B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u7EA7\u522B"}),(0,r.jsx)(s.th,{children:"\u63CF\u8FF0"}),(0,r.jsx)(s.th,{children:"RPO"}),(0,r.jsx)(s.th,{children:"RTO"}),(0,r.jsx)(s.th,{children:"\u6210\u672C"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"0"}),(0,r.jsx)(s.td,{children:"\u65E0\u8BA1\u5212/\u4EC5\u5907\u4EFD"}),(0,r.jsx)(s.td,{children:"\u5929/\u5468"}),(0,r.jsx)(s.td,{children:"\u5929/\u5468"}),(0,r.jsx)(s.td,{children:"\u6700\u4F4E"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"1"}),(0,r.jsx)(s.td,{children:"\u51B7\u5907\u7528\u7AD9\u70B9"}),(0,r.jsx)(s.td,{children:"\u5C0F\u65F6/\u5929"}),(0,r.jsx)(s.td,{children:"\u5929"}),(0,r.jsx)(s.td,{children:"\u4F4E"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"2"}),(0,r.jsx)(s.td,{children:"\u6E29\u5907\u7528\u7AD9\u70B9"}),(0,r.jsx)(s.td,{children:"\u5C0F\u65F6"}),(0,r.jsx)(s.td,{children:"\u5C0F\u65F6"}),(0,r.jsx)(s.td,{children:"\u4E2D"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"3"}),(0,r.jsx)(s.td,{children:"\u70ED\u5907\u7528\u7AD9\u70B9"}),(0,r.jsx)(s.td,{children:"\u5206\u949F"}),(0,r.jsx)(s.td,{children:"\u5206\u949F/\u5C0F\u65F6"}),(0,r.jsx)(s.td,{children:"\u9AD8"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"4"}),(0,r.jsx)(s.td,{children:"\u53CC\u6D3B\u7AD9\u70B9"}),(0,r.jsx)(s.td,{children:"\u79D2/\u96F6"}),(0,r.jsx)(s.td,{children:"\u79D2/\u96F6"}),(0,r.jsx)(s.td,{children:"\u6700\u9AD8"})]})]})]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u707E\u96BE\u7C7B\u578B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u786C\u4EF6\u6545\u969C\uFF1A\u670D\u52A1\u5668\u3001\u5B58\u50A8\u7CFB\u7EDF\u6545\u969C"}),"\n",(0,r.jsx)(s.li,{children:"\u8F6F\u4EF6\u6545\u969C\uFF1A\u6570\u636E\u5E93\u5D29\u6E83\u3001\u914D\u7F6E\u9519\u8BEF"}),"\n",(0,r.jsx)(s.li,{children:"\u4EBA\u4E3A\u9519\u8BEF\uFF1A\u610F\u5916\u5220\u9664\u3001\u9519\u8BEF\u64CD\u4F5C"}),"\n",(0,r.jsx)(s.li,{children:"\u81EA\u7136\u707E\u5BB3\uFF1A\u706B\u707E\u3001\u6C34\u707E\u3001\u5730\u9707\u7B49"}),"\n",(0,r.jsx)(s.li,{children:"\u7F51\u7EDC\u6545\u969C\uFF1A\u7F51\u7EDC\u4E2D\u65AD\u3001DDoS\u653B\u51FB"}),"\n",(0,r.jsx)(s.li,{children:"\u6570\u636E\u4E2D\u5FC3\u6545\u969C\uFF1A\u7535\u529B\u4E2D\u65AD\u3001\u5236\u51B7\u7CFB\u7EDF\u6545\u969C"}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"drp-strategies",label:"\u6062\u590D\u7B56\u7565",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5E38\u7528\u7684MySQL\u707E\u96BE\u6062\u590D\u7B56\u7565"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5907\u4EFD\u6062\u590D\u7B56\u7565"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5B9A\u671F\u5907\u4EFD\uFF0C\u707E\u96BE\u540E\u4ECE\u5907\u4EFD\u6062\u590D"}),"\n",(0,r.jsx)(s.li,{children:"\u4F18\u70B9\uFF1A\u6210\u672C\u4F4E\uFF0C\u5B9E\u73B0\u7B80\u5355"}),"\n",(0,r.jsx)(s.li,{children:"\u7F3A\u70B9\uFF1ARPO\u548CRTO\u8F83\u9AD8\uFF0C\u6570\u636E\u4E22\u5931\u98CE\u9669\u5927"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u7528\u573A\u666F\uFF1A\u975E\u6838\u5FC3\u4E1A\u52A1\u7CFB\u7EDF"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E3B\u4ECE\u590D\u5236\u7B56\u7565"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u901A\u8FC7MySQL\u4E3B\u4ECE\u590D\u5236\u63D0\u4F9B\u70ED\u5907\u7528\u7CFB\u7EDF"}),"\n",(0,r.jsx)(s.li,{children:"\u4F18\u70B9\uFF1ARPO\u8F83\u4F4E\uFF0C\u5207\u6362\u76F8\u5BF9\u5FEB\u901F"}),"\n",(0,r.jsx)(s.li,{children:"\u7F3A\u70B9\uFF1A\u590D\u5236\u5EF6\u8FDF\u5BFC\u81F4\u90E8\u5206\u6570\u636E\u4E22\u5931\uFF0C\u9700\u624B\u52A8\u5207\u6362"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u7528\u573A\u666F\uFF1A\u91CD\u8981\u4E1A\u52A1\u7CFB\u7EDF"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ini",children:"# \u4E3B\u4ECE\u590D\u5236\u914D\u7F6E(\u4E3B\u670D\u52A1\u5668)\n[mysqld]\nserver-id = 1\nlog-bin = mysql-bin\nbinlog-format = ROW\nsync-binlog = 1\n\n# \u4ECE\u670D\u52A1\u5668\u914D\u7F6E\n[mysqld]\nserver-id = 2\nrelay-log = relay-bin\nread_only = ON\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u534A\u540C\u6B65\u590D\u5236\u7B56\u7565"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5728\u4E3B\u4ECE\u590D\u5236\u57FA\u7840\u4E0A\u589E\u52A0\u540C\u6B65\u786E\u8BA4"}),"\n",(0,r.jsx)(s.li,{children:"\u4F18\u70B9\uFF1A\u964D\u4F4E\u6570\u636E\u4E22\u5931\u98CE\u9669"}),"\n",(0,r.jsx)(s.li,{children:"\u7F3A\u70B9\uFF1A\u589E\u52A0\u5199\u64CD\u4F5C\u5EF6\u8FDF\uFF0C\u6027\u80FD\u6709\u6240\u964D\u4F4E"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u7528\u573A\u666F\uFF1A\u9700\u8981\u66F4\u9AD8\u6570\u636E\u5B89\u5168\u4FDD\u8BC1\u7684\u7CFB\u7EDF"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u4E3B\u670D\u52A1\u5668\u5B89\u88C5\u5E76\u542F\u7528\u534A\u540C\u6B65\u590D\u5236\nINSTALL PLUGIN rpl_semi_sync_master SONAME 'semisync_master.so';\nSET GLOBAL rpl_semi_sync_master_enabled = 1;\n\n-- \u4ECE\u670D\u52A1\u5668\u5B89\u88C5\u5E76\u542F\u7528\nINSTALL PLUGIN rpl_semi_sync_slave SONAME 'semisync_slave.so';\nSET GLOBAL rpl_semi_sync_slave_enabled = 1;\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7EC4\u590D\u5236\u7B56\u7565(MySQL 5.7.17+)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u591A\u8282\u70B9\u540C\u6B65\u590D\u5236\uFF0C\u81EA\u52A8\u9009\u4E3B"}),"\n",(0,r.jsx)(s.li,{children:"\u4F18\u70B9\uFF1A\u9AD8\u53EF\u7528\u6027\uFF0C\u81EA\u52A8\u6545\u969C\u8F6C\u79FB"}),"\n",(0,r.jsx)(s.li,{children:"\u7F3A\u70B9\uFF1A\u914D\u7F6E\u590D\u6742\uFF0C\u5BF9\u7F51\u7EDC\u8981\u6C42\u9AD8"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u7528\u573A\u666F\uFF1A\u6838\u5FC3\u4E1A\u52A1\u7CFB\u7EDF"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u53CC\u6D3B\u6570\u636E\u4E2D\u5FC3\u7B56\u7565"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4E24\u4E2A\u6570\u636E\u4E2D\u5FC3\u540C\u65F6\u63D0\u4F9B\u8BFB\u5199\u670D\u52A1"}),"\n",(0,r.jsx)(s.li,{children:"\u5B9E\u73B0\u65B9\u5F0F\uFF1A\u4E3B-\u4E3B\u590D\u5236\u6216\u5206\u5E03\u5F0F\u6570\u636E\u5E93"}),"\n",(0,r.jsx)(s.li,{children:"\u4F18\u70B9\uFF1ARPO\u548CRTO\u63A5\u8FD1\u96F6"}),"\n",(0,r.jsx)(s.li,{children:"\u7F3A\u70B9\uFF1A\u6210\u672C\u9AD8\uFF0C\u590D\u6742\u5EA6\u9AD8"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u7528\u573A\u666F\uFF1A\u5173\u952E\u4E1A\u52A1\u7CFB\u7EDF"}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"drp-implementation",label:"\u5B9E\u65BD\u5EFA\u8BAE",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u707E\u96BE\u6062\u590D\u8BA1\u5212\u7684\u5B9E\u65BD\u5EFA\u8BAE"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6587\u6863\u5316DRP\u6D41\u7A0B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u707E\u96BE\u7C7B\u578B\u8BC6\u522B\u4E0E\u54CD\u5E94\u6D41\u7A0B"}),"\n",(0,r.jsx)(s.li,{children:"\u6E05\u6670\u7684\u8D23\u4EFB\u5206\u914D"}),"\n",(0,r.jsx)(s.li,{children:"\u8BE6\u7EC6\u7684\u6062\u590D\u6B65\u9AA4\u548C\u68C0\u67E5\u6E05\u5355"}),"\n",(0,r.jsx)(s.li,{children:"\u6062\u590D\u4F18\u5148\u7EA7\u5B9A\u4E49"}),"\n",(0,r.jsx)(s.li,{children:"\u8054\u7CFB\u4EBA\u4FE1\u606F"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u81EA\u52A8\u5316\u6062\u590D\u6D41\u7A0B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u7F16\u5199\u81EA\u52A8\u5316\u6062\u590D\u811A\u672C"}),"\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528\u76D1\u63A7\u5DE5\u5177\u81EA\u52A8\u68C0\u6D4B\u6545\u969C"}),"\n",(0,r.jsx)(s.li,{children:"\u51CF\u5C11\u4EBA\u5DE5\u5E72\u9884\u964D\u4F4E\u9519\u8BEF\u98CE\u9669"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'#!/bin/bash\n# MySQL\u6545\u969C\u81EA\u52A8\u5207\u6362\u811A\u672C\u793A\u4F8B\n\n# \u68C0\u67E5\u4E3B\u5E93\u72B6\u6001\nif ! mysql -h master -u monitor -ppassword -e "SELECT 1" &>/dev/null; then\n  echo "Master is down, initiating failover..."\n  \n  # \u786E\u8BA4\u4ECE\u5E93\u590D\u5236\u72B6\u6001\n  SLAVE_STATUS=$(mysql -h slave -u monitor -ppassword -e "SHOW SLAVE STATUS\\G")\n  \n  if echo "$SLAVE_STATUS" | grep -q "Slave_IO_Running: Yes" && \\\n     echo "$SLAVE_STATUS" | grep -q "Slave_SQL_Running: Yes"; then\n    \n    # \u4ECE\u5E93\u63D0\u5347\u4E3A\u4E3B\u5E93\n    mysql -h slave -u root -ppassword -e "STOP SLAVE; RESET SLAVE ALL;"\n    \n    # \u66F4\u65B0\u5E94\u7528\u7A0B\u5E8F\u8FDE\u63A5\u4FE1\u606F\n    # ...\n    \n    echo "Failover completed successfully."\n  else\n    echo "Slave is not in sync, manual intervention required."\n  fi\nfi\n'})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u5C42\u6062\u590D\u7B56\u7565"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6839\u636E\u4E1A\u52A1\u91CD\u8981\u6027\u5206\u7C7B\u7CFB\u7EDF"}),"\n",(0,r.jsx)(s.li,{children:"\u4E3A\u4E0D\u540C\u7EA7\u522B\u7CFB\u7EDF\u5236\u5B9A\u4E0D\u540C\u6062\u590D\u7B56\u7565"}),"\n",(0,r.jsx)(s.li,{children:"\u6838\u5FC3\u7CFB\u7EDF\uFF1A\u9AD8\u53EF\u7528\u65B9\u6848\uFF0C\u6781\u4F4ERTO/RPO"}),"\n",(0,r.jsx)(s.li,{children:"\u4E00\u822C\u7CFB\u7EDF\uFF1A\u4E3B\u4ECE\u590D\u5236\uFF0C\u9002\u4E2DRTO/RPO"}),"\n",(0,r.jsx)(s.li,{children:"\u975E\u5173\u952E\u7CFB\u7EDF\uFF1A\u5907\u4EFD\u6062\u590D\uFF0C\u53EF\u63A5\u53D7\u8F83\u9AD8RTO/RPO"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u591A\u5C42\u6B21\u5907\u4EFD\u7B56\u7565"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u672C\u5730\u5907\u4EFD\uFF1A\u5FEB\u901F\u6062\u590D"}),"\n",(0,r.jsx)(s.li,{children:"\u8FDC\u7A0B\u5907\u4EFD\uFF1A\u9632\u6B62\u672C\u5730\u707E\u96BE"}),"\n",(0,r.jsx)(s.li,{children:"\u4E91\u5B58\u50A8\u5907\u4EFD\uFF1A\u957F\u671F\u5F52\u6863\uFF0C\u5168\u7403\u8BBF\u95EE"}),"\n",(0,r.jsx)(s.li,{children:"\u79BB\u7EBF\u5907\u4EFD\uFF1A\u9632\u6B62\u52D2\u7D22\u8F6F\u4EF6\u7B49\u903B\u8F91\u653B\u51FB"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6301\u7EED\u6D4B\u8BD5\u548C\u6539\u8FDB"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5B9A\u671F\u7684\u6062\u590D\u6F14\u7EC3"}),"\n",(0,r.jsx)(s.li,{children:"\u6839\u636E\u6F14\u7EC3\u7ED3\u679C\u66F4\u65B0DRP"}),"\n",(0,r.jsx)(s.li,{children:"\u8DDF\u8E2A\u6280\u672F\u53D8\u5316\uFF0C\u6301\u7EED\u73B0\u4EE3\u5316DRP"}),"\n"]}),"\n"]}),"\n"]})]})]}),"\n",(0,r.jsx)(s.h2,{id:"7-\u9AD8\u53EF\u7528\u67B6\u6784\u8BBE\u8BA1",children:"7. \u9AD8\u53EF\u7528\u67B6\u6784\u8BBE\u8BA1"}),"\n",(0,r.jsx)(s.p,{children:"\u9AD8\u53EF\u7528\uFF08High Availability\uFF0CHA\uFF09\u662F\u73B0\u4EE3\u6570\u636E\u5E93\u67B6\u6784\u7684\u6838\u5FC3\u9700\u6C42\uFF0C\u5B83\u786E\u4FDD\u7CFB\u7EDF\u5728\u9762\u5BF9\u6545\u969C\u65F6\u80FD\u591F\u6301\u7EED\u63D0\u4F9B\u670D\u52A1\uFF0C\u6700\u5C0F\u5316\u505C\u673A\u65F6\u95F4\u548C\u6570\u636E\u4E22\u5931\u3002"}),"\n",(0,r.jsx)(s.mermaid,{value:"graph TD\n    A[MySQL\u9AD8\u53EF\u7528\u67B6\u6784] --\x3e B[\u4E3B\u4ECE\u590D\u5236]\n    A --\x3e C[\u9AD8\u53EF\u7528\u65B9\u6848]\n    A --\x3e D[\u8BFB\u5199\u5206\u79BB]\n    A --\x3e E[\u5206\u5E93\u5206\u8868]\n    \n    B --\x3e B1[\u590D\u5236\u539F\u7406]\n    B --\x3e B2[\u590D\u5236\u6A21\u5F0F]\n    B --\x3e B3[\u590D\u5236\u62D3\u6251]\n    \n    C --\x3e C1[\u4E3B\u4ECE\u5207\u6362]\n    C --\x3e C2[\u96C6\u7FA4\u65B9\u6848]\n    C --\x3e C3[\u591A\u6570\u636E\u4E2D\u5FC3]\n    \n    D --\x3e D1[\u4E2D\u95F4\u4EF6]\n    D --\x3e D2[\u4EE3\u7406\u5C42]\n    \n    E --\x3e E1[\u6C34\u5E73\u5206\u7247]\n    E --\x3e E2[\u5782\u76F4\u5206\u7247]"}),"\n",(0,r.jsx)(s.h3,{id:"71-\u4E3B\u4ECE\u590D\u5236\u539F\u7406",children:"7.1 \u4E3B\u4ECE\u590D\u5236\u539F\u7406"}),"\n",(0,r.jsx)(s.p,{children:"\u4E3B\u4ECE\u590D\u5236\u662FMySQL\u9AD8\u53EF\u7528\u67B6\u6784\u7684\u57FA\u7840\uFF0C\u5B83\u901A\u8FC7\u5C06\u4E3B\u5E93\u7684\u6570\u636E\u53D8\u66F4\u5F02\u6B65\u6216\u540C\u6B65\u5730\u590D\u5236\u5230\u4ECE\u5E93\uFF0C\u5B9E\u73B0\u6570\u636E\u5907\u4EFD\u3001\u8BFB\u5199\u5206\u79BB\u548C\u6545\u969C\u5207\u6362\u80FD\u529B\u3002"}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"replication-basics",label:"\u590D\u5236\u57FA\u7840",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL\u590D\u5236\u7684\u57FA\u672C\u539F\u7406"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u590D\u5236\u6D41\u7A0B"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4E3B\u5E93\u8BB0\u5F55\u6240\u6709\u6570\u636E\u53D8\u66F4\u5230\u4E8C\u8FDB\u5236\u65E5\u5FD7(binlog)"}),"\n",(0,r.jsx)(s.li,{children:"\u4ECE\u5E93\u7684I/O\u7EBF\u7A0B\u8BFB\u53D6\u4E3B\u5E93\u7684binlog\u5E76\u5199\u5165\u4E2D\u7EE7\u65E5\u5FD7(relay log)"}),"\n",(0,r.jsx)(s.li,{children:"\u4ECE\u5E93\u7684SQL\u7EBF\u7A0B\u91CD\u653E\u4E2D\u7EE7\u65E5\u5FD7\u4E2D\u7684\u4E8B\u4EF6\uFF0C\u5E94\u7528\u6570\u636E\u53D8\u66F4"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.mermaid,{value:"sequenceDiagram\n    participant M as \u4E3B\u5E93(Master)\n    participant S as \u4ECE\u5E93(Slave)\n    \n    Note over M: \u6267\u884C\u66F4\u65B0\u64CD\u4F5C\n    M->>M: \u8BB0\u5F55\u53D8\u66F4\u5230\u4E8C\u8FDB\u5236\u65E5\u5FD7(Binlog)\n    M--\x3e>S: I/O\u7EBF\u7A0B\u8BF7\u6C42Binlog\n    M->>S: \u53D1\u9001Binlog\u4E8B\u4EF6\n    S->>S: \u5199\u5165\u4E2D\u7EE7\u65E5\u5FD7(Relay Log)\n    S->>S: SQL\u7EBF\u7A0B\u91CD\u653E\u4E2D\u7EE7\u65E5\u5FD7\u4E8B\u4EF6\n    Note over S: \u6570\u636E\u540C\u6B65\u5B8C\u6210"}),(0,r.jsxs)(s.ol,{start:"2",children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u590D\u5236\u65B9\u5F0F"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u57FA\u4E8E\u8BED\u53E5\u7684\u590D\u5236(SBR)"}),"\uFF1A\u590D\u5236SQL\u8BED\u53E5"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u57FA\u4E8E\u884C\u7684\u590D\u5236(RBR)"}),"\uFF1A\u590D\u5236\u884C\u6570\u636E\u53D8\u66F4"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6DF7\u5408\u6A21\u5F0F(MBR)"}),"\uFF1A\u6839\u636E\u60C5\u51B5\u9009\u62E9SBR\u6216RBR"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u590D\u5236\u914D\u7F6E"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ini",children:"# \u4E3B\u5E93\u914D\u7F6E\n[mysqld]\nserver-id = 1\nlog-bin = mysql-bin\nbinlog-format = ROW   # \u63A8\u8350\u884C\u683C\u5F0F\u590D\u5236\n\n# \u4ECE\u5E93\u914D\u7F6E\n[mysqld]\nserver-id = 2\nrelay-log = mysql-relay\nread_only = ON\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5EFA\u7ACB\u590D\u5236"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5728\u4E3B\u5E93\u521B\u5EFA\u590D\u5236\u7528\u6237\nCREATE USER 'repl_user'@'%' IDENTIFIED BY 'password';\nGRANT REPLICATION SLAVE ON *.* TO 'repl_user'@'%';\n\n-- \u83B7\u53D6\u4E3B\u5E93\u72B6\u6001\nSHOW MASTER STATUS;\n\n-- \u5728\u4ECE\u5E93\u914D\u7F6E\u8FDE\u63A5\nCHANGE MASTER TO\n  MASTER_HOST='master_ip',\n  MASTER_USER='repl_user',\n  MASTER_PASSWORD='password',\n  MASTER_LOG_FILE='mysql-bin.000001',\n  MASTER_LOG_POS=123;\n\n-- \u542F\u52A8\u4ECE\u5E93\u590D\u5236\nSTART SLAVE;\n\n-- \u68C0\u67E5\u4ECE\u5E93\u72B6\u6001\nSHOW SLAVE STATUS\\G\n"})}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"replication-types",label:"\u590D\u5236\u7C7B\u578B",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL\u652F\u6301\u591A\u79CD\u590D\u5236\u7C7B\u578B"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5F02\u6B65\u590D\u5236(Asynchronous Replication)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9ED8\u8BA4\u7684\u590D\u5236\u6A21\u5F0F"}),"\n",(0,r.jsx)(s.li,{children:"\u4E3B\u5E93\u4E0D\u7B49\u5F85\u4ECE\u5E93\u786E\u8BA4\u5C31\u63D0\u4EA4\u4E8B\u52A1"}),"\n",(0,r.jsx)(s.li,{children:"\u4F18\u70B9\uFF1A\u6027\u80FD\u9AD8\uFF0C\u5BF9\u4E3B\u5E93\u51E0\u4E4E\u65E0\u5F71\u54CD"}),"\n",(0,r.jsx)(s.li,{children:"\u7F3A\u70B9\uFF1A\u53EF\u80FD\u4E22\u5931\u6570\u636E\uFF0C\u4ECE\u5E93\u5EF6\u8FDF"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u534A\u540C\u6B65\u590D\u5236(Semi-synchronous Replication)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4E3B\u5E93\u7B49\u5F85\u81F3\u5C11\u4E00\u4E2A\u4ECE\u5E93\u786E\u8BA4\u63A5\u6536\u4E8B\u4EF6\u540E\u518D\u63D0\u4EA4\u4E8B\u52A1"}),"\n",(0,r.jsx)(s.li,{children:"\u4F18\u70B9\uFF1A\u964D\u4F4E\u6570\u636E\u4E22\u5931\u98CE\u9669"}),"\n",(0,r.jsx)(s.li,{children:"\u7F3A\u70B9\uFF1A\u7565\u5FAE\u589E\u52A0\u54CD\u5E94\u5EF6\u8FDF"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5728\u4E3B\u5E93\u542F\u7528\u534A\u540C\u6B65\u590D\u5236\nINSTALL PLUGIN rpl_semi_sync_master SONAME 'semisync_master.so';\nSET GLOBAL rpl_semi_sync_master_enabled = 1;\n\n-- \u5728\u4ECE\u5E93\u542F\u7528\nINSTALL PLUGIN rpl_semi_sync_slave SONAME 'semisync_slave.so';\nSET GLOBAL rpl_semi_sync_slave_enabled = 1;\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7EC4\u590D\u5236(Group Replication)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"MySQL 5.7.17+\u5F15\u5165\u7684\u591A\u4E3B\u590D\u5236\u6280\u672F"}),"\n",(0,r.jsx)(s.li,{children:"\u57FA\u4E8E\u5206\u5E03\u5F0F\u4E00\u81F4\u6027\u539F\u7406(Paxos\u53D8\u79CD)"}),"\n",(0,r.jsx)(s.li,{children:"\u652F\u6301\u5355\u4E3B\u6A21\u5F0F\u548C\u591A\u4E3B\u6A21\u5F0F"}),"\n",(0,r.jsx)(s.li,{children:"\u4F18\u70B9\uFF1A\u81EA\u52A8\u6545\u969C\u68C0\u6D4B\u548C\u6210\u5458\u7BA1\u7406"}),"\n",(0,r.jsx)(s.li,{children:"\u7F3A\u70B9\uFF1A\u914D\u7F6E\u590D\u6742\uFF0C\u8981\u6C42\u7F51\u7EDC\u8D28\u91CF\u9AD8"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u7EC4\u590D\u5236\u914D\u7F6E\u793A\u4F8B(\u7B80\u5316)\n[mysqld]\nserver_id=1\ngtid_mode=ON\nenforce_gtid_consistency=ON\nbinlog_checksum=NONE\nplugin_load='group_replication.so'\ngroup_replication_group_name=\"aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee\"\ngroup_replication_start_on_boot=OFF\ngroup_replication_bootstrap_group=OFF\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u57FA\u4E8EGTID\u7684\u590D\u5236"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5168\u5C40\u4E8B\u52A1\u6807\u8BC6\u7B26(Global Transaction Identifier)"}),"\n",(0,r.jsx)(s.li,{children:"\u6BCF\u4E2A\u4E8B\u52A1\u5206\u914D\u552F\u4E00\u7684ID"}),"\n",(0,r.jsx)(s.li,{children:"\u4F18\u70B9\uFF1A\u7B80\u5316\u590D\u5236\u7BA1\u7406\uFF0C\u81EA\u52A8\u5B9A\u4F4D\u590D\u5236\u4F4D\u7F6E"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u542F\u7528GTID\u590D\u5236\n[mysqld]\ngtid_mode=ON\nenforce_gtid_consistency=ON\n\n-- \u4F7F\u7528GTID\u914D\u7F6E\u4ECE\u5E93\nCHANGE MASTER TO \n  MASTER_HOST='master_ip',\n  MASTER_USER='repl_user',\n  MASTER_PASSWORD='password',\n  MASTER_AUTO_POSITION=1;  -- \u4F7F\u7528GTID\u5B9A\u4F4D\n"})}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"replication-topologies",label:"\u590D\u5236\u62D3\u6251",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5E38\u89C1\u7684MySQL\u590D\u5236\u62D3\u6251\u7ED3\u6784"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5355\u4E3B-\u5355\u4ECE\u590D\u5236"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6700\u7B80\u5355\u7684\u590D\u5236\u7ED3\u6784"}),"\n",(0,r.jsx)(s.li,{children:"\u4E00\u4E2A\u4E3B\u5E93\uFF0C\u4E00\u4E2A\u4ECE\u5E93"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u7528\uFF1A\u5C0F\u89C4\u6A21\u7CFB\u7EDF\uFF0C\u57FA\u672C\u9AD8\u53EF\u7528\u9700\u6C42"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.mermaid,{value:"graph LR\n    M[\u4E3B\u5E93] --\x3e S[\u4ECE\u5E93]"}),(0,r.jsxs)(s.ol,{start:"2",children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5355\u4E3B-\u591A\u4ECE\u590D\u5236"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4E00\u4E2A\u4E3B\u5E93\uFF0C\u591A\u4E2A\u4ECE\u5E93"}),"\n",(0,r.jsx)(s.li,{children:"\u652F\u6301\u8BFB\u6269\u5C55\uFF0C\u5206\u62C5\u8BFB\u8D1F\u8F7D"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u7528\uFF1A\u8BFB\u591A\u5199\u5C11\u7684\u5E94\u7528"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.mermaid,{value:"graph LR\n    M[\u4E3B\u5E93] --\x3e S1[\u4ECE\u5E931]\n    M --\x3e S2[\u4ECE\u5E932]\n    M --\x3e S3[\u4ECE\u5E933]"}),(0,r.jsxs)(s.ol,{start:"3",children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7EA7\u8054\u590D\u5236"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4ECE\u5E93\u4F5C\u4E3A\u5176\u4ED6\u4ECE\u5E93\u7684\u4E3B\u5E93"}),"\n",(0,r.jsx)(s.li,{children:"\u51CF\u8F7B\u4E3B\u5E93\u7684\u590D\u5236\u538B\u529B"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u7528\uFF1A\u5927\u91CF\u4ECE\u5E93\u573A\u666F\uFF0C\u8DE8\u5730\u57DF\u590D\u5236"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.mermaid,{value:"graph LR\n    M[\u4E3B\u5E93] --\x3e S1[\u4ECE\u5E931]\n    S1 --\x3e S2[\u4ECE\u5E932]\n    S1 --\x3e S3[\u4ECE\u5E933]"}),(0,r.jsxs)(s.ol,{start:"4",children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4E3B-\u4E3B\u590D\u5236"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4E24\u4E2A\u670D\u52A1\u5668\u4E92\u4E3A\u4E3B\u4ECE"}),"\n",(0,r.jsx)(s.li,{children:"\u652F\u6301\u53CC\u5411\u5199\u5165"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u7528\uFF1A\u9700\u8981\u53CC\u6D3B\u7684\u573A\u666F"}),"\n",(0,r.jsx)(s.li,{children:"\u6311\u6218\uFF1A\u9700\u8981\u907F\u514D\u51B2\u7A81"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.mermaid,{value:"graph LR\n    M1[\u4E3B\u5E931] --\x3e M2[\u4E3B\u5E932]\n    M2 --\x3e M1"}),(0,r.jsxs)(s.ol,{start:"5",children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u73AF\u5F62\u590D\u5236"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u591A\u4E2A\u670D\u52A1\u5668\u5F62\u6210\u73AF\u5F62\u7ED3\u6784"}),"\n",(0,r.jsx)(s.li,{children:"\u6BCF\u4E2A\u8282\u70B9\u65E2\u662F\u4E3B\u5E93\u4E5F\u662F\u4ECE\u5E93"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u7528\uFF1A\u591A\u5730\u57DF\u5199\u5165\u9700\u6C42"}),"\n",(0,r.jsx)(s.li,{children:"\u6311\u6218\uFF1A\u590D\u6742\u7684\u51B2\u7A81\u5904\u7406"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.mermaid,{value:"graph LR\n    M1[\u8282\u70B91] --\x3e M2[\u8282\u70B92]\n    M2 --\x3e M3[\u8282\u70B93]\n    M3 --\x3e M1"}),(0,r.jsxs)(s.ol,{start:"6",children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7EC4\u590D\u5236\u62D3\u6251"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u57FA\u4E8E\u7EC4\u590D\u5236\u6280\u672F"}),"\n",(0,r.jsx)(s.li,{children:"\u652F\u6301\u5355\u4E3B\u6A21\u5F0F\u548C\u591A\u4E3B\u6A21\u5F0F"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u7528\uFF1A\u9700\u8981\u81EA\u52A8\u6545\u969C\u8F6C\u79FB\u7684\u6838\u5FC3\u7CFB\u7EDF"}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.mermaid,{value:'graph TD\n    subgraph "MySQL\u7EC4\u590D\u5236\u96C6\u7FA4"\n    M1[\u8282\u70B91] ---|\u590D\u5236| M2[\u8282\u70B92]\n    M1 ---|\u590D\u5236| M3[\u8282\u70B93]\n    M2 ---|\u590D\u5236| M1\n    M2 ---|\u590D\u5236| M3\n    M3 ---|\u590D\u5236| M1\n    M3 ---|\u590D\u5236| M2\n    end'})]})]}),"\n",(0,r.jsx)(s.h3,{id:"72-\u9AD8\u53EF\u7528\u67B6\u6784\u65B9\u6848",children:"7.2 \u9AD8\u53EF\u7528\u67B6\u6784\u65B9\u6848"}),"\n",(0,r.jsx)(s.p,{children:"\u9AD8\u53EF\u7528\u67B6\u6784\u901A\u8FC7\u5408\u7406\u7684\u7EC4\u4EF6\u8BBE\u8BA1\uFF0C\u786E\u4FDD\u5728\u5355\u70B9\u6545\u969C\u65F6\u7CFB\u7EDF\u80FD\u591F\u5FEB\u901F\u6062\u590D\uFF0C\u4FDD\u8BC1\u670D\u52A1\u7684\u8FDE\u7EED\u6027\u3002"}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"ha-solutions",label:"\u9AD8\u53EF\u7528\u65B9\u6848",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL\u5E38\u89C1\u7684\u9AD8\u53EF\u7528\u89E3\u51B3\u65B9\u6848"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E3B\u4ECE\u5207\u6362\u65B9\u6848"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u57FA\u4E8E\u4E3B\u4ECE\u590D\u5236\uFF0C\u6545\u969C\u65F6\u624B\u52A8\u6216\u81EA\u52A8\u5207\u6362\u4E3B\u5E93"}),"\n",(0,r.jsx)(s.li,{children:"\u7279\u70B9\uFF1A\u5B9E\u73B0\u7B80\u5355\uFF0C\u5E7F\u6CDB\u9002\u7528"}),"\n",(0,r.jsx)(s.li,{children:"\u7F3A\u70B9\uFF1A\u5207\u6362\u6709\u5EF6\u8FDF\uFF0C\u53EF\u80FD\u4E22\u5931\u6570\u636E"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MMM (Master-Master replication Manager)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u7528\u4E8E\u7BA1\u7406\u548C\u76D1\u63A7\u4E3B-\u4E3B\u590D\u5236"}),"\n",(0,r.jsx)(s.li,{children:"\u63D0\u4F9B\u81EA\u52A8\u6545\u969C\u68C0\u6D4B\u548C\u5207\u6362"}),"\n",(0,r.jsx)(s.li,{children:"\u901A\u8FC7VIP\u6F02\u79FB\u5B9E\u73B0\u5E94\u7528\u900F\u660E\u8BBF\u95EE"}),"\n",(0,r.jsx)(s.li,{children:"\u73B0\u5DF2\u8F83\u5C11\u4F7F\u7528\uFF0C\u88AB\u66F4\u73B0\u4EE3\u7684\u5DE5\u5177\u53D6\u4EE3"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MHA (Master High Availability)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u65E5\u672CDeNA\u516C\u53F8\u5F00\u53D1\u7684\u5F00\u6E90\u5DE5\u5177"}),"\n",(0,r.jsx)(s.li,{children:"\u76D1\u63A7\u4E3B\u5E93\uFF0C\u81EA\u52A8\u8FDB\u884C\u6545\u969C\u8F6C\u79FB"}),"\n",(0,r.jsx)(s.li,{children:"\u7279\u70B9\uFF1A\u5FEB\u901F\u6545\u969C\u68C0\u6D4B\uFF0C\u5C1D\u8BD5\u4FDD\u7559\u6240\u6709\u4E8B\u52A1"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u7528\uFF1A\u5BF9\u4E3B\u5E93\u53EF\u7528\u6027\u8981\u6C42\u9AD8\u7684\u573A\u666F"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL InnoDB Cluster"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"MySQL\u5B98\u65B9\u7684\u9AD8\u53EF\u7528\u89E3\u51B3\u65B9\u6848"}),"\n",(0,r.jsx)(s.li,{children:"\u57FA\u4E8E\u7EC4\u590D\u5236\u3001MySQL Router\u548CMySQL Shell"}),"\n",(0,r.jsx)(s.li,{children:"\u7279\u70B9\uFF1A\u81EA\u52A8\u5316\u90E8\u7F72\u548C\u7BA1\u7406\uFF0C\u5185\u7F6E\u8BFB\u5199\u5206\u79BB"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u7528\uFF1A\u9700\u8981\u5B98\u65B9\u652F\u6301\u7684\u4F01\u4E1A\u73AF\u5883"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Percona XtraDB Cluster (PXC)"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u57FA\u4E8EGalera\u96C6\u7FA4\u6280\u672F"}),"\n",(0,r.jsx)(s.li,{children:"\u652F\u6301\u591A\u4E3B\u6A21\u5F0F\uFF0C\u540C\u6B65\u590D\u5236"}),"\n",(0,r.jsx)(s.li,{children:"\u7279\u70B9\uFF1A\u5F3A\u4E00\u81F4\u6027\uFF0C\u65E0\u6570\u636E\u4E22\u5931\uFF0C\u81EA\u52A8\u6210\u5458\u7BA1\u7406"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u7528\uFF1A\u5BF9\u6570\u636E\u4E00\u81F4\u6027\u8981\u6C42\u9AD8\u7684\u573A\u666F"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MariaDB Galera Cluster"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"MariaDB\u57FA\u4E8EGalera\u7684\u96C6\u7FA4\u89E3\u51B3\u65B9\u6848"}),"\n",(0,r.jsx)(s.li,{children:"\u7C7B\u4F3C\u4E8EPercona XtraDB Cluster"}),"\n",(0,r.jsx)(s.li,{children:"\u7279\u70B9\uFF1A\u591A\u4E3B\u67B6\u6784\uFF0C\u540C\u6B65\u590D\u5236"}),"\n",(0,r.jsx)(s.li,{children:"\u9002\u7528\uFF1A\u9AD8\u53EF\u7528\u6027\u548C\u5F3A\u4E00\u81F4\u6027\u9700\u6C42"}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"failover",label:"\u6545\u969C\u8F6C\u79FB",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6545\u969C\u8F6C\u79FB(Failover)\u673A\u5236"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6545\u969C\u68C0\u6D4B"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5FC3\u8DF3\u68C0\u6D4B\uFF1A\u5B9A\u671F\u53D1\u9001\u5FC3\u8DF3\u5305"}),"\n",(0,r.jsx)(s.li,{children:"\u72B6\u6001\u76D1\u63A7\uFF1A\u76D1\u63A7\u4E3B\u5E93\u72B6\u6001"}),"\n",(0,r.jsx)(s.li,{children:"\u590D\u5236\u5EF6\u8FDF\uFF1A\u76D1\u63A7\u590D\u5236\u5EF6\u8FDF"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u624B\u52A8\u6545\u969C\u8F6C\u79FB"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u7BA1\u7406\u5458\u624B\u52A8\u6267\u884C\u4E3B\u4ECE\u5207\u6362"}),"\n",(0,r.jsx)(s.li,{children:"\u6B65\u9AA4\uFF1A\u63D0\u5347\u4ECE\u5E93\u3001\u66F4\u65B0\u8DEF\u7531\u914D\u7F6E\u3001\u901A\u77E5\u5E94\u7528"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- \u5728\u4ECE\u5E93\u6267\u884C\nSTOP SLAVE;\nRESET SLAVE ALL;\n\n-- \u66F4\u65B0\u5E94\u7528\u8FDE\u63A5\u914D\u7F6E\n-- \u901A\u77E5\u5E94\u7528\u91CD\u65B0\u8FDE\u63A5\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u81EA\u52A8\u6545\u969C\u8F6C\u79FB"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u81EA\u52A8\u68C0\u6D4B\u6545\u969C\u5E76\u6267\u884C\u5207\u6362"}),"\n",(0,r.jsxs)(s.li,{children:["\u9700\u8981\u89E3\u51B3\u7684\u95EE\u9898\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8111\u88C2(Split Brain)\uFF1A\u53CC\u4E3B\u60C5\u51B5"}),"\n",(0,r.jsx)(s.li,{children:"\u6570\u636E\u4E00\u81F4\u6027\uFF1A\u786E\u4FDD\u65E0\u6570\u636E\u4E22\u5931"}),"\n",(0,r.jsx)(s.li,{children:"\u5BA2\u6237\u7AEF\u8DEF\u7531\uFF1A\u5207\u6362\u540E\u8FDE\u63A5\u91CD\u5B9A\u5411"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MHA\u6545\u969C\u8F6C\u79FB\u6D41\u7A0B"}),"\uFF1A"]}),"\n",(0,r.jsx)(s.mermaid,{value:"sequenceDiagram\n    participant MHA as MHA Manager\n    participant M as \u4E3B\u5E93\n    participant S1 as \u4ECE\u5E931\n    participant S2 as \u4ECE\u5E932\n    \n    MHA->>M: \u5FC3\u8DF3\u68C0\u6D4B\n    Note over MHA,M: \u4E3B\u5E93\u6545\u969C\n    MHA->>S1: \u68C0\u67E5\u590D\u5236\u72B6\u6001\n    MHA->>S2: \u68C0\u67E5\u590D\u5236\u72B6\u6001\n    MHA->>S1: \u5E94\u7528\u672A\u4F20\u8F93\u7684\u4E8B\u52A1\n    MHA->>S1: \u63D0\u5347\u4E3A\u65B0\u4E3B\u5E93\n    MHA->>S2: \u6307\u5411\u65B0\u4E3B\u5E93\n    Note over MHA: \u66F4\u65B0VIP/DNS"}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6545\u969C\u8F6C\u79FB\u8003\u8651\u56E0\u7D20"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6570\u636E\u4E00\u81F4\u6027\uFF1A\u786E\u4FDD\u65E0\u6570\u636E\u4E22\u5931"}),"\n",(0,r.jsx)(s.li,{children:"\u8F6C\u79FB\u65F6\u95F4\uFF1A\u6700\u5C0F\u5316\u505C\u673A\u65F6\u95F4"}),"\n",(0,r.jsx)(s.li,{children:"\u5E94\u7528\u900F\u660E\uFF1A\u5E94\u7528\u65E0\u9700\u611F\u77E5\u5207\u6362"}),"\n",(0,r.jsx)(s.li,{children:"\u81EA\u52A8\u6062\u590D\uFF1A\u539F\u4E3B\u5E93\u6062\u590D\u540E\u7684\u89D2\u8272"}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"ha-implementation",label:"\u5B9E\u73B0\u8981\u70B9",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9AD8\u53EF\u7528\u67B6\u6784\u5B9E\u73B0\u7684\u5173\u952E\u8981\u70B9"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"VIP(\u865A\u62DFIP)\u6F02\u79FB"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5C06\u670D\u52A1IP\u7ED1\u5B9A\u5230\u5F53\u524D\u4E3B\u5E93"}),"\n",(0,r.jsx)(s.li,{children:"\u5207\u6362\u65F6\u5C06IP\u8FC1\u79FB\u5230\u65B0\u4E3B\u5E93"}),"\n",(0,r.jsx)(s.li,{children:"\u5BF9\u5E94\u7528\u900F\u660E\uFF0C\u65E0\u9700\u4FEE\u6539\u8FDE\u63A5\u53C2\u6570"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# VIP\u5207\u6362\u793A\u4F8B(Linux)\nip addr add 192.168.1.100/24 dev eth0\narping -U -I eth0 192.168.1.100\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8D1F\u8F7D\u5747\u8861\u5668"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528\u8D1F\u8F7D\u5747\u8861\u5668\u68C0\u6D4B\u8282\u70B9\u72B6\u6001"}),"\n",(0,r.jsx)(s.li,{children:"\u6545\u969C\u65F6\u81EA\u52A8\u5207\u6362\u6D41\u91CF"}),"\n",(0,r.jsx)(s.li,{children:"\u4F8B\u5982\uFF1AHAProxy, Nginx, LVS"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"DNS\u5207\u6362"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4FEE\u6539DNS\u8BB0\u5F55\u6307\u5411\u65B0\u4E3B\u5E93"}),"\n",(0,r.jsx)(s.li,{children:"\u4F18\u70B9\uFF1A\u7B80\u5355\u5B9E\u73B0"}),"\n",(0,r.jsx)(s.li,{children:"\u7F3A\u70B9\uFF1A\u53D7DNS\u7F13\u5B58\u5F71\u54CD\uFF0C\u5207\u6362\u4E0D\u53CA\u65F6"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u5E03\u5F0F\u5171\u8BC6"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528ZooKeeper, etcd\u7B49\u7BA1\u7406\u96C6\u7FA4\u72B6\u6001"}),"\n",(0,r.jsx)(s.li,{children:"\u9632\u6B62\u8111\u88C2\uFF0C\u786E\u4FDD\u8282\u70B9\u4E00\u81F4\u6027\u89C6\u56FE"}),"\n",(0,r.jsx)(s.li,{children:"\u5B58\u50A8\u5F53\u524D\u4E3B\u5E93\u4F4D\u7F6E\u4FE1\u606F"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u76D1\u63A7\u4E0E\u544A\u8B66"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5168\u9762\u76D1\u63A7\u590D\u5236\u72B6\u6001"}),"\n",(0,r.jsx)(s.li,{children:"\u76D1\u63A7\u5173\u952E\u6307\u6807\uFF1A\u590D\u5236\u5EF6\u8FDF\u3001\u7EBF\u7A0B\u72B6\u6001"}),"\n",(0,r.jsx)(s.li,{children:"\u8BBE\u7F6E\u544A\u8B66\u9608\u503C\uFF0C\u53CA\u65F6\u901A\u77E5\u5F02\u5E38"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9AD8\u53EF\u7528\u6D4B\u8BD5"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5B9A\u671F\u8FDB\u884C\u6545\u969C\u6F14\u7EC3"}),"\n",(0,r.jsx)(s.li,{children:"\u9A8C\u8BC1\u6545\u969C\u8F6C\u79FB\u673A\u5236"}),"\n",(0,r.jsx)(s.li,{children:"\u6D4B\u8BD5\u4E0D\u540C\u6545\u969C\u573A\u666F\u7684\u6062\u590D\u80FD\u529B"}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"comparison",label:"\u65B9\u6848\u5BF9\u6BD4",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL\u9AD8\u53EF\u7528\u65B9\u6848\u5BF9\u6BD4"}),"\uFF1A"]}),(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u65B9\u6848"}),(0,r.jsx)(s.th,{children:"\u590D\u5236\u6A21\u5F0F"}),(0,r.jsx)(s.th,{children:"\u81EA\u52A8\u6545\u969C\u8F6C\u79FB"}),(0,r.jsx)(s.th,{children:"\u4E00\u81F4\u6027\u7EA7\u522B"}),(0,r.jsx)(s.th,{children:"\u8BFB\u6269\u5C55"}),(0,r.jsx)(s.th,{children:"\u5199\u6269\u5C55"}),(0,r.jsx)(s.th,{children:"\u590D\u6742\u5EA6"}),(0,r.jsx)(s.th,{children:"\u9002\u7528\u573A\u666F"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"\u4E3B\u4ECE+\u624B\u52A8\u5207\u6362"})}),(0,r.jsx)(s.td,{children:"\u5F02\u6B65/\u534A\u540C\u6B65"}),(0,r.jsx)(s.td,{children:"\u5426"}),(0,r.jsx)(s.td,{children:"\u6700\u7EC8\u4E00\u81F4"}),(0,r.jsx)(s.td,{children:"\u662F"}),(0,r.jsx)(s.td,{children:"\u5426"}),(0,r.jsx)(s.td,{children:"\u4F4E"}),(0,r.jsx)(s.td,{children:"\u5C0F\u578B\u7CFB\u7EDF\uFF0C\u53EF\u63A5\u53D7\u77ED\u6682\u505C\u673A"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"MHA"})}),(0,r.jsx)(s.td,{children:"\u5F02\u6B65/\u534A\u540C\u6B65"}),(0,r.jsx)(s.td,{children:"\u662F"}),(0,r.jsx)(s.td,{children:"\u6700\u7EC8\u4E00\u81F4"}),(0,r.jsx)(s.td,{children:"\u662F"}),(0,r.jsx)(s.td,{children:"\u5426"}),(0,r.jsx)(s.td,{children:"\u4E2D"}),(0,r.jsx)(s.td,{children:"\u9700\u8981\u81EA\u52A8\u6545\u969C\u8F6C\u79FB\u7684\u7CFB\u7EDF"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"InnoDB Cluster"})}),(0,r.jsx)(s.td,{children:"\u7EC4\u590D\u5236"}),(0,r.jsx)(s.td,{children:"\u662F"}),(0,r.jsx)(s.td,{children:"\u5F3A\u4E00\u81F4"}),(0,r.jsx)(s.td,{children:"\u662F"}),(0,r.jsx)(s.td,{children:"\u5355\u4E3B\u6A21\u5F0F\u4E0B\u5426"}),(0,r.jsx)(s.td,{children:"\u4E2D\u9AD8"}),(0,r.jsx)(s.td,{children:"\u4F01\u4E1A\u7EA7\u5E94\u7528\uFF0C\u9700\u8981\u5B98\u65B9\u652F\u6301"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Percona XtraDB Cluster"})}),(0,r.jsx)(s.td,{children:"\u540C\u6B65\u590D\u5236"}),(0,r.jsx)(s.td,{children:"\u662F"}),(0,r.jsx)(s.td,{children:"\u5F3A\u4E00\u81F4"}),(0,r.jsx)(s.td,{children:"\u662F"}),(0,r.jsx)(s.td,{children:"\u662F"}),(0,r.jsx)(s.td,{children:"\u9AD8"}),(0,r.jsx)(s.td,{children:"\u5BF9\u4E00\u81F4\u6027\u8981\u6C42\u9AD8\u7684\u5173\u952E\u7CFB\u7EDF"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"MariaDB Galera Cluster"})}),(0,r.jsx)(s.td,{children:"\u540C\u6B65\u590D\u5236"}),(0,r.jsx)(s.td,{children:"\u662F"}),(0,r.jsx)(s.td,{children:"\u5F3A\u4E00\u81F4"}),(0,r.jsx)(s.td,{children:"\u662F"}),(0,r.jsx)(s.td,{children:"\u662F"}),(0,r.jsx)(s.td,{children:"\u9AD8"}),(0,r.jsx)(s.td,{children:"\u9AD8\u5E76\u53D1\u8BFB\u5199\uFF0C\u65E0\u6570\u636E\u4E22\u5931\u8981\u6C42"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"MySQL NDB Cluster"})}),(0,r.jsx)(s.td,{children:"\u540C\u6B65"}),(0,r.jsx)(s.td,{children:"\u662F"}),(0,r.jsx)(s.td,{children:"\u5F3A\u4E00\u81F4"}),(0,r.jsx)(s.td,{children:"\u662F"}),(0,r.jsx)(s.td,{children:"\u662F"}),(0,r.jsx)(s.td,{children:"\u6700\u9AD8"}),(0,r.jsx)(s.td,{children:"\u9AD8\u6027\u80FD\u3001\u9AD8\u53EF\u7528\u6027\u8981\u6C42\u7684\u5927\u578B\u7CFB\u7EDF"})]})]})]}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u9009\u62E9\u9AD8\u53EF\u7528\u65B9\u6848\u7684\u8003\u8651\u56E0\u7D20"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E1A\u52A1\u9700\u6C42"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"RTO/RPO\u8981\u6C42"}),"\n",(0,r.jsx)(s.li,{children:"\u6570\u636E\u4E00\u81F4\u6027\u8981\u6C42"}),"\n",(0,r.jsx)(s.li,{children:"\u8BFB\u5199\u5206\u79BB\u9700\u6C42"}),"\n",(0,r.jsx)(s.li,{children:"\u5730\u7406\u5206\u5E03\u9700\u6C42"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6280\u672F\u7EA6\u675F"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u57FA\u7840\u8BBE\u65BD\u652F\u6301"}),"\n",(0,r.jsx)(s.li,{children:"\u7F51\u7EDC\u5EF6\u8FDF"}),"\n",(0,r.jsx)(s.li,{children:"\u6280\u672F\u56E2\u961F\u80FD\u529B"}),"\n",(0,r.jsx)(s.li,{children:"\u73B0\u6709\u7CFB\u7EDF\u96C6\u6210"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6210\u672C\u56E0\u7D20"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u786C\u4EF6\u6295\u5165"}),"\n",(0,r.jsx)(s.li,{children:"\u8BB8\u53EF\u6210\u672C"}),"\n",(0,r.jsx)(s.li,{children:"\u8FD0\u7EF4\u590D\u6742\u5EA6"}),"\n",(0,r.jsx)(s.li,{children:"\u57F9\u8BAD\u6210\u672C"}),"\n"]}),"\n"]}),"\n"]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"73-\u8BFB\u5199\u5206\u79BB\u5B9E\u73B0",children:"7.3 \u8BFB\u5199\u5206\u79BB\u5B9E\u73B0"}),"\n",(0,r.jsx)(s.p,{children:"\u8BFB\u5199\u5206\u79BB\u662FMySQL\u9AD8\u53EF\u7528\u67B6\u6784\u4E2D\u7684\u5E38\u7528\u7B56\u7565\uFF0C\u901A\u8FC7\u5C06\u8BFB\u8BF7\u6C42\u5206\u53D1\u5230\u4ECE\u5E93\uFF0C\u5199\u8BF7\u6C42\u53D1\u9001\u5230\u4E3B\u5E93\uFF0C\u6709\u6548\u63D0\u5347\u7CFB\u7EDF\u7684\u5E76\u53D1\u5904\u7406\u80FD\u529B\u3002"}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"rw-basics",label:"\u539F\u7406\u4E0E\u5B9E\u73B0",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8BFB\u5199\u5206\u79BB\u7684\u57FA\u672C\u539F\u7406"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6838\u5FC3\u601D\u60F3"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5199\u64CD\u4F5C(INSERT/UPDATE/DELETE)\u53D1\u9001\u5230\u4E3B\u5E93"}),"\n",(0,r.jsx)(s.li,{children:"\u8BFB\u64CD\u4F5C(SELECT)\u5206\u53D1\u5230\u591A\u4E2A\u4ECE\u5E93"}),"\n",(0,r.jsx)(s.li,{children:"\u63D0\u9AD8\u7CFB\u7EDF\u6574\u4F53\u5E76\u53D1\u5904\u7406\u80FD\u529B"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5B9E\u73B0\u65B9\u5F0F"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5E94\u7528\u5C42\u5B9E\u73B0"}),"\uFF1A\u5E94\u7528\u7A0B\u5E8F\u6839\u636E\u64CD\u4F5C\u7C7B\u578B\u9009\u62E9\u8FDE\u63A5"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4E2D\u95F4\u4EF6\u5B9E\u73B0"}),"\uFF1A\u901A\u8FC7\u4EE3\u7406\u62E6\u622A\u5E76\u8DEF\u7531SQL"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6570\u636E\u5E93\u4EE3\u7406"}),"\uFF1A\u4E13\u7528\u6570\u636E\u5E93\u4EE3\u7406\u5B9E\u73B0\u900F\u660E\u8DEF\u7531"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u57FA\u7840\u67B6\u6784"}),"\uFF1A"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.mermaid,{value:"graph TD\n    A[\u5E94\u7528\u7A0B\u5E8F] --\x3e P[\u4EE3\u7406\u5C42/\u4E2D\u95F4\u4EF6]\n    P --\x3e M[\u4E3B\u5E93<br>\u5199\u64CD\u4F5C]\n    P --\x3e S1[\u4ECE\u5E931<br>\u8BFB\u64CD\u4F5C]\n    P --\x3e S2[\u4ECE\u5E932<br>\u8BFB\u64CD\u4F5C]\n    M --\x3e S1\n    M --\x3e S2"}),(0,r.jsxs)(s.ol,{start:"4",children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6838\u5FC3\u95EE\u9898"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4E3B\u4ECE\u5EF6\u8FDF"}),"\uFF1A\u590D\u5236\u5EF6\u8FDF\u5BFC\u81F4\u4ECE\u5E93\u6570\u636E\u4E0D\u662F\u6700\u65B0"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6570\u636E\u4E00\u81F4\u6027"}),"\uFF1A\u5982\u4F55\u5904\u7406\u5199\u540E\u7ACB\u5373\u8BFB\u7684\u60C5\u51B5"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u8D1F\u8F7D\u5747\u8861"}),"\uFF1A\u5982\u4F55\u5728\u591A\u4E2A\u4ECE\u5E93\u95F4\u5206\u914D\u8BFB\u8BF7\u6C42"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6545\u969C\u5904\u7406"}),"\uFF1A\u4ECE\u5E93\u6545\u969C\u65F6\u5982\u4F55\u8C03\u6574\u8DEF\u7531"]}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"middleware",label:"\u4E2D\u95F4\u4EF6\u65B9\u6848",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8BFB\u5199\u5206\u79BB\u4E2D\u95F4\u4EF6"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MySQL Router"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Oracle\u5B98\u65B9\u63D0\u4F9B\u7684\u8F7B\u91CF\u7EA7\u4E2D\u95F4\u4EF6"}),"\n",(0,r.jsx)(s.li,{children:"\u96C6\u6210\u5728MySQL InnoDB Cluster\u4E2D"}),"\n",(0,r.jsx)(s.li,{children:"\u652F\u6301\u81EA\u52A8\u6545\u969C\u8F6C\u79FB"}),"\n",(0,r.jsx)(s.li,{children:"\u7B80\u5355\u914D\u7F6E\uFF0C\u6613\u4E8E\u90E8\u7F72"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ini",children:"# MySQL Router\u914D\u7F6E\u793A\u4F8B\n[routing:primary]\nbind_address=0.0.0.0\nbind_port=7001\ndestinations=primary\nrouting_strategy=first-available\n\n[routing:secondary]\nbind_address=0.0.0.0\nbind_port=7002\ndestinations=secondary\nrouting_strategy=round-robin\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"ProxySQL"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9AD8\u6027\u80FDMySQL\u4EE3\u7406"}),"\n",(0,r.jsx)(s.li,{children:"\u652F\u6301\u590D\u6742\u67E5\u8BE2\u8DEF\u7531\u89C4\u5219"}),"\n",(0,r.jsx)(s.li,{children:"\u5185\u7F6E\u67E5\u8BE2\u7F13\u5B58\u548C\u8FDE\u63A5\u6C60"}),"\n",(0,r.jsx)(s.li,{children:"\u9AD8\u7EA7\u8D1F\u8F7D\u5747\u8861\u548C\u76D1\u63A7\u529F\u80FD"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-cnf",children:'# ProxySQL\u7B80\u5316\u914D\u7F6E\u793A\u4F8B\nmysql_servers =\n(\n    { address="master.example.com", port=3306, hostgroup=0, max_connections=200 },\n    { address="slave1.example.com", port=3306, hostgroup=1, max_connections=200 },\n    { address="slave2.example.com", port=3306, hostgroup=1, max_connections=200 }\n)\n\nmysql_query_rules =\n(\n    {\n        rule_id=1, active=1,\n        match_pattern="^SELECT.*FOR UPDATE$",\n        destination_hostgroup=0,\n        apply=1\n    },\n    {\n        rule_id=2, active=1,\n        match_pattern="^SELECT",\n        destination_hostgroup=1,\n        apply=1\n    },\n    {\n        rule_id=3, active=1,\n        destination_hostgroup=0,\n        apply=1\n    }\n)\n'})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MyCat"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Java\u5F00\u53D1\u7684\u5F00\u6E90\u6570\u636E\u5E93\u4E2D\u95F4\u4EF6"}),"\n",(0,r.jsx)(s.li,{children:"\u652F\u6301\u8BFB\u5199\u5206\u79BB\u548C\u5206\u5E93\u5206\u8868"}),"\n",(0,r.jsx)(s.li,{children:"\u517C\u5BB9\u591A\u79CD\u6570\u636E\u5E93"}),"\n",(0,r.jsx)(s.li,{children:"\u63D0\u4F9B\u590D\u6742\u7684\u67E5\u8BE2\u62C6\u5206\u80FD\u529B"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"HAProxy"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9AD8\u6027\u80FDTCP/HTTP\u8D1F\u8F7D\u5747\u8861\u5668"}),"\n",(0,r.jsx)(s.li,{children:"\u53EF\u7528\u4E8EMySQL\u8FDE\u63A5\u8DEF\u7531"}),"\n",(0,r.jsx)(s.li,{children:"\u652F\u6301\u5065\u5EB7\u68C0\u67E5\u548C\u6545\u969C\u8F6C\u79FB"}),"\n",(0,r.jsx)(s.li,{children:"\u529F\u80FD\u76F8\u5BF9\u7B80\u5355\uFF0C\u4E3B\u8981\u63D0\u4F9B\u8D1F\u8F7D\u5747\u8861"}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"application",label:"\u5E94\u7528\u5C42\u65B9\u6848",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5E94\u7528\u5C42\u8BFB\u5199\u5206\u79BB\u5B9E\u73B0"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u591A\u6570\u636E\u6E90\u914D\u7F6E"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5728\u5E94\u7528\u4E2D\u914D\u7F6E\u4E3B\u4ECE\u6570\u636E\u6E90"}),"\n",(0,r.jsx)(s.li,{children:"\u6839\u636E\u64CD\u4F5C\u7C7B\u578B\u9009\u62E9\u6570\u636E\u6E90"}),"\n",(0,r.jsx)(s.li,{children:"\u4F18\u70B9\uFF1A\u7075\u6D3B\u63A7\u5236\uFF0C\u51CF\u5C11\u989D\u5916\u7EC4\u4EF6"}),"\n",(0,r.jsx)(s.li,{children:"\u7F3A\u70B9\uFF1A\u8026\u5408\u4E1A\u52A1\u903B\u8F91\uFF0C\u589E\u52A0\u5F00\u53D1\u590D\u6742\u5EA6"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Java\u793A\u4F8B(Spring)"}),"\uFF1A"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:'@Configuration\npublic class DataSourceConfig {\n    \n    @Bean\n    @ConfigurationProperties("spring.datasource.master")\n    public DataSource masterDataSource() {\n        return DataSourceBuilder.create().build();\n    }\n    \n    @Bean\n    @ConfigurationProperties("spring.datasource.slave")\n    public DataSource slaveDataSource() {\n        return DataSourceBuilder.create().build();\n    }\n    \n    @Primary\n    @Bean\n    public DataSource routingDataSource() {\n        ReadWriteRoutingDataSource proxy = new ReadWriteRoutingDataSource();\n        \n        Map<Object, Object> targetDataSources = new HashMap<>();\n        targetDataSources.put(DbType.MASTER, masterDataSource());\n        targetDataSources.put(DbType.SLAVE, slaveDataSource());\n        \n        proxy.setDefaultTargetDataSource(masterDataSource());\n        proxy.setTargetDataSources(targetDataSources);\n        \n        return proxy;\n    }\n}\n\npublic class ReadWriteRoutingDataSource extends AbstractRoutingDataSource {\n    @Override\n    protected Object determineCurrentLookupKey() {\n        return TransactionSynchronizationManager.isCurrentTransactionReadOnly() \n               ? DbType.SLAVE : DbType.MASTER;\n    }\n}\n'})}),(0,r.jsxs)(s.ol,{start:"3",children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6CE8\u89E3\u5F0F\u8DEF\u7531"}),"\uFF1A"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:"@Service\npublic class UserService {\n    \n    @Transactional(readOnly = true)  // \u4F7F\u7528\u4ECE\u5E93\n    public User findById(Long id) {\n        return userRepository.findById(id).orElse(null);\n    }\n    \n    @Transactional  // \u4F7F\u7528\u4E3B\u5E93\n    public User save(User user) {\n        return userRepository.save(user);\n    }\n}\n"})}),(0,r.jsxs)(s.ol,{start:"4",children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4E00\u81F4\u6027\u5904\u7406\u7B56\u7565"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5F3A\u4E00\u81F4\u8BFB"}),"\uFF1A\u91CD\u8981\u67E5\u8BE2\u56FA\u5B9A\u8D70\u4E3B\u5E93"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u4F1A\u8BDD\u4E00\u81F4\u8BFB"}),"\uFF1A\u5199\u64CD\u4F5C\u540E\u7684\u540C\u4E00\u4F1A\u8BDD\u8BFB\u8D70\u4E3B\u5E93"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5EF6\u65F6\u5BB9\u5FCD"}),"\uFF1A\u63A5\u53D7\u4E00\u5B9A\u7684\u6570\u636E\u5EF6\u8FDF"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u63D0\u793A\u9009\u62E9"}),"\uFF1A\u5141\u8BB8\u5BA2\u6237\u7AEF\u6307\u5B9A\u8DEF\u7531\u89C4\u5219"]}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"best-practices",label:"\u6700\u4F73\u5B9E\u8DF5",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8BFB\u5199\u5206\u79BB\u6700\u4F73\u5B9E\u8DF5"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4ECE\u5E93\u590D\u5236\u65B9\u6848"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8003\u8651\u4F7F\u7528\u534A\u540C\u6B65\u590D\u5236\u51CF\u5C11\u6570\u636E\u4E22\u5931\u98CE\u9669"}),"\n",(0,r.jsx)(s.li,{children:"\u76D1\u63A7\u590D\u5236\u5EF6\u8FDF\uFF0C\u8BBE\u7F6E\u5408\u7406\u7684\u544A\u8B66\u9608\u503C"}),"\n",(0,r.jsx)(s.li,{children:"\u590D\u5236\u8FC7\u6EE4\u5668\u914D\u7F6E\uFF1A\u53EA\u590D\u5236\u5FC5\u8981\u7684\u6570\u636E\u5E93"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E3B\u4ECE\u5E93\u914D\u7F6E\u5DEE\u5F02"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4E3B\u5E93\uFF1A\u4F18\u5316\u5199\u5165\u6027\u80FD\uFF0C\u786E\u4FDD\u6570\u636E\u5B89\u5168"}),"\n",(0,r.jsx)(s.li,{children:"\u4ECE\u5E93\uFF1A\u4F18\u5316\u67E5\u8BE2\u6027\u80FD\uFF0C\u589E\u5927\u8BFB\u7F13\u5B58"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ini",children:"# \u4E3B\u5E93\u914D\u7F6E\ninnodb_flush_log_at_trx_commit = 1  # \u786E\u4FDD\u6570\u636E\u5B89\u5168\nsync_binlog = 1                     # \u786E\u4FDDbinlog\u5B89\u5168\n\n# \u4ECE\u5E93\u914D\u7F6E\ninnodb_buffer_pool_size = 12G       # \u8F83\u5927\u7684\u7F13\u51B2\u6C60\nread_only = ON                      # \u9632\u6B62\u610F\u5916\u5199\u5165\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4ECE\u5E93\u8D1F\u8F7D\u5747\u8861\u7B56\u7565"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u8F6E\u8BE2(Round Robin)"}),"\uFF1A\u5E73\u5747\u5206\u914D\u67E5\u8BE2"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u52A0\u6743\u8F6E\u8BE2"}),"\uFF1A\u6309\u80FD\u529B\u5206\u914D\u8D1F\u8F7D"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6700\u5C11\u8FDE\u63A5"}),"\uFF1A\u53D1\u9001\u5230\u6700\u7A7A\u95F2\u7684\u4ECE\u5E93"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u54CD\u5E94\u65F6\u95F4"}),"\uFF1A\u53D1\u9001\u5230\u54CD\u5E94\u6700\u5FEB\u7684\u4ECE\u5E93"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u89E3\u51B3\u4E3B\u4ECE\u5EF6\u8FDF\u95EE\u9898"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5199\u540E\u8BFB\u4E3B\u5E93"}),"\uFF1A\u5173\u952E\u67E5\u8BE2\u76F4\u63A5\u8BFB\u4E3B\u5E93"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5EF6\u8FDF\u68C0\u6D4B"}),"\uFF1A\u68C0\u6D4B\u4ECE\u5E93\u5EF6\u8FDF\uFF0C\u8D85\u9608\u503C\u5207\u5230\u4E3B\u5E93"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7248\u672C\u53F7\u673A\u5236"}),"\uFF1A\u8BB0\u5F55\u6570\u636E\u7248\u672C\uFF0C\u7B49\u4ECE\u5E93\u540C\u6B65"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u961F\u5217\u5EF6\u8FDF"}),"\uFF1A\u5199\u5165\u540E\u7B49\u5F85\u4E00\u5B9A\u65F6\u95F4\u518D\u67E5\u8BE2"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u76D1\u63A7\u6307\u6807"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4ECE\u5E93\u590D\u5236\u5EF6\u8FDF"}),"\n",(0,r.jsx)(s.li,{children:"\u4ECE\u5E93\u590D\u5236\u72B6\u6001"}),"\n",(0,r.jsx)(s.li,{children:"\u8BFB\u5199\u67E5\u8BE2\u5206\u5E03\u6BD4\u4F8B"}),"\n",(0,r.jsx)(s.li,{children:"\u5404\u4ECE\u5E93\u8D1F\u8F7D\u5747\u8861\u60C5\u51B5"}),"\n",(0,r.jsx)(s.li,{children:"\u5173\u952ESQL\u7684\u54CD\u5E94\u65F6\u95F4"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6545\u969C\u6062\u590D\u8BA1\u5212"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4ECE\u5E93\u6545\u969C\uFF1A\u81EA\u52A8\u4ECE\u8D1F\u8F7D\u5747\u8861\u6C60\u79FB\u9664"}),"\n",(0,r.jsx)(s.li,{children:"\u4E3B\u5E93\u6545\u969C\uFF1A\u81EA\u52A8\u6545\u969C\u8F6C\u79FB\u548C\u8DEF\u7531\u66F4\u65B0"}),"\n",(0,r.jsx)(s.li,{children:"\u5B9A\u671F\u6F14\u7EC3\u6545\u969C\u573A\u666F\uFF0C\u9A8C\u8BC1\u6062\u590D\u673A\u5236"}),"\n"]}),"\n"]}),"\n"]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"74-\u5206\u5E93\u5206\u8868\u65B9\u6848",children:"7.4 \u5206\u5E93\u5206\u8868\u65B9\u6848"}),"\n",(0,r.jsx)(s.p,{children:"\u968F\u7740\u6570\u636E\u91CF\u548C\u8BBF\u95EE\u91CF\u7684\u589E\u957F\uFF0C\u5355\u4E2AMySQL\u5B9E\u4F8B\u53EF\u80FD\u65E0\u6CD5\u6EE1\u8DB3\u6027\u80FD\u9700\u6C42\uFF0C\u6B64\u65F6\u9700\u8981\u901A\u8FC7\u5206\u5E93\u5206\u8868\u5B9E\u73B0\u6C34\u5E73\u6269\u5C55\u3002"}),"\n",(0,r.jsxs)(d.A,{children:[(0,r.jsxs)(c.A,{value:"sharding-basics",label:"\u5206\u7247\u57FA\u7840",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u5E93\u5206\u8868\u57FA\u672C\u6982\u5FF5"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u5E93\u5206\u8868\u7684\u7C7B\u578B"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5782\u76F4\u5206\u5E93"}),"\uFF1A\u6309\u4E1A\u52A1\u62C6\u5206\u5230\u4E0D\u540C\u6570\u636E\u5E93\u5B9E\u4F8B"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6C34\u5E73\u5206\u5E93"}),"\uFF1A\u540C\u4E00\u4E1A\u52A1\u6570\u636E\u5206\u6563\u5230\u591A\u4E2A\u6570\u636E\u5E93\u5B9E\u4F8B"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5782\u76F4\u5206\u8868"}),"\uFF1A\u6309\u5217\u62C6\u5206\u6210\u591A\u4E2A\u8868"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6C34\u5E73\u5206\u8868"}),"\uFF1A\u6309\u884C\u62C6\u5206\u6210\u591A\u4E2A\u8868"]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.mermaid,{value:"graph TD\n    A[\u5206\u5E93\u5206\u8868] --\x3e B[\u5782\u76F4\u62C6\u5206]\n    A --\x3e C[\u6C34\u5E73\u62C6\u5206]\n    \n    B --\x3e B1[\u5782\u76F4\u5206\u5E93<br>\u6309\u4E1A\u52A1\u62C6\u5206\u5230\u4E0D\u540C\u5B9E\u4F8B]\n    B --\x3e B2[\u5782\u76F4\u5206\u8868<br>\u6309\u5217\u62C6\u5206\u6210\u591A\u4E2A\u8868]\n    \n    C --\x3e C1[\u6C34\u5E73\u5206\u5E93<br>\u540C\u4E00\u4E1A\u52A1\u6570\u636E\u5206\u6563\u5230\u591A\u5B9E\u4F8B]\n    C --\x3e C2[\u6C34\u5E73\u5206\u8868<br>\u6309\u884C\u62C6\u5206\u6210\u591A\u4E2A\u8868]"}),(0,r.jsxs)(s.ol,{start:"2",children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u7247\u7B56\u7565"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u8303\u56F4\u5206\u7247"}),"\uFF1A\u6309\u6570\u636E\u8303\u56F4\u5212\u5206\uFF0C\u5982\u6309ID\u8303\u56F4"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u54C8\u5E0C\u5206\u7247"}),"\uFF1A\u6309\u54C8\u5E0C\u503C\u5212\u5206\uFF0C\u5982\u7528\u6237ID\u54C8\u5E0C"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5217\u8868\u5206\u7247"}),"\uFF1A\u6309\u56FA\u5B9A\u5217\u8868\u503C\u5212\u5206\uFF0C\u5982\u6309\u5730\u533A"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u590D\u5408\u5206\u7247"}),"\uFF1A\u7ED3\u5408\u591A\u79CD\u7B56\u7565\uFF0C\u5982\u6708\u4EFD+\u54C8\u5E0C"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u7247\u952E\u9009\u62E9"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5206\u7247\u952E\u5E94\u5177\u6709\u826F\u597D\u7684\u5206\u5E03\u6027"}),"\n",(0,r.jsx)(s.li,{children:"\u907F\u514D\u9891\u7E41\u8DE8\u7247\u67E5\u8BE2\u7684\u5B57\u6BB5"}),"\n",(0,r.jsx)(s.li,{children:"\u8003\u8651\u4E1A\u52A1\u8BBF\u95EE\u6A21\u5F0F\u548C\u589E\u957F\u8D8B\u52BF"}),"\n",(0,r.jsx)(s.li,{children:"\u5E38\u7528\u5206\u7247\u952E\uFF1A\u7528\u6237ID\u3001\u8BA2\u5355ID\u3001\u65F6\u95F4\u7B49"}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"sharding-tools",label:"\u5206\u7247\u5DE5\u5177",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5E38\u7528\u7684MySQL\u5206\u5E93\u5206\u8868\u5DE5\u5177"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"ShardingSphere"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Apache\u9876\u7EA7\u9879\u76EE\uFF0C\u539FSharding-JDBC"}),"\n",(0,r.jsx)(s.li,{children:"\u63D0\u4F9BJDBC\u3001Proxy\u548CSidecar\u4E09\u79CD\u6A21\u5F0F"}),"\n",(0,r.jsx)(s.li,{children:"\u652F\u6301\u5206\u5E93\u5206\u8868\u3001\u8BFB\u5199\u5206\u79BB\u3001\u5206\u5E03\u5F0F\u4E8B\u52A1"}),"\n",(0,r.jsx)(s.li,{children:"Java\u751F\u6001\u7CFB\u7EDF\u4E2D\u4F7F\u7528\u5E7F\u6CDB"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:"# ShardingSphere-JDBC\u914D\u7F6E\u793A\u4F8B\ndataSources:\n  ds0: !!org.apache.commons.dbcp.BasicDataSource\n    driverClassName: com.mysql.jdbc.Driver\n    url: jdbc:mysql://localhost:3306/ds0\n    username: root\n    password: root\n  ds1: !!org.apache.commons.dbcp.BasicDataSource\n    driverClassName: com.mysql.jdbc.Driver\n    url: jdbc:mysql://localhost:3306/ds1\n    username: root\n    password: root\n\nshardingRule:\n  tables:\n    t_order:\n      actualDataNodes: ds${0..1}.t_order${0..1}\n      databaseStrategy:\n        inline:\n          shardingColumn: user_id\n          algorithmExpression: ds${user_id % 2}\n      tableStrategy:\n        inline:\n          shardingColumn: order_id\n          algorithmExpression: t_order${order_id % 2}\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"MyCat"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u57FA\u4E8ECobar\u7684\u5206\u5E03\u5F0F\u6570\u636E\u5E93\u4E2D\u95F4\u4EF6"}),"\n",(0,r.jsx)(s.li,{children:"\u652F\u6301\u5206\u5E93\u5206\u8868\u3001\u8BFB\u5199\u5206\u79BB\u3001SQL\u8DEF\u7531"}),"\n",(0,r.jsx)(s.li,{children:"\u72EC\u7ACB\u90E8\u7F72\uFF0C\u652F\u6301\u591A\u79CD\u8BED\u8A00\u5BA2\u6237\u7AEF"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-xml",children:'\x3c!-- MyCat\u914D\u7F6E\u793A\u4F8B --\x3e\n<schema name="TESTDB" checkSQLschema="false" sqlMaxLimit="100">\n  <table name="travelrecord" primaryKey="ID" dataNode="dn1,dn2" rule="auto-sharding-long" />\n</schema>\n\n<dataNode name="dn1" dataHost="localhost1" database="db1" />\n<dataNode name="dn2" dataHost="localhost1" database="db2" />\n\n<dataHost name="localhost1" maxCon="1000" minCon="10" balance="0" writeType="0" dbType="mysql" dbDriver="native">\n  <heartbeat>select user()</heartbeat>\n  <writeHost host="hostM1" url="localhost:3306" user="root" password="root">\n    <readHost host="hostS1" url="localhost:3307" user="root" password="root" />\n  </writeHost>\n</dataHost>\n'})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Vitess"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"YouTube\u5F00\u53D1\u7684\u5F00\u6E90MySQL\u6570\u636E\u5E93\u96C6\u7FA4\u7CFB\u7EDF"}),"\n",(0,r.jsx)(s.li,{children:"\u652F\u6301\u6C34\u5E73\u6269\u5C55\u3001\u4E3B\u4ECE\u590D\u5236\u7BA1\u7406"}),"\n",(0,r.jsx)(s.li,{children:"\u57FA\u4E8EGo\u8BED\u8A00\uFF0C\u9002\u5408\u8D85\u5927\u89C4\u6A21\u90E8\u7F72"}),"\n",(0,r.jsx)(s.li,{children:"\u88ABKubernetes\u539F\u751F\u652F\u6301"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6570\u636E\u5E93\u81EA\u8EAB\u5206\u533A"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"MySQL\u5185\u7F6E\u7684\u8868\u5206\u533A\u529F\u80FD"}),"\n",(0,r.jsx)(s.li,{children:"\u5BF9\u5E94\u7528\u900F\u660E\uFF0C\u4E0D\u9700\u8981\u4FEE\u6539\u4EE3\u7801"}),"\n",(0,r.jsx)(s.li,{children:"\u652F\u6301\u8303\u56F4\u3001\u5217\u8868\u3001\u54C8\u5E0C\u7B49\u5206\u533A\u7C7B\u578B"}),"\n",(0,r.jsx)(s.li,{children:"\u5355\u5B9E\u4F8B\u5185\u90E8\u5206\u533A\uFF0C\u4E0D\u662F\u771F\u6B63\u7684\u5206\u5E03\u5F0F"}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"challenges",label:"\u6311\u6218\u4E0E\u89E3\u51B3",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u5E93\u5206\u8868\u9762\u4E34\u7684\u6311\u6218\u53CA\u89E3\u51B3\u65B9\u6848"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u5E03\u5F0F\u4E8B\u52A1\u95EE\u9898"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6311\u6218"}),"\uFF1A\u8DE8\u5E93\u4E8B\u52A1\u4E00\u81F4\u6027\u96BE\u4FDD\u8BC1"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u89E3\u51B3\u65B9\u6848"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u67D4\u6027\u4E8B\u52A1\uFF1A\u6700\u7EC8\u4E00\u81F4\u6027\u6A21\u578B"}),"\n",(0,r.jsx)(s.li,{children:"XA\u4E8B\u52A1\uFF1A\u57FA\u4E8E\u4E24\u9636\u6BB5\u63D0\u4EA4"}),"\n",(0,r.jsx)(s.li,{children:"\u4E1A\u52A1\u8865\u507F\uFF1A\u901A\u8FC7\u8865\u507F\u673A\u5236\u4FEE\u6B63\u9519\u8BEF"}),"\n",(0,r.jsx)(s.li,{children:"\u907F\u514D\u8DE8\u5E93\u4E8B\u52A1\uFF1A\u8C03\u6574\u4E1A\u52A1\u8BBE\u8BA1"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8DE8\u5E93\u5173\u8054\u67E5\u8BE2"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6311\u6218"}),"\uFF1A\u65E0\u6CD5\u76F4\u63A5JOIN\u8DE8\u5E93\u8868"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u89E3\u51B3\u65B9\u6848"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5197\u4F59\u5B57\u6BB5\uFF1A\u9002\u5EA6\u6570\u636E\u5197\u4F59"}),"\n",(0,r.jsx)(s.li,{children:"\u5B57\u6BB5\u5197\u4F59\uFF1A\u51CF\u5C11\u5173\u8054\u67E5\u8BE2"}),"\n",(0,r.jsx)(s.li,{children:"\u5E94\u7528\u5C42\u7EC4\u88C5\uFF1A\u591A\u6B21\u67E5\u8BE2\u5728\u5E94\u7528\u5C42\u805A\u5408"}),"\n",(0,r.jsx)(s.li,{children:"\u6570\u636E\u96C6\u4E2D\u5C42\uFF1A\u4F7F\u7528\u6570\u636E\u4ED3\u5E93\u805A\u5408\u5206\u6790"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5168\u5C40\u552F\u4E00ID"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6311\u6218"}),"\uFF1A\u8DE8\u5E93\u8868\u9700\u8981\u5168\u5C40\u552F\u4E00ID"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u89E3\u51B3\u65B9\u6848"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"UUID\uFF1A\u7B80\u5355\u4F46\u6027\u80FD\u4E0D\u4F73"}),"\n",(0,r.jsx)(s.li,{children:"\u96EA\u82B1\u7B97\u6CD5(Snowflake)\uFF1A\u9AD8\u6027\u80FD\u5206\u5E03\u5F0FID"}),"\n",(0,r.jsx)(s.li,{children:"\u6570\u636E\u5E93\u5E8F\u5217\uFF1A\u5355\u72EC\u7684\u5E8F\u5217\u670D\u52A1"}),"\n",(0,r.jsx)(s.li,{children:"\u53F7\u6BB5\u6A21\u5F0F\uFF1A\u6279\u91CF\u83B7\u53D6ID\u6BB5"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u9875\u6392\u5E8F\u95EE\u9898"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6311\u6218"}),"\uFF1A\u8DE8\u5E93\u5206\u9875\u548C\u6392\u5E8F\u590D\u6742"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u89E3\u51B3\u65B9\u6848"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6700\u7B80\u5355\u5206\u9875\uFF1A\u4EC5\u6309\u5206\u7247\u952E\u6392\u5E8F"}),"\n",(0,r.jsx)(s.li,{children:"\u5168\u5C40\u6392\u5E8F\uFF1A\u5728\u5E94\u7528\u5C42\u5408\u5E76\u7ED3\u679C"}),"\n",(0,r.jsx)(s.li,{children:"\u6D41\u5F0F\u67E5\u8BE2\uFF1A\u4F7F\u7528\u6E38\u6807\u5206\u6279\u83B7\u53D6"}),"\n",(0,r.jsx)(s.li,{children:"\u4E8C\u6B21\u67E5\u8BE2\uFF1A\u5148\u83B7\u53D6ID\u518D\u67E5\u8BE6\u60C5"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6269\u5BB9\u4E0E\u6570\u636E\u8FC1\u79FB"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6311\u6218"}),"\uFF1A\u5728\u7EBF\u6269\u5BB9\u4E0D\u5F71\u54CD\u4E1A\u52A1"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u89E3\u51B3\u65B9\u6848"}),"\uFF1A","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u53CC\u5199\u65B9\u6848\uFF1A\u5199\u65B0\u65E7\u5E93\uFF0C\u9010\u6B65\u8FC1\u79FB\u8BFB"}),"\n",(0,r.jsx)(s.li,{children:"\u8FC1\u79FB\u5DE5\u5177\uFF1A\u5982gh-ost, pt-online-schema-change"}),"\n",(0,r.jsx)(s.li,{children:"\u6309\u6279\u6B21\u8FC1\u79FB\uFF1A\u5206\u6279\u6B21\u5C0F\u89C4\u6A21\u8FC1\u79FB"}),"\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528\u4E13\u4E1A\u8FC1\u79FB\u5E73\u53F0"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(c.A,{value:"best-practices",label:"\u6700\u4F73\u5B9E\u8DF5",children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u5E93\u5206\u8868\u6700\u4F73\u5B9E\u8DF5"}),"\uFF1A"]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4F55\u65F6\u8003\u8651\u5206\u5E93\u5206\u8868"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5355\u8868\u6570\u636E\u91CF\u8D85\u8FC7500\u4E07~1000\u4E07\u884C"}),"\n",(0,r.jsx)(s.li,{children:"\u5355\u8868\u6570\u636E\u91CF\u8D85\u8FC710GB"}),"\n",(0,r.jsx)(s.li,{children:"\u5355\u8868\u589E\u957F\u901F\u5EA6\u5FEB\uFF0C\u9884\u8BA11\u5E74\u5185\u8D85\u8FC7\u4E0A\u8FF0\u9608\u503C"}),"\n",(0,r.jsx)(s.li,{children:"\u67E5\u8BE2\u6027\u80FD\u660E\u663E\u4E0B\u964D\u4E14\u4F18\u5316\u7A7A\u95F4\u6709\u9650"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u7247\u952E\u9009\u62E9\u539F\u5219"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u9009\u62E9\u4E1A\u52A1\u65E0\u5173\u7684\u5B57\u6BB5\uFF0C\u5982\u81EA\u589EID"}),"\n",(0,r.jsx)(s.li,{children:"\u907F\u514D\u4F7F\u7528\u9891\u7E41\u53D8\u66F4\u7684\u5B57\u6BB5"}),"\n",(0,r.jsx)(s.li,{children:"\u8003\u8651\u6570\u636E\u5747\u5300\u5206\u5E03"}),"\n",(0,r.jsx)(s.li,{children:"\u5C3D\u91CF\u8986\u76D6\u5E38\u89C1\u67E5\u8BE2\u6761\u4EF6"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5206\u7247\u6570\u91CF\u89C4\u5212"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5F53\u524D\u5BB9\u91CF\u76842~4\u500D\uFF0C\u4E3A\u589E\u957F\u9884\u7559\u7A7A\u95F4"}),"\n",(0,r.jsx)(s.li,{children:"\u8003\u8651\u5355\u8868\u6700\u4F73\u6027\u80FD\u89C4\u6A21"}),"\n",(0,r.jsx)(s.li,{children:"\u5E73\u8861\u7BA1\u7406\u590D\u6742\u5EA6\u548C\u6269\u5C55\u6027"}),"\n",(0,r.jsx)(s.li,{children:"\u9884\u7559\u672A\u6765\u6269\u5BB9\u7A7A\u95F4"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u4E1A\u52A1\u8BBE\u8BA1\u9002\u914D"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u907F\u514D\u5F3A\u4E8B\u52A1\u4F9D\u8D56"}),"\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528\u6D88\u606F\u961F\u5217\u5F02\u6B65\u5904\u7406\u8DE8\u5E93\u64CD\u4F5C"}),"\n",(0,r.jsx)(s.li,{children:"\u5408\u7406\u4F7F\u7528\u7F13\u5B58\u51CF\u5C11\u6570\u636E\u5E93\u8BBF\u95EE"}),"\n",(0,r.jsx)(s.li,{children:"\u8BBE\u8BA1\u652F\u6301\u6570\u636E\u5F02\u6784\u67E5\u8BE2\u7684\u65B9\u6848"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u6570\u636E\u8FC1\u79FB\u7B56\u7565"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5236\u5B9A\u8BE6\u7EC6\u7684\u8FC1\u79FB\u8BA1\u5212\u548C\u56DE\u6EDA\u65B9\u6848"}),"\n",(0,r.jsx)(s.li,{children:"\u4F18\u5148\u8FC1\u79FB\u975E\u6838\u5FC3\u6216\u8BBF\u95EE\u91CF\u5C0F\u7684\u6570\u636E"}),"\n",(0,r.jsx)(s.li,{children:"\u91C7\u7528\u53CC\u5199\u7B56\u7565\u786E\u4FDD\u6570\u636E\u4E00\u81F4\u6027"}),"\n",(0,r.jsx)(s.li,{children:"\u7070\u5EA6\u8FC1\u79FB\uFF0C\u9010\u6B65\u5207\u6362\u6D41\u91CF"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u76D1\u63A7\u4E0E\u544A\u8B66"}),"\uFF1A"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u76D1\u63A7\u5404\u5206\u7247\u6570\u636E\u91CF\u5206\u5E03"}),"\n",(0,r.jsx)(s.li,{children:"\u76D1\u63A7\u8DE8\u5206\u7247\u64CD\u4F5C\u9891\u7387\u548C\u6027\u80FD"}),"\n",(0,r.jsx)(s.li,{children:"\u8BBE\u7F6E\u5BB9\u91CF\u544A\u8B66\u9608\u503C"}),"\n",(0,r.jsx)(s.li,{children:"\u76D1\u63A7\u5206\u7247\u95F4\u6570\u636E\u503E\u659C"}),"\n"]}),"\n"]}),"\n"]})]})]})]})}function o(n={}){let{wrapper:s}={...(0,i.R)(),...n.components};return s?(0,r.jsx)(s,{...n,children:(0,r.jsx)(a,{...n})}):a(n)}},57250:function(n,s,e){e.d(s,{A:()=>i});var l=e(74848);e(96540);var r=e(34164);function i({children:n,hidden:s,className:e}){return(0,l.jsx)("div",{role:"tabpanel",className:(0,r.A)("tabItem_Ymn6",e),hidden:s,children:n})}},78010:function(n,s,e){e.d(s,{A:()=>S});var l=e(74848),r=e(96540),i=e(34164),d=e(88287),c=e(28584),h=e(56347),x=e(99989),j=e(96629),t=e(80618),a=e(41367);function o(n){return r.Children.toArray(n).filter(n=>"\n"!==n).map(n=>{if(!n||(0,r.isValidElement)(n)&&function(n){let{props:s}=n;return!!s&&"object"==typeof s&&"value"in s}(n))return n;throw Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof n.type?n.type:n.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function E({value:n,tabValues:s}){return s.some(s=>s.value===n)}var u=e(19863);function g({className:n,block:s,selectedValue:e,selectValue:r,tabValues:d}){let h=[],{blockElementScrollPositionUntilNextRender:x}=(0,c.a_)(),j=n=>{let s=n.currentTarget,l=d[h.indexOf(s)].value;l!==e&&(x(s),r(l))},t=n=>{let s=null;switch(n.key){case"Enter":j(n);break;case"ArrowRight":{let e=h.indexOf(n.currentTarget)+1;s=h[e]??h[0];break}case"ArrowLeft":{let e=h.indexOf(n.currentTarget)-1;s=h[e]??h[h.length-1]}}s?.focus()};return(0,l.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":s},n),children:d.map(({value:n,label:s,attributes:r})=>(0,l.jsx)("li",{role:"tab",tabIndex:e===n?0:-1,"aria-selected":e===n,ref:n=>{h.push(n)},onKeyDown:t,onClick:j,...r,className:(0,i.A)("tabs__item","tabItem_LNqP",r?.className,{"tabs__item--active":e===n}),children:s??n},n))})}function p({lazy:n,children:s,selectedValue:e}){let d=(Array.isArray(s)?s:[s]).filter(Boolean);if(n){let n=d.find(n=>n.props.value===e);return n?(0,r.cloneElement)(n,{className:(0,i.A)("margin-top--md",n.props.className)}):null}return(0,l.jsx)("div",{className:"margin-top--md",children:d.map((n,s)=>(0,r.cloneElement)(n,{key:s,hidden:n.props.value!==e}))})}function m(n){let s=function(n){let s,{defaultValue:e,queryString:l=!1,groupId:i}=n,d=function(n){let{values:s,children:e}=n;return(0,r.useMemo)(()=>{let n=s??o(e).map(({props:{value:n,label:s,attributes:e,default:l}})=>({value:n,label:s,attributes:e,default:l})),l=(0,t.XI)(n,(n,s)=>n.value===s.value);if(l.length>0)throw Error(`Docusaurus error: Duplicate values "${l.map(n=>n.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`);return n},[s,e])}(n),[c,u]=(0,r.useState)(()=>(function({defaultValue:n,tabValues:s}){if(0===s.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!E({value:n,tabValues:s}))throw Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${s.map(n=>n.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}let e=s.find(n=>n.default)??s[0];if(!e)throw Error("Unexpected error: 0 tabValues");return e.value})({defaultValue:e,tabValues:d})),[g,p]=function({queryString:n=!1,groupId:s}){let e=(0,h.W6)(),l=function({queryString:n=!1,groupId:s}){if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!s)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return s??null}({queryString:n,groupId:s});return[(0,j.aZ)(l),(0,r.useCallback)(n=>{if(!l)return;let s=new URLSearchParams(e.location.search);s.set(l,n),e.replace({...e.location,search:s.toString()})},[l,e])]}({queryString:l,groupId:i}),[m,S]=function({groupId:n}){let s=n?`docusaurus.tab.${n}`:null,[e,l]=(0,a.Dv)(s);return[e,(0,r.useCallback)(n=>{s&&l.set(n)},[s,l])]}({groupId:i}),T=E({value:s=g??m,tabValues:d})?s:null;return(0,x.A)(()=>{T&&u(T)},[T]),{selectedValue:c,selectValue:(0,r.useCallback)(n=>{if(!E({value:n,tabValues:d}))throw Error(`Can't select invalid tab value=${n}`);u(n),p(n),S(n)},[p,S,d]),tabValues:d}}(n);return(0,l.jsxs)("div",{className:(0,i.A)(d.G.tabs.container,"tabs-container","tabList__CuJ"),children:[(0,l.jsx)(g,{...s,...n}),(0,l.jsx)(p,{...s,...n})]})}function S(n){let s=(0,u.A)();return(0,l.jsx)(m,{...n,children:o(n.children)},String(s))}},67810:function(n,s,e){e.d(s,{A:()=>i});var l=e(83941),r=e(61022);function i(){let{prism:n}=(0,r.p)(),{colorMode:s}=(0,l.G)(),e=n.theme,i=n.darkTheme||e;return"dark"===s?i:e}},25591:function(n,s,e){e.d(s,{A:()=>o});var l=e(74848),r=e(96540),i=e(34164),d=e(71765),c=e(33436),h=e(61022),x=e(67810);let j="codeDot_PWGG",t="langIcon_gX7_",a="copyButtonIcon_f_OW",o=function({children:n,className:s,metastring:e,title:o}){let E,u,[g,p]=(0,r.useState)(!1),[m,S]=(0,r.useState)(!1),T=(0,r.useRef)(null),A=(0,r.useRef)(null),R=(0,r.useRef)(null),{prism:N}=(0,h.p)(),_=(0,x.A)();(0,r.useEffect)(()=>{S(!0)},[]),(0,r.useEffect)(()=>{let n;if(!R.current)return;let s=document.createElement("canvas"),e=document.createElement("div");e.className="matrixContainer_iCb4",e.appendChild(s),R.current.prepend(e);let l=s.getContext("2d"),r=()=>{let n=R.current.getBoundingClientRect();s.width=n.width,s.height=n.height};r(),window.addEventListener("resize",r);let i=()=>"dark"===document.documentElement.getAttribute("data-theme"),d=()=>{let n=(i(),15),e=Math.floor(s.width/n);return{fontSize:n,columns:e}},{fontSize:c,columns:h}=d(),x=[];for(let n=0;n<h;n++)x[n]=Math.floor(Math.random()*s.height/c);let j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789labylabylaby",t=()=>{let e=h;if({fontSize:c,columns:h}=d(),h!==e)for(let n=0;n<h;n++)n<e||(x[n]=Math.floor(Math.random()*s.height/c));i()?l.fillStyle="rgba(0, 0, 0, 0.05)":l.fillStyle="rgba(255, 255, 255, 0.05)",l.fillRect(0,0,s.width,s.height),i()?l.fillStyle="#0F0":l.fillStyle="rgba(0, 80, 0, 0.8)",l.font=`${c}px 'Courier New', monospace`,l.textBaseline="top";for(let n=0;n<x.length;n++){let e=j[Math.floor(Math.random()*j.length)];l.fillText(e,n*c,x[n]*c),x[n]*c>s.height&&Math.random()>.975&&(x[n]=0),Math.random()>.6&&x[n]++}n=setTimeout(()=>requestAnimationFrame(t),70)};t();let a=new MutationObserver(n=>{n.forEach(n=>{"data-theme"===n.attributeName&&l.clearRect(0,0,s.width,s.height)})});return a.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>{a.disconnect(),window.removeEventListener("resize",r),clearTimeout(n),cancelAnimationFrame(n)}},[m]);let L=s&&(/language-(\w+)/.exec(s)||["","text"])[1],O=o||(e&&e.match(/title="([^"]+)"/))?.[1]||"";return(0,l.jsxs)("div",{className:(0,i.A)("codeBlockContainer_X7hc",L&&`language-${L}`),ref:A,children:[(0,l.jsxs)("div",{className:"codeBlockHeader_viex",children:[(0,l.jsxs)("div",{className:"codeBlockControls_mxj2",children:[(0,l.jsx)("span",{className:(0,i.A)(j,"codeDotRed_ANoD")}),(0,l.jsx)("span",{className:(0,i.A)(j,"codeDotYellow_HH1J")}),(0,l.jsx)("span",{className:(0,i.A)(j,"codeDotGreen_RM6U")})]}),O&&(0,l.jsx)("div",{className:"codeBlockTitle_B2tn",children:O}),(0,l.jsxs)("div",{className:"codeBlockMeta_lRk3",children:[L&&(0,l.jsxs)("div",{className:"codeBlockLanguage_Vqu6",children:[(E={javascript:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",className:t,children:(0,l.jsx)("path",{fill:"currentColor",d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM243.8 381.4c0 43.6-25.6 63.5-62.9 63.5-33.7 0-53.2-17.4-63.2-38.5l34.3-20.7c6.6 11.7 12.6 21.6 27.1 21.6 13.8 0 22.6-5.4 22.6-26.5V237.7h42.1v143.7zm99.6 63.5c-39.1 0-64.4-18.6-76.7-43l34.3-19.8c9 14.7 20.8 25.6 41.5 25.6 17.4 0 28.6-8.7 28.6-20.8 0-14.4-11.4-19.5-30.7-28l-10.5-4.5c-30.4-12.9-50.5-29.2-50.5-63.5 0-31.6 24.1-55.6 61.6-55.6 26.8 0 46 9.3 59.8 33.7L368 290c-7.2-12.9-15-18-27.1-18-12.3 0-20.1 7.8-20.1 18 0 12.6 7.8 17.7 25.9 25.6l10.5 4.5c35.8 15.3 55.9 31 55.9 66.2 0 37.8-29.8 58.6-69.7 58.6z"})}),jsx:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",className:t,children:(0,l.jsx)("path",{fill:"currentColor",d:"M418.2 177.2c-5.4-1.8-10.8-3.5-16.2-5.1.9-3.7 1.7-7.4 2.5-11.1 12.3-59.6 4.2-107.5-23.1-123.3-26.3-15.1-69.2.6-112.6 38.4-4.3 3.7-8.5 7.6-12.5 11.5-2.7-2.6-5.5-5.2-8.3-7.7-45.5-40.4-91.1-57.4-118.4-41.5-26.2 15.2-34 60.3-23 116.7 1.1 5.6 2.3 11.1 3.7 16.7-6.4 1.8-12.7 3.8-18.6 5.9C38.3 196.2 0 225.4 0 255.6c0 31.2 40.8 62.5 96.3 81.5 4.5 1.5 9 3 13.6 4.3-1.5 6-2.8 11.9-4 18-10.5 55.5-2.3 99.5 23.9 114.6 27 15.6 72.4-.4 116.6-39.1 3.5-3.1 7-6.3 10.5-9.7 4.4 4.3 9 8.4 13.6 12.4 42.8 36.8 85.1 51.7 111.2 36.6 27-15.6 35.8-62.9 24.4-120.5-.9-4.4-1.9-8.9-3-13.5 3.2-.9 6.3-1.9 9.4-2.9 57.7-19.1 99.5-50 99.5-81.7 0-30.3-39.4-59.7-93.8-78.4zM282.9 92.3c37.2-32.4 71.9-45.1 87.7-36 16.9 9.7 23.4 48.9 12.8 100.4-.7 3.4-1.4 6.7-2.3 10-22.2-5-44.7-8.6-67.3-10.6-13-18.6-27.2-36.4-42.6-53.1 3.9-3.7 7.7-7.2 11.7-10.7zM167.2 307.5c5.1 8.7 10.3 17.4 15.8 25.9-15.6-1.7-31.1-4.2-46.4-7.5 4.4-14.4 9.9-29.3 16.3-44.5 4.6 8.8 9.3 17.5 14.3 26.1zm-30.3-120.3c14.4-3.2 29.7-5.8 45.6-7.8-5.3 8.3-10.5 16.8-15.4 25.4-4.9 8.5-9.7 17.2-14.2 26-6.3-14.9-11.6-29.5-16-43.6zm27.4 68.9c6.6-13.8 13.8-27.3 21.4-40.6s15.8-26.2 24.4-38.9c15-1.1 30.3-1.7 45.9-1.7s31 .6 45.9 1.7c8.5 12.6 16.6 25.5 24.3 38.7s14.9 26.7 21.7 40.4c-6.7 13.8-13.9 27.4-21.6 40.8-7.6 13.3-15.7 26.2-24.2 39-14.9 1.1-30.4 1.6-46.1 1.6s-30.9-.5-45.6-1.4c-8.7-12.7-16.9-25.7-24.6-39s-14.8-26.8-21.5-40.6zm180.6 51.2c5.1-8.8 9.9-17.7 14.6-26.7 6.4 14.5 12 29.2 16.9 44.3-15.5 3.5-31.2 6.2-47 8 5.4-8.4 10.5-17 15.5-25.6zm14.4-76.5c-4.7-8.8-9.5-17.6-14.5-26.2-4.9-8.5-10-16.9-15.3-25.2 16.1 2 31.5 4.7 45.9 8-4.6 14.8-10 29.2-16.1 43.4zM256.2 118.3c10.5 11.4 20.4 23.4 29.6 35.8-19.8-.9-39.7-.9-59.5 0 9.8-12.9 19.9-24.9 29.9-35.8zM140.2 57c16.8-9.8 54.1 4.2 93.4 39 2.5 2.2 5 4.6 7.6 7-15.5 16.7-29.8 34.5-42.9 53.1-22.6 2-45 5.5-67.2 10.4-1.3-5.1-2.4-10.3-3.5-15.5-9.4-48.4-3.2-84.9 12.6-94zm-24.5 263.6c-4.2-1.2-8.3-2.5-12.4-3.9-21.3-6.7-45.5-17.3-63-31.2-10.1-7-16.9-17.8-18.8-29.9 0-18.3 31.6-41.7 77.2-57.6 5.7-2 11.5-3.8 17.3-5.5 6.8 21.7 15 43 24.5 63.6-9.6 20.9-17.9 42.5-24.8 64.5zm116.6 98c-16.5 15.1-35.6 27.1-56.4 35.3-11.1 5.3-23.9 5.8-35.3 1.3-15.9-9.2-22.5-44.5-13.5-92 1.1-5.6 2.3-11.2 3.7-16.7 22.4 4.8 45 8.1 67.9 9.8 13.2 18.7 27.7 36.6 43.2 53.4-3.2 3.1-6.4 6.1-9.6 8.9zm24.5-24.3c-10.2-11-20.4-23.2-30.3-36.3 9.6.4 19.5.6 29.5.6 10.3 0 20.4-.2 30.4-.7-9.2 12.7-19.1 24.8-29.6 36.4zm130.7 30c-.9 12.2-6.9 23.6-16.5 31.3-15.9 9.2-49.8-2.8-86.4-34.2-4.2-3.6-8.4-7.5-12.7-11.5 15.3-16.9 29.4-34.8 42.2-53.6 22.9-1.9 45.7-5.4 68.2-10.5 1 4.1 1.9 8.2 2.7 12.2 4.9 21.6 5.7 44.1 2.5 66.3zm18.2-107.5c-2.8.9-5.6 1.8-8.5 2.6-7-21.8-15.6-43.1-25.5-63.8 9.6-20.4 17.7-41.4 24.5-62.9 5.2 1.5 10.2 3.1 15 4.7 46.6 16 79.3 39.8 79.3 58 0 19.6-34.9 44.9-84.8 61.4zm-149.7-15c25.3 0 45.8-20.5 45.8-45.8s-20.5-45.8-45.8-45.8c-25.3 0-45.8 20.5-45.8 45.8s20.5 45.8 45.8 45.8z"})}),typescript:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",className:t,children:[(0,l.jsx)("path",{fill:"currentColor",d:"M233.277 177.622h-82.44v156.756h32.967v-58.743h49.472c39.168 0 71.15-26.284 71.15-49.006.001-22.729-31.981-49.007-71.15-49.007zm-3.533 66.293H183.71v-33.496h46.034c17.392 0 31.407 7.41 31.407 16.747.001 9.341-14.014 16.75-31.407 16.75zm212.408-66.293v32.965h-33.403v123.79h-32.973v-123.79h-33.405v-32.966h99.781z"}),(0,l.jsx)("path",{fill:"currentColor",d:"M512 256.001c0 141.395-114.606 255.996-255.996 255.996C114.606 511.997 0 397.396 0 256.001 0 114.606 114.606 0 256.004 0 397.394 0 512 114.606 512 256.001z",opacity:".1"})]}),css:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",className:t,children:(0,l.jsx)("path",{fill:"currentColor",d:"M0 32l34.9 395.8L192 480l157.1-52.2L384 32H0zm313.1 80l-4.8 47.3L193 208.6l-.3.1h111.5l-12.8 146.6-98.2 28.7-98.8-29.2-6.4-73.9h48.9l3.2 38.3 52.6 13.3 54.7-15.4 3.7-61.6-166.3-.5v-.1l-.2.1-3.6-46.3L193.1 162l6.5-2.7H76.7L70.9 112h242.2z"})}),html:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",className:t,children:(0,l.jsx)("path",{fill:"currentColor",d:"M0 32l34.9 395.8L191.5 480l157.6-52.2L384 32H0zm308.2 127.9H124.4l4.1 49.4h175.6l-13.6 148.4-97.9 27v.3h-1.1l-98.7-27.3-6-75.8h47.7L138 320l53.5 14.5 53.7-14.5 6-62.2H84.3L71.5 112.2h241.1l-4.4 47.7z"})}),java:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",className:t,children:(0,l.jsx)("path",{fill:"currentColor",d:"M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"})}),python:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",className:t,children:(0,l.jsx)("path",{fill:"currentColor",d:"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"})}),bash:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",className:t,children:(0,l.jsx)("path",{fill:"currentColor",d:"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"})}),json:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",className:t,children:(0,l.jsx)("path",{fill:"currentColor",d:"M0 32l34.9 395.8L192 480l157.1-52.2L384 32H0zm313.1 80l-4.8 47.3L193 208.6l-.3.1h111.5l-12.8 146.6-98.2 28.7-98.8-29.2-6.4-73.9h48.9l3.2 38.3 52.6 13.3 54.7-15.4 3.7-61.6-166.3-.5v-.1l-.2.1-3.6-46.3L193.1 162l6.5-2.7H76.7L70.9 112h242.2z"})}),yaml:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",className:t,children:(0,l.jsx)("path",{fill:"currentColor",d:"M0 32l34.9 395.8L192 480l157.1-52.2L384 32H0zm313.1 80l-4.8 47.3L193 208.6l-.3.1h111.5l-12.8 146.6-98.2 28.7-98.8-29.2-6.4-73.9h48.9l3.2 38.3 52.6 13.3 54.7-15.4 3.7-61.6-166.3-.5v-.1l-.2.1-3.6-46.3L193.1 162l6.5-2.7H76.7L70.9 112h242.2z"})}),markdown:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 208 128",className:t,children:[(0,l.jsx)("rect",{width:"198",height:"118",x:"5",y:"5",ry:"10",stroke:"currentColor",strokeWidth:"10",fill:"none"}),(0,l.jsx)("path",{d:"M30 98V30h20l20 25 20-25h20v68H90V59L70 84 50 59v39zm125 0l-30-33h20V30h20v35h20z",fill:"currentColor"})]}),sql:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",className:t,children:(0,l.jsx)("path",{fill:"currentColor",d:"M448 73.143v45.714C448 159.143 347.667 192 224 192S0 159.143 0 118.857V73.143C0 32.857 100.333 0 224 0s224 32.857 224 73.143zM448 176v102.857C448 319.143 347.667 352 224 352S0 319.143 0 278.857V176c48.125 33.143 136.208 48.572 224 48.572S399.874 209.143 448 176zm0 160v102.857C448 479.143 347.667 512 224 512S0 479.143 0 438.857V336c48.125 33.143 136.208 48.572 224 48.572S399.874 369.143 448 336z"})})},u=(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",className:t,children:(0,l.jsx)("path",{fill:"currentColor",d:"M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"})}),E["string"==typeof L&&L?L.toLowerCase():""]||u),(0,l.jsx)("span",{children:L})]}),(0,l.jsx)("button",{ref:T,type:"button","aria-label":"\u590D\u5236\u4EE3\u7801",className:"copyButton_H_xL",onClick:()=>{if(A.current){let n=A.current.textContent;(0,c.A)(n),p(!0),setTimeout(()=>{p(!1)},2e3)}},children:g?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor",className:a,children:(0,l.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})}),(0,l.jsx)("span",{children:"\u5DF2\u590D\u5236"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor",className:a,children:(0,l.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})}),(0,l.jsx)("span",{children:"\u590D\u5236"})]})})]})]}),(0,l.jsx)("div",{className:"codeBlockContent_vqWU",ref:R,children:(0,l.jsx)(d.f4,{code:n.trim(),language:L||"text",theme:_,children:({className:n,style:s,tokens:e,getLineProps:r,getTokenProps:d})=>(0,l.jsx)("pre",{className:(0,i.A)(n,"codeBlock_wPnj"),style:s,children:(0,l.jsx)("code",{className:"codeBlockLines_fQUY",children:e.map((n,s)=>{1===n.length&&"\n"===n[0].content&&(n[0].content="");let{key:e,...c}=r({line:n,key:s});return(0,l.jsxs)("div",{...c,className:(0,i.A)(c.className,"codeLine_fSta"),children:[(0,l.jsx)("span",{className:"codeLineNumber_x9bH",children:s+1}),(0,l.jsx)("span",{className:"codeLineContent_HA3z",children:n.map((n,s)=>{let{key:e,...r}=d({token:n,key:s});return(0,l.jsx)("span",{...r},e||s)})})]},e||s)})})})})})]})}},28453:function(n,s,e){e.d(s,{R:()=>d,x:()=>c});var l=e(96540);let r={},i=l.createContext(r);function d(n){let s=l.useContext(i);return l.useMemo(function(){return"function"==typeof n?n(s):{...s,...n}},[s,n])}function c(n){let s;return s=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:d(n.components),l.createElement(i.Provider,{value:s},n.children)}},33436:function(n,s,e){e.d(s,{A:()=>l});function l(n,{target:s=document.body}={}){if("string"!=typeof n)throw TypeError(`Expected parameter \`text\` to be a \`string\`, got \`${typeof n}\`.`);let e=document.createElement("textarea"),r=document.activeElement;e.value=n,e.setAttribute("readonly",""),e.style.all="unset",e.style.contain="strict",e.style.position="absolute",e.style.left="-9999px",e.style.width="2em",e.style.height="2em",e.style.padding="0",e.style.border="none",e.style.outline="none",e.style.boxShadow="none",e.style.background="transparent",e.style.fontSize="12pt",e.style.whiteSpace="pre";let i=document.getSelection(),d=i.rangeCount>0&&i.getRangeAt(0);s.append(e),e.select(),e.selectionStart=0,e.selectionEnd=n.length;let c=!1;try{c=document.execCommand("copy")}catch{}return e.remove(),d&&(i.removeAllRanges(),i.addRange(d)),r&&r.focus(),c}}}]);