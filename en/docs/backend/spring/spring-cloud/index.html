<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-backend/spring/spring-cloud" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.2"><title data-rh=true>Spring Cloudè¯¦è§£ | Labyçš„åšå®¢</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true property=og:image content=https://laby-umr.github.io/en/img/docusaurus-social-card.jpg /><meta data-rh=true name=twitter:image content=https://laby-umr.github.io/en/img/docusaurus-social-card.jpg /><meta data-rh=true property=og:url content=https://laby-umr.github.io/en/docs/backend/spring/spring-cloud /><meta data-rh=true property=og:locale content=en /><meta data-rh=true property=og:locale:alternate content=zh_Hans /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true name=keywords content="blog, javascript, typescript, react, vue, java, spring, å‰ç«¯, åç«¯, å…¨æ ˆå¼€å‘"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:type content=website /><meta data-rh=true name=docusaurus_version content=current /><meta data-rh=true name=docusaurus_tag content=docs-default-current /><meta data-rh=true name=docsearch:version content=current /><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current /><meta data-rh=true property=og:title content="Spring Cloudè¯¦è§£ | Labyçš„åšå®¢"/><meta data-rh=true name=description content="æ·±å…¥ç†è§£Spring Cloudå¾®æœåŠ¡æ¶æ„ä¸ç»„ä»¶"/><meta data-rh=true property=og:description content="æ·±å…¥ç†è§£Spring Cloudå¾®æœåŠ¡æ¶æ„ä¸ç»„ä»¶"/><link data-rh=true rel=icon href=/en/img/logo.jpg /><link data-rh=true rel=canonical href=https://laby-umr.github.io/en/docs/backend/spring/spring-cloud /><link data-rh=true rel=alternate href=https://laby-umr.github.io/docs/backend/spring/spring-cloud hreflang=zh-Hans /><link data-rh=true rel=alternate href=https://laby-umr.github.io/en/docs/backend/spring/spring-cloud hreflang=en /><link data-rh=true rel=alternate href=https://laby-umr.github.io/docs/backend/spring/spring-cloud hreflang=x-default /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://laby-umr.github.io/en/docs/backend","name":"Backend Development","position":1},{"@type":"ListItem","item":"https://laby-umr.github.io/en/docs/backend/spring/spring-cloud","name":"Spring Cloudè¯¦è§£","position":2}]}</script><link rel=alternate type=application/rss+xml href=/en/blog/rss.xml title="Labyçš„åšå®¢ RSS Feed"><link rel=alternate type=application/atom+xml href=/en/blog/atom.xml title="Labyçš„åšå®¢ Atom Feed"><link rel=alternate type=application/json href=/en/blog/feed.json title="Labyçš„åšå®¢ JSON Feed"><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=G-03NXQZ7S0Z"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-03NXQZ7S0Z",{anonymize_ip:!0})</script><link rel=icon href=/en/img/logo.jpg><link rel=manifest href=/en/manifest.json><meta name=theme-color content=#667eea><meta name=apple-mobile-web-app-capable content=yes><meta name=apple-mobile-web-app-status-bar-style content=black-translucent><link rel=apple-touch-icon href=/en/img/logo.jpg><script>window.blogApiConfig={apiBaseUrl:"http://120.48.86.168:48080"}</script><link rel=dns-prefetch href=http://120.48.86.168:48080><link rel=preconnect href=http://120.48.86.168:48080 crossorigin=anonymous><link rel=stylesheet href=/en/assets/css/styles.2a0a9c29.css /><script src=/en/assets/js/runtime~main.6edd714a.js defer></script><script src=/en/assets/js/main.38331326.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"dark"),document.documentElement.setAttribute("data-theme-choice",t||"dark")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id=__docusaurus><link rel=preload as=image href=/en/img/logo.jpg /><link rel=preload as=image href=/img/head.jpg /><link rel=preload as=image href=/img/user/WeChat.png /><canvas style=position:fixed;top:0;left:0;width:100%;height:100%;z-index:0;pointer-events:none></canvas><div class=progressContainer_awPh><div class=progressBar_CB9G style=width:0%><div class=progressGlow_gVHl></div></div><div class=particlesContainer_jiFR></div></div><div class=target-cursor-wrapper><div class=target-cursor-dot></div><div class="target-cursor-corner corner-tl"></div><div class="target-cursor-corner corner-tr"></div><div class="target-cursor-corner corner-br"></div><div class="target-cursor-corner corner-bl"></div></div><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" style=background-color:#667eea;color:#ffffff role=banner><div class=announcementBarPlaceholder_vyr4></div><div class="content_knG7 announcementBarContent_xLdY">â­ï¸ å¦‚æœè§‰å¾—è¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª <a target=_blank rel="noopener noreferrer" href=https://github.com/laby-umr/laby-umr.github.io>Star</a> æ”¯æŒä¸€ä¸‹ï¼</div><button type=button aria-label=Close class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width=14 height=14><g stroke=currentColor stroke-width=3.1><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"/></g></svg></button></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/en/><div class=navbar__logo><img src=/en/img/logo.jpg alt="Laby's Blog Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"/><img src=/en/img/logo.jpg alt="Laby's Blog Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"/></div><b class="navbar__title text--truncate">Laby's Blog</b></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/en/docs/intro>Knowledge Base</a><a class="navbar__item navbar__link" href=/en/blog>Blog</a><a class="navbar__item navbar__link" href=/en/projects>Projects</a><a class="navbar__item navbar__link" href=/en/music>éŸ³ä¹</a><a class="navbar__item navbar__link" href=/en/contact>Contact Me</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href=/en/about>About Me</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link><svg viewBox="0 0 24 24" width=20 height=20 aria-hidden=true class=iconLanguage_nlXk><path fill=currentColor d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>English</a><ul class=dropdown__menu><li><a href=/docs/backend/spring/spring-cloud target=_self rel="noopener noreferrer" class=dropdown__link lang=zh-Hans>ç®€ä½“ä¸­æ–‡</a><li><a href=/en/docs/backend/spring/spring-cloud target=_self rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang=en>English</a></ul></div><a href=https://github.com/MasterLiu93 target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><div class="navbar__search searchBarContainer_NW3z" dir=ltr><input placeholder=Search aria-label=Search class="navbar__search-input searchInput_YFbd" value="" /><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/en/docs/intro><span title=çŸ¥è¯†åº“å¯¼èˆª class=linkLabel_WmDU>çŸ¥è¯†åº“å¯¼èˆª</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/en/docs/frontend><span title="Frontend Development" class=categoryLinkLabel_W154>Frontend Development</span></a><button aria-label="Expand sidebar category 'Frontend Development'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href=/en/docs/backend><span title="Backend Development" class=categoryLinkLabel_W154>Backend Development</span></a><button aria-label="Collapse sidebar category 'Backend Development'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/backend/backend-intro><span title=åç«¯å¼€å‘çŸ¥è¯†ä½“ç³» class=linkLabel_WmDU>åç«¯å¼€å‘çŸ¥è¯†ä½“ç³»</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/en/docs/backend/java-basics/data-types><span title="Java Basics" class=categoryLinkLabel_W154>Java Basics</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/en/docs/backend/java-collections/collection-interface><span title="Java Collections Framework" class=categoryLinkLabel_W154>Java Collections Framework</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/en/docs/backend/concurrency/thread-basics><span title="Concurrent Programming" class=categoryLinkLabel_W154>Concurrent Programming</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/en/docs/backend/jvm/memory-model><span title=JVM class=categoryLinkLabel_W154>JVM</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true tabindex=0 href=/en/docs/backend/spring/ioc><span title="Spring Framework" class=categoryLinkLabel_W154>Spring Framework</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/backend/spring/ioc><span title="Spring IOCè¯¦è§£" class=linkLabel_WmDU>Spring IOCè¯¦è§£</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/backend/spring/aop><span title="Spring AOPè¯¦è§£" class=linkLabel_WmDU>Spring AOPè¯¦è§£</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/backend/spring/spring-mvc><span title="Spring MVCè¯¦è§£" class=linkLabel_WmDU>Spring MVCè¯¦è§£</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/backend/spring/spring-boot><span title="Spring Bootè¯¦è§£" class=linkLabel_WmDU>Spring Bootè¯¦è§£</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/en/docs/backend/spring/spring-cloud><span title="Spring Cloudè¯¦è§£" class=linkLabel_WmDU>Spring Cloudè¯¦è§£</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/backend/spring/transaction><span title=Springäº‹åŠ¡ç®¡ç†è¯¦è§£ class=linkLabel_WmDU>Springäº‹åŠ¡ç®¡ç†è¯¦è§£</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/en/docs/backend/database-orm/database-intro><span title="Database and ORM" class=categoryLinkLabel_W154>Database and ORM</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/en/docs/backend/microservices/service-discovery><span title=Microservices class=categoryLinkLabel_W154>Microservices</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/en/docs/backend/distributed-systems/distributed-theory><span title="Distributed Systems" class=categoryLinkLabel_W154>Distributed Systems</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/en/docs/backend/message-queues/kafka><span title="Message Queues" class=categoryLinkLabel_W154>Message Queues</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/en/docs/backend/network-programming/tcp-ip><span title="Network Programming" class=categoryLinkLabel_W154>Network Programming</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/en/docs/backend/design-patterns/code-quality-intro><span title="Design Patterns" class=categoryLinkLabel_W154>Design Patterns</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/en/docs/backend/big-data/big-data-intro><span title="Big Data Technologies" class=categoryLinkLabel_W154>Big Data Technologies</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/en/docs/backend/system-design/devops-intro><span title="System Design" class=categoryLinkLabel_W154>System Design</span></a></div></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/en/docs/digital-twin/digital-twin-intro><span title="Digital Twin" class=categoryLinkLabel_W154>Digital Twin</span></a><button aria-label="Expand sidebar category 'Digital Twin'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/en/docs/projectDesign/project-design-intro><span title="Project Design" class=categoryLinkLabel_W154>Project Design</span></a><button aria-label="Expand sidebar category 'Project Design'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/en/docs/document-template/template-index><span title="Document Templates" class=categoryLinkLabel_W154>Document Templates</span></a><button aria-label="Expand sidebar category 'Document Templates'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/en/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/en/docs/backend><span>Backend Development</span></a><li class=breadcrumbs__item><span class=breadcrumbs__link>Spring Framework</span><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>Spring Cloudè¯¦è§£</span></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Spring Cloud è¯¦è§£</h1></header>
<p>Spring Cloudæ˜¯æ„å»ºåˆ†å¸ƒå¼ç³»ç»Ÿå’Œå¾®æœåŠ¡æ¶æ„çš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼Œå®ƒåŸºäºSpring Bootæä¾›äº†æœåŠ¡æ³¨å†Œå‘ç°ã€é…ç½®ç®¡ç†ã€è´Ÿè½½å‡è¡¡ã€ç†”æ–­é™çº§ç­‰å¾®æœåŠ¡æ ¸å¿ƒåŠŸèƒ½ã€‚</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg></span>æœ¬æ–‡å†…å®¹æ¦‚è§ˆ</div><div class=admonitionContent_BuS1><div class=tableOfContentsInline_prmo><ul class=table-of-contents><li><a href=#1-spring-cloudåŸºç¡€æ¦‚å¿µ>1. Spring CloudåŸºç¡€æ¦‚å¿µ</a><ul><li><a href=#11-ä»€ä¹ˆæ˜¯å¾®æœåŠ¡>1.1 ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ</a><li><a href=#12-spring-cloudç»„ä»¶>1.2 Spring Cloudç»„ä»¶</a></ul><li><a href=#2-æœåŠ¡æ³¨å†Œä¸å‘ç°>2. æœåŠ¡æ³¨å†Œä¸å‘ç°</a><ul><li><a href=#21-eureka-server>2.1 Eureka Server</a><li><a href=#22-eureka-client>2.2 Eureka Client</a><li><a href=#23-æœåŠ¡æ³¨å†Œç¤ºä¾‹>2.3 æœåŠ¡æ³¨å†Œç¤ºä¾‹</a></ul><li><a href=#3-æœåŠ¡ç½‘å…³>3. æœåŠ¡ç½‘å…³</a><ul><li><a href=#31-gatewayé…ç½®>3.1 Gatewayé…ç½®</a><li><a href=#32-è‡ªå®šä¹‰è¿‡æ»¤å™¨>3.2 è‡ªå®šä¹‰è¿‡æ»¤å™¨</a><li><a href=#33-é™æµé…ç½®>3.3 é™æµé…ç½®</a></ul><li><a href=#4-è´Ÿè½½å‡è¡¡>4. è´Ÿè½½å‡è¡¡</a><ul><li><a href=#41-ribboné…ç½®>4.1 Ribboné…ç½®</a><li><a href=#42-è´Ÿè½½å‡è¡¡ç­–ç•¥>4.2 è´Ÿè½½å‡è¡¡ç­–ç•¥</a><li><a href=#43-è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡>4.3 è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡</a></ul><li><a href=#5-ç†”æ–­é™çº§>5. ç†”æ–­é™çº§</a><ul><li><a href=#51-hystrixé…ç½®>5.1 Hystrixé…ç½®</a><li><a href=#52-sentinelé…ç½®>5.2 Sentinelé…ç½®</a></ul><li><a href=#6-é…ç½®ç®¡ç†>6. é…ç½®ç®¡ç†</a><ul><li><a href=#61-config-server>6.1 Config Server</a><li><a href=#62-config-client>6.2 Config Client</a><li><a href=#63-åŠ¨æ€åˆ·æ–°é…ç½®>6.3 åŠ¨æ€åˆ·æ–°é…ç½®</a></ul><li><a href=#7-åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª>7. åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª</a><ul><li><a href=#71-sleuthé…ç½®>7.1 Sleuthé…ç½®</a><li><a href=#72-zipkiné…ç½®>7.2 Zipkiné…ç½®</a></ul><li><a href=#8-é¢è¯•é¢˜ç²¾é€‰>8. é¢è¯•é¢˜ç²¾é€‰</a><ul><li><a href=#81-åŸºç¡€æ¦‚å¿µé¢˜>8.1 åŸºç¡€æ¦‚å¿µé¢˜</a><li><a href=#82-å®è·µé¢˜>8.2 å®è·µé¢˜</a><li><a href=#83-é«˜çº§é¢˜>8.3 é«˜çº§é¢˜</a></ul><li><a href=#9-spring-cloud-alibaba>9. Spring Cloud Alibaba</a><ul><li><a href=#91-nacosæœåŠ¡æ³¨å†Œä¸å‘ç°>9.1 NacosæœåŠ¡æ³¨å†Œä¸å‘ç°</a><li><a href=#92-sentinelæµé‡æ§åˆ¶>9.2 Sentinelæµé‡æ§åˆ¶</a><li><a href=#93-seataåˆ†å¸ƒå¼äº‹åŠ¡>9.3 Seataåˆ†å¸ƒå¼äº‹åŠ¡</a><li><a href=#94-rocketmqæ¶ˆæ¯é˜Ÿåˆ—>9.4 RocketMQæ¶ˆæ¯é˜Ÿåˆ—</a></ul><li><a href=#10-å¾®æœåŠ¡æ¶æ„è®¾è®¡æ¨¡å¼>10. å¾®æœåŠ¡æ¶æ„è®¾è®¡æ¨¡å¼</a><ul><li><a href=#101-æœåŠ¡æ‹†åˆ†æ¨¡å¼>10.1 æœåŠ¡æ‹†åˆ†æ¨¡å¼</a><li><a href=#102-æœåŠ¡é€šä¿¡æ¨¡å¼>10.2 æœåŠ¡é€šä¿¡æ¨¡å¼</a><li><a href=#103-æ•°æ®ä¸€è‡´æ€§æ¨¡å¼>10.3 æ•°æ®ä¸€è‡´æ€§æ¨¡å¼</a></ul><li><a href=#11-å¾®æœåŠ¡ç›‘æ§ä¸è¿ç»´>11. å¾®æœåŠ¡ç›‘æ§ä¸è¿ç»´</a><ul><li><a href=#111-ç›‘æ§ä½“ç³»>11.1 ç›‘æ§ä½“ç³»</a><li><a href=#112-æ—¥å¿—ç®¡ç†>11.2 æ—¥å¿—ç®¡ç†</a></ul><li><a href=#12-é¢è¯•é¢˜ç²¾é€‰å…¨é¢ç‰ˆ>12. é¢è¯•é¢˜ç²¾é€‰ï¼ˆå…¨é¢ç‰ˆï¼‰</a><ul><li><a href=#121-spring-cloudåŸºç¡€é¢˜>12.1 Spring CloudåŸºç¡€é¢˜</a><li><a href=#122-spring-cloud-alibabaé¢˜>12.2 Spring Cloud Alibabaé¢˜</a><li><a href=#123-åˆ†å¸ƒå¼ç³»ç»Ÿé¢˜>12.3 åˆ†å¸ƒå¼ç³»ç»Ÿé¢˜</a><li><a href=#124-é«˜çº§æ¶æ„é¢˜>12.4 é«˜çº§æ¶æ„é¢˜</a><li><a href=#125-å®æˆ˜åº”ç”¨é¢˜>12.5 å®æˆ˜åº”ç”¨é¢˜</a></ul></ul></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>æ ¸å¿ƒä»·å€¼</div><div class=admonitionContent_BuS1><p><strong>Spring Cloud = å¾®æœåŠ¡æ¶æ„ + æœåŠ¡æ²»ç† + é…ç½®ç®¡ç† + è´Ÿè½½å‡è¡¡ + ç†”æ–­é™çº§</strong><ul>
<li class="">ğŸ” <strong>æœåŠ¡æ²»ç†</strong>ï¼šæœåŠ¡æ³¨å†Œå‘ç°ã€APIç½‘å…³</li>
<li class="">âš–ï¸ <strong>è´Ÿè½½å‡è¡¡</strong>ï¼šæ™ºèƒ½è·¯ç”±ã€å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡</li>
<li class="">ğŸ›¡ï¸ <strong>ç†”æ–­é™çº§</strong>ï¼šæœåŠ¡å®¹é”™ã€å¤±è´¥éš”ç¦»</li>
<li class="">âš™ï¸ <strong>é…ç½®ç®¡ç†</strong>ï¼šé›†ä¸­é…ç½®ã€åŠ¨æ€åˆ·æ–°</li>
<li class="">ğŸ“Š <strong>é“¾è·¯è¿½è¸ª</strong>ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿç›‘æ§ã€è°ƒç”¨é“¾åˆ†æ</li>
</ul></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=1-spring-cloudåŸºç¡€æ¦‚å¿µ>1. Spring CloudåŸºç¡€æ¦‚å¿µ<a href=#1-spring-cloudåŸºç¡€æ¦‚å¿µ class=hash-link aria-label="Direct link to 1. Spring CloudåŸºç¡€æ¦‚å¿µ" title="Direct link to 1. Spring CloudåŸºç¡€æ¦‚å¿µ" translate=no>â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=11-ä»€ä¹ˆæ˜¯å¾®æœåŠ¡>1.1 ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ<a href=#11-ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ class=hash-link aria-label="Direct link to 1.1 ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ" title="Direct link to 1.1 ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ" translate=no>â€‹</a></h3>
<p>å¾®æœåŠ¡æ˜¯ä¸€ç§è½¯ä»¶æ¶æ„é£æ ¼ï¼Œå°†åº”ç”¨ç¨‹åºæ‹†åˆ†ä¸ºä¸€ç»„å°å‹ã€ç‹¬ç«‹çš„æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡è¿è¡Œåœ¨è‡ªå·±çš„è¿›ç¨‹ä¸­ï¼Œé€šè¿‡è½»é‡çº§æœºåˆ¶è¿›è¡Œé€šä¿¡ã€‚</p>
<!-- -->
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=å¾®æœåŠ¡æ¶æ„ç‰¹ç‚¹>å¾®æœåŠ¡æ¶æ„ç‰¹ç‚¹<a href=#å¾®æœåŠ¡æ¶æ„ç‰¹ç‚¹ class=hash-link aria-label="Direct link to å¾®æœåŠ¡æ¶æ„ç‰¹ç‚¹" title="Direct link to å¾®æœåŠ¡æ¶æ„ç‰¹ç‚¹" translate=no>â€‹</a></h4>
<div class=card><div class=card__body><table><thead><tr><th>ç‰¹ç‚¹<th>è¯´æ˜<th>ä¼˜åŠ¿<tbody><tr><td><strong>æœåŠ¡æ‹†åˆ†</strong><td>æŒ‰ä¸šåŠ¡åŠŸèƒ½æ‹†åˆ†æœåŠ¡<td>èŒè´£å•ä¸€ï¼Œæ˜“äºç»´æŠ¤<tr><td><strong>ç‹¬ç«‹éƒ¨ç½²</strong><td>æ¯ä¸ªæœåŠ¡å¯ç‹¬ç«‹éƒ¨ç½²<td>å¿«é€Ÿè¿­ä»£ï¼Œé™ä½é£é™©<tr><td><strong>æŠ€æœ¯å¼‚æ„</strong><td>ä¸åŒæœåŠ¡å¯ä½¿ç”¨ä¸åŒæŠ€æœ¯æ ˆ<td>æŠ€æœ¯é€‰å‹çµæ´»<tr><td><strong>æ•°æ®éš”ç¦»</strong><td>æ¯ä¸ªæœåŠ¡ç®¡ç†è‡ªå·±çš„æ•°æ®<td>æ•°æ®ä¸€è‡´æ€§å¯æ§<tr><td><strong>æ•…éšœéš”ç¦»</strong><td>å•ä¸ªæœåŠ¡æ•…éšœä¸å½±å“æ•´ä½“<td>æé«˜ç³»ç»Ÿå¯ç”¨æ€§</table></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=12-spring-cloudç»„ä»¶>1.2 Spring Cloudç»„ä»¶<a href=#12-spring-cloudç»„ä»¶ class=hash-link aria-label="Direct link to 1.2 Spring Cloudç»„ä»¶" title="Direct link to 1.2 Spring Cloudç»„ä»¶" translate=no>â€‹</a></h3>
<p>Spring Cloudæä¾›äº†ä¸€å¥—å®Œæ•´çš„å¾®æœåŠ¡è§£å†³æ–¹æ¡ˆï¼ŒåŒ…å«å¤šä¸ªç»„ä»¶å…±åŒæ„å»ºåˆ†å¸ƒå¼ç³»ç»Ÿã€‚</p>
<!-- -->
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>Spring Cloudä¾èµ–é…ç½®</summary><div><div class=collapsibleContent_i85q><div class="codeBlockContainer_X7hc language-xml"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Spring Cloudä¾èµ–</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 640 512" class=langIcon_gX7_><path fill=currentColor d="M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"/></svg><span>xml</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-xml codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">dependencyManagement</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">dependencies</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain">org.springframework.cloud</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain">spring-cloud-dependencies</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">version</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain">2021.0.8</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">version</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">type</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain">pom</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">type</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">scope</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain">import</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">scope</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">dependencies</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">dependencyManagement</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span></span></div></code></pre></div></div></div></div></details>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=2-æœåŠ¡æ³¨å†Œä¸å‘ç°>2. æœåŠ¡æ³¨å†Œä¸å‘ç°<a href=#2-æœåŠ¡æ³¨å†Œä¸å‘ç° class=hash-link aria-label="Direct link to 2. æœåŠ¡æ³¨å†Œä¸å‘ç°" title="Direct link to 2. æœåŠ¡æ³¨å†Œä¸å‘ç°" translate=no>â€‹</a></h2>
<p>æœåŠ¡æ³¨å†Œä¸å‘ç°æ˜¯å¾®æœåŠ¡æ¶æ„çš„åŸºç¡€è®¾æ–½ï¼Œç”¨äºç®¡ç†å’Œå®šä½æœåŠ¡å®ä¾‹ã€‚</p>
<!-- -->
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=21-eureka-server>2.1 Eureka Server<a href=#21-eureka-server class=hash-link aria-label="Direct link to 2.1 Eureka Server" title="Direct link to 2.1 Eureka Server" translate=no>â€‹</a></h3>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">Javaé…ç½®<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">YAMLé…ç½®<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">é›†ç¾¤é…ç½®</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Eureka Serveré…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@SpringBootApplication</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@EnableEurekaServer</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">EurekaServerApplication</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">SpringApplication</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">EurekaServerApplication</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class="codeBlockContainer_X7hc language-yaml"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Eureka Serveré…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M0 32l34.9 395.8L192 480l157.1-52.2L384 32H0zm313.1 80l-4.8 47.3L193 208.6l-.3.1h111.5l-12.8 146.6-98.2 28.7-98.8-29.2-6.4-73.9h48.9l3.2 38.3 52.6 13.3 54.7-15.4 3.7-61.6-166.3-.5v-.1l-.2.1-3.6-46.3L193.1 162l6.5-2.7H76.7L70.9 112h242.2z"/></svg><span>yaml</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-yaml codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token key atrule">server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">8761</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain" style=display:inline-block></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">application</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> eureka</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain" style=display:inline-block></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token key atrule">eureka</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">instance</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">hostname</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> localhost</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">client</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">register-with-eureka</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">fetch-registry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">service-url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">defaultZone</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//localhost</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">8761/eureka/</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>16</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>17</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">enable-self-preservation</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>18</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">eviction-interval-timer-in-ms</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1000</span></span></div></code></pre></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class="codeBlockContainer_X7hc language-yaml"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Eureka Serveré›†ç¾¤é…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M0 32l34.9 395.8L192 480l157.1-52.2L384 32H0zm313.1 80l-4.8 47.3L193 208.6l-.3.1h111.5l-12.8 146.6-98.2 28.7-98.8-29.2-6.4-73.9h48.9l3.2 38.3 52.6 13.3 54.7-15.4 3.7-61.6-166.3-.5v-.1l-.2.1-3.6-46.3L193.1 162l6.5-2.7H76.7L70.9 112h242.2z"/></svg><span>yaml</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-yaml codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token comment" style="color:rgb(98, 114, 164)"># eureka-server-1 é…ç½®</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token key atrule">server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">8761</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain" style=display:inline-block></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">application</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> eureka</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain" style=display:inline-block></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token key atrule">eureka</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">instance</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">hostname</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> eureka1</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">client</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">register-with-eureka</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">fetch-registry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">service-url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>16</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">defaultZone</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//eureka2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">8762/eureka/</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//eureka3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">8763/eureka/</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>17</span><span class=codeLineContent_HA3z><span class="token plain">      </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>18</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># eureka-server-2 é…ç½®</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>19</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token key atrule">server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>20</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">8762</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>21</span><span class=codeLineContent_HA3z><span class="token plain" style=display:inline-block></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>22</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>23</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">application</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>24</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> eureka</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>25</span><span class=codeLineContent_HA3z><span class="token plain" style=display:inline-block></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>26</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token key atrule">eureka</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>27</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">instance</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>28</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">hostname</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> eureka2</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>29</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">client</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>30</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">register-with-eureka</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>31</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">fetch-registry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>32</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">service-url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>33</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">defaultZone</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//eureka1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">8761/eureka/</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//eureka3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">8763/eureka/</span></span></div></code></pre></div></div></div></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=22-eureka-client>2.2 Eureka Client<a href=#22-eureka-client class=hash-link aria-label="Direct link to 2.2 Eureka Client" title="Direct link to 2.2 Eureka Client" translate=no>â€‹</a></h3>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">Javaé…ç½®<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">YAMLé…ç½®</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Eureka Clienté…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@SpringBootApplication</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@EnableEurekaClient</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">UserServiceApplication</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">SpringApplication</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">UserServiceApplication</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class="codeBlockContainer_X7hc language-yaml"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Eureka Clienté…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M0 32l34.9 395.8L192 480l157.1-52.2L384 32H0zm313.1 80l-4.8 47.3L193 208.6l-.3.1h111.5l-12.8 146.6-98.2 28.7-98.8-29.2-6.4-73.9h48.9l3.2 38.3 52.6 13.3 54.7-15.4 3.7-61.6-166.3-.5v-.1l-.2.1-3.6-46.3L193.1 162l6.5-2.7H76.7L70.9 112h242.2z"/></svg><span>yaml</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-yaml codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">application</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain" style=display:inline-block></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token key atrule">eureka</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">client</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">service-url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">defaultZone</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//localhost</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">8761/eureka/</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">register-with-eureka</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">fetch-registry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">instance</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">prefer-ip-address</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">instance-id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">spring.application.name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">$</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">server.port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">lease-renewal-interval-in-seconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">30</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">lease-expiration-duration-in-seconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">90</span></span></div></code></pre></div></div></div></div></div>
<div class=card><div class=card__header><h4>Eureka Clientæ ¸å¿ƒé…ç½®è¯´æ˜</h4></div><div class=card__body><table><thead><tr><th>é…ç½®é¡¹<th>è¯´æ˜<th>é»˜è®¤å€¼<th>æ¨èè®¾ç½®<tbody><tr><td><strong>register-with-eureka</strong><td>æ˜¯å¦æ³¨å†Œåˆ°Eureka<td>true<td>ç”Ÿäº§ç¯å¢ƒä¿æŒtrue<tr><td><strong>fetch-registry</strong><td>æ˜¯å¦ä»Eurekaè·å–æ³¨å†Œä¿¡æ¯<td>true<td>ç”Ÿäº§ç¯å¢ƒä¿æŒtrue<tr><td><strong>prefer-ip-address</strong><td>æ˜¯å¦ä½¿ç”¨IPåœ°å€æ³¨å†Œ<td>false<td>å»ºè®®è®¾ä¸ºtrue<tr><td><strong>lease-renewal-interval</strong><td>å¿ƒè·³é—´éš”æ—¶é—´(ç§’)<td>30<td>æ ¹æ®è´Ÿè½½è°ƒæ•´<tr><td><strong>lease-expiration-duration</strong><td>å¤±æ•ˆæ—¶é—´(ç§’)<td>90<td>é€šå¸¸ä¸ºå¿ƒè·³é—´éš”çš„3å€</table></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=23-æœåŠ¡æ³¨å†Œç¤ºä¾‹>2.3 æœåŠ¡æ³¨å†Œç¤ºä¾‹<a href=#23-æœåŠ¡æ³¨å†Œç¤ºä¾‹ class=hash-link aria-label="Direct link to 2.3 æœåŠ¡æ³¨å†Œç¤ºä¾‹" title="Direct link to 2.3 æœåŠ¡æ³¨å†Œç¤ºä¾‹" translate=no>â€‹</a></h3>
<div class=card><div class=card__body><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>æœåŠ¡æ³¨å†Œç¤ºä¾‹</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@RestController</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@RequestMapping</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"/users"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">UserController</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Autowired</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">private</span><span class="token plain"> </span><span class="token class-name">UserService</span><span class="token plain"> userService</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@GetMapping</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"/{id}"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">ResponseEntity</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token generics class-name">User</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getUser</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@PathVariable</span><span class="token plain"> </span><span class="token class-name">Long</span><span class="token plain"> id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">User</span><span class="token plain"> user </span><span class="token operator">=</span><span class="token plain"> userService</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">findById</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token class-name">ResponseEntity</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">ok</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@PostMapping</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">ResponseEntity</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token generics class-name">User</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">createUser</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@RequestBody</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>16</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">User</span><span class="token plain"> savedUser </span><span class="token operator">=</span><span class="token plain"> userService</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">save</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>17</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token class-name">ResponseEntity</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">CREATED</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">body</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">savedUser</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>18</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>19</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=3-æœåŠ¡ç½‘å…³>3. æœåŠ¡ç½‘å…³<a href=#3-æœåŠ¡ç½‘å…³ class=hash-link aria-label="Direct link to 3. æœåŠ¡ç½‘å…³" title="Direct link to 3. æœåŠ¡ç½‘å…³" translate=no>â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=31-gatewayé…ç½®>3.1 Gatewayé…ç½®<a href=#31-gatewayé…ç½® class=hash-link aria-label="Direct link to 3.1 Gatewayé…ç½®" title="Direct link to 3.1 Gatewayé…ç½®" translate=no>â€‹</a></h3>
<p>Spring Cloud Gatewayæ˜¯APIç½‘å…³æœåŠ¡ï¼Œæä¾›äº†è·¯ç”±ã€è¿‡æ»¤ã€é™æµç­‰åŠŸèƒ½ã€‚</p>
<!-- -->
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">Javaé…ç½®<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">YAMLé…ç½®</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Gatewayé…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@SpringBootApplication</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@EnableDiscoveryClient</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">GatewayApplication</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">SpringApplication</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">GatewayApplication</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class="codeBlockContainer_X7hc language-yaml"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Gatewayè·¯ç”±é…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M0 32l34.9 395.8L192 480l157.1-52.2L384 32H0zm313.1 80l-4.8 47.3L193 208.6l-.3.1h111.5l-12.8 146.6-98.2 28.7-98.8-29.2-6.4-73.9h48.9l3.2 38.3 52.6 13.3 54.7-15.4 3.7-61.6-166.3-.5v-.1l-.2.1-3.6-46.3L193.1 162l6.5-2.7H76.7L70.9 112h242.2z"/></svg><span>yaml</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-yaml codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">cloud</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">gateway</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">discovery</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">locator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">          </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">          </span><span class="token key atrule">lower-case-service-id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">routes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">          </span><span class="token key atrule">uri</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> lb</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">          </span><span class="token key atrule">predicates</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> Path=/api/users/</span><span class="token important">**</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">          </span><span class="token key atrule">filters</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> StripPrefix=1</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> RequestRateLimiter</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>16</span><span class=codeLineContent_HA3z><span class="token plain">              </span><span class="token key atrule">args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>17</span><span class=codeLineContent_HA3z><span class="token plain">                </span><span class="token key atrule">redis-rate-limiter.replenishRate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>18</span><span class=codeLineContent_HA3z><span class="token plain">                </span><span class="token key atrule">redis-rate-limiter.burstCapacity</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">20</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>19</span><span class=codeLineContent_HA3z><span class="token plain">        </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>20</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>21</span><span class=codeLineContent_HA3z><span class="token plain">          </span><span class="token key atrule">uri</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> lb</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>22</span><span class=codeLineContent_HA3z><span class="token plain">          </span><span class="token key atrule">predicates</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>23</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> Path=/api/orders/</span><span class="token important">**</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>24</span><span class=codeLineContent_HA3z><span class="token plain">          </span><span class="token key atrule">filters</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>25</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> StripPrefix=1</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>26</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> CircuitBreaker</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>27</span><span class=codeLineContent_HA3z><span class="token plain">              </span><span class="token key atrule">args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>28</span><span class=codeLineContent_HA3z><span class="token plain">                </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> orderCircuitBreaker</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>29</span><span class=codeLineContent_HA3z><span class="token plain">                </span><span class="token key atrule">fallbackUri</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> forward</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">/fallback/order</span></span></div></code></pre></div></div></div></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=32-è‡ªå®šä¹‰è¿‡æ»¤å™¨>3.2 è‡ªå®šä¹‰è¿‡æ»¤å™¨<a href=#32-è‡ªå®šä¹‰è¿‡æ»¤å™¨ class=hash-link aria-label="Direct link to 3.2 è‡ªå®šä¹‰è¿‡æ»¤å™¨" title="Direct link to 3.2 è‡ªå®šä¹‰è¿‡æ»¤å™¨" translate=no>â€‹</a></h3>
<div class=card><div class=card__body><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>è‡ªå®šä¹‰è¿‡æ»¤å™¨</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Component</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">AuthFilter</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">implements</span><span class="token plain"> </span><span class="token class-name">GlobalFilter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">Ordered</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Override</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">Mono</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token generics class-name">Void</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">filter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">ServerWebExchange</span><span class="token plain"> exchange</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">GatewayFilterChain</span><span class="token plain"> chain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">ServerHttpRequest</span><span class="token plain"> request </span><span class="token operator">=</span><span class="token plain"> exchange</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getRequest</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">String</span><span class="token plain"> token </span><span class="token operator">=</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getHeaders</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getFirst</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"Authorization"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">        </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">token </span><span class="token operator">==</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token operator">!</span><span class="token function" style="color:rgb(80, 250, 123)">isValidToken</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token class-name">ServerHttpResponse</span><span class="token plain"> response </span><span class="token operator">=</span><span class="token plain"> exchange</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getResponse</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">            response</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setStatusCode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">UNAUTHORIZED</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setComplete</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">        </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> chain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">filter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">exchange</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>16</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>17</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>18</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Override</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>19</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getOrder</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>20</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>21</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>22</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>23</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">boolean</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">isValidToken</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">String</span><span class="token plain"> token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>24</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// éªŒè¯tokené€»è¾‘</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>25</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> token </span><span class="token operator">!=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token plain"> </span><span class="token operator">&&</span><span class="token plain"> token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">startsWith</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"Bearer "</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>26</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>27</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=33-é™æµé…ç½®>3.3 é™æµé…ç½®<a href=#33-é™æµé…ç½® class=hash-link aria-label="Direct link to 3.3 é™æµé…ç½®" title="Direct link to 3.3 é™æµé…ç½®" translate=no>â€‹</a></h3>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">ä»£ç é…ç½®<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">Redisé™æµå™¨</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>é™æµé…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Configuration</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">RateLimiterConfig</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Bean</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">KeyResolver</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">userKeyResolver</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> exchange </span><span class="token operator">-></span><span class="token plain"> </span><span class="token class-name">Mono</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">just</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">            exchange</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getRequest</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getHeaders</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getFirst</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"X-User-Id"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Bean</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">KeyResolver</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ipKeyResolver</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> exchange </span><span class="token operator">-></span><span class="token plain"> </span><span class="token class-name">Mono</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">just</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">            exchange</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getRequest</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getRemoteAddress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getAddress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getHostAddress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>16</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>17</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class="codeBlockContainer_X7hc language-yaml"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Redisé™æµé…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M0 32l34.9 395.8L192 480l157.1-52.2L384 32H0zm313.1 80l-4.8 47.3L193 208.6l-.3.1h111.5l-12.8 146.6-98.2 28.7-98.8-29.2-6.4-73.9h48.9l3.2 38.3 52.6 13.3 54.7-15.4 3.7-61.6-166.3-.5v-.1l-.2.1-3.6-46.3L193.1 162l6.5-2.7H76.7L70.9 112h242.2z"/></svg><span>yaml</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-yaml codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">cloud</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">gateway</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">routes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">          </span><span class="token key atrule">uri</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> lb</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">          </span><span class="token key atrule">predicates</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> Path=/api/users/</span><span class="token important">**</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">          </span><span class="token key atrule">filters</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> RequestRateLimiter</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">              </span><span class="token key atrule">args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">                </span><span class="token key atrule">redis-rate-limiter.replenishRate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># ä»¤ç‰Œæ¡¶æ¯ç§’å¡«å……é€Ÿç‡</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">                </span><span class="token key atrule">redis-rate-limiter.burstCapacity</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">20</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># ä»¤ç‰Œæ¡¶æ€»å®¹é‡</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">                </span><span class="token key atrule">key-resolver</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"#{@ipKeyResolver}"</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)"># é™æµé”®è§£æå™¨</span></span></div></code></pre></div></div></div></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=4-è´Ÿè½½å‡è¡¡>4. è´Ÿè½½å‡è¡¡<a href=#4-è´Ÿè½½å‡è¡¡ class=hash-link aria-label="Direct link to 4. è´Ÿè½½å‡è¡¡" title="Direct link to 4. è´Ÿè½½å‡è¡¡" translate=no>â€‹</a></h2>
<p>Spring Cloudæä¾›äº†å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡åŠŸèƒ½ï¼Œä¸»è¦é€šè¿‡Ribbonå’ŒLoadBalancerç»„ä»¶å®ç°ã€‚</p>
<!-- -->
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=41-ribboné…ç½®>4.1 Ribboné…ç½®<a href=#41-ribboné…ç½® class=hash-link aria-label="Direct link to 4.1 Ribboné…ç½®" title="Direct link to 4.1 Ribboné…ç½®" translate=no>â€‹</a></h3>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">åŸºç¡€é…ç½®<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">YAMLé…ç½®</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Ribboné…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Configuration</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">RibbonConfig</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Bean</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@LoadBalanced</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">RestTemplate</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">restTemplate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">RestTemplate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Bean</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">IRule</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ribbonRule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">RoundRobinRule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// è½®è¯¢ç­–ç•¥</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Bean</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>16</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">IPing</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ribbonPing</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>17</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">PingUrl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>18</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>19</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class="codeBlockContainer_X7hc language-yaml"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Ribboné…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M0 32l34.9 395.8L192 480l157.1-52.2L384 32H0zm313.1 80l-4.8 47.3L193 208.6l-.3.1h111.5l-12.8 146.6-98.2 28.7-98.8-29.2-6.4-73.9h48.9l3.2 38.3 52.6 13.3 54.7-15.4 3.7-61.6-166.3-.5v-.1l-.2.1-3.6-46.3L193.1 162l6.5-2.7H76.7L70.9 112h242.2z"/></svg><span>yaml</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-yaml codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token key atrule">ribbon</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">ReadTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">5000</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">ConnectTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">2000</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">MaxAutoRetries</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">MaxAutoRetriesNextServer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># ç‰¹å®šæœåŠ¡çš„é…ç½®</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">user-service</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">ReadTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">10000</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">ConnectTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">5000</span></span></div></code></pre></div></div></div></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=42-è´Ÿè½½å‡è¡¡ç­–ç•¥>4.2 è´Ÿè½½å‡è¡¡ç­–ç•¥<a href=#42-è´Ÿè½½å‡è¡¡ç­–ç•¥ class=hash-link aria-label="Direct link to 4.2 è´Ÿè½½å‡è¡¡ç­–ç•¥" title="Direct link to 4.2 è´Ÿè½½å‡è¡¡ç­–ç•¥" translate=no>â€‹</a></h3>
<!-- -->
<div class=card><div class=card__body><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>è´Ÿè½½å‡è¡¡ç­–ç•¥</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Service</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">UserService</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Autowired</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@LoadBalanced</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">private</span><span class="token plain"> </span><span class="token class-name">RestTemplate</span><span class="token plain"> restTemplate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getUserById</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">Long</span><span class="token plain"> id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// ä½¿ç”¨æœåŠ¡åè¿›è¡Œè´Ÿè½½å‡è¡¡è°ƒç”¨</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> restTemplate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getForObject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">"http://user-service/users/"</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token class-name">User</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>16</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token generics class-name">User</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getAllUsers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>17</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> restTemplate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getForObject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>18</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">"http://user-service/users"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>19</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token class-name">List</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>20</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>21</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>22</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=43-è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡>4.3 è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡<a href=#43-è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡ class=hash-link aria-label="Direct link to 4.3 è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡" title="Direct link to 4.3 è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡" translate=no>â€‹</a></h3>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">è‡ªå®šä¹‰è§„åˆ™<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">é…ç½®è‡ªå®šä¹‰è§„åˆ™</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Component</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">CustomLoadBalancerRule</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">extends</span><span class="token plain"> </span><span class="token class-name">AbstractLoadBalancerRule</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Override</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">Server</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">choose</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">Object</span><span class="token plain"> key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">ILoadBalancer</span><span class="token plain"> lb </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getLoadBalancer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">        </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token generics class-name">Server</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"> reachableServers </span><span class="token operator">=</span><span class="token plain"> lb</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getReachableServers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token generics class-name">Server</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"> allServers </span><span class="token operator">=</span><span class="token plain"> lb</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getAllServers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">        </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">reachableServers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">isEmpty</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">        </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡é€»è¾‘</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>16</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> reachableServers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Random</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">nextInt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">reachableServers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">size</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>17</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>18</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>19</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Override</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>20</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">initWithNiwsConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">IClientConfig</span><span class="token plain"> clientConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>21</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// åˆå§‹åŒ–é…ç½®</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>22</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>23</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>é…ç½®è‡ªå®šä¹‰è§„åˆ™</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Configuration</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">RibbonClientConfig</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Bean</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">IRule</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ribbonRule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">CustomLoadBalancerRule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain" style=display:inline-block></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// é’ˆå¯¹ç‰¹å®šæœåŠ¡çš„é…ç½®</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Configuration</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@RibbonClient</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">name </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"user-service"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> configuration </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">UserServiceRibbonConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">UserServiceRibbonConfig</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Bean</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>16</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">IRule</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ribbonRule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>17</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">WeightedResponseTimeRule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>18</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>19</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>20</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Bean</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>21</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">IPing</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ribbonPing</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>22</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">PingUrl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>23</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>24</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div></div></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=5-ç†”æ–­é™çº§>5. ç†”æ–­é™çº§<a href=#5-ç†”æ–­é™çº§ class=hash-link aria-label="Direct link to 5. ç†”æ–­é™çº§" title="Direct link to 5. ç†”æ–­é™çº§" translate=no>â€‹</a></h2>
<p>ç†”æ–­å™¨è®¾è®¡æ¨¡å¼ç”¨äºä¿æŠ¤ç³»ç»Ÿå…å—çº§è”æ•…éšœå½±å“ï¼Œå½“æœåŠ¡è°ƒç”¨å¤±è´¥è¾¾åˆ°é˜ˆå€¼æ—¶ï¼Œè§¦å‘ç†”æ–­ï¼Œå¹¶æä¾›åå¤‡å“åº”ã€‚</p>
<!-- -->
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=51-hystrixé…ç½®>5.1 Hystrixé…ç½®<a href=#51-hystrixé…ç½® class=hash-link aria-label="Direct link to 5.1 Hystrixé…ç½®" title="Direct link to 5.1 Hystrixé…ç½®" translate=no>â€‹</a></h3>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">åº”ç”¨é…ç½®<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">æœåŠ¡é…ç½®<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">å…³é”®å±æ€§</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Hystrixé…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@SpringBootApplication</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@EnableCircuitBreaker</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">UserServiceApplication</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">SpringApplication</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">UserServiceApplication</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Hystrixä½¿ç”¨ç¤ºä¾‹</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Service</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">UserService</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Autowired</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">private</span><span class="token plain"> </span><span class="token class-name">RestTemplate</span><span class="token plain"> restTemplate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@HystrixCommand</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">        fallbackMethod </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"getUserFallback"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">        commandProperties </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@HystrixProperty</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">name </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"execution.isolation.thread.timeoutInMilliseconds"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> value </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"2000"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@HystrixProperty</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">name </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"circuitBreaker.requestVolumeThreshold"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> value </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"10"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@HystrixProperty</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">name </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"circuitBreaker.errorThresholdPercentage"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> value </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"50"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@HystrixProperty</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">name </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"circuitBreaker.sleepWindowInMilliseconds"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> value </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"5000"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>16</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getUserById</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">Long</span><span class="token plain"> id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>17</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> restTemplate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getForObject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>18</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">"http://user-service/users/"</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>19</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token class-name">User</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>20</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>21</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>22</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>23</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getUserFallback</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">Long</span><span class="token plain"> id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">Throwable</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>24</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// é™çº§é€»è¾‘</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>25</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">User</span><span class="token plain"> fallbackUser </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>26</span><span class=codeLineContent_HA3z><span class="token plain">        fallbackUser</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>27</span><span class=codeLineContent_HA3z><span class="token plain">        fallbackUser</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"é»˜è®¤ç”¨æˆ·"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>28</span><span class=codeLineContent_HA3z><span class="token plain">        fallbackUser</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setEmail</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"default@example.com"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>29</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> fallbackUser</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>30</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>31</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class=card><div class=card__header><h4>Hystrixå…³é”®å±æ€§</h4></div><div class=card__body><table><thead><tr><th>å±æ€§<th>è¯´æ˜<th>é»˜è®¤å€¼<th>æ¨èå€¼<tbody><tr><td><strong>execution.isolation.thread.timeoutInMilliseconds</strong><td>æ‰§è¡Œè¶…æ—¶æ—¶é—´<td>1000ms<td>æ ¹æ®æ¥å£è°ƒæ•´<tr><td><strong>circuitBreaker.requestVolumeThreshold</strong><td>ç†”æ–­è§¦å‘æœ€å°è¯·æ±‚æ•°<td>20<td>ç”Ÿäº§ç¯å¢ƒè°ƒå¤§<tr><td><strong>circuitBreaker.errorThresholdPercentage</strong><td>é”™è¯¯ç‡é˜ˆå€¼<td>50%<td>æ ¹æ®å®¹é”™ç‡è°ƒæ•´<tr><td><strong>circuitBreaker.sleepWindowInMilliseconds</strong><td>ç†”æ–­æ¢å¤æ—¶é—´çª—å£<td>5000ms<td>æ ¹æ®æœåŠ¡æ¢å¤æ—¶é—´è°ƒæ•´</table></div></div></div></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=52-sentinelé…ç½®>5.2 Sentinelé…ç½®<a href=#52-sentinelé…ç½® class=hash-link aria-label="Direct link to 5.2 Sentinelé…ç½®" title="Direct link to 5.2 Sentinelé…ç½®" translate=no>â€‹</a></h3>
<p>Sentinelæ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„æµé‡æ§åˆ¶ç»„ä»¶ï¼Œæä¾›äº†ç†”æ–­é™çº§ã€ç³»ç»Ÿè´Ÿè½½ä¿æŠ¤ã€å®æ—¶ç›‘æ§ç­‰åŠŸèƒ½ã€‚</p>
<!-- -->
<div class=card><div class=card__body><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Sentinelé…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Configuration</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">SentinelConfig</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@PostConstruct</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">init</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// é…ç½®é™æµè§„åˆ™</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token generics class-name">FlowRule</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"> rules </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">ArrayList</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">FlowRule</span><span class="token plain"> rule </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">FlowRule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">        rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setResource</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"getUser"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">        rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setGrade</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">RuleConstant</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">FLOW_GRADE_QPS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">        rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">        rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">FlowRuleManager</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">loadRules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div></div></div>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">æœåŠ¡ä½¿ç”¨<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">è§„åˆ™é…ç½®</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Sentinelä½¿ç”¨ç¤ºä¾‹</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Service</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">UserService</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@SentinelResource</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">        value </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"getUser"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">        blockHandler </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"getUserBlockHandler"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">        fallback </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"getUserFallback"</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getUserById</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">Long</span><span class="token plain"> id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> userRepository</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">findById</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">orElse</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getUserBlockHandler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">Long</span><span class="token plain"> id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">BlockException</span><span class="token plain"> ex</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// é™æµå¤„ç†</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>16</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>17</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>18</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getUserFallback</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">Long</span><span class="token plain"> id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">Throwable</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>19</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// é™çº§å¤„ç†</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>20</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>21</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>22</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Sentinelè§„åˆ™é…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token comment" style="color:rgb(98, 114, 164)">// æµæ§è§„åˆ™</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">initFlowRules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token generics class-name">FlowRule</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"> rules </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">ArrayList</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token class-name">FlowRule</span><span class="token plain"> rule </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">FlowRule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">    rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setResource</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"getUser"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">    rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setGrade</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">RuleConstant</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">FLOW_GRADE_QPS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// QPSæ¨¡å¼</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">    rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">20</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ¯ç§’å…è®¸20æ¬¡è°ƒç”¨</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// æµæ§æ•ˆæœ</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">    rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setControlBehavior</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">RuleConstant</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">CONTROL_BEHAVIOR_WARM_UP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// é¢„çƒ­æ–¹å¼</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">    rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setWarmUpPeriodSec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// é¢„çƒ­æ—¶é—´10ç§’</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">    rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token class-name">FlowRuleManager</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">loadRules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>16</span><span class=codeLineContent_HA3z><span class="token plain" style=display:inline-block></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>17</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// é™çº§è§„åˆ™</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>18</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">initDegradeRules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>19</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token generics class-name">DegradeRule</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"> rules </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">ArrayList</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>20</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token class-name">DegradeRule</span><span class="token plain"> rule </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">DegradeRule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>21</span><span class=codeLineContent_HA3z><span class="token plain">    rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setResource</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"getUser"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>22</span><span class=codeLineContent_HA3z><span class="token plain">    rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setGrade</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">RuleConstant</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">DEGRADE_GRADE_EXCEPTION_RATIO</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// å¼‚å¸¸æ¯”ä¾‹</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>23</span><span class=codeLineContent_HA3z><span class="token plain">    rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// å¼‚å¸¸æ¯”ä¾‹é˜ˆå€¼50%</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>24</span><span class=codeLineContent_HA3z><span class="token plain">    rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setTimeWindow</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// ç†”æ–­æ—¶é—´10ç§’</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>25</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>26</span><span class=codeLineContent_HA3z><span class="token plain">    rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>27</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token class-name">DegradeRuleManager</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">loadRules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>28</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div></div></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=6-é…ç½®ç®¡ç†>6. é…ç½®ç®¡ç†<a href=#6-é…ç½®ç®¡ç† class=hash-link aria-label="Direct link to 6. é…ç½®ç®¡ç†" title="Direct link to 6. é…ç½®ç®¡ç†" translate=no>â€‹</a></h2>
<p>Spring Cloud Configæä¾›äº†é›†ä¸­åŒ–çš„é…ç½®ç®¡ç†ï¼Œæ”¯æŒåŠ¨æ€åˆ·æ–°å’Œç‰ˆæœ¬ç®¡ç†ã€‚</p>
<!-- -->
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=61-config-server>6.1 Config Server<a href=#61-config-server class=hash-link aria-label="Direct link to 6.1 Config Server" title="Direct link to 6.1 Config Server" translate=no>â€‹</a></h3>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">æœåŠ¡é…ç½®<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">YAMLé…ç½®<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">æœ¬åœ°é…ç½®</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Config Serveré…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@SpringBootApplication</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@EnableConfigServer</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">ConfigServerApplication</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">SpringApplication</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">ConfigServerApplication</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class="codeBlockContainer_X7hc language-yaml"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Config Serveré…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M0 32l34.9 395.8L192 480l157.1-52.2L384 32H0zm313.1 80l-4.8 47.3L193 208.6l-.3.1h111.5l-12.8 146.6-98.2 28.7-98.8-29.2-6.4-73.9h48.9l3.2 38.3 52.6 13.3 54.7-15.4 3.7-61.6-166.3-.5v-.1l-.2.1-3.6-46.3L193.1 162l6.5-2.7H76.7L70.9 112h242.2z"/></svg><span>yaml</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-yaml codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token key atrule">server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">8888</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain" style=display:inline-block></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">application</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">cloud</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">git</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">          </span><span class="token key atrule">uri</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//github.com/example/config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">repo</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">          </span><span class="token key atrule">default-label</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> main</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">          </span><span class="token key atrule">search-paths</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> config</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">          </span><span class="token key atrule">username</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">GIT_USERNAME</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain">          </span><span class="token key atrule">password</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">GIT_PASSWORD</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class="codeBlockContainer_X7hc language-yaml"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>æœ¬åœ°é…ç½®æ¨¡å¼</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M0 32l34.9 395.8L192 480l157.1-52.2L384 32H0zm313.1 80l-4.8 47.3L193 208.6l-.3.1h111.5l-12.8 146.6-98.2 28.7-98.8-29.2-6.4-73.9h48.9l3.2 38.3 52.6 13.3 54.7-15.4 3.7-61.6-166.3-.5v-.1l-.2.1-3.6-46.3L193.1 162l6.5-2.7H76.7L70.9 112h242.2z"/></svg><span>yaml</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-yaml codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">cloud</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">native</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">          </span><span class="token key atrule">search-locations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> classpath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">/config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">file</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">./config</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">profiles</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">active</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> native</span></span></div></code></pre></div></div></div></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=62-config-client>6.2 Config Client<a href=#62-config-client class=hash-link aria-label="Direct link to 6.2 Config Client" title="Direct link to 6.2 Config Client" translate=no>â€‹</a></h3>
<div class=card><div class=card__body><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Config Clienté…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@SpringBootApplication</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@EnableDiscoveryClient</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@RefreshScope</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">UserServiceApplication</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">SpringApplication</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">UserServiceApplication</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div></div></div>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">YAMLé…ç½®<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">Bootstrapé…ç½®<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">é…ç½®ä½¿ç”¨</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class="codeBlockContainer_X7hc language-yaml"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Config Clienté…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M0 32l34.9 395.8L192 480l157.1-52.2L384 32H0zm313.1 80l-4.8 47.3L193 208.6l-.3.1h111.5l-12.8 146.6-98.2 28.7-98.8-29.2-6.4-73.9h48.9l3.2 38.3 52.6 13.3 54.7-15.4 3.7-61.6-166.3-.5v-.1l-.2.1-3.6-46.3L193.1 162l6.5-2.7H76.7L70.9 112h242.2z"/></svg><span>yaml</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-yaml codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">application</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">cloud</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">uri</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//localhost</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">8888</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">fail-fast</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">retry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">initial-interval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1000</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">max-interval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">2000</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">max-attempts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">6</span></span></div></code></pre></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class="codeBlockContainer_X7hc language-yaml"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>bootstrap.yml</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M0 32l34.9 395.8L192 480l157.1-52.2L384 32H0zm313.1 80l-4.8 47.3L193 208.6l-.3.1h111.5l-12.8 146.6-98.2 28.7-98.8-29.2-6.4-73.9h48.9l3.2 38.3 52.6 13.3 54.7-15.4 3.7-61.6-166.3-.5v-.1l-.2.1-3.6-46.3L193.1 162l6.5-2.7H76.7L70.9 112h242.2z"/></svg><span>yaml</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-yaml codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">application</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">cloud</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">uri</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//localhost</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">8888</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">fail-fast</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">profiles</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">active</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> dev</span></span></div></code></pre></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>é…ç½®ä½¿ç”¨ç¤ºä¾‹</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@RestController</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@RefreshScope</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">ConfigController</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"${app.feature.enabled:false}"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">boolean</span><span class="token plain"> featureEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"${app.max.users:100}"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token plain"> maxUsers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@GetMapping</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"/config"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">Map</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token generics"> </span><span class="token generics class-name">Object</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">Map</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token generics"> </span><span class="token generics class-name">Object</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"> config </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">HashMap</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">        config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">put</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"featureEnabled"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> featureEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain">        config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">put</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"maxUsers"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> maxUsers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>16</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>17</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>18</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div></div></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=63-åŠ¨æ€åˆ·æ–°é…ç½®>6.3 åŠ¨æ€åˆ·æ–°é…ç½®<a href=#63-åŠ¨æ€åˆ·æ–°é…ç½® class=hash-link aria-label="Direct link to 6.3 åŠ¨æ€åˆ·æ–°é…ç½®" title="Direct link to 6.3 åŠ¨æ€åˆ·æ–°é…ç½®" translate=no>â€‹</a></h3>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">æ‰‹åŠ¨åˆ·æ–°<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">æ¶ˆæ¯æ€»çº¿è‡ªåŠ¨åˆ·æ–°</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class="codeBlockContainer_X7hc language-shell"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 640 512" class=langIcon_gX7_><path fill=currentColor d="M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"/></svg><span>shell</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-shell codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token comment" style="color:rgb(98, 114, 164)"># å•ä¸ªæœåŠ¡æ‰‹åŠ¨åˆ·æ–°</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-X</span><span class="token plain"> POST http://localhost:8080/actuator/refresh</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain" style=display:inline-block></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># æ·»åŠ actuatorä¾èµ–å’Œé…ç½®</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># pom.xml</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token operator">&lt;</span><span class="token plain">dependency</span><span class="token operator">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token operator">&lt;</span><span class="token plain">groupId</span><span class="token operator">></span><span class="token plain">org.springframework.boot</span><span class="token operator">&lt;</span><span class="token plain">/groupId</span><span class="token operator">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token operator">&lt;</span><span class="token plain">artifactId</span><span class="token operator">></span><span class="token plain">spring-boot-starter-actuator</span><span class="token operator">&lt;</span><span class="token plain">/artifactId</span><span class="token operator">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token operator">&lt;</span><span class="token plain">/dependency</span><span class="token operator">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain" style=display:inline-block></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># application.yml</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">management:</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">  endpoints:</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">    web:</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain">      exposure:</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>16</span><span class=codeLineContent_HA3z><span class="token plain">        include: refresh,health,info</span></span></div></code></pre></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class="codeBlockContainer_X7hc language-yaml"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M0 32l34.9 395.8L192 480l157.1-52.2L384 32H0zm313.1 80l-4.8 47.3L193 208.6l-.3.1h111.5l-12.8 146.6-98.2 28.7-98.8-29.2-6.4-73.9h48.9l3.2 38.3 52.6 13.3 54.7-15.4 3.7-61.6-166.3-.5v-.1l-.2.1-3.6-46.3L193.1 162l6.5-2.7H76.7L70.9 112h242.2z"/></svg><span>yaml</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-yaml codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token comment" style="color:rgb(98, 114, 164)"># æ·»åŠ ä¾èµ–</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># pom.xml</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">&lt;dependency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">    &lt;groupId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain">org.springframework.cloud&lt;/groupId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">    &lt;artifactId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain">spring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">cloud</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">starter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">bus</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">amqp&lt;/artifactId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">&lt;/dependency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain" style=display:inline-block></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># application.yml</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">rabbitmq</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">host</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> localhost</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">5672</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">username</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> guest</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">password</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> guest</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">cloud</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>16</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">bus</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>17</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>18</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">trace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>19</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>20</span><span class=codeLineContent_HA3z><span class="token plain">        </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>21</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># åˆ·æ–°æ‰€æœ‰æœåŠ¡é…ç½®</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>22</span><span class=codeLineContent_HA3z><span class="token plain">curl </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">X POST http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//localhost</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">8888/actuator/busrefresh</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>23</span><span class=codeLineContent_HA3z><span class="token plain" style=display:inline-block></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>24</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># åˆ·æ–°æŒ‡å®šæœåŠ¡é…ç½®</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>25</span><span class=codeLineContent_HA3z><span class="token plain">curl </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">X POST http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//localhost</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">8888/actuator/busrefresh/user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">8080</span></span></div></code></pre></div></div></div></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=7-åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª>7. åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª<a href=#7-åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª class=hash-link aria-label="Direct link to 7. åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª" title="Direct link to 7. åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª" translate=no>â€‹</a></h2>
<p>åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªç”¨äºè·Ÿè¸ªå’Œå¯è§†åŒ–å¾®æœåŠ¡è°ƒç”¨é“¾è·¯ï¼Œå¸®åŠ©å¼€å‘äººå‘˜ç†è§£ç³»ç»Ÿè¡Œä¸ºå’Œæ’æŸ¥é—®é¢˜ã€‚</p>
<!-- -->
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=71-sleuthé…ç½®>7.1 Sleuthé…ç½®<a href=#71-sleuthé…ç½® class=hash-link aria-label="Direct link to 7.1 Sleuthé…ç½®" title="Direct link to 7.1 Sleuthé…ç½®" translate=no>â€‹</a></h3>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">ä¾èµ–é…ç½®<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">YAMLé…ç½®<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">ä½¿ç”¨ç¤ºä¾‹</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class="codeBlockContainer_X7hc language-xml"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Sleuthä¾èµ–</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 640 512" class=langIcon_gX7_><path fill=currentColor d="M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"/></svg><span>xml</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-xml codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain">org.springframework.cloud</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain">spring-cloud-starter-sleuth</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span></span></div></code></pre></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class="codeBlockContainer_X7hc language-yaml"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Sleuthé…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M0 32l34.9 395.8L192 480l157.1-52.2L384 32H0zm313.1 80l-4.8 47.3L193 208.6l-.3.1h111.5l-12.8 146.6-98.2 28.7-98.8-29.2-6.4-73.9h48.9l3.2 38.3 52.6 13.3 54.7-15.4 3.7-61.6-166.3-.5v-.1l-.2.1-3.6-46.3L193.1 162l6.5-2.7H76.7L70.9 112h242.2z"/></svg><span>yaml</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-yaml codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">sleuth</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">sampler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">probability</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1.0</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">web</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">client</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">messaging</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span></span></div></code></pre></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Sleuthä½¿ç”¨ç¤ºä¾‹</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Service</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">UserService</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">final</span><span class="token plain"> </span><span class="token class-name">Logger</span><span class="token plain"> logger </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">LoggerFactory</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getLogger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">UserService</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Autowired</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">private</span><span class="token plain"> </span><span class="token class-name">RestTemplate</span><span class="token plain"> restTemplate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getUserById</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">Long</span><span class="token plain"> id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">        logger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"å¼€å§‹è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œç”¨æˆ·ID: {}"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">        </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">User</span><span class="token plain"> user </span><span class="token operator">=</span><span class="token plain"> restTemplate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getForObject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">"http://user-service/users/"</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token class-name">User</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>16</span><span class=codeLineContent_HA3z><span class="token plain">        </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>17</span><span class=codeLineContent_HA3z><span class="token plain">        logger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"è·å–ç”¨æˆ·ä¿¡æ¯æˆåŠŸï¼Œç”¨æˆ·: {}"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>18</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>19</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>20</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div></div></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=72-zipkiné…ç½®>7.2 Zipkiné…ç½®<a href=#72-zipkiné…ç½® class=hash-link aria-label="Direct link to 7.2 Zipkiné…ç½®" title="Direct link to 7.2 Zipkiné…ç½®" translate=no>â€‹</a></h3>
<div class=card><div class=card__body><div class="codeBlockContainer_X7hc language-yaml"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Zipkiné…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M0 32l34.9 395.8L192 480l157.1-52.2L384 32H0zm313.1 80l-4.8 47.3L193 208.6l-.3.1h111.5l-12.8 146.6-98.2 28.7-98.8-29.2-6.4-73.9h48.9l3.2 38.3 52.6 13.3 54.7-15.4 3.7-61.6-166.3-.5v-.1l-.2.1-3.6-46.3L193.1 162l6.5-2.7H76.7L70.9 112h242.2z"/></svg><span>yaml</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-yaml codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">application</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> zipkin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">sleuth</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">zipkin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">base-url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//localhost</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">9411</span></span></div></code></pre></div></div></div></div>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">Zipkinä¾èµ–<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">ZipkinæœåŠ¡å™¨</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class="codeBlockContainer_X7hc language-xml"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 640 512" class=langIcon_gX7_><path fill=currentColor d="M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"/></svg><span>xml</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-xml codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token comment" style="color:rgb(98, 114, 164)">&lt;!-- Zipkinä¾èµ– --></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain">org.springframework.cloud</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain">spring-cloud-starter-zipkin</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span></span></div></code></pre></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>ZipkinæœåŠ¡å™¨å¯åŠ¨</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token comment" style="color:rgb(98, 114, 164)">// ç°ä»£ç‰ˆæœ¬æ¨èä½¿ç”¨Dockeræ–¹å¼å¯åŠ¨ZipkinæœåŠ¡å™¨</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// docker run -d -p 9411:9411 openzipkin/zipkin</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain" style=display:inline-block></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// æˆ–è€…ä½¿ç”¨Javaå‘½ä»¤</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// java -jar zipkin-server.jar</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain" style=display:inline-block></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Spring Boot 2.0åä¸å†æ¨èè‡ªå»ºZipkinæœåŠ¡å™¨</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@SpringBootApplication</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@EnableZipkinServer</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// å·²å¼ƒç”¨</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">ZipkinServerApplication</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">SpringApplication</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">ZipkinServerApplication</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div></div></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=8-é¢è¯•é¢˜ç²¾é€‰>8. é¢è¯•é¢˜ç²¾é€‰<a href=#8-é¢è¯•é¢˜ç²¾é€‰ class=hash-link aria-label="Direct link to 8. é¢è¯•é¢˜ç²¾é€‰" title="Direct link to 8. é¢è¯•é¢˜ç²¾é€‰" translate=no>â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=81-åŸºç¡€æ¦‚å¿µé¢˜>8.1 åŸºç¡€æ¦‚å¿µé¢˜<a href=#81-åŸºç¡€æ¦‚å¿µé¢˜ class=hash-link aria-label="Direct link to 8.1 åŸºç¡€æ¦‚å¿µé¢˜" title="Direct link to 8.1 åŸºç¡€æ¦‚å¿µé¢˜" translate=no>â€‹</a></h3>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">å¾®æœåŠ¡æ¶æ„<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">æ ¸å¿ƒç»„ä»¶</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class=card><div class=card__header><h4>Q: ä»€ä¹ˆæ˜¯å¾®æœåŠ¡æ¶æ„ï¼Ÿå®ƒçš„ä¼˜åŠ¿å’ŒæŒ‘æˆ˜æ˜¯ä»€ä¹ˆï¼Ÿ</h4></div><div class=card__body><p><strong>A:</strong> å¾®æœåŠ¡æ¶æ„æ˜¯ä¸€ç§å°†åº”ç”¨ç¨‹åºæ‹†åˆ†ä¸ºå°å‹ã€ç‹¬ç«‹æœåŠ¡çš„æ¶æ„é£æ ¼ã€‚<p>ä¼˜åŠ¿åŒ…æ‹¬ï¼š<ul><li><strong>æœåŠ¡æ‹†åˆ†</strong>ï¼šæŒ‰ä¸šåŠ¡åŠŸèƒ½æ‹†åˆ†ï¼ŒèŒè´£å•ä¸€<li><strong>ç‹¬ç«‹éƒ¨ç½²</strong>ï¼šæ¯ä¸ªæœåŠ¡å¯ç‹¬ç«‹éƒ¨ç½²å’Œæ‰©å±•<li><strong>æŠ€æœ¯å¼‚æ„</strong>ï¼šä¸åŒæœåŠ¡å¯ä½¿ç”¨ä¸åŒæŠ€æœ¯æ ˆ<li><strong>æ•…éšœéš”ç¦»</strong>ï¼šå•ä¸ªæœåŠ¡æ•…éšœä¸å½±å“æ•´ä½“</ul><p>æŒ‘æˆ˜åŒ…æ‹¬ï¼š<ul><li><strong>åˆ†å¸ƒå¼å¤æ‚æ€§</strong>ï¼šç½‘ç»œé€šä¿¡ã€æ•°æ®ä¸€è‡´æ€§ç­‰<li><strong>æœåŠ¡æ²»ç†</strong>ï¼šæœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ã€ç†”æ–­é™çº§<li><strong>æ•°æ®ç®¡ç†</strong>ï¼šåˆ†å¸ƒå¼äº‹åŠ¡ã€æ•°æ®ä¸€è‡´æ€§<li><strong>è¿ç»´å¤æ‚åº¦</strong>ï¼šç›‘æ§ã€æ—¥å¿—ã€éƒ¨ç½²ç­‰</ul></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class=card><div class=card__header><h4>Q: Spring Cloudçš„æ ¸å¿ƒç»„ä»¶æœ‰å“ªäº›ï¼Ÿ</h4></div><div class=card__body><p><strong>A:</strong> Spring Cloudçš„æ ¸å¿ƒç»„ä»¶åŒ…æ‹¬ï¼š<ul><li><strong>Eureka/Nacos/Consul</strong>ï¼šæœåŠ¡æ³¨å†Œä¸å‘ç°<li><strong>Gateway/Zuul</strong>ï¼šAPIç½‘å…³<li><strong>Ribbon/LoadBalancer</strong>ï¼šå®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡<li><strong>Hystrix/Sentinel/Resilience4j</strong>ï¼šç†”æ–­é™çº§<li><strong>Config</strong>ï¼šé…ç½®ç®¡ç†<li><strong>Bus</strong>ï¼šæ¶ˆæ¯æ€»çº¿<li><strong>Sleuth</strong>ï¼šåˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª<li><strong>Zipkin</strong>ï¼šè°ƒç”¨é“¾å¯è§†åŒ–</ul></div></div></div></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=82-å®è·µé¢˜>8.2 å®è·µé¢˜<a href=#82-å®è·µé¢˜ class=hash-link aria-label="Direct link to 8.2 å®è·µé¢˜" title="Direct link to 8.2 å®è·µé¢˜" translate=no>â€‹</a></h3>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">æœåŠ¡æ³¨å†Œå‘ç°<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">APIç½‘å…³</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class=card><div class=card__header><h4>Q: å¦‚ä½•å®ç°æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼Ÿ</h4></div><div class=card__body><p><strong>A:</strong> å®ç°æœåŠ¡æ³¨å†Œä¸å‘ç°çš„æ­¥éª¤ï¼š<ol><li><strong>é…ç½®Eureka Server</strong>ï¼š</ol><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@SpringBootApplication</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@EnableEurekaServer</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">EurekaServerApplication</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token class-name">SpringApplication</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">EurekaServerApplication</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div><ol start=2><li><strong>é…ç½®Eureka Client</strong>ï¼š</ol><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@SpringBootApplication</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@EnableEurekaClient</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">ServiceApplication</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token class-name">SpringApplication</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">ServiceApplication</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div><ol start=3><li><strong>æœåŠ¡è°ƒç”¨</strong>ï¼šä½¿ç”¨@LoadBalancedæ³¨è§£çš„RestTemplateæˆ–Feignå®¢æˆ·ç«¯<li><strong>è´Ÿè½½å‡è¡¡</strong>ï¼šé€šè¿‡Ribbonå®ç°ï¼Œå¯è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡ç­–ç•¥</ol></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class=card><div class=card__header><h4>Q: å¦‚ä½•å®ç°APIç½‘å…³ï¼Ÿ</h4></div><div class=card__body><p><strong>A:</strong> å®ç°APIç½‘å…³çš„æ–¹æ³•ï¼š<ol><li><strong>é…ç½®Gateway</strong>ï¼š</ol><div class="codeBlockContainer_X7hc language-yaml"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M0 32l34.9 395.8L192 480l157.1-52.2L384 32H0zm313.1 80l-4.8 47.3L193 208.6l-.3.1h111.5l-12.8 146.6-98.2 28.7-98.8-29.2-6.4-73.9h48.9l3.2 38.3 52.6 13.3 54.7-15.4 3.7-61.6-166.3-.5v-.1l-.2.1-3.6-46.3L193.1 162l6.5-2.7H76.7L70.9 112h242.2z"/></svg><span>yaml</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-yaml codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token key atrule">cloud</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">gateway</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">routes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">uri</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> lb</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">predicates</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> Path=/api/users/</span><span class="token important">**</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">filters</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> StripPrefix=1</span></span></div></code></pre></div></div><ol start=2><li><strong>è¿‡æ»¤å™¨é“¾</strong>ï¼šå®ç°GlobalFilteræ¥å£ï¼Œå¯å¤„ç†è®¤è¯ã€é™æµã€æ—¥å¿—ç­‰<li><strong>æœåŠ¡å‘ç°</strong>ï¼šç»“åˆEurekaï¼Œå®ç°åŠ¨æ€è·¯ç”±<li><strong>è´Ÿè½½å‡è¡¡</strong>ï¼šä½¿ç”¨lb://å‰ç¼€è¿›è¡Œè´Ÿè½½å‡è¡¡</ol></div></div></div></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=83-é«˜çº§é¢˜>8.3 é«˜çº§é¢˜<a href=#83-é«˜çº§é¢˜ class=hash-link aria-label="Direct link to 8.3 é«˜çº§é¢˜" title="Direct link to 8.3 é«˜çº§é¢˜" translate=no>â€‹</a></h3>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">åˆ†å¸ƒå¼äº‹åŠ¡<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">ç†”æ–­é™çº§</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class=card><div class=card__header><h4>Q: å¦‚ä½•å®ç°åˆ†å¸ƒå¼äº‹åŠ¡ï¼Ÿ</h4></div><div class=card__body><p><strong>A:</strong> å®ç°åˆ†å¸ƒå¼äº‹åŠ¡çš„æ–¹æ³•ï¼š<ul><li><strong>2PC/3PC</strong>ï¼šä¸¤é˜¶æ®µ/ä¸‰é˜¶æ®µæäº¤åè®®ï¼Œå¼ºä¸€è‡´æ€§ä½†æ€§èƒ½è¾ƒå·®<li><strong>TCCæ¨¡å¼</strong>ï¼šTry-Confirm-Cancelæ¨¡å¼ï¼Œè¡¥å¿äº‹åŠ¡</ul><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token comment" style="color:rgb(98, 114, 164)">// Tryé˜¶æ®µ</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Transactional</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">tryCreate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">Order</span><span class="token plain"> order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">  orderMapper</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">insert</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// åˆ›å»ºè®¢å•</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">  accountService</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">tryDeduct</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getUserId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getAmount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// å°è¯•æ‰£å‡ä½™é¢</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain" style=display:inline-block></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Confirmé˜¶æ®µ</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Transactional</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">confirmCreate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">Order</span><span class="token plain"> order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">  order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setStatus</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"CONFIRMED"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">  orderMapper</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">updateStatus</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ç¡®è®¤è®¢å•</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">  accountService</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">confirmDeduct</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getUserId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getAmount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ç¡®è®¤æ‰£å‡</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain" style=display:inline-block></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>16</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Cancelé˜¶æ®µ</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>17</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Transactional</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>18</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">cancelCreate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">Order</span><span class="token plain"> order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>19</span><span class=codeLineContent_HA3z><span class="token plain">  order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setStatus</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"CANCELED"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>20</span><span class=codeLineContent_HA3z><span class="token plain">  orderMapper</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">updateStatus</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// å–æ¶ˆè®¢å•</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>21</span><span class=codeLineContent_HA3z><span class="token plain">  accountService</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">cancelDeduct</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getUserId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getAmount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// å–æ¶ˆæ‰£å‡</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>22</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div><ul start=3><li><strong>Sagaæ¨¡å¼</strong>ï¼šé•¿äº‹åŠ¡çš„è¡¥å¿æ¨¡å¼ï¼Œæ¯æ­¥éƒ½æœ‰å¯¹åº”çš„è¡¥å¿æ“ä½œ<li><strong>æ¶ˆæ¯äº‹åŠ¡</strong>ï¼šåŸºäºæ¶ˆæ¯çš„æœ€ç»ˆä¸€è‡´æ€§ï¼Œé€šè¿‡æ¶ˆæ¯è¡¨+å®šæ—¶ä»»åŠ¡å®ç°<li><strong>Seata</strong>ï¼šé˜¿é‡Œå¼€æºçš„åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶ï¼Œæ”¯æŒATã€TCCã€Sagaå’ŒXAæ¨¡å¼</ul></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class=card><div class=card__header><h4>Q: å¦‚ä½•å®ç°æœåŠ¡ç†”æ–­é™çº§ï¼Ÿ</h4></div><div class=card__body><p><strong>A:</strong> å®ç°æœåŠ¡ç†”æ–­é™çº§çš„æ–¹æ³•ï¼š<ul><li><strong>Hystrix</strong>ï¼š</ul><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@HystrixCommand</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain">  fallbackMethod </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"fallbackMethod"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">  commandProperties </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@HystrixProperty</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">name </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"circuitBreaker.requestVolumeThreshold"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> value </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"10"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@HystrixProperty</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">name </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"circuitBreaker.errorThresholdPercentage"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> value </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"50"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@HystrixProperty</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">name </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"circuitBreaker.sleepWindowInMilliseconds"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> value </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"5000"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">serviceMethod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ä¸šåŠ¡é€»è¾‘</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain" style=display:inline-block></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">fallbackMethod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"é™çº§å“åº”"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div><ul start=2><li><strong>Sentinel</strong>ï¼š</ul><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@SentinelResource</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain">  value </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"resourceName"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">  blockHandler </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"blockHandler"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">  fallback </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"fallbackMethod"</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">serviceMethod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ä¸šåŠ¡é€»è¾‘</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain" style=display:inline-block></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">blockHandler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">BlockException</span><span class="token plain"> ex</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"é™æµå“åº”"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain" style=display:inline-block></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">fallbackMethod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">Throwable</span><span class="token plain"> t</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"é™çº§å“åº”"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>16</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div><ul start=3><li><strong>Resilience4j</strong>ï¼šæ–°ä¸€ä»£ç†”æ–­å™¨ï¼Œå¯æ›¿ä»£Hystrix</ul></div></div></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>Spring Cloudå­¦ä¹ è¦ç‚¹</div><div class=admonitionContent_BuS1><ol>
<li class=""><strong>ç†è§£å¾®æœåŠ¡æ¶æ„</strong>ï¼šæŒæ¡å¾®æœåŠ¡çš„è®¾è®¡åŸåˆ™å’Œæœ€ä½³å®è·µ</li>
<li class=""><strong>ç†Ÿæ‚‰æ ¸å¿ƒç»„ä»¶</strong>ï¼šäº†è§£Eurekaã€Gatewayã€Ribbonç­‰ç»„ä»¶</li>
<li class=""><strong>æŒæ¡æœåŠ¡æ²»ç†</strong>ï¼šå­¦ä¼šæœåŠ¡æ³¨å†Œå‘ç°ã€è´Ÿè½½å‡è¡¡ã€ç†”æ–­é™çº§</li>
<li class=""><strong>å­¦ä¼šé…ç½®ç®¡ç†</strong>ï¼šæŒæ¡åˆ†å¸ƒå¼é…ç½®å’Œé…ç½®ä¸­å¿ƒ</li>
<li class=""><strong>äº†è§£ç›‘æ§è¿½è¸ª</strong>ï¼šå­¦ä¼šåˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªå’Œç›‘æ§</li>
</ol></div></div>
<!-- -->
<hr/>
<p>é€šè¿‡æœ¬ç« çš„å­¦ä¹ ï¼Œä½ åº”è¯¥å·²ç»æŒæ¡äº†Spring Cloudçš„æ ¸å¿ƒæ¦‚å¿µã€ç»„ä»¶ä½¿ç”¨å’Œå¾®æœåŠ¡æ¶æ„è®¾è®¡ã€‚Spring Cloudæ˜¯æ„å»ºåˆ†å¸ƒå¼ç³»ç»Ÿçš„é‡è¦æ¡†æ¶ï¼ŒæŒæ¡Spring Cloudå¯¹äºæ„å»ºé«˜å¯ç”¨ã€å¯æ‰©å±•çš„å¾®æœåŠ¡åº”ç”¨è‡³å…³é‡è¦ã€‚</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=9-spring-cloud-alibaba>9. Spring Cloud Alibaba<a href=#9-spring-cloud-alibaba class=hash-link aria-label="Direct link to 9. Spring Cloud Alibaba" title="Direct link to 9. Spring Cloud Alibaba" translate=no>â€‹</a></h2>
<p>Spring Cloud Alibabaæ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„å¾®æœåŠ¡æ¡†æ¶ï¼Œæä¾›äº†ä¸°å¯Œçš„å¾®æœåŠ¡ç»„ä»¶ï¼Œä¸Spring Cloudç”Ÿæ€å®Œç¾é›†æˆã€‚</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=91-nacosæœåŠ¡æ³¨å†Œä¸å‘ç°>9.1 NacosæœåŠ¡æ³¨å†Œä¸å‘ç°<a href=#91-nacosæœåŠ¡æ³¨å†Œä¸å‘ç° class=hash-link aria-label="Direct link to 9.1 NacosæœåŠ¡æ³¨å†Œä¸å‘ç°" title="Direct link to 9.1 NacosæœåŠ¡æ³¨å†Œä¸å‘ç°" translate=no>â€‹</a></h3>
<p>Nacosæ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„æœåŠ¡æ³¨å†Œä¸å‘ç°ç»„ä»¶ï¼Œæ”¯æŒæœåŠ¡æ³¨å†Œã€é…ç½®ç®¡ç†ã€æœåŠ¡å‘ç°ç­‰åŠŸèƒ½ã€‚</p>
<!-- -->
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">Nacos Serveré…ç½®<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">Nacos Clienté…ç½®</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class="codeBlockContainer_X7hc language-yaml"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Nacos Serveré…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M0 32l34.9 395.8L192 480l157.1-52.2L384 32H0zm313.1 80l-4.8 47.3L193 208.6l-.3.1h111.5l-12.8 146.6-98.2 28.7-98.8-29.2-6.4-73.9h48.9l3.2 38.3 52.6 13.3 54.7-15.4 3.7-61.6-166.3-.5v-.1l-.2.1-3.6-46.3L193.1 162l6.5-2.7H76.7L70.9 112h242.2z"/></svg><span>yaml</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-yaml codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">application</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nacos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">cloud</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">nacos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">discovery</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">server-addr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> localhost</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">8848</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> public</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> DEFAULT_GROUP</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">server-addr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> localhost</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">8848</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> public</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> DEFAULT_GROUP</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">file-extension</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> yaml</span></span></div></code></pre></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class="codeBlockContainer_X7hc language-yaml"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Nacos Clienté…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M0 32l34.9 395.8L192 480l157.1-52.2L384 32H0zm313.1 80l-4.8 47.3L193 208.6l-.3.1h111.5l-12.8 146.6-98.2 28.7-98.8-29.2-6.4-73.9h48.9l3.2 38.3 52.6 13.3 54.7-15.4 3.7-61.6-166.3-.5v-.1l-.2.1-3.6-46.3L193.1 162l6.5-2.7H76.7L70.9 112h242.2z"/></svg><span>yaml</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-yaml codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">application</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">cloud</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">nacos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">discovery</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">server-addr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> localhost</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">8848</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> public</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> DEFAULT_GROUP</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">cluster-name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> DEFAULT</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">          </span><span class="token key atrule">version</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 1.0.0</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">          </span><span class="token key atrule">zone</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> zone</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">a</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">server-addr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> localhost</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">8848</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>16</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> public</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>17</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> DEFAULT_GROUP</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>18</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">file-extension</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> yaml</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>19</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">refresh-enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span></span></div></code></pre></div></div></div></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=92-sentinelæµé‡æ§åˆ¶>9.2 Sentinelæµé‡æ§åˆ¶<a href=#92-sentinelæµé‡æ§åˆ¶ class=hash-link aria-label="Direct link to 9.2 Sentinelæµé‡æ§åˆ¶" title="Direct link to 9.2 Sentinelæµé‡æ§åˆ¶" translate=no>â€‹</a></h3>
<p>Sentinelæ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„æµé‡æ§åˆ¶ç»„ä»¶ï¼Œæä¾›äº†ä¸°å¯Œçš„æµé‡æ§åˆ¶ã€ç†”æ–­é™çº§ã€ç³»ç»Ÿè´Ÿè½½ä¿æŠ¤ç­‰åŠŸèƒ½ã€‚</p>
<!-- -->
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">Sentinelé…ç½®<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">Sentinelè§„åˆ™é…ç½®</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class="codeBlockContainer_X7hc language-yaml"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Sentinelé…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M0 32l34.9 395.8L192 480l157.1-52.2L384 32H0zm313.1 80l-4.8 47.3L193 208.6l-.3.1h111.5l-12.8 146.6-98.2 28.7-98.8-29.2-6.4-73.9h48.9l3.2 38.3 52.6 13.3 54.7-15.4 3.7-61.6-166.3-.5v-.1l-.2.1-3.6-46.3L193.1 162l6.5-2.7H76.7L70.9 112h242.2z"/></svg><span>yaml</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-yaml codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">cloud</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">sentinel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">transport</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">dashboard</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> localhost</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">8080</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">8719</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">datasource</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token key atrule">ds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">          </span><span class="token key atrule">nacos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token key atrule">server-addr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> localhost</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">8848</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token key atrule">dataId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> sentinel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">rules</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token key atrule">groupId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> DEFAULT_GROUP</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token key atrule">rule-type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> flow</span></span></div></code></pre></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Sentinelè§„åˆ™é…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Configuration</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">SentinelConfig</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@PostConstruct</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">init</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// æµæ§è§„åˆ™</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">initFlowRules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// é™çº§è§„åˆ™</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">initDegradeRules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// ç³»ç»Ÿè§„åˆ™</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">initSystemRules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">initFlowRules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token generics class-name">FlowRule</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"> rules </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">ArrayList</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>16</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">FlowRule</span><span class="token plain"> rule </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">FlowRule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>17</span><span class=codeLineContent_HA3z><span class="token plain">        rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setResource</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"getUser"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>18</span><span class=codeLineContent_HA3z><span class="token plain">        rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setGrade</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">RuleConstant</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">FLOW_GRADE_QPS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>19</span><span class=codeLineContent_HA3z><span class="token plain">        rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">20</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>20</span><span class=codeLineContent_HA3z><span class="token plain">        rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setControlBehavior</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">RuleConstant</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">CONTROL_BEHAVIOR_WARM_UP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>21</span><span class=codeLineContent_HA3z><span class="token plain">        rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setWarmUpPeriodSec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>22</span><span class=codeLineContent_HA3z><span class="token plain">        rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>23</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">FlowRuleManager</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">loadRules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>24</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>25</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>26</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">initDegradeRules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>27</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token generics class-name">DegradeRule</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"> rules </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">ArrayList</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>28</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">DegradeRule</span><span class="token plain"> rule </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">DegradeRule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>29</span><span class=codeLineContent_HA3z><span class="token plain">        rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setResource</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"getUser"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>30</span><span class=codeLineContent_HA3z><span class="token plain">        rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setGrade</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">RuleConstant</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">DEGRADE_GRADE_EXCEPTION_RATIO</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>31</span><span class=codeLineContent_HA3z><span class="token plain">        rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>32</span><span class=codeLineContent_HA3z><span class="token plain">        rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setTimeWindow</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>33</span><span class=codeLineContent_HA3z><span class="token plain">        rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>34</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">DegradeRuleManager</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">loadRules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>35</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>36</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>37</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">initSystemRules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>38</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token generics class-name">SystemRule</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"> rules </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">ArrayList</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>39</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">SystemRule</span><span class="token plain"> rule </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">SystemRule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>40</span><span class=codeLineContent_HA3z><span class="token plain">        rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setHighestSystemLoad</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.8</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>41</span><span class=codeLineContent_HA3z><span class="token plain">        rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setMaxThread</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>42</span><span class=codeLineContent_HA3z><span class="token plain">        rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setQps</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">100</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>43</span><span class=codeLineContent_HA3z><span class="token plain">        rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>44</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token class-name">SystemRuleManager</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">loadRules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>45</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>46</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div></div></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=93-seataåˆ†å¸ƒå¼äº‹åŠ¡>9.3 Seataåˆ†å¸ƒå¼äº‹åŠ¡<a href=#93-seataåˆ†å¸ƒå¼äº‹åŠ¡ class=hash-link aria-label="Direct link to 9.3 Seataåˆ†å¸ƒå¼äº‹åŠ¡" title="Direct link to 9.3 Seataåˆ†å¸ƒå¼äº‹åŠ¡" translate=no>â€‹</a></h3>
<p>Seataæ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶ï¼Œæ”¯æŒATã€TCCã€Sagaå’ŒXAå››ç§äº‹åŠ¡æ¨¡å¼ã€‚</p>
<!-- -->
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">Seataé…ç½®<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">Seataä½¿ç”¨ç¤ºä¾‹</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class="codeBlockContainer_X7hc language-yaml"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Seataé…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M0 32l34.9 395.8L192 480l157.1-52.2L384 32H0zm313.1 80l-4.8 47.3L193 208.6l-.3.1h111.5l-12.8 146.6-98.2 28.7-98.8-29.2-6.4-73.9h48.9l3.2 38.3 52.6 13.3 54.7-15.4 3.7-61.6-166.3-.5v-.1l-.2.1-3.6-46.3L193.1 162l6.5-2.7H76.7L70.9 112h242.2z"/></svg><span>yaml</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-yaml codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token key atrule">seata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">tx-service-group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> my_test_tx_group</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">service</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">vgroup-mapping</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">my_test_tx_group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> default</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">registry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nacos</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">nacos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">server-addr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> localhost</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">8848</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> public</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> SEATA_GROUP</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nacos</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">nacos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">server-addr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> localhost</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">8848</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>16</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> public</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>17</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> SEATA_GROUP</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>18</span><span class=codeLineContent_HA3z><span class="token plain">      </span><span class="token key atrule">data-id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> seataServer.properties</span></span></div></code></pre></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Seataä½¿ç”¨ç¤ºä¾‹</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Service</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">OrderService</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Autowired</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">private</span><span class="token plain"> </span><span class="token class-name">OrderMapper</span><span class="token plain"> orderMapper</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Autowired</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">private</span><span class="token plain"> </span><span class="token class-name">AccountService</span><span class="token plain"> accountService</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@GlobalTransactional</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">createOrder</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">Order</span><span class="token plain"> order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// åˆ›å»ºè®¢å•</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">        orderMapper</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">insert</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">        </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ‰£å‡è´¦æˆ·ä½™é¢</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>16</span><span class=codeLineContent_HA3z><span class="token plain">        accountService</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">deduct</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getUserId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getAmount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>17</span><span class=codeLineContent_HA3z><span class="token plain">        </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>18</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// å¦‚æœè¿™é‡ŒæŠ›å‡ºå¼‚å¸¸ï¼Œæ•´ä¸ªäº‹åŠ¡ä¼šå›æ»š</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>19</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">order</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getAmount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">></span><span class="token plain"> </span><span class="token number">1000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>20</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">RuntimeException</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"è®¢å•é‡‘é¢è¿‡å¤§"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>21</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>22</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>23</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div></div></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=94-rocketmqæ¶ˆæ¯é˜Ÿåˆ—>9.4 RocketMQæ¶ˆæ¯é˜Ÿåˆ—<a href=#94-rocketmqæ¶ˆæ¯é˜Ÿåˆ— class=hash-link aria-label="Direct link to 9.4 RocketMQæ¶ˆæ¯é˜Ÿåˆ—" title="Direct link to 9.4 RocketMQæ¶ˆæ¯é˜Ÿåˆ—" translate=no>â€‹</a></h3>
<p>RocketMQæ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ”¯æŒåˆ†å¸ƒå¼äº‹åŠ¡æ¶ˆæ¯ã€é¡ºåºæ¶ˆæ¯ã€å»¶æ—¶æ¶ˆæ¯ç­‰ç‰¹æ€§ã€‚</p>
<!-- -->
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">RocketMQé…ç½®<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">RocketMQä½¿ç”¨ç¤ºä¾‹</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class="codeBlockContainer_X7hc language-yaml"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>RocketMQé…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M0 32l34.9 395.8L192 480l157.1-52.2L384 32H0zm313.1 80l-4.8 47.3L193 208.6l-.3.1h111.5l-12.8 146.6-98.2 28.7-98.8-29.2-6.4-73.9h48.9l3.2 38.3 52.6 13.3 54.7-15.4 3.7-61.6-166.3-.5v-.1l-.2.1-3.6-46.3L193.1 162l6.5-2.7H76.7L70.9 112h242.2z"/></svg><span>yaml</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-yaml codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token key atrule">rocketmq</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">name-server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> localhost</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">9876</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">producer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">producer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">group</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">send-message-timeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">3000</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">retry-times-when-send-failed</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">  </span><span class="token key atrule">consumer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">consumer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">group</span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">consume-timeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">15</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token key atrule">max-reconsume-times</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">3</span></span></div></code></pre></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class="codeBlockContainer_X7hc language-java"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>RocketMQä½¿ç”¨ç¤ºä¾‹</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 384 512" class=langIcon_gX7_><path fill=currentColor d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 45.2 242.8 8.1 242.8 8.1s12.7 50.9-23.5 79.4c-60.3 47.5-78.2-12.6-78.2-12.6-117.2 68.1 38.4 69.6 51.3 93.4 22.9 41.5-40.2 104.8-80.4 93.7-9-2.5 5.2 9.6 19.5 19.4 20.8 14.3 76.1 20.5 116.2-2.8 31.3-18.1-11.7-53.8-23.5-70.7zM381 261.1c-15.6-5.9-37.8-6.6-37.8-6.6s9.4-28.4-37.3-42.3c-94.4-28.3-189 11.5-189 11.5s52.9 47.3 138.2 35c16.6-2.4 51-13.1 51-13.1s-23.8 6.1-32.7 12.1c-223.1 62.2-75.6-7.5-75.6-7.5s19 10.7 50.9 12.8c116.2 8.1 117.1-35.9 132.3-2.9zM239 64.7c-56.6 19.6-49.4 42.6-49.4 42.6 49.3-32 121.4-22.3 121.4-22.3s-23.1-10.1-72 -20.3zm-99.6 23.6c27.8-15.7 49.9-8 49.9-8s-28.6-15.9-60.4-7.6c-21.1 5.6-14.8 23.7-14.8 23.7s5-9.4 25.3-8.1zm146.4 44.6c-39.4 13-43.6 61.5-43.6 61.5s75-36.4 43.6-61.5z"/></svg><span>java</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-java codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Service</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">MessageService</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Autowired</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">private</span><span class="token plain"> </span><span class="token class-name">RocketMQTemplate</span><span class="token plain"> rocketMQTemplate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sendMessage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">String</span><span class="token plain"> topic</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">        rocketMQTemplate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">convertAndSend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">topic</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sendOrderedMessage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">String</span><span class="token plain"> topic</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> hashKey</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">        rocketMQTemplate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">syncSendOrderly</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">topic</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> hashKey</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@RocketMQMessageListener</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>16</span><span class=codeLineContent_HA3z><span class="token plain">        topic </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"order-topic"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>17</span><span class=codeLineContent_HA3z><span class="token plain">        consumerGroup </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"order-consumer-group"</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>18</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>19</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">OrderMessageListener</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">implements</span><span class="token plain"> </span><span class="token class-name">RocketMQListener</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>20</span><span class=codeLineContent_HA3z><span class="token plain">        </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>21</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token annotation punctuation" style="color:rgb(248, 248, 242)">@Override</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>22</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">onMessage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">String</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>23</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token comment" style="color:rgb(98, 114, 164)">// å¤„ç†è®¢å•æ¶ˆæ¯</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>24</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token class-name">System</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">println</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"æ”¶åˆ°è®¢å•æ¶ˆæ¯: "</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>25</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>26</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>27</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></div></code></pre></div></div></div></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=10-å¾®æœåŠ¡æ¶æ„è®¾è®¡æ¨¡å¼>10. å¾®æœåŠ¡æ¶æ„è®¾è®¡æ¨¡å¼<a href=#10-å¾®æœåŠ¡æ¶æ„è®¾è®¡æ¨¡å¼ class=hash-link aria-label="Direct link to 10. å¾®æœåŠ¡æ¶æ„è®¾è®¡æ¨¡å¼" title="Direct link to 10. å¾®æœåŠ¡æ¶æ„è®¾è®¡æ¨¡å¼" translate=no>â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=101-æœåŠ¡æ‹†åˆ†æ¨¡å¼>10.1 æœåŠ¡æ‹†åˆ†æ¨¡å¼<a href=#101-æœåŠ¡æ‹†åˆ†æ¨¡å¼ class=hash-link aria-label="Direct link to 10.1 æœåŠ¡æ‹†åˆ†æ¨¡å¼" title="Direct link to 10.1 æœåŠ¡æ‹†åˆ†æ¨¡å¼" translate=no>â€‹</a></h3>
<!-- -->
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=102-æœåŠ¡é€šä¿¡æ¨¡å¼>10.2 æœåŠ¡é€šä¿¡æ¨¡å¼<a href=#102-æœåŠ¡é€šä¿¡æ¨¡å¼ class=hash-link aria-label="Direct link to 10.2 æœåŠ¡é€šä¿¡æ¨¡å¼" title="Direct link to 10.2 æœåŠ¡é€šä¿¡æ¨¡å¼" translate=no>â€‹</a></h3>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">åŒæ­¥é€šä¿¡<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">å¼‚æ­¥é€šä¿¡</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6></div><div role=tabpanel class=tabItem_Ymn6 hidden></div></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=103-æ•°æ®ä¸€è‡´æ€§æ¨¡å¼>10.3 æ•°æ®ä¸€è‡´æ€§æ¨¡å¼<a href=#103-æ•°æ®ä¸€è‡´æ€§æ¨¡å¼ class=hash-link aria-label="Direct link to 10.3 æ•°æ®ä¸€è‡´æ€§æ¨¡å¼" title="Direct link to 10.3 æ•°æ®ä¸€è‡´æ€§æ¨¡å¼" translate=no>â€‹</a></h3>
<!-- -->
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=11-å¾®æœåŠ¡ç›‘æ§ä¸è¿ç»´>11. å¾®æœåŠ¡ç›‘æ§ä¸è¿ç»´<a href=#11-å¾®æœåŠ¡ç›‘æ§ä¸è¿ç»´ class=hash-link aria-label="Direct link to 11. å¾®æœåŠ¡ç›‘æ§ä¸è¿ç»´" title="Direct link to 11. å¾®æœåŠ¡ç›‘æ§ä¸è¿ç»´" translate=no>â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=111-ç›‘æ§ä½“ç³»>11.1 ç›‘æ§ä½“ç³»<a href=#111-ç›‘æ§ä½“ç³» class=hash-link aria-label="Direct link to 11.1 ç›‘æ§ä½“ç³»" title="Direct link to 11.1 ç›‘æ§ä½“ç³»" translate=no>â€‹</a></h3>
<!-- -->
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=112-æ—¥å¿—ç®¡ç†>11.2 æ—¥å¿—ç®¡ç†<a href=#112-æ—¥å¿—ç®¡ç† class=hash-link aria-label="Direct link to 11.2 æ—¥å¿—ç®¡ç†" title="Direct link to 11.2 æ—¥å¿—ç®¡ç†" translate=no>â€‹</a></h3>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">ELKæ¶æ„<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">Logbacké…ç½®</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class="codeBlockContainer_X7hc language-xml"><div class=codeBlockHeader_viex><div class=codeBlockControls_mxj2><span class="codeDot_PWGG codeDotRed_ANoD"></span><span class="codeDot_PWGG codeDotYellow_HH1J"></span><span class="codeDot_PWGG codeDotGreen_RM6U"></span></div><div class=codeBlockTitle_B2tn>Logbacké…ç½®</div><div class=codeBlockMeta_lRk3><div class=codeBlockLanguage_Vqu6><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 640 512" class=langIcon_gX7_><path fill=currentColor d="M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"/></svg><span>xml</span></div><button type=button aria-label=å¤åˆ¶ä»£ç  class=copyButton_H_xL><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor class=copyButtonIcon_f_OW><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg><span>å¤åˆ¶</span></button></div></div><div class=codeBlockContent_vqWU><pre class="prism-code language-xml codeBlock_wPnj" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_fQUY><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>1</span><span class=codeLineContent_HA3z><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">configuration</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>2</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">appender</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">STDOUT</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">class</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">ch.qos.logback.core.ConsoleAppender</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>3</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">encoder</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>4</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">pattern</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain">%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">pattern</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>5</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">encoder</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>6</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">appender</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>7</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>8</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">appender</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">FILE</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">class</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">ch.qos.logback.core.rolling.RollingFileAppender</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>9</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">file</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain">logs/application.log</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">file</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>10</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">rollingPolicy</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">class</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">ch.qos.logback.core.rolling.TimeBasedRollingPolicy</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>11</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">fileNamePattern</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain">logs/application.%d{yyyy-MM-dd}.log</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">fileNamePattern</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>12</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">maxHistory</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain">30</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">maxHistory</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>13</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">rollingPolicy</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>14</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">encoder</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>15</span><span class=codeLineContent_HA3z><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">pattern</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain">%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">pattern</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>16</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">encoder</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>17</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">appender</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>18</span><span class=codeLineContent_HA3z><span class="token plain">    </span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>19</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">root</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">level</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">INFO</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>20</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">appender-ref</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">STDOUT</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>21</span><span class=codeLineContent_HA3z><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">appender-ref</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">FILE</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>22</span><span class=codeLineContent_HA3z><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">root</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span><span class="token plain"></span></span></div><div class="token-line codeLine_fSta" style=color:#F8F8F2><span class=codeLineNumber_x9bH>23</span><span class=codeLineContent_HA3z><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">configuration</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">></span></span></div></code></pre></div></div></div></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=12-é¢è¯•é¢˜ç²¾é€‰å…¨é¢ç‰ˆ>12. é¢è¯•é¢˜ç²¾é€‰ï¼ˆå…¨é¢ç‰ˆï¼‰<a href=#12-é¢è¯•é¢˜ç²¾é€‰å…¨é¢ç‰ˆ class=hash-link aria-label="Direct link to 12. é¢è¯•é¢˜ç²¾é€‰ï¼ˆå…¨é¢ç‰ˆï¼‰" title="Direct link to 12. é¢è¯•é¢˜ç²¾é€‰ï¼ˆå…¨é¢ç‰ˆï¼‰" translate=no>â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=121-spring-cloudåŸºç¡€é¢˜>12.1 Spring CloudåŸºç¡€é¢˜<a href=#121-spring-cloudåŸºç¡€é¢˜ class=hash-link aria-label="Direct link to 12.1 Spring CloudåŸºç¡€é¢˜" title="Direct link to 12.1 Spring CloudåŸºç¡€é¢˜" translate=no>â€‹</a></h3>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">å¾®æœåŠ¡æ¶æ„<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">æ ¸å¿ƒç»„ä»¶</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class=card><div class=card__header><h4>Q: ä»€ä¹ˆæ˜¯å¾®æœåŠ¡æ¶æ„ï¼Ÿå®ƒçš„ä¼˜åŠ¿å’ŒæŒ‘æˆ˜æ˜¯ä»€ä¹ˆï¼Ÿ</h4></div><div class=card__body><p><strong>A:</strong> å¾®æœåŠ¡æ¶æ„æ˜¯ä¸€ç§å°†åº”ç”¨ç¨‹åºæ‹†åˆ†ä¸ºå°å‹ã€ç‹¬ç«‹æœåŠ¡çš„æ¶æ„é£æ ¼ã€‚<p>ä¼˜åŠ¿åŒ…æ‹¬ï¼š<ul><li><strong>æœåŠ¡æ‹†åˆ†</strong>ï¼šæŒ‰ä¸šåŠ¡åŠŸèƒ½æ‹†åˆ†ï¼ŒèŒè´£å•ä¸€<li><strong>ç‹¬ç«‹éƒ¨ç½²</strong>ï¼šæ¯ä¸ªæœåŠ¡å¯ç‹¬ç«‹éƒ¨ç½²å’Œæ‰©å±•<li><strong>æŠ€æœ¯å¼‚æ„</strong>ï¼šä¸åŒæœåŠ¡å¯ä½¿ç”¨ä¸åŒæŠ€æœ¯æ ˆ<li><strong>æ•…éšœéš”ç¦»</strong>ï¼šå•ä¸ªæœåŠ¡æ•…éšœä¸å½±å“æ•´ä½“<li><strong>å›¢é˜Ÿè‡ªæ²»</strong>ï¼šä¸åŒå›¢é˜Ÿå¯ç‹¬ç«‹å¼€å‘ç»´æŠ¤</ul><p>æŒ‘æˆ˜åŒ…æ‹¬ï¼š<ul><li><strong>åˆ†å¸ƒå¼å¤æ‚æ€§</strong>ï¼šç½‘ç»œé€šä¿¡ã€æ•°æ®ä¸€è‡´æ€§ç­‰<li><strong>æœåŠ¡æ²»ç†</strong>ï¼šæœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ã€ç†”æ–­é™çº§<li><strong>æ•°æ®ç®¡ç†</strong>ï¼šåˆ†å¸ƒå¼äº‹åŠ¡ã€æ•°æ®ä¸€è‡´æ€§<li><strong>è¿ç»´å¤æ‚åº¦</strong>ï¼šç›‘æ§ã€æ—¥å¿—ã€éƒ¨ç½²ç­‰<li><strong>æµ‹è¯•å¤æ‚æ€§</strong>ï¼šé›†æˆæµ‹è¯•ã€ç«¯åˆ°ç«¯æµ‹è¯•</ul></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class=card><div class=card__header><h4>Q: Spring Cloudçš„æ ¸å¿ƒç»„ä»¶æœ‰å“ªäº›ï¼Ÿ</h4></div><div class=card__body><p><strong>A:</strong> Spring Cloudçš„æ ¸å¿ƒç»„ä»¶åŒ…æ‹¬ï¼š<ul><li><strong>Eureka/Nacos/Consul</strong>ï¼šæœåŠ¡æ³¨å†Œä¸å‘ç°<li><strong>Gateway/Zuul</strong>ï¼šAPIç½‘å…³<li><strong>Ribbon/LoadBalancer</strong>ï¼šå®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡<li><strong>Hystrix/Sentinel/Resilience4j</strong>ï¼šç†”æ–­é™çº§<li><strong>Config</strong>ï¼šé…ç½®ç®¡ç†<li><strong>Bus</strong>ï¼šæ¶ˆæ¯æ€»çº¿<li><strong>Sleuth</strong>ï¼šåˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª<li><strong>Zipkin</strong>ï¼šè°ƒç”¨é“¾å¯è§†åŒ–<li><strong>Feign</strong>ï¼šå£°æ˜å¼HTTPå®¢æˆ·ç«¯<li><strong>Stream</strong>ï¼šæ¶ˆæ¯é©±åŠ¨</ul></div></div></div></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=122-spring-cloud-alibabaé¢˜>12.2 Spring Cloud Alibabaé¢˜<a href=#122-spring-cloud-alibabaé¢˜ class=hash-link aria-label="Direct link to 12.2 Spring Cloud Alibabaé¢˜" title="Direct link to 12.2 Spring Cloud Alibabaé¢˜" translate=no>â€‹</a></h3>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">Nacos<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">Sentinel</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class=card><div class=card__header><h4>Q: Nacosç›¸æ¯”Eurekaæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ</h4></div><div class=card__body><p><strong>A:</strong> Nacosç›¸æ¯”Eurekaçš„ä¼˜åŠ¿ï¼š<ul><li><strong>åŠŸèƒ½æ›´å…¨é¢</strong>ï¼šä¸ä»…æ”¯æŒæœåŠ¡æ³¨å†Œå‘ç°ï¼Œè¿˜æ”¯æŒé…ç½®ç®¡ç†<li><strong>æ”¯æŒå¤šæ•°æ®ä¸­å¿ƒ</strong>ï¼šæ”¯æŒå¤šç¯å¢ƒã€å¤šå‘½åç©ºé—´<li><strong>é…ç½®åŠ¨æ€åˆ·æ–°</strong>ï¼šæ”¯æŒé…ç½®çš„å®æ—¶æ¨é€å’ŒåŠ¨æ€åˆ·æ–°<li><strong>æ”¯æŒå¤šç§åè®®</strong>ï¼šæ”¯æŒHTTPã€gRPCç­‰å¤šç§åè®®<li><strong>æ›´å¥½çš„å¯ç”¨æ€§</strong>ï¼šæ”¯æŒé›†ç¾¤éƒ¨ç½²ï¼Œæä¾›æ›´å¥½çš„é«˜å¯ç”¨æ€§<li><strong>æ”¯æŒæœåŠ¡æ ‡ç­¾</strong>ï¼šæ”¯æŒæœåŠ¡åˆ†ç»„ã€æ ‡ç­¾ç­‰é«˜çº§åŠŸèƒ½<li><strong>æ”¯æŒæƒé‡è·¯ç”±</strong>ï¼šæ”¯æŒåŸºäºæƒé‡çš„è´Ÿè½½å‡è¡¡</ul></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class=card><div class=card__header><h4>Q: Sentinelçš„æµé‡æ§åˆ¶ç­–ç•¥æœ‰å“ªäº›ï¼Ÿ</h4></div><div class=card__body><p><strong>A:</strong> Sentinelçš„æµé‡æ§åˆ¶ç­–ç•¥ï¼š<ul><li><strong>QPSé™æµ</strong>ï¼šåŸºäºæ¯ç§’æŸ¥è¯¢æ•°çš„é™æµ<li><strong>å¹¶å‘çº¿ç¨‹æ•°é™æµ</strong>ï¼šåŸºäºå¹¶å‘çº¿ç¨‹æ•°çš„é™æµ<li><strong>åŸºäºè°ƒç”¨å…³ç³»çš„é™æµ</strong>ï¼šåŸºäºè°ƒç”¨æ–¹ã€è°ƒç”¨é“¾è·¯ç­‰<li><strong>åŸºäºèµ„æºçš„é™æµ</strong>ï¼šåŸºäºç‰¹å®šèµ„æºçš„é™æµ<li><strong>é¢„çƒ­é™æµ</strong>ï¼šç³»ç»Ÿé¢„çƒ­æœŸé—´é€æ­¥å¢åŠ é™æµé˜ˆå€¼<li><strong>æ’é˜Ÿç­‰å¾…</strong>ï¼šè¶…è¿‡é˜ˆå€¼æ—¶æ’é˜Ÿç­‰å¾…è€Œä¸æ˜¯ç›´æ¥æ‹’ç»<li><strong>çƒ­ç‚¹å‚æ•°é™æµ</strong>ï¼šåŸºäºçƒ­ç‚¹å‚æ•°çš„é™æµ</ul></div></div></div></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=123-åˆ†å¸ƒå¼ç³»ç»Ÿé¢˜>12.3 åˆ†å¸ƒå¼ç³»ç»Ÿé¢˜<a href=#123-åˆ†å¸ƒå¼ç³»ç»Ÿé¢˜ class=hash-link aria-label="Direct link to 12.3 åˆ†å¸ƒå¼ç³»ç»Ÿé¢˜" title="Direct link to 12.3 åˆ†å¸ƒå¼ç³»ç»Ÿé¢˜" translate=no>â€‹</a></h3>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">åˆ†å¸ƒå¼äº‹åŠ¡<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">æœåŠ¡æ²»ç†</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class=card><div class=card__header><h4>Q: å¦‚ä½•å®ç°åˆ†å¸ƒå¼äº‹åŠ¡ï¼Ÿ</h4></div><div class=card__body><p><strong>A:</strong> å®ç°åˆ†å¸ƒå¼äº‹åŠ¡çš„æ–¹æ³•ï¼š<ul><li><strong>2PC/3PC</strong>ï¼šä¸¤é˜¶æ®µ/ä¸‰é˜¶æ®µæäº¤åè®®ï¼Œå¼ºä¸€è‡´æ€§ä½†æ€§èƒ½è¾ƒå·®<li><strong>TCCæ¨¡å¼</strong>ï¼šTry-Confirm-Cancelæ¨¡å¼ï¼Œè¡¥å¿äº‹åŠ¡<li><strong>Sagaæ¨¡å¼</strong>ï¼šé•¿äº‹åŠ¡çš„è¡¥å¿æ¨¡å¼ï¼Œæ¯æ­¥éƒ½æœ‰å¯¹åº”çš„è¡¥å¿æ“ä½œ<li><strong>æ¶ˆæ¯äº‹åŠ¡</strong>ï¼šåŸºäºæ¶ˆæ¯çš„æœ€ç»ˆä¸€è‡´æ€§ï¼Œé€šè¿‡æ¶ˆæ¯è¡¨+å®šæ—¶ä»»åŠ¡å®ç°<li><strong>Seata</strong>ï¼šé˜¿é‡Œå¼€æºçš„åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶ï¼Œæ”¯æŒATã€TCCã€Sagaå’ŒXAæ¨¡å¼<li><strong>æœ¬åœ°æ¶ˆæ¯è¡¨</strong>ï¼šæœ¬åœ°äº‹åŠ¡+æ¶ˆæ¯è¡¨çš„æ–¹å¼<li><strong>äº‹åŠ¡æ¶ˆæ¯</strong>ï¼šåŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„äº‹åŠ¡æ¶ˆæ¯</ul></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class=card><div class=card__header><h4>Q: å¾®æœåŠ¡æ²»ç†åŒ…æ‹¬å“ªäº›æ–¹é¢ï¼Ÿ</h4></div><div class=card__body><p><strong>A:</strong> å¾®æœåŠ¡æ²»ç†åŒ…æ‹¬ï¼š<ul><li><strong>æœåŠ¡æ³¨å†Œä¸å‘ç°</strong>ï¼šæœåŠ¡çš„æ³¨å†Œã€å‘ç°ã€å¥åº·æ£€æŸ¥<li><strong>è´Ÿè½½å‡è¡¡</strong>ï¼šå®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ã€æœåŠ¡ç«¯è´Ÿè½½å‡è¡¡<li><strong>ç†”æ–­é™çº§</strong>ï¼šæœåŠ¡ç†”æ–­ã€é™çº§ã€é™æµ<li><strong>é…ç½®ç®¡ç†</strong>ï¼šé›†ä¸­é…ç½®ã€åŠ¨æ€é…ç½®ã€é…ç½®ç‰ˆæœ¬ç®¡ç†<li><strong>æœåŠ¡ç›‘æ§</strong>ï¼šæ€§èƒ½ç›‘æ§ã€å¥åº·ç›‘æ§ã€ä¸šåŠ¡ç›‘æ§<li><strong>é“¾è·¯è¿½è¸ª</strong>ï¼šåˆ†å¸ƒå¼è°ƒç”¨é“¾è¿½è¸ªã€æ€§èƒ½åˆ†æ<li><strong>æœåŠ¡å®‰å…¨</strong>ï¼šè®¤è¯ã€æˆæƒã€åŠ å¯†ã€å®¡è®¡<li><strong>æœåŠ¡å®¹é”™</strong>ï¼šé‡è¯•ã€è¶…æ—¶ã€é™çº§ç­–ç•¥</ul></div></div></div></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=124-é«˜çº§æ¶æ„é¢˜>12.4 é«˜çº§æ¶æ„é¢˜<a href=#124-é«˜çº§æ¶æ„é¢˜ class=hash-link aria-label="Direct link to 12.4 é«˜çº§æ¶æ„é¢˜" title="Direct link to 12.4 é«˜çº§æ¶æ„é¢˜" translate=no>â€‹</a></h3>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">é«˜å¯ç”¨è®¾è®¡<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">æ€§èƒ½ä¼˜åŒ–</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class=card><div class=card__header><h4>Q: å¦‚ä½•è®¾è®¡é«˜å¯ç”¨çš„å¾®æœåŠ¡æ¶æ„ï¼Ÿ</h4></div><div class=card__body><p><strong>A:</strong> é«˜å¯ç”¨å¾®æœåŠ¡æ¶æ„è®¾è®¡è¦ç‚¹ï¼š<ul><li><strong>æœåŠ¡å†—ä½™</strong>ï¼šå…³é”®æœåŠ¡éƒ¨ç½²å¤šä¸ªå®ä¾‹ï¼Œé¿å…å•ç‚¹æ•…éšœ<li><strong>è´Ÿè½½å‡è¡¡</strong>ï¼šä½¿ç”¨è´Ÿè½½å‡è¡¡å™¨åˆ†å‘è¯·æ±‚<li><strong>ç†”æ–­é™çº§</strong>ï¼šå®ç°ç†”æ–­å™¨æ¨¡å¼ï¼Œå¿«é€Ÿå¤±è´¥<li><strong>è¶…æ—¶é‡è¯•</strong>ï¼šè®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´å’Œé‡è¯•ç­–ç•¥<li><strong>å¼‚æ­¥å¤„ç†</strong>ï¼šä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—å¼‚æ­¥å¤„ç†ï¼Œæé«˜å“åº”é€Ÿåº¦<li><strong>ç¼“å­˜ç­–ç•¥</strong>ï¼šä½¿ç”¨å¤šçº§ç¼“å­˜æé«˜æ€§èƒ½<li><strong>ç›‘æ§å‘Šè­¦</strong>ï¼šå®æ—¶ç›‘æ§ç³»ç»ŸçŠ¶æ€ï¼ŒåŠæ—¶å‘ç°é—®é¢˜<li><strong>ç¾å¤‡æ–¹æ¡ˆ</strong>ï¼šå¤šæœºæˆ¿éƒ¨ç½²ï¼Œæ•°æ®å¤‡ä»½</ul></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class=card><div class=card__header><h4>Q: å¾®æœåŠ¡æ¶æ„å¦‚ä½•åšæ€§èƒ½ä¼˜åŒ–ï¼Ÿ</h4></div><div class=card__body><p><strong>A:</strong> å¾®æœåŠ¡æ¶æ„æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ï¼š<ul><li><strong>æœåŠ¡æ‹†åˆ†ä¼˜åŒ–</strong>ï¼šåˆç†æ‹†åˆ†æœåŠ¡ï¼Œé¿å…è¿‡åº¦æ‹†åˆ†<li><strong>ç¼“å­˜ä¼˜åŒ–</strong>ï¼šä½¿ç”¨Redisç­‰ç¼“å­˜å‡å°‘æ•°æ®åº“è®¿é—®<li><strong>æ•°æ®åº“ä¼˜åŒ–</strong>ï¼šè¯»å†™åˆ†ç¦»ã€åˆ†åº“åˆ†è¡¨ã€ç´¢å¼•ä¼˜åŒ–<li><strong>å¼‚æ­¥å¤„ç†</strong>ï¼šä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—å¼‚æ­¥å¤„ç†è€—æ—¶æ“ä½œ<li><strong>è¿æ¥æ± ä¼˜åŒ–</strong>ï¼šåˆç†é…ç½®æ•°æ®åº“è¿æ¥æ± ã€HTTPè¿æ¥æ± <li><strong>è´Ÿè½½å‡è¡¡ä¼˜åŒ–</strong>ï¼šé€‰æ‹©åˆé€‚çš„è´Ÿè½½å‡è¡¡ç®—æ³•<li><strong>ç›‘æ§ä¼˜åŒ–</strong>ï¼šä½¿ç”¨APMå·¥å…·åˆ†ææ€§èƒ½ç“¶é¢ˆ<li><strong>JVMä¼˜åŒ–</strong>ï¼šåˆç†é…ç½®JVMå‚æ•°</ul></div></div></div></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=125-å®æˆ˜åº”ç”¨é¢˜>12.5 å®æˆ˜åº”ç”¨é¢˜<a href=#125-å®æˆ˜åº”ç”¨é¢˜ class=hash-link aria-label="Direct link to 12.5 å®æˆ˜åº”ç”¨é¢˜" title="Direct link to 12.5 å®æˆ˜åº”ç”¨é¢˜" translate=no>â€‹</a></h3>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">æ¶æ„è®¾è®¡<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">é—®é¢˜æ’æŸ¥</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class=card><div class=card__header><h4>Q: è®¾è®¡ä¸€ä¸ªç”µå•†å¾®æœåŠ¡æ¶æ„ï¼Œéœ€è¦è€ƒè™‘å“ªäº›æ–¹é¢ï¼Ÿ</h4></div><div class=card__body><p><strong>A:</strong> ç”µå•†å¾®æœåŠ¡æ¶æ„è®¾è®¡è¦ç‚¹ï¼š<ul><li><strong>æœåŠ¡æ‹†åˆ†</strong>ï¼šç”¨æˆ·æœåŠ¡ã€å•†å“æœåŠ¡ã€è®¢å•æœåŠ¡ã€åº“å­˜æœåŠ¡ã€æ”¯ä»˜æœåŠ¡ã€ç‰©æµæœåŠ¡<li><strong>æ•°æ®ä¸€è‡´æ€§</strong>ï¼šè®¢å•åˆ›å»ºæ¶‰åŠåº“å­˜æ‰£å‡ã€æ”¯ä»˜ç­‰ï¼Œéœ€è¦åˆ†å¸ƒå¼äº‹åŠ¡<li><strong>é«˜å¹¶å‘å¤„ç†</strong>ï¼šç§’æ€åœºæ™¯éœ€è¦é™æµã€ç¼“å­˜ã€å¼‚æ­¥å¤„ç†<li><strong>æœåŠ¡æ²»ç†</strong>ï¼šæœåŠ¡æ³¨å†Œå‘ç°ã€è´Ÿè½½å‡è¡¡ã€ç†”æ–­é™çº§<li><strong>ç›‘æ§å‘Šè­¦</strong>ï¼šä¸šåŠ¡ç›‘æ§ã€æ€§èƒ½ç›‘æ§ã€å¼‚å¸¸ç›‘æ§<li><strong>å®‰å…¨é˜²æŠ¤</strong>ï¼šç”¨æˆ·è®¤è¯ã€æƒé™æ§åˆ¶ã€é˜²åˆ·<li><strong>ç¼“å­˜ç­–ç•¥</strong>ï¼šå•†å“ä¿¡æ¯ç¼“å­˜ã€ç”¨æˆ·ä¿¡æ¯ç¼“å­˜<li><strong>æ¶ˆæ¯é˜Ÿåˆ—</strong>ï¼šè®¢å•å¼‚æ­¥å¤„ç†ã€åº“å­˜å¼‚æ­¥æ›´æ–°</ul></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class=card><div class=card__header><h4>Q: å¾®æœåŠ¡æ¶æ„ä¸­å¸¸è§çš„é—®é¢˜å¦‚ä½•æ’æŸ¥ï¼Ÿ</h4></div><div class=card__body><p><strong>A:</strong> å¾®æœåŠ¡æ¶æ„é—®é¢˜æ’æŸ¥æ–¹æ³•ï¼š<ul><li><strong>æœåŠ¡è°ƒç”¨å¤±è´¥</strong>ï¼šæ£€æŸ¥æœåŠ¡æ³¨å†ŒçŠ¶æ€ã€ç½‘ç»œè¿é€šæ€§ã€æœåŠ¡å¥åº·çŠ¶æ€<li><strong>æ€§èƒ½é—®é¢˜</strong>ï¼šä½¿ç”¨APMå·¥å…·åˆ†æè°ƒç”¨é“¾ã€æ•°æ®åº“æ€§èƒ½ã€JVMæ€§èƒ½<li><strong>æ•°æ®ä¸ä¸€è‡´</strong>ï¼šæ£€æŸ¥åˆ†å¸ƒå¼äº‹åŠ¡ã€æ¶ˆæ¯é˜Ÿåˆ—ã€ç¼“å­˜ä¸€è‡´æ€§<li><strong>æœåŠ¡ç†”æ–­</strong>ï¼šæ£€æŸ¥ç†”æ–­å™¨é…ç½®ã€æœåŠ¡ä¾èµ–ã€è¶…æ—¶è®¾ç½®<li><strong>é…ç½®é—®é¢˜</strong>ï¼šæ£€æŸ¥é…ç½®ä¸­å¿ƒã€é…ç½®åˆ·æ–°ã€é…ç½®ç‰ˆæœ¬<li><strong>ç½‘ç»œé—®é¢˜</strong>ï¼šæ£€æŸ¥ç½‘ç»œå»¶è¿Ÿã€ä¸¢åŒ…ã€é˜²ç«å¢™è®¾ç½®<li><strong>èµ„æºä¸è¶³</strong>ï¼šæ£€æŸ¥CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œå¸¦å®½<li><strong>æ—¥å¿—åˆ†æ</strong>ï¼šåˆ†æåº”ç”¨æ—¥å¿—ã€ç³»ç»Ÿæ—¥å¿—ã€é”™è¯¯æ—¥å¿—</ul></div></div></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>Spring Cloudå­¦ä¹ è·¯å¾„</div><div class=admonitionContent_BuS1><p>ğŸš€ <strong>Spring Cloudå­¦ä¹ å»ºè®®</strong>ï¼š<ol>
<li class=""><strong>åŸºç¡€é˜¶æ®µ</strong>ï¼šæŒæ¡Spring Bootã€å¾®æœåŠ¡æ¶æ„æ¦‚å¿µ</li>
<li class=""><strong>ç»„ä»¶å­¦ä¹ </strong>ï¼šå­¦ä¹ Eurekaã€Gatewayã€Ribbonç­‰æ ¸å¿ƒç»„ä»¶</li>
<li class=""><strong>é«˜çº§ç‰¹æ€§</strong>ï¼šæ·±å…¥ç†è§£ç†”æ–­é™çº§ã€é…ç½®ç®¡ç†ã€é“¾è·¯è¿½è¸ª</li>
<li class=""><strong>Alibabaç”Ÿæ€</strong>ï¼šå­¦ä¹ Nacosã€Sentinelã€Seataç­‰ç»„ä»¶</li>
<li class=""><strong>æ¶æ„è®¾è®¡</strong>ï¼šæŒæ¡å¾®æœåŠ¡æ‹†åˆ†ã€æœåŠ¡æ²»ç†ã€é«˜å¯ç”¨è®¾è®¡</li>
<li class=""><strong>å®æˆ˜åº”ç”¨</strong>ï¼šé€šè¿‡é¡¹ç›®å®è·µå·©å›ºç†è®ºçŸ¥è¯†</li>
<li class=""><strong>è¿ç»´ç›‘æ§</strong>ï¼šå­¦ä¹ ç›‘æ§ã€æ—¥å¿—ã€éƒ¨ç½²ç­‰è¿ç»´çŸ¥è¯†</li>
</ol></div></div>
<!-- -->
<hr/>
<p>é€šè¿‡æœ¬ç« çš„å…¨é¢å­¦ä¹ ï¼Œä½ åº”è¯¥å·²ç»æŒæ¡äº†Spring Cloudå’ŒSpring Cloud Alibabaçš„æ ¸å¿ƒæ¦‚å¿µã€ç»„ä»¶ä½¿ç”¨ã€æ¶æ„è®¾è®¡å’Œæœ€ä½³å®è·µã€‚è¿™äº›çŸ¥è¯†å°†å¸®åŠ©ä½ æ„å»ºé«˜å¯ç”¨ã€å¯æ‰©å±•ã€æ˜“ç»´æŠ¤çš„å¾®æœåŠ¡åº”ç”¨ã€‚è®°ä½ï¼Œå¾®æœåŠ¡æ¶æ„ä¸ä»…ä»…æ˜¯æŠ€æœ¯é€‰å‹ï¼Œæ›´æ˜¯ä¸€ç§æ¶æ„æ€ç»´å’Œè®¾è®¡ç†å¿µã€‚<div class=docFooter_IWbN><div class=commentsSection_qKMH><div class=commentsContainer_DyUU><h2 class=commentsTitle_lsB6>å‚ä¸è®¨è®º</h2><div class=commentsWrapper_DNkH></div></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href=https://github.com/MasterLiu93/blog-web/tree/main/docs/backend/spring/spring-cloud.mdx target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class=theme-last-updated>Last updated<!-- --> on <b><time datetime=2025-08-07T00:00:00.000Z itemprop=dateModified>Aug 7, 2025</time></b> by <b>Laby</b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/en/docs/backend/spring/spring-boot><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Spring Bootè¯¦è§£</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/en/docs/backend/spring/transaction><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Springäº‹åŠ¡ç®¡ç†è¯¦è§£</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#1-spring-cloudåŸºç¡€æ¦‚å¿µ class="table-of-contents__link toc-highlight">1. Spring CloudåŸºç¡€æ¦‚å¿µ</a><ul><li><a href=#11-ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ class="table-of-contents__link toc-highlight">1.1 ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ</a><li><a href=#12-spring-cloudç»„ä»¶ class="table-of-contents__link toc-highlight">1.2 Spring Cloudç»„ä»¶</a></ul><li><a href=#2-æœåŠ¡æ³¨å†Œä¸å‘ç° class="table-of-contents__link toc-highlight">2. æœåŠ¡æ³¨å†Œä¸å‘ç°</a><ul><li><a href=#21-eureka-server class="table-of-contents__link toc-highlight">2.1 Eureka Server</a><li><a href=#22-eureka-client class="table-of-contents__link toc-highlight">2.2 Eureka Client</a><li><a href=#23-æœåŠ¡æ³¨å†Œç¤ºä¾‹ class="table-of-contents__link toc-highlight">2.3 æœåŠ¡æ³¨å†Œç¤ºä¾‹</a></ul><li><a href=#3-æœåŠ¡ç½‘å…³ class="table-of-contents__link toc-highlight">3. æœåŠ¡ç½‘å…³</a><ul><li><a href=#31-gatewayé…ç½® class="table-of-contents__link toc-highlight">3.1 Gatewayé…ç½®</a><li><a href=#32-è‡ªå®šä¹‰è¿‡æ»¤å™¨ class="table-of-contents__link toc-highlight">3.2 è‡ªå®šä¹‰è¿‡æ»¤å™¨</a><li><a href=#33-é™æµé…ç½® class="table-of-contents__link toc-highlight">3.3 é™æµé…ç½®</a></ul><li><a href=#4-è´Ÿè½½å‡è¡¡ class="table-of-contents__link toc-highlight">4. è´Ÿè½½å‡è¡¡</a><ul><li><a href=#41-ribboné…ç½® class="table-of-contents__link toc-highlight">4.1 Ribboné…ç½®</a><li><a href=#42-è´Ÿè½½å‡è¡¡ç­–ç•¥ class="table-of-contents__link toc-highlight">4.2 è´Ÿè½½å‡è¡¡ç­–ç•¥</a><li><a href=#43-è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡ class="table-of-contents__link toc-highlight">4.3 è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡</a></ul><li><a href=#5-ç†”æ–­é™çº§ class="table-of-contents__link toc-highlight">5. ç†”æ–­é™çº§</a><ul><li><a href=#51-hystrixé…ç½® class="table-of-contents__link toc-highlight">5.1 Hystrixé…ç½®</a><li><a href=#52-sentinelé…ç½® class="table-of-contents__link toc-highlight">5.2 Sentinelé…ç½®</a></ul><li><a href=#6-é…ç½®ç®¡ç† class="table-of-contents__link toc-highlight">6. é…ç½®ç®¡ç†</a><ul><li><a href=#61-config-server class="table-of-contents__link toc-highlight">6.1 Config Server</a><li><a href=#62-config-client class="table-of-contents__link toc-highlight">6.2 Config Client</a><li><a href=#63-åŠ¨æ€åˆ·æ–°é…ç½® class="table-of-contents__link toc-highlight">6.3 åŠ¨æ€åˆ·æ–°é…ç½®</a></ul><li><a href=#7-åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª class="table-of-contents__link toc-highlight">7. åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª</a><ul><li><a href=#71-sleuthé…ç½® class="table-of-contents__link toc-highlight">7.1 Sleuthé…ç½®</a><li><a href=#72-zipkiné…ç½® class="table-of-contents__link toc-highlight">7.2 Zipkiné…ç½®</a></ul><li><a href=#8-é¢è¯•é¢˜ç²¾é€‰ class="table-of-contents__link toc-highlight">8. é¢è¯•é¢˜ç²¾é€‰</a><ul><li><a href=#81-åŸºç¡€æ¦‚å¿µé¢˜ class="table-of-contents__link toc-highlight">8.1 åŸºç¡€æ¦‚å¿µé¢˜</a><li><a href=#82-å®è·µé¢˜ class="table-of-contents__link toc-highlight">8.2 å®è·µé¢˜</a><li><a href=#83-é«˜çº§é¢˜ class="table-of-contents__link toc-highlight">8.3 é«˜çº§é¢˜</a></ul><li><a href=#9-spring-cloud-alibaba class="table-of-contents__link toc-highlight">9. Spring Cloud Alibaba</a><ul><li><a href=#91-nacosæœåŠ¡æ³¨å†Œä¸å‘ç° class="table-of-contents__link toc-highlight">9.1 NacosæœåŠ¡æ³¨å†Œä¸å‘ç°</a><li><a href=#92-sentinelæµé‡æ§åˆ¶ class="table-of-contents__link toc-highlight">9.2 Sentinelæµé‡æ§åˆ¶</a><li><a href=#93-seataåˆ†å¸ƒå¼äº‹åŠ¡ class="table-of-contents__link toc-highlight">9.3 Seataåˆ†å¸ƒå¼äº‹åŠ¡</a><li><a href=#94-rocketmqæ¶ˆæ¯é˜Ÿåˆ— class="table-of-contents__link toc-highlight">9.4 RocketMQæ¶ˆæ¯é˜Ÿåˆ—</a></ul><li><a href=#10-å¾®æœåŠ¡æ¶æ„è®¾è®¡æ¨¡å¼ class="table-of-contents__link toc-highlight">10. å¾®æœåŠ¡æ¶æ„è®¾è®¡æ¨¡å¼</a><ul><li><a href=#101-æœåŠ¡æ‹†åˆ†æ¨¡å¼ class="table-of-contents__link toc-highlight">10.1 æœåŠ¡æ‹†åˆ†æ¨¡å¼</a><li><a href=#102-æœåŠ¡é€šä¿¡æ¨¡å¼ class="table-of-contents__link toc-highlight">10.2 æœåŠ¡é€šä¿¡æ¨¡å¼</a><li><a href=#103-æ•°æ®ä¸€è‡´æ€§æ¨¡å¼ class="table-of-contents__link toc-highlight">10.3 æ•°æ®ä¸€è‡´æ€§æ¨¡å¼</a></ul><li><a href=#11-å¾®æœåŠ¡ç›‘æ§ä¸è¿ç»´ class="table-of-contents__link toc-highlight">11. å¾®æœåŠ¡ç›‘æ§ä¸è¿ç»´</a><ul><li><a href=#111-ç›‘æ§ä½“ç³» class="table-of-contents__link toc-highlight">11.1 ç›‘æ§ä½“ç³»</a><li><a href=#112-æ—¥å¿—ç®¡ç† class="table-of-contents__link toc-highlight">11.2 æ—¥å¿—ç®¡ç†</a></ul><li><a href=#12-é¢è¯•é¢˜ç²¾é€‰å…¨é¢ç‰ˆ class="table-of-contents__link toc-highlight">12. é¢è¯•é¢˜ç²¾é€‰ï¼ˆå…¨é¢ç‰ˆï¼‰</a><ul><li><a href=#121-spring-cloudåŸºç¡€é¢˜ class="table-of-contents__link toc-highlight">12.1 Spring CloudåŸºç¡€é¢˜</a><li><a href=#122-spring-cloud-alibabaé¢˜ class="table-of-contents__link toc-highlight">12.2 Spring Cloud Alibabaé¢˜</a><li><a href=#123-åˆ†å¸ƒå¼ç³»ç»Ÿé¢˜ class="table-of-contents__link toc-highlight">12.3 åˆ†å¸ƒå¼ç³»ç»Ÿé¢˜</a><li><a href=#124-é«˜çº§æ¶æ„é¢˜ class="table-of-contents__link toc-highlight">12.4 é«˜çº§æ¶æ„é¢˜</a><li><a href=#125-å®æˆ˜åº”ç”¨é¢˜ class="table-of-contents__link toc-highlight">12.5 å®æˆ˜åº”ç”¨é¢˜</a></ul></ul></div></div></div></div></main></div></div></div><footer class=footer_xBL4><div class=container><div class=footerContent_QbTG><div class=footerSection_NcK9><div class=profileSection_obHN><img src=/img/head.jpg alt=Laby class=footerAvatar_Tac4 /><div class=profileInfo_hxzo><h3 class=profileName_hl7T>Laby</h3><p class=profileDesc_qTmn>A passionate full-stack engineer who loves all new technologies. Creating value with technology, changing the world with code.</div></div></div><div class=footerSection_NcK9><h4 class=sectionTitle_wYQ0>Quick Links</h4><ul class=linkList_QvGs><li><a href=/>Home</a><li><a href=/blog>Blog</a><li><a href=/projects>Projects</a><li><a href=/contact>Contact</a><li><a href=/about>About</a></ul></div><div class=footerSection_NcK9><h4 class=sectionTitle_wYQ0>Contact</h4><ul class=contactList_FX1g><li class=contactItem_xQY_><svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg><span>1521170425@qq.com</span><li class=contactItem_xQY_><svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/></svg><span>13261915710</span><li class=contactItem_xQY_><svg viewBox="0 0 24 24" width=16 height=16 fill=currentColor><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg><span>åŒ—äº¬</span></ul><div class=socialLinks_pCXT><a href=https://github.com/MasterLiu93 target=_blank rel="noopener noreferrer" class=socialIcon_oRq4><svg viewBox="0 0 24 24" width=20 height=20 fill=currentColor><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg></a><a href=https://twitter.com target=_blank rel="noopener noreferrer" class=socialIcon_oRq4><svg viewBox="0 0 24 24" width=20 height=20 fill=currentColor><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg></a><a href=https://linkedin.com target=_blank rel="noopener noreferrer" class=socialIcon_oRq4><svg viewBox="0 0 24 24" width=20 height=20 fill=currentColor><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg></a></div></div><div class=footerSection_NcK9><h4 class=sectionTitle_wYQ0>WeChat</h4><div class=qrcodeWrapper_Hqnk><img src=/img/user/WeChat.png alt="WeChat QR Code" class=qrcode_e_MU /><p class=qrcodeText_Hzwk>Scan to add friend</div></div></div><div class=footerBottom_SMHg><div class=copyright_g70o><p>Copyright Â© <!-- -->2025<!-- --> Labyçš„åšå®¢. Built with<!-- --> <a href=https://docusaurus.io target=_blank rel="noopener noreferrer">Docusaurus</a>.</div></div></div></footer><button class=floatingButton_SY9y aria-label="æ‰“å¼€ AI åŠ©æ‰‹"><span role=img aria-label=robot class="anticon anticon-robot icon_PXiV"><svg viewBox="64 64 896 896" focusable=false data-icon=robot width=1em height=1em fill=currentColor aria-hidden=true><path d="M300 328a60 60 0 10120 0 60 60 0 10-120 0zM852 64H172c-17.7 0-32 14.3-32 32v660c0 17.7 14.3 32 32 32h680c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-32 660H204V128h616v596zM604 328a60 60 0 10120 0 60 60 0 10-120 0zm250.2 556H169.8c-16.5 0-29.8 14.3-29.8 32v36c0 4.4 3.3 8 7.4 8h729.1c4.1 0 7.4-3.6 7.4-8v-36c.1-17.7-13.2-32-29.7-32zM664 508H360c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"/></svg></span><span class=badge_DEfZ>AI</span></button></div></body>