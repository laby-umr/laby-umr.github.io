"use strict";(self.webpackChunkfullstack_dev_blog=self.webpackChunkfullstack_dev_blog||[]).push([["40564"],{93328:function(n,e,r){r.r(e),r.d(e,{metadata:()=>s,default:()=>p,frontMatter:()=>l,contentTitle:()=>c,toc:()=>o,assets:()=>a});var s=JSON.parse('{"id":"interview/java-SpringBoot","title":"Java SpringBoot \u9762\u8BD5\u9898\u96C6","description":"\u603B\u9898\u6570 \u81EA\u52A8\u914D\u7F6E\u3001Starter\u3001\u5FAE\u670D\u52A1 |  \u96BE\u5EA6\u5206\u5E03: \u4E2D\u7EA7","source":"@site/docs/interview/java-SpringBoot.md","sourceDirName":"interview","slug":"/interview/java-SpringBoot","permalink":"/docs/interview/java-SpringBoot","draft":false,"unlisted":false,"editUrl":"https://github.com/MasterLiu93/blog-web/tree/main/docs/interview/java-SpringBoot.md","tags":[],"version":"current","lastUpdatedBy":"laby","lastUpdatedAt":1763643037000,"frontMatter":{}}'),i=r(74848),t=r(28453);let l={},c="Java SpringBoot \u9762\u8BD5\u9898\u96C6",a={},o=[{value:"\u9762\u8BD5\u9898\u76EE\u5217\u8868",id:"\u9762\u8BD5\u9898\u76EE\u5217\u8868",level:2},{value:"1. Spring Boot \u5DE5\u7A0B\u542F\u52A8\u4EE5\u540E\uFF0C\u6211\u5E0C\u671B\u5C06\u6570\u636E\u5E93\u4E2D\u5DF2\u6709\u7684\u56FA\u5B9A\u5185\u5BB9\uFF0C\u6253\u5165\u5230 Redis \u7F13\u5B58\u4E2D\uFF0C\u8BF7\u95EE\u5982\u4F55\u5904\u7406\uFF1F",id:"1-spring-boot-\u5DE5\u7A0B\u542F\u52A8\u4EE5\u540E\u6211\u5E0C\u671B\u5C06\u6570\u636E\u5E93\u4E2D\u5DF2\u6709\u7684\u56FA\u5B9A\u5185\u5BB9\u6253\u5165\u5230-redis-\u7F13\u5B58\u4E2D\u8BF7\u95EE\u5982\u4F55\u5904\u7406",level:3},{value:"2. \u8BF4\u8BF4 Springboot \u7684\u542F\u52A8\u6D41\u7A0B\uFF1F",id:"2-\u8BF4\u8BF4-springboot-\u7684\u542F\u52A8\u6D41\u7A0B",level:3},{value:"3. \u4EC0\u4E48\u662F Spring Boot\uFF1F",id:"3-\u4EC0\u4E48\u662F-spring-boot",level:3},{value:"4. Spring Boot \u7684\u6838\u5FC3\u7279\u6027\u6709\u54EA\u4E9B\uFF1F",id:"4-spring-boot-\u7684\u6838\u5FC3\u7279\u6027\u6709\u54EA\u4E9B",level:3},{value:"5. Spring Boot \u662F\u5982\u4F55\u901A\u8FC7 main \u65B9\u6CD5\u542F\u52A8 web \u9879\u76EE\u7684\uFF1F",id:"5-spring-boot-\u662F\u5982\u4F55\u901A\u8FC7-main-\u65B9\u6CD5\u542F\u52A8-web-\u9879\u76EE\u7684",level:3},{value:"6. SpringBoot \u662F\u5982\u4F55\u5B9E\u73B0\u81EA\u52A8\u914D\u7F6E\u7684\uFF1F",id:"6-springboot-\u662F\u5982\u4F55\u5B9E\u73B0\u81EA\u52A8\u914D\u7F6E\u7684",level:3},{value:"7. Spring Boot \u652F\u6301\u54EA\u4E9B\u5D4C\u5165 Web \u5BB9\u5668\uFF1F",id:"7-spring-boot-\u652F\u6301\u54EA\u4E9B\u5D4C\u5165-web-\u5BB9\u5668",level:3},{value:"8. Spring Boot \u4E2D application.properties \u548C application.yml \u7684\u533A\u522B\u662F\u4EC0\u4E48\uFF1F",id:"8-spring-boot-\u4E2D-applicationproperties-\u548C-applicationyml-\u7684\u533A\u522B\u662F\u4EC0\u4E48",level:3},{value:"9. \u5982\u4F55\u5728 Spring Boot \u4E2D\u5B9A\u4E49\u548C\u8BFB\u53D6\u81EA\u5B9A\u4E49\u914D\u7F6E\uFF1F",id:"9-\u5982\u4F55\u5728-spring-boot-\u4E2D\u5B9A\u4E49\u548C\u8BFB\u53D6\u81EA\u5B9A\u4E49\u914D\u7F6E",level:3},{value:"10. Spring Boot \u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u4F18\u5148\u7EA7\u4F60\u77E5\u9053\u5417\uFF1F",id:"10-spring-boot-\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u4F18\u5148\u7EA7\u4F60\u77E5\u9053\u5417",level:3},{value:"11. Spring Boot \u6253\u6210\u7684 jar \u548C\u666E\u901A\u7684 jar \u6709\u4EC0\u4E48\u533A\u522B ?",id:"11-spring-boot-\u6253\u6210\u7684-jar-\u548C\u666E\u901A\u7684-jar-\u6709\u4EC0\u4E48\u533A\u522B-",level:3},{value:"12. Spring Boot \u662F\u5426\u53EF\u4EE5\u4F7F\u7528 XML \u914D\u7F6E ?",id:"12-spring-boot-\u662F\u5426\u53EF\u4EE5\u4F7F\u7528-xml-\u914D\u7F6E-",level:3},{value:"13. SpringBoot \u9ED8\u8BA4\u540C\u65F6\u53EF\u4EE5\u5904\u7406\u7684\u6700\u5927\u8FDE\u63A5\u6570\u662F\u591A\u5C11\uFF1F",id:"13-springboot-\u9ED8\u8BA4\u540C\u65F6\u53EF\u4EE5\u5904\u7406\u7684\u6700\u5927\u8FDE\u63A5\u6570\u662F\u591A\u5C11",level:3},{value:"14. \u5982\u4F55\u7406\u89E3 Spring Boot \u4E2D\u7684 starter\uFF1F",id:"14-\u5982\u4F55\u7406\u89E3-spring-boot-\u4E2D\u7684-starter",level:3},{value:"15. Spring Boot \u5982\u4F55\u5904\u7406\u8DE8\u57DF\u8BF7\u6C42\uFF08CORS\uFF09\uFF1F",id:"15-spring-boot-\u5982\u4F55\u5904\u7406\u8DE8\u57DF\u8BF7\u6C42cors",level:3},{value:"16. \u5728 Spring Boot \u4E2D\u4F60\u662F\u600E\u4E48\u4F7F\u7528\u62E6\u622A\u5668\u7684\uFF1F",id:"16-\u5728-spring-boot-\u4E2D\u4F60\u662F\u600E\u4E48\u4F7F\u7528\u62E6\u622A\u5668\u7684",level:3},{value:"17. SpringBoot \u4E2D\u5982\u4F55\u5B9E\u73B0\u5B9A\u65F6\u4EFB\u52A1 ?",id:"17-springboot-\u4E2D\u5982\u4F55\u5B9E\u73B0\u5B9A\u65F6\u4EFB\u52A1-",level:3},{value:"18. \u4EC0\u4E48\u662F Spring Actuator\uFF1F\u5B83\u6709\u4EC0\u4E48\u4F18\u52BF\uFF1F",id:"18-\u4EC0\u4E48\u662F-spring-actuator\u5B83\u6709\u4EC0\u4E48\u4F18\u52BF",level:3},{value:"19. Spring Boot 2.x \u4E0E 1.x \u7248\u672C\u6709\u54EA\u4E9B\u4E3B\u8981\u7684\u6539\u8FDB\u548C\u533A\u522B\uFF1F",id:"19-spring-boot-2x-\u4E0E-1x-\u7248\u672C\u6709\u54EA\u4E9B\u4E3B\u8981\u7684\u6539\u8FDB\u548C\u533A\u522B",level:3},{value:"20. Spring Boot 3.x \u4E0E 2.x \u7248\u672C\u6709\u54EA\u4E9B\u4E3B\u8981\u7684\u6539\u8FDB\u548C\u533A\u522B\uFF1F",id:"20-spring-boot-3x-\u4E0E-2x-\u7248\u672C\u6709\u54EA\u4E9B\u4E3B\u8981\u7684\u6539\u8FDB\u548C\u533A\u522B",level:3},{value:"21. \u8BF4\u8BF4\u4F60\u5BF9 Spring Boot \u4E8B\u4EF6\u673A\u5236\u7684\u4E86\u89E3\uFF1F",id:"21-\u8BF4\u8BF4\u4F60\u5BF9-spring-boot-\u4E8B\u4EF6\u673A\u5236\u7684\u4E86\u89E3",level:3},{value:"22. \u5728 Spring Boot \u4E2D\u5982\u4F55\u5B9E\u73B0\u591A\u6570\u636E\u6E90\u914D\u7F6E\uFF1F",id:"22-\u5728-spring-boot-\u4E2D\u5982\u4F55\u5B9E\u73B0\u591A\u6570\u636E\u6E90\u914D\u7F6E",level:3},{value:"23. Spring Boot \u4E2D\u5982\u4F55\u5B9E\u73B0\u5F02\u6B65\u5904\u7406\uFF1F",id:"23-spring-boot-\u4E2D\u5982\u4F55\u5B9E\u73B0\u5F02\u6B65\u5904\u7406",level:3},{value:"24. Spring \u5982\u4F55\u5728 SpringBoot \u542F\u52A8\u65F6\u6267\u884C\u7279\u5B9A\u4EE3\u7801\uFF1F\u6709\u54EA\u4E9B\u65B9\u5F0F\uFF1F",id:"24-spring-\u5982\u4F55\u5728-springboot-\u542F\u52A8\u65F6\u6267\u884C\u7279\u5B9A\u4EE3\u7801\u6709\u54EA\u4E9B\u65B9\u5F0F",level:3},{value:"25. Spring SpringBoot\uFF08Spring\uFF09\u4E2D\u4E3A\u4EC0\u4E48\u4E0D\u63A8\u8350\u4F7F\u7528 @Autowired \uFF1F",id:"25-spring-springbootspring\u4E2D\u4E3A\u4EC0\u4E48\u4E0D\u63A8\u8350\u4F7F\u7528-autowired-",level:3},{value:"26. @Async \u4EC0\u4E48\u65F6\u5019\u4F1A\u5931\u6548\uFF1F",id:"26-async-\u4EC0\u4E48\u65F6\u5019\u4F1A\u5931\u6548",level:3},{value:"\u5B66\u4E60\u6307\u5357",id:"\u5B66\u4E60\u6307\u5357",level:2}];function d(n){let e={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"java-springboot-\u9762\u8BD5\u9898\u96C6",children:"Java SpringBoot \u9762\u8BD5\u9898\u96C6"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u603B\u9898\u6570"}),": 26\u9053 |  ",(0,i.jsx)(e.strong,{children:"\u91CD\u70B9\u9886\u57DF"}),": \u81EA\u52A8\u914D\u7F6E\u3001Starter\u3001\u5FAE\u670D\u52A1 |  ",(0,i.jsx)(e.strong,{children:"\u96BE\u5EA6\u5206\u5E03"}),": \u4E2D\u7EA7"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u672C\u6587\u6863\u6574\u7406\u4E86 Java Spring Boot \u7684\u5B8C\u657426\u9053\u9762\u8BD5\u9898\u76EE\uFF0C\u6DB5\u76D6\u81EA\u52A8\u914D\u7F6E\u3001Starter\u673A\u5236\u3001\u5FAE\u670D\u52A1\u5F00\u53D1\u7B49\u5404\u4E2A\u65B9\u9762\u3002"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u9762\u8BD5\u9898\u76EE\u5217\u8868",children:"\u9762\u8BD5\u9898\u76EE\u5217\u8868"}),"\n",(0,i.jsx)(e.h3,{id:"1-spring-boot-\u5DE5\u7A0B\u542F\u52A8\u4EE5\u540E\u6211\u5E0C\u671B\u5C06\u6570\u636E\u5E93\u4E2D\u5DF2\u6709\u7684\u56FA\u5B9A\u5185\u5BB9\u6253\u5165\u5230-redis-\u7F13\u5B58\u4E2D\u8BF7\u95EE\u5982\u4F55\u5904\u7406",children:"1. Spring Boot \u5DE5\u7A0B\u542F\u52A8\u4EE5\u540E\uFF0C\u6211\u5E0C\u671B\u5C06\u6570\u636E\u5E93\u4E2D\u5DF2\u6709\u7684\u56FA\u5B9A\u5185\u5BB9\uFF0C\u6253\u5165\u5230 Redis \u7F13\u5B58\u4E2D\uFF0C\u8BF7\u95EE\u5982\u4F55\u5904\u7406\uFF1F"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,i.jsx)(e.p,{children:"\u6709\u4EE5\u4E0B\u51E0\u79CD\u65B9\u5F0F\u53EF\u4EE5\u5728 Spring Boot \u542F\u52A8\u540E\u6267\u884C\u521D\u59CB\u5316\u64CD\u4F5C\uFF1A"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F\u4E00\uFF1A\u5B9E\u73B0 CommandLineRunner \u63A5\u53E3"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\n@Order(1)  // \u591A\u4E2A\u5B9E\u73B0\u65F6\u53EF\u4EE5\u6307\u5B9A\u6267\u884C\u987A\u5E8F\npublic class RedisInitRunner implements CommandLineRunner {\n    @Autowired\n    private UserRepository userRepository;\n    @Autowired\n    private RedisTemplate<String, Object> redisTemplate;\n    \n    @Override\n    public void run(String... args) throws Exception {\n        List<User> users = userRepository.findAll();\n        users.forEach(user -> {\n            redisTemplate.opsForValue().set("user:" + user.getId(), user);\n        });\n        System.out.println("Redis \u7F13\u5B58\u521D\u59CB\u5316\u5B8C\u6210");\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F\u4E8C\uFF1A\u5B9E\u73B0 ApplicationRunner \u63A5\u53E3"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Component\npublic class RedisInitApplicationRunner implements ApplicationRunner {\n    @Autowired\n    private DataService dataService;\n    @Autowired\n    private RedisTemplate<String, Object> redisTemplate;\n    \n    @Override\n    public void run(ApplicationArguments args) throws Exception {\n        // \u52A0\u8F7D\u56FA\u5B9A\u914D\u7F6E\u6570\u636E\n        Map<String, Object> configData = dataService.loadConfigData();\n        configData.forEach((key, value) -> {\n            redisTemplate.opsForValue().set(key, value);\n        });\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F\u4E09\uFF1A\u4F7F\u7528 @PostConstruct \u6CE8\u89E3"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\npublic class RedisInitializer {\n    @Autowired\n    private DataRepository dataRepository;\n    @Autowired\n    private RedisTemplate<String, Object> redisTemplate;\n    \n    @PostConstruct\n    public void init() {\n        // \u6CE8\u610F\uFF1A\u6B64\u65F6 Spring \u5BB9\u5668\u53EF\u80FD\u8FD8\u672A\u5B8C\u5168\u521D\u59CB\u5316\n        List<Data> dataList = dataRepository.findAll();\n        dataList.forEach(data -> {\n            redisTemplate.opsForValue().set("data:" + data.getId(), data);\n        });\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F\u56DB\uFF1A\u76D1\u542C ApplicationReadyEvent \u4E8B\u4EF6"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\npublic class RedisInitListener {\n    @Autowired\n    private RedisTemplate<String, Object> redisTemplate;\n    @Autowired\n    private ConfigRepository configRepository;\n    \n    @EventListener(ApplicationReadyEvent.class)\n    public void onApplicationReady() {\n        // \u5E94\u7528\u5B8C\u5168\u542F\u52A8\u540E\u6267\u884C\n        List<Config> configs = configRepository.findAll();\n        configs.forEach(config -> {\n            redisTemplate.opsForHash().put("configs", config.getKey(), config.getValue());\n        });\n    }\n}\n'})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u63A8\u8350\u65B9\u6848\uFF1A"})," \u4F7F\u7528 ",(0,i.jsx)(e.code,{children:"ApplicationRunner"})," \u6216\u76D1\u542C ",(0,i.jsx)(e.code,{children:"ApplicationReadyEvent"}),"\uFF0C\u56E0\u4E3A\u5B83\u4EEC\u5728\u5E94\u7528\u5B8C\u5168\u542F\u52A8\u540E\u6267\u884C\uFF0C\u6B64\u65F6\u6240\u6709 Bean \u90FD\u5DF2\u521D\u59CB\u5316\u5B8C\u6210\u3002"]}),"\n",(0,i.jsx)(e.h3,{id:"2-\u8BF4\u8BF4-springboot-\u7684\u542F\u52A8\u6D41\u7A0B",children:"2. \u8BF4\u8BF4 Springboot \u7684\u542F\u52A8\u6D41\u7A0B\uFF1F"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,i.jsx)(e.p,{children:"Spring Boot \u7684\u542F\u52A8\u6D41\u7A0B\u4E3B\u8981\u5206\u4E3A\u4EE5\u4E0B\u51E0\u4E2A\u9636\u6BB5\uFF1A"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u542F\u52A8\u5165\u53E3"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@SpringBootApplication\npublic class Application {\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u8BE6\u7EC6\u542F\u52A8\u6D41\u7A0B"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"1. \u521B\u5EFA SpringApplication \u5B9E\u4F8B\n   \u251C\u2500 \u63A8\u65AD\u5E94\u7528\u7C7B\u578B\uFF08Servlet\u3001Reactive\u3001None\uFF09\n   \u251C\u2500 \u52A0\u8F7D ApplicationContextInitializer\n   \u251C\u2500 \u52A0\u8F7D ApplicationListener\n   \u2514\u2500 \u63A8\u65AD\u4E3B\u542F\u52A8\u7C7B\n\n2. \u6267\u884C run() \u65B9\u6CD5\n   \u251C\u2500 \u521B\u5EFA StopWatch\uFF08\u8BB0\u5F55\u542F\u52A8\u65F6\u95F4\uFF09\n   \u251C\u2500 \u914D\u7F6E Headless \u5C5E\u6027\n   \u251C\u2500 \u83B7\u53D6\u5E76\u542F\u52A8 SpringApplicationRunListeners\n   \u251C\u2500 \u51C6\u5907\u73AF\u5883\uFF08Environment\uFF09\n   \u2502  \u251C\u2500 \u521B\u5EFA\u73AF\u5883\u5BF9\u8C61\n   \u2502  \u251C\u2500 \u914D\u7F6E\u73AF\u5883\n   \u2502  \u2514\u2500 \u53D1\u5E03 ApplicationEnvironmentPreparedEvent\n   \u251C\u2500 \u6253\u5370 Banner\n   \u251C\u2500 \u521B\u5EFA ApplicationContext\n   \u2502  \u251C\u2500 \u6839\u636E\u5E94\u7528\u7C7B\u578B\u521B\u5EFA\u5BF9\u5E94\u7684\u4E0A\u4E0B\u6587\n   \u2502  \u2514\u2500 AnnotationConfigServletWebServerApplicationContext\n   \u251C\u2500 \u51C6\u5907 ApplicationContext\n   \u2502  \u251C\u2500 \u8BBE\u7F6E\u73AF\u5883\n   \u2502  \u251C\u2500 \u540E\u7F6E\u5904\u7406\uFF08postProcessApplicationContext\uFF09\n   \u2502  \u251C\u2500 \u5E94\u7528\u521D\u59CB\u5316\u5668\uFF08applyInitializers\uFF09\n   \u2502  \u2514\u2500 \u53D1\u5E03 ApplicationContextInitializedEvent\n   \u251C\u2500 \u52A0\u8F7D Bean \u5B9A\u4E49\n   \u2502  \u251C\u2500 \u52A0\u8F7D\u4E3B\u914D\u7F6E\u7C7B\n   \u2502  \u2514\u2500 \u53D1\u5E03 ApplicationPreparedEvent\n   \u251C\u2500 \u5237\u65B0\u4E0A\u4E0B\u6587\uFF08refresh\uFF09\n   \u2502  \u251C\u2500 \u51C6\u5907\u5237\u65B0\n   \u2502  \u251C\u2500 \u83B7\u53D6 BeanFactory\n   \u2502  \u251C\u2500 \u51C6\u5907 BeanFactory\n   \u2502  \u251C\u2500 \u540E\u7F6E\u5904\u7406 BeanFactory\n   \u2502  \u251C\u2500 \u8C03\u7528 BeanFactoryPostProcessor\n   \u2502  \u251C\u2500 \u6CE8\u518C BeanPostProcessor\n   \u2502  \u251C\u2500 \u521D\u59CB\u5316\u6D88\u606F\u6E90\n   \u2502  \u251C\u2500 \u521D\u59CB\u5316\u4E8B\u4EF6\u5E7F\u64AD\u5668\n   \u2502  \u251C\u2500 \u5237\u65B0\u7279\u5B9A\u4E0A\u4E0B\u6587\uFF08\u521B\u5EFA Web \u5BB9\u5668\uFF09\n   \u2502  \u251C\u2500 \u6CE8\u518C\u76D1\u542C\u5668\n   \u2502  \u251C\u2500 \u5B9E\u4F8B\u5316\u6240\u6709\u975E\u61D2\u52A0\u8F7D\u5355\u4F8B Bean\n   \u2502  \u2514\u2500 \u5B8C\u6210\u5237\u65B0\uFF08\u53D1\u5E03 ContextRefreshedEvent\uFF09\n   \u251C\u2500 \u5237\u65B0\u540E\u5904\u7406\uFF08afterRefresh\uFF09\n   \u251C\u2500 \u53D1\u5E03 ApplicationStartedEvent\n   \u251C\u2500 \u8C03\u7528 Runners\uFF08CommandLineRunner\u3001ApplicationRunner\uFF09\n   \u251C\u2500 \u53D1\u5E03 ApplicationReadyEvent\n   \u2514\u2500 \u542F\u52A8\u5B8C\u6210\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u6838\u5FC3\u6B65\u9AA4\u8BF4\u660E"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u63A8\u65AD\u5E94\u7528\u7C7B\u578B"}),"\uFF1A\u6839\u636E classpath \u4E2D\u7684\u7C7B\u5224\u65AD\u662F Web \u5E94\u7528\u8FD8\u662F\u666E\u901A\u5E94\u7528"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u52A0\u8F7D\u521D\u59CB\u5316\u5668\u548C\u76D1\u542C\u5668"}),"\uFF1A\u4ECE ",(0,i.jsx)(e.code,{children:"META-INF/spring.factories"})," \u52A0\u8F7D"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u51C6\u5907\u73AF\u5883"}),"\uFF1A\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\uFF08application.properties/yml\uFF09"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u521B\u5EFA\u4E0A\u4E0B\u6587"}),"\uFF1A\u6839\u636E\u5E94\u7528\u7C7B\u578B\u521B\u5EFA\u5BF9\u5E94\u7684 ApplicationContext"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u81EA\u52A8\u914D\u7F6E"}),"\uFF1A\u901A\u8FC7 ",(0,i.jsx)(e.code,{children:"@EnableAutoConfiguration"})," \u52A0\u8F7D\u81EA\u52A8\u914D\u7F6E\u7C7B"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u542F\u52A8\u5185\u5D4C\u5BB9\u5668"}),"\uFF1A\u5982 Tomcat\u3001Jetty\u3001Undertow"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6267\u884C Runners"}),"\uFF1A\u6267\u884C\u7528\u6237\u81EA\u5B9A\u4E49\u7684\u521D\u59CB\u5316\u903B\u8F91"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4. \u5173\u952E\u6E90\u7801\u4F4D\u7F6E"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"// SpringApplication.java\npublic ConfigurableApplicationContext run(String... args) {\n    StopWatch stopWatch = new StopWatch();\n    stopWatch.start();\n    ConfigurableApplicationContext context = null;\n    Collection<SpringBootExceptionReporter> exceptionReporters = new ArrayList<>();\n    configureHeadlessProperty();\n    SpringApplicationRunListeners listeners = getRunListeners(args);\n    listeners.starting();\n    try {\n        ApplicationArguments applicationArguments = new DefaultApplicationArguments(args);\n        ConfigurableEnvironment environment = prepareEnvironment(listeners, applicationArguments);\n        Banner printedBanner = printBanner(environment);\n        context = createApplicationContext();\n        exceptionReporters = getSpringFactoriesInstances(SpringBootExceptionReporter.class,\n                new Class[] { ConfigurableApplicationContext.class }, context);\n        prepareContext(context, environment, listeners, applicationArguments, printedBanner);\n        refreshContext(context);\n        afterRefresh(context, applicationArguments);\n        stopWatch.stop();\n        listeners.started(context);\n        callRunners(context, applicationArguments);\n    } catch (Throwable ex) {\n        handleRunFailure(context, ex, exceptionReporters, listeners);\n        throw new IllegalStateException(ex);\n    }\n    listeners.running(context);\n    return context;\n}\n"})}),"\n",(0,i.jsx)(e.h3,{id:"3-\u4EC0\u4E48\u662F-spring-boot",children:"3. \u4EC0\u4E48\u662F Spring Boot\uFF1F"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,i.jsx)(e.p,{children:"Spring Boot \u662F\u7531 Pivotal \u56E2\u961F\u63D0\u4F9B\u7684\u57FA\u4E8E Spring \u6846\u67B6\u7684\u5168\u65B0\u6846\u67B6\uFF0C\u65E8\u5728\u7B80\u5316 Spring \u5E94\u7528\u7684\u521D\u59CB\u642D\u5EFA\u548C\u5F00\u53D1\u8FC7\u7A0B\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6838\u5FC3\u7406\u5FF5\uFF1A"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7EA6\u5B9A\u4F18\u4E8E\u914D\u7F6E\uFF08Convention over Configuration\uFF09"}),"\uFF1A\u63D0\u4F9B\u9ED8\u8BA4\u914D\u7F6E\uFF0C\u51CF\u5C11\u5F00\u53D1\u8005\u914D\u7F6E\u5DE5\u4F5C"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5F00\u7BB1\u5373\u7528\uFF08Out of the Box\uFF09"}),"\uFF1A\u5FEB\u901F\u542F\u52A8\u548C\u8FD0\u884C\u5E94\u7528"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u72EC\u7ACB\u8FD0\u884C"}),"\uFF1A\u5185\u5D4C Web \u5BB9\u5668\uFF0C\u53EF\u4EE5\u72EC\u7ACB\u8FD0\u884C"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4E3B\u8981\u7279\u70B9\uFF1A"})}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B80\u5316\u914D\u7F6E"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u65E0\u9700\u7E41\u7410\u7684 XML \u914D\u7F6E"}),"\n",(0,i.jsx)(e.li,{children:"\u4F7F\u7528\u6CE8\u89E3\u548C\u81EA\u52A8\u914D\u7F6E"}),"\n",(0,i.jsx)(e.li,{children:"\u63D0\u4F9B\u9ED8\u8BA4\u914D\u7F6E\u503C"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5FEB\u901F\u5F00\u53D1"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u63D0\u4F9B\u5927\u91CF Starter \u4F9D\u8D56"}),"\n",(0,i.jsx)(e.li,{children:"\u81EA\u52A8\u914D\u7F6E\u5E38\u7528\u6846\u67B6"}),"\n",(0,i.jsx)(e.li,{children:"\u5FEB\u901F\u642D\u5EFA\u9879\u76EE\u9AA8\u67B6"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u72EC\u7ACB\u8FD0\u884C"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5185\u5D4C Tomcat\u3001Jetty\u3001Undertow"}),"\n",(0,i.jsx)(e.li,{children:"\u6253\u5305\u6210\u53EF\u6267\u884C JAR"}),"\n",(0,i.jsx)(e.li,{children:"\u65E0\u9700\u90E8\u7F72\u5230\u5916\u90E8\u5BB9\u5668"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u751F\u4EA7\u5C31\u7EEA"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u63D0\u4F9B\u5065\u5EB7\u68C0\u67E5\u3001\u76D1\u63A7\u3001\u6307\u6807"}),"\n",(0,i.jsx)(e.li,{children:"Actuator \u7AEF\u70B9"}),"\n",(0,i.jsx)(e.li,{children:"\u5916\u90E8\u5316\u914D\u7F6E"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4E0E\u4F20\u7EDF Spring \u7684\u533A\u522B\uFF1A"})}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u7279\u6027"}),(0,i.jsx)(e.th,{children:"\u4F20\u7EDF Spring"}),(0,i.jsx)(e.th,{children:"Spring Boot"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u914D\u7F6E\u65B9\u5F0F"}),(0,i.jsx)(e.td,{children:"\u5927\u91CF XML \u914D\u7F6E"}),(0,i.jsx)(e.td,{children:"\u6CE8\u89E3 + \u81EA\u52A8\u914D\u7F6E"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u4F9D\u8D56\u7BA1\u7406"}),(0,i.jsx)(e.td,{children:"\u624B\u52A8\u7BA1\u7406\u7248\u672C"}),(0,i.jsx)(e.td,{children:"Starter \u7EDF\u4E00\u7BA1\u7406"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u5BB9\u5668\u90E8\u7F72"}),(0,i.jsx)(e.td,{children:"\u9700\u8981\u5916\u90E8\u5BB9\u5668"}),(0,i.jsx)(e.td,{children:"\u5185\u5D4C\u5BB9\u5668"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u542F\u52A8\u65B9\u5F0F"}),(0,i.jsx)(e.td,{children:"\u90E8\u7F72 WAR \u5305"}),(0,i.jsx)(e.td,{children:"\u8FD0\u884C JAR \u5305"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u5F00\u53D1\u6548\u7387"}),(0,i.jsx)(e.td,{children:"\u914D\u7F6E\u7E41\u7410"}),(0,i.jsx)(e.td,{children:"\u5FEB\u901F\u5F00\u53D1"})]})]})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u793A\u4F8B\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"// \u4F20\u7EDF Spring \u9700\u8981\u5927\u91CF\u914D\u7F6E\n// Spring Boot \u53EA\u9700\u4E00\u4E2A\u6CE8\u89E3\n@SpringBootApplication\npublic class Application {\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n"})}),"\n",(0,i.jsx)(e.h3,{id:"4-spring-boot-\u7684\u6838\u5FC3\u7279\u6027\u6709\u54EA\u4E9B",children:"4. Spring Boot \u7684\u6838\u5FC3\u7279\u6027\u6709\u54EA\u4E9B\uFF1F"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u81EA\u52A8\u914D\u7F6E\uFF08Auto-Configuration\uFF09"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6839\u636E\u9879\u76EE\u4F9D\u8D56\u81EA\u52A8\u914D\u7F6E Spring \u5E94\u7528"}),"\n",(0,i.jsxs)(e.li,{children:["\u901A\u8FC7 ",(0,i.jsx)(e.code,{children:"@EnableAutoConfiguration"})," \u5B9E\u73B0"]}),"\n",(0,i.jsxs)(e.li,{children:["\u53EF\u4EE5\u901A\u8FC7 ",(0,i.jsx)(e.code,{children:"exclude"})," \u6392\u9664\u4E0D\u9700\u8981\u7684\u81EA\u52A8\u914D\u7F6E"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class})\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. Starter \u4F9D\u8D56\uFF08Starter Dependencies\uFF09"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u9884\u5B9A\u4E49\u7684\u4F9D\u8D56\u63CF\u8FF0\u7B26"}),"\n",(0,i.jsx)(e.li,{children:"\u7B80\u5316 Maven/Gradle \u914D\u7F6E"}),"\n",(0,i.jsxs)(e.li,{children:["\u5E38\u7528 Starter\uFF1A","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"spring-boot-starter-web"}),"\uFF1AWeb \u5F00\u53D1"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"spring-boot-starter-data-jpa"}),"\uFF1AJPA \u6570\u636E\u8BBF\u95EE"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"spring-boot-starter-security"}),"\uFF1A\u5B89\u5168\u6846\u67B6"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"spring-boot-starter-test"}),"\uFF1A\u6D4B\u8BD5\u6846\u67B6"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u5185\u5D4C\u5BB9\u5668\uFF08Embedded Server\uFF09"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5185\u7F6E Tomcat\u3001Jetty\u3001Undertow"}),"\n",(0,i.jsx)(e.li,{children:"\u65E0\u9700\u90E8\u7F72 WAR \u5305"}),"\n",(0,i.jsx)(e.li,{children:"\u76F4\u63A5\u8FD0\u884C JAR \u5305"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:"<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-web</artifactId>\n    \x3c!-- \u9ED8\u8BA4\u4F7F\u7528 Tomcat --\x3e\n</dependency>\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4. Actuator \u76D1\u63A7"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u63D0\u4F9B\u751F\u4EA7\u7EA7\u522B\u7684\u76D1\u63A7\u548C\u7BA1\u7406\u529F\u80FD"}),"\n",(0,i.jsx)(e.li,{children:"\u5065\u5EB7\u68C0\u67E5\u3001\u6307\u6807\u6536\u96C6\u3001\u5BA1\u8BA1"}),"\n",(0,i.jsxs)(e.li,{children:["\u5E38\u7528\u7AEF\u70B9\uFF1A","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"/actuator/health"}),"\uFF1A\u5065\u5EB7\u72B6\u6001"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"/actuator/metrics"}),"\uFF1A\u5E94\u7528\u6307\u6807"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"/actuator/info"}),"\uFF1A\u5E94\u7528\u4FE1\u606F"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"/actuator/env"}),"\uFF1A\u73AF\u5883\u53D8\u91CF"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"5. \u5916\u90E8\u5316\u914D\u7F6E\uFF08Externalized Configuration\uFF09"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u652F\u6301\u591A\u79CD\u914D\u7F6E\u6E90"}),"\n",(0,i.jsx)(e.li,{children:"\u914D\u7F6E\u6587\u4EF6\uFF1Aapplication.properties/yml"}),"\n",(0,i.jsx)(e.li,{children:"\u73AF\u5883\u53D8\u91CF\u3001\u547D\u4EE4\u884C\u53C2\u6570"}),"\n",(0,i.jsx)(e.li,{children:"\u914D\u7F6E\u4F18\u5148\u7EA7\u673A\u5236"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"# application.yml\nserver:\n  port: 8080\nspring:\n  datasource:\n    url: jdbc:mysql://localhost:3306/db\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"6. Spring Boot CLI"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u547D\u4EE4\u884C\u5DE5\u5177"}),"\n",(0,i.jsx)(e.li,{children:"\u5FEB\u901F\u539F\u578B\u5F00\u53D1"}),"\n",(0,i.jsx)(e.li,{children:"Groovy \u811A\u672C\u652F\u6301"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"7. \u5F00\u53D1\u8005\u5DE5\u5177\uFF08DevTools\uFF09"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u70ED\u90E8\u7F72\uFF08\u81EA\u52A8\u91CD\u542F\uFF09"}),"\n",(0,i.jsx)(e.li,{children:"LiveReload \u652F\u6301"}),"\n",(0,i.jsx)(e.li,{children:"\u5F00\u53D1\u65F6\u914D\u7F6E"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:"<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-devtools</artifactId>\n    <optional>true</optional>\n</dependency>\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"8. \u7B80\u5316\u7684\u6D4B\u8BD5"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"@SpringBootTest"})," \u6CE8\u89E3"]}),"\n",(0,i.jsx)(e.li,{children:"\u81EA\u52A8\u914D\u7F6E\u6D4B\u8BD5\u73AF\u5883"}),"\n",(0,i.jsx)(e.li,{children:"Mock \u652F\u6301"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@SpringBootTest\nclass ApplicationTests {\n    @Test\n    void contextLoads() {\n    }\n}\n"})}),"\n",(0,i.jsx)(e.h3,{id:"5-spring-boot-\u662F\u5982\u4F55\u901A\u8FC7-main-\u65B9\u6CD5\u542F\u52A8-web-\u9879\u76EE\u7684",children:"5. Spring Boot \u662F\u5982\u4F55\u901A\u8FC7 main \u65B9\u6CD5\u542F\u52A8 web \u9879\u76EE\u7684\uFF1F"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,i.jsxs)(e.p,{children:["Spring Boot \u901A\u8FC7 ",(0,i.jsx)(e.code,{children:"SpringApplication.run()"})," \u65B9\u6CD5\u542F\u52A8 Web \u9879\u76EE\uFF0C\u6838\u5FC3\u539F\u7406\u5982\u4E0B\uFF1A"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u542F\u52A8\u5165\u53E3"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@SpringBootApplication\npublic class Application {\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u542F\u52A8\u539F\u7406"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B2C\u4E00\u6B65\uFF1A\u521B\u5EFA SpringApplication \u5BF9\u8C61"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"public SpringApplication(ResourceLoader resourceLoader, Class<?>... primarySources) {\n    this.resourceLoader = resourceLoader;\n    this.primarySources = new LinkedHashSet<>(Arrays.asList(primarySources));\n    // \u63A8\u65AD\u5E94\u7528\u7C7B\u578B\uFF1ASERVLET\u3001REACTIVE\u3001NONE\n    this.webApplicationType = WebApplicationType.deduceFromClasspath();\n    // \u52A0\u8F7D\u521D\u59CB\u5316\u5668\n    setInitializers(getSpringFactoriesInstances(ApplicationContextInitializer.class));\n    // \u52A0\u8F7D\u76D1\u542C\u5668\n    setListeners(getSpringFactoriesInstances(ApplicationListener.class));\n    // \u63A8\u65AD\u4E3B\u542F\u52A8\u7C7B\n    this.mainApplicationClass = deduceMainApplicationClass();\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B2C\u4E8C\u6B65\uFF1A\u63A8\u65AD\u5E94\u7528\u7C7B\u578B"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"static WebApplicationType deduceFromClasspath() {\n    // \u5982\u679C\u5B58\u5728 DispatcherHandler \u4E14\u4E0D\u5B58\u5728 DispatcherServlet\uFF0C\u5219\u4E3A REACTIVE\n    if (ClassUtils.isPresent(WEBFLUX_INDICATOR_CLASS, null) \n        && !ClassUtils.isPresent(WEBMVC_INDICATOR_CLASS, null)) {\n        return WebApplicationType.REACTIVE;\n    }\n    // \u5982\u679C\u4E0D\u5B58\u5728 Servlet \u76F8\u5173\u7C7B\uFF0C\u5219\u4E3A NONE\n    for (String className : SERVLET_INDICATOR_CLASSES) {\n        if (!ClassUtils.isPresent(className, null)) {\n            return WebApplicationType.NONE;\n        }\n    }\n    // \u5426\u5219\u4E3A SERVLET\n    return WebApplicationType.SERVLET;\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B2C\u4E09\u6B65\uFF1A\u521B\u5EFA ApplicationContext"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"protected ConfigurableApplicationContext createApplicationContext() {\n    Class<?> contextClass = this.applicationContextClass;\n    if (contextClass == null) {\n        switch (this.webApplicationType) {\n            case SERVLET:\n                // Web \u5E94\u7528\u521B\u5EFA AnnotationConfigServletWebServerApplicationContext\n                contextClass = Class.forName(DEFAULT_SERVLET_WEB_CONTEXT_CLASS);\n                break;\n            case REACTIVE:\n                contextClass = Class.forName(DEFAULT_REACTIVE_WEB_CONTEXT_CLASS);\n                break;\n            default:\n                contextClass = Class.forName(DEFAULT_CONTEXT_CLASS);\n        }\n    }\n    return (ConfigurableApplicationContext) BeanUtils.instantiateClass(contextClass);\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B2C\u56DB\u6B65\uFF1A\u5237\u65B0\u4E0A\u4E0B\u6587\uFF0C\u542F\u52A8 Web \u5BB9\u5668"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'// ServletWebServerApplicationContext.java\n@Override\nprotected void onRefresh() {\n    super.onRefresh();\n    try {\n        // \u521B\u5EFA Web \u670D\u52A1\u5668\uFF08Tomcat\u3001Jetty\u3001Undertow\uFF09\n        createWebServer();\n    } catch (Throwable ex) {\n        throw new ApplicationContextException("Unable to start web server", ex);\n    }\n}\n\nprivate void createWebServer() {\n    WebServer webServer = this.webServer;\n    ServletContext servletContext = getServletContext();\n    if (webServer == null && servletContext == null) {\n        // \u83B7\u53D6 ServletWebServerFactory\uFF08\u5982 TomcatServletWebServerFactory\uFF09\n        ServletWebServerFactory factory = getWebServerFactory();\n        // \u521B\u5EFA Web \u670D\u52A1\u5668\u5E76\u542F\u52A8\n        this.webServer = factory.getWebServer(getSelfInitializer());\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B2C\u4E94\u6B65\uFF1A\u542F\u52A8\u5185\u5D4C Tomcat"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"// TomcatServletWebServerFactory.java\n@Override\npublic WebServer getWebServer(ServletContextInitializer... initializers) {\n    Tomcat tomcat = new Tomcat();\n    // \u914D\u7F6E Tomcat\n    Connector connector = new Connector(this.protocol);\n    connector.setPort(getPort());\n    tomcat.getService().addConnector(connector);\n    // \u914D\u7F6E Context\n    prepareContext(tomcat.getHost(), initializers);\n    // \u8FD4\u56DE TomcatWebServer\n    return getTomcatWebServer(tomcat);\n}\n\n// TomcatWebServer.java\npublic TomcatWebServer(Tomcat tomcat, boolean autoStart) {\n    this.tomcat = tomcat;\n    this.autoStart = autoStart;\n    // \u542F\u52A8 Tomcat\n    initialize();\n}\n\nprivate void initialize() {\n    // \u542F\u52A8 Tomcat \u670D\u52A1\u5668\n    this.tomcat.start();\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u5173\u952E\u70B9\u603B\u7ED3"})}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5E94\u7528\u7C7B\u578B\u63A8\u65AD"}),"\uFF1A\u6839\u636E classpath \u4E2D\u7684\u7C7B\u5224\u65AD\u662F\u5426\u4E3A Web \u5E94\u7528"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u521B\u5EFA\u4E13\u7528\u4E0A\u4E0B\u6587"}),"\uFF1AWeb \u5E94\u7528\u4F7F\u7528 ",(0,i.jsx)(e.code,{children:"ServletWebServerApplicationContext"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u81EA\u52A8\u914D\u7F6E Web \u5BB9\u5668"}),"\uFF1A\u901A\u8FC7 ",(0,i.jsx)(e.code,{children:"ServletWebServerFactory"})," \u521B\u5EFA\u5185\u5D4C\u5BB9\u5668"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u542F\u52A8\u5BB9\u5668"}),"\uFF1A\u5728 ",(0,i.jsx)(e.code,{children:"onRefresh()"})," \u9636\u6BB5\u542F\u52A8 Tomcat/Jetty/Undertow"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6CE8\u518C DispatcherServlet"}),"\uFF1A\u81EA\u52A8\u914D\u7F6E Spring MVC \u7684\u524D\u7AEF\u63A7\u5236\u5668"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4. \u4E3A\u4EC0\u4E48\u53EF\u4EE5\u901A\u8FC7 main \u65B9\u6CD5\u542F\u52A8\uFF1F"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Spring Boot \u5C06 Web \u5BB9\u5668\uFF08Tomcat\uFF09\u4F5C\u4E3A\u4E00\u4E2A\u666E\u901A\u5BF9\u8C61\u5185\u5D4C\u5230\u5E94\u7528\u4E2D"}),"\n",(0,i.jsx)(e.li,{children:"\u4E0D\u9700\u8981\u5C06\u5E94\u7528\u90E8\u7F72\u5230\u5916\u90E8\u5BB9\u5668"}),"\n",(0,i.jsx)(e.li,{children:"\u901A\u8FC7 Java \u5E94\u7528\u7684\u65B9\u5F0F\u542F\u52A8\uFF0C\u5BB9\u5668\u968F\u5E94\u7528\u542F\u52A8\u800C\u542F\u52A8"}),"\n",(0,i.jsx)(e.li,{children:"\u6253\u5305\u6210\u53EF\u6267\u884C JAR\uFF0C\u5305\u542B\u6240\u6709\u4F9D\u8D56\u548C\u5185\u5D4C\u5BB9\u5668"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"6-springboot-\u662F\u5982\u4F55\u5B9E\u73B0\u81EA\u52A8\u914D\u7F6E\u7684",children:"6. SpringBoot \u662F\u5982\u4F55\u5B9E\u73B0\u81EA\u52A8\u914D\u7F6E\u7684\uFF1F"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,i.jsxs)(e.p,{children:["Spring Boot \u81EA\u52A8\u914D\u7F6E\u662F\u901A\u8FC7 ",(0,i.jsx)(e.code,{children:"@EnableAutoConfiguration"})," \u6CE8\u89E3\u5B9E\u73B0\u7684\uFF0C\u6838\u5FC3\u539F\u7406\u662F\u6761\u4EF6\u5316\u914D\u7F6E\u548C SPI \u673A\u5236\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u6838\u5FC3\u6CE8\u89E3"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@SpringBootApplication\n  \u2514\u2500 @EnableAutoConfiguration\n       \u2514\u2500 @Import(AutoConfigurationImportSelector.class)\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@Inherited\n@SpringBootConfiguration\n@EnableAutoConfiguration  // \u6838\u5FC3\u6CE8\u89E3\n@ComponentScan\npublic @interface SpringBootApplication {\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u81EA\u52A8\u914D\u7F6E\u539F\u7406"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B2C\u4E00\u6B65\uFF1A\u52A0\u8F7D\u81EA\u52A8\u914D\u7F6E\u7C7B"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"// AutoConfigurationImportSelector.java\nprotected List<String> getCandidateConfigurations(AnnotationMetadata metadata, \n                                                  AnnotationAttributes attributes) {\n    // \u4ECE META-INF/spring.factories \u52A0\u8F7D\u81EA\u52A8\u914D\u7F6E\u7C7B\n    List<String> configurations = SpringFactoriesLoader.loadFactoryNames(\n        EnableAutoConfiguration.class, \n        getBeanClassLoader()\n    );\n    return configurations;\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B2C\u4E8C\u6B65\uFF1A\u8BFB\u53D6 spring.factories \u6587\u4EF6"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-properties",children:"# spring-boot-autoconfigure.jar \u4E2D\u7684 META-INF/spring.factories\norg.springframework.boot.autoconfigure.EnableAutoConfiguration=\\\norg.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\\\norg.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration,\\\norg.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration,\\\n...\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B2C\u4E09\u6B65\uFF1A\u6761\u4EF6\u5316\u914D\u7F6E"})}),"\n",(0,i.jsxs)(e.p,{children:["\u81EA\u52A8\u914D\u7F6E\u7C7B\u4F7F\u7528 ",(0,i.jsx)(e.code,{children:"@Conditional"})," \u6CE8\u89E3\u8FDB\u884C\u6761\u4EF6\u5224\u65AD\uFF1A"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Configuration\n@ConditionalOnClass({DataSource.class, EmbeddedDatabaseType.class})\n@ConditionalOnMissingBean(DataSource.class)\n@EnableConfigurationProperties(DataSourceProperties.class)\npublic class DataSourceAutoConfiguration {\n    \n    @Bean\n    @ConditionalOnMissingBean\n    public DataSource dataSource(DataSourceProperties properties) {\n        return properties.initializeDataSourceBuilder().build();\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u5E38\u7528\u6761\u4EF6\u6CE8\u89E3"})}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u6CE8\u89E3"}),(0,i.jsx)(e.th,{children:"\u8BF4\u660E"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"@ConditionalOnClass"})}),(0,i.jsx)(e.td,{children:"\u7C7B\u8DEF\u5F84\u5B58\u5728\u6307\u5B9A\u7C7B\u65F6\u751F\u6548"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"@ConditionalOnMissingClass"})}),(0,i.jsx)(e.td,{children:"\u7C7B\u8DEF\u5F84\u4E0D\u5B58\u5728\u6307\u5B9A\u7C7B\u65F6\u751F\u6548"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"@ConditionalOnBean"})}),(0,i.jsx)(e.td,{children:"\u5BB9\u5668\u4E2D\u5B58\u5728\u6307\u5B9A Bean \u65F6\u751F\u6548"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"@ConditionalOnMissingBean"})}),(0,i.jsx)(e.td,{children:"\u5BB9\u5668\u4E2D\u4E0D\u5B58\u5728\u6307\u5B9A Bean \u65F6\u751F\u6548"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"@ConditionalOnProperty"})}),(0,i.jsx)(e.td,{children:"\u914D\u7F6E\u6587\u4EF6\u4E2D\u5B58\u5728\u6307\u5B9A\u5C5E\u6027\u65F6\u751F\u6548"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"@ConditionalOnResource"})}),(0,i.jsx)(e.td,{children:"\u7C7B\u8DEF\u5F84\u5B58\u5728\u6307\u5B9A\u8D44\u6E90\u65F6\u751F\u6548"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"@ConditionalOnWebApplication"})}),(0,i.jsx)(e.td,{children:"\u662F Web \u5E94\u7528\u65F6\u751F\u6548"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"@ConditionalOnNotWebApplication"})}),(0,i.jsx)(e.td,{children:"\u4E0D\u662F Web \u5E94\u7528\u65F6\u751F\u6548"})]})]})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4. \u81EA\u52A8\u914D\u7F6E\u793A\u4F8B"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Redis \u81EA\u52A8\u914D\u7F6E\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Configuration\n@ConditionalOnClass(RedisOperations.class)\n@EnableConfigurationProperties(RedisProperties.class)\n@Import({LettuceConnectionConfiguration.class, JedisConnectionConfiguration.class})\npublic class RedisAutoConfiguration {\n    \n    @Bean\n    @ConditionalOnMissingBean(name = "redisTemplate")\n    public RedisTemplate<Object, Object> redisTemplate(\n            RedisConnectionFactory redisConnectionFactory) {\n        RedisTemplate<Object, Object> template = new RedisTemplate<>();\n        template.setConnectionFactory(redisConnectionFactory);\n        return template;\n    }\n    \n    @Bean\n    @ConditionalOnMissingBean\n    public StringRedisTemplate stringRedisTemplate(\n            RedisConnectionFactory redisConnectionFactory) {\n        StringRedisTemplate template = new StringRedisTemplate();\n        template.setConnectionFactory(redisConnectionFactory);\n        return template;\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"5. \u914D\u7F6E\u5C5E\u6027\u7ED1\u5B9A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@ConfigurationProperties(prefix = "spring.datasource")\npublic class DataSourceProperties {\n    private String url;\n    private String username;\n    private String password;\n    private String driverClassName;\n    // getters and setters\n}\n'})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"# application.yml\nspring:\n  datasource:\n    url: jdbc:mysql://localhost:3306/db\n    username: root\n    password: 123456\n    driver-class-name: com.mysql.cj.jdbc.Driver\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"6. \u81EA\u52A8\u914D\u7F6E\u6D41\u7A0B\u603B\u7ED3"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"1. @SpringBootApplication\n   \u2514\u2500 @EnableAutoConfiguration\n      \u2514\u2500 @Import(AutoConfigurationImportSelector.class)\n\n2. AutoConfigurationImportSelector\n   \u2514\u2500 \u8BFB\u53D6 META-INF/spring.factories\n      \u2514\u2500 \u52A0\u8F7D\u6240\u6709\u81EA\u52A8\u914D\u7F6E\u7C7B\n\n3. \u6761\u4EF6\u5224\u65AD\n   \u2514\u2500 @ConditionalOnXxx \u6CE8\u89E3\n      \u2514\u2500 \u6EE1\u8DB3\u6761\u4EF6\u5219\u751F\u6548\n\n4. \u5C5E\u6027\u7ED1\u5B9A\n   \u2514\u2500 @ConfigurationProperties\n      \u2514\u2500 \u7ED1\u5B9A\u914D\u7F6E\u6587\u4EF6\u5C5E\u6027\n\n5. \u521B\u5EFA Bean\n   \u2514\u2500 \u6CE8\u518C\u5230 Spring \u5BB9\u5668\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"7. \u5982\u4F55\u6392\u9664\u81EA\u52A8\u914D\u7F6E"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"// \u65B9\u5F0F\u4E00\uFF1A\u4F7F\u7528 exclude \u5C5E\u6027\n@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class})\n\n// \u65B9\u5F0F\u4E8C\uFF1A\u914D\u7F6E\u6587\u4EF6\nspring:\n  autoconfigure:\n    exclude:\n      - org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"8. \u67E5\u770B\u751F\u6548\u7684\u81EA\u52A8\u914D\u7F6E"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"# application.yml\ndebug: true  # \u542F\u52A8\u65F6\u6253\u5370\u81EA\u52A8\u914D\u7F6E\u62A5\u544A\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6216\u4F7F\u7528 Actuator\uFF1A"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"GET /actuator/conditions\n"})}),"\n",(0,i.jsx)(e.h3,{id:"7-spring-boot-\u652F\u6301\u54EA\u4E9B\u5D4C\u5165-web-\u5BB9\u5668",children:"7. Spring Boot \u652F\u6301\u54EA\u4E9B\u5D4C\u5165 Web \u5BB9\u5668\uFF1F"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,i.jsx)(e.p,{children:"Spring Boot \u652F\u6301\u4EE5\u4E0B\u4E09\u79CD\u4E3B\u6D41\u7684\u5D4C\u5165\u5F0F Web \u5BB9\u5668\uFF1A"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. Tomcat\uFF08\u9ED8\u8BA4\uFF09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:"<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-web</artifactId>\n    \x3c!-- \u9ED8\u8BA4\u5305\u542B Tomcat --\x3e\n</dependency>\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u914D\u7F6E\u793A\u4F8B\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"server:\n  port: 8080\n  tomcat:\n    max-threads: 200\n    min-spare-threads: 10\n    max-connections: 10000\n    accept-count: 100\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. Jetty"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:"<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-web</artifactId>\n    <exclusions>\n        \x3c!-- \u6392\u9664 Tomcat --\x3e\n        <exclusion>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-tomcat</artifactId>\n        </exclusion>\n    </exclusions>\n</dependency>\n\x3c!-- \u6DFB\u52A0 Jetty --\x3e\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-jetty</artifactId>\n</dependency>\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u914D\u7F6E\u793A\u4F8B\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"server:\n  port: 8080\n  jetty:\n    threads:\n      max: 200\n      min: 10\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. Undertow"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:"<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-web</artifactId>\n    <exclusions>\n        \x3c!-- \u6392\u9664 Tomcat --\x3e\n        <exclusion>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-tomcat</artifactId>\n        </exclusion>\n    </exclusions>\n</dependency>\n\x3c!-- \u6DFB\u52A0 Undertow --\x3e\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-undertow</artifactId>\n</dependency>\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u914D\u7F6E\u793A\u4F8B\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"server:\n  port: 8080\n  undertow:\n    threads:\n      io: 4\n      worker: 200\n    buffer-size: 1024\n    direct-buffers: true\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5BB9\u5668\u5BF9\u6BD4\uFF1A"})}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u7279\u6027"}),(0,i.jsx)(e.th,{children:"Tomcat"}),(0,i.jsx)(e.th,{children:"Jetty"}),(0,i.jsx)(e.th,{children:"Undertow"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u9ED8\u8BA4\u5BB9\u5668"}),(0,i.jsx)(e.td,{children:"\u2705"}),(0,i.jsx)(e.td,{children:"\u274C"}),(0,i.jsx)(e.td,{children:"\u274C"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u6027\u80FD"}),(0,i.jsx)(e.td,{children:"\u4E2D\u7B49"}),(0,i.jsx)(e.td,{children:"\u4E2D\u7B49"}),(0,i.jsx)(e.td,{children:"\u9AD8"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u5185\u5B58\u5360\u7528"}),(0,i.jsx)(e.td,{children:"\u4E2D\u7B49"}),(0,i.jsx)(e.td,{children:"\u8F83\u5C0F"}),(0,i.jsx)(e.td,{children:"\u6700\u5C0F"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u5E76\u53D1\u5904\u7406"}),(0,i.jsx)(e.td,{children:"\u597D"}),(0,i.jsx)(e.td,{children:"\u597D"}),(0,i.jsx)(e.td,{children:"\u4F18\u79C0"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Servlet \u652F\u6301"}),(0,i.jsx)(e.td,{children:"\u5B8C\u6574"}),(0,i.jsx)(e.td,{children:"\u5B8C\u6574"}),(0,i.jsx)(e.td,{children:"\u5B8C\u6574"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"WebSocket"}),(0,i.jsx)(e.td,{children:"\u652F\u6301"}),(0,i.jsx)(e.td,{children:"\u652F\u6301"}),(0,i.jsx)(e.td,{children:"\u652F\u6301"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u793E\u533A\u6D3B\u8DC3\u5EA6"}),(0,i.jsx)(e.td,{children:"\u6700\u9AD8"}),(0,i.jsx)(e.td,{children:"\u9AD8"}),(0,i.jsx)(e.td,{children:"\u4E2D\u7B49"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u9002\u7528\u573A\u666F"}),(0,i.jsx)(e.td,{children:"\u901A\u7528"}),(0,i.jsx)(e.td,{children:"\u8F7B\u91CF\u7EA7"}),(0,i.jsx)(e.td,{children:"\u9AD8\u5E76\u53D1"})]})]})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u9009\u62E9\u5EFA\u8BAE\uFF1A"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Tomcat"}),"\uFF1A\u9ED8\u8BA4\u9009\u62E9\uFF0C\u793E\u533A\u652F\u6301\u6700\u597D\uFF0C\u9002\u5408\u5927\u591A\u6570\u573A\u666F"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Jetty"}),"\uFF1A\u8F7B\u91CF\u7EA7\uFF0C\u9002\u5408\u8D44\u6E90\u53D7\u9650\u73AF\u5883"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Undertow"}),"\uFF1A\u9AD8\u6027\u80FD\uFF0C\u9002\u5408\u9AD8\u5E76\u53D1\u573A\u666F\uFF0C\u5185\u5B58\u5360\u7528\u6700\u5C0F"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"8-spring-boot-\u4E2D-applicationproperties-\u548C-applicationyml-\u7684\u533A\u522B\u662F\u4EC0\u4E48",children:"8. Spring Boot \u4E2D application.properties \u548C application.yml \u7684\u533A\u522B\u662F\u4EC0\u4E48\uFF1F"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,i.jsx)(e.p,{children:"\u4E24\u8005\u90FD\u662F Spring Boot \u7684\u914D\u7F6E\u6587\u4EF6\uFF0C\u4E3B\u8981\u533A\u522B\u5728\u4E8E\u683C\u5F0F\u548C\u53EF\u8BFB\u6027\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u683C\u5F0F\u5BF9\u6BD4"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"application.properties\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-properties",children:"server.port=8080\nserver.servlet.context-path=/api\n\nspring.datasource.url=jdbc:mysql://localhost:3306/db\nspring.datasource.username=root\nspring.datasource.password=123456\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\n\nspring.jpa.hibernate.ddl-auto=update\nspring.jpa.show-sql=true\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"application.yml\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"server:\n  port: 8080\n  servlet:\n    context-path: /api\n\nspring:\n  datasource:\n    url: jdbc:mysql://localhost:3306/db\n    username: root\n    password: 123456\n    driver-class-name: com.mysql.cj.jdbc.Driver\n  jpa:\n    hibernate:\n      ddl-auto: update\n    show-sql: true\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u4E3B\u8981\u533A\u522B"})}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u7279\u6027"}),(0,i.jsx)(e.th,{children:"application.properties"}),(0,i.jsx)(e.th,{children:"application.yml"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u683C\u5F0F"}),(0,i.jsx)(e.td,{children:"key=value"}),(0,i.jsx)(e.td,{children:"\u5C42\u7EA7\u7ED3\u6784"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u53EF\u8BFB\u6027"}),(0,i.jsx)(e.td,{children:"\u8F83\u5DEE\uFF08\u91CD\u590D\u524D\u7F00\u591A\uFF09"}),(0,i.jsx)(e.td,{children:"\u597D\uFF08\u5C42\u7EA7\u6E05\u6670\uFF09"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u914D\u7F6E\u590D\u6742\u5EA6"}),(0,i.jsx)(e.td,{children:"\u7B80\u5355\u914D\u7F6E\u53CB\u597D"}),(0,i.jsx)(e.td,{children:"\u590D\u6742\u914D\u7F6E\u53CB\u597D"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u6570\u7EC4/\u5217\u8868"}),(0,i.jsx)(e.td,{children:"\u4E0D\u76F4\u89C2"}),(0,i.jsx)(e.td,{children:"\u76F4\u89C2"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u591A\u884C\u6587\u672C"}),(0,i.jsx)(e.td,{children:"\u4E0D\u652F\u6301"}),(0,i.jsx)(e.td,{children:"\u652F\u6301"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u6CE8\u91CA"}),(0,i.jsx)(e.td,{children:"# \u6216 !"}),(0,i.jsx)(e.td,{children:"#"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u6587\u4EF6\u5927\u5C0F"}),(0,i.jsx)(e.td,{children:"\u8F83\u5927"}),(0,i.jsx)(e.td,{children:"\u8F83\u5C0F"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u5B66\u4E60\u6210\u672C"}),(0,i.jsx)(e.td,{children:"\u4F4E"}),(0,i.jsx)(e.td,{children:"\u7A0D\u9AD8"})]})]})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u6570\u7EC4/\u5217\u8868\u914D\u7F6E\u5BF9\u6BD4"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"properties\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-properties",children:"spring.profiles.active=dev,test\nmy.servers[0]=dev.example.com\nmy.servers[1]=prod.example.com\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"yml\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"spring:\n  profiles:\n    active: dev,test\n\nmy:\n  servers:\n    - dev.example.com\n    - prod.example.com\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4. \u591A\u884C\u6587\u672C\u914D\u7F6E"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"properties\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-properties",children:"# \u4E0D\u652F\u6301\u591A\u884C\uFF0C\u9700\u8981\u4F7F\u7528 \\n\nmy.description=This is a long \\\ndescription that spans \\\nmultiple lines\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"yml\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"# \u652F\u6301\u591A\u884C\nmy:\n  description: |\n    This is a long\n    description that spans\n    multiple lines\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"5. \u52A0\u8F7D\u4F18\u5148\u7EA7"})}),"\n",(0,i.jsx)(e.p,{children:"\u5F53\u4E24\u4E2A\u6587\u4EF6\u540C\u65F6\u5B58\u5728\u65F6\uFF1A"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"application.properties"})," \u4F18\u5148\u7EA7\u9AD8\u4E8E ",(0,i.jsx)(e.code,{children:"application.yml"})]}),"\n",(0,i.jsx)(e.li,{children:"\u76F8\u540C\u914D\u7F6E\u9879\uFF0Cproperties \u4F1A\u8986\u76D6 yml"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"6. \u4F7F\u7528\u5EFA\u8BAE"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7B80\u5355\u9879\u76EE"}),"\uFF1A\u4F7F\u7528 properties\uFF0C\u914D\u7F6E\u5C11\uFF0C\u7B80\u5355\u76F4\u89C2"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u590D\u6742\u9879\u76EE"}),"\uFF1A\u4F7F\u7528 yml\uFF0C\u5C42\u7EA7\u6E05\u6670\uFF0C\u53EF\u8BFB\u6027\u597D"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u56E2\u961F\u4E60\u60EF"}),"\uFF1A\u6839\u636E\u56E2\u961F\u4E60\u60EF\u9009\u62E9"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u63A8\u8350"}),"\uFF1Ayml \u683C\u5F0F\uFF0C\u66F4\u73B0\u4EE3\u5316\uFF0C\u53EF\u8BFB\u6027\u66F4\u597D"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"9-\u5982\u4F55\u5728-spring-boot-\u4E2D\u5B9A\u4E49\u548C\u8BFB\u53D6\u81EA\u5B9A\u4E49\u914D\u7F6E",children:"9. \u5982\u4F55\u5728 Spring Boot \u4E2D\u5B9A\u4E49\u548C\u8BFB\u53D6\u81EA\u5B9A\u4E49\u914D\u7F6E\uFF1F"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,i.jsx)(e.p,{children:"Spring Boot \u63D0\u4F9B\u591A\u79CD\u65B9\u5F0F\u8BFB\u53D6\u81EA\u5B9A\u4E49\u914D\u7F6E\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F\u4E00\uFF1A\u4F7F\u7528 @Value \u6CE8\u89E3"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u914D\u7F6E\u6587\u4EF6\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"app:\n  name: MyApplication\n  version: 1.0.0\n  author: John Doe\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u8BFB\u53D6\u914D\u7F6E\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\npublic class AppConfig {\n    @Value("${app.name}")\n    private String appName;\n    \n    @Value("${app.version}")\n    private String version;\n    \n    @Value("${app.author:Unknown}")  // \u9ED8\u8BA4\u503C\n    private String author;\n    \n    @Value("${app.timeout:30}")\n    private int timeout;\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F\u4E8C\uFF1A\u4F7F\u7528 @ConfigurationProperties\uFF08\u63A8\u8350\uFF09"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u914D\u7F6E\u6587\u4EF6\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"app:\n  name: MyApplication\n  version: 1.0.0\n  author: John Doe\n  email: john@example.com\n  servers:\n    - dev.example.com\n    - prod.example.com\n  database:\n    host: localhost\n    port: 3306\n    username: root\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u914D\u7F6E\u7C7B\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\n@ConfigurationProperties(prefix = "app")\n@Data  // Lombok\npublic class AppProperties {\n    private String name;\n    private String version;\n    private String author;\n    private String email;\n    private List<String> servers;\n    private Database database;\n    \n    @Data\n    public static class Database {\n        private String host;\n        private int port;\n        private String username;\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4F7F\u7528\u914D\u7F6E\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Service\npublic class AppService {\n    @Autowired\n    private AppProperties appProperties;\n    \n    public void printConfig() {\n        System.out.println("App Name: " + appProperties.getName());\n        System.out.println("Version: " + appProperties.getVersion());\n        System.out.println("Servers: " + appProperties.getServers());\n        System.out.println("DB Host: " + appProperties.getDatabase().getHost());\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F\u4E09\uFF1A\u4F7F\u7528 Environment"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\npublic class ConfigReader {\n    @Autowired\n    private Environment env;\n    \n    public void readConfig() {\n        String appName = env.getProperty("app.name");\n        String version = env.getProperty("app.version", "1.0.0");  // \u9ED8\u8BA4\u503C\n        Integer port = env.getProperty("server.port", Integer.class, 8080);\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F\u56DB\uFF1A\u4F7F\u7528 @PropertySource \u52A0\u8F7D\u81EA\u5B9A\u4E49\u914D\u7F6E\u6587\u4EF6"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u81EA\u5B9A\u4E49\u914D\u7F6E\u6587\u4EF6 custom.properties\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-properties",children:"custom.api.url=https://api.example.com\ncustom.api.key=abc123\ncustom.api.timeout=5000\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u914D\u7F6E\u7C7B\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Configuration\n@PropertySource("classpath:custom.properties")\n@ConfigurationProperties(prefix = "custom.api")\n@Data\npublic class CustomApiProperties {\n    private String url;\n    private String key;\n    private int timeout;\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F\u4E94\uFF1A\u8BFB\u53D6\u590D\u6742\u5BF9\u8C61\u914D\u7F6E"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u914D\u7F6E\u6587\u4EF6\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"users:\n  - name: Alice\n    age: 25\n    email: alice@example.com\n  - name: Bob\n    age: 30\n    email: bob@example.com\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u914D\u7F6E\u7C7B\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\n@ConfigurationProperties(prefix = "users")\n@Data\npublic class UsersProperties {\n    private List<User> users = new ArrayList<>();\n    \n    @Data\n    public static class User {\n        private String name;\n        private int age;\n        private String email;\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u542F\u7528 @ConfigurationProperties\uFF1A"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F 1\uFF1A\u5728\u914D\u7F6E\u7C7B\u4E0A\u6DFB\u52A0 @Component"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\n@ConfigurationProperties(prefix = "app")\npublic class AppProperties { }\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F 2\uFF1A\u5728\u542F\u52A8\u7C7B\u4E0A\u6DFB\u52A0 @EnableConfigurationProperties"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@SpringBootApplication\n@EnableConfigurationProperties(AppProperties.class)\npublic class Application { }\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F 3\uFF1A\u4F7F\u7528 @ConfigurationPropertiesScan"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@SpringBootApplication\n@ConfigurationPropertiesScan("com.example.config")\npublic class Application { }\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6700\u4F73\u5B9E\u8DF5\uFF1A"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u7B80\u5355\u914D\u7F6E\u4F7F\u7528 ",(0,i.jsx)(e.code,{children:"@Value"})]}),"\n",(0,i.jsxs)(e.li,{children:["\u590D\u6742\u914D\u7F6E\u4F7F\u7528 ",(0,i.jsx)(e.code,{children:"@ConfigurationProperties"})]}),"\n",(0,i.jsx)(e.li,{children:"\u4F7F\u7528\u7C7B\u578B\u5B89\u5168\u7684\u914D\u7F6E\u7C7B"}),"\n",(0,i.jsx)(e.li,{children:"\u63D0\u4F9B\u9ED8\u8BA4\u503C"}),"\n",(0,i.jsx)(e.li,{children:"\u6DFB\u52A0\u914D\u7F6E\u9A8C\u8BC1\uFF08JSR-303\uFF09"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u914D\u7F6E\u9A8C\u8BC1\u793A\u4F8B\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\n@ConfigurationProperties(prefix = "app")\n@Validated\n@Data\npublic class AppProperties {\n    @NotBlank\n    private String name;\n    \n    @Min(1)\n    @Max(65535)\n    private int port;\n    \n    @Email\n    private String email;\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"10-spring-boot-\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u4F18\u5148\u7EA7\u4F60\u77E5\u9053\u5417",children:"10. Spring Boot \u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u4F18\u5148\u7EA7\u4F60\u77E5\u9053\u5417\uFF1F"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,i.jsx)(e.p,{children:"Spring Boot \u914D\u7F6E\u6587\u4EF6\u7684\u52A0\u8F7D\u9075\u5FAA\u7279\u5B9A\u7684\u4F18\u5148\u7EA7\u987A\u5E8F\uFF0C\u4F18\u5148\u7EA7\u9AD8\u7684\u914D\u7F6E\u4F1A\u8986\u76D6\u4F18\u5148\u7EA7\u4F4E\u7684\u914D\u7F6E\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u914D\u7F6E\u6E90\u4F18\u5148\u7EA7\uFF08\u4ECE\u9AD8\u5230\u4F4E\uFF09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"1. \u547D\u4EE4\u884C\u53C2\u6570\n   java -jar app.jar --server.port=9090\n\n2. SPRING_APPLICATION_JSON \u4E2D\u7684\u5C5E\u6027\n   SPRING_APPLICATION_JSON='{\"server.port\":9090}' java -jar app.jar\n\n3. ServletConfig \u521D\u59CB\u5316\u53C2\u6570\n\n4. ServletContext \u521D\u59CB\u5316\u53C2\u6570\n\n5. JNDI \u5C5E\u6027\uFF08java:comp/env\uFF09\n\n6. Java \u7CFB\u7EDF\u5C5E\u6027\uFF08System.getProperties()\uFF09\n   java -Dserver.port=9090 -jar app.jar\n\n7. \u64CD\u4F5C\u7CFB\u7EDF\u73AF\u5883\u53D8\u91CF\n   export SERVER_PORT=9090\n\n8. RandomValuePropertySource\uFF08random.* \u5C5E\u6027\uFF09\n\n9. jar \u5305\u5916\u90E8\u7684 application-{profile}.properties/yml\n\n10. jar \u5305\u5185\u90E8\u7684 application-{profile}.properties/yml\n\n11. jar \u5305\u5916\u90E8\u7684 application.properties/yml\n\n12. jar \u5305\u5185\u90E8\u7684 application.properties/yml\n\n13. @PropertySource \u6CE8\u89E3\u6307\u5B9A\u7684\u914D\u7F6E\u6587\u4EF6\n\n14. \u9ED8\u8BA4\u5C5E\u6027\uFF08SpringApplication.setDefaultProperties\uFF09\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u914D\u7F6E\u6587\u4EF6\u4F4D\u7F6E\u4F18\u5148\u7EA7\uFF08\u4ECE\u9AD8\u5230\u4F4E\uFF09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"1. file:./config/          # \u5F53\u524D\u76EE\u5F55\u7684 /config \u5B50\u76EE\u5F55\n2. file:./config/*/        # \u5F53\u524D\u76EE\u5F55\u7684 /config \u5B50\u76EE\u5F55\u7684\u5B50\u76EE\u5F55\n3. file:./                 # \u5F53\u524D\u76EE\u5F55\n4. classpath:/config/      # classpath \u7684 /config \u76EE\u5F55\n5. classpath:/             # classpath \u6839\u76EE\u5F55\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u793A\u4F8B\u76EE\u5F55\u7ED3\u6784\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"project/\n\u251C\u2500\u2500 config/\n\u2502   \u251C\u2500\u2500 application.yml          # \u4F18\u5148\u7EA7\u6700\u9AD8\n\u2502   \u2514\u2500\u2500 dev/\n\u2502       \u2514\u2500\u2500 application.yml      # \u4F18\u5148\u7EA7\u7B2C\u4E8C\n\u251C\u2500\u2500 application.yml              # \u4F18\u5148\u7EA7\u7B2C\u4E09\n\u2514\u2500\u2500 target/\n    \u2514\u2500\u2500 app.jar\n        \u2514\u2500\u2500 application.yml      # \u4F18\u5148\u7EA7\u6700\u4F4E\uFF08jar \u5185\uFF09\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. Profile \u914D\u7F6E\u4F18\u5148\u7EA7"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"# application.yml\uFF08\u57FA\u7840\u914D\u7F6E\uFF09\nserver:\n  port: 8080\n\n# application-dev.yml\uFF08\u5F00\u53D1\u73AF\u5883\uFF09\nserver:\n  port: 8081\n\n# application-prod.yml\uFF08\u751F\u4EA7\u73AF\u5883\uFF09\nserver:\n  port: 8082\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6FC0\u6D3B Profile\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# \u65B9\u5F0F\u4E00\uFF1A\u547D\u4EE4\u884C\njava -jar app.jar --spring.profiles.active=dev\n\n# \u65B9\u5F0F\u4E8C\uFF1A\u914D\u7F6E\u6587\u4EF6\nspring:\n  profiles:\n    active: dev\n\n# \u65B9\u5F0F\u4E09\uFF1A\u73AF\u5883\u53D8\u91CF\nexport SPRING_PROFILES_ACTIVE=dev\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u4F18\u5148\u7EA7\uFF1A"})," ",(0,i.jsx)(e.code,{children:"application-{profile}.yml"})," > ",(0,i.jsx)(e.code,{children:"application.yml"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4. \u6587\u4EF6\u683C\u5F0F\u4F18\u5148\u7EA7"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5F53\u540C\u65F6\u5B58\u5728\u65F6\uFF1A",(0,i.jsx)(e.code,{children:"properties"})," > ",(0,i.jsx)(e.code,{children:"yml"})," > ",(0,i.jsx)(e.code,{children:"yaml"})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"application.properties    # \u4F18\u5148\u7EA7\u6700\u9AD8\napplication.yml          # \u4F18\u5148\u7EA7\u4E2D\u7B49\napplication.yaml         # \u4F18\u5148\u7EA7\u6700\u4F4E\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"5. \u5B9E\u9645\u5E94\u7528\u793A\u4F8B"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u573A\u666F\uFF1A"})," \u672C\u5730\u5F00\u53D1\u65F6\u8986\u76D6\u914D\u7F6E"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u9879\u76EE\u4E2D\u7684\u914D\u7F6E\uFF08application.yml\uFF09\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"server:\n  port: 8080\nspring:\n  datasource:\n    url: jdbc:mysql://prod-server:3306/db\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u672C\u5730\u914D\u7F6E\u6587\u4EF6\uFF08./config/application.yml\uFF09\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"server:\n  port: 8081\nspring:\n  datasource:\n    url: jdbc:mysql://localhost:3306/db\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u547D\u4EE4\u884C\u53C2\u6570\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"java -jar app.jar --server.port=9090\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6700\u7EC8\u751F\u6548\uFF1A"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"server.port=9090"}),"\uFF08\u547D\u4EE4\u884C\u4F18\u5148\u7EA7\u6700\u9AD8\uFF09"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"spring.datasource.url=jdbc:mysql://localhost:3306/db"}),"\uFF08\u672C\u5730\u914D\u7F6E\u8986\u76D6\uFF09"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"6. \u67E5\u770B\u914D\u7F6E\u52A0\u8F7D\u60C5\u51B5"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F\u4E00\uFF1A\u542F\u7528 debug \u65E5\u5FD7"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"logging:\n  level:\n    org.springframework.boot.context.config: DEBUG\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F\u4E8C\uFF1A\u4F7F\u7528 Actuator"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:"<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-actuator</artifactId>\n</dependency>\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u8BBF\u95EE\uFF1A",(0,i.jsx)(e.code,{children:"GET /actuator/env"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"7. \u6700\u4F73\u5B9E\u8DF5"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u57FA\u7840\u914D\u7F6E"}),"\uFF1A\u653E\u5728 jar \u5305\u5185\u7684 ",(0,i.jsx)(e.code,{children:"application.yml"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u73AF\u5883\u914D\u7F6E"}),"\uFF1A\u4F7F\u7528 ",(0,i.jsx)(e.code,{children:"application-{profile}.yml"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u654F\u611F\u914D\u7F6E"}),"\uFF1A\u4F7F\u7528\u73AF\u5883\u53D8\u91CF\u6216\u5916\u90E8\u914D\u7F6E\u6587\u4EF6"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u4E34\u65F6\u914D\u7F6E"}),"\uFF1A\u4F7F\u7528\u547D\u4EE4\u884C\u53C2\u6570"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u672C\u5730\u5F00\u53D1"}),"\uFF1A\u5728\u9879\u76EE\u6839\u76EE\u5F55\u521B\u5EFA ",(0,i.jsx)(e.code,{children:"config/application.yml"}),"\uFF08\u4E0D\u63D0\u4EA4\u5230\u7248\u672C\u63A7\u5236\uFF09"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"11-spring-boot-\u6253\u6210\u7684-jar-\u548C\u666E\u901A\u7684-jar-\u6709\u4EC0\u4E48\u533A\u522B-",children:"11. Spring Boot \u6253\u6210\u7684 jar \u548C\u666E\u901A\u7684 jar \u6709\u4EC0\u4E48\u533A\u522B ?"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,i.jsx)(e.p,{children:"Spring Boot \u6253\u5305\u7684 JAR\uFF08Fat JAR/Uber JAR\uFF09\u4E0E\u666E\u901A JAR \u6709\u672C\u8D28\u533A\u522B\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u7ED3\u6784\u5BF9\u6BD4"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u666E\u901A JAR \u7ED3\u6784\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"my-app.jar\n\u251C\u2500\u2500 META-INF/\n\u2502   \u2514\u2500\u2500 MANIFEST.MF\n\u2514\u2500\u2500 com/\n    \u2514\u2500\u2500 example/\n        \u2514\u2500\u2500 MyClass.class\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Spring Boot JAR \u7ED3\u6784\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"my-app.jar\n\u251C\u2500\u2500 META-INF/\n\u2502   \u2514\u2500\u2500 MANIFEST.MF          # \u5305\u542B\u542F\u52A8\u7C7B\u4FE1\u606F\n\u251C\u2500\u2500 BOOT-INF/\n\u2502   \u251C\u2500\u2500 classes/             # \u5E94\u7528\u7684 class \u6587\u4EF6\n\u2502   \u2502   \u2514\u2500\u2500 com/\n\u2502   \u2502       \u2514\u2500\u2500 example/\n\u2502   \u2502           \u2514\u2500\u2500 Application.class\n\u2502   \u2514\u2500\u2500 lib/                 # \u6240\u6709\u4F9D\u8D56\u7684 jar \u5305\n\u2502       \u251C\u2500\u2500 spring-boot-*.jar\n\u2502       \u251C\u2500\u2500 spring-core-*.jar\n\u2502       \u2514\u2500\u2500 ...\n\u2514\u2500\u2500 org/\n    \u2514\u2500\u2500 springframework/\n        \u2514\u2500\u2500 boot/\n            \u2514\u2500\u2500 loader/      # Spring Boot \u7C7B\u52A0\u8F7D\u5668\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. MANIFEST.MF \u5BF9\u6BD4"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u666E\u901A JAR\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"Manifest-Version: 1.0\nMain-Class: com.example.MyClass\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Spring Boot JAR\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"Manifest-Version: 1.0\nSpring-Boot-Version: 3.0.0\nMain-Class: org.springframework.boot.loader.JarLauncher\nStart-Class: com.example.Application\nSpring-Boot-Classes: BOOT-INF/classes/\nSpring-Boot-Lib: BOOT-INF/lib/\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u4E3B\u8981\u533A\u522B"})}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u7279\u6027"}),(0,i.jsx)(e.th,{children:"\u666E\u901A JAR"}),(0,i.jsx)(e.th,{children:"Spring Boot JAR"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u4F9D\u8D56\u5305\u542B"}),(0,i.jsx)(e.td,{children:"\u4E0D\u5305\u542B\u4F9D\u8D56"}),(0,i.jsx)(e.td,{children:"\u5305\u542B\u6240\u6709\u4F9D\u8D56\uFF08Fat JAR\uFF09"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u542F\u52A8\u65B9\u5F0F"}),(0,i.jsx)(e.td,{children:"\u9700\u8981\u6307\u5B9A classpath"}),(0,i.jsx)(e.td,{children:"\u76F4\u63A5\u8FD0\u884C"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Main-Class"}),(0,i.jsx)(e.td,{children:"\u5E94\u7528\u4E3B\u7C7B"}),(0,i.jsx)(e.td,{children:"JarLauncher"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u7C7B\u52A0\u8F7D\u5668"}),(0,i.jsx)(e.td,{children:"\u9ED8\u8BA4\u7C7B\u52A0\u8F7D\u5668"}),(0,i.jsx)(e.td,{children:"\u81EA\u5B9A\u4E49\u7C7B\u52A0\u8F7D\u5668"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u6587\u4EF6\u5927\u5C0F"}),(0,i.jsx)(e.td,{children:"\u5C0F"}),(0,i.jsx)(e.td,{children:"\u5927\uFF08\u5305\u542B\u6240\u6709\u4F9D\u8D56\uFF09"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u72EC\u7ACB\u8FD0\u884C"}),(0,i.jsx)(e.td,{children:"\u5426"}),(0,i.jsx)(e.td,{children:"\u662F"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u5D4C\u5165\u5BB9\u5668"}),(0,i.jsx)(e.td,{children:"\u65E0"}),(0,i.jsx)(e.td,{children:"\u6709\uFF08Tomcat/Jetty/Undertow\uFF09"})]})]})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4. \u542F\u52A8\u65B9\u5F0F\u5BF9\u6BD4"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u666E\u901A JAR\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'# \u9700\u8981\u6307\u5B9A\u6240\u6709\u4F9D\u8D56\njava -cp "app.jar:lib/*" com.example.MyClass\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Spring Boot JAR\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# \u76F4\u63A5\u8FD0\u884C\njava -jar app.jar\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"5. Spring Boot JAR \u542F\u52A8\u539F\u7406"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"// JarLauncher \u542F\u52A8\u6D41\u7A0B\n1. JarLauncher.main()\n   \u251C\u2500 \u521B\u5EFA\u81EA\u5B9A\u4E49\u7C7B\u52A0\u8F7D\u5668\uFF08LaunchedURLClassLoader\uFF09\n   \u251C\u2500 \u52A0\u8F7D BOOT-INF/lib/ \u4E0B\u7684\u6240\u6709 jar\n   \u251C\u2500 \u52A0\u8F7D BOOT-INF/classes/ \u4E0B\u7684\u7C7B\n   \u2514\u2500 \u53CD\u5C04\u8C03\u7528 Start-Class\uFF08\u771F\u6B63\u7684\u4E3B\u7C7B\uFF09\n\n2. Application.main()\n   \u2514\u2500 SpringApplication.run()\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"6. \u6253\u5305\u914D\u7F6E"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Maven\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:"<build>\n    <plugins>\n        <plugin>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-maven-plugin</artifactId>\n            <configuration>\n                <mainClass>com.example.Application</mainClass>\n            </configuration>\n        </plugin>\n    </plugins>\n</build>\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Gradle\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-groovy",children:"plugins {\n    id 'org.springframework.boot' version '3.0.0'\n}\n\nbootJar {\n    mainClass = 'com.example.Application'\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"7. \u89E3\u538B\u67E5\u770B Spring Boot JAR"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# \u89E3\u538B jar \u5305\njar -xvf app.jar\n\n# \u6216\u4F7F\u7528 unzip\nunzip app.jar -d app-extracted\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"8. \u4F18\u7F3A\u70B9\u5BF9\u6BD4"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Spring Boot JAR \u4F18\u70B9\uFF1A"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u72EC\u7ACB\u8FD0\u884C\uFF0C\u65E0\u9700\u5916\u90E8\u4F9D\u8D56"}),"\n",(0,i.jsx)(e.li,{children:"\u5305\u542B\u6240\u6709\u4F9D\u8D56\uFF0C\u90E8\u7F72\u7B80\u5355"}),"\n",(0,i.jsx)(e.li,{children:"\u5185\u5D4C Web \u5BB9\u5668\uFF0C\u65E0\u9700\u989D\u5916\u5B89\u88C5"}),"\n",(0,i.jsx)(e.li,{children:"\u4E00\u4E2A\u6587\u4EF6\u5373\u53EF\u8FD0\u884C"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Spring Boot JAR \u7F3A\u70B9\uFF1A"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6587\u4EF6\u4F53\u79EF\u5927\uFF08\u901A\u5E38\u51E0\u5341 MB\uFF09"}),"\n",(0,i.jsx)(e.li,{children:"\u542F\u52A8\u7A0D\u6162\uFF08\u9700\u8981\u89E3\u538B\u548C\u52A0\u8F7D\u4F9D\u8D56\uFF09"}),"\n",(0,i.jsx)(e.li,{children:"\u66F4\u65B0\u4F9D\u8D56\u9700\u8981\u91CD\u65B0\u6253\u5305"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"9. \u751F\u6210\u53EF\u6267\u884C JAR"})}),"\n",(0,i.jsx)(e.p,{children:"Spring Boot JAR \u53EF\u4EE5\u5728 Linux/Unix \u7CFB\u7EDF\u4E0A\u76F4\u63A5\u6267\u884C\uFF1A"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# \u6DFB\u52A0\u6267\u884C\u6743\u9650\nchmod +x app.jar\n\n# \u76F4\u63A5\u8FD0\u884C\n./app.jar\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u8FD9\u662F\u56E0\u4E3A Spring Boot \u5728 JAR \u6587\u4EF6\u5F00\u5934\u6DFB\u52A0\u4E86 shell \u811A\u672C\uFF1A"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'#!/bin/bash\nexec java -jar "$0" "$@"\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"10. \u6253\u5305\u6210 WAR"})}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679C\u9700\u8981\u90E8\u7F72\u5230\u5916\u90E8\u5BB9\u5668\uFF1A"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@SpringBootApplication\npublic class Application extends SpringBootServletInitializer {\n    \n    @Override\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder builder) {\n        return builder.sources(Application.class);\n    }\n    \n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:"<packaging>war</packaging>\n"})}),"\n",(0,i.jsx)(e.h3,{id:"12-spring-boot-\u662F\u5426\u53EF\u4EE5\u4F7F\u7528-xml-\u914D\u7F6E-",children:"12. Spring Boot \u662F\u5426\u53EF\u4EE5\u4F7F\u7528 XML \u914D\u7F6E ?"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,i.jsx)(e.p,{children:"\u53EF\u4EE5\uFF0C\u4F46\u4E0D\u63A8\u8350\u3002Spring Boot \u63A8\u8350\u4F7F\u7528 Java \u914D\u7F6E\u548C\u6CE8\u89E3\uFF0C\u4F46\u4ECD\u7136\u652F\u6301 XML \u914D\u7F6E\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F\u4E00\uFF1A\u4F7F\u7528 @ImportResource \u5BFC\u5165 XML \u914D\u7F6E"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"XML \u914D\u7F6E\u6587\u4EF6\uFF08beans.xml\uFF09\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans\n       http://www.springframework.org/schema/beans/spring-beans.xsd">\n    \n    <bean id="userService" class="com.example.service.UserService">\n        <property name="userRepository" ref="userRepository"/>\n    </bean>\n    \n    <bean id="userRepository" class="com.example.repository.UserRepository"/>\n</beans>\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u542F\u52A8\u7C7B\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@SpringBootApplication\n@ImportResource("classpath:beans.xml")\npublic class Application {\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F\u4E8C\uFF1A\u5728\u914D\u7F6E\u7C7B\u4E2D\u5BFC\u5165"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Configuration\n@ImportResource({"classpath:beans.xml", "classpath:services.xml"})\npublic class XmlConfig {\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4E3A\u4EC0\u4E48\u4E0D\u63A8\u8350\u4F7F\u7528 XML\uFF1F"})}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5197\u4F59"}),"\uFF1AXML \u914D\u7F6E\u6BD4\u6CE8\u89E3\u66F4\u5197\u957F"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7C7B\u578B\u5B89\u5168"}),"\uFF1AJava \u914D\u7F6E\u6709\u7F16\u8BD1\u65F6\u68C0\u67E5"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u91CD\u6784\u53CB\u597D"}),"\uFF1AIDE \u53EF\u4EE5\u66F4\u597D\u5730\u652F\u6301 Java \u914D\u7F6E"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Spring Boot \u7406\u5FF5"}),"\uFF1A\u7EA6\u5B9A\u4F18\u4E8E\u914D\u7F6E"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5BF9\u6BD4\u793A\u4F8B\uFF1A"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"XML \u65B9\u5F0F\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:'<bean id="dataSource" class="com.zaxxer.hikari.HikariDataSource">\n    <property name="driverClassName" value="${spring.datasource.driver-class-name}"/>\n    <property name="jdbcUrl" value="${spring.datasource.url}"/>\n    <property name="username" value="${spring.datasource.username}"/>\n    <property name="password" value="${spring.datasource.password}"/>\n</bean>\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Java \u914D\u7F6E\u65B9\u5F0F\uFF08\u63A8\u8350\uFF09\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Configuration\npublic class DataSourceConfig {\n    @Bean\n    public DataSource dataSource(\n            @Value("${spring.datasource.url}") String url,\n            @Value("${spring.datasource.username}") String username,\n            @Value("${spring.datasource.password}") String password) {\n        HikariDataSource dataSource = new HikariDataSource();\n        dataSource.setJdbcUrl(url);\n        dataSource.setUsername(username);\n        dataSource.setPassword(password);\n        return dataSource;\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4F7F\u7528\u573A\u666F\uFF1A"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8FC1\u79FB\u8001\u9879\u76EE\u5230 Spring Boot"}),"\n",(0,i.jsx)(e.li,{children:"\u96C6\u6210\u7B2C\u4E09\u65B9\u5E93\u7684 XML \u914D\u7F6E"}),"\n",(0,i.jsx)(e.li,{children:"\u56E2\u961F\u4E60\u60EF\u4F7F\u7528 XML"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"13-springboot-\u9ED8\u8BA4\u540C\u65F6\u53EF\u4EE5\u5904\u7406\u7684\u6700\u5927\u8FDE\u63A5\u6570\u662F\u591A\u5C11",children:"13. SpringBoot \u9ED8\u8BA4\u540C\u65F6\u53EF\u4EE5\u5904\u7406\u7684\u6700\u5927\u8FDE\u63A5\u6570\u662F\u591A\u5C11\uFF1F"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,i.jsx)(e.p,{children:"Spring Boot \u9ED8\u8BA4\u4F7F\u7528 Tomcat \u4F5C\u4E3A\u5D4C\u5165\u5F0F\u5BB9\u5668\uFF0C\u5176\u9ED8\u8BA4\u914D\u7F6E\u5982\u4E0B\uFF1A"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Tomcat \u9ED8\u8BA4\u914D\u7F6E\uFF1A"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6700\u5927\u7EBF\u7A0B\u6570\uFF08max-threads\uFF09"}),"\uFF1A200"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6700\u5C0F\u7A7A\u95F2\u7EBF\u7A0B\u6570\uFF08min-spare-threads\uFF09"}),"\uFF1A10"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6700\u5927\u8FDE\u63A5\u6570\uFF08max-connections\uFF09"}),"\uFF1A8192\uFF08BIO \u6A21\u5F0F\uFF09\u6216 10000\uFF08NIO \u6A21\u5F0F\uFF09"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7B49\u5F85\u961F\u5217\u957F\u5EA6\uFF08accept-count\uFF09"}),"\uFF1A100"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u914D\u7F6E\u8BF4\u660E\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"server:\n  port: 8080\n  tomcat:\n    threads:\n      max: 200              # \u6700\u5927\u5DE5\u4F5C\u7EBF\u7A0B\u6570\n      min-spare: 10         # \u6700\u5C0F\u7A7A\u95F2\u7EBF\u7A0B\u6570\n    max-connections: 10000  # \u6700\u5927\u8FDE\u63A5\u6570\n    accept-count: 100       # \u7B49\u5F85\u961F\u5217\u957F\u5EA6\n    connection-timeout: 20000  # \u8FDE\u63A5\u8D85\u65F6\u65F6\u95F4\uFF08\u6BEB\u79D2\uFF09\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u53C2\u6570\u8BE6\u89E3\uFF1A"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. max-threads\uFF08\u6700\u5927\u7EBF\u7A0B\u6570\uFF09"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u9ED8\u8BA4\u503C\uFF1A200"}),"\n",(0,i.jsx)(e.li,{children:"\u542B\u4E49\uFF1ATomcat \u521B\u5EFA\u7684\u6700\u5927\u5DE5\u4F5C\u7EBF\u7A0B\u6570"}),"\n",(0,i.jsx)(e.li,{children:"\u5F71\u54CD\uFF1A\u51B3\u5B9A\u4E86\u540C\u65F6\u5904\u7406\u8BF7\u6C42\u7684\u80FD\u529B"}),"\n",(0,i.jsx)(e.li,{children:"\u5EFA\u8BAE\uFF1A\u6839\u636E CPU \u6838\u5FC3\u6570\u548C\u4E1A\u52A1\u7279\u70B9\u8C03\u6574"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. min-spare-threads\uFF08\u6700\u5C0F\u7A7A\u95F2\u7EBF\u7A0B\u6570\uFF09"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u9ED8\u8BA4\u503C\uFF1A10"}),"\n",(0,i.jsx)(e.li,{children:"\u542B\u4E49\uFF1ATomcat \u59CB\u7EC8\u4FDD\u6301\u7684\u6700\u5C0F\u7EBF\u7A0B\u6570"}),"\n",(0,i.jsx)(e.li,{children:"\u5F71\u54CD\uFF1A\u51CF\u5C11\u7EBF\u7A0B\u521B\u5EFA\u5F00\u9500"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. max-connections\uFF08\u6700\u5927\u8FDE\u63A5\u6570\uFF09"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u9ED8\u8BA4\u503C\uFF1A10000\uFF08NIO\uFF09"}),"\n",(0,i.jsx)(e.li,{children:"\u542B\u4E49\uFF1A\u670D\u52A1\u5668\u63A5\u53D7\u7684\u6700\u5927\u8FDE\u63A5\u6570"}),"\n",(0,i.jsx)(e.li,{children:"\u5F71\u54CD\uFF1A\u8D85\u8FC7\u6B64\u6570\u7684\u8FDE\u63A5\u4F1A\u88AB\u62D2\u7EDD\u6216\u7B49\u5F85"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4. accept-count\uFF08\u7B49\u5F85\u961F\u5217\u957F\u5EA6\uFF09"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u9ED8\u8BA4\u503C\uFF1A100"}),"\n",(0,i.jsx)(e.li,{children:"\u542B\u4E49\uFF1A\u5F53\u6240\u6709\u7EBF\u7A0B\u90FD\u5728\u4F7F\u7528\u65F6\uFF0C\u7B49\u5F85\u961F\u5217\u7684\u957F\u5EA6"}),"\n",(0,i.jsx)(e.li,{children:"\u5F71\u54CD\uFF1A\u8D85\u8FC7\u6B64\u6570\u7684\u8FDE\u63A5\u4F1A\u88AB\u62D2\u7EDD"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5904\u7406\u6D41\u7A0B\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"1. \u5BA2\u6237\u7AEF\u53D1\u8D77\u8FDE\u63A5\n   \u251C\u2500 \u8FDE\u63A5\u6570 < max-connections\uFF1F\n   \u2502  \u251C\u2500 \u662F\uFF1A\u63A5\u53D7\u8FDE\u63A5\n   \u2502  \u2514\u2500 \u5426\uFF1A\u8FDB\u5165\u7B49\u5F85\u961F\u5217\n   \u2502\n2. \u7B49\u5F85\u961F\u5217\n   \u251C\u2500 \u961F\u5217\u957F\u5EA6 < accept-count\uFF1F\n   \u2502  \u251C\u2500 \u662F\uFF1A\u7B49\u5F85\n   \u2502  \u2514\u2500 \u5426\uFF1A\u62D2\u7EDD\u8FDE\u63A5\n   \u2502\n3. \u5904\u7406\u8BF7\u6C42\n   \u251C\u2500 \u7A7A\u95F2\u7EBF\u7A0B > 0\uFF1F\n   \u2502  \u251C\u2500 \u662F\uFF1A\u5206\u914D\u7EBF\u7A0B\u5904\u7406\n   \u2502  \u2514\u2500 \u5426\uFF1A\u7B49\u5F85\u7EBF\u7A0B\u91CA\u653E\n   \u2502\n4. \u7EBF\u7A0B\u6C60\n   \u251C\u2500 \u5F53\u524D\u7EBF\u7A0B\u6570 < max-threads\uFF1F\n   \u2502  \u251C\u2500 \u662F\uFF1A\u521B\u5EFA\u65B0\u7EBF\u7A0B\n   \u2502  \u2514\u2500 \u5426\uFF1A\u7B49\u5F85\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4E0D\u540C\u5BB9\u5668\u7684\u9ED8\u8BA4\u914D\u7F6E\uFF1A"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Tomcat\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"server:\n  tomcat:\n    threads:\n      max: 200\n    max-connections: 10000\n    accept-count: 100\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Jetty\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"server:\n  jetty:\n    threads:\n      max: 200\n      min: 8\n    max-queue-capacity: 0  # \u65E0\u9650\u5236\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Undertow\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"server:\n  undertow:\n    threads:\n      io: 4              # IO \u7EBF\u7A0B\u6570\uFF08\u901A\u5E38\u4E3A CPU \u6838\u5FC3\u6570\uFF09\n      worker: 200        # \u5DE5\u4F5C\u7EBF\u7A0B\u6570\n    buffer-size: 1024\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6027\u80FD\u8C03\u4F18\u5EFA\u8BAE\uFF1A"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. CPU \u5BC6\u96C6\u578B\u5E94\u7528\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"server:\n  tomcat:\n    threads:\n      max: 100  # CPU \u6838\u5FC3\u6570 * 2\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. IO \u5BC6\u96C6\u578B\u5E94\u7528\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"server:\n  tomcat:\n    threads:\n      max: 500  # \u53EF\u4EE5\u8BBE\u7F6E\u66F4\u5927\n    max-connections: 20000\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u9AD8\u5E76\u53D1\u573A\u666F\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"server:\n  tomcat:\n    threads:\n      max: 800\n    max-connections: 20000\n    accept-count: 500\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u76D1\u63A7\u548C\u6D4B\u8BD5\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@RestController\npublic class MonitorController {\n    @GetMapping("/thread-info")\n    public Map<String, Object> getThreadInfo() {\n        ThreadPoolExecutor executor = (ThreadPoolExecutor) \n            ((TomcatWebServer) ((WebServerApplicationContext) applicationContext)\n                .getWebServer()).getTomcat().getConnector()\n                .getProtocolHandler().getExecutor();\n        \n        Map<String, Object> info = new HashMap<>();\n        info.put("activeCount", executor.getActiveCount());\n        info.put("poolSize", executor.getPoolSize());\n        info.put("corePoolSize", executor.getCorePoolSize());\n        info.put("maximumPoolSize", executor.getMaximumPoolSize());\n        info.put("queueSize", executor.getQueue().size());\n        return info;\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u538B\u529B\u6D4B\u8BD5\u5DE5\u5177\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# \u4F7F\u7528 Apache Bench\nab -n 10000 -c 200 http://localhost:8080/api/test\n\n# \u4F7F\u7528 JMeter\n# \u914D\u7F6E\u7EBF\u7A0B\u7EC4\uFF0C\u6A21\u62DF\u5E76\u53D1\u8BF7\u6C42\n"})}),"\n",(0,i.jsx)(e.h3,{id:"14-\u5982\u4F55\u7406\u89E3-spring-boot-\u4E2D\u7684-starter",children:"14. \u5982\u4F55\u7406\u89E3 Spring Boot \u4E2D\u7684 starter\uFF1F"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,i.jsx)(e.p,{children:"Starter \u662F Spring Boot \u7684\u6838\u5FC3\u7279\u6027\u4E4B\u4E00\uFF0C\u662F\u4E00\u7EC4\u9884\u5B9A\u4E49\u7684\u4F9D\u8D56\u63CF\u8FF0\u7B26\uFF0C\u7528\u4E8E\u7B80\u5316\u9879\u76EE\u4F9D\u8D56\u7BA1\u7406\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. Starter \u7684\u4F5C\u7528"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7B80\u5316\u4F9D\u8D56\u7BA1\u7406"}),"\uFF1A\u4E00\u4E2A Starter \u5305\u542B\u4E00\u7EC4\u76F8\u5173\u4F9D\u8D56"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7248\u672C\u7BA1\u7406"}),"\uFF1A\u81EA\u52A8\u7BA1\u7406\u4F9D\u8D56\u7248\u672C\uFF0C\u907F\u514D\u7248\u672C\u51B2\u7A81"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u81EA\u52A8\u914D\u7F6E"}),"\uFF1A\u63D0\u4F9B\u9ED8\u8BA4\u914D\u7F6E\uFF0C\u5F00\u7BB1\u5373\u7528"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7EA6\u5B9A\u4F18\u4E8E\u914D\u7F6E"}),"\uFF1A\u9075\u5FAA\u6700\u4F73\u5B9E\u8DF5"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u5E38\u7528 Starter"})}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"Starter"}),(0,i.jsx)(e.th,{children:"\u529F\u80FD"}),(0,i.jsx)(e.th,{children:"\u5305\u542B\u7684\u4E3B\u8981\u4F9D\u8D56"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"spring-boot-starter-web"}),(0,i.jsx)(e.td,{children:"Web \u5F00\u53D1"}),(0,i.jsx)(e.td,{children:"Spring MVC, Tomcat, Jackson"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"spring-boot-starter-data-jpa"}),(0,i.jsx)(e.td,{children:"JPA \u6570\u636E\u8BBF\u95EE"}),(0,i.jsx)(e.td,{children:"Hibernate, Spring Data JPA"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"spring-boot-starter-data-redis"}),(0,i.jsx)(e.td,{children:"Redis"}),(0,i.jsx)(e.td,{children:"Lettuce, Spring Data Redis"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"spring-boot-starter-security"}),(0,i.jsx)(e.td,{children:"\u5B89\u5168\u6846\u67B6"}),(0,i.jsx)(e.td,{children:"Spring Security"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"spring-boot-starter-test"}),(0,i.jsx)(e.td,{children:"\u6D4B\u8BD5"}),(0,i.jsx)(e.td,{children:"JUnit, Mockito, AssertJ"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"spring-boot-starter-aop"}),(0,i.jsx)(e.td,{children:"AOP"}),(0,i.jsx)(e.td,{children:"Spring AOP, AspectJ"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"spring-boot-starter-validation"}),(0,i.jsx)(e.td,{children:"\u6570\u636E\u9A8C\u8BC1"}),(0,i.jsx)(e.td,{children:"Hibernate Validator"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"spring-boot-starter-actuator"}),(0,i.jsx)(e.td,{children:"\u76D1\u63A7"}),(0,i.jsx)(e.td,{children:"Actuator"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"spring-boot-starter-logging"}),(0,i.jsx)(e.td,{children:"\u65E5\u5FD7"}),(0,i.jsx)(e.td,{children:"Logback, SLF4J"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"spring-boot-starter-jdbc"}),(0,i.jsx)(e.td,{children:"JDBC"}),(0,i.jsx)(e.td,{children:"HikariCP, Spring JDBC"})]})]})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. Starter \u793A\u4F8B"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4F7F\u7528\u524D\uFF08\u4F20\u7EDF\u65B9\u5F0F\uFF09\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:"<dependencies>\n    <dependency>\n        <groupId>org.springframework</groupId>\n        <artifactId>spring-web</artifactId>\n        <version>5.3.20</version>\n    </dependency>\n    <dependency>\n        <groupId>org.springframework</groupId>\n        <artifactId>spring-webmvc</artifactId>\n        <version>5.3.20</version>\n    </dependency>\n    <dependency>\n        <groupId>org.apache.tomcat.embed</groupId>\n        <artifactId>tomcat-embed-core</artifactId>\n        <version>9.0.62</version>\n    </dependency>\n    <dependency>\n        <groupId>com.fasterxml.jackson.core</groupId>\n        <artifactId>jackson-databind</artifactId>\n        <version>2.13.3</version>\n    </dependency>\n    \x3c!-- \u8FD8\u6709\u5F88\u591A\u5176\u4ED6\u4F9D\u8D56... --\x3e\n</dependencies>\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4F7F\u7528\u540E\uFF08Starter \u65B9\u5F0F\uFF09\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:"<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-web</artifactId>\n</dependency>\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4. Starter \u7684\u547D\u540D\u89C4\u8303"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5B98\u65B9 Starter"}),"\uFF1A",(0,i.jsx)(e.code,{children:"spring-boot-starter-*"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7B2C\u4E09\u65B9 Starter"}),"\uFF1A",(0,i.jsx)(e.code,{children:"*-spring-boot-starter"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u793A\u4F8B\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:"\x3c!-- \u5B98\u65B9 --\x3e\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-web</artifactId>\n</dependency>\n\n\x3c!-- \u7B2C\u4E09\u65B9\uFF08MyBatis\uFF09 --\x3e\n<dependency>\n    <groupId>org.mybatis.spring.boot</groupId>\n    <artifactId>mybatis-spring-boot-starter</artifactId>\n    <version>2.2.2</version>\n</dependency>\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"5. \u81EA\u5B9A\u4E49 Starter"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u573A\u666F\uFF1A"})," \u5C01\u88C5\u516C\u53F8\u5185\u90E8\u901A\u7528\u529F\u80FD"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6B65\u9AA4\u4E00\uFF1A\u521B\u5EFA Starter \u9879\u76EE"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u9879\u76EE\u7ED3\u6784\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"my-spring-boot-starter/\n\u251C\u2500\u2500 pom.xml\n\u2514\u2500\u2500 src/main/java/\n    \u2514\u2500\u2500 com/example/starter/\n        \u251C\u2500\u2500 MyAutoConfiguration.java\n        \u251C\u2500\u2500 MyProperties.java\n        \u2514\u2500\u2500 MyService.java\n\u2514\u2500\u2500 src/main/resources/\n    \u2514\u2500\u2500 META-INF/\n        \u2514\u2500\u2500 spring.factories\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"pom.xml\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:"<dependencies>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-autoconfigure</artifactId>\n    </dependency>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-configuration-processor</artifactId>\n        <optional>true</optional>\n    </dependency>\n</dependencies>\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u914D\u7F6E\u5C5E\u6027\u7C7B\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@ConfigurationProperties(prefix = "my.service")\n@Data\npublic class MyProperties {\n    private String name = "default";\n    private int timeout = 30;\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u670D\u52A1\u7C7B\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public class MyService {\n    private MyProperties properties;\n    \n    public MyService(MyProperties properties) {\n        this.properties = properties;\n    }\n    \n    public void doSomething() {\n        System.out.println("Service: " + properties.getName());\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u81EA\u52A8\u914D\u7F6E\u7C7B\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Configuration\n@EnableConfigurationProperties(MyProperties.class)\n@ConditionalOnClass(MyService.class)\npublic class MyAutoConfiguration {\n    \n    @Bean\n    @ConditionalOnMissingBean\n    public MyService myService(MyProperties properties) {\n        return new MyService(properties);\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"spring.factories\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-properties",children:"org.springframework.boot.autoconfigure.EnableAutoConfiguration=\\\ncom.example.starter.MyAutoConfiguration\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6B65\u9AA4\u4E8C\uFF1A\u4F7F\u7528\u81EA\u5B9A\u4E49 Starter"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:"<dependency>\n    <groupId>com.example</groupId>\n    <artifactId>my-spring-boot-starter</artifactId>\n    <version>1.0.0</version>\n</dependency>\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"# application.yml\nmy:\n  service:\n    name: MyApp\n    timeout: 60\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@RestController\npublic class TestController {\n    @Autowired\n    private MyService myService;\n    \n    @GetMapping("/test")\n    public String test() {\n        myService.doSomething();\n        return "OK";\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"6. Starter \u7684\u4F18\u52BF"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u4F9D\u8D56\u7BA1\u7406\u7B80\u5316"}),"\uFF1A\u4E00\u4E2A\u4F9D\u8D56\u5F15\u5165\u591A\u4E2A\u76F8\u5173\u5E93"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7248\u672C\u7EDF\u4E00"}),"\uFF1A\u907F\u514D\u7248\u672C\u51B2\u7A81"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u81EA\u52A8\u914D\u7F6E"}),"\uFF1A\u51CF\u5C11\u914D\u7F6E\u4EE3\u7801"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6700\u4F73\u5B9E\u8DF5"}),"\uFF1A\u9075\u5FAA Spring Boot \u89C4\u8303"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u53EF\u6269\u5C55"}),"\uFF1A\u53EF\u4EE5\u81EA\u5B9A\u4E49 Starter"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"7. \u67E5\u770B Starter \u5305\u542B\u7684\u4F9D\u8D56"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# Maven\nmvn dependency:tree\n\n# Gradle\ngradle dependencies\n"})}),"\n",(0,i.jsx)(e.h3,{id:"15-spring-boot-\u5982\u4F55\u5904\u7406\u8DE8\u57DF\u8BF7\u6C42cors",children:"15. Spring Boot \u5982\u4F55\u5904\u7406\u8DE8\u57DF\u8BF7\u6C42\uFF08CORS\uFF09\uFF1F"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,i.jsx)(e.p,{children:"Spring Boot \u63D0\u4F9B\u591A\u79CD\u65B9\u5F0F\u5904\u7406\u8DE8\u57DF\u8BF7\u6C42\uFF08CORS\uFF09\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F\u4E00\uFF1A\u4F7F\u7528 @CrossOrigin \u6CE8\u89E3\uFF08\u5C40\u90E8\u914D\u7F6E\uFF09"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5728 Controller \u4E0A\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@RestController\n@RequestMapping("/api")\n@CrossOrigin(origins = "http://localhost:3000")  // \u5141\u8BB8\u7279\u5B9A\u57DF\u540D\npublic class UserController {\n    \n    @GetMapping("/users")\n    public List<User> getUsers() {\n        return userService.findAll();\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5728\u65B9\u6CD5\u4E0A\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@RestController\n@RequestMapping("/api")\npublic class UserController {\n    \n    @CrossOrigin(\n        origins = {"http://localhost:3000", "https://example.com"},\n        methods = {RequestMethod.GET, RequestMethod.POST},\n        maxAge = 3600,\n        allowedHeaders = "*",\n        exposedHeaders = "Authorization",\n        allowCredentials = "true"\n    )\n    @GetMapping("/users")\n    public List<User> getUsers() {\n        return userService.findAll();\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F\u4E8C\uFF1A\u5168\u5C40\u914D\u7F6E\uFF08\u63A8\u8350\uFF09"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u6CD5 1\uFF1A\u5B9E\u73B0 WebMvcConfigurer"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Configuration\npublic class CorsConfig implements WebMvcConfigurer {\n    \n    @Override\n    public void addCorsMappings(CorsRegistry registry) {\n        registry.addMapping("/**")  // \u6240\u6709\u63A5\u53E3\n                .allowedOrigins("http://localhost:3000", "https://example.com")\n                .allowedMethods("GET", "POST", "PUT", "DELETE", "OPTIONS")\n                .allowedHeaders("*")\n                .exposedHeaders("Authorization")\n                .allowCredentials(true)\n                .maxAge(3600);\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u6CD5 2\uFF1A\u4F7F\u7528 CorsFilter"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Configuration\npublic class CorsConfig {\n    \n    @Bean\n    public CorsFilter corsFilter() {\n        CorsConfiguration config = new CorsConfiguration();\n        config.setAllowCredentials(true);\n        config.addAllowedOrigin("http://localhost:3000");\n        config.addAllowedOrigin("https://example.com");\n        config.addAllowedHeader("*");\n        config.addAllowedMethod("*");\n        config.setMaxAge(3600L);\n        \n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration("/**", config);\n        \n        return new CorsFilter(source);\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F\u4E09\uFF1A\u914D\u7F6E\u6587\u4EF6\u65B9\u5F0F\uFF08Spring Boot 2.4+\uFF09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:'spring:\n  web:\n    cors:\n      allowed-origins: "http://localhost:3000,https://example.com"\n      allowed-methods: "GET,POST,PUT,DELETE,OPTIONS"\n      allowed-headers: "*"\n      exposed-headers: "Authorization"\n      allow-credentials: true\n      max-age: 3600\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F\u56DB\uFF1A\u4F7F\u7528 Spring Security \u914D\u7F6E"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n    \n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.cors().configurationSource(corsConfigurationSource())\n            .and()\n            .csrf().disable()\n            .authorizeRequests()\n            .anyRequest().authenticated();\n        return http.build();\n    }\n    \n    @Bean\n    public CorsConfigurationSource corsConfigurationSource() {\n        CorsConfiguration configuration = new CorsConfiguration();\n        configuration.setAllowedOrigins(Arrays.asList("http://localhost:3000"));\n        configuration.setAllowedMethods(Arrays.asList("GET", "POST", "PUT", "DELETE"));\n        configuration.setAllowedHeaders(Arrays.asList("*"));\n        configuration.setAllowCredentials(true);\n        \n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration("/**", configuration);\n        return source;\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"CORS \u53C2\u6570\u8BF4\u660E\uFF1A"})}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u53C2\u6570"}),(0,i.jsx)(e.th,{children:"\u8BF4\u660E"}),(0,i.jsx)(e.th,{children:"\u793A\u4F8B"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"allowedOrigins"}),(0,i.jsx)(e.td,{children:"\u5141\u8BB8\u7684\u6E90"}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"http://localhost:3000"})})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"allowedMethods"}),(0,i.jsx)(e.td,{children:"\u5141\u8BB8\u7684 HTTP \u65B9\u6CD5"}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"GET, POST, PUT, DELETE"})})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"allowedHeaders"}),(0,i.jsx)(e.td,{children:"\u5141\u8BB8\u7684\u8BF7\u6C42\u5934"}),(0,i.jsxs)(e.td,{children:[(0,i.jsx)(e.code,{children:"*"})," \u6216 ",(0,i.jsx)(e.code,{children:"Content-Type, Authorization"})]})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"exposedHeaders"}),(0,i.jsx)(e.td,{children:"\u66B4\u9732\u7ED9\u5BA2\u6237\u7AEF\u7684\u54CD\u5E94\u5934"}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"Authorization"})})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"allowCredentials"}),(0,i.jsx)(e.td,{children:"\u662F\u5426\u5141\u8BB8\u53D1\u9001 Cookie"}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"true"})})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"maxAge"}),(0,i.jsx)(e.td,{children:"\u9884\u68C0\u8BF7\u6C42\u7F13\u5B58\u65F6\u95F4\uFF08\u79D2\uFF09"}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"3600"})})]})]})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"CORS \u5DE5\u4F5C\u539F\u7406\uFF1A"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B80\u5355\u8BF7\u6C42\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\u5BA2\u6237\u7AEF -> \u670D\u52A1\u5668\nGET /api/users HTTP/1.1\nOrigin: http://localhost:3000\n\n\u670D\u52A1\u5668 -> \u5BA2\u6237\u7AEF\nHTTP/1.1 200 OK\nAccess-Control-Allow-Origin: http://localhost:3000\nAccess-Control-Allow-Credentials: true\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u9884\u68C0\u8BF7\u6C42\uFF08Preflight\uFF09\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\u5BA2\u6237\u7AEF -> \u670D\u52A1\u5668\uFF08OPTIONS \u8BF7\u6C42\uFF09\nOPTIONS /api/users HTTP/1.1\nOrigin: http://localhost:3000\nAccess-Control-Request-Method: POST\nAccess-Control-Request-Headers: Content-Type\n\n\u670D\u52A1\u5668 -> \u5BA2\u6237\u7AEF\nHTTP/1.1 200 OK\nAccess-Control-Allow-Origin: http://localhost:3000\nAccess-Control-Allow-Methods: GET, POST, PUT, DELETE\nAccess-Control-Allow-Headers: Content-Type\nAccess-Control-Max-Age: 3600\n\n\u5BA2\u6237\u7AEF -> \u670D\u52A1\u5668\uFF08\u5B9E\u9645\u8BF7\u6C42\uFF09\nPOST /api/users HTTP/1.1\nOrigin: http://localhost:3000\nContent-Type: application/json\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5E38\u89C1\u95EE\u9898\uFF1A"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u5141\u8BB8\u6240\u6709\u57DF\u540D\uFF08\u5F00\u53D1\u73AF\u5883\uFF09\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'config.addAllowedOriginPattern("*");  // \u4F7F\u7528 Pattern \u800C\u4E0D\u662F Origin\nconfig.setAllowCredentials(true);\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u751F\u4EA7\u73AF\u5883\u914D\u7F6E\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'// \u53EA\u5141\u8BB8\u7279\u5B9A\u57DF\u540D\nconfig.setAllowedOrigins(Arrays.asList(\n    "https://www.example.com",\n    "https://app.example.com"\n));\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u52A8\u6001\u914D\u7F6E\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Configuration\npublic class CorsConfig implements WebMvcConfigurer {\n    \n    @Value("${cors.allowed-origins}")\n    private String[] allowedOrigins;\n    \n    @Override\n    public void addCorsMappings(CorsRegistry registry) {\n        registry.addMapping("/**")\n                .allowedOrigins(allowedOrigins)\n                .allowedMethods("*")\n                .allowedHeaders("*")\n                .allowCredentials(true);\n    }\n}\n'})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"# application.yml\ncors:\n  allowed-origins:\n    - http://localhost:3000\n    - https://example.com\n"})}),"\n",(0,i.jsx)(e.h3,{id:"16-\u5728-spring-boot-\u4E2D\u4F60\u662F\u600E\u4E48\u4F7F\u7528\u62E6\u622A\u5668\u7684",children:"16. \u5728 Spring Boot \u4E2D\u4F60\u662F\u600E\u4E48\u4F7F\u7528\u62E6\u622A\u5668\u7684\uFF1F"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,i.jsxs)(e.p,{children:["Spring Boot \u4E2D\u4F7F\u7528\u62E6\u622A\u5668\u9700\u8981\u5B9E\u73B0 ",(0,i.jsx)(e.code,{children:"HandlerInterceptor"})," \u63A5\u53E3\u5E76\u6CE8\u518C\u5230 Spring MVC \u914D\u7F6E\u4E2D\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6B65\u9AA4\u4E00\uFF1A\u521B\u5EFA\u62E6\u622A\u5668"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\npublic class LoginInterceptor implements HandlerInterceptor {\n    \n    /**\n     * \u5728\u8BF7\u6C42\u5904\u7406\u4E4B\u524D\u6267\u884C\n     * \u8FD4\u56DE true \u7EE7\u7EED\u6267\u884C\uFF0C\u8FD4\u56DE false \u4E2D\u65AD\u8BF7\u6C42\n     */\n    @Override\n    public boolean preHandle(HttpServletRequest request, \n                            HttpServletResponse response, \n                            Object handler) throws Exception {\n        String token = request.getHeader("Authorization");\n        \n        if (token == null || token.isEmpty()) {\n            response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\n            response.getWriter().write("Unauthorized");\n            return false;\n        }\n        \n        // \u9A8C\u8BC1 token\n        if (!validateToken(token)) {\n            response.setStatus(HttpServletResponse.SC_FORBIDDEN);\n            return false;\n        }\n        \n        // \u5C06\u7528\u6237\u4FE1\u606F\u5B58\u5165 request\n        request.setAttribute("userId", getUserIdFromToken(token));\n        return true;\n    }\n    \n    /**\n     * \u5728\u8BF7\u6C42\u5904\u7406\u4E4B\u540E\u3001\u89C6\u56FE\u6E32\u67D3\u4E4B\u524D\u6267\u884C\n     */\n    @Override\n    public void postHandle(HttpServletRequest request, \n                          HttpServletResponse response, \n                          Object handler, \n                          ModelAndView modelAndView) throws Exception {\n        // \u53EF\u4EE5\u4FEE\u6539 ModelAndView\n        System.out.println("postHandle executed");\n    }\n    \n    /**\n     * \u5728\u6574\u4E2A\u8BF7\u6C42\u5B8C\u6210\u4E4B\u540E\u6267\u884C\uFF08\u89C6\u56FE\u6E32\u67D3\u5B8C\u6210\u540E\uFF09\n     * \u65E0\u8BBA\u662F\u5426\u53D1\u751F\u5F02\u5E38\u90FD\u4F1A\u6267\u884C\n     */\n    @Override\n    public void afterCompletion(HttpServletRequest request, \n                               HttpServletResponse response, \n                               Object handler, \n                               Exception ex) throws Exception {\n        // \u6E05\u7406\u8D44\u6E90\u3001\u8BB0\u5F55\u65E5\u5FD7\u7B49\n        System.out.println("afterCompletion executed");\n    }\n    \n    private boolean validateToken(String token) {\n        // \u9A8C\u8BC1\u903B\u8F91\n        return true;\n    }\n    \n    private String getUserIdFromToken(String token) {\n        // \u89E3\u6790 token\n        return "user123";\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6B65\u9AA4\u4E8C\uFF1A\u6CE8\u518C\u62E6\u622A\u5668"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Configuration\npublic class WebConfig implements WebMvcConfigurer {\n    \n    @Autowired\n    private LoginInterceptor loginInterceptor;\n    \n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        registry.addInterceptor(loginInterceptor)\n                .addPathPatterns("/**")  // \u62E6\u622A\u6240\u6709\u8BF7\u6C42\n                .excludePathPatterns(    // \u6392\u9664\u8DEF\u5F84\n                    "/login",\n                    "/register",\n                    "/public/**",\n                    "/static/**",\n                    "/error"\n                )\n                .order(1);  // \u6267\u884C\u987A\u5E8F\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5E38\u89C1\u62E6\u622A\u5668\u793A\u4F8B\uFF1A"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u65E5\u5FD7\u62E6\u622A\u5668"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\n@Slf4j\npublic class LogInterceptor implements HandlerInterceptor {\n    \n    @Override\n    public boolean preHandle(HttpServletRequest request, \n                            HttpServletResponse response, \n                            Object handler) {\n        long startTime = System.currentTimeMillis();\n        request.setAttribute("startTime", startTime);\n        \n        log.info("Request URL: {}, Method: {}", \n                request.getRequestURI(), \n                request.getMethod());\n        return true;\n    }\n    \n    @Override\n    public void afterCompletion(HttpServletRequest request, \n                               HttpServletResponse response, \n                               Object handler, \n                               Exception ex) {\n        long startTime = (Long) request.getAttribute("startTime");\n        long endTime = System.currentTimeMillis();\n        \n        log.info("Request completed in {} ms, Status: {}", \n                endTime - startTime, \n                response.getStatus());\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u6743\u9650\u62E6\u622A\u5668"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\npublic class PermissionInterceptor implements HandlerInterceptor {\n    \n    @Autowired\n    private UserService userService;\n    \n    @Override\n    public boolean preHandle(HttpServletRequest request, \n                            HttpServletResponse response, \n                            Object handler) throws Exception {\n        // \u68C0\u67E5\u662F\u5426\u662F HandlerMethod\n        if (!(handler instanceof HandlerMethod)) {\n            return true;\n        }\n        \n        HandlerMethod handlerMethod = (HandlerMethod) handler;\n        \n        // \u68C0\u67E5\u65B9\u6CD5\u4E0A\u7684\u6743\u9650\u6CE8\u89E3\n        RequirePermission annotation = handlerMethod.getMethodAnnotation(RequirePermission.class);\n        if (annotation == null) {\n            return true;\n        }\n        \n        // \u83B7\u53D6\u7528\u6237\u4FE1\u606F\n        String userId = (String) request.getAttribute("userId");\n        User user = userService.findById(userId);\n        \n        // \u68C0\u67E5\u6743\u9650\n        String requiredPermission = annotation.value();\n        if (!user.hasPermission(requiredPermission)) {\n            response.setStatus(HttpServletResponse.SC_FORBIDDEN);\n            response.getWriter().write("Permission denied");\n            return false;\n        }\n        \n        return true;\n    }\n}\n\n// \u81EA\u5B9A\u4E49\u6CE8\u89E3\n@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface RequirePermission {\n    String value();\n}\n\n// \u4F7F\u7528\n@RestController\npublic class AdminController {\n    \n    @RequirePermission("admin:user:delete")\n    @DeleteMapping("/users/{id}")\n    public void deleteUser(@PathVariable String id) {\n        // ...\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u9650\u6D41\u62E6\u622A\u5668"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\npublic class RateLimitInterceptor implements HandlerInterceptor {\n    \n    private final Map<String, RateLimiter> limiters = new ConcurrentHashMap<>();\n    \n    @Override\n    public boolean preHandle(HttpServletRequest request, \n                            HttpServletResponse response, \n                            Object handler) throws Exception {\n        String clientIp = getClientIp(request);\n        \n        // \u6BCF\u4E2A IP \u6BCF\u79D2\u6700\u591A 10 \u4E2A\u8BF7\u6C42\n        RateLimiter limiter = limiters.computeIfAbsent(\n            clientIp, \n            k -> RateLimiter.create(10.0)\n        );\n        \n        if (!limiter.tryAcquire()) {\n            response.setStatus(429);  // Too Many Requests\n            response.getWriter().write("Rate limit exceeded");\n            return false;\n        }\n        \n        return true;\n    }\n    \n    private String getClientIp(HttpServletRequest request) {\n        String ip = request.getHeader("X-Forwarded-For");\n        if (ip == null || ip.isEmpty()) {\n            ip = request.getRemoteAddr();\n        }\n        return ip;\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u62E6\u622A\u5668\u6267\u884C\u6D41\u7A0B\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\u8BF7\u6C42\u5230\u8FBE\n  \u2193\npreHandle (\u62E6\u622A\u56681)\n  \u2193\npreHandle (\u62E6\u622A\u56682)\n  \u2193\nController \u65B9\u6CD5\u6267\u884C\n  \u2193\npostHandle (\u62E6\u622A\u56682)\n  \u2193\npostHandle (\u62E6\u622A\u56681)\n  \u2193\n\u89C6\u56FE\u6E32\u67D3\n  \u2193\nafterCompletion (\u62E6\u622A\u56682)\n  \u2193\nafterCompletion (\u62E6\u622A\u56681)\n  \u2193\n\u54CD\u5E94\u8FD4\u56DE\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u591A\u4E2A\u62E6\u622A\u5668\u914D\u7F6E\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Configuration\npublic class WebConfig implements WebMvcConfigurer {\n    \n    @Autowired\n    private LoginInterceptor loginInterceptor;\n    @Autowired\n    private LogInterceptor logInterceptor;\n    @Autowired\n    private PermissionInterceptor permissionInterceptor;\n    \n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        // \u65E5\u5FD7\u62E6\u622A\u5668 - \u6700\u5148\u6267\u884C\n        registry.addInterceptor(logInterceptor)\n                .addPathPatterns("/**")\n                .order(1);\n        \n        // \u767B\u5F55\u62E6\u622A\u5668\n        registry.addInterceptor(loginInterceptor)\n                .addPathPatterns("/**")\n                .excludePathPatterns("/login", "/register")\n                .order(2);\n        \n        // \u6743\u9650\u62E6\u622A\u5668 - \u6700\u540E\u6267\u884C\n        registry.addInterceptor(permissionInterceptor)\n                .addPathPatterns("/admin/**")\n                .order(3);\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u62E6\u622A\u5668 vs \u8FC7\u6EE4\u5668\uFF1A"})}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u7279\u6027"}),(0,i.jsx)(e.th,{children:"\u62E6\u622A\u5668\uFF08Interceptor\uFF09"}),(0,i.jsx)(e.th,{children:"\u8FC7\u6EE4\u5668\uFF08Filter\uFF09"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u5B9E\u73B0\u65B9\u5F0F"}),(0,i.jsx)(e.td,{children:"\u5B9E\u73B0 HandlerInterceptor"}),(0,i.jsx)(e.td,{children:"\u5B9E\u73B0 Filter"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u4F9D\u8D56"}),(0,i.jsx)(e.td,{children:"Spring MVC"}),(0,i.jsx)(e.td,{children:"Servlet"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u4F5C\u7528\u8303\u56F4"}),(0,i.jsx)(e.td,{children:"Spring MVC \u8BF7\u6C42"}),(0,i.jsx)(e.td,{children:"\u6240\u6709\u8BF7\u6C42"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u8BBF\u95EE Spring Bean"}),(0,i.jsx)(e.td,{children:"\u53EF\u4EE5"}),(0,i.jsx)(e.td,{children:"\u53EF\u4EE5\uFF08\u9700\u914D\u7F6E\uFF09"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u6267\u884C\u65F6\u673A"}),(0,i.jsx)(e.td,{children:"Controller \u524D\u540E"}),(0,i.jsx)(e.td,{children:"Servlet \u524D\u540E"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u65B9\u6CD5\u6570\u91CF"}),(0,i.jsx)(e.td,{children:"3 \u4E2A"}),(0,i.jsx)(e.td,{children:"2 \u4E2A"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u83B7\u53D6\u65B9\u6CD5\u4FE1\u606F"}),(0,i.jsx)(e.td,{children:"\u53EF\u4EE5"}),(0,i.jsx)(e.td,{children:"\u4E0D\u53EF\u4EE5"})]})]})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4F7F\u7528\u5EFA\u8BAE\uFF1A"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u62E6\u622A\u5668"}),"\uFF1A\u5904\u7406\u4E1A\u52A1\u903B\u8F91\u76F8\u5173\u7684\u62E6\u622A\uFF08\u767B\u5F55\u3001\u6743\u9650\u3001\u65E5\u5FD7\uFF09"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u8FC7\u6EE4\u5668"}),"\uFF1A\u5904\u7406\u901A\u7528\u7684\u8BF7\u6C42/\u54CD\u5E94\u5904\u7406\uFF08\u7F16\u7801\u3001\u538B\u7F29\u3001CORS\uFF09"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"17-springboot-\u4E2D\u5982\u4F55\u5B9E\u73B0\u5B9A\u65F6\u4EFB\u52A1-",children:"17. SpringBoot \u4E2D\u5982\u4F55\u5B9E\u73B0\u5B9A\u65F6\u4EFB\u52A1 ?"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,i.jsx)(e.p,{children:"Spring Boot \u63D0\u4F9B\u591A\u79CD\u65B9\u5F0F\u5B9E\u73B0\u5B9A\u65F6\u4EFB\u52A1\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F\u4E00\uFF1A\u4F7F\u7528 @Scheduled \u6CE8\u89E3\uFF08\u63A8\u8350\uFF09"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6B65\u9AA4\u4E00\uFF1A\u542F\u7528\u5B9A\u65F6\u4EFB\u52A1"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@SpringBootApplication\n@EnableScheduling  // \u542F\u7528\u5B9A\u65F6\u4EFB\u52A1\npublic class Application {\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6B65\u9AA4\u4E8C\uFF1A\u521B\u5EFA\u5B9A\u65F6\u4EFB\u52A1"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\n@Slf4j\npublic class ScheduledTasks {\n    \n    /**\n     * \u56FA\u5B9A\u5EF6\u8FDF\uFF1A\u4E0A\u6B21\u6267\u884C\u5B8C\u6210\u540E\u5EF6\u8FDF\u6307\u5B9A\u65F6\u95F4\u518D\u6267\u884C\n     */\n    @Scheduled(fixedDelay = 5000)  // 5\u79D2\n    public void taskWithFixedDelay() {\n        log.info("Fixed delay task: {}", LocalDateTime.now());\n    }\n    \n    /**\n     * \u56FA\u5B9A\u9891\u7387\uFF1A\u6309\u56FA\u5B9A\u9891\u7387\u6267\u884C\uFF0C\u4E0D\u7BA1\u4E0A\u6B21\u662F\u5426\u5B8C\u6210\n     */\n    @Scheduled(fixedRate = 5000)\n    public void taskWithFixedRate() {\n        log.info("Fixed rate task: {}", LocalDateTime.now());\n    }\n    \n    /**\n     * \u521D\u59CB\u5EF6\u8FDF\uFF1A\u9996\u6B21\u5EF6\u8FDF\u6307\u5B9A\u65F6\u95F4\u540E\u6267\u884C\n     */\n    @Scheduled(initialDelay = 10000, fixedRate = 5000)\n    public void taskWithInitialDelay() {\n        log.info("Task with initial delay: {}", LocalDateTime.now());\n    }\n    \n    /**\n     * Cron \u8868\u8FBE\u5F0F\uFF1A\u7075\u6D3B\u7684\u65F6\u95F4\u914D\u7F6E\n     */\n    @Scheduled(cron = "0 0 2 * * ?")  // \u6BCF\u5929\u51CC\u66682\u70B9\u6267\u884C\n    public void taskWithCron() {\n        log.info("Cron task: {}", LocalDateTime.now());\n    }\n    \n    /**\n     * \u4ECE\u914D\u7F6E\u6587\u4EF6\u8BFB\u53D6\n     */\n    @Scheduled(cron = "${task.cron}")\n    public void taskFromConfig() {\n        log.info("Task from config: {}", LocalDateTime.now());\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Cron \u8868\u8FBE\u5F0F\u8BE6\u89E3\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\u683C\u5F0F\uFF1A\u79D2 \u5206 \u65F6 \u65E5 \u6708 \u5468 [\u5E74]\n\n\u793A\u4F8B\uFF1A\n0 0 2 * * ?          # \u6BCF\u5929\u51CC\u66682\u70B9\n0 0/5 * * * ?        # \u6BCF5\u5206\u949F\n0 0 9-17 * * ?       # \u6BCF\u59299\u70B9\u523017\u70B9\u6BCF\u5C0F\u65F6\n0 0 12 ? * WED       # \u6BCF\u5468\u4E09\u4E2D\u534812\u70B9\n0 0 12 1 * ?         # \u6BCF\u67081\u53F7\u4E2D\u534812\u70B9\n0 15 10 15 * ?       # \u6BCF\u670815\u53F7\u4E0A\u534810:15\n0 0 0 * * ?          # \u6BCF\u59290\u70B9\n*/10 * * * * ?       # \u6BCF10\u79D2\n\n\u7279\u6B8A\u5B57\u7B26\uFF1A\n*  : \u6240\u6709\u503C\n?  : \u4E0D\u6307\u5B9A\u503C\uFF08\u65E5\u548C\u5468\u4E92\u65A5\uFF09\n-  : \u8303\u56F4\n,  : \u5217\u4E3E\n/  : \u6B65\u957F\nL  : \u6700\u540E\uFF08Last\uFF09\nW  : \u5DE5\u4F5C\u65E5\uFF08Weekday\uFF09\n#  : \u7B2C\u51E0\u4E2A\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u914D\u7F6E\u6587\u4EF6\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:'# application.yml\ntask:\n  cron: "0 0 2 * * ?"  # \u6BCF\u5929\u51CC\u66682\u70B9\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F\u4E8C\uFF1A\u4F7F\u7528 TaskScheduler"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Configuration\npublic class SchedulerConfig {\n    \n    @Bean\n    public TaskScheduler taskScheduler() {\n        ThreadPoolTaskScheduler scheduler = new ThreadPoolTaskScheduler();\n        scheduler.setPoolSize(10);\n        scheduler.setThreadNamePrefix("scheduled-task-");\n        scheduler.setWaitForTasksToCompleteOnShutdown(true);\n        scheduler.setAwaitTerminationSeconds(60);\n        return scheduler;\n    }\n}\n\n@Component\npublic class DynamicScheduledTask {\n    \n    @Autowired\n    private TaskScheduler taskScheduler;\n    \n    private ScheduledFuture<?> scheduledFuture;\n    \n    /**\n     * \u52A8\u6001\u542F\u52A8\u5B9A\u65F6\u4EFB\u52A1\n     */\n    public void startTask() {\n        if (scheduledFuture != null) {\n            scheduledFuture.cancel(false);\n        }\n        \n        scheduledFuture = taskScheduler.scheduleAtFixedRate(\n            () -> {\n                System.out.println("Dynamic task: " + LocalDateTime.now());\n            },\n            Duration.ofSeconds(5)\n        );\n    }\n    \n    /**\n     * \u505C\u6B62\u5B9A\u65F6\u4EFB\u52A1\n     */\n    public void stopTask() {\n        if (scheduledFuture != null) {\n            scheduledFuture.cancel(false);\n        }\n    }\n    \n    /**\n     * \u4F7F\u7528 Cron \u8868\u8FBE\u5F0F\n     */\n    public void startCronTask(String cron) {\n        scheduledFuture = taskScheduler.schedule(\n            () -> {\n                System.out.println("Cron task: " + LocalDateTime.now());\n            },\n            new CronTrigger(cron)\n        );\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F\u4E09\uFF1A\u4F7F\u7528 Quartz"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6DFB\u52A0\u4F9D\u8D56\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:"<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-quartz</artifactId>\n</dependency>\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u521B\u5EFA Job\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public class MyJob extends QuartzJobBean {\n    \n    @Override\n    protected void executeInternal(JobExecutionContext context) {\n        System.out.println("Quartz job executed: " + LocalDateTime.now());\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u914D\u7F6E Quartz\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Configuration\npublic class QuartzConfig {\n    \n    @Bean\n    public JobDetail jobDetail() {\n        return JobBuilder.newJob(MyJob.class)\n                .withIdentity("myJob")\n                .storeDurably()\n                .build();\n    }\n    \n    @Bean\n    public Trigger trigger() {\n        return TriggerBuilder.newTrigger()\n                .forJob(jobDetail())\n                .withIdentity("myTrigger")\n                .withSchedule(\n                    CronScheduleBuilder.cronSchedule("0 0 2 * * ?")\n                )\n                .build();\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u914D\u7F6E\u7EBF\u7A0B\u6C60\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"# application.yml\nspring:\n  task:\n    scheduling:\n      pool:\n        size: 10  # \u7EBF\u7A0B\u6C60\u5927\u5C0F\n      thread-name-prefix: scheduled-task-\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6216\u4F7F\u7528 Java \u914D\u7F6E\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Configuration\npublic class SchedulingConfig implements SchedulingConfigurer {\n    \n    @Override\n    public void configureTasks(ScheduledTaskRegistrar taskRegistrar) {\n        taskRegistrar.setScheduler(taskExecutor());\n    }\n    \n    @Bean\n    public Executor taskExecutor() {\n        ThreadPoolTaskScheduler scheduler = new ThreadPoolTaskScheduler();\n        scheduler.setPoolSize(10);\n        scheduler.setThreadNamePrefix("scheduled-task-");\n        scheduler.setWaitForTasksToCompleteOnShutdown(true);\n        scheduler.setAwaitTerminationSeconds(60);\n        scheduler.initialize();\n        return scheduler;\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5F02\u6B65\u5B9A\u65F6\u4EFB\u52A1\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@SpringBootApplication\n@EnableScheduling\n@EnableAsync  // \u542F\u7528\u5F02\u6B65\npublic class Application {\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n\n@Component\n@Slf4j\npublic class AsyncScheduledTasks {\n    \n    @Async\n    @Scheduled(fixedRate = 5000)\n    public void asyncTask() {\n        log.info("Async task start: {}, Thread: {}", \n                LocalDateTime.now(), \n                Thread.currentThread().getName());\n        \n        try {\n            Thread.sleep(10000);  // \u6A21\u62DF\u8017\u65F6\u64CD\u4F5C\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        \n        log.info("Async task end: {}", LocalDateTime.now());\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5206\u5E03\u5F0F\u5B9A\u65F6\u4EFB\u52A1\uFF1A"})}),"\n",(0,i.jsx)(e.p,{children:"\u5BF9\u4E8E\u5206\u5E03\u5F0F\u73AF\u5883\uFF0C\u63A8\u8350\u4F7F\u7528\uFF1A"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"XXL-JOB"}),"\uFF1A\u8F7B\u91CF\u7EA7\u5206\u5E03\u5F0F\u4EFB\u52A1\u8C03\u5EA6\u5E73\u53F0"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Elastic-Job"}),"\uFF1A\u5206\u5E03\u5F0F\u8C03\u5EA6\u89E3\u51B3\u65B9\u6848"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"SchedulerX"}),"\uFF1A\u963F\u91CC\u4E91\u5206\u5E03\u5F0F\u4EFB\u52A1\u8C03\u5EA6"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6700\u4F73\u5B9E\u8DF5\uFF1A"})}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u907F\u514D\u957F\u65F6\u95F4\u4EFB\u52A1\u963B\u585E"}),"\uFF1A\u4F7F\u7528\u5F02\u6B65\u6216\u589E\u52A0\u7EBF\u7A0B\u6C60\u5927\u5C0F"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5F02\u5E38\u5904\u7406"}),"\uFF1A\u6355\u83B7\u5F02\u5E38\uFF0C\u907F\u514D\u4EFB\u52A1\u4E2D\u65AD"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5E42\u7B49\u6027"}),"\uFF1A\u786E\u4FDD\u4EFB\u52A1\u53EF\u4EE5\u91CD\u590D\u6267\u884C"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u76D1\u63A7\u544A\u8B66"}),"\uFF1A\u8BB0\u5F55\u4EFB\u52A1\u6267\u884C\u60C5\u51B5"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5206\u5E03\u5F0F\u9501"}),"\uFF1A\u591A\u5B9E\u4F8B\u73AF\u5883\u4E0B\u907F\u514D\u91CD\u590D\u6267\u884C"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u793A\u4F8B\uFF1A\u5E26\u5F02\u5E38\u5904\u7406\u548C\u65E5\u5FD7\u7684\u5B9A\u65F6\u4EFB\u52A1"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\n@Slf4j\npublic class RobustScheduledTask {\n    \n    @Scheduled(cron = "0 0 2 * * ?")\n    public void robustTask() {\n        log.info("Task started at: {}", LocalDateTime.now());\n        \n        try {\n            // \u4E1A\u52A1\u903B\u8F91\n            performTask();\n            log.info("Task completed successfully");\n        } catch (Exception e) {\n            log.error("Task failed: {}", e.getMessage(), e);\n            // \u53D1\u9001\u544A\u8B66\n            sendAlert(e);\n        }\n    }\n    \n    private void performTask() {\n        // \u5B9E\u9645\u4E1A\u52A1\u903B\u8F91\n    }\n    \n    private void sendAlert(Exception e) {\n        // \u53D1\u9001\u544A\u8B66\u901A\u77E5\n    }\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"18-\u4EC0\u4E48\u662F-spring-actuator\u5B83\u6709\u4EC0\u4E48\u4F18\u52BF",children:"18. \u4EC0\u4E48\u662F Spring Actuator\uFF1F\u5B83\u6709\u4EC0\u4E48\u4F18\u52BF\uFF1F"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,i.jsx)(e.p,{children:"Spring Boot Actuator \u662F Spring Boot \u63D0\u4F9B\u7684\u751F\u4EA7\u7EA7\u522B\u7684\u76D1\u63A7\u548C\u7BA1\u7406\u529F\u80FD\u6A21\u5757\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u6DFB\u52A0\u4F9D\u8D56"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:"<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-actuator</artifactId>\n</dependency>\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u5E38\u7528\u7AEF\u70B9\uFF08Endpoints\uFF09"})}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u7AEF\u70B9"}),(0,i.jsx)(e.th,{children:"\u8BF4\u660E"}),(0,i.jsx)(e.th,{children:"\u9ED8\u8BA4\u542F\u7528"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"/actuator/health"})}),(0,i.jsx)(e.td,{children:"\u5065\u5EB7\u68C0\u67E5"}),(0,i.jsx)(e.td,{children:"\u2705"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"/actuator/info"})}),(0,i.jsx)(e.td,{children:"\u5E94\u7528\u4FE1\u606F"}),(0,i.jsx)(e.td,{children:"\u2705"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"/actuator/metrics"})}),(0,i.jsx)(e.td,{children:"\u5E94\u7528\u6307\u6807"}),(0,i.jsx)(e.td,{children:"\u274C"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"/actuator/env"})}),(0,i.jsx)(e.td,{children:"\u73AF\u5883\u53D8\u91CF"}),(0,i.jsx)(e.td,{children:"\u274C"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"/actuator/beans"})}),(0,i.jsx)(e.td,{children:"Spring Beans"}),(0,i.jsx)(e.td,{children:"\u274C"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"/actuator/mappings"})}),(0,i.jsx)(e.td,{children:"\u8BF7\u6C42\u6620\u5C04"}),(0,i.jsx)(e.td,{children:"\u274C"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"/actuator/configprops"})}),(0,i.jsx)(e.td,{children:"\u914D\u7F6E\u5C5E\u6027"}),(0,i.jsx)(e.td,{children:"\u274C"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"/actuator/loggers"})}),(0,i.jsx)(e.td,{children:"\u65E5\u5FD7\u914D\u7F6E"}),(0,i.jsx)(e.td,{children:"\u274C"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"/actuator/heapdump"})}),(0,i.jsx)(e.td,{children:"\u5806\u8F6C\u50A8"}),(0,i.jsx)(e.td,{children:"\u274C"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"/actuator/threaddump"})}),(0,i.jsx)(e.td,{children:"\u7EBF\u7A0B\u8F6C\u50A8"}),(0,i.jsx)(e.td,{children:"\u274C"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"/actuator/prometheus"})}),(0,i.jsx)(e.td,{children:"Prometheus \u6307\u6807"}),(0,i.jsx)(e.td,{children:"\u274C"})]})]})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u914D\u7F6E\u7AEF\u70B9"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:'management:\n  endpoints:\n    web:\n      exposure:\n        include: "*"  # \u66B4\u9732\u6240\u6709\u7AEF\u70B9\n        # include: health,info,metrics  # \u66B4\u9732\u6307\u5B9A\u7AEF\u70B9\n        exclude: heapdump,threaddump  # \u6392\u9664\u7AEF\u70B9\n      base-path: /actuator  # \u7AEF\u70B9\u57FA\u7840\u8DEF\u5F84\n  endpoint:\n    health:\n      show-details: always  # \u663E\u793A\u8BE6\u7EC6\u5065\u5EB7\u4FE1\u606F\n    shutdown:\n      enabled: true  # \u542F\u7528\u5173\u95ED\u7AEF\u70B9\uFF08\u9ED8\u8BA4\u7981\u7528\uFF09\n  server:\n    port: 9090  # \u5355\u72EC\u7684\u7BA1\u7406\u7AEF\u53E3\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4. Health \u5065\u5EB7\u68C0\u67E5"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u9ED8\u8BA4\u5065\u5EB7\u68C0\u67E5\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'GET /actuator/health\n\n{\n  "status": "UP",\n  "components": {\n    "diskSpace": {\n      "status": "UP",\n      "details": {\n        "total": 500000000000,\n        "free": 300000000000,\n        "threshold": 10485760\n      }\n    },\n    "db": {\n      "status": "UP",\n      "details": {\n        "database": "MySQL",\n        "validationQuery": "isValid()"\n      }\n    },\n    "redis": {\n      "status": "UP",\n      "details": {\n        "version": "6.2.6"\n      }\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u81EA\u5B9A\u4E49\u5065\u5EB7\u68C0\u67E5\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\npublic class CustomHealthIndicator implements HealthIndicator {\n    \n    @Override\n    public Health health() {\n        // \u68C0\u67E5\u81EA\u5B9A\u4E49\u670D\u52A1\u72B6\u6001\n        boolean serviceUp = checkService();\n        \n        if (serviceUp) {\n            return Health.up()\n                    .withDetail("service", "available")\n                    .withDetail("version", "1.0.0")\n                    .build();\n        } else {\n            return Health.down()\n                    .withDetail("service", "unavailable")\n                    .withDetail("error", "Connection timeout")\n                    .build();\n        }\n    }\n    \n    private boolean checkService() {\n        // \u5B9E\u9645\u68C0\u67E5\u903B\u8F91\n        return true;\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"5. Info \u4FE1\u606F\u7AEF\u70B9"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u914D\u7F6E\u6587\u4EF6\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"info:\n  app:\n    name: My Application\n    version: 1.0.0\n    description: Spring Boot Application\n  company:\n    name: Example Corp\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Java \u914D\u7F6E\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\npublic class AppInfoContributor implements InfoContributor {\n    \n    @Override\n    public void contribute(Info.Builder builder) {\n        builder.withDetail("build-time", LocalDateTime.now())\n               .withDetail("active-users", 1000)\n               .withDetail("custom-info", "some value");\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"6. Metrics \u6307\u6807"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u67E5\u770B\u6240\u6709\u6307\u6807\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'GET /actuator/metrics\n\n{\n  "names": [\n    "jvm.memory.used",\n    "jvm.memory.max",\n    "jvm.gc.pause",\n    "http.server.requests",\n    "system.cpu.usage",\n    "process.uptime"\n  ]\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u67E5\u770B\u5177\u4F53\u6307\u6807\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'GET /actuator/metrics/jvm.memory.used\n\n{\n  "name": "jvm.memory.used",\n  "measurements": [\n    {\n      "statistic": "VALUE",\n      "value": 123456789\n    }\n  ],\n  "availableTags": [\n    {\n      "tag": "area",\n      "values": ["heap", "nonheap"]\n    }\n  ]\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u81EA\u5B9A\u4E49\u6307\u6807\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Component\npublic class CustomMetrics {\n    \n    private final Counter orderCounter;\n    private final Gauge activeUsers;\n    \n    public CustomMetrics(MeterRegistry registry) {\n        // \u8BA1\u6570\u5668\n        this.orderCounter = Counter.builder("orders.created")\n                .description("Total orders created")\n                .tag("type", "online")\n                .register(registry);\n        \n        // \u4EEA\u8868\n        this.activeUsers = Gauge.builder("users.active", this, CustomMetrics::getActiveUserCount)\n                .description("Active users count")\n                .register(registry);\n    }\n    \n    public void recordOrder() {\n        orderCounter.increment();\n    }\n    \n    private double getActiveUserCount() {\n        // \u8FD4\u56DE\u6D3B\u8DC3\u7528\u6237\u6570\n        return 100.0;\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"7. \u52A8\u6001\u4FEE\u6539\u65E5\u5FD7\u7EA7\u522B"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'# \u67E5\u770B\u65E5\u5FD7\u914D\u7F6E\nGET /actuator/loggers\n\n# \u67E5\u770B\u7279\u5B9A logger\nGET /actuator/loggers/com.example.service\n\n# \u4FEE\u6539\u65E5\u5FD7\u7EA7\u522B\nPOST /actuator/loggers/com.example.service\nContent-Type: application/json\n\n{\n  "configuredLevel": "DEBUG"\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"8. \u5B89\u5168\u914D\u7F6E"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Configuration\npublic class ActuatorSecurityConfig {\n    \n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.authorizeRequests()\n            .requestMatchers("/actuator/health").permitAll()\n            .requestMatchers("/actuator/info").permitAll()\n            .requestMatchers("/actuator/**").hasRole("ADMIN")\n            .and()\n            .httpBasic();\n        return http.build();\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6216\u4F7F\u7528\u914D\u7F6E\u6587\u4EF6\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"spring:\n  security:\n    user:\n      name: admin\n      password: admin123\n      roles: ADMIN\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"9. \u96C6\u6210 Prometheus"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6DFB\u52A0\u4F9D\u8D56\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:"<dependency>\n    <groupId>io.micrometer</groupId>\n    <artifactId>micrometer-registry-prometheus</artifactId>\n</dependency>\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u914D\u7F6E\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"management:\n  endpoints:\n    web:\n      exposure:\n        include: prometheus\n  metrics:\n    export:\n      prometheus:\n        enabled: true\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u8BBF\u95EE\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"GET /actuator/prometheus\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"10. Actuator \u7684\u4F18\u52BF"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u751F\u4EA7\u5C31\u7EEA"}),"\uFF1A\u63D0\u4F9B\u751F\u4EA7\u7EA7\u522B\u7684\u76D1\u63A7\u529F\u80FD"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5F00\u7BB1\u5373\u7528"}),"\uFF1A\u65E0\u9700\u989D\u5916\u914D\u7F6E\u5373\u53EF\u4F7F\u7528\u57FA\u672C\u529F\u80FD"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u53EF\u6269\u5C55"}),"\uFF1A\u652F\u6301\u81EA\u5B9A\u4E49\u5065\u5EB7\u68C0\u67E5\u548C\u6307\u6807"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u96C6\u6210\u53CB\u597D"}),"\uFF1A\u6613\u4E8E\u96C6\u6210 Prometheus\u3001Grafana \u7B49\u76D1\u63A7\u7CFB\u7EDF"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5B89\u5168\u53EF\u63A7"}),"\uFF1A\u652F\u6301\u7AEF\u70B9\u7EA7\u522B\u7684\u5B89\u5168\u63A7\u5236"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5B9E\u65F6\u76D1\u63A7"}),"\uFF1A\u5B9E\u65F6\u67E5\u770B\u5E94\u7528\u72B6\u6001\u548C\u6307\u6807"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u95EE\u9898\u8BCA\u65AD"}),"\uFF1A\u63D0\u4F9B\u7EBF\u7A0B\u8F6C\u50A8\u3001\u5806\u8F6C\u50A8\u7B49\u8BCA\u65AD\u5DE5\u5177"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"11. \u6700\u4F73\u5B9E\u8DF5"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u751F\u4EA7\u73AF\u5883\u9650\u5236\u7AEF\u70B9\u8BBF\u95EE\u6743\u9650"}),"\n",(0,i.jsx)(e.li,{children:"\u4F7F\u7528\u72EC\u7ACB\u7684\u7BA1\u7406\u7AEF\u53E3"}),"\n",(0,i.jsx)(e.li,{children:"\u5B9A\u671F\u76D1\u63A7\u5065\u5EB7\u68C0\u67E5\u548C\u6307\u6807"}),"\n",(0,i.jsx)(e.li,{children:"\u96C6\u6210\u5230\u76D1\u63A7\u7CFB\u7EDF\uFF08Prometheus + Grafana\uFF09"}),"\n",(0,i.jsx)(e.li,{children:"\u81EA\u5B9A\u4E49\u4E1A\u52A1\u76F8\u5173\u7684\u5065\u5EB7\u68C0\u67E5\u548C\u6307\u6807"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"19-spring-boot-2x-\u4E0E-1x-\u7248\u672C\u6709\u54EA\u4E9B\u4E3B\u8981\u7684\u6539\u8FDB\u548C\u533A\u522B",children:"19. Spring Boot 2.x \u4E0E 1.x \u7248\u672C\u6709\u54EA\u4E9B\u4E3B\u8981\u7684\u6539\u8FDB\u548C\u533A\u522B\uFF1F"}),"\n",(0,i.jsx)(e.h3,{id:"20-spring-boot-3x-\u4E0E-2x-\u7248\u672C\u6709\u54EA\u4E9B\u4E3B\u8981\u7684\u6539\u8FDB\u548C\u533A\u522B",children:"20. Spring Boot 3.x \u4E0E 2.x \u7248\u672C\u6709\u54EA\u4E9B\u4E3B\u8981\u7684\u6539\u8FDB\u548C\u533A\u522B\uFF1F"}),"\n",(0,i.jsx)(e.h3,{id:"21-\u8BF4\u8BF4\u4F60\u5BF9-spring-boot-\u4E8B\u4EF6\u673A\u5236\u7684\u4E86\u89E3",children:"21. \u8BF4\u8BF4\u4F60\u5BF9 Spring Boot \u4E8B\u4EF6\u673A\u5236\u7684\u4E86\u89E3\uFF1F"}),"\n",(0,i.jsx)(e.h3,{id:"22-\u5728-spring-boot-\u4E2D\u5982\u4F55\u5B9E\u73B0\u591A\u6570\u636E\u6E90\u914D\u7F6E",children:"22. \u5728 Spring Boot \u4E2D\u5982\u4F55\u5B9E\u73B0\u591A\u6570\u636E\u6E90\u914D\u7F6E\uFF1F"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,i.jsx)(e.p,{children:"Spring Boot \u652F\u6301\u591A\u79CD\u65B9\u5F0F\u914D\u7F6E\u591A\u6570\u636E\u6E90\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F\u4E00\uFF1A\u624B\u52A8\u914D\u7F6E\u591A\u6570\u636E\u6E90\uFF08\u63A8\u8350\uFF09"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6B65\u9AA4\u4E00\uFF1A\u914D\u7F6E\u6587\u4EF6"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"spring:\n  datasource:\n    primary:\n      jdbc-url: jdbc:mysql://localhost:3306/db1\n      username: root\n      password: 123456\n      driver-class-name: com.mysql.cj.jdbc.Driver\n    secondary:\n      jdbc-url: jdbc:mysql://localhost:3306/db2\n      username: root\n      password: 123456\n      driver-class-name: com.mysql.cj.jdbc.Driver\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6B65\u9AA4\u4E8C\uFF1A\u914D\u7F6E\u4E3B\u6570\u636E\u6E90"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Configuration\n@MapperScan(\n    basePackages = "com.example.mapper.primary",\n    sqlSessionFactoryRef = "primarySqlSessionFactory"\n)\npublic class PrimaryDataSourceConfig {\n    \n    @Bean(name = "primaryDataSource")\n    @ConfigurationProperties(prefix = "spring.datasource.primary")\n    @Primary\n    public DataSource primaryDataSource() {\n        return DataSourceBuilder.create().build();\n    }\n    \n    @Bean(name = "primarySqlSessionFactory")\n    @Primary\n    public SqlSessionFactory primarySqlSessionFactory(\n            @Qualifier("primaryDataSource") DataSource dataSource) throws Exception {\n        SqlSessionFactoryBean bean = new SqlSessionFactoryBean();\n        bean.setDataSource(dataSource);\n        bean.setMapperLocations(\n            new PathMatchingResourcePatternResolver()\n                .getResources("classpath:mapper/primary/*.xml")\n        );\n        return bean.getObject();\n    }\n    \n    @Bean(name = "primaryTransactionManager")\n    @Primary\n    public DataSourceTransactionManager primaryTransactionManager(\n            @Qualifier("primaryDataSource") DataSource dataSource) {\n        return new DataSourceTransactionManager(dataSource);\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6B65\u9AA4\u4E09\uFF1A\u914D\u7F6E\u4ECE\u6570\u636E\u6E90"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Configuration\n@MapperScan(\n    basePackages = "com.example.mapper.secondary",\n    sqlSessionFactoryRef = "secondarySqlSessionFactory"\n)\npublic class SecondaryDataSourceConfig {\n    \n    @Bean(name = "secondaryDataSource")\n    @ConfigurationProperties(prefix = "spring.datasource.secondary")\n    public DataSource secondaryDataSource() {\n        return DataSourceBuilder.create().build();\n    }\n    \n    @Bean(name = "secondarySqlSessionFactory")\n    public SqlSessionFactory secondarySqlSessionFactory(\n            @Qualifier("secondaryDataSource") DataSource dataSource) throws Exception {\n        SqlSessionFactoryBean bean = new SqlSessionFactoryBean();\n        bean.setDataSource(dataSource);\n        bean.setMapperLocations(\n            new PathMatchingResourcePatternResolver()\n                .getResources("classpath:mapper/secondary/*.xml")\n        );\n        return bean.getObject();\n    }\n    \n    @Bean(name = "secondaryTransactionManager")\n    public DataSourceTransactionManager secondaryTransactionManager(\n            @Qualifier("secondaryDataSource") DataSource dataSource) {\n        return new DataSourceTransactionManager(dataSource);\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6B65\u9AA4\u56DB\uFF1A\u4F7F\u7528"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"// \u4E3B\u6570\u636E\u6E90 Mapper\npackage com.example.mapper.primary;\n\n@Mapper\npublic interface UserMapper {\n    User findById(Long id);\n}\n\n// \u4ECE\u6570\u636E\u6E90 Mapper\npackage com.example.mapper.secondary;\n\n@Mapper\npublic interface OrderMapper {\n    Order findById(Long id);\n}\n\n// Service\n@Service\npublic class BusinessService {\n    @Autowired\n    private UserMapper userMapper;  // \u4F7F\u7528\u4E3B\u6570\u636E\u6E90\n    \n    @Autowired\n    private OrderMapper orderMapper;  // \u4F7F\u7528\u4ECE\u6570\u636E\u6E90\n    \n    public void doSomething() {\n        User user = userMapper.findById(1L);\n        Order order = orderMapper.findById(1L);\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F\u4E8C\uFF1A\u4F7F\u7528 AbstractRoutingDataSource \u52A8\u6001\u5207\u6362"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6B65\u9AA4\u4E00\uFF1A\u5B9A\u4E49\u6570\u636E\u6E90\u679A\u4E3E"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"public enum DataSourceType {\n    PRIMARY,\n    SECONDARY\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6B65\u9AA4\u4E8C\uFF1A\u6570\u636E\u6E90\u4E0A\u4E0B\u6587"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"public class DataSourceContextHolder {\n    private static final ThreadLocal<DataSourceType> contextHolder = new ThreadLocal<>();\n    \n    public static void setDataSource(DataSourceType dataSourceType) {\n        contextHolder.set(dataSourceType);\n    }\n    \n    public static DataSourceType getDataSource() {\n        return contextHolder.get();\n    }\n    \n    public static void clearDataSource() {\n        contextHolder.remove();\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6B65\u9AA4\u4E09\uFF1A\u52A8\u6001\u6570\u636E\u6E90"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"public class DynamicDataSource extends AbstractRoutingDataSource {\n    \n    @Override\n    protected Object determineCurrentLookupKey() {\n        return DataSourceContextHolder.getDataSource();\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6B65\u9AA4\u56DB\uFF1A\u914D\u7F6E\u6570\u636E\u6E90"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Configuration\npublic class DataSourceConfig {\n    \n    @Bean\n    @ConfigurationProperties(prefix = "spring.datasource.primary")\n    public DataSource primaryDataSource() {\n        return DataSourceBuilder.create().build();\n    }\n    \n    @Bean\n    @ConfigurationProperties(prefix = "spring.datasource.secondary")\n    public DataSource secondaryDataSource() {\n        return DataSourceBuilder.create().build();\n    }\n    \n    @Bean\n    @Primary\n    public DataSource dynamicDataSource() {\n        DynamicDataSource dynamicDataSource = new DynamicDataSource();\n        \n        Map<Object, Object> dataSourceMap = new HashMap<>();\n        dataSourceMap.put(DataSourceType.PRIMARY, primaryDataSource());\n        dataSourceMap.put(DataSourceType.SECONDARY, secondaryDataSource());\n        \n        dynamicDataSource.setTargetDataSources(dataSourceMap);\n        dynamicDataSource.setDefaultTargetDataSource(primaryDataSource());\n        \n        return dynamicDataSource;\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6B65\u9AA4\u4E94\uFF1A\u81EA\u5B9A\u4E49\u6CE8\u89E3"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Target({ElementType.METHOD, ElementType.TYPE})\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface DataSource {\n    DataSourceType value() default DataSourceType.PRIMARY;\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6B65\u9AA4\u516D\uFF1AAOP \u5207\u9762"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Aspect\n@Component\n@Order(1)  // \u786E\u4FDD\u5728\u4E8B\u52A1\u4E4B\u524D\u6267\u884C\npublic class DataSourceAspect {\n    \n    @Around("@annotation(com.example.annotation.DataSource)")\n    public Object around(ProceedingJoinPoint point) throws Throwable {\n        MethodSignature signature = (MethodSignature) point.getSignature();\n        Method method = signature.getMethod();\n        \n        DataSource dataSource = method.getAnnotation(DataSource.class);\n        if (dataSource != null) {\n            DataSourceContextHolder.setDataSource(dataSource.value());\n        }\n        \n        try {\n            return point.proceed();\n        } finally {\n            DataSourceContextHolder.clearDataSource();\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6B65\u9AA4\u4E03\uFF1A\u4F7F\u7528"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Service\npublic class UserService {\n    \n    @Autowired\n    private UserMapper userMapper;\n    \n    // \u4F7F\u7528\u4E3B\u6570\u636E\u6E90\uFF08\u9ED8\u8BA4\uFF09\n    public User findById(Long id) {\n        return userMapper.findById(id);\n    }\n    \n    // \u4F7F\u7528\u4ECE\u6570\u636E\u6E90\n    @DataSource(DataSourceType.SECONDARY)\n    public User findByIdFromSecondary(Long id) {\n        return userMapper.findById(id);\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F\u4E09\uFF1A\u4F7F\u7528 JPA \u591A\u6570\u636E\u6E90"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Configuration\n@EnableJpaRepositories(\n    basePackages = "com.example.repository.primary",\n    entityManagerFactoryRef = "primaryEntityManagerFactory",\n    transactionManagerRef = "primaryTransactionManager"\n)\npublic class PrimaryJpaConfig {\n    \n    @Bean\n    @Primary\n    @ConfigurationProperties(prefix = "spring.datasource.primary")\n    public DataSource primaryDataSource() {\n        return DataSourceBuilder.create().build();\n    }\n    \n    @Bean\n    @Primary\n    public LocalContainerEntityManagerFactoryBean primaryEntityManagerFactory(\n            EntityManagerFactoryBuilder builder,\n            @Qualifier("primaryDataSource") DataSource dataSource) {\n        return builder\n                .dataSource(dataSource)\n                .packages("com.example.entity.primary")\n                .persistenceUnit("primary")\n                .build();\n    }\n    \n    @Bean\n    @Primary\n    public PlatformTransactionManager primaryTransactionManager(\n            @Qualifier("primaryEntityManagerFactory") EntityManagerFactory entityManagerFactory) {\n        return new JpaTransactionManager(entityManagerFactory);\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F\u56DB\uFF1A\u4F7F\u7528 Sharding-JDBC\uFF08\u5206\u5E93\u5206\u8868\uFF09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:"<dependency>\n    <groupId>org.apache.shardingsphere</groupId>\n    <artifactId>sharding-jdbc-spring-boot-starter</artifactId>\n    <version>4.1.1</version>\n</dependency>\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"spring:\n  shardingsphere:\n    datasource:\n      names: ds0,ds1\n      ds0:\n        type: com.zaxxer.hikari.HikariDataSource\n        driver-class-name: com.mysql.cj.jdbc.Driver\n        jdbc-url: jdbc:mysql://localhost:3306/db0\n        username: root\n        password: 123456\n      ds1:\n        type: com.zaxxer.hikari.HikariDataSource\n        driver-class-name: com.mysql.cj.jdbc.Driver\n        jdbc-url: jdbc:mysql://localhost:3306/db1\n        username: root\n        password: 123456\n    sharding:\n      tables:\n        t_order:\n          actual-data-nodes: ds$->{0..1}.t_order_$->{0..1}\n          table-strategy:\n            inline:\n              sharding-column: order_id\n              algorithm-expression: t_order_$->{order_id % 2}\n          database-strategy:\n            inline:\n              sharding-column: user_id\n              algorithm-expression: ds$->{user_id % 2}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6CE8\u610F\u4E8B\u9879\uFF1A"})}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u4E8B\u52A1\u7BA1\u7406"}),"\uFF1A\u591A\u6570\u636E\u6E90\u4E8B\u52A1\u9700\u8981\u4F7F\u7528\u5206\u5E03\u5F0F\u4E8B\u52A1\uFF08\u5982 Seata\uFF09"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u8FDE\u63A5\u6C60\u914D\u7F6E"}),"\uFF1A\u6BCF\u4E2A\u6570\u636E\u6E90\u90FD\u9700\u8981\u914D\u7F6E\u8FDE\u63A5\u6C60"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6027\u80FD\u8003\u8651"}),"\uFF1A\u907F\u514D\u8DE8\u6570\u636E\u6E90\u7684\u590D\u6742\u67E5\u8BE2"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6570\u636E\u4E00\u81F4\u6027"}),"\uFF1A\u6CE8\u610F\u591A\u6570\u636E\u6E90\u4E4B\u95F4\u7684\u6570\u636E\u4E00\u81F4\u6027\u95EE\u9898"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"23-spring-boot-\u4E2D\u5982\u4F55\u5B9E\u73B0\u5F02\u6B65\u5904\u7406",children:"23. Spring Boot \u4E2D\u5982\u4F55\u5B9E\u73B0\u5F02\u6B65\u5904\u7406\uFF1F"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,i.jsxs)(e.p,{children:["Spring Boot \u63D0\u4F9B\u4E86 ",(0,i.jsx)(e.code,{children:"@Async"})," \u6CE8\u89E3\u6765\u5B9E\u73B0\u5F02\u6B65\u5904\u7406\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6B65\u9AA4\u4E00\uFF1A\u542F\u7528\u5F02\u6B65\u652F\u6301"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@SpringBootApplication\n@EnableAsync  // \u542F\u7528\u5F02\u6B65\u652F\u6301\npublic class Application {\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6B65\u9AA4\u4E8C\uFF1A\u4F7F\u7528 @Async \u6CE8\u89E3"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Service\n@Slf4j\npublic class AsyncService {\n    \n    /**\n     * \u65E0\u8FD4\u56DE\u503C\u7684\u5F02\u6B65\u65B9\u6CD5\n     */\n    @Async\n    public void asyncMethod() {\n        log.info("Async method start, Thread: {}", Thread.currentThread().getName());\n        try {\n            Thread.sleep(5000);  // \u6A21\u62DF\u8017\u65F6\u64CD\u4F5C\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        log.info("Async method end");\n    }\n    \n    /**\n     * \u6709\u8FD4\u56DE\u503C\u7684\u5F02\u6B65\u65B9\u6CD5 - \u4F7F\u7528 Future\n     */\n    @Async\n    public Future<String> asyncMethodWithFuture() {\n        log.info("Async method with Future start");\n        try {\n            Thread.sleep(3000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        return new AsyncResult<>("Result from async method");\n    }\n    \n    /**\n     * \u6709\u8FD4\u56DE\u503C\u7684\u5F02\u6B65\u65B9\u6CD5 - \u4F7F\u7528 CompletableFuture\uFF08\u63A8\u8350\uFF09\n     */\n    @Async\n    public CompletableFuture<String> asyncMethodWithCompletableFuture() {\n        log.info("Async method with CompletableFuture start");\n        try {\n            Thread.sleep(3000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        return CompletableFuture.completedFuture("Result from async method");\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6B65\u9AA4\u4E09\uFF1A\u8C03\u7528\u5F02\u6B65\u65B9\u6CD5"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@RestController\n@Slf4j\npublic class AsyncController {\n    \n    @Autowired\n    private AsyncService asyncService;\n    \n    @GetMapping("/async")\n    public String testAsync() {\n        log.info("Controller start");\n        \n        // \u8C03\u7528\u5F02\u6B65\u65B9\u6CD5\uFF08\u4E0D\u4F1A\u963B\u585E\uFF09\n        asyncService.asyncMethod();\n        \n        log.info("Controller end");\n        return "Async method called";\n    }\n    \n    @GetMapping("/async-with-result")\n    public String testAsyncWithResult() throws Exception {\n        log.info("Controller start");\n        \n        // \u8C03\u7528\u6709\u8FD4\u56DE\u503C\u7684\u5F02\u6B65\u65B9\u6CD5\n        CompletableFuture<String> future = asyncService.asyncMethodWithCompletableFuture();\n        \n        // \u7B49\u5F85\u7ED3\u679C\n        String result = future.get();  // \u963B\u585E\u7B49\u5F85\n        \n        log.info("Controller end, result: {}", result);\n        return result;\n    }\n    \n    @GetMapping("/async-multiple")\n    public String testMultipleAsync() throws Exception {\n        log.info("Controller start");\n        \n        // \u5E76\u53D1\u6267\u884C\u591A\u4E2A\u5F02\u6B65\u4EFB\u52A1\n        CompletableFuture<String> future1 = asyncService.asyncMethodWithCompletableFuture();\n        CompletableFuture<String> future2 = asyncService.asyncMethodWithCompletableFuture();\n        CompletableFuture<String> future3 = asyncService.asyncMethodWithCompletableFuture();\n        \n        // \u7B49\u5F85\u6240\u6709\u4EFB\u52A1\u5B8C\u6210\n        CompletableFuture.allOf(future1, future2, future3).join();\n        \n        log.info("All async methods completed");\n        return "All completed";\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u914D\u7F6E\u7EBF\u7A0B\u6C60\uFF08\u63A8\u8350\uFF09"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F\u4E00\uFF1A\u914D\u7F6E\u6587\u4EF6"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"spring:\n  task:\n    execution:\n      pool:\n        core-size: 10          # \u6838\u5FC3\u7EBF\u7A0B\u6570\n        max-size: 20           # \u6700\u5927\u7EBF\u7A0B\u6570\n        queue-capacity: 100    # \u961F\u5217\u5BB9\u91CF\n        keep-alive: 60s        # \u7EBF\u7A0B\u7A7A\u95F2\u65F6\u95F4\n      thread-name-prefix: async-task-\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65B9\u5F0F\u4E8C\uFF1AJava \u914D\u7F6E\uFF08\u66F4\u7075\u6D3B\uFF09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Configuration\n@EnableAsync\npublic class AsyncConfig implements AsyncConfigurer {\n    \n    @Override\n    public Executor getAsyncExecutor() {\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\n        \n        // \u6838\u5FC3\u7EBF\u7A0B\u6570\n        executor.setCorePoolSize(10);\n        \n        // \u6700\u5927\u7EBF\u7A0B\u6570\n        executor.setMaxPoolSize(20);\n        \n        // \u961F\u5217\u5BB9\u91CF\n        executor.setQueueCapacity(100);\n        \n        // \u7EBF\u7A0B\u540D\u79F0\u524D\u7F00\n        executor.setThreadNamePrefix("async-task-");\n        \n        // \u62D2\u7EDD\u7B56\u7565\n        executor.setRejectedExecutionHandler(new ThreadPoolExecutor.CallerRunsPolicy());\n        \n        // \u7B49\u5F85\u6240\u6709\u4EFB\u52A1\u5B8C\u6210\u540E\u518D\u5173\u95ED\u7EBF\u7A0B\u6C60\n        executor.setWaitForTasksToCompleteOnShutdown(true);\n        \n        // \u7B49\u5F85\u65F6\u95F4\n        executor.setAwaitTerminationSeconds(60);\n        \n        executor.initialize();\n        return executor;\n    }\n    \n    @Override\n    public AsyncUncaughtExceptionHandler getAsyncUncaughtExceptionHandler() {\n        return new CustomAsyncExceptionHandler();\n    }\n}\n\n// \u81EA\u5B9A\u4E49\u5F02\u5E38\u5904\u7406\u5668\npublic class CustomAsyncExceptionHandler implements AsyncUncaughtExceptionHandler {\n    \n    @Override\n    public void handleUncaughtException(Throwable ex, Method method, Object... params) {\n        System.err.println("Async method exception: " + method.getName());\n        System.err.println("Exception: " + ex.getMessage());\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u591A\u4E2A\u7EBF\u7A0B\u6C60\u914D\u7F6E"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Configuration\n@EnableAsync\npublic class MultipleAsyncConfig {\n    \n    /**\n     * \u7528\u4E8E IO \u5BC6\u96C6\u578B\u4EFB\u52A1\n     */\n    @Bean(name = "ioTaskExecutor")\n    public Executor ioTaskExecutor() {\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\n        executor.setCorePoolSize(20);\n        executor.setMaxPoolSize(50);\n        executor.setQueueCapacity(200);\n        executor.setThreadNamePrefix("io-task-");\n        executor.initialize();\n        return executor;\n    }\n    \n    /**\n     * \u7528\u4E8E CPU \u5BC6\u96C6\u578B\u4EFB\u52A1\n     */\n    @Bean(name = "cpuTaskExecutor")\n    public Executor cpuTaskExecutor() {\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\n        executor.setCorePoolSize(Runtime.getRuntime().availableProcessors());\n        executor.setMaxPoolSize(Runtime.getRuntime().availableProcessors() * 2);\n        executor.setQueueCapacity(50);\n        executor.setThreadNamePrefix("cpu-task-");\n        executor.initialize();\n        return executor;\n    }\n}\n\n// \u4F7F\u7528\u6307\u5B9A\u7684\u7EBF\u7A0B\u6C60\n@Service\npublic class TaskService {\n    \n    @Async("ioTaskExecutor")\n    public void ioTask() {\n        // IO \u5BC6\u96C6\u578B\u4EFB\u52A1\n    }\n    \n    @Async("cpuTaskExecutor")\n    public void cpuTask() {\n        // CPU \u5BC6\u96C6\u578B\u4EFB\u52A1\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5F02\u6B65\u65B9\u6CD5\u7684\u6CE8\u610F\u4E8B\u9879"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u5FC5\u987B\u662F public \u65B9\u6CD5"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"// \u2705 \u6B63\u786E\n@Async\npublic void asyncMethod() { }\n\n// \u274C \u9519\u8BEF\n@Async\nprivate void asyncMethod() { }\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u4E0D\u80FD\u5728\u540C\u4E00\u4E2A\u7C7B\u4E2D\u8C03\u7528"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Service\npublic class MyService {\n    \n    // \u274C \u9519\u8BEF\uFF1A\u540C\u7C7B\u8C03\u7528\u4E0D\u4F1A\u5F02\u6B65\u6267\u884C\n    public void method1() {\n        this.asyncMethod();  // \u4E0D\u4F1A\u5F02\u6B65\n    }\n    \n    @Async\n    public void asyncMethod() { }\n}\n\n// \u2705 \u6B63\u786E\uFF1A\u901A\u8FC7\u6CE8\u5165\u8C03\u7528\n@Service\npublic class MyService {\n    @Autowired\n    private MyService self;  // \u6CE8\u5165\u81EA\u5DF1\n    \n    public void method1() {\n        self.asyncMethod();  // \u4F1A\u5F02\u6B65\u6267\u884C\n    }\n    \n    @Async\n    public void asyncMethod() { }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u5F02\u5E38\u5904\u7406"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Service\n@Slf4j\npublic class AsyncService {\n    \n    @Async\n    public CompletableFuture<String> asyncMethodWithException() {\n        try {\n            // \u4E1A\u52A1\u903B\u8F91\n            if (someCondition) {\n                throw new RuntimeException("Error occurred");\n            }\n            return CompletableFuture.completedFuture("Success");\n        } catch (Exception e) {\n            log.error("Async method error", e);\n            return CompletableFuture.failedFuture(e);\n        }\n    }\n}\n\n// \u8C03\u7528\u65F6\u5904\u7406\u5F02\u5E38\n@RestController\npublic class AsyncController {\n    \n    @GetMapping("/async-with-exception")\n    public String testAsyncWithException() {\n        asyncService.asyncMethodWithException()\n            .thenAccept(result -> {\n                System.out.println("Success: " + result);\n            })\n            .exceptionally(ex -> {\n                System.err.println("Error: " + ex.getMessage());\n                return null;\n            });\n        \n        return "Called";\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5B9E\u9645\u5E94\u7528\u573A\u666F"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u53D1\u9001\u90AE\u4EF6"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Service\npublic class EmailService {\n    \n    @Async\n    public void sendEmail(String to, String subject, String content) {\n        // \u53D1\u9001\u90AE\u4EF6\uFF08\u8017\u65F6\u64CD\u4F5C\uFF09\n        log.info("Sending email to: {}", to);\n        // ...\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u65E5\u5FD7\u8BB0\u5F55"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Service\npublic class LogService {\n    \n    @Async\n    public void saveLog(OperationLog log) {\n        // \u4FDD\u5B58\u65E5\u5FD7\u5230\u6570\u636E\u5E93\n        logRepository.save(log);\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u6570\u636E\u540C\u6B65"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Service\npublic class DataSyncService {\n    \n    @Async\n    public CompletableFuture<Void> syncData() {\n        // \u540C\u6B65\u6570\u636E\u5230\u5176\u4ED6\u7CFB\u7EDF\n        return CompletableFuture.runAsync(() -> {\n            // \u540C\u6B65\u903B\u8F91\n        });\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4. \u6279\u91CF\u5904\u7406"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Service\npublic class BatchService {\n    \n    @Async\n    public CompletableFuture<List<Result>> batchProcess(List<Data> dataList) {\n        List<Result> results = dataList.stream()\n            .map(this::process)\n            .collect(Collectors.toList());\n        \n        return CompletableFuture.completedFuture(results);\n    }\n    \n    private Result process(Data data) {\n        // \u5904\u7406\u5355\u4E2A\u6570\u636E\n        return new Result();\n    }\n}\n"})}),"\n",(0,i.jsx)(e.h3,{id:"24-spring-\u5982\u4F55\u5728-springboot-\u542F\u52A8\u65F6\u6267\u884C\u7279\u5B9A\u4EE3\u7801\u6709\u54EA\u4E9B\u65B9\u5F0F",children:"24. Spring \u5982\u4F55\u5728 SpringBoot \u542F\u52A8\u65F6\u6267\u884C\u7279\u5B9A\u4EE3\u7801\uFF1F\u6709\u54EA\u4E9B\u65B9\u5F0F\uFF1F"}),"\n",(0,i.jsx)(e.h3,{id:"25-spring-springbootspring\u4E2D\u4E3A\u4EC0\u4E48\u4E0D\u63A8\u8350\u4F7F\u7528-autowired-",children:"25. Spring SpringBoot\uFF08Spring\uFF09\u4E2D\u4E3A\u4EC0\u4E48\u4E0D\u63A8\u8350\u4F7F\u7528 @Autowired \uFF1F"}),"\n",(0,i.jsx)(e.h3,{id:"26-async-\u4EC0\u4E48\u65F6\u5019\u4F1A\u5931\u6548",children:"26. @Async \u4EC0\u4E48\u65F6\u5019\u4F1A\u5931\u6548\uFF1F"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u5B66\u4E60\u6307\u5357",children:"\u5B66\u4E60\u6307\u5357"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6838\u5FC3\u8981\u70B9\uFF1A"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Spring Boot \u81EA\u52A8\u914D\u7F6E\u539F\u7406"}),"\n",(0,i.jsx)(e.li,{children:"Starter \u673A\u5236\u548C\u81EA\u5B9A\u4E49Starter"}),"\n",(0,i.jsx)(e.li,{children:"\u914D\u7F6E\u6587\u4EF6\u548C\u73AF\u5883\u7BA1\u7406"}),"\n",(0,i.jsx)(e.li,{children:"Spring Boot \u5728\u5FAE\u670D\u52A1\u4E2D\u7684\u5E94\u7528"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5B66\u4E60\u8DEF\u5F84\u5EFA\u8BAE\uFF1A"})}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u638C\u63E1 Spring Boot \u81EA\u52A8\u914D\u7F6E\u673A\u5236"}),"\n",(0,i.jsx)(e.li,{children:"\u719F\u6089\u5E38\u7528Starter\u7684\u4F7F\u7528"}),"\n",(0,i.jsx)(e.li,{children:"\u5B66\u4E60\u914D\u7F6E\u6587\u4EF6\u548C\u73AF\u5883\u7BA1\u7406"}),"\n",(0,i.jsx)(e.li,{children:"\u7406\u89E3Spring Boot\u5728\u5FAE\u670D\u52A1\u67B6\u6784\u4E2D\u7684\u5E94\u7528"}),"\n"]})]})}function p(n={}){let{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},28453:function(n,e,r){r.d(e,{R:()=>l,x:()=>c});var s=r(96540);let i={},t=s.createContext(i);function l(n){let e=s.useContext(t);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:l(n.components),s.createElement(t.Provider,{value:e},n.children)}}}]);