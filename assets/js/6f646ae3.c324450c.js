"use strict";(self.webpackChunkfullstack_dev_blog=self.webpackChunkfullstack_dev_blog||[]).push([["4335"],{9068:function(n,e,r){r.r(e),r.d(e,{metadata:()=>s,default:()=>x,frontMatter:()=>c,contentTitle:()=>d,toc:()=>h,assets:()=>j});var s=JSON.parse('{"id":"interview/java-\u865A\u62DF\u673A","title":"\u{1F3D7}\uFE0F Java \u865A\u62DF\u673A\u9762\u8BD5\u9898\u96C6","description":"\u{1F4CA} \u603B\u9898\u6570 JVM \u5185\u5B58\u3001\u5783\u573E\u56DE\u6536\u3001\u7C7B\u52A0\u8F7D | \u{1F4C8} \u96BE\u5EA6\u5206\u5E03: \u4E2D\u7EA7\u5230\u9AD8\u7EA7","source":"@site/docs/interview/java-\u865A\u62DF\u673A.md","sourceDirName":"interview","slug":"/interview/java-\u865A\u62DF\u673A","permalink":"/docs/interview/java-\u865A\u62DF\u673A","draft":false,"unlisted":false,"editUrl":"https://github.com/MasterLiu93/blog-web/tree/main/docs/interview/java-\u865A\u62DF\u673A.md","tags":[],"version":"current","lastUpdatedBy":"laby","lastUpdatedAt":1763643037000,"frontMatter":{}}'),l=r(74848),i=r(28453);let c={},d="\u{1F3D7}\uFE0F Java \u865A\u62DF\u673A\u9762\u8BD5\u9898\u96C6",j={},h=[{value:"\u{1F4CB} \u9762\u8BD5\u9898\u76EE\u5217\u8868",id:"-\u9762\u8BD5\u9898\u76EE\u5217\u8868",level:2},{value:"1. Java \u4E2D\u6709\u54EA\u4E9B\u5783\u573E\u56DE\u6536\u7B97\u6CD5\uFF1F",id:"1-java-\u4E2D\u6709\u54EA\u4E9B\u5783\u573E\u56DE\u6536\u7B97\u6CD5",level:3},{value:"2. JVM \u7684 TLAB\uFF08Thread-Local Allocation Buffer\uFF09\u662F\u4EC0\u4E48\uFF1F",id:"2-jvm-\u7684-tlabthread-local-allocation-buffer\u662F\u4EC0\u4E48",level:3},{value:"3. Java \u662F\u5982\u4F55\u5B9E\u73B0\u8DE8\u5E73\u53F0\u7684\uFF1F",id:"3-java-\u662F\u5982\u4F55\u5B9E\u73B0\u8DE8\u5E73\u53F0\u7684",level:3},{value:"4. JVM \u7531\u54EA\u4E9B\u90E8\u5206\u7EC4\u6210\uFF1F",id:"4-jvm-\u7531\u54EA\u4E9B\u90E8\u5206\u7EC4\u6210",level:3},{value:"5. \u7F16\u8BD1\u6267\u884C\u4E0E\u89E3\u91CA\u6267\u884C\u7684\u533A\u522B\u662F\u4EC0\u4E48\uFF1FJVM \u4F7F\u7528\u54EA\u79CD\u65B9\u5F0F\uFF1F",id:"5-\u7F16\u8BD1\u6267\u884C\u4E0E\u89E3\u91CA\u6267\u884C\u7684\u533A\u522B\u662F\u4EC0\u4E48jvm-\u4F7F\u7528\u54EA\u79CD\u65B9\u5F0F",level:3},{value:"6. JVM \u65B9\u6CD5\u533A\u662F\u5426\u4F1A\u51FA\u73B0\u5185\u5B58\u6EA2\u51FA?",id:"6-jvm-\u65B9\u6CD5\u533A\u662F\u5426\u4F1A\u51FA\u73B0\u5185\u5B58\u6EA2\u51FA",level:3},{value:"7. Java \u4E2D\u5806\u548C\u6808\u7684\u533A\u522B\u662F\u4EC0\u4E48\uFF1F",id:"7-java-\u4E2D\u5806\u548C\u6808\u7684\u533A\u522B\u662F\u4EC0\u4E48",level:3},{value:"8. \u4EC0\u4E48\u662F Java \u4E2D\u7684\u76F4\u63A5\u5185\u5B58\uFF08\u5806\u5916\u5185\u5B58\uFF09\uFF1F",id:"8-\u4EC0\u4E48\u662F-java-\u4E2D\u7684\u76F4\u63A5\u5185\u5B58\u5806\u5916\u5185\u5B58",level:3},{value:"9. \u4EC0\u4E48\u662F Java \u4E2D\u7684\u5E38\u91CF\u6C60\uFF1F",id:"9-\u4EC0\u4E48\u662F-java-\u4E2D\u7684\u5E38\u91CF\u6C60",level:3},{value:"10. \u4F60\u4E86\u89E3 Java \u7684\u7C7B\u52A0\u8F7D\u5668\u5417\uFF1F",id:"10-\u4F60\u4E86\u89E3-java-\u7684\u7C7B\u52A0\u8F7D\u5668\u5417",level:3},{value:"11. \u4EC0\u4E48\u662F Java \u4E2D\u7684 JIT\uFF08Just-In-Time\uFF09?",id:"11-\u4EC0\u4E48\u662F-java-\u4E2D\u7684-jitjust-in-time",level:3},{value:"12. JIT \u7F16\u8BD1\u540E\u7684\u4EE3\u7801\u5B58\u5728\u54EA\uFF1F",id:"12-jit-\u7F16\u8BD1\u540E\u7684\u4EE3\u7801\u5B58\u5728\u54EA",level:3},{value:"13. \u4EC0\u4E48\u662F Java \u7684 AOT\uFF08Ahead-Of-Time\uFF09\uFF1F",id:"13-\u4EC0\u4E48\u662F-java-\u7684-aotahead-of-time",level:3},{value:"14. \u4F60\u4E86\u89E3 Java \u7684\u9003\u9038\u5206\u6790\u5417\uFF1F",id:"14-\u4F60\u4E86\u89E3-java-\u7684\u9003\u9038\u5206\u6790\u5417",level:3},{value:"15. Java \u4E2D\u7684\u5F3A\u5F15\u7528\u3001\u8F6F\u5F15\u7528\u3001\u5F31\u5F15\u7528\u548C\u865A\u5F15\u7528\u5206\u522B\u662F\u4EC0\u4E48\uFF1F",id:"15-java-\u4E2D\u7684\u5F3A\u5F15\u7528\u8F6F\u5F15\u7528\u5F31\u5F15\u7528\u548C\u865A\u5F15\u7528\u5206\u522B\u662F\u4EC0\u4E48",level:3},{value:"16. Java \u4E2D\u5E38\u89C1\u7684\u5783\u573E\u6536\u96C6\u5668\u6709\u54EA\u4E9B\uFF1F",id:"16-java-\u4E2D\u5E38\u89C1\u7684\u5783\u573E\u6536\u96C6\u5668\u6709\u54EA\u4E9B",level:3},{value:"17. Java \u4E2D\u5982\u4F55\u5224\u65AD\u5BF9\u8C61\u662F\u5426\u662F\u5783\u573E\uFF1F\u4E0D\u540C\u5B9E\u73B0\u65B9\u5F0F\u6709\u4F55\u533A\u522B\uFF1F",id:"17-java-\u4E2D\u5982\u4F55\u5224\u65AD\u5BF9\u8C61\u662F\u5426\u662F\u5783\u573E\u4E0D\u540C\u5B9E\u73B0\u65B9\u5F0F\u6709\u4F55\u533A\u522B",level:3},{value:"18. \u4E3A\u4EC0\u4E48 Java \u7684\u5783\u573E\u6536\u96C6\u5668\u5C06\u5806\u5206\u4E3A\u8001\u5E74\u4EE3\u548C\u65B0\u751F\u4EE3\uFF1F",id:"18-\u4E3A\u4EC0\u4E48-java-\u7684\u5783\u573E\u6536\u96C6\u5668\u5C06\u5806\u5206\u4E3A\u8001\u5E74\u4EE3\u548C\u65B0\u751F\u4EE3",level:3},{value:"19. \u4E3A\u4EC0\u4E48 Java 8 \u79FB\u9664\u4E86\u6C38\u4E45\u4EE3\uFF08PermGen\uFF09\u5E76\u5F15\u5165\u4E86\u5143\u7A7A\u95F4\uFF08Metaspace\uFF09\uFF1F",id:"19-\u4E3A\u4EC0\u4E48-java-8-\u79FB\u9664\u4E86\u6C38\u4E45\u4EE3permgen\u5E76\u5F15\u5165\u4E86\u5143\u7A7A\u95F4metaspace",level:3},{value:"20. \u4E3A\u4EC0\u4E48 Java \u65B0\u751F\u4EE3\u88AB\u5212\u5206\u4E3A S0\u3001S1 \u548C Eden \u533A\uFF1F",id:"20-\u4E3A\u4EC0\u4E48-java-\u65B0\u751F\u4EE3\u88AB\u5212\u5206\u4E3A-s0s1-\u548C-eden-\u533A",level:3},{value:"21. \u4EC0\u4E48\u662F\u4E09\u8272\u6807\u8BB0\u7B97\u6CD5\uFF1F",id:"21-\u4EC0\u4E48\u662F\u4E09\u8272\u6807\u8BB0\u7B97\u6CD5",level:3},{value:"22. Java \u4E2D\u7684 young GC\u3001old GC\u3001full GC \u548C mixed GC \u7684\u533A\u522B\u662F\u4EC0\u4E48\uFF1F",id:"22-java-\u4E2D\u7684-young-gcold-gcfull-gc-\u548C-mixed-gc-\u7684\u533A\u522B\u662F\u4EC0\u4E48",level:3},{value:"23. \u4EC0\u4E48\u6761\u4EF6\u4F1A\u89E6\u53D1 Java \u7684 young GC\uFF1F",id:"23-\u4EC0\u4E48\u6761\u4EF6\u4F1A\u89E6\u53D1-java-\u7684-young-gc",level:3},{value:"24. \u4EC0\u4E48\u60C5\u51B5\u4E0B\u4F1A\u89E6\u53D1 Java \u7684 Full GC\uFF1F",id:"24-\u4EC0\u4E48\u60C5\u51B5\u4E0B\u4F1A\u89E6\u53D1-java-\u7684-full-gc",level:3},{value:"25. \u4EC0\u4E48\u662F Java \u7684 PLAB\uFF1F",id:"25-\u4EC0\u4E48\u662F-java-\u7684-plab",level:3},{value:"26. JVM \u5783\u573E\u56DE\u6536\u65F6\u4EA7\u751F\u7684 concurrent mode failure \u7684\u539F\u56E0\u662F\u4EC0\u4E48\uFF1F",id:"26-jvm-\u5783\u573E\u56DE\u6536\u65F6\u4EA7\u751F\u7684-concurrent-mode-failure-\u7684\u539F\u56E0\u662F\u4EC0\u4E48",level:3},{value:"27. \u4E3A\u4EC0\u4E48 Java \u4E2D CMS \u5783\u573E\u6536\u96C6\u5668\u5728\u53D1\u751F Concurrent Mode Failure \u65F6\u7684 Full GC \u662F\u5355\u7EBF\u7A0B\u7684\uFF1F",id:"27-\u4E3A\u4EC0\u4E48-java-\u4E2D-cms-\u5783\u573E\u6536\u96C6\u5668\u5728\u53D1\u751F-concurrent-mode-failure-\u65F6\u7684-full-gc-\u662F\u5355\u7EBF\u7A0B\u7684",level:3},{value:"28. \u4E3A\u4EC0\u4E48 Java \u4E2D\u67D0\u4E9B\u65B0\u751F\u4EE3\u548C\u8001\u5E74\u4EE3\u7684\u5783\u573E\u6536\u96C6\u5668\u4E0D\u80FD\u7EC4\u5408\u4F7F\u7528\uFF1F\u6BD4\u5982 ParNew \u548C Parallel Old",id:"28-\u4E3A\u4EC0\u4E48-java-\u4E2D\u67D0\u4E9B\u65B0\u751F\u4EE3\u548C\u8001\u5E74\u4EE3\u7684\u5783\u573E\u6536\u96C6\u5668\u4E0D\u80FD\u7EC4\u5408\u4F7F\u7528\u6BD4\u5982-parnew-\u548C-parallel-old",level:3},{value:"29. JVM \u65B0\u751F\u4EE3\u5783\u573E\u56DE\u6536\u5982\u4F55\u907F\u514D\u5168\u5806\u626B\u63CF\uFF1F",id:"29-jvm-\u65B0\u751F\u4EE3\u5783\u573E\u56DE\u6536\u5982\u4F55\u907F\u514D\u5168\u5806\u626B\u63CF",level:3},{value:"30. Java \u7684 CMS \u5783\u573E\u56DE\u6536\u5668\u548C G1 \u5783\u573E\u56DE\u6536\u5668\u5728\u8BB0\u5FC6\u96C6\u7684\u7EF4\u62A4\u4E0A\u6709\u4EC0\u4E48\u4E0D\u540C\uFF1F",id:"30-java-\u7684-cms-\u5783\u573E\u56DE\u6536\u5668\u548C-g1-\u5783\u573E\u56DE\u6536\u5668\u5728\u8BB0\u5FC6\u96C6\u7684\u7EF4\u62A4\u4E0A\u6709\u4EC0\u4E48\u4E0D\u540C",level:3},{value:"31. \u4E3A\u4EC0\u4E48 G1 \u5783\u573E\u6536\u96C6\u5668\u4E0D\u7EF4\u62A4\u5E74\u8F7B\u4EE3\u5230\u8001\u5E74\u4EE3\u7684\u8BB0\u5FC6\u96C6\uFF1F",id:"31-\u4E3A\u4EC0\u4E48-g1-\u5783\u573E\u6536\u96C6\u5668\u4E0D\u7EF4\u62A4\u5E74\u8F7B\u4EE3\u5230\u8001\u5E74\u4EE3\u7684\u8BB0\u5FC6\u96C6",level:3},{value:"32. Java \u4E2D\u7684 CMS \u548C G1 \u5783\u573E\u6536\u96C6\u5668\u5982\u4F55\u7EF4\u6301\u5E76\u53D1\u7684\u6B63\u786E\u6027\uFF1F",id:"32-java-\u4E2D\u7684-cms-\u548C-g1-\u5783\u573E\u6536\u96C6\u5668\u5982\u4F55\u7EF4\u6301\u5E76\u53D1\u7684\u6B63\u786E\u6027",level:3},{value:"33. Java G1 \u76F8\u5BF9\u4E8E CMS \u6709\u54EA\u4E9B\u8FDB\u6B65\u7684\u5730\u65B9?",id:"33-java-g1-\u76F8\u5BF9\u4E8E-cms-\u6709\u54EA\u4E9B\u8FDB\u6B65\u7684\u5730\u65B9",level:3},{value:"34. \u4EC0\u4E48\u662F Java \u4E2D\u7684 logging write barrier\uFF1F",id:"34-\u4EC0\u4E48\u662F-java-\u4E2D\u7684-logging-write-barrier",level:3},{value:"35. Java \u7684 G1 \u5783\u573E\u56DE\u6536\u6D41\u7A0B\u662F\u600E\u6837\u7684\uFF1F",id:"35-java-\u7684-g1-\u5783\u573E\u56DE\u6536\u6D41\u7A0B\u662F\u600E\u6837\u7684",level:3},{value:"36. Java \u7684 CMS \u5783\u573E\u56DE\u6536\u6D41\u7A0B\u662F\u600E\u6837\u7684\uFF1F",id:"36-java-\u7684-cms-\u5783\u573E\u56DE\u6536\u6D41\u7A0B\u662F\u600E\u6837\u7684",level:3},{value:"37. \u4F60\u4E86\u89E3 Java \u7684 ZGC\uFF08Z Garbage Collector\uFF09\u5417\uFF1F",id:"37-\u4F60\u4E86\u89E3-java-\u7684-zgcz-garbage-collector\u5417",level:3},{value:"38. JVM \u5783\u573E\u56DE\u6536\u8C03\u4F18\u7684\u4E3B\u8981\u76EE\u6807\u662F\u4EC0\u4E48\uFF1F",id:"38-jvm-\u5783\u573E\u56DE\u6536\u8C03\u4F18\u7684\u4E3B\u8981\u76EE\u6807\u662F\u4EC0\u4E48",level:3},{value:"39. \u5982\u4F55\u5BF9 Java \u7684\u5783\u573E\u56DE\u6536\u8FDB\u884C\u8C03\u4F18\uFF1F",id:"39-\u5982\u4F55\u5BF9-java-\u7684\u5783\u573E\u56DE\u6536\u8FDB\u884C\u8C03\u4F18",level:3},{value:"40. \u5E38\u7528\u7684 JVM \u914D\u7F6E\u53C2\u6570\u6709\u54EA\u4E9B\uFF1F",id:"40-\u5E38\u7528\u7684-jvm-\u914D\u7F6E\u53C2\u6570\u6709\u54EA\u4E9B",level:3},{value:"41. \u4F60\u5E38\u7528\u54EA\u4E9B\u5DE5\u5177\u6765\u5206\u6790 JVM \u6027\u80FD\uFF1F",id:"41-\u4F60\u5E38\u7528\u54EA\u4E9B\u5DE5\u5177\u6765\u5206\u6790-jvm-\u6027\u80FD",level:3},{value:"42. \u5982\u4F55\u5728 Java \u4E2D\u8FDB\u884C\u5185\u5B58\u6CC4\u6F0F\u5206\u6790\uFF1F",id:"42-\u5982\u4F55\u5728-java-\u4E2D\u8FDB\u884C\u5185\u5B58\u6CC4\u6F0F\u5206\u6790",level:3},{value:"43. Java \u91CC\u7684\u5BF9\u8C61\u5728\u865A\u62DF\u673A\u91CC\u9762\u662F\u600E\u4E48\u5B58\u50A8\u7684\uFF1F",id:"43-java-\u91CC\u7684\u5BF9\u8C61\u5728\u865A\u62DF\u673A\u91CC\u9762\u662F\u600E\u4E48\u5B58\u50A8\u7684",level:3},{value:"44. \u8BF4\u8BF4 Java \u7684\u6267\u884C\u6D41\u7A0B?",id:"44-\u8BF4\u8BF4-java-\u7684\u6267\u884C\u6D41\u7A0B",level:3},{value:"\u5B66\u4E60\u6307\u5357",id:"\u5B66\u4E60\u6307\u5357",level:2}];function a(n){let e={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"\uFE0F-java-\u865A\u62DF\u673A\u9762\u8BD5\u9898\u96C6",children:"\u{1F3D7}\uFE0F Java \u865A\u62DF\u673A\u9762\u8BD5\u9898\u96C6"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsxs)(e.p,{children:["\u{1F4CA} ",(0,l.jsx)(e.strong,{children:"\u603B\u9898\u6570"}),": 51\u9053 | \u{1F50D} ",(0,l.jsx)(e.strong,{children:"\u91CD\u70B9\u9886\u57DF"}),": JVM \u5185\u5B58\u3001\u5783\u573E\u56DE\u6536\u3001\u7C7B\u52A0\u8F7D | \u{1F4C8} ",(0,l.jsx)(e.strong,{children:"\u96BE\u5EA6\u5206\u5E03"}),": \u4E2D\u7EA7\u5230\u9AD8\u7EA7"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u672C\u6587\u6863\u6574\u7406\u4E86 Java \u865A\u62DF\u673A\u7684\u5B8C\u657451\u9053\u9762\u8BD5\u9898\u76EE\uFF0C\u6DB5\u76D6\u5185\u5B58\u6A21\u578B\u3001\u5783\u573E\u56DE\u6536\u3001\u7C7B\u52A0\u8F7D\u3001\u6027\u80FD\u8C03\u4F18\u7B49\u5404\u4E2A\u65B9\u9762\u3002"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"-\u9762\u8BD5\u9898\u76EE\u5217\u8868",children:"\u{1F4CB} \u9762\u8BD5\u9898\u76EE\u5217\u8868"}),"\n",(0,l.jsx)(e.h3,{id:"1-java-\u4E2D\u6709\u54EA\u4E9B\u5783\u573E\u56DE\u6536\u7B97\u6CD5",children:"1. Java \u4E2D\u6709\u54EA\u4E9B\u5783\u573E\u56DE\u6536\u7B97\u6CD5\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"Java\u4E2D\u4E3B\u8981\u6709\u56DB\u79CD\u5783\u573E\u56DE\u6536\u7B97\u6CD5\uFF0C\u5404\u6709\u7279\u70B9\u548C\u9002\u7528\u573A\u666F\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. \u6807\u8BB0-\u6E05\u9664\u7B97\u6CD5\uFF08Mark-Sweep\uFF09"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u539F\u7406\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6807\u8BB0\u9636\u6BB5\uFF1A\u6807\u8BB0\u6240\u6709\u9700\u8981\u56DE\u6536\u7684\u5BF9\u8C61"}),"\n",(0,l.jsx)(e.li,{children:"\u6E05\u9664\u9636\u6BB5\uFF1A\u56DE\u6536\u88AB\u6807\u8BB0\u7684\u5BF9\u8C61"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4F18\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5B9E\u73B0\u7B80\u5355"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7F3A\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4EA7\u751F\u5185\u5B58\u788E\u7247"}),"\n",(0,l.jsx)(e.li,{children:"\u6548\u7387\u4E0D\u9AD8\uFF08\u4E24\u6B21\u904D\u5386\uFF09"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u6807\u8BB0-\u590D\u5236\u7B97\u6CD5\uFF08Mark-Copy\uFF09"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u539F\u7406\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5C06\u5185\u5B58\u5206\u4E3A\u4E24\u5757"}),"\n",(0,l.jsx)(e.li,{children:"\u53EA\u4F7F\u7528\u5176\u4E2D\u4E00\u5757"}),"\n",(0,l.jsx)(e.li,{children:"GC\u65F6\u5C06\u5B58\u6D3B\u5BF9\u8C61\u590D\u5236\u5230\u53E6\u4E00\u5757"}),"\n",(0,l.jsx)(e.li,{children:"\u6E05\u7A7A\u5F53\u524D\u5757"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4F18\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u65E0\u5185\u5B58\u788E\u7247"}),"\n",(0,l.jsx)(e.li,{children:"\u6548\u7387\u9AD8\uFF08\u53EA\u904D\u5386\u5B58\u6D3B\u5BF9\u8C61\uFF09"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7F3A\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5185\u5B58\u5229\u7528\u7387\u4F4E\uFF08\u53EA\u7528\u4E00\u534A\uFF09"}),"\n",(0,l.jsx)(e.li,{children:"\u5B58\u6D3B\u5BF9\u8C61\u591A\u65F6\u6548\u7387\u964D\u4F4E"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5E94\u7528\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u65B0\u751F\u4EE3\uFF08Eden + Survivor\uFF09"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. \u6807\u8BB0-\u6574\u7406\u7B97\u6CD5\uFF08Mark-Compact\uFF09"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u539F\u7406\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6807\u8BB0\u9636\u6BB5\uFF1A\u6807\u8BB0\u5B58\u6D3B\u5BF9\u8C61"}),"\n",(0,l.jsx)(e.li,{children:"\u6574\u7406\u9636\u6BB5\uFF1A\u5C06\u5B58\u6D3B\u5BF9\u8C61\u79FB\u52A8\u5230\u5185\u5B58\u4E00\u7AEF"}),"\n",(0,l.jsx)(e.li,{children:"\u6E05\u9664\u9636\u6BB5\uFF1A\u6E05\u7406\u8FB9\u754C\u5916\u7684\u5185\u5B58"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4F18\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u65E0\u5185\u5B58\u788E\u7247"}),"\n",(0,l.jsx)(e.li,{children:"\u5185\u5B58\u5229\u7528\u7387\u9AD8"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7F3A\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u9700\u8981\u79FB\u52A8\u5BF9\u8C61\uFF0C\u6548\u7387\u8F83\u4F4E"}),"\n",(0,l.jsx)(e.li,{children:"\u9700\u8981\u6682\u505C\u5E94\u7528\uFF08STW\uFF09"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5E94\u7528\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u8001\u5E74\u4EE3"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. \u5206\u4EE3\u6536\u96C6\u7B97\u6CD5\uFF08Generational Collection\uFF09"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u539F\u7406\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6839\u636E\u5BF9\u8C61\u5B58\u6D3B\u5468\u671F\u5212\u5206\u533A\u57DF"}),"\n",(0,l.jsx)(e.li,{children:"\u65B0\u751F\u4EE3\uFF1A\u4F7F\u7528\u590D\u5236\u7B97\u6CD5"}),"\n",(0,l.jsx)(e.li,{children:"\u8001\u5E74\u4EE3\uFF1A\u4F7F\u7528\u6807\u8BB0-\u6E05\u9664\u6216\u6807\u8BB0-\u6574\u7406"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4F9D\u636E\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5F31\u5206\u4EE3\u5047\u8BF4\uFF1A\u5927\u90E8\u5206\u5BF9\u8C61\u671D\u751F\u5915\u706D"}),"\n",(0,l.jsx)(e.li,{children:"\u5F3A\u5206\u4EE3\u5047\u8BF4\uFF1A\u71AC\u8FC7\u591A\u6B21GC\u7684\u5BF9\u8C61\u96BE\u4EE5\u6D88\u4EA1"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4F18\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u7ED3\u5408\u5404\u7B97\u6CD5\u4F18\u52BF"}),"\n",(0,l.jsx)(e.li,{children:"\u9488\u5BF9\u6027\u4F18\u5316"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"2-jvm-\u7684-tlabthread-local-allocation-buffer\u662F\u4EC0\u4E48",children:"2. JVM \u7684 TLAB\uFF08Thread-Local Allocation Buffer\uFF09\u662F\u4EC0\u4E48\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"TLAB\u662FJVM\u4E3A\u6BCF\u4E2A\u7EBF\u7A0B\u5728Eden\u533A\u5206\u914D\u7684\u79C1\u6709\u7F13\u51B2\u533A\uFF0C\u7528\u4E8E\u63D0\u9AD8\u5BF9\u8C61\u5206\u914D\u6548\u7387\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. \u4E3A\u4EC0\u4E48\u9700\u8981TLAB"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u95EE\u9898\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u591A\u7EBF\u7A0B\u5E76\u53D1\u5206\u914D\u5BF9\u8C61\u9700\u8981\u540C\u6B65"}),"\n",(0,l.jsx)(e.li,{children:"\u9891\u7E41\u52A0\u9501\u5F71\u54CD\u6027\u80FD"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u89E3\u51B3\u65B9\u6848\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4E3A\u6BCF\u4E2A\u7EBF\u7A0B\u9884\u5206\u914D\u4E00\u5757\u5185\u5B58"}),"\n",(0,l.jsx)(e.li,{children:"\u7EBF\u7A0B\u5728\u81EA\u5DF1\u7684TLAB\u4E2D\u5206\u914D\u5BF9\u8C61"}),"\n",(0,l.jsx)(e.li,{children:"\u65E0\u9700\u540C\u6B65\uFF0C\u63D0\u9AD8\u6548\u7387"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. TLAB\u5DE5\u4F5C\u539F\u7406"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u5BF9\u8C61\u5206\u914D\u6D41\u7A0B\npublic Object allocate(int size) {\n    // 1. \u5C1D\u8BD5\u5728TLAB\u4E2D\u5206\u914D\n    if (tlab.canAllocate(size)) {\n        return tlab.allocate(size);\n    }\n    \n    // 2. TLAB\u7A7A\u95F4\u4E0D\u8DB3\uFF0C\u7533\u8BF7\u65B0\u7684TLAB\n    if (size < TLAB_SIZE) {\n        tlab = allocateNewTLAB();\n        return tlab.allocate(size);\n    }\n    \n    // 3. \u5BF9\u8C61\u592A\u5927\uFF0C\u76F4\u63A5\u5728Eden\u533A\u5206\u914D\uFF08\u9700\u8981\u52A0\u9501\uFF09\n    return allocateInEden(size);\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. TLAB\u7279\u6027"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5927\u5C0F\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u9ED8\u8BA4\u5360Eden\u533A\u76841%"}),"\n",(0,l.jsxs)(e.li,{children:["\u53EF\u901A\u8FC7",(0,l.jsx)(e.code,{children:"-XX:TLABSize"}),"\u8BBE\u7F6E"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u751F\u547D\u5468\u671F\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u7EBF\u7A0B\u521B\u5EFA\u65F6\u5206\u914D"}),"\n",(0,l.jsx)(e.li,{children:"TLAB\u7528\u5B8C\u540E\u91CD\u65B0\u5206\u914D"}),"\n",(0,l.jsx)(e.li,{children:"\u7EBF\u7A0B\u7ED3\u675F\u65F6\u56DE\u6536"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. \u76F8\u5173JVM\u53C2\u6570"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u542F\u7528TLAB\uFF08\u9ED8\u8BA4\u5F00\u542F\uFF09\n-XX:+UseTLAB\n\n# \u8BBE\u7F6ETLAB\u5927\u5C0F\n-XX:TLABSize=256k\n\n# TLAB\u5360Eden\u533A\u7684\u6BD4\u4F8B\n-XX:TLABWasteTargetPercent=1\n\n# \u6253\u5370TLAB\u4FE1\u606F\n-XX:+PrintTLAB\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"5. \u4F18\u52BF"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u65E0\u9501\u5206\u914D"}),"\uFF1A\u907F\u514D\u540C\u6B65\u5F00\u9500"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u51CF\u5C11\u788E\u7247"}),"\uFF1A\u8FDE\u7EED\u5206\u914D"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u63D0\u9AD8\u6027\u80FD"}),"\uFF1A\u5206\u914D\u901F\u5EA6\u5FEB"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"3-java-\u662F\u5982\u4F55\u5B9E\u73B0\u8DE8\u5E73\u53F0\u7684",children:"3. Java \u662F\u5982\u4F55\u5B9E\u73B0\u8DE8\u5E73\u53F0\u7684\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:'Java\u901A\u8FC7"\u4E00\u6B21\u7F16\u8BD1\uFF0C\u5230\u5904\u8FD0\u884C"\u7684\u673A\u5236\u5B9E\u73B0\u8DE8\u5E73\u53F0\u3002'}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. \u6838\u5FC3\u673A\u5236"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7F16\u8BD1\u8FC7\u7A0B\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"Java\u6E90\u4EE3\u7801(.java) -> \u7F16\u8BD1\u5668(javac) -> \u5B57\u8282\u7801(.class)\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6267\u884C\u8FC7\u7A0B\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u5B57\u8282\u7801(.class) -> JVM -> \u673A\u5668\u7801 -> \u64CD\u4F5C\u7CFB\u7EDF\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u5173\u952E\u7EC4\u4EF6"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5B57\u8282\u7801\uFF08Bytecode\uFF09\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5E73\u53F0\u65E0\u5173\u7684\u4E2D\u95F4\u4EE3\u7801"}),"\n",(0,l.jsx)(e.li,{children:"JVM\u89C4\u8303\u5B9A\u4E49\u7684\u6307\u4EE4\u96C6"}),"\n",(0,l.jsx)(e.li,{children:"\u6240\u6709\u5E73\u53F0\u7684JVM\u90FD\u80FD\u8BC6\u522B"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Java\u865A\u62DF\u673A\uFF08JVM\uFF09\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5E73\u53F0\u76F8\u5173\u7684\u865A\u62DF\u673A\u5B9E\u73B0"}),"\n",(0,l.jsx)(e.li,{children:"\u8D1F\u8D23\u5C06\u5B57\u8282\u7801\u7FFB\u8BD1\u6210\u673A\u5668\u7801"}),"\n",(0,l.jsx)(e.li,{children:"\u4E0D\u540C\u5E73\u53F0\u6709\u4E0D\u540C\u7684JVM\u5B9E\u73B0"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. \u5B9E\u73B0\u539F\u7406"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'// \u793A\u4F8B\u4EE3\u7801\npublic class Hello {\n    public static void main(String[] args) {\n        System.out.println("Hello World");\n    }\n}\n\n// \u7F16\u8BD1\u540E\u7684\u5B57\u8282\u7801\uFF08\u90E8\u5206\uFF09\npublic static void main(java.lang.String[]);\n    Code:\n       0: getstatic     #2  // Field java/lang/System.out\n       3: ldc           #3  // String Hello World\n       5: invokevirtual #4  // Method java/io/PrintStream.println\n       8: return\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. \u8DE8\u5E73\u53F0\u67B6\u6784"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502         Java Application            \u2502\n\u251C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502         Java API (rt.jar)           \u2502\n\u251C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502              JVM                    \u2502\n\u251C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Windows  \u2502  Linux   \u2502    macOS      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"5. \u5E73\u53F0\u5DEE\u5F02\u5904\u7406"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"JNI\uFF08Java Native Interface\uFF09\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'// \u8C03\u7528\u672C\u5730\u65B9\u6CD5\npublic class NativeDemo {\n    // \u58F0\u660E\u672C\u5730\u65B9\u6CD5\n    public native void nativeMethod();\n    \n    static {\n        // \u52A0\u8F7D\u5E73\u53F0\u76F8\u5173\u7684\u52A8\u6001\u5E93\n        System.loadLibrary("native");\n    }\n}\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"6. \u4F18\u7F3A\u70B9"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4F18\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4E00\u6B21\u7F16\u8BD1\uFF0C\u5230\u5904\u8FD0\u884C"}),"\n",(0,l.jsx)(e.li,{children:"\u964D\u4F4E\u5F00\u53D1\u6210\u672C"}),"\n",(0,l.jsx)(e.li,{children:"\u4FBF\u4E8E\u7EF4\u62A4"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7F3A\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6027\u80FD\u7565\u4F4E\u4E8E\u539F\u751F\u4EE3\u7801"}),"\n",(0,l.jsx)(e.li,{children:"\u4F9D\u8D56JVM\u73AF\u5883"}),"\n",(0,l.jsx)(e.li,{children:"\u542F\u52A8\u901F\u5EA6\u8F83\u6162"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"4-jvm-\u7531\u54EA\u4E9B\u90E8\u5206\u7EC4\u6210",children:"4. JVM \u7531\u54EA\u4E9B\u90E8\u5206\u7EC4\u6210\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"JVM\u4E3B\u8981\u7531\u7C7B\u52A0\u8F7D\u5B50\u7CFB\u7EDF\u3001\u8FD0\u884C\u65F6\u6570\u636E\u533A\u3001\u6267\u884C\u5F15\u64CE\u548C\u672C\u5730\u63A5\u53E3\u56DB\u90E8\u5206\u7EC4\u6210\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. \u6574\u4F53\u67B6\u6784"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502          Class Loader Subsystem         \u2502\n\u251C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502         Runtime Data Areas              \u2502\n\u2502  \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502  Method  \u2502   Heap   \u2502  Stacks  \u2502    \u2502\n\u2502  \u2502   Area   \u2502          \u2502          \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u251C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502          Execution Engine               \u2502\n\u2502  \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502Interpreter\u2502   JIT    \u2502    GC    \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u251C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502        Native Method Interface          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u7C7B\u52A0\u8F7D\u5B50\u7CFB\u7EDF\uFF08Class Loader Subsystem\uFF09"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u529F\u80FD\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u52A0\u8F7D.class\u6587\u4EF6"}),"\n",(0,l.jsx)(e.li,{children:"\u94FE\u63A5\uFF08\u9A8C\u8BC1\u3001\u51C6\u5907\u3001\u89E3\u6790\uFF09"}),"\n",(0,l.jsx)(e.li,{children:"\u521D\u59CB\u5316"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7EC4\u6210\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Bootstrap ClassLoader\uFF08\u542F\u52A8\u7C7B\u52A0\u8F7D\u5668\uFF09"}),"\n",(0,l.jsx)(e.li,{children:"Extension ClassLoader\uFF08\u6269\u5C55\u7C7B\u52A0\u8F7D\u5668\uFF09"}),"\n",(0,l.jsx)(e.li,{children:"Application ClassLoader\uFF08\u5E94\u7528\u7C7B\u52A0\u8F7D\u5668\uFF09"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. \u8FD0\u884C\u65F6\u6570\u636E\u533A\uFF08Runtime Data Areas\uFF09"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7EBF\u7A0B\u5171\u4EAB\u533A\u57DF\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u65B9\u6CD5\u533A\uFF08Method Area\uFF09\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5B58\u50A8\u7C7B\u4FE1\u606F\u3001\u5E38\u91CF\u3001\u9759\u6001\u53D8\u91CF"}),"\n",(0,l.jsx)(e.li,{children:"JDK 8\u540E\u6539\u4E3A\u5143\u7A7A\u95F4\uFF08Metaspace\uFF09"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5806\uFF08Heap\uFF09\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5B58\u50A8\u5BF9\u8C61\u5B9E\u4F8B"}),"\n",(0,l.jsx)(e.li,{children:"\u5783\u573E\u56DE\u6536\u7684\u4E3B\u8981\u533A\u57DF"}),"\n",(0,l.jsx)(e.li,{children:"\u5206\u4E3A\u65B0\u751F\u4EE3\u548C\u8001\u5E74\u4EE3"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7EBF\u7A0B\u79C1\u6709\u533A\u57DF\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7A0B\u5E8F\u8BA1\u6570\u5668\uFF08PC Register\uFF09\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u8BB0\u5F55\u5F53\u524D\u7EBF\u7A0B\u6267\u884C\u7684\u5B57\u8282\u7801\u884C\u53F7"}),"\n",(0,l.jsx)(e.li,{children:"\u7EBF\u7A0B\u5207\u6362\u540E\u80FD\u6062\u590D\u5230\u6B63\u786E\u4F4D\u7F6E"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u865A\u62DF\u673A\u6808\uFF08VM Stack\uFF09\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5B58\u50A8\u5C40\u90E8\u53D8\u91CF\u3001\u64CD\u4F5C\u6570\u6808\u3001\u65B9\u6CD5\u51FA\u53E3"}),"\n",(0,l.jsx)(e.li,{children:"\u6BCF\u4E2A\u65B9\u6CD5\u5BF9\u5E94\u4E00\u4E2A\u6808\u5E27"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u672C\u5730\u65B9\u6CD5\u6808\uFF08Native Method Stack\uFF09\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4E3A\u672C\u5730\u65B9\u6CD5\u670D\u52A1"}),"\n",(0,l.jsx)(e.li,{children:"\u7C7B\u4F3C\u865A\u62DF\u673A\u6808"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. \u6267\u884C\u5F15\u64CE\uFF08Execution Engine\uFF09"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u89E3\u91CA\u5668\uFF08Interpreter\uFF09\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u9010\u884C\u89E3\u91CA\u6267\u884C\u5B57\u8282\u7801"}),"\n",(0,l.jsx)(e.li,{children:"\u542F\u52A8\u5FEB\uFF0C\u6267\u884C\u6162"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5373\u65F6\u7F16\u8BD1\u5668\uFF08JIT Compiler\uFF09\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5C06\u70ED\u70B9\u4EE3\u7801\u7F16\u8BD1\u6210\u673A\u5668\u7801"}),"\n",(0,l.jsx)(e.li,{children:"\u542F\u52A8\u6162\uFF0C\u6267\u884C\u5FEB"}),"\n",(0,l.jsx)(e.li,{children:"C1\u7F16\u8BD1\u5668\uFF08Client\uFF09\u548CC2\u7F16\u8BD1\u5668\uFF08Server\uFF09"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5783\u573E\u56DE\u6536\u5668\uFF08Garbage Collector\uFF09\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u81EA\u52A8\u56DE\u6536\u4E0D\u518D\u4F7F\u7528\u7684\u5BF9\u8C61"}),"\n",(0,l.jsx)(e.li,{children:"\u591A\u79CDGC\u7B97\u6CD5\u548C\u6536\u96C6\u5668"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"5. \u672C\u5730\u63A5\u53E3\uFF08Native Interface\uFF09"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"JNI\uFF08Java Native Interface\uFF09\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u8C03\u7528\u672C\u5730\u65B9\u6CD5"}),"\n",(0,l.jsx)(e.li,{children:"\u4E0E\u64CD\u4F5C\u7CFB\u7EDF\u4EA4\u4E92"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u672C\u5730\u65B9\u6CD5\u5E93\uFF08Native Method Libraries\uFF09\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"C/C++\u7F16\u5199\u7684\u5E93"}),"\n",(0,l.jsx)(e.li,{children:"\u63D0\u4F9B\u5E95\u5C42\u529F\u80FD"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"6. \u5185\u5B58\u5206\u5E03\u793A\u4F8B"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'public class MemoryDemo {\n    // \u7C7B\u4FE1\u606F\u5B58\u50A8\u5728\u65B9\u6CD5\u533A\n    private static int staticVar = 100;  // \u9759\u6001\u53D8\u91CF\u5728\u65B9\u6CD5\u533A\n    \n    public void method() {\n        int localVar = 10;           // \u5C40\u90E8\u53D8\u91CF\u5728\u6808\n        Object obj = new Object();   // \u5BF9\u8C61\u5728\u5806\uFF0C\u5F15\u7528\u5728\u6808\n        \n        // \u5B57\u7B26\u4E32\u5E38\u91CF\u5728\u5B57\u7B26\u4E32\u5E38\u91CF\u6C60\uFF08\u5806\u4E2D\uFF09\n        String str = "Hello";\n    }\n}\n'})}),"\n",(0,l.jsx)(e.h3,{id:"5-\u7F16\u8BD1\u6267\u884C\u4E0E\u89E3\u91CA\u6267\u884C\u7684\u533A\u522B\u662F\u4EC0\u4E48jvm-\u4F7F\u7528\u54EA\u79CD\u65B9\u5F0F",children:"5. \u7F16\u8BD1\u6267\u884C\u4E0E\u89E3\u91CA\u6267\u884C\u7684\u533A\u522B\u662F\u4EC0\u4E48\uFF1FJVM \u4F7F\u7528\u54EA\u79CD\u65B9\u5F0F\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsxs)(e.p,{children:["JVM\u91C7\u7528",(0,l.jsx)(e.strong,{children:"\u6DF7\u5408\u6A21\u5F0F"}),"\uFF0C\u7ED3\u5408\u89E3\u91CA\u6267\u884C\u548C\u7F16\u8BD1\u6267\u884C\u7684\u4F18\u52BF\u3002"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. \u89E3\u91CA\u6267\u884C\uFF08Interpretation\uFF09"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7279\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u9010\u884C\u7FFB\u8BD1\u5B57\u8282\u7801\u4E3A\u673A\u5668\u7801"}),"\n",(0,l.jsx)(e.li,{children:"\u8FB9\u89E3\u91CA\u8FB9\u6267\u884C"}),"\n",(0,l.jsx)(e.li,{children:"\u4E0D\u751F\u6210\u76EE\u6807\u4EE3\u7801"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4F18\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u542F\u52A8\u5FEB"}),"\n",(0,l.jsx)(e.li,{children:"\u5185\u5B58\u5360\u7528\u5C11"}),"\n",(0,l.jsx)(e.li,{children:"\u8DE8\u5E73\u53F0\u6027\u597D"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7F3A\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6267\u884C\u901F\u5EA6\u6162"}),"\n",(0,l.jsx)(e.li,{children:"\u91CD\u590D\u4EE3\u7801\u91CD\u590D\u89E3\u91CA"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u7F16\u8BD1\u6267\u884C\uFF08Compilation\uFF09"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7279\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4E00\u6B21\u6027\u5C06\u4EE3\u7801\u7F16\u8BD1\u6210\u673A\u5668\u7801"}),"\n",(0,l.jsx)(e.li,{children:"\u751F\u6210\u53EF\u6267\u884C\u6587\u4EF6"}),"\n",(0,l.jsx)(e.li,{children:"\u76F4\u63A5\u6267\u884C\u673A\u5668\u7801"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4F18\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6267\u884C\u901F\u5EA6\u5FEB"}),"\n",(0,l.jsx)(e.li,{children:"\u4F18\u5316\u5145\u5206"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7F3A\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u542F\u52A8\u6162"}),"\n",(0,l.jsx)(e.li,{children:"\u5185\u5B58\u5360\u7528\u5927"}),"\n",(0,l.jsx)(e.li,{children:"\u5E73\u53F0\u76F8\u5173"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. JVM\u7684\u6DF7\u5408\u6A21\u5F0F"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5206\u5C42\u7F16\u8BD1\uFF08Tiered Compilation\uFF09\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"Level 0: \u89E3\u91CA\u6267\u884C\n    \u2193\nLevel 1: C1\u7F16\u8BD1\uFF08\u7B80\u5355\u4F18\u5316\uFF09\n    \u2193\nLevel 2: C1\u7F16\u8BD1\uFF08\u5E26profiling\uFF09\n    \u2193\nLevel 3: C1\u7F16\u8BD1\uFF08\u5B8C\u5168\u4F18\u5316\uFF09\n    \u2193\nLevel 4: C2\u7F16\u8BD1\uFF08\u6FC0\u8FDB\u4F18\u5316\uFF09\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5DE5\u4F5C\u6D41\u7A0B\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// 1. \u7A0B\u5E8F\u542F\u52A8\uFF0C\u89E3\u91CA\u6267\u884C\npublic void method() {\n    // \u89E3\u91CA\u5668\u6267\u884C\n}\n\n// 2. \u65B9\u6CD5\u88AB\u9891\u7E41\u8C03\u7528\uFF0C\u89E6\u53D1JIT\u7F16\u8BD1\n// \u8C03\u7528\u6B21\u6570\u8FBE\u5230\u9608\u503C\uFF08\u9ED8\u8BA410000\u6B21\uFF09\nif (invocationCount > CompileThreshold) {\n    // C1\u7F16\u8BD1\u5668\u7F16\u8BD1\uFF08\u5FEB\u901F\u7F16\u8BD1\uFF09\n    compileWithC1();\n}\n\n// 3. \u7EE7\u7EED\u9891\u7E41\u8C03\u7528\uFF0C\u89E6\u53D1C2\u7F16\u8BD1\nif (invocationCount > TierThreshold) {\n    // C2\u7F16\u8BD1\u5668\u7F16\u8BD1\uFF08\u6DF1\u5EA6\u4F18\u5316\uFF09\n    compileWithC2();\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. \u70ED\u70B9\u4EE3\u7801\u68C0\u6D4B"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u65B9\u6CD5\u8C03\u7528\u8BA1\u6570\u5668\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u7EDF\u8BA1\u65B9\u6CD5\u8C03\u7528\u6B21\u6570"}),"\n",(0,l.jsx)(e.li,{children:"\u8FBE\u5230\u9608\u503C\u89E6\u53D1\u7F16\u8BD1"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u56DE\u8FB9\u8BA1\u6570\u5668\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u7EDF\u8BA1\u5FAA\u73AF\u6267\u884C\u6B21\u6570"}),"\n",(0,l.jsx)(e.li,{children:"\u68C0\u6D4B\u5FAA\u73AF\u70ED\u70B9"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"5. JVM\u53C2\u6570\u914D\u7F6E"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u53EA\u4F7F\u7528\u89E3\u91CA\u5668\n-Xint\n\n# \u53EA\u4F7F\u7528\u7F16\u8BD1\u5668\uFF08\u9700\u8981\u9884\u70ED\uFF09\n-Xcomp\n\n# \u6DF7\u5408\u6A21\u5F0F\uFF08\u9ED8\u8BA4\uFF09\n-Xmixed\n\n# \u8BBE\u7F6E\u7F16\u8BD1\u9608\u503C\n-XX:CompileThreshold=10000\n\n# \u542F\u7528\u5206\u5C42\u7F16\u8BD1\uFF08\u9ED8\u8BA4\u5F00\u542F\uFF09\n-XX:+TieredCompilation\n\n# \u6253\u5370\u7F16\u8BD1\u4FE1\u606F\n-XX:+PrintCompilation\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"6. \u6027\u80FD\u5BF9\u6BD4"})}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u7279\u6027"}),(0,l.jsx)(e.th,{children:"\u89E3\u91CA\u6267\u884C"}),(0,l.jsx)(e.th,{children:"\u7F16\u8BD1\u6267\u884C"}),(0,l.jsx)(e.th,{children:"\u6DF7\u5408\u6A21\u5F0F"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u542F\u52A8\u901F\u5EA6"}),(0,l.jsx)(e.td,{children:"\u5FEB"}),(0,l.jsx)(e.td,{children:"\u6162"}),(0,l.jsx)(e.td,{children:"\u4E2D\u7B49"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u6267\u884C\u901F\u5EA6"}),(0,l.jsx)(e.td,{children:"\u6162"}),(0,l.jsx)(e.td,{children:"\u5FEB"}),(0,l.jsx)(e.td,{children:"\u5FEB"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u5185\u5B58\u5360\u7528"}),(0,l.jsx)(e.td,{children:"\u5C0F"}),(0,l.jsx)(e.td,{children:"\u5927"}),(0,l.jsx)(e.td,{children:"\u4E2D\u7B49"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u4F18\u5316\u7A0B\u5EA6"}),(0,l.jsx)(e.td,{children:"\u65E0"}),(0,l.jsx)(e.td,{children:"\u9AD8"}),(0,l.jsx)(e.td,{children:"\u9AD8"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u9002\u7528\u573A\u666F"}),(0,l.jsx)(e.td,{children:"\u77ED\u671F\u8FD0\u884C"}),(0,l.jsx)(e.td,{children:"\u957F\u671F\u8FD0\u884C"}),(0,l.jsx)(e.td,{children:"\u901A\u7528"})]})]})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"7. \u5B9E\u9645\u5E94\u7528"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u793A\u4F8B\uFF1A\u70ED\u70B9\u4EE3\u7801\npublic class HotSpotDemo {\n    public static void main(String[] args) {\n        // \u521D\u59CB\u9636\u6BB5\uFF1A\u89E3\u91CA\u6267\u884C\n        for (int i = 0; i < 15000; i++) {\n            compute(i);  // \u524D10000\u6B21\u89E3\u91CA\u6267\u884C\n                        // \u540E5000\u6B21\u7F16\u8BD1\u6267\u884C\n        }\n    }\n    \n    // \u70ED\u70B9\u65B9\u6CD5\n    public static int compute(int n) {\n        return n * n + n;\n    }\n}\n"})}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u603B\u7ED3\uFF1A"}),"\nJVM\u4F7F\u7528\u6DF7\u5408\u6A21\u5F0F\uFF0C\u521D\u671F\u89E3\u91CA\u6267\u884C\u4FDD\u8BC1\u5FEB\u901F\u542F\u52A8\uFF0C\u8FD0\u884C\u4E2D\u5C06\u70ED\u70B9\u4EE3\u7801\u7F16\u8BD1\u4F18\u5316\uFF0C\u517C\u987E\u542F\u52A8\u901F\u5EA6\u548C\u6267\u884C\u6548\u7387\u3002"]}),"\n",(0,l.jsx)(e.h3,{id:"6-jvm-\u65B9\u6CD5\u533A\u662F\u5426\u4F1A\u51FA\u73B0\u5185\u5B58\u6EA2\u51FA",children:"6. JVM \u65B9\u6CD5\u533A\u662F\u5426\u4F1A\u51FA\u73B0\u5185\u5B58\u6EA2\u51FA?"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u4F1A\u51FA\u73B0\u5185\u5B58\u6EA2\u51FA"}),"\uFF0C\u65B9\u6CD5\u533A\uFF08JDK 8\u540E\u4E3A\u5143\u7A7A\u95F4\uFF09\u4E5F\u4F1A\u53D1\u751FOOM\u3002"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. \u65B9\u6CD5\u533A\u5B58\u50A8\u5185\u5BB9"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u7C7B\u7684\u5143\u6570\u636E\u4FE1\u606F"}),"\n",(0,l.jsx)(e.li,{children:"\u5E38\u91CF\u6C60"}),"\n",(0,l.jsx)(e.li,{children:"\u9759\u6001\u53D8\u91CF"}),"\n",(0,l.jsx)(e.li,{children:"JIT\u7F16\u8BD1\u540E\u7684\u4EE3\u7801"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u5185\u5B58\u6EA2\u51FA\u573A\u666F"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u573A\u666F1\uFF1A\u52A0\u8F7D\u5927\u91CF\u7C7B"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u52A8\u6001\u751F\u6210\u5927\u91CF\u7C7B\u5BFC\u81F4OOM\npublic class MethodAreaOOM {\n    public static void main(String[] args) {\n        while (true) {\n            Enhancer enhancer = new Enhancer();\n            enhancer.setSuperclass(Object.class);\n            enhancer.setUseCache(false);\n            enhancer.setCallback(new MethodInterceptor() {\n                public Object intercept(Object obj, Method method, \n                                       Object[] args, MethodProxy proxy) {\n                    return proxy.invokeSuper(obj, args);\n                }\n            });\n            enhancer.create();  // \u52A8\u6001\u751F\u6210\u7C7B\n        }\n    }\n}\n// \u9519\u8BEF\uFF1Ajava.lang.OutOfMemoryError: Metaspace\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u573A\u666F2\uFF1A\u5927\u91CF\u4F7F\u7528\u53CD\u5C04"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'// \u53CD\u5C04\u751F\u6210\u7C7B\nClassPool pool = ClassPool.getDefault();\nfor (int i = 0; i < 100000; i++) {\n    CtClass cc = pool.makeClass("com.example.Class" + i);\n    cc.toClass();  // \u52A0\u8F7D\u5230\u65B9\u6CD5\u533A\n}\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u573A\u666F3\uFF1AJSP\u9875\u9762\u8FC7\u591A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6BCF\u4E2AJSP\u7F16\u8BD1\u6210\u4E00\u4E2A\u7C7B"}),"\n",(0,l.jsx)(e.li,{children:"\u5927\u91CFJSP\u5BFC\u81F4\u65B9\u6CD5\u533A\u6EA2\u51FA"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. JDK\u7248\u672C\u5DEE\u5F02"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"JDK 7\u53CA\u4E4B\u524D\uFF08\u6C38\u4E45\u4EE3\uFF09\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u8BBE\u7F6E\u6C38\u4E45\u4EE3\u5927\u5C0F\n-XX:PermSize=64m\n-XX:MaxPermSize=256m\n\n# \u9519\u8BEF\u4FE1\u606F\njava.lang.OutOfMemoryError: PermGen space\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"JDK 8\u53CA\u4E4B\u540E\uFF08\u5143\u7A7A\u95F4\uFF09\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u8BBE\u7F6E\u5143\u7A7A\u95F4\u5927\u5C0F\n-XX:MetaspaceSize=128m\n-XX:MaxMetaspaceSize=512m\n\n# \u9519\u8BEF\u4FE1\u606F\njava.lang.OutOfMemoryError: Metaspace\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. \u5143\u7A7A\u95F4\u4F18\u52BF"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4F7F\u7528\u672C\u5730\u5185\u5B58\uFF0C\u4E0D\u53D7\u5806\u5927\u5C0F\u9650\u5236"}),"\n",(0,l.jsx)(e.li,{children:"\u81EA\u52A8\u6269\u5C55\uFF0C\u9ED8\u8BA4\u65E0\u4E0A\u9650"}),"\n",(0,l.jsx)(e.li,{children:"\u51CF\u5C11Full GC\u9891\u7387"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"5. \u9884\u9632\u63AA\u65BD"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u5408\u7406\u8BBE\u7F6E\u5143\u7A7A\u95F4\u5927\u5C0F\n-XX:MetaspaceSize=256m\n-XX:MaxMetaspaceSize=512m\n\n# \u76D1\u63A7\u5143\u7A7A\u95F4\u4F7F\u7528\n-XX:+TraceClassLoading\n-XX:+TraceClassUnloading\n"})}),"\n",(0,l.jsx)(e.h3,{id:"7-java-\u4E2D\u5806\u548C\u6808\u7684\u533A\u522B\u662F\u4EC0\u4E48",children:"7. Java \u4E2D\u5806\u548C\u6808\u7684\u533A\u522B\u662F\u4EC0\u4E48\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"\u5806\u548C\u6808\u662FJVM\u5185\u5B58\u4E2D\u4E24\u4E2A\u91CD\u8981\u7684\u533A\u57DF\uFF0C\u7528\u9014\u548C\u7279\u6027\u5B8C\u5168\u4E0D\u540C\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. \u6838\u5FC3\u533A\u522B\u5BF9\u6BD4"})}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u7279\u6027"}),(0,l.jsx)(e.th,{children:"\u5806\uFF08Heap\uFF09"}),(0,l.jsx)(e.th,{children:"\u6808\uFF08Stack\uFF09"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u4F5C\u7528\u57DF"}),(0,l.jsx)(e.td,{children:"\u7EBF\u7A0B\u5171\u4EAB"}),(0,l.jsx)(e.td,{children:"\u7EBF\u7A0B\u79C1\u6709"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u5B58\u50A8\u5185\u5BB9"}),(0,l.jsx)(e.td,{children:"\u5BF9\u8C61\u5B9E\u4F8B\u3001\u6570\u7EC4"}),(0,l.jsx)(e.td,{children:"\u5C40\u90E8\u53D8\u91CF\u3001\u65B9\u6CD5\u8C03\u7528"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u751F\u547D\u5468\u671F"}),(0,l.jsx)(e.td,{children:"\u5BF9\u8C61\u521B\u5EFA\u5230GC\u56DE\u6536"}),(0,l.jsx)(e.td,{children:"\u65B9\u6CD5\u8C03\u7528\u5230\u8FD4\u56DE"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u5927\u5C0F"}),(0,l.jsx)(e.td,{children:"\u8F83\u5927\uFF08GB\u7EA7\uFF09"}),(0,l.jsx)(e.td,{children:"\u8F83\u5C0F\uFF08MB\u7EA7\uFF09"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u5206\u914D\u65B9\u5F0F"}),(0,l.jsx)(e.td,{children:"\u52A8\u6001\u5206\u914D"}),(0,l.jsx)(e.td,{children:"\u8FDE\u7EED\u5206\u914D"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u56DE\u6536\u65B9\u5F0F"}),(0,l.jsx)(e.td,{children:"GC\u81EA\u52A8\u56DE\u6536"}),(0,l.jsx)(e.td,{children:"\u81EA\u52A8\u5F39\u51FA"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u5F02\u5E38"}),(0,l.jsx)(e.td,{children:"OutOfMemoryError"}),(0,l.jsx)(e.td,{children:"StackOverflowError"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u901F\u5EA6"}),(0,l.jsx)(e.td,{children:"\u8F83\u6162"}),(0,l.jsx)(e.td,{children:"\u5F88\u5FEB"})]})]})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u5185\u5B58\u7ED3\u6784"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5806\u7ED3\u6784\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"Heap\n\u251C\u2500\u2500 Young Generation (\u65B0\u751F\u4EE3)\n\u2502   \u251C\u2500\u2500 Eden (\u4F0A\u7538\u533A)\n\u2502   \u251C\u2500\u2500 Survivor 0 (S0)\n\u2502   \u2514\u2500\u2500 Survivor 1 (S1)\n\u2514\u2500\u2500 Old Generation (\u8001\u5E74\u4EE3)\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6808\u7ED3\u6784\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"Stack\n\u251C\u2500\u2500 Stack Frame 1 (\u6808\u5E271)\n\u2502   \u251C\u2500\u2500 \u5C40\u90E8\u53D8\u91CF\u8868\n\u2502   \u251C\u2500\u2500 \u64CD\u4F5C\u6570\u6808\n\u2502   \u251C\u2500\u2500 \u52A8\u6001\u94FE\u63A5\n\u2502   \u2514\u2500\u2500 \u8FD4\u56DE\u5730\u5740\n\u251C\u2500\u2500 Stack Frame 2 (\u6808\u5E272)\n\u2514\u2500\u2500 ...\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. \u4EE3\u7801\u793A\u4F8B"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'public class HeapStackDemo {\n    // \u9759\u6001\u53D8\u91CF\u5728\u65B9\u6CD5\u533A\n    private static int staticVar = 100;\n    \n    // \u5B9E\u4F8B\u53D8\u91CF\u5728\u5806\n    private int instanceVar = 200;\n    \n    public void method(int param) {\n        // param\u5728\u6808\uFF08\u5C40\u90E8\u53D8\u91CF\u8868\uFF09\n        int localVar = 10;  // \u6808\n        \n        // obj\u5F15\u7528\u5728\u6808\uFF0C\u5BF9\u8C61\u5728\u5806\n        Object obj = new Object();\n        \n        // \u6570\u7EC4\u5F15\u7528\u5728\u6808\uFF0C\u6570\u7EC4\u5BF9\u8C61\u5728\u5806\n        int[] arr = new int[10];\n        \n        // \u5B57\u7B26\u4E32\u5E38\u91CF\u6C60\u5728\u5806\n        String str = "Hello";\n    }\n}\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. \u5185\u5B58\u5206\u914D\u793A\u4F8B"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"public void test() {\n    // 1. \u57FA\u672C\u7C7B\u578B\u5728\u6808\n    int a = 10;\n    double b = 3.14;\n    \n    // 2. \u5BF9\u8C61\u5F15\u7528\u5728\u6808\uFF0C\u5BF9\u8C61\u5728\u5806\n    Person p = new Person();\n    \n    // 3. \u6570\u7EC4\u5728\u5806\n    int[] arr = new int[100];\n    \n    // 4. \u5305\u88C5\u7C7B\u5BF9\u8C61\u5728\u5806\n    Integer i = new Integer(10);\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"5. \u5F02\u5E38\u60C5\u51B5"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5806\u6EA2\u51FA\uFF08OutOfMemoryError\uFF09\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u4E0D\u65AD\u521B\u5EFA\u5BF9\u8C61\nList<byte[]> list = new ArrayList<>();\nwhile (true) {\n    list.add(new byte[1024 * 1024]);  // 1MB\n}\n// java.lang.OutOfMemoryError: Java heap space\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6808\u6EA2\u51FA\uFF08StackOverflowError\uFF09\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u65E0\u9650\u9012\u5F52\npublic void recursion() {\n    recursion();\n}\n// java.lang.StackOverflowError\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"6. JVM\u53C2\u6570\u914D\u7F6E"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u5806\u914D\u7F6E\n-Xms2g          # \u521D\u59CB\u5806\u5927\u5C0F\n-Xmx4g          # \u6700\u5927\u5806\u5927\u5C0F\n-Xmn1g          # \u65B0\u751F\u4EE3\u5927\u5C0F\n\n# \u6808\u914D\u7F6E\n-Xss1m          # \u6BCF\u4E2A\u7EBF\u7A0B\u6808\u5927\u5C0F\n"})}),"\n",(0,l.jsx)(e.h3,{id:"8-\u4EC0\u4E48\u662F-java-\u4E2D\u7684\u76F4\u63A5\u5185\u5B58\u5806\u5916\u5185\u5B58",children:"8. \u4EC0\u4E48\u662F Java \u4E2D\u7684\u76F4\u63A5\u5185\u5B58\uFF08\u5806\u5916\u5185\u5B58\uFF09\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"\u76F4\u63A5\u5185\u5B58\u662FJVM\u5806\u5916\u7684\u5185\u5B58\uFF0C\u4E0D\u53D7JVM\u5806\u5927\u5C0F\u9650\u5236\uFF0C\u4E3B\u8981\u7528\u4E8ENIO\u64CD\u4F5C\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. \u4EC0\u4E48\u662F\u76F4\u63A5\u5185\u5B58"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5B9A\u4E49\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u64CD\u4F5C\u7CFB\u7EDF\u7684\u672C\u5730\u5185\u5B58"}),"\n",(0,l.jsx)(e.li,{children:"\u4E0D\u5728JVM\u5806\u4E2D"}),"\n",(0,l.jsxs)(e.li,{children:["\u901A\u8FC7",(0,l.jsx)(e.code,{children:"DirectByteBuffer"}),"\u8BBF\u95EE"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u4F7F\u7528\u573A\u666F"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"NIO\u64CD\u4F5C\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u5206\u914D\u76F4\u63A5\u5185\u5B58\nByteBuffer directBuffer = ByteBuffer.allocateDirect(1024);\n\n// \u4F20\u7EDF\u5806\u5185\u5B58\nByteBuffer heapBuffer = ByteBuffer.allocate(1024);\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6587\u4EF6IO\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'// \u4F7F\u7528\u76F4\u63A5\u5185\u5B58\u8FDB\u884C\u6587\u4EF6\u8BFB\u5199\nFileChannel channel = new RandomAccessFile("file.txt", "rw").getChannel();\nByteBuffer buffer = ByteBuffer.allocateDirect(1024);\n\n// \u8BFB\u53D6\nchannel.read(buffer);\n\n// \u5199\u5165\nbuffer.flip();\nchannel.write(buffer);\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. \u76F4\u63A5\u5185\u5B58\u4F18\u52BF"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u96F6\u62F7\u8D1D\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u4F20\u7EDFIO\uFF1A\n\u78C1\u76D8 -> \u5185\u6838\u7F13\u51B2\u533A -> JVM\u5806 -> \u5185\u6838\u7F13\u51B2\u533A -> Socket\n(4\u6B21\u62F7\u8D1D)\n\n\u76F4\u63A5\u5185\u5B58\uFF1A\n\u78C1\u76D8 -> \u5185\u6838\u7F13\u51B2\u533A -> \u76F4\u63A5\u5185\u5B58 -> Socket\n(2\u6B21\u62F7\u8D1D)\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u51CF\u5C11GC\u538B\u529B\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4E0D\u5728\u5806\u4E2D\uFF0C\u4E0D\u53C2\u4E0EGC"}),"\n",(0,l.jsx)(e.li,{children:"\u9002\u5408\u5927\u6570\u636E\u91CF\u64CD\u4F5C"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. \u76F4\u63A5\u5185\u5B58\u7BA1\u7406"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5206\u914D\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"public class DirectMemoryDemo {\n    public static void main(String[] args) {\n        // \u5206\u914D100MB\u76F4\u63A5\u5185\u5B58\n        ByteBuffer buffer = ByteBuffer.allocateDirect(100 * 1024 * 1024);\n        \n        // \u4F7F\u7528\n        buffer.putInt(100);\n        \n        // \u91CA\u653E\uFF08\u901A\u8FC7GC\u95F4\u63A5\u91CA\u653E\uFF09\n        buffer = null;\n        System.gc();\n    }\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u624B\u52A8\u91CA\u653E\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u4F7F\u7528Unsafe\u91CA\u653E\npublic static void freeDirectBuffer(ByteBuffer buffer) {\n    if (buffer instanceof DirectBuffer) {\n        ((DirectBuffer) buffer).cleaner().clean();\n    }\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"5. \u5185\u5B58\u6EA2\u51FA"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u76F4\u63A5\u5185\u5B58\u6EA2\u51FA\nList<ByteBuffer> list = new ArrayList<>();\nwhile (true) {\n    ByteBuffer buffer = ByteBuffer.allocateDirect(1024 * 1024);\n    list.add(buffer);\n}\n// java.lang.OutOfMemoryError: Direct buffer memory\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"6. JVM\u53C2\u6570\u914D\u7F6E"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u8BBE\u7F6E\u76F4\u63A5\u5185\u5B58\u6700\u5927\u503C\n-XX:MaxDirectMemorySize=512m\n\n# \u4E0D\u8BBE\u7F6E\u5219\u9ED8\u8BA4\u7B49\u4E8E-Xmx\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"7. \u76D1\u63A7\u76F4\u63A5\u5185\u5B58"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'// \u83B7\u53D6\u76F4\u63A5\u5185\u5B58\u4F7F\u7528\u60C5\u51B5\nimport sun.misc.SharedSecrets;\n\nlong maxDirectMemory = sun.misc.VM.maxDirectMemory();\nlong usedDirectMemory = SharedSecrets.getJavaNioAccess()\n    .getDirectBufferPool().getMemoryUsed();\n\nSystem.out.println("\u6700\u5927\u76F4\u63A5\u5185\u5B58: " + maxDirectMemory);\nSystem.out.println("\u5DF2\u7528\u76F4\u63A5\u5185\u5B58: " + usedDirectMemory);\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"8. \u4F7F\u7528\u5EFA\u8BAE"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u9002\u7528\u573A\u666F\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5927\u6587\u4EF6IO"}),"\n",(0,l.jsx)(e.li,{children:"\u7F51\u7EDC\u901A\u4FE1"}),"\n",(0,l.jsx)(e.li,{children:"\u9891\u7E41IO\u64CD\u4F5C"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6CE8\u610F\u4E8B\u9879\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5206\u914D\u548C\u91CA\u653E\u6210\u672C\u9AD8"}),"\n",(0,l.jsx)(e.li,{children:"\u4E0D\u53D7GC\u7BA1\u7406\uFF0C\u9700\u624B\u52A8\u91CA\u653E"}),"\n",(0,l.jsx)(e.li,{children:"\u53EF\u80FD\u5BFC\u81F4\u5185\u5B58\u6CC4\u6F0F"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"9-\u4EC0\u4E48\u662F-java-\u4E2D\u7684\u5E38\u91CF\u6C60",children:"9. \u4EC0\u4E48\u662F Java \u4E2D\u7684\u5E38\u91CF\u6C60\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"Java\u4E2D\u6709\u4E09\u79CD\u5E38\u91CF\u6C60\uFF1AClass\u6587\u4EF6\u5E38\u91CF\u6C60\u3001\u8FD0\u884C\u65F6\u5E38\u91CF\u6C60\u548C\u5B57\u7B26\u4E32\u5E38\u91CF\u6C60\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. Class\u6587\u4EF6\u5E38\u91CF\u6C60"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4F4D\u7F6E\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:".class\u6587\u4EF6\u4E2D"}),"\n",(0,l.jsx)(e.li,{children:"\u7F16\u8BD1\u671F\u751F\u6210"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5185\u5BB9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5B57\u9762\u91CF\uFF08\u5B57\u7B26\u4E32\u3001final\u5E38\u91CF\uFF09"}),"\n",(0,l.jsx)(e.li,{children:"\u7B26\u53F7\u5F15\u7528\uFF08\u7C7B\u3001\u65B9\u6CD5\u3001\u5B57\u6BB5\uFF09"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u67E5\u770B\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u67E5\u770Bclass\u6587\u4EF6\u5E38\u91CF\u6C60\njavap -v ClassName.class\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u8FD0\u884C\u65F6\u5E38\u91CF\u6C60"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4F4D\u7F6E\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"JDK 7\u4E4B\u524D\uFF1A\u65B9\u6CD5\u533A\uFF08\u6C38\u4E45\u4EE3\uFF09"}),"\n",(0,l.jsx)(e.li,{children:"JDK 7\u53CA\u4E4B\u540E\uFF1A\u5806\u4E2D"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7279\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u7C7B\u52A0\u8F7D\u65F6\u4ECEClass\u6587\u4EF6\u5E38\u91CF\u6C60\u52A0\u8F7D"}),"\n",(0,l.jsx)(e.li,{children:"\u52A8\u6001\u6027\uFF08\u53EF\u8FD0\u884C\u671F\u6DFB\u52A0\uFF09"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. \u5B57\u7B26\u4E32\u5E38\u91CF\u6C60"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4F4D\u7F6E\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"JDK 7\u4E4B\u524D\uFF1A\u6C38\u4E45\u4EE3"}),"\n",(0,l.jsx)(e.li,{children:"JDK 7\u53CA\u4E4B\u540E\uFF1A\u5806\u4E2D"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4F5C\u7528\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u907F\u514D\u91CD\u590D\u521B\u5EFA\u5B57\u7B26\u4E32"}),"\n",(0,l.jsx)(e.li,{children:"\u8282\u7701\u5185\u5B58"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. \u5B57\u7B26\u4E32\u5E38\u91CF\u6C60\u8BE6\u89E3"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u793A\u4F8B1\uFF1A\u5B57\u9762\u91CF"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'String s1 = "hello";  // \u5728\u5E38\u91CF\u6C60\u521B\u5EFA\nString s2 = "hello";  // \u76F4\u63A5\u5F15\u7528\u5E38\u91CF\u6C60\nSystem.out.println(s1 == s2);  // true\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u793A\u4F8B2\uFF1Anew String()"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'String s1 = new String("hello");  // \u5806\u4E2D\u521B\u5EFA\u5BF9\u8C61\nString s2 = "hello";              // \u5E38\u91CF\u6C60\nSystem.out.println(s1 == s2);     // false\n\nString s3 = s1.intern();          // \u8FD4\u56DE\u5E38\u91CF\u6C60\u5F15\u7528\nSystem.out.println(s2 == s3);     // true\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u793A\u4F8B3\uFF1A\u5B57\u7B26\u4E32\u62FC\u63A5"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'// \u7F16\u8BD1\u671F\u786E\u5B9A\uFF0C\u653E\u5165\u5E38\u91CF\u6C60\nString s1 = "hello" + "world";\nString s2 = "helloworld";\nSystem.out.println(s1 == s2);  // true\n\n// \u8FD0\u884C\u671F\u786E\u5B9A\uFF0C\u5728\u5806\u4E2D\u521B\u5EFA\nString s3 = "hello";\nString s4 = s3 + "world";\nString s5 = "helloworld";\nSystem.out.println(s4 == s5);  // false\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"5. intern()\u65B9\u6CD5"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"JDK 6\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'String s1 = new String("hello");\nString s2 = s1.intern();\nString s3 = "hello";\nSystem.out.println(s2 == s3);  // true\n// intern()\u5C06\u5B57\u7B26\u4E32\u590D\u5236\u5230\u6C38\u4E45\u4EE3\u5E38\u91CF\u6C60\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"JDK 7+\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'String s1 = new String("he") + new String("llo");\nString s2 = s1.intern();\nString s3 = "hello";\nSystem.out.println(s1 == s3);  // true\n// intern()\u5C06\u5806\u4E2D\u5B57\u7B26\u4E32\u5F15\u7528\u653E\u5165\u5E38\u91CF\u6C60\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"6. \u5E38\u91CF\u6C60\u5927\u5C0F\u914D\u7F6E"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# JDK 6/7 \u8BBE\u7F6E\u5B57\u7B26\u4E32\u5E38\u91CF\u6C60\u5927\u5C0F\n-XX:StringTableSize=1000003\n\n# JDK 8+ \u9ED8\u8BA460013\n-XX:StringTableSize=1000003\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"7. \u5B9E\u9645\u5E94\u7528"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4F18\u5316\u5185\u5B58\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'// \u5927\u91CF\u91CD\u590D\u5B57\u7B26\u4E32\nList<String> list = new ArrayList<>();\nfor (int i = 0; i < 10000; i++) {\n    // \u4F7F\u7528intern()\u51CF\u5C11\u5185\u5B58\u5360\u7528\n    String s = new String("\u91CD\u590D\u5B57\u7B26\u4E32").intern();\n    list.add(s);\n}\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6CE8\u610F\u4E8B\u9879\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"intern()\u6709\u6027\u80FD\u5F00\u9500"}),"\n",(0,l.jsx)(e.li,{children:"\u5E38\u91CF\u6C60\u5927\u5C0F\u6709\u9650"}),"\n",(0,l.jsx)(e.li,{children:"\u907F\u514Dintern()\u5927\u91CF\u4E0D\u540C\u5B57\u7B26\u4E32"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"10-\u4F60\u4E86\u89E3-java-\u7684\u7C7B\u52A0\u8F7D\u5668\u5417",children:"10. \u4F60\u4E86\u89E3 Java \u7684\u7C7B\u52A0\u8F7D\u5668\u5417\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"\u7C7B\u52A0\u8F7D\u5668\u8D1F\u8D23\u5C06.class\u6587\u4EF6\u52A0\u8F7D\u5230JVM\u4E2D\uFF0CJava\u91C7\u7528\u53CC\u4EB2\u59D4\u6D3E\u6A21\u578B\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. \u7C7B\u52A0\u8F7D\u5668\u5C42\u6B21"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"Bootstrap ClassLoader (\u542F\u52A8\u7C7B\u52A0\u8F7D\u5668)\n        \u2191\nExtension ClassLoader (\u6269\u5C55\u7C7B\u52A0\u8F7D\u5668)\n        \u2191\nApplication ClassLoader (\u5E94\u7528\u7C7B\u52A0\u8F7D\u5668)\n        \u2191\nCustom ClassLoader (\u81EA\u5B9A\u4E49\u7C7B\u52A0\u8F7D\u5668)\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u4E09\u79CD\u7C7B\u52A0\u8F7D\u5668"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Bootstrap ClassLoader\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"C++\u5B9E\u73B0"}),"\n",(0,l.jsx)(e.li,{children:"\u52A0\u8F7D\u6838\u5FC3\u7C7B\u5E93\uFF08rt.jar\uFF09"}),"\n",(0,l.jsxs)(e.li,{children:["\u8DEF\u5F84\uFF1A",(0,l.jsx)(e.code,{children:"$JAVA_HOME/jre/lib"})]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Extension ClassLoader\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Java\u5B9E\u73B0"}),"\n",(0,l.jsx)(e.li,{children:"\u52A0\u8F7D\u6269\u5C55\u7C7B\u5E93"}),"\n",(0,l.jsxs)(e.li,{children:["\u8DEF\u5F84\uFF1A",(0,l.jsx)(e.code,{children:"$JAVA_HOME/jre/lib/ext"})]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Application ClassLoader\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Java\u5B9E\u73B0"}),"\n",(0,l.jsx)(e.li,{children:"\u52A0\u8F7D\u5E94\u7528\u7C7B\u8DEF\u5F84\uFF08classpath\uFF09"}),"\n",(0,l.jsx)(e.li,{children:"\u9ED8\u8BA4\u7684\u7C7B\u52A0\u8F7D\u5668"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. \u53CC\u4EB2\u59D4\u6D3E\u6A21\u578B"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5DE5\u4F5C\u6D41\u7A0B\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"public Class<?> loadClass(String name) {\n    // 1. \u68C0\u67E5\u7C7B\u662F\u5426\u5DF2\u52A0\u8F7D\n    Class<?> c = findLoadedClass(name);\n    if (c == null) {\n        try {\n            // 2. \u59D4\u6D3E\u7ED9\u7236\u52A0\u8F7D\u5668\n            if (parent != null) {\n                c = parent.loadClass(name);\n            } else {\n                // 3. \u7236\u52A0\u8F7D\u5668\u4E3Anull\uFF0C\u59D4\u6D3E\u7ED9Bootstrap\n                c = findBootstrapClassOrNull(name);\n            }\n        } catch (ClassNotFoundException e) {\n            // \u7236\u52A0\u8F7D\u5668\u65E0\u6CD5\u52A0\u8F7D\n        }\n        \n        if (c == null) {\n            // 4. \u7236\u52A0\u8F7D\u5668\u65E0\u6CD5\u52A0\u8F7D\uFF0C\u81EA\u5DF1\u52A0\u8F7D\n            c = findClass(name);\n        }\n    }\n    return c;\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. \u53CC\u4EB2\u59D4\u6D3E\u4F18\u52BF"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u907F\u514D\u91CD\u590D\u52A0\u8F7D\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u7236\u52A0\u8F7D\u5668\u5DF2\u52A0\u8F7D\uFF0C\u5B50\u52A0\u8F7D\u5668\u4E0D\u518D\u52A0\u8F7D"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5B89\u5168\u6027\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u81EA\u5B9A\u4E49java.lang.String\u4F1A\u88AB\u62D2\u7EDD\n// \u56E0\u4E3ABootstrap\u5DF2\u52A0\u8F7D\u6838\u5FC3String\u7C7B\npublic class String {\n    // \u8FD9\u4E2A\u7C7B\u4E0D\u4F1A\u88AB\u52A0\u8F7D\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"5. \u81EA\u5B9A\u4E49\u7C7B\u52A0\u8F7D\u5668"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'public class MyClassLoader extends ClassLoader {\n    \n    private String classPath;\n    \n    public MyClassLoader(String classPath) {\n        this.classPath = classPath;\n    }\n    \n    @Override\n    protected Class<?> findClass(String name) throws ClassNotFoundException {\n        try {\n            // \u8BFB\u53D6class\u6587\u4EF6\n            byte[] classData = loadClassData(name);\n            if (classData == null) {\n                throw new ClassNotFoundException();\n            }\n            // \u8F6C\u6362\u4E3AClass\u5BF9\u8C61\n            return defineClass(name, classData, 0, classData.length);\n        } catch (IOException e) {\n            throw new ClassNotFoundException();\n        }\n    }\n    \n    private byte[] loadClassData(String className) throws IOException {\n        String fileName = classPath + File.separatorChar +\n                         className.replace(\'.\', File.separatorChar) + ".class";\n        \n        try (InputStream is = new FileInputStream(fileName);\n             ByteArrayOutputStream baos = new ByteArrayOutputStream()) {\n            \n            byte[] buffer = new byte[1024];\n            int length;\n            while ((length = is.read(buffer)) != -1) {\n                baos.write(buffer, 0, length);\n            }\n            return baos.toByteArray();\n        }\n    }\n}\n\n// \u4F7F\u7528\nMyClassLoader loader = new MyClassLoader("/custom/path");\nClass<?> clazz = loader.loadClass("com.example.MyClass");\nObject obj = clazz.newInstance();\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"6. \u7834\u574F\u53CC\u4EB2\u59D4\u6D3E"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u573A\u666F1\uFF1AJDBC\u9A71\u52A8\u52A0\u8F7D"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u4F7F\u7528\u7EBF\u7A0B\u4E0A\u4E0B\u6587\u7C7B\u52A0\u8F7D\u5668\nThread.currentThread().setContextClassLoader(customLoader);\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u573A\u666F2\uFF1AOSGi\u6A21\u5757\u5316"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6BCF\u4E2A\u6A21\u5757\u72EC\u7ACB\u7C7B\u52A0\u8F7D\u5668"}),"\n",(0,l.jsx)(e.li,{children:"\u5E73\u7EA7\u59D4\u6D3E\uFF0C\u4E0D\u9075\u5FAA\u53CC\u4EB2\u59D4\u6D3E"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u573A\u666F3\uFF1A\u70ED\u90E8\u7F72"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u91CD\u65B0\u52A0\u8F7D\u7C7B\npublic void reload(String className) {\n    // \u521B\u5EFA\u65B0\u7684\u7C7B\u52A0\u8F7D\u5668\n    MyClassLoader newLoader = new MyClassLoader(classPath);\n    Class<?> clazz = newLoader.loadClass(className);\n    // \u4F7F\u7528\u65B0\u7C7B\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"7. \u7C7B\u52A0\u8F7D\u8FC7\u7A0B"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u52A0\u8F7D -> \u9A8C\u8BC1 -> \u51C6\u5907 -> \u89E3\u6790 -> \u521D\u59CB\u5316\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u52A0\u8F7D\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u8BFB\u53D6.class\u6587\u4EF6"}),"\n",(0,l.jsx)(e.li,{children:"\u751F\u6210Class\u5BF9\u8C61"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u9A8C\u8BC1\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6587\u4EF6\u683C\u5F0F\u9A8C\u8BC1"}),"\n",(0,l.jsx)(e.li,{children:"\u5143\u6570\u636E\u9A8C\u8BC1"}),"\n",(0,l.jsx)(e.li,{children:"\u5B57\u8282\u7801\u9A8C\u8BC1"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u51C6\u5907\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5206\u914D\u5185\u5B58"}),"\n",(0,l.jsx)(e.li,{children:"\u8BBE\u7F6E\u9ED8\u8BA4\u503C"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u89E3\u6790\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u7B26\u53F7\u5F15\u7528\u8F6C\u4E3A\u76F4\u63A5\u5F15\u7528"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u521D\u59CB\u5316\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6267\u884C\u9759\u6001\u4EE3\u7801\u5757"}),"\n",(0,l.jsx)(e.li,{children:"\u521D\u59CB\u5316\u9759\u6001\u53D8\u91CF"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"11-\u4EC0\u4E48\u662F-java-\u4E2D\u7684-jitjust-in-time",children:"11. \u4EC0\u4E48\u662F Java \u4E2D\u7684 JIT\uFF08Just-In-Time\uFF09?"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"JIT\u5373\u65F6\u7F16\u8BD1\u5668\u662FJVM\u7684\u6838\u5FC3\u7EC4\u4EF6\uFF0C\u5728\u8FD0\u884C\u65F6\u5C06\u70ED\u70B9\u5B57\u8282\u7801\u7F16\u8BD1\u6210\u672C\u5730\u673A\u5668\u7801\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. JIT\u7F16\u8BD1\u5668\u7C7B\u578B"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"C1\u7F16\u8BD1\u5668\uFF08Client Compiler\uFF09\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5FEB\u901F\u7F16\u8BD1"}),"\n",(0,l.jsx)(e.li,{children:"\u7B80\u5355\u4F18\u5316"}),"\n",(0,l.jsx)(e.li,{children:"\u9002\u5408\u5BA2\u6237\u7AEF\u5E94\u7528"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"C2\u7F16\u8BD1\u5668\uFF08Server Compiler\uFF09\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6DF1\u5EA6\u4F18\u5316"}),"\n",(0,l.jsx)(e.li,{children:"\u7F16\u8BD1\u65F6\u95F4\u957F"}),"\n",(0,l.jsx)(e.li,{children:"\u9002\u5408\u670D\u52A1\u7AEF\u5E94\u7528"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u5DE5\u4F5C\u539F\u7406"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u6267\u884C\u6D41\u7A0B\npublic void hotMethod() {\n    // \u521D\u59CB\uFF1A\u89E3\u91CA\u6267\u884C\n    // \u8C03\u7528\u6B21\u6570++\n    \n    // \u8FBE\u5230\u9608\u503C\uFF08\u9ED8\u8BA410000\u6B21\uFF09\n    if (invocationCount >= CompileThreshold) {\n        // \u89E6\u53D1JIT\u7F16\u8BD1\n        compileToNativeCode();\n    }\n    \n    // \u7F16\u8BD1\u540E\uFF1A\u76F4\u63A5\u6267\u884C\u673A\u5668\u7801\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. \u70ED\u70B9\u68C0\u6D4B"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u65B9\u6CD5\u8C03\u7528\u8BA1\u6570\u5668\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u7EDF\u8BA1\u65B9\u6CD5\u8C03\u7528\u6B21\u6570\nint invocationCount = 0;\n\npublic void method() {\n    invocationCount++;\n    if (invocationCount > threshold) {\n        // \u89E6\u53D1\u7F16\u8BD1\n    }\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u56DE\u8FB9\u8BA1\u6570\u5668\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u7EDF\u8BA1\u5FAA\u73AF\u6B21\u6570\nfor (int i = 0; i < 100000; i++) {\n    // \u5FAA\u73AF\u4F53\n    // \u56DE\u8FB9\u8BA1\u6570++\n}\n// \u5FAA\u73AF\u70ED\u70B9\u4E5F\u4F1A\u89E6\u53D1\u7F16\u8BD1\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. \u5206\u5C42\u7F16\u8BD1"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"Level 0: \u89E3\u91CA\u6267\u884C\n    \u2193\nLevel 1: C1\u7F16\u8BD1\uFF08\u65E0profiling\uFF09\n    \u2193\nLevel 2: C1\u7F16\u8BD1\uFF08\u6709profiling\uFF09\n    \u2193\nLevel 3: C1\u7F16\u8BD1\uFF08\u5B8C\u5168\u4F18\u5316\uFF09\n    \u2193\nLevel 4: C2\u7F16\u8BD1\uFF08\u6FC0\u8FDB\u4F18\u5316\uFF09\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"5. JIT\u4F18\u5316\u6280\u672F"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u65B9\u6CD5\u5185\u8054\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u4F18\u5316\u524D\npublic int add(int a, int b) {\n    return a + b;\n}\n\npublic void test() {\n    int result = add(1, 2);\n}\n\n// \u4F18\u5316\u540E\uFF08\u5185\u8054\uFF09\npublic void test() {\n    int result = 1 + 2;  // \u76F4\u63A5\u5185\u8054\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u9003\u9038\u5206\u6790\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u5BF9\u8C61\u672A\u9003\u9038\uFF0C\u53EF\u5728\u6808\u4E0A\u5206\u914D\npublic void method() {\n    Point p = new Point(1, 2);\n    int x = p.getX();  // \u5BF9\u8C61\u4E0D\u4F1A\u9003\u9038\u51FA\u65B9\u6CD5\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5FAA\u73AF\u5C55\u5F00\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u4F18\u5316\u524D\nfor (int i = 0; i < 4; i++) {\n    sum += arr[i];\n}\n\n// \u4F18\u5316\u540E\nsum += arr[0];\nsum += arr[1];\nsum += arr[2];\nsum += arr[3];\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"6. JVM\u53C2\u6570"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u8BBE\u7F6E\u7F16\u8BD1\u9608\u503C\n-XX:CompileThreshold=10000\n\n# \u7981\u7528JIT\n-Xint\n\n# \u53EA\u7528\u7F16\u8BD1\u6A21\u5F0F\n-Xcomp\n\n# \u6253\u5370\u7F16\u8BD1\u4FE1\u606F\n-XX:+PrintCompilation\n\n# \u6253\u5370\u5185\u8054\u4FE1\u606F\n-XX:+PrintInlining\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"7. \u6027\u80FD\u63D0\u5347"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'// \u6D4B\u8BD5JIT\u6548\u679C\npublic class JITTest {\n    public static void main(String[] args) {\n        long start = System.currentTimeMillis();\n        \n        for (int i = 0; i < 100000; i++) {\n            compute();  // \u524D10000\u6B21\u6162\uFF0C\u540E\u7EED\u5FEB\n        }\n        \n        long end = System.currentTimeMillis();\n        System.out.println("\u8017\u65F6: " + (end - start) + "ms");\n    }\n    \n    static int compute() {\n        int sum = 0;\n        for (int i = 0; i < 1000; i++) {\n            sum += i;\n        }\n        return sum;\n    }\n}\n'})}),"\n",(0,l.jsx)(e.h3,{id:"12-jit-\u7F16\u8BD1\u540E\u7684\u4EE3\u7801\u5B58\u5728\u54EA",children:"12. JIT \u7F16\u8BD1\u540E\u7684\u4EE3\u7801\u5B58\u5728\u54EA\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsxs)(e.p,{children:["JIT\u7F16\u8BD1\u540E\u7684\u672C\u5730\u4EE3\u7801\u5B58\u50A8\u5728",(0,l.jsx)(e.strong,{children:"CodeCache"}),"\uFF08\u4EE3\u7801\u7F13\u5B58\u533A\uFF09\u4E2D\u3002"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. CodeCache\u4F4D\u7F6E"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5C5E\u4E8E\u975E\u5806\u5185\u5B58"}),"\n",(0,l.jsx)(e.li,{children:"\u72EC\u7ACB\u4E8EJava\u5806"}),"\n",(0,l.jsx)(e.li,{children:"\u4F7F\u7528\u672C\u5730\u5185\u5B58"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. CodeCache\u7ED3\u6784"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"CodeCache\n\u251C\u2500\u2500 Non-nmethods (\u975E\u65B9\u6CD5\u4EE3\u7801)\n\u2502   \u2514\u2500\u2500 JVM\u5185\u90E8\u4EE3\u7801\n\u251C\u2500\u2500 Profiled nmethods (\u5E26profiling\u7684\u4EE3\u7801)\n\u2502   \u2514\u2500\u2500 C1\u7F16\u8BD1\u7684\u4EE3\u7801\n\u2514\u2500\u2500 Non-profiled nmethods (\u4E0D\u5E26profiling\u7684\u4EE3\u7801)\n    \u2514\u2500\u2500 C2\u7F16\u8BD1\u7684\u4EE3\u7801\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. CodeCache\u5927\u5C0F\u914D\u7F6E"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u8BBE\u7F6ECodeCache\u5927\u5C0F\n-XX:ReservedCodeCacheSize=256m\n\n# \u521D\u59CB\u5927\u5C0F\n-XX:InitialCodeCacheSize=128m\n\n# \u6253\u5370CodeCache\u4F7F\u7528\u60C5\u51B5\n-XX:+PrintCodeCache\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. \u67E5\u770BCodeCache\u4F7F\u7528"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'// \u8FD0\u884C\u65F6\u67E5\u770B\nimport sun.management.ManagementFactoryHelper;\n\nMemoryPoolMXBean codeCache = ManagementFactoryHelper\n    .getMemoryPools()\n    .stream()\n    .filter(pool -> pool.getName().contains("Code Cache"))\n    .findFirst()\n    .orElse(null);\n\nif (codeCache != null) {\n    MemoryUsage usage = codeCache.getUsage();\n    System.out.println("CodeCache\u5DF2\u7528: " + usage.getUsed() / 1024 / 1024 + "MB");\n    System.out.println("CodeCache\u6700\u5927: " + usage.getMax() / 1024 / 1024 + "MB");\n}\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"5. CodeCache\u6EE1\u7684\u5F71\u54CD"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// CodeCache\u6EE1\u65F6\u7684\u8B66\u544A\nJava HotSpot(TM) 64-Bit Server VM warning: \nCodeCache is full. Compiler has been disabled.\n\n// \u540E\u679C\uFF1A\n// 1. JIT\u7F16\u8BD1\u505C\u6B62\n// 2. \u53EA\u80FD\u89E3\u91CA\u6267\u884C\n// 3. \u6027\u80FD\u4E25\u91CD\u4E0B\u964D\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"6. \u4EE3\u7801\u6DD8\u6C70\u673A\u5236"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u4E0D\u5E38\u7528\u7684\u7F16\u8BD1\u4EE3\u7801\u4F1A\u88AB\u6DD8\u6C70\n// \u91CA\u653ECodeCache\u7A7A\u95F4\n// \u9700\u8981\u65F6\u91CD\u65B0\u7F16\u8BD1\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"7. \u76D1\u63A7CodeCache"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u4F7F\u7528jconsole\u67E5\u770B\n# Memory -> Code Cache\n\n# \u4F7F\u7528jstat\njstat -compiler <pid>\n\n# \u8F93\u51FA\u7F16\u8BD1\u7EDF\u8BA1\nCompiled  Failed  Invalid  Time    FailedType  FailedMethod\n1234      0       0        12.34   0\n"})}),"\n",(0,l.jsx)(e.h3,{id:"13-\u4EC0\u4E48\u662F-java-\u7684-aotahead-of-time",children:"13. \u4EC0\u4E48\u662F Java \u7684 AOT\uFF08Ahead-Of-Time\uFF09\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"AOT\u662F\u63D0\u524D\u7F16\u8BD1\u6280\u672F\uFF0C\u5728\u7A0B\u5E8F\u8FD0\u884C\u524D\u5C06\u5B57\u8282\u7801\u7F16\u8BD1\u6210\u672C\u5730\u673A\u5668\u7801\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. AOT vs JIT"})}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u7279\u6027"}),(0,l.jsx)(e.th,{children:"AOT"}),(0,l.jsx)(e.th,{children:"JIT"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u7F16\u8BD1\u65F6\u673A"}),(0,l.jsx)(e.td,{children:"\u8FD0\u884C\u524D"}),(0,l.jsx)(e.td,{children:"\u8FD0\u884C\u65F6"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u542F\u52A8\u901F\u5EA6"}),(0,l.jsx)(e.td,{children:"\u5FEB"}),(0,l.jsx)(e.td,{children:"\u6162"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u5CF0\u503C\u6027\u80FD"}),(0,l.jsx)(e.td,{children:"\u4E2D\u7B49"}),(0,l.jsx)(e.td,{children:"\u9AD8"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u5185\u5B58\u5360\u7528"}),(0,l.jsx)(e.td,{children:"\u5C0F"}),(0,l.jsx)(e.td,{children:"\u5927"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u4F18\u5316\u7A0B\u5EA6"}),(0,l.jsx)(e.td,{children:"\u9759\u6001\u4F18\u5316"}),(0,l.jsx)(e.td,{children:"\u52A8\u6001\u4F18\u5316"})]})]})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. Java AOT\u5B9E\u73B0"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"JDK 9\u5F15\u5165\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u4F7F\u7528jaotc\u7F16\u8BD1\njaotc --output libHelloWorld.so HelloWorld.class\n\n# \u8FD0\u884C\u65F6\u52A0\u8F7D\njava -XX:AOTLibrary=./libHelloWorld.so HelloWorld\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"GraalVM Native Image\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u7F16\u8BD1\u6210\u539F\u751F\u53EF\u6267\u884C\u6587\u4EF6\nnative-image -jar application.jar\n\n# \u751F\u6210\u53EF\u6267\u884C\u6587\u4EF6\n./application\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. AOT\u4F18\u52BF"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5FEB\u901F\u542F\u52A8\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// JIT\u542F\u52A8\u65F6\u95F4\uFF1A2-3\u79D2\n// AOT\u542F\u52A8\u65F6\u95F4\uFF1A0.1\u79D2\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4F4E\u5185\u5B58\u5360\u7528\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u65E0\u9700JIT\u7F16\u8BD1\u5668"}),"\n",(0,l.jsx)(e.li,{children:"\u65E0\u9700CodeCache"}),"\n",(0,l.jsx)(e.li,{children:"\u9002\u5408\u5BB9\u5668\u73AF\u5883"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. AOT\u52A3\u52BF"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6027\u80FD\u4E0A\u9650\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u7F3A\u5C11\u8FD0\u884C\u65F6\u4FE1\u606F"}),"\n",(0,l.jsx)(e.li,{children:"\u65E0\u6CD5\u505A\u6FC0\u8FDB\u4F18\u5316"}),"\n",(0,l.jsx)(e.li,{children:"\u5CF0\u503C\u6027\u80FD\u4F4E\u4E8EJIT"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6587\u4EF6\u4F53\u79EF\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5305\u542B\u6240\u6709\u4F9D\u8D56"}),"\n",(0,l.jsx)(e.li,{children:"\u53EF\u6267\u884C\u6587\u4EF6\u8F83\u5927"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"5. \u4F7F\u7528\u573A\u666F"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u9002\u5408AOT\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5FAE\u670D\u52A1"}),"\n",(0,l.jsx)(e.li,{children:"Serverless"}),"\n",(0,l.jsx)(e.li,{children:"\u5BB9\u5668\u5E94\u7528"}),"\n",(0,l.jsx)(e.li,{children:"\u547D\u4EE4\u884C\u5DE5\u5177"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u9002\u5408JIT\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u957F\u671F\u8FD0\u884C\u7684\u670D\u52A1"}),"\n",(0,l.jsx)(e.li,{children:"\u9700\u8981\u5CF0\u503C\u6027\u80FD"}),"\n",(0,l.jsx)(e.li,{children:"\u590D\u6742\u4E1A\u52A1\u903B\u8F91"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"6. GraalVM\u793A\u4F8B"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u5B89\u88C5GraalVM\nsdk install java 21.0.0.r11-grl\n\n# \u7F16\u8BD1Spring Boot\u5E94\u7528\n./mvnw package -Pnative\n\n# \u751F\u6210\u539F\u751F\u955C\u50CF\nnative-image -jar target/app.jar\n\n# \u8FD0\u884C\n./app\n# \u542F\u52A8\u65F6\u95F4\uFF1A\u5C0F\u4E8E100ms\n# \u5185\u5B58\u5360\u7528\uFF1A\u5C0F\u4E8E50MB\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"7. \u914D\u7F6E\u53C2\u6570"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u542F\u7528AOT\n-XX:+UseAOT\n\n# \u6307\u5B9AAOT\u5E93\n-XX:AOTLibrary=./lib.so\n\n# \u6253\u5370AOT\u4FE1\u606F\n-XX:+PrintAOT\n"})}),"\n",(0,l.jsx)(e.h3,{id:"14-\u4F60\u4E86\u89E3-java-\u7684\u9003\u9038\u5206\u6790\u5417",children:"14. \u4F60\u4E86\u89E3 Java \u7684\u9003\u9038\u5206\u6790\u5417\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"\u9003\u9038\u5206\u6790\u662FJVM\u7684\u4E00\u79CD\u4F18\u5316\u6280\u672F\uFF0C\u5206\u6790\u5BF9\u8C61\u7684\u4F5C\u7528\u57DF\uFF0C\u8FDB\u884C\u6808\u4E0A\u5206\u914D\u3001\u6807\u91CF\u66FF\u6362\u7B49\u4F18\u5316\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. \u4EC0\u4E48\u662F\u9003\u9038"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5BF9\u8C61\u9003\u9038\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5BF9\u8C61\u5728\u65B9\u6CD5\u5916\u88AB\u5F15\u7528"}),"\n",(0,l.jsx)(e.li,{children:"\u5BF9\u8C61\u88AB\u5916\u90E8\u8BBF\u95EE"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u672A\u9003\u9038\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5BF9\u8C61\u53EA\u5728\u65B9\u6CD5\u5185\u4F7F\u7528"}),"\n",(0,l.jsx)(e.li,{children:"\u4E0D\u4F1A\u88AB\u5916\u90E8\u8BBF\u95EE"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u9003\u9038\u7C7B\u578B"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u65B9\u6CD5\u9003\u9038\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u5BF9\u8C61\u9003\u9038\u51FA\u65B9\u6CD5\npublic User createUser() {\n    User user = new User();\n    return user;  // \u9003\u9038\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7EBF\u7A0B\u9003\u9038\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u5BF9\u8C61\u88AB\u5176\u4ED6\u7EBF\u7A0B\u8BBF\u95EE\nprivate User user;\n\npublic void method() {\n    this.user = new User();  // \u7EBF\u7A0B\u9003\u9038\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u672A\u9003\u9038\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'// \u5BF9\u8C61\u4E0D\u9003\u9038\npublic void method() {\n    User user = new User();\n    user.setName("Tom");\n    System.out.println(user.getName());\n    // user\u4E0D\u4F1A\u9003\u9038\u51FA\u65B9\u6CD5\n}\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. \u9003\u9038\u5206\u6790\u4F18\u5316"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6808\u4E0A\u5206\u914D\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u4F18\u5316\u524D\uFF1A\u5BF9\u8C61\u5728\u5806\u4E0A\u5206\u914D\npublic void method() {\n    Point p = new Point(1, 2);  // \u5806\u5206\u914D\n    int x = p.getX();\n}\n\n// \u4F18\u5316\u540E\uFF1A\u5BF9\u8C61\u5728\u6808\u4E0A\u5206\u914D\npublic void method() {\n    // \u6808\u4E0A\u5206\u914D\uFF0C\u65B9\u6CD5\u7ED3\u675F\u81EA\u52A8\u56DE\u6536\n    // \u65E0\u9700GC\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6807\u91CF\u66FF\u6362\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u4F18\u5316\u524D\npublic void method() {\n    Point p = new Point(1, 2);\n    int sum = p.x + p.y;\n}\n\n// \u4F18\u5316\u540E\uFF1A\u5BF9\u8C61\u88AB\u62C6\u89E3\u4E3A\u6807\u91CF\npublic void method() {\n    int x = 1;\n    int y = 2;\n    int sum = x + y;  // \u76F4\u63A5\u4F7F\u7528\u6807\u91CF\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u9501\u6D88\u9664\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'// \u4F18\u5316\u524D\npublic void method() {\n    StringBuffer sb = new StringBuffer();\n    sb.append("a");  // \u5185\u90E8\u6709synchronized\n    sb.append("b");\n}\n\n// \u4F18\u5316\u540E\uFF1Asb\u672A\u9003\u9038\uFF0C\u6D88\u9664\u9501\npublic void method() {\n    StringBuffer sb = new StringBuffer();\n    sb.append("a");  // \u53BB\u9664synchronized\n    sb.append("b");\n}\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. \u6027\u80FD\u5BF9\u6BD4"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'public class EscapeAnalysisTest {\n    \n    // \u672A\u9003\u9038\uFF1A\u6808\u4E0A\u5206\u914D\n    public void noEscape() {\n        Point p = new Point(1, 2);\n        int sum = p.x + p.y;\n    }\n    \n    // \u9003\u9038\uFF1A\u5806\u4E0A\u5206\u914D\n    public Point escape() {\n        Point p = new Point(1, 2);\n        return p;\n    }\n    \n    public static void main(String[] args) {\n        long start = System.currentTimeMillis();\n        \n        for (int i = 0; i < 10000000; i++) {\n            noEscape();  // \u5FEB\uFF0C\u65E0GC\u538B\u529B\n        }\n        \n        long end = System.currentTimeMillis();\n        System.out.println("\u8017\u65F6: " + (end - start) + "ms");\n    }\n}\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"5. JVM\u53C2\u6570"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u542F\u7528\u9003\u9038\u5206\u6790\uFF08\u9ED8\u8BA4\u5F00\u542F\uFF09\n-XX:+DoEscapeAnalysis\n\n# \u542F\u7528\u6807\u91CF\u66FF\u6362\n-XX:+EliminateAllocations\n\n# \u542F\u7528\u9501\u6D88\u9664\n-XX:+EliminateLocks\n\n# \u6253\u5370\u9003\u9038\u5206\u6790\u7ED3\u679C\n-XX:+PrintEscapeAnalysis\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"6. \u5B9E\u9645\u5E94\u7528"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u4F18\u5316\u5EFA\u8BAE\uFF1A\u5C3D\u91CF\u8BA9\u5BF9\u8C61\u4E0D\u9003\u9038\npublic class Service {\n    \n    // \u597D\uFF1A\u5BF9\u8C61\u4E0D\u9003\u9038\n    public void process() {\n        Data data = new Data();\n        data.calculate();\n        // data\u4E0D\u9003\u9038\uFF0C\u53EF\u6808\u4E0A\u5206\u914D\n    }\n    \n    // \u5DEE\uFF1A\u5BF9\u8C61\u9003\u9038\n    private Data data;\n    public void process2() {\n        this.data = new Data();  // \u9003\u9038\n    }\n}\n"})}),"\n",(0,l.jsx)(e.h3,{id:"15-java-\u4E2D\u7684\u5F3A\u5F15\u7528\u8F6F\u5F15\u7528\u5F31\u5F15\u7528\u548C\u865A\u5F15\u7528\u5206\u522B\u662F\u4EC0\u4E48",children:"15. Java \u4E2D\u7684\u5F3A\u5F15\u7528\u3001\u8F6F\u5F15\u7528\u3001\u5F31\u5F15\u7528\u548C\u865A\u5F15\u7528\u5206\u522B\u662F\u4EC0\u4E48\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"Java\u63D0\u4F9B\u56DB\u79CD\u5F15\u7528\u7C7B\u578B\uFF0C\u7528\u4E8E\u4E0D\u540C\u7684\u5185\u5B58\u7BA1\u7406\u573A\u666F\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. \u5F3A\u5F15\u7528\uFF08Strong Reference\uFF09"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5B9A\u4E49\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6700\u5E38\u89C1\u7684\u5F15\u7528"}),"\n",(0,l.jsx)(e.li,{children:"\u53EA\u8981\u5F3A\u5F15\u7528\u5B58\u5728\uFF0C\u5BF9\u8C61\u4E0D\u4F1A\u88AB\u56DE\u6536"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u793A\u4F8B\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u5F3A\u5F15\u7528\nObject obj = new Object();\n\n// \u53EA\u8981obj\u5B58\u5728\uFF0C\u5BF9\u8C61\u4E0D\u4F1A\u88ABGC\n// \u5373\u4F7F\u5185\u5B58\u4E0D\u8DB3\u4E5F\u4E0D\u4F1A\u56DE\u6536\n// \u9664\u975Eobj = null\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7279\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5B81\u53EFOOM\u4E5F\u4E0D\u56DE\u6536"}),"\n",(0,l.jsx)(e.li,{children:"\u6700\u5E38\u7528\u7684\u5F15\u7528\u7C7B\u578B"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u8F6F\u5F15\u7528\uFF08Soft Reference\uFF09"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5B9A\u4E49\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5185\u5B58\u4E0D\u8DB3\u65F6\u624D\u56DE\u6536"}),"\n",(0,l.jsx)(e.li,{children:"\u9002\u5408\u7F13\u5B58\u573A\u666F"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u793A\u4F8B\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u521B\u5EFA\u8F6F\u5F15\u7528\nSoftReference<byte[]> softRef = new SoftReference<>(new byte[1024 * 1024]);\n\n// \u83B7\u53D6\u5BF9\u8C61\nbyte[] data = softRef.get();\nif (data != null) {\n    // \u5BF9\u8C61\u8FD8\u5728\n} else {\n    // \u5BF9\u8C61\u5DF2\u88AB\u56DE\u6536\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5E94\u7528\u573A\u666F\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u56FE\u7247\u7F13\u5B58\npublic class ImageCache {\n    private Map<String, SoftReference<Image>> cache = new HashMap<>();\n    \n    public Image getImage(String path) {\n        SoftReference<Image> ref = cache.get(path);\n        \n        if (ref != null) {\n            Image img = ref.get();\n            if (img != null) {\n                return img;  // \u7F13\u5B58\u547D\u4E2D\n            }\n        }\n        \n        // \u7F13\u5B58\u672A\u547D\u4E2D\uFF0C\u52A0\u8F7D\u56FE\u7247\n        Image img = loadImage(path);\n        cache.put(path, new SoftReference<>(img));\n        return img;\n    }\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. \u5F31\u5F15\u7528\uFF08Weak Reference\uFF09"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5B9A\u4E49\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"GC\u65F6\u5FC5\u5B9A\u56DE\u6536"}),"\n",(0,l.jsx)(e.li,{children:"\u751F\u547D\u5468\u671F\u66F4\u77ED"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u793A\u4F8B\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u521B\u5EFA\u5F31\u5F15\u7528\nWeakReference<Object> weakRef = new WeakReference<>(new Object());\n\n// \u83B7\u53D6\u5BF9\u8C61\nObject obj = weakRef.get();\nif (obj != null) {\n    // \u5BF9\u8C61\u8FD8\u5728\n}\n\n// GC\u540E\nSystem.gc();\nobj = weakRef.get();  // null\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5E94\u7528\u573A\u666F\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// ThreadLocal\u5B9E\u73B0\npublic class ThreadLocal<T> {\n    static class Entry extends WeakReference<ThreadLocal<?>> {\n        Object value;\n        \n        Entry(ThreadLocal<?> k, Object v) {\n            super(k);  // key\u662F\u5F31\u5F15\u7528\n            value = v;\n        }\n    }\n}\n\n// WeakHashMap\nWeakHashMap<Key, Value> map = new WeakHashMap<>();\nKey key = new Key();\nmap.put(key, value);\n\nkey = null;  // \u53BB\u9664\u5F3A\u5F15\u7528\nSystem.gc();  // GC\u540E\uFF0Cmap\u4E2D\u7684entry\u88AB\u81EA\u52A8\u79FB\u9664\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. \u865A\u5F15\u7528\uFF08Phantom Reference\uFF09"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5B9A\u4E49\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6700\u5F31\u7684\u5F15\u7528"}),"\n",(0,l.jsx)(e.li,{children:"\u65E0\u6CD5\u901A\u8FC7get()\u83B7\u53D6\u5BF9\u8C61"}),"\n",(0,l.jsx)(e.li,{children:"\u7528\u4E8E\u8DDF\u8E2A\u5BF9\u8C61\u56DE\u6536"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u793A\u4F8B\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u521B\u5EFA\u865A\u5F15\u7528\uFF08\u5FC5\u987B\u914D\u5408\u5F15\u7528\u961F\u5217\uFF09\nReferenceQueue<Object> queue = new ReferenceQueue<>();\nPhantomReference<Object> phantomRef = new PhantomReference<>(\n    new Object(), queue\n);\n\n// get()\u6C38\u8FDC\u8FD4\u56DEnull\nObject obj = phantomRef.get();  // null\n\n// \u5BF9\u8C61\u88AB\u56DE\u6536\u65F6\uFF0C\u865A\u5F15\u7528\u4F1A\u8FDB\u5165\u961F\u5217\nReference<?> ref = queue.poll();\nif (ref != null) {\n    // \u5BF9\u8C61\u5DF2\u88AB\u56DE\u6536\uFF0C\u6267\u884C\u6E05\u7406\u5DE5\u4F5C\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5E94\u7528\u573A\u666F\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'// \u76D1\u63A7\u5BF9\u8C61\u56DE\u6536\npublic class ResourceMonitor {\n    private ReferenceQueue<Resource> queue = new ReferenceQueue<>();\n    \n    public void monitor(Resource resource) {\n        PhantomReference<Resource> ref = \n            new PhantomReference<>(resource, queue);\n        \n        // \u542F\u52A8\u7EBF\u7A0B\u76D1\u63A7\n        new Thread(() -> {\n            try {\n                Reference<?> r = queue.remove();  // \u963B\u585E\u7B49\u5F85\n                System.out.println("\u8D44\u6E90\u5DF2\u88AB\u56DE\u6536");\n                // \u6267\u884C\u6E05\u7406\u5DE5\u4F5C\n                cleanup();\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }).start();\n    }\n}\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"5. \u5F15\u7528\u5BF9\u6BD4"})}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u5F15\u7528\u7C7B\u578B"}),(0,l.jsx)(e.th,{children:"\u56DE\u6536\u65F6\u673A"}),(0,l.jsx)(e.th,{children:"\u7528\u9014"}),(0,l.jsx)(e.th,{children:"get()\u8FD4\u56DE"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u5F3A\u5F15\u7528"}),(0,l.jsx)(e.td,{children:"\u6C38\u4E0D\u56DE\u6536"}),(0,l.jsx)(e.td,{children:"\u666E\u901A\u5BF9\u8C61"}),(0,l.jsx)(e.td,{children:"\u5BF9\u8C61"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u8F6F\u5F15\u7528"}),(0,l.jsx)(e.td,{children:"\u5185\u5B58\u4E0D\u8DB3"}),(0,l.jsx)(e.td,{children:"\u7F13\u5B58"}),(0,l.jsx)(e.td,{children:"\u5BF9\u8C61\u6216null"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u5F31\u5F15\u7528"}),(0,l.jsx)(e.td,{children:"GC\u65F6"}),(0,l.jsx)(e.td,{children:"\u7F13\u5B58\u3001\u9632\u6B62\u5185\u5B58\u6CC4\u6F0F"}),(0,l.jsx)(e.td,{children:"\u5BF9\u8C61\u6216null"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u865A\u5F15\u7528"}),(0,l.jsx)(e.td,{children:"GC\u65F6"}),(0,l.jsx)(e.td,{children:"\u8DDF\u8E2A\u56DE\u6536"}),(0,l.jsx)(e.td,{children:"\u6C38\u8FDCnull"})]})]})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"6. \u5F15\u7528\u961F\u5217"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'// \u914D\u5408\u5F15\u7528\u961F\u5217\u4F7F\u7528\nReferenceQueue<Object> queue = new ReferenceQueue<>();\n\nSoftReference<Object> softRef = new SoftReference<>(new Object(), queue);\nWeakReference<Object> weakRef = new WeakReference<>(new Object(), queue);\n\n// \u5BF9\u8C61\u88AB\u56DE\u6536\u540E\uFF0C\u5F15\u7528\u4F1A\u8FDB\u5165\u961F\u5217\nSystem.gc();\n\nReference<?> ref = queue.poll();\nif (ref != null) {\n    // \u6267\u884C\u6E05\u7406\u5DE5\u4F5C\n    System.out.println("\u5BF9\u8C61\u5DF2\u88AB\u56DE\u6536");\n}\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"7. \u5B9E\u9645\u5E94\u7528\u5EFA\u8BAE"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// 1. \u666E\u901A\u5BF9\u8C61\uFF1A\u4F7F\u7528\u5F3A\u5F15\u7528\nObject obj = new Object();\n\n// 2. \u7F13\u5B58\uFF1A\u4F7F\u7528\u8F6F\u5F15\u7528\nSoftReference<Cache> cache = new SoftReference<>(new Cache());\n\n// 3. \u9632\u6B62\u5185\u5B58\u6CC4\u6F0F\uFF1A\u4F7F\u7528\u5F31\u5F15\u7528\nWeakHashMap<Key, Value> map = new WeakHashMap<>();\n\n// 4. \u76D1\u63A7\u56DE\u6536\uFF1A\u4F7F\u7528\u865A\u5F15\u7528\nPhantomReference<Resource> ref = new PhantomReference<>(resource, queue);\n"})}),"\n",(0,l.jsx)(e.h3,{id:"16-java-\u4E2D\u5E38\u89C1\u7684\u5783\u573E\u6536\u96C6\u5668\u6709\u54EA\u4E9B",children:"16. Java \u4E2D\u5E38\u89C1\u7684\u5783\u573E\u6536\u96C6\u5668\u6709\u54EA\u4E9B\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"Java\u63D0\u4F9B\u591A\u79CD\u5783\u573E\u6536\u96C6\u5668\uFF0C\u9002\u7528\u4E8E\u4E0D\u540C\u573A\u666F\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. Serial\u6536\u96C6\u5668"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7279\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5355\u7EBF\u7A0B\u6536\u96C6"}),"\n",(0,l.jsx)(e.li,{children:"\u7B80\u5355\u9AD8\u6548"}),"\n",(0,l.jsx)(e.li,{children:"\u9002\u5408\u5355\u6838CPU"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4F7F\u7528\u573A\u666F\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5BA2\u6237\u7AEF\u5E94\u7528"}),"\n",(0,l.jsx)(e.li,{children:"\u5C0F\u5185\u5B58\u73AF\u5883"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u53C2\u6570\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u65B0\u751F\u4EE3\u4F7F\u7528Serial\n-XX:+UseSerialGC\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. ParNew\u6536\u96C6\u5668"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7279\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Serial\u7684\u591A\u7EBF\u7A0B\u7248\u672C"}),"\n",(0,l.jsx)(e.li,{children:"\u65B0\u751F\u4EE3\u6536\u96C6\u5668"}),"\n",(0,l.jsx)(e.li,{children:"\u914D\u5408CMS\u4F7F\u7528"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u53C2\u6570\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"-XX:+UseParNewGC\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. Parallel Scavenge\u6536\u96C6\u5668"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7279\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5173\u6CE8\u541E\u5410\u91CF"}),"\n",(0,l.jsx)(e.li,{children:"\u81EA\u9002\u5E94\u8C03\u8282"}),"\n",(0,l.jsx)(e.li,{children:"\u9002\u5408\u540E\u53F0\u8BA1\u7B97"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u53C2\u6570\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"-XX:+UseParallelGC\n# \u8BBE\u7F6E\u541E\u5410\u91CF\u76EE\u6807\n-XX:GCTimeRatio=99\n# \u6700\u5927\u6682\u505C\u65F6\u95F4\n-XX:MaxGCPauseMillis=100\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. CMS\u6536\u96C6\u5668\uFF08Concurrent Mark Sweep\uFF09"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7279\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5E76\u53D1\u6536\u96C6"}),"\n",(0,l.jsx)(e.li,{children:"\u4F4E\u505C\u987F"}),"\n",(0,l.jsx)(e.li,{children:"\u9002\u5408\u54CD\u5E94\u65F6\u95F4\u654F\u611F\u5E94\u7528"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u9636\u6BB5\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"1. \u521D\u59CB\u6807\u8BB0\uFF08STW\uFF09\n2. \u5E76\u53D1\u6807\u8BB0\n3. \u91CD\u65B0\u6807\u8BB0\uFF08STW\uFF09\n4. \u5E76\u53D1\u6E05\u9664\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u53C2\u6570\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"-XX:+UseConcMarkSweepGC\n# \u89E6\u53D1GC\u7684\u5806\u4F7F\u7528\u7387\n-XX:CMSInitiatingOccupancyFraction=70\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7F3A\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4EA7\u751F\u5185\u5B58\u788E\u7247"}),"\n",(0,l.jsx)(e.li,{children:"\u5E76\u53D1\u6A21\u5F0F\u5931\u8D25"}),"\n",(0,l.jsx)(e.li,{children:"CPU\u8D44\u6E90\u654F\u611F"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"5. G1\u6536\u96C6\u5668\uFF08Garbage First\uFF09"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7279\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u9762\u5411\u670D\u52A1\u7AEF"}),"\n",(0,l.jsx)(e.li,{children:"\u53EF\u9884\u6D4B\u505C\u987F"}),"\n",(0,l.jsx)(e.li,{children:"\u6574\u5806\u6536\u96C6"}),"\n",(0,l.jsx)(e.li,{children:"\u65E0\u5185\u5B58\u788E\u7247"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5185\u5B58\u5E03\u5C40\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"Heap\u5212\u5206\u4E3A\u591A\u4E2ARegion\n\u6BCF\u4E2ARegion\u53EF\u4EE5\u662FEden\u3001Survivor\u6216Old\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u53C2\u6570\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"-XX:+UseG1GC\n# \u671F\u671B\u505C\u987F\u65F6\u95F4\n-XX:MaxGCPauseMillis=200\n# \u5806\u5927\u5C0F\n-Xmx4g\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"6. ZGC\u6536\u96C6\u5668"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7279\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u8D85\u4F4E\u5EF6\u8FDF\uFF08\u5C0F\u4E8E10ms\uFF09"}),"\n",(0,l.jsx)(e.li,{children:"\u652F\u6301TB\u7EA7\u5806"}),"\n",(0,l.jsx)(e.li,{children:"\u5E76\u53D1\u6536\u96C6"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u53C2\u6570\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"-XX:+UseZGC\n-Xmx16g\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"7. Shenandoah GC"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7279\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4F4E\u505C\u987F"}),"\n",(0,l.jsx)(e.li,{children:"\u5E76\u53D1\u6574\u7406"}),"\n",(0,l.jsx)(e.li,{children:"\u4E0E\u5806\u5927\u5C0F\u65E0\u5173\u7684\u505C\u987F\u65F6\u95F4"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"8. \u6536\u96C6\u5668\u7EC4\u5408"})}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u65B0\u751F\u4EE3"}),(0,l.jsx)(e.th,{children:"\u8001\u5E74\u4EE3"}),(0,l.jsx)(e.th,{children:"\u8BF4\u660E"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Serial"}),(0,l.jsx)(e.td,{children:"Serial Old"}),(0,l.jsx)(e.td,{children:"\u5355\u7EBF\u7A0B"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"ParNew"}),(0,l.jsx)(e.td,{children:"CMS"}),(0,l.jsx)(e.td,{children:"\u4F4E\u5EF6\u8FDF"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Parallel Scavenge"}),(0,l.jsx)(e.td,{children:"Parallel Old"}),(0,l.jsx)(e.td,{children:"\u9AD8\u541E\u5410"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"G1"}),(0,l.jsx)(e.td,{children:"G1"}),(0,l.jsx)(e.td,{children:"\u5E73\u8861"})]})]})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"9. \u9009\u62E9\u5EFA\u8BAE"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5C0F\u5E94\u7528\uFF08\u5C0F\u4E8E100MB\uFF09\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Serial GC"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4E2D\u7B49\u5E94\u7528\uFF08\u51E0GB\uFF09\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"G1 GC"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5927\u5185\u5B58\u5E94\u7528\uFF08>10GB\uFF09\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"ZGC\u6216Shenandoah"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4F4E\u5EF6\u8FDF\u8981\u6C42\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"CMS\u6216G1"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u9AD8\u541E\u5410\u91CF\u8981\u6C42\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Parallel GC"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"17-java-\u4E2D\u5982\u4F55\u5224\u65AD\u5BF9\u8C61\u662F\u5426\u662F\u5783\u573E\u4E0D\u540C\u5B9E\u73B0\u65B9\u5F0F\u6709\u4F55\u533A\u522B",children:"17. Java \u4E2D\u5982\u4F55\u5224\u65AD\u5BF9\u8C61\u662F\u5426\u662F\u5783\u573E\uFF1F\u4E0D\u540C\u5B9E\u73B0\u65B9\u5F0F\u6709\u4F55\u533A\u522B\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"Java\u4E3B\u8981\u4F7F\u7528\u53EF\u8FBE\u6027\u5206\u6790\u7B97\u6CD5\u5224\u65AD\u5BF9\u8C61\u662F\u5426\u4E3A\u5783\u573E\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. \u5F15\u7528\u8BA1\u6570\u6CD5\uFF08Java\u672A\u91C7\u7528\uFF09"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u539F\u7406\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4E3A\u5BF9\u8C61\u6DFB\u52A0\u5F15\u7528\u8BA1\u6570\u5668"}),"\n",(0,l.jsx)(e.li,{children:"\u5F15\u7528+1\uFF0C\u5931\u6548-1"}),"\n",(0,l.jsx)(e.li,{children:"\u8BA1\u6570\u4E3A0\u65F6\u56DE\u6536"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4F18\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5B9E\u73B0\u7B80\u5355"}),"\n",(0,l.jsx)(e.li,{children:"\u5224\u5B9A\u9AD8\u6548"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7F3A\u70B9\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u65E0\u6CD5\u89E3\u51B3\u5FAA\u73AF\u5F15\u7528\npublic class CircularReference {\n    public Object ref;\n    \n    public static void main(String[] args) {\n        CircularReference obj1 = new CircularReference();\n        CircularReference obj2 = new CircularReference();\n        \n        obj1.ref = obj2;\n        obj2.ref = obj1;\n        \n        obj1 = null;\n        obj2 = null;\n        \n        // \u4E24\u4E2A\u5BF9\u8C61\u4E92\u76F8\u5F15\u7528\uFF0C\u8BA1\u6570\u4E0D\u4E3A0\n        // \u4F46\u5B9E\u9645\u5DF2\u6210\u4E3A\u5783\u573E\n    }\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u53EF\u8FBE\u6027\u5206\u6790\u7B97\u6CD5\uFF08Java\u91C7\u7528\uFF09"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u539F\u7406\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4ECEGC Roots\u5F00\u59CB\u5411\u4E0B\u641C\u7D22"}),"\n",(0,l.jsx)(e.li,{children:"\u4E0D\u53EF\u8FBE\u7684\u5BF9\u8C61\u5373\u4E3A\u5783\u573E"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"GC Roots\u5305\u62EC\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// 1. \u865A\u62DF\u673A\u6808\u4E2D\u7684\u5F15\u7528\npublic void method() {\n    Object obj = new Object();  // \u6808\u4E2D\u5F15\u7528\n}\n\n// 2. \u65B9\u6CD5\u533A\u4E2D\u7684\u9759\u6001\u53D8\u91CF\npublic class Test {\n    private static Object staticObj = new Object();\n}\n\n// 3. \u65B9\u6CD5\u533A\u4E2D\u7684\u5E38\u91CF\npublic class Test {\n    private static final Object CONSTANT = new Object();\n}\n\n// 4. \u672C\u5730\u65B9\u6CD5\u6808\u4E2D\u7684\u5F15\u7528\nnative void nativeMethod();\n\n// 5. \u6D3B\u8DC3\u7EBF\u7A0B\nThread thread = new Thread();\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u53EF\u8FBE\u6027\u5206\u6790\u8FC7\u7A0B\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"GC Roots\n   |\n   \u251C\u2500> Object A (\u53EF\u8FBE)\n   \u2502      |\n   \u2502      \u2514\u2500> Object B (\u53EF\u8FBE)\n   |\n   \u2514\u2500> Object C (\u53EF\u8FBE)\n\nObject D (\u4E0D\u53EF\u8FBE\uFF0C\u5783\u573E)\n   |\n   \u2514\u2500> Object E (\u4E0D\u53EF\u8FBE\uFF0C\u5783\u573E)\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. \u5BF9\u8C61\u7684\u751F\u6B7B\u5224\u5B9A"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B2C\u4E00\u6B21\u6807\u8BB0\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u4E0D\u53EF\u8FBE\u5BF9\u8C61\u88AB\u7B2C\u4E00\u6B21\u6807\u8BB0\n// \u5224\u65AD\u662F\u5426\u9700\u8981\u6267\u884Cfinalize()\nif (!obj.isReachable() && obj.hasFinalize()) {\n    // \u653E\u5165F-Queue\u961F\u5217\n    fQueue.add(obj);\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"finalize()\u65B9\u6CD5\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'public class FinalizeTest {\n    public static FinalizeTest instance;\n    \n    @Override\n    protected void finalize() throws Throwable {\n        System.out.println("finalize\u88AB\u8C03\u7528");\n        // \u81EA\u6551\uFF1A\u91CD\u65B0\u5EFA\u7ACB\u5F15\u7528\n        instance = this;\n    }\n    \n    public static void main(String[] args) throws Exception {\n        instance = new FinalizeTest();\n        \n        // \u7B2C\u4E00\u6B21GC\n        instance = null;\n        System.gc();\n        Thread.sleep(500);\n        \n        if (instance != null) {\n            System.out.println("\u5BF9\u8C61\u5B58\u6D3B");  // \u81EA\u6551\u6210\u529F\n        }\n        \n        // \u7B2C\u4E8C\u6B21GC\n        instance = null;\n        System.gc();\n        Thread.sleep(500);\n        \n        if (instance == null) {\n            System.out.println("\u5BF9\u8C61\u6B7B\u4EA1");  // finalize\u53EA\u6267\u884C\u4E00\u6B21\n        }\n    }\n}\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. \u5F15\u7528\u7C7B\u578B\u5224\u5B9A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u5F3A\u5F15\u7528\uFF1A\u6C38\u4E0D\u56DE\u6536\nObject obj = new Object();\n\n// \u8F6F\u5F15\u7528\uFF1A\u5185\u5B58\u4E0D\u8DB3\u65F6\u56DE\u6536\nSoftReference<Object> soft = new SoftReference<>(new Object());\n\n// \u5F31\u5F15\u7528\uFF1AGC\u65F6\u56DE\u6536\nWeakReference<Object> weak = new WeakReference<>(new Object());\n\n// \u865A\u5F15\u7528\uFF1A\u65E0\u6CD5\u83B7\u53D6\u5BF9\u8C61\nPhantomReference<Object> phantom = new PhantomReference<>(new Object(), queue);\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"5. \u65B9\u6CD5\u533A\u56DE\u6536"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7C7B\u5378\u8F7D\u6761\u4EF6\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// 1. \u8BE5\u7C7B\u6240\u6709\u5B9E\u4F8B\u5DF2\u88AB\u56DE\u6536\n// 2. \u52A0\u8F7D\u8BE5\u7C7B\u7684ClassLoader\u5DF2\u88AB\u56DE\u6536\n// 3. \u8BE5\u7C7B\u7684Class\u5BF9\u8C61\u6CA1\u6709\u88AB\u5F15\u7528\n\n// \u793A\u4F8B\uFF1A\u52A8\u6001\u4EE3\u7406\u7C7B\u53EF\u80FD\u88AB\u5378\u8F7D\nProxy.newProxyInstance(...);\n"})}),"\n",(0,l.jsx)(e.h3,{id:"18-\u4E3A\u4EC0\u4E48-java-\u7684\u5783\u573E\u6536\u96C6\u5668\u5C06\u5806\u5206\u4E3A\u8001\u5E74\u4EE3\u548C\u65B0\u751F\u4EE3",children:"18. \u4E3A\u4EC0\u4E48 Java \u7684\u5783\u573E\u6536\u96C6\u5668\u5C06\u5806\u5206\u4E3A\u8001\u5E74\u4EE3\u548C\u65B0\u751F\u4EE3\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"\u5206\u4EE3\u6536\u96C6\u57FA\u4E8E\u4E24\u4E2A\u5047\u8BF4\uFF0C\u9488\u5BF9\u4E0D\u540C\u7279\u5F81\u7684\u5BF9\u8C61\u91C7\u7528\u4E0D\u540C\u7684\u56DE\u6536\u7B56\u7565\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. \u5206\u4EE3\u5047\u8BF4"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5F31\u5206\u4EE3\u5047\u8BF4\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5927\u90E8\u5206\u5BF9\u8C61\u671D\u751F\u5915\u706D"}),"\n",(0,l.jsx)(e.li,{children:"98%\u7684\u5BF9\u8C61\u5728\u521B\u5EFA\u540E\u5F88\u5FEB\u6B7B\u4EA1"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5F3A\u5206\u4EE3\u5047\u8BF4\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u71AC\u8FC7\u591A\u6B21GC\u7684\u5BF9\u8C61\u96BE\u4EE5\u6D88\u4EA1"}),"\n",(0,l.jsx)(e.li,{children:"\u5B58\u6D3B\u65F6\u95F4\u957F\u7684\u5BF9\u8C61\u4F1A\u7EE7\u7EED\u5B58\u6D3B"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u5206\u4EE3\u7ED3\u6784"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"Java Heap\n\u251C\u2500\u2500 Young Generation (\u65B0\u751F\u4EE3)\n\u2502   \u251C\u2500\u2500 Eden (80%)\n\u2502   \u251C\u2500\u2500 Survivor 0 (10%)\n\u2502   \u2514\u2500\u2500 Survivor 1 (10%)\n\u2514\u2500\u2500 Old Generation (\u8001\u5E74\u4EE3)\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. \u5206\u4EE3\u4F18\u52BF"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u9488\u5BF9\u6027\u56DE\u6536\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u65B0\u751F\u4EE3\uFF1A\u9891\u7E41GC\uFF0C\u5FEB\u901F\u56DE\u6536\n// \u5927\u90E8\u5206\u5BF9\u8C61\u5728\u8FD9\u91CC\u6B7B\u4EA1\nfor (int i = 0; i < 1000000; i++) {\n    Object temp = new Object();  // \u4E34\u65F6\u5BF9\u8C61\n    // \u65B9\u6CD5\u7ED3\u675F\u540E\u6210\u4E3A\u5783\u573E\n}\n\n// \u8001\u5E74\u4EE3\uFF1A\u5C11\u91CFGC\uFF0C\u957F\u671F\u5B58\u6D3B\npublic class Service {\n    private static Cache cache = new Cache();  // \u957F\u671F\u5B58\u6D3B\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u63D0\u9AD8\u6548\u7387\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u65B0\u751F\u4EE3GC\uFF08Minor GC\uFF09\uFF1A\n- \u9891\u7387\u9AD8\n- \u901F\u5EA6\u5FEB\uFF08\u590D\u5236\u7B97\u6CD5\uFF09\n- \u505C\u987F\u65F6\u95F4\u77ED\n\n\u8001\u5E74\u4EE3GC\uFF08Major GC\uFF09\uFF1A\n- \u9891\u7387\u4F4E\n- \u901F\u5EA6\u6162\uFF08\u6807\u8BB0-\u6574\u7406\uFF09\n- \u505C\u987F\u65F6\u95F4\u957F\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. \u5BF9\u8C61\u5206\u914D\u6D41\u7A0B"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// 1. \u65B0\u5BF9\u8C61\u5728Eden\u533A\u5206\u914D\nObject obj = new Object();\n\n// 2. Eden\u533A\u6EE1\uFF0C\u89E6\u53D1Minor GC\n// \u5B58\u6D3B\u5BF9\u8C61\u590D\u5236\u5230Survivor\n\n// 3. \u591A\u6B21GC\u540E\u4ECD\u5B58\u6D3B\uFF0C\u664B\u5347\u5230\u8001\u5E74\u4EE3\n// \u9ED8\u8BA415\u6B21\uFF08-XX:MaxTenuringThreshold=15\uFF09\n\n// 4. \u5927\u5BF9\u8C61\u76F4\u63A5\u8FDB\u5165\u8001\u5E74\u4EE3\nbyte[] bigObj = new byte[10 * 1024 * 1024];  // 10MB\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"5. \u6027\u80FD\u5BF9\u6BD4"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4E0D\u5206\u4EE3\u7684\u95EE\u9898\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u6BCF\u6B21GC\u90FD\u626B\u63CF\u6574\u4E2A\u5806\n\u2192 \u6548\u7387\u4F4E\u4E0B\n\u2192 \u505C\u987F\u65F6\u95F4\u957F\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5206\u4EE3\u7684\u4F18\u52BF\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"Minor GC\u53EA\u626B\u63CF\u65B0\u751F\u4EE3\n\u2192 \u626B\u63CF\u8303\u56F4\u5C0F\n\u2192 \u901F\u5EA6\u5FEB\n\u2192 \u505C\u987F\u65F6\u95F4\u77ED\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"6. \u5B9E\u9645\u6570\u636E"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u65B0\u751F\u4EE3\u5BF9\u8C61\u5B58\u6D3B\u7387\uFF1A1-2%\n\u8001\u5E74\u4EE3\u5BF9\u8C61\u5B58\u6D3B\u7387\uFF1A>90%\n\nMinor GC\u9891\u7387\uFF1A\u79D2\u7EA7\nMajor GC\u9891\u7387\uFF1A\u5206\u949F\u7EA7\n\nMinor GC\u8017\u65F6\uFF1A\u51E0\u6BEB\u79D2\nMajor GC\u8017\u65F6\uFF1A\u51E0\u767E\u6BEB\u79D2\n"})}),"\n",(0,l.jsx)(e.h3,{id:"19-\u4E3A\u4EC0\u4E48-java-8-\u79FB\u9664\u4E86\u6C38\u4E45\u4EE3permgen\u5E76\u5F15\u5165\u4E86\u5143\u7A7A\u95F4metaspace",children:"19. \u4E3A\u4EC0\u4E48 Java 8 \u79FB\u9664\u4E86\u6C38\u4E45\u4EE3\uFF08PermGen\uFF09\u5E76\u5F15\u5165\u4E86\u5143\u7A7A\u95F4\uFF08Metaspace\uFF09\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"\u5143\u7A7A\u95F4\u89E3\u51B3\u4E86\u6C38\u4E45\u4EE3\u7684\u8BF8\u591A\u95EE\u9898\uFF0C\u63D0\u4F9B\u66F4\u7075\u6D3B\u7684\u5185\u5B58\u7BA1\u7406\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. \u6C38\u4E45\u4EE3\u7684\u95EE\u9898"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u95EE\u98981\uFF1A\u5927\u5C0F\u96BE\u4EE5\u786E\u5B9A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# JDK 7\u6C38\u4E45\u4EE3\u914D\u7F6E\n-XX:PermSize=64m\n-XX:MaxPermSize=256m\n\n# \u95EE\u9898\uFF1A\n# - \u8BBE\u7F6E\u592A\u5C0F\uFF1A\u5BB9\u6613OOM\n# - \u8BBE\u7F6E\u592A\u5927\uFF1A\u6D6A\u8D39\u5185\u5B58\n# - \u96BE\u4EE5\u9884\u4F30\u5408\u9002\u5927\u5C0F\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u95EE\u98982\uFF1A\u5BB9\u6613OOM"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u52A8\u6001\u751F\u6210\u5927\u91CF\u7C7B\nwhile (true) {\n    Enhancer enhancer = new Enhancer();\n    enhancer.setSuperclass(Object.class);\n    enhancer.create();\n}\n// java.lang.OutOfMemoryError: PermGen space\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u95EE\u98983\uFF1AFull GC\u6548\u7387\u4F4E"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u6C38\u4E45\u4EE3GC\u9700\u8981Full GC\n\u2192 \u505C\u987F\u65F6\u95F4\u957F\n\u2192 \u5F71\u54CD\u5E94\u7528\u6027\u80FD\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u95EE\u98984\uFF1A\u5185\u5B58\u788E\u7247"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u6C38\u4E45\u4EE3\u4F7F\u7528\u5806\u5185\u5B58\n\u2192 \u4EA7\u751F\u788E\u7247\n\u2192 \u5F71\u54CD\u5206\u914D\u6548\u7387\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u5143\u7A7A\u95F4\u7684\u4F18\u52BF"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4F18\u52BF1\uFF1A\u4F7F\u7528\u672C\u5730\u5185\u5B58"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# JDK 8\u5143\u7A7A\u95F4\u914D\u7F6E\n-XX:MetaspaceSize=128m\n-XX:MaxMetaspaceSize=512m\n\n# \u4F18\u52BF\uFF1A\n# - \u4E0D\u5360\u7528\u5806\u5185\u5B58\n# - \u7406\u8BBA\u4E0A\u53EA\u53D7\u7269\u7406\u5185\u5B58\u9650\u5236\n# - \u9ED8\u8BA4\u65E0\u4E0A\u9650\uFF08\u81EA\u52A8\u6269\u5C55\uFF09\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4F18\u52BF2\uFF1A\u81EA\u52A8\u6269\u5C55"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u5143\u7A7A\u95F4\u4F1A\u6839\u636E\u9700\u8981\u81EA\u52A8\u6269\u5C55\n// \u65E0\u9700\u7CBE\u786E\u8BBE\u7F6E\u5927\u5C0F\n// \u51CF\u5C11OOM\u98CE\u9669\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4F18\u52BF3\uFF1AGC\u6548\u7387\u63D0\u5347"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u5143\u7A7A\u95F4GC\u72EC\u7ACB\u8FDB\u884C\n\u2192 \u4E0D\u5F71\u54CD\u5806GC\n\u2192 \u51CF\u5C11Full GC\u9891\u7387\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4F18\u52BF4\uFF1A\u7B80\u5316\u8C03\u4F18"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u6C38\u4E45\u4EE3\uFF1A\u9700\u8981\u7CBE\u786E\u8C03\u4F18\n-XX:PermSize=128m\n-XX:MaxPermSize=256m\n\n# \u5143\u7A7A\u95F4\uFF1A\u901A\u5E38\u53EA\u8BBE\u7F6E\u6700\u5927\u503C\n-XX:MaxMetaspaceSize=512m\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. \u5185\u5B58\u5E03\u5C40\u53D8\u5316"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"JDK 7\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"Heap\n\u251C\u2500\u2500 Young Generation\n\u251C\u2500\u2500 Old Generation\n\u2514\u2500\u2500 Permanent Generation\n    \u251C\u2500\u2500 \u7C7B\u5143\u6570\u636E\n    \u251C\u2500\u2500 \u5B57\u7B26\u4E32\u5E38\u91CF\u6C60\n    \u2514\u2500\u2500 \u9759\u6001\u53D8\u91CF\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"JDK 8\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"Heap\n\u251C\u2500\u2500 Young Generation\n\u251C\u2500\u2500 Old Generation\n\u2514\u2500\u2500 \u5B57\u7B26\u4E32\u5E38\u91CF\u6C60\uFF08\u79FB\u5230\u5806\uFF09\n\nMetaspace\uFF08\u672C\u5730\u5185\u5B58\uFF09\n\u2514\u2500\u2500 \u7C7B\u5143\u6570\u636E\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. \u8FC1\u79FB\u5F71\u54CD"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5B57\u7B26\u4E32\u5E38\u91CF\u6C60\u8FC1\u79FB\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'// JDK 7+\uFF1A\u5B57\u7B26\u4E32\u5E38\u91CF\u6C60\u5728\u5806\u4E2D\nString s1 = "hello";\nString s2 = new String("hello");\nString s3 = s2.intern();\n\n// s1\u548Cs3\u6307\u5411\u5806\u4E2D\u7684\u5E38\u91CF\u6C60\nSystem.out.println(s1 == s3);  // true\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u9759\u6001\u53D8\u91CF\u8FC1\u79FB\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// JDK 8\uFF1A\u9759\u6001\u53D8\u91CF\u968FClass\u5BF9\u8C61\u5B58\u50A8\u5728\u5806\u4E2D\npublic class Test {\n    private static Object obj = new Object();\n    // obj\u5B58\u50A8\u5728\u5806\u4E2D\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"5. \u5B9E\u9645\u6848\u4F8B"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6C38\u4E45\u4EE3OOM\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// JDK 7\n// \u5927\u91CF\u4F7F\u7528CGLib\u52A8\u6001\u4EE3\u7406\nfor (int i = 0; i < 100000; i++) {\n    Enhancer enhancer = new Enhancer();\n    enhancer.setSuperclass(MyClass.class);\n    enhancer.create();\n}\n// OutOfMemoryError: PermGen space\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5143\u7A7A\u95F4\u81EA\u52A8\u6269\u5C55\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// JDK 8\n// \u76F8\u540C\u4EE3\u7801\u4E0D\u4F1A\u8F7B\u6613OOM\n// \u5143\u7A7A\u95F4\u81EA\u52A8\u6269\u5C55\n// \u9664\u975E\u8FBE\u5230MaxMetaspaceSize\u6216\u7269\u7406\u5185\u5B58\u9650\u5236\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"6. \u76D1\u63A7\u5BF9\u6BD4"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# JDK 7\u76D1\u63A7\u6C38\u4E45\u4EE3\njstat -gcpermcapacity <pid>\n\n# JDK 8\u76D1\u63A7\u5143\u7A7A\u95F4\njstat -gcmetacapacity <pid>\n"})}),"\n",(0,l.jsx)(e.h3,{id:"20-\u4E3A\u4EC0\u4E48-java-\u65B0\u751F\u4EE3\u88AB\u5212\u5206\u4E3A-s0s1-\u548C-eden-\u533A",children:"20. \u4E3A\u4EC0\u4E48 Java \u65B0\u751F\u4EE3\u88AB\u5212\u5206\u4E3A S0\u3001S1 \u548C Eden \u533A\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"\u65B0\u751F\u4EE3\u7684\u4E09\u533A\u5212\u5206\u662F\u4E3A\u4E86\u9AD8\u6548\u5B9E\u73B0\u590D\u5236\u7B97\u6CD5\uFF0C\u907F\u514D\u5185\u5B58\u788E\u7247\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. \u65B0\u751F\u4EE3\u7ED3\u6784"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"Young Generation\n\u251C\u2500\u2500 Eden (80%)\n\u251C\u2500\u2500 Survivor 0 (10%)\n\u2514\u2500\u2500 Survivor 1 (10%)\n\n\u9ED8\u8BA4\u6BD4\u4F8B\uFF1A8:1:1\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u4E3A\u4EC0\u4E48\u9700\u8981\u4E24\u4E2ASurvivor"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u95EE\u9898\uFF1A\u53EA\u6709\u4E00\u4E2ASurvivor"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"Eden \u2192 Survivor \u2192 Old\n\n\u95EE\u9898\uFF1A\n1. \u5185\u5B58\u788E\u7247\n2. \u65E0\u6CD5\u533A\u5206\u4E0D\u540C\u5E74\u9F84\u7684\u5BF9\u8C61\n3. \u664B\u5347\u7B56\u7565\u96BE\u4EE5\u5B9E\u73B0\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u89E3\u51B3\uFF1A\u4F7F\u7528\u4E24\u4E2ASurvivor"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"Eden + S0 \u2192 S1\nEden + S1 \u2192 S0\n\n\u4F18\u52BF\uFF1A\n1. \u65E0\u5185\u5B58\u788E\u7247\uFF08\u590D\u5236\u7B97\u6CD5\uFF09\n2. \u5BF9\u8C61\u5E74\u9F84\u9012\u589E\n3. \u7075\u6D3B\u7684\u664B\u5347\u7B56\u7565\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. Minor GC\u6D41\u7A0B"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B2C\u4E00\u6B21GC\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u521D\u59CB\u72B6\u6001\nEden: [\u5BF9\u8C61A, B, C, D, E]\nS0: []\nS1: []\n\n// GC\u540E\uFF08\u5047\u8BBEA\u3001B\u5B58\u6D3B\uFF09\nEden: []\nS0: [A(age=1), B(age=1)]\nS1: []\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B2C\u4E8C\u6B21GC\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// GC\u524D\nEden: [\u5BF9\u8C61F, G, H]\nS0: [A(age=1), B(age=1)]\nS1: []\n\n// GC\u540E\uFF08\u5047\u8BBEA\u3001F\u5B58\u6D3B\uFF09\nEden: []\nS0: []\nS1: [A(age=2), F(age=1)]\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u591A\u6B21GC\u540E\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u5BF9\u8C61\u5E74\u9F84\u8FBE\u5230\u9608\u503C\uFF08\u9ED8\u8BA415\uFF09\nif (age >= MaxTenuringThreshold) {\n    // \u664B\u5347\u5230\u8001\u5E74\u4EE3\n    moveToOld(obj);\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. \u4E3A\u4EC0\u4E48\u662F8:1:1\u6BD4\u4F8B"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4F9D\u636E\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u65B0\u751F\u4EE3\u5BF9\u8C61\u5B58\u6D3B\u7387\uFF1A1-2%\nEden\u533A\uFF1A80%\nSurvivor\uFF1A10% \xd7 2 = 20%\n\n\u6BCF\u6B21GC\uFF1A\n- Eden + 1\u4E2ASurvivor\uFF0890%\uFF09\n- \u5B58\u6D3B\u5BF9\u8C61\u590D\u5236\u5230\u53E6\u4E00\u4E2ASurvivor\n- 10%\u7A7A\u95F4\u8DB3\u591F\u5BB9\u7EB3\u5B58\u6D3B\u5BF9\u8C61\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5185\u5B58\u5229\u7528\u7387\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u53EF\u7528\u7A7A\u95F4\uFF1AEden + 1\u4E2ASurvivor = 90%\n\u6D6A\u8D39\u7A7A\u95F4\uFF1A1\u4E2ASurvivor = 10%\n\n\u5BF9\u6BD4\u4F20\u7EDF\u590D\u5236\u7B97\u6CD5\uFF0850%\u5229\u7528\u7387\uFF09\n\u2192 \u5927\u5E45\u63D0\u5347\u5185\u5B58\u5229\u7528\u7387\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"5. \u7A7A\u95F4\u5206\u914D\u62C5\u4FDD"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u5982\u679CSurvivor\u7A7A\u95F4\u4E0D\u8DB3\nif (survivorSize < aliveObjects) {\n    // \u76F4\u63A5\u664B\u5347\u5230\u8001\u5E74\u4EE3\n    moveToOld(objects);\n}\n\n// \u8001\u5E74\u4EE3\u7A7A\u95F4\u68C0\u67E5\nif (oldGenFreeSpace < youngGenUsedSpace) {\n    // \u89E6\u53D1Full GC\n    fullGC();\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"6. \u5B9E\u9645\u793A\u4F8B"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"public class GCTest {\n    public static void main(String[] args) {\n        // 1. \u5BF9\u8C61\u5728Eden\u5206\u914D\n        byte[] obj1 = new byte[1024 * 1024];  // 1MB\n        \n        // 2. Eden\u6EE1\uFF0C\u89E6\u53D1Minor GC\n        // obj1\u5B58\u6D3B\uFF0C\u590D\u5236\u5230S0\n        \n        // 3. \u7EE7\u7EED\u5206\u914D\n        byte[] obj2 = new byte[1024 * 1024];\n        \n        // 4. \u518D\u6B21GC\n        // obj1\u590D\u5236\u5230S1\uFF0Cage=2\n        // obj2\u590D\u5236\u5230S1\uFF0Cage=1\n        \n        // 5. 15\u6B21GC\u540E\n        // obj1\u664B\u5347\u5230\u8001\u5E74\u4EE3\n    }\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"7. \u53C2\u6570\u914D\u7F6E"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u8BBE\u7F6E\u65B0\u751F\u4EE3\u5927\u5C0F\n-Xmn512m\n\n# \u8BBE\u7F6EEden\u548CSurvivor\u6BD4\u4F8B\n-XX:SurvivorRatio=8  # Eden:Survivor = 8:1\n\n# \u8BBE\u7F6E\u664B\u5347\u5E74\u9F84\u9608\u503C\n-XX:MaxTenuringThreshold=15\n\n# \u6253\u5370GC\u8BE6\u60C5\n-XX:+PrintGCDetails\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"8. \u4F18\u5316\u5EFA\u8BAE"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// 1. \u907F\u514D\u521B\u5EFA\u5927\u5BF9\u8C61\nbyte[] big = new byte[10 * 1024 * 1024];  // \u76F4\u63A5\u8FDB\u8001\u5E74\u4EE3\n\n// 2. \u590D\u7528\u5BF9\u8C61\nStringBuilder sb = new StringBuilder();  // \u590D\u7528\n\n// 3. \u53CA\u65F6\u91CA\u653E\u5F15\u7528\nlist.clear();  // \u5E2E\u52A9GC\nlist = null;\n"})}),"\n",(0,l.jsx)(e.h3,{id:"21-\u4EC0\u4E48\u662F\u4E09\u8272\u6807\u8BB0\u7B97\u6CD5",children:"21. \u4EC0\u4E48\u662F\u4E09\u8272\u6807\u8BB0\u7B97\u6CD5\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"\u4E09\u8272\u6807\u8BB0\u7B97\u6CD5\u662F\u5E76\u53D1GC\u4E2D\u7528\u4E8E\u6807\u8BB0\u5BF9\u8C61\u7684\u6838\u5FC3\u7B97\u6CD5\uFF0C\u89E3\u51B3\u5E76\u53D1\u6807\u8BB0\u65F6\u7684\u5BF9\u8C61\u6F0F\u6807\u95EE\u9898\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. \u4E09\u8272\u5B9A\u4E49"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u767D\u8272\uFF08White\uFF09\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u672A\u88AB\u8BBF\u95EE\u7684\u5BF9\u8C61"}),"\n",(0,l.jsx)(e.li,{children:"\u6807\u8BB0\u7ED3\u675F\u540E\u4ECD\u4E3A\u767D\u8272\u7684\u5BF9\u8C61\u4F1A\u88AB\u56DE\u6536"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7070\u8272\uFF08Gray\uFF09\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5DF2\u88AB\u8BBF\u95EE\u4F46\u5176\u5F15\u7528\u7684\u5BF9\u8C61\u672A\u5168\u90E8\u8BBF\u95EE"}),"\n",(0,l.jsx)(e.li,{children:"\u5904\u4E8E\u5F85\u5904\u7406\u72B6\u6001"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u9ED1\u8272\uFF08Black\uFF09\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5DF2\u88AB\u8BBF\u95EE\u4E14\u5176\u5F15\u7528\u7684\u5BF9\u8C61\u4E5F\u5DF2\u8BBF\u95EE"}),"\n",(0,l.jsx)(e.li,{children:"\u4E0D\u4F1A\u88AB\u56DE\u6536"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u6807\u8BB0\u8FC7\u7A0B"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u521D\u59CB\u72B6\u6001\uFF1A\u6240\u6709\u5BF9\u8C61\u4E3A\u767D\u8272\n\u521D\u59CB\uFF1A\u6240\u6709\u5BF9\u8C61 = \u767D\u8272\n\n// \u4ECEGC Roots\u5F00\u59CB\u6807\u8BB0\nGC Roots -> \u7070\u8272\n\n// \u6807\u8BB0\u8FC7\u7A0B\nwhile (\u5B58\u5728\u7070\u8272\u5BF9\u8C61) {\n    \u53D6\u51FA\u4E00\u4E2A\u7070\u8272\u5BF9\u8C61\n    \u6807\u8BB0\u4E3A\u9ED1\u8272\n    \u5C06\u5176\u5F15\u7528\u7684\u767D\u8272\u5BF9\u8C61\u6807\u8BB0\u4E3A\u7070\u8272\n}\n\n// \u7ED3\u675F\uFF1A\u767D\u8272\u5BF9\u8C61\u5373\u4E3A\u5783\u573E\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. \u6807\u8BB0\u793A\u4F8B"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u521D\u59CB\u72B6\u6001\uFF1A\nGC Root -> A -> B -> C\n\u6240\u6709\u5BF9\u8C61\uFF1A\u767D\u8272\n\n\u7B2C1\u6B65\uFF1A\u6807\u8BB0GC Root\u5F15\u7528\u7684A\nA: \u7070\u8272\nB, C: \u767D\u8272\n\n\u7B2C2\u6B65\uFF1A\u5904\u7406A\uFF0C\u6807\u8BB0B\nA: \u9ED1\u8272\nB: \u7070\u8272\nC: \u767D\u8272\n\n\u7B2C3\u6B65\uFF1A\u5904\u7406B\uFF0C\u6807\u8BB0C\nA, B: \u9ED1\u8272\nC: \u7070\u8272\n\n\u7B2C4\u6B65\uFF1A\u5904\u7406C\nA, B, C: \u9ED1\u8272\n\n\u7ED3\u675F\uFF1A\u767D\u8272\u5BF9\u8C61\u88AB\u56DE\u6536\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. \u5E76\u53D1\u6807\u8BB0\u95EE\u9898"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5BF9\u8C61\u6F0F\u6807\u95EE\u9898\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u5E76\u53D1\u6807\u8BB0\u65F6\uFF0C\u5E94\u7528\u7EBF\u7A0B\u4FEE\u6539\u5F15\u7528\n\u521D\u59CB\u72B6\u6001\uFF1A\nA(\u9ED1) -> B(\u7070) -> C(\u767D)\n\n// \u5E94\u7528\u7EBF\u7A0B\u6267\u884C\uFF1A\nA.ref = C;  // A\u5F15\u7528C\nB.ref = null;  // B\u4E0D\u518D\u5F15\u7528C\n\n\u7ED3\u679C\uFF1A\nA(\u9ED1) -> C(\u767D)  // C\u88AB\u6F0F\u6807\uFF01\nB(\u7070)\n\n// C\u5E94\u8BE5\u5B58\u6D3B\u4F46\u88AB\u6807\u8BB0\u4E3A\u767D\u8272\n// \u4F1A\u88AB\u9519\u8BEF\u56DE\u6536\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6F0F\u6807\u6761\u4EF6\uFF08\u540C\u65F6\u6EE1\u8DB3\uFF09\uFF1A"})}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u9ED1\u8272\u5BF9\u8C61\u6307\u5411\u767D\u8272\u5BF9\u8C61"}),"\n",(0,l.jsx)(e.li,{children:"\u7070\u8272\u5BF9\u8C61\u5230\u767D\u8272\u5BF9\u8C61\u7684\u5F15\u7528\u88AB\u5220\u9664"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"5. \u89E3\u51B3\u65B9\u6848"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u589E\u91CF\u66F4\u65B0\uFF08Incremental Update\uFF09\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// CMS\u4F7F\u7528\n// \u5F53\u9ED1\u8272\u5BF9\u8C61\u5F15\u7528\u767D\u8272\u5BF9\u8C61\u65F6\nif (black.ref = white) {\n    // \u5C06\u9ED1\u8272\u5BF9\u8C61\u91CD\u65B0\u6807\u8BB0\u4E3A\u7070\u8272\n    black -> \u7070\u8272\n}\n\n// \u7834\u574F\u6761\u4EF61\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u539F\u59CB\u5FEB\u7167\uFF08SATB - Snapshot At The Beginning\uFF09\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// G1\u4F7F\u7528\n// \u5F53\u5220\u9664\u5F15\u7528\u65F6\nif (gray.ref = null) {\n    // \u8BB0\u5F55\u88AB\u5220\u9664\u7684\u5F15\u7528\n    \u8BB0\u5F55(gray -> white)\n}\n\n// \u7834\u574F\u6761\u4EF62\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"6. \u5199\u5C4F\u969C\u5B9E\u73B0"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u589E\u91CF\u66F4\u65B0\u5199\u5C4F\u969C\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u4F2A\u4EE3\u7801\nvoid writeBarrier(Object obj, Object ref) {\n    if (obj.isBlack() && ref.isWhite()) {\n        // \u91CD\u65B0\u6807\u8BB0\u4E3A\u7070\u8272\n        obj.setGray();\n    }\n    obj.ref = ref;\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"SATB\u5199\u5C4F\u969C\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u4F2A\u4EE3\u7801\nvoid writeBarrier(Object obj, Object oldRef) {\n    if (oldRef != null && oldRef.isWhite()) {\n        // \u8BB0\u5F55\u65E7\u5F15\u7528\n        satbQueue.add(oldRef);\n    }\n    obj.ref = newRef;\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"7. \u5B9E\u9645\u5E94\u7528"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"CMS\uFF08\u589E\u91CF\u66F4\u65B0\uFF09\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u521D\u59CB\u6807\u8BB0\uFF08STW\uFF09\n    \u2193\n\u5E76\u53D1\u6807\u8BB0\uFF08\u589E\u91CF\u66F4\u65B0\uFF09\n    \u2193\n\u91CD\u65B0\u6807\u8BB0\uFF08STW\uFF0C\u5904\u7406\u53D8\u5316\uFF09\n    \u2193\n\u5E76\u53D1\u6E05\u9664\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"G1\uFF08SATB\uFF09\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u521D\u59CB\u6807\u8BB0\uFF08STW\uFF09\n    \u2193\n\u5E76\u53D1\u6807\u8BB0\uFF08SATB\uFF09\n    \u2193\n\u6700\u7EC8\u6807\u8BB0\uFF08STW\uFF0C\u5904\u7406SATB\u961F\u5217\uFF09\n    \u2193\n\u7B5B\u9009\u56DE\u6536\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"8. \u6027\u80FD\u5BF9\u6BD4"})}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u7279\u6027"}),(0,l.jsx)(e.th,{children:"\u589E\u91CF\u66F4\u65B0"}),(0,l.jsx)(e.th,{children:"SATB"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u4F7F\u7528\u8005"}),(0,l.jsx)(e.td,{children:"CMS"}),(0,l.jsx)(e.td,{children:"G1"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u91CD\u65B0\u6807\u8BB0\u5DE5\u4F5C\u91CF"}),(0,l.jsx)(e.td,{children:"\u8F83\u5927"}),(0,l.jsx)(e.td,{children:"\u8F83\u5C0F"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u6D6E\u52A8\u5783\u573E"}),(0,l.jsx)(e.td,{children:"\u8F83\u5C11"}),(0,l.jsx)(e.td,{children:"\u8F83\u591A"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u5B9E\u73B0\u590D\u6742\u5EA6"}),(0,l.jsx)(e.td,{children:"\u7B80\u5355"}),(0,l.jsx)(e.td,{children:"\u590D\u6742"})]})]})]}),"\n",(0,l.jsx)(e.h3,{id:"22-java-\u4E2D\u7684-young-gcold-gcfull-gc-\u548C-mixed-gc-\u7684\u533A\u522B\u662F\u4EC0\u4E48",children:"22. Java \u4E2D\u7684 young GC\u3001old GC\u3001full GC \u548C mixed GC \u7684\u533A\u522B\u662F\u4EC0\u4E48\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"\u4E0D\u540C\u7C7B\u578B\u7684GC\u9488\u5BF9\u4E0D\u540C\u7684\u5185\u5B58\u533A\u57DF\uFF0C\u6709\u4E0D\u540C\u7684\u89E6\u53D1\u6761\u4EF6\u548C\u56DE\u6536\u7B56\u7565\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. Young GC\uFF08Minor GC\uFF09"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5B9A\u4E49\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u53EA\u56DE\u6536\u65B0\u751F\u4EE3"}),"\n",(0,l.jsx)(e.li,{children:"\u6700\u9891\u7E41\u7684GC\u7C7B\u578B"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u89E6\u53D1\u6761\u4EF6\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// Eden\u533A\u6EE1\u65F6\u89E6\u53D1\nif (eden.isFull()) {\n    youngGC();\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u56DE\u6536\u8FC7\u7A0B\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"1. Eden\u533A\u5B58\u6D3B\u5BF9\u8C61 -> Survivor\n2. Survivor\u533A\u5B58\u6D3B\u5BF9\u8C61 -> \u53E6\u4E00\u4E2ASurvivor\n3. \u5E74\u9F84\u8FBE\u6807\u5BF9\u8C61 -> \u8001\u5E74\u4EE3\n4. \u6E05\u7A7AEden\u548C\u4E00\u4E2ASurvivor\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7279\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u9891\u7387\u9AD8\uFF08\u79D2\u7EA7\uFF09"}),"\n",(0,l.jsx)(e.li,{children:"\u901F\u5EA6\u5FEB\uFF08\u51E0\u6BEB\u79D2\uFF09"}),"\n",(0,l.jsx)(e.li,{children:"\u4F7F\u7528\u590D\u5236\u7B97\u6CD5"}),"\n",(0,l.jsx)(e.li,{children:"STW\u65F6\u95F4\u77ED"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. Old GC\uFF08Major GC\uFF09"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5B9A\u4E49\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u53EA\u56DE\u6536\u8001\u5E74\u4EE3"}),"\n",(0,l.jsx)(e.li,{children:"\u8F83\u5C11\u4F7F\u7528\u7684\u672F\u8BED"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u89E6\u53D1\u6761\u4EF6\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u8001\u5E74\u4EE3\u7A7A\u95F4\u4E0D\u8DB3\nif (oldGen.freeSpace < threshold) {\n    oldGC();\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7279\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u9891\u7387\u4F4E"}),"\n",(0,l.jsx)(e.li,{children:"\u901F\u5EA6\u6162"}),"\n",(0,l.jsx)(e.li,{children:"\u4F7F\u7528\u6807\u8BB0-\u6574\u7406\u7B97\u6CD5"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6CE8\u610F\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Major GC\u901A\u5E38\u4F34\u968FFull GC"}),"\n",(0,l.jsx)(e.li,{children:"\u5F88\u591A\u60C5\u51B5\u4E0B\u4E24\u8005\u7B49\u4EF7"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. Full GC"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5B9A\u4E49\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u56DE\u6536\u6574\u4E2A\u5806\uFF08\u65B0\u751F\u4EE3+\u8001\u5E74\u4EE3\uFF09"}),"\n",(0,l.jsx)(e.li,{children:"\u56DE\u6536\u65B9\u6CD5\u533A"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u89E6\u53D1\u6761\u4EF6\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// 1. \u8001\u5E74\u4EE3\u7A7A\u95F4\u4E0D\u8DB3\nif (oldGen.freeSpace < requiredSpace) {\n    fullGC();\n}\n\n// 2. \u65B9\u6CD5\u533A\u7A7A\u95F4\u4E0D\u8DB3\nif (metaspace.isFull()) {\n    fullGC();\n}\n\n// 3. \u7A7A\u95F4\u5206\u914D\u62C5\u4FDD\u5931\u8D25\nif (promotionFailed) {\n    fullGC();\n}\n\n// 4. \u663E\u5F0F\u8C03\u7528System.gc()\nSystem.gc();  // \u5EFA\u8BAEJVM\u6267\u884CFull GC\n\n// 5. CMS\u5E76\u53D1\u5931\u8D25\nif (concurrentModeFailure) {\n    fullGC();\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7279\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u9891\u7387\u6700\u4F4E"}),"\n",(0,l.jsx)(e.li,{children:"\u8017\u65F6\u6700\u957F\uFF08\u51E0\u767E\u6BEB\u79D2\u5230\u51E0\u79D2\uFF09"}),"\n",(0,l.jsx)(e.li,{children:"STW\u65F6\u95F4\u957F"}),"\n",(0,l.jsx)(e.li,{children:"\u5F71\u54CD\u5E94\u7528\u6027\u80FD"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. Mixed GC"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5B9A\u4E49\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"G1\u7279\u6709\u7684GC\u7C7B\u578B"}),"\n",(0,l.jsx)(e.li,{children:"\u56DE\u6536\u65B0\u751F\u4EE3+\u90E8\u5206\u8001\u5E74\u4EE3"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u89E6\u53D1\u6761\u4EF6\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u8001\u5E74\u4EE3\u5360\u7528\u8FBE\u5230\u9608\u503C\nif (oldGenOccupancy > InitiatingHeapOccupancyPercent) {\n    mixedGC();\n}\n\n// \u9ED8\u8BA445%\n-XX:InitiatingHeapOccupancyPercent=45\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u56DE\u6536\u8FC7\u7A0B\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"1. \u56DE\u6536\u6240\u6709\u65B0\u751F\u4EE3Region\n2. \u56DE\u6536\u90E8\u5206\u8001\u5E74\u4EE3Region\uFF08\u4EF7\u503C\u6700\u9AD8\u7684\uFF09\n3. \u6839\u636E\u505C\u987F\u65F6\u95F4\u76EE\u6807\u9009\u62E9Region\u6570\u91CF\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7279\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"G1\u72EC\u6709"}),"\n",(0,l.jsx)(e.li,{children:"\u53EF\u9884\u6D4B\u505C\u987F\u65F6\u95F4"}),"\n",(0,l.jsx)(e.li,{children:"\u589E\u91CF\u56DE\u6536\u8001\u5E74\u4EE3"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"5. GC\u7C7B\u578B\u5BF9\u6BD4"})}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"GC\u7C7B\u578B"}),(0,l.jsx)(e.th,{children:"\u56DE\u6536\u533A\u57DF"}),(0,l.jsx)(e.th,{children:"\u9891\u7387"}),(0,l.jsx)(e.th,{children:"\u8017\u65F6"}),(0,l.jsx)(e.th,{children:"STW"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Young GC"}),(0,l.jsx)(e.td,{children:"\u65B0\u751F\u4EE3"}),(0,l.jsx)(e.td,{children:"\u9AD8"}),(0,l.jsx)(e.td,{children:"\u77ED"}),(0,l.jsx)(e.td,{children:"\u77ED"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Old GC"}),(0,l.jsx)(e.td,{children:"\u8001\u5E74\u4EE3"}),(0,l.jsx)(e.td,{children:"\u4F4E"}),(0,l.jsx)(e.td,{children:"\u957F"}),(0,l.jsx)(e.td,{children:"\u957F"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Full GC"}),(0,l.jsx)(e.td,{children:"\u6574\u4E2A\u5806"}),(0,l.jsx)(e.td,{children:"\u6700\u4F4E"}),(0,l.jsx)(e.td,{children:"\u6700\u957F"}),(0,l.jsx)(e.td,{children:"\u6700\u957F"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Mixed GC"}),(0,l.jsx)(e.td,{children:"\u65B0\u751F\u4EE3+\u90E8\u5206\u8001\u5E74\u4EE3"}),(0,l.jsx)(e.td,{children:"\u4E2D"}),(0,l.jsx)(e.td,{children:"\u4E2D"}),(0,l.jsx)(e.td,{children:"\u53EF\u63A7"})]})]})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"6. \u5B9E\u9645\u6848\u4F8B"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Young GC\u793A\u4F8B\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"public class YoungGCTest {\n    public static void main(String[] args) {\n        for (int i = 0; i < 1000; i++) {\n            byte[] temp = new byte[1024 * 1024];  // 1MB\n            // \u9891\u7E41\u89E6\u53D1Young GC\n        }\n    }\n}\n// \u65E5\u5FD7\uFF1A[GC (Allocation Failure) [PSYoungGen: 2048K->512K(2560K)] ...\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Full GC\u793A\u4F8B\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"public class FullGCTest {\n    public static void main(String[] args) {\n        List<byte[]> list = new ArrayList<>();\n        while (true) {\n            list.add(new byte[1024 * 1024]);  // 1MB\n            // \u6700\u7EC8\u89E6\u53D1Full GC\n        }\n    }\n}\n// \u65E5\u5FD7\uFF1A[Full GC (Ergonomics) [PSYoungGen: 2048K->0K] [ParOldGen: 8192K->8000K] ...\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"7. \u76D1\u63A7GC"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u6253\u5370GC\u65E5\u5FD7\n-XX:+PrintGCDetails\n-XX:+PrintGCDateStamps\n\n# \u4F7F\u7528jstat\u76D1\u63A7\njstat -gc <pid> 1000\n\n# \u8F93\u51FA\u793A\u4F8B\nS0C    S1C    S0U    S1U      EC       EU        OC         OU       YGC   YGCT    FGC    FGCT\n2048.0 2048.0  0.0   512.0  16384.0  8192.0   40960.0   20480.0    100   0.500    5    2.000\n"})}),"\n",(0,l.jsx)(e.h3,{id:"23-\u4EC0\u4E48\u6761\u4EF6\u4F1A\u89E6\u53D1-java-\u7684-young-gc",children:"23. \u4EC0\u4E48\u6761\u4EF6\u4F1A\u89E6\u53D1 Java \u7684 young GC\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"Young GC\u4E3B\u8981\u5728Eden\u533A\u7A7A\u95F4\u4E0D\u8DB3\u65F6\u89E6\u53D1\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. \u4E3B\u8981\u89E6\u53D1\u6761\u4EF6"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Eden\u533A\u6EE1\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u6700\u5E38\u89C1\u7684\u89E6\u53D1\u6761\u4EF6\nif (eden.freeSpace < objectSize) {\n    // \u89E6\u53D1Young GC\n    youngGC();\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u5BF9\u8C61\u5206\u914D\u6D41\u7A0B"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"public Object allocate(int size) {\n    // 1. \u5C1D\u8BD5\u5728TLAB\u5206\u914D\n    if (tlab.canAllocate(size)) {\n        return tlab.allocate(size);\n    }\n    \n    // 2. TLAB\u4E0D\u8DB3\uFF0C\u5C1D\u8BD5\u5728Eden\u5206\u914D\n    if (eden.canAllocate(size)) {\n        return eden.allocate(size);\n    }\n    \n    // 3. Eden\u4E0D\u8DB3\uFF0C\u89E6\u53D1Young GC\n    youngGC();\n    \n    // 4. GC\u540E\u91CD\u8BD5\u5206\u914D\n    if (eden.canAllocate(size)) {\n        return eden.allocate(size);\n    }\n    \n    // 5. \u4ECD\u4E0D\u8DB3\uFF0C\u76F4\u63A5\u5206\u914D\u5230\u8001\u5E74\u4EE3\n    return oldGen.allocate(size);\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. \u89E6\u53D1\u65F6\u673A\u793A\u4F8B"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"public class YoungGCTrigger {\n    public static void main(String[] args) {\n        // \u5047\u8BBEEden\u533A\u5927\u5C0F\u4E3A10MB\n        \n        // \u5206\u914D9MB\uFF0C\u672A\u89E6\u53D1GC\n        byte[] obj1 = new byte[9 * 1024 * 1024];\n        \n        // \u5206\u914D2MB\uFF0CEden\u4E0D\u8DB3\uFF0C\u89E6\u53D1Young GC\n        byte[] obj2 = new byte[2 * 1024 * 1024];\n        \n        // GC\u65E5\u5FD7\uFF1A\n        // [GC (Allocation Failure) [PSYoungGen: 9216K->1024K(10240K)] ...\n    }\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. \u5206\u914D\u5931\u8D25\u573A\u666F"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u573A\u666F1\uFF1AEden\u533A\u6EE1"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// Eden: 8MB\u5DF2\u7528\uFF0C2MB\u7A7A\u95F2\n// \u5206\u914D3MB\u5BF9\u8C61\nbyte[] obj = new byte[3 * 1024 * 1024];\n\n// \u6D41\u7A0B\uFF1A\n// 1. Eden\u7A7A\u95F4\u4E0D\u8DB3\n// 2. \u89E6\u53D1Young GC\n// 3. \u6E05\u7406Eden\n// 4. \u91CD\u65B0\u5206\u914D\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u573A\u666F2\uFF1A\u5927\u5BF9\u8C61\u76F4\u63A5\u8FDB\u8001\u5E74\u4EE3"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u5BF9\u8C61\u5927\u4E8EEden\u533A\nbyte[] bigObj = new byte[20 * 1024 * 1024];  // 20MB\n\n// \u6D41\u7A0B\uFF1A\n// 1. \u5BF9\u8C61\u5927\u4E8EEden\n// 2. \u4E0D\u89E6\u53D1Young GC\n// 3. \u76F4\u63A5\u5206\u914D\u5230\u8001\u5E74\u4EE3\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"5. \u7A7A\u95F4\u5206\u914D\u62C5\u4FDD"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// Young GC\u524D\u68C0\u67E5\nif (oldGen.freeSpace < youngGen.usedSpace) {\n    // \u8001\u5E74\u4EE3\u7A7A\u95F4\u53EF\u80FD\u4E0D\u8DB3\n    if (HandlePromotionFailure) {\n        // \u5141\u8BB8\u5192\u9669\uFF0C\u6267\u884CYoung GC\n        youngGC();\n    } else {\n        // \u4E0D\u5141\u8BB8\u5192\u9669\uFF0C\u6267\u884CFull GC\n        fullGC();\n    }\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"6. \u76F8\u5173JVM\u53C2\u6570"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u8BBE\u7F6E\u65B0\u751F\u4EE3\u5927\u5C0F\n-Xmn512m\n\n# \u8BBE\u7F6EEden\u548CSurvivor\u6BD4\u4F8B\n-XX:SurvivorRatio=8\n\n# \u6253\u5370GC\u8BE6\u60C5\n-XX:+PrintGCDetails\n\n# \u6253\u5370GC\u539F\u56E0\n-XX:+PrintGCCause\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"7. \u76D1\u63A7Young GC"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u4F7F\u7528jstat\njstat -gcutil <pid> 1000\n\n# \u8F93\u51FA\n  S0     S1     E      O      M     YGC     YGCT\n  0.00  50.00  75.00  30.00  95.00  100    0.500\n\n# E: Eden\u4F7F\u7528\u738775%\n# YGC: Young GC\u6B21\u6570100\u6B21\n# YGCT: Young GC\u603B\u8017\u65F60.5\u79D2\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"8. \u4F18\u5316\u5EFA\u8BAE"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// 1. \u5408\u7406\u8BBE\u7F6E\u65B0\u751F\u4EE3\u5927\u5C0F\n-Xmn1g  // \u6839\u636E\u5E94\u7528\u7279\u70B9\u8C03\u6574\n\n// 2. \u907F\u514D\u9891\u7E41\u521B\u5EFA\u5927\u5BF9\u8C61\n// \u5DEE\uFF1A\nfor (int i = 0; i < 1000; i++) {\n    byte[] temp = new byte[10 * 1024 * 1024];  // \u9891\u7E41\u89E6\u53D1GC\n}\n\n// \u597D\uFF1A\nbyte[] buffer = new byte[10 * 1024 * 1024];  // \u590D\u7528\nfor (int i = 0; i < 1000; i++) {\n    // \u4F7F\u7528buffer\n}\n\n// 3. \u5BF9\u8C61\u6C60\u590D\u7528\nObjectPool<Buffer> pool = new ObjectPool<>();\nBuffer buffer = pool.borrow();\n// \u4F7F\u7528\npool.return(buffer);\n"})}),"\n",(0,l.jsx)(e.h3,{id:"24-\u4EC0\u4E48\u60C5\u51B5\u4E0B\u4F1A\u89E6\u53D1-java-\u7684-full-gc",children:"24. \u4EC0\u4E48\u60C5\u51B5\u4E0B\u4F1A\u89E6\u53D1 Java \u7684 Full GC\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"Full GC\u5728\u591A\u79CD\u60C5\u51B5\u4E0B\u89E6\u53D1\uFF0C\u901A\u5E38\u610F\u5473\u7740\u4E25\u91CD\u7684\u6027\u80FD\u95EE\u9898\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. \u8001\u5E74\u4EE3\u7A7A\u95F4\u4E0D\u8DB3"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u573A\u666F1\uFF1A\u5927\u5BF9\u8C61\u76F4\u63A5\u8FDB\u5165\u8001\u5E74\u4EE3\nbyte[] bigObj = new byte[100 * 1024 * 1024];  // 100MB\n\n// \u573A\u666F2\uFF1AYoung GC\u540E\u664B\u5347\u5BF9\u8C61\u8FC7\u591A\nif (oldGen.freeSpace < promotionSize) {\n    fullGC();\n}\n\n// \u573A\u666F3\uFF1A\u957F\u671F\u5B58\u6D3B\u5BF9\u8C61\u7D2F\u79EF\npublic class Service {\n    private static List<Object> cache = new ArrayList<>();\n    \n    public void addCache() {\n        cache.add(new Object());  // \u6301\u7EED\u7D2F\u79EF\n        // \u6700\u7EC8\u8001\u5E74\u4EE3\u6EE1\uFF0C\u89E6\u53D1Full GC\n    }\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u65B9\u6CD5\u533A\uFF08\u5143\u7A7A\u95F4\uFF09\u6EE1"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u52A8\u6001\u751F\u6210\u5927\u91CF\u7C7B\nwhile (true) {\n    Enhancer enhancer = new Enhancer();\n    enhancer.setSuperclass(Object.class);\n    enhancer.setUseCache(false);\n    enhancer.create();  // \u751F\u6210\u7C7B\n}\n\n// \u5143\u7A7A\u95F4\u6EE1\uFF0C\u89E6\u53D1Full GC\n// java.lang.OutOfMemoryError: Metaspace\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. \u7A7A\u95F4\u5206\u914D\u62C5\u4FDD\u5931\u8D25"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// Young GC\u524D\u68C0\u67E5\nlong avgPromotionSize = getAveragePromotionSize();\n\nif (oldGen.freeSpace < avgPromotionSize) {\n    // \u62C5\u4FDD\u5931\u8D25\uFF0C\u89E6\u53D1Full GC\n    fullGC();\n} else {\n    // \u6267\u884CYoung GC\n    youngGC();\n}\n\n// \u5982\u679CYoung GC\u540E\u4ECD\u65E0\u6CD5\u664B\u5347\nif (promotionFailed) {\n    // \u518D\u6B21\u89E6\u53D1Full GC\n    fullGC();\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. CMS\u5E76\u53D1\u5931\u8D25"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// CMS\u5E76\u53D1\u6807\u8BB0\u671F\u95F4\n// \u8001\u5E74\u4EE3\u7A7A\u95F4\u4E0D\u8DB3\u4EE5\u5BB9\u7EB3\u65B0\u664B\u5347\u5BF9\u8C61\nif (oldGen.freeSpace < promotionSize) {\n    // Concurrent Mode Failure\n    // \u964D\u7EA7\u4E3ASerial Old\uFF0C\u6267\u884CFull GC\n    fullGC();\n}\n\n// \u65E5\u5FD7\uFF1A\n// [CMS-concurrent-mark: 0.100/0.100 secs]\n// [CMS Concurrent Mode Failure]\n// [Full GC (Allocation Failure) ...\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"5. \u663E\u5F0F\u8C03\u7528System.gc()"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u4E0D\u63A8\u8350\nSystem.gc();  // \u5EFA\u8BAEJVM\u6267\u884CFull GC\n\n// \u53EF\u4EE5\u7981\u7528\n-XX:+DisableExplicitGC\n\n// \u6216\u6539\u4E3A\u5E76\u53D1GC\n-XX:+ExplicitGCInvokesConcurrent\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"6. Dump\u5806\u5185\u5B58"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# jmap\u89E6\u53D1Full GC\njmap -dump:live,format=b,file=heap.bin <pid>\n\n# live\u53C2\u6570\u4F1A\u5148\u6267\u884CFull GC\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"7. \u664B\u5347\u5931\u8D25"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// Promotion Failed\n// Survivor\u7A7A\u95F4\u4E0D\u8DB3\uFF0C\u5BF9\u8C61\u76F4\u63A5\u664B\u5347\u8001\u5E74\u4EE3\n// \u4F46\u8001\u5E74\u4EE3\u4E5F\u7A7A\u95F4\u4E0D\u8DB3\n\n// \u793A\u4F8B\npublic class PromotionFailure {\n    public static void main(String[] args) {\n        List<byte[]> list = new ArrayList<>();\n        \n        for (int i = 0; i < 1000; i++) {\n            // \u521B\u5EFA\u5BF9\u8C61\n            byte[] obj = new byte[1024 * 1024];\n            list.add(obj);\n            \n            // \u89E6\u53D1Young GC\n            // \u5BF9\u8C61\u664B\u5347\u5931\u8D25\n            // \u89E6\u53D1Full GC\n        }\n    }\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"8. Full GC\u89E6\u53D1\u6761\u4EF6\u6C47\u603B"})}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u89E6\u53D1\u6761\u4EF6"}),(0,l.jsx)(e.th,{children:"\u8BF4\u660E"}),(0,l.jsx)(e.th,{children:"\u9891\u7387"}),(0,l.jsx)(e.th,{children:"\u5F71\u54CD"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u8001\u5E74\u4EE3\u6EE1"}),(0,l.jsx)(e.td,{children:"\u6700\u5E38\u89C1"}),(0,l.jsx)(e.td,{children:"\u4E2D"}),(0,l.jsx)(e.td,{children:"\u5927"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u5143\u7A7A\u95F4\u6EE1"}),(0,l.jsx)(e.td,{children:"\u7C7B\u52A0\u8F7D\u8FC7\u591A"}),(0,l.jsx)(e.td,{children:"\u4F4E"}),(0,l.jsx)(e.td,{children:"\u5927"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u62C5\u4FDD\u5931\u8D25"}),(0,l.jsx)(e.td,{children:"\u7A7A\u95F4\u9884\u4F30\u4E0D\u8DB3"}),(0,l.jsx)(e.td,{children:"\u4F4E"}),(0,l.jsx)(e.td,{children:"\u5927"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"CMS\u5931\u8D25"}),(0,l.jsx)(e.td,{children:"\u5E76\u53D1\u6536\u96C6\u5931\u8D25"}),(0,l.jsx)(e.td,{children:"\u4F4E"}),(0,l.jsx)(e.td,{children:"\u6781\u5927"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"System.gc()"}),(0,l.jsx)(e.td,{children:"\u663E\u5F0F\u8C03\u7528"}),(0,l.jsx)(e.td,{children:"\u53D6\u51B3\u4E8E\u4EE3\u7801"}),(0,l.jsx)(e.td,{children:"\u5927"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u664B\u5347\u5931\u8D25"}),(0,l.jsx)(e.td,{children:"\u7A7A\u95F4\u788E\u7247"}),(0,l.jsx)(e.td,{children:"\u4F4E"}),(0,l.jsx)(e.td,{children:"\u5927"})]})]})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"9. \u76D1\u63A7Full GC"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# GC\u65E5\u5FD7\n-XX:+PrintGCDetails\n-XX:+PrintGCDateStamps\n-Xloggc:gc.log\n\n# \u65E5\u5FD7\u793A\u4F8B\n[Full GC (Allocation Failure) \n [PSYoungGen: 2048K->0K(2560K)] \n [ParOldGen: 8192K->7000K(10240K)] \n 10240K->7000K(12800K), \n [Metaspace: 3000K->3000K(1056768K)], \n 0.5000000 secs]\n\n# jstat\u76D1\u63A7\njstat -gcutil <pid> 1000\n  S0     S1     E      O      M     FGC    FGCT\n  0.00   0.00  10.00  95.00  90.00   10   5.000\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"10. \u907F\u514DFull GC"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// 1. \u5408\u7406\u8BBE\u7F6E\u5806\u5927\u5C0F\n-Xms4g -Xmx4g  // \u521D\u59CB\u548C\u6700\u5927\u5806\u4E00\u81F4\n\n// 2. \u8C03\u6574\u65B0\u751F\u4EE3\u548C\u8001\u5E74\u4EE3\u6BD4\u4F8B\n-XX:NewRatio=2  // \u8001\u5E74\u4EE3:\u65B0\u751F\u4EE3 = 2:1\n\n// 3. \u907F\u514D\u5927\u5BF9\u8C61\n// \u5DEE\uFF1A\nbyte[] big = new byte[10 * 1024 * 1024];\n\n// \u597D\uFF1A\u5206\u6279\u5904\u7406\nfor (int i = 0; i < 10; i++) {\n    byte[] small = new byte[1024 * 1024];\n    process(small);\n}\n\n// 4. \u53CA\u65F6\u91CA\u653E\u5F15\u7528\nlist.clear();\ncache.evict();\n\n// 5. \u4F7F\u7528\u5BF9\u8C61\u6C60\nObjectPool<Buffer> pool = new ObjectPool<>();\n\n// 6. \u9009\u62E9\u5408\u9002\u7684GC\n-XX:+UseG1GC  // G1\u907F\u514DFull GC\n-XX:MaxGCPauseMillis=200\n"})}),"\n",(0,l.jsx)(e.h3,{id:"25-\u4EC0\u4E48\u662F-java-\u7684-plab",children:"25. \u4EC0\u4E48\u662F Java \u7684 PLAB\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"PLAB\uFF08Promotion Local Allocation Buffer\uFF09\u662FJVM\u4E3A\u6BCF\u4E2A\u7EBF\u7A0B\u5728\u8001\u5E74\u4EE3\u5206\u914D\u7684\u79C1\u6709\u7F13\u51B2\u533A\uFF0C\u7528\u4E8E\u4F18\u5316\u5BF9\u8C61\u664B\u5347\u6027\u80FD\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. PLAB\u5B9A\u4E49"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4F5C\u7528\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u7EBF\u7A0B\u79C1\u6709\u7684\u8001\u5E74\u4EE3\u5206\u914D\u7F13\u51B2\u533A"}),"\n",(0,l.jsx)(e.li,{children:"\u907F\u514D\u591A\u7EBF\u7A0B\u7ADE\u4E89"}),"\n",(0,l.jsx)(e.li,{children:"\u63D0\u9AD8\u5BF9\u8C61\u664B\u5347\u6548\u7387"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7C7B\u6BD4TLAB\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"TLAB: \u65B0\u751F\u4EE3\u7684\u7EBF\u7A0B\u672C\u5730\u5206\u914D\u7F13\u51B2\u533A\nPLAB: \u8001\u5E74\u4EE3\u7684\u7EBF\u7A0B\u672C\u5730\u5206\u914D\u7F13\u51B2\u533A\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u4E3A\u4EC0\u4E48\u9700\u8981PLAB"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u95EE\u9898\uFF1A\u591A\u7EBF\u7A0B\u664B\u5347\u7ADE\u4E89"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// Young GC\u65F6\uFF0C\u591A\u4E2A\u7EBF\u7A0B\u540C\u65F6\u664B\u5347\u5BF9\u8C61\nThread 1: \u664B\u5347\u5BF9\u8C61A\u5230\u8001\u5E74\u4EE3\nThread 2: \u664B\u5347\u5BF9\u8C61B\u5230\u8001\u5E74\u4EE3\nThread 3: \u664B\u5347\u5BF9\u8C61C\u5230\u8001\u5E74\u4EE3\n\n// \u6CA1\u6709PLAB\uFF1A\u9700\u8981\u540C\u6B65\nsynchronized (oldGen) {\n    oldGen.allocate(obj);  // \u6027\u80FD\u74F6\u9888\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u89E3\u51B3\uFF1A\u4F7F\u7528PLAB"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u6BCF\u4E2A\u7EBF\u7A0B\u6709\u81EA\u5DF1\u7684PLAB\nThread 1: PLAB1 -> \u8001\u5E74\u4EE3\nThread 2: PLAB2 -> \u8001\u5E74\u4EE3\nThread 3: PLAB3 -> \u8001\u5E74\u4EE3\n\n// \u65E0\u9700\u540C\u6B65\uFF0C\u5E76\u884C\u664B\u5347\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. PLAB\u5DE5\u4F5C\u539F\u7406"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u5BF9\u8C61\u664B\u5347\u6D41\u7A0B\npublic void promoteObject(Object obj) {\n    // 1. \u5C1D\u8BD5\u5728PLAB\u4E2D\u5206\u914D\n    if (plab.canAllocate(obj.size())) {\n        plab.allocate(obj);\n        return;\n    }\n    \n    // 2. PLAB\u7A7A\u95F4\u4E0D\u8DB3\uFF0C\u7533\u8BF7\u65B0PLAB\n    if (obj.size() < PLAB_SIZE) {\n        plab = allocateNewPLAB();\n        plab.allocate(obj);\n        return;\n    }\n    \n    // 3. \u5BF9\u8C61\u592A\u5927\uFF0C\u76F4\u63A5\u5728\u8001\u5E74\u4EE3\u5206\u914D\uFF08\u9700\u8981\u540C\u6B65\uFF09\n    synchronized (oldGen) {\n        oldGen.allocate(obj);\n    }\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. PLAB\u5927\u5C0F"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u9ED8\u8BA4\u5927\u5C0F\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u52A8\u6001\u8C03\u6574\n# \u6839\u636E\u664B\u5347\u5BF9\u8C61\u5927\u5C0F\u81EA\u52A8\u8C03\u6574PLAB\u5927\u5C0F\n\n# \u67E5\u770BPLAB\u7EDF\u8BA1\n-XX:+PrintPLAB\n\n# \u8F93\u51FA\u793A\u4F8B\nPLAB: 1024K, waste: 10K, refills: 5\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5F71\u54CD\u56E0\u7D20\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"1. \u664B\u5347\u5BF9\u8C61\u7684\u5E73\u5747\u5927\u5C0F\n2. \u664B\u5347\u9891\u7387\n3. \u7EBF\u7A0B\u6570\u91CF\n4. \u8001\u5E74\u4EE3\u53EF\u7528\u7A7A\u95F4\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"5. PLAB vs TLAB\u5BF9\u6BD4"})}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u7279\u6027"}),(0,l.jsx)(e.th,{children:"TLAB"}),(0,l.jsx)(e.th,{children:"PLAB"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u4F4D\u7F6E"}),(0,l.jsx)(e.td,{children:"\u65B0\u751F\u4EE3Eden\u533A"}),(0,l.jsx)(e.td,{children:"\u8001\u5E74\u4EE3"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u7528\u9014"}),(0,l.jsx)(e.td,{children:"\u65B0\u5BF9\u8C61\u5206\u914D"}),(0,l.jsx)(e.td,{children:"\u5BF9\u8C61\u664B\u5347"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u5927\u5C0F"}),(0,l.jsx)(e.td,{children:"\u8F83\u5C0F\uFF08\u51E0KB\uFF09"}),(0,l.jsx)(e.td,{children:"\u8F83\u5927\uFF08\u51E0KB\u5230\u51E0MB\uFF09"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u9891\u7387"}),(0,l.jsx)(e.td,{children:"\u6781\u9AD8"}),(0,l.jsx)(e.td,{children:"\u4E2D\u7B49"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u53C2\u6570"}),(0,l.jsxs)(e.td,{children:["-XX",":TLABSize"]}),(0,l.jsx)(e.td,{children:"\u52A8\u6001\u8C03\u6574"})]})]})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"6. PLAB\u4F18\u52BF"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6027\u80FD\u63D0\u5347\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u65E0PLAB\uFF1A\n// \u6BCF\u6B21\u664B\u5347\u90FD\u9700\u8981\u540C\u6B65\n// \u6027\u80FD\uFF1A1000\u6B21\u664B\u5347/\u79D2\n\n// \u6709PLAB\uFF1A\n// \u6279\u91CF\u664B\u5347\uFF0C\u51CF\u5C11\u540C\u6B65\n// \u6027\u80FD\uFF1A10000\u6B21\u664B\u5347/\u79D2\n\n// \u63D0\u534710\u500D\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u51CF\u5C11\u788E\u7247\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"PLAB\u8FDE\u7EED\u5206\u914D\n\u2192 \u51CF\u5C11\u5185\u5B58\u788E\u7247\n\u2192 \u63D0\u9AD8\u8001\u5E74\u4EE3\u5229\u7528\u7387\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"7. \u76F8\u5173\u53C2\u6570"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u6253\u5370PLAB\u4FE1\u606F\n-XX:+PrintPLAB\n\n# \u6700\u5C0FPLAB\u5927\u5C0F\n-XX:MinPLABSize=1024\n\n# \u6700\u5927PLAB\u5927\u5C0F\n-XX:MaxPLABSize=1048576\n\n# PLAB\u6D6A\u8D39\u9608\u503C\n-XX:PLABWasteTargetPercent=10\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"8. \u5B9E\u9645\u5E94\u7528"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// Young GC\u4E2D\u7684PLAB\u4F7F\u7528\npublic class YoungGC {\n    \n    public void evacuate() {\n        // \u5E76\u884CGC\u7EBF\u7A0B\n        parallelDo(() -> {\n            // \u6BCF\u4E2A\u7EBF\u7A0B\u6709\u81EA\u5DF1\u7684PLAB\n            PLAB plab = allocatePLAB();\n            \n            // \u626B\u63CFSurvivor\u533A\n            for (Object obj : survivor) {\n                if (obj.age >= threshold) {\n                    // \u664B\u5347\u5230\u8001\u5E74\u4EE3\n                    promoteWithPLAB(obj, plab);\n                }\n            }\n        });\n    }\n    \n    private void promoteWithPLAB(Object obj, PLAB plab) {\n        if (plab.canAllocate(obj.size())) {\n            // \u5728PLAB\u4E2D\u5206\u914D\n            plab.allocate(obj);\n        } else {\n            // PLAB\u6EE1\uFF0C\u7533\u8BF7\u65B0\u7684\n            plab = allocateNewPLAB();\n            plab.allocate(obj);\n        }\n    }\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"9. \u76D1\u63A7PLAB"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# GC\u65E5\u5FD7\u4E2D\u7684PLAB\u4FE1\u606F\n-XX:+PrintGCDetails -XX:+PrintPLAB\n\n# \u8F93\u51FA\u793A\u4F8B\n[GC Worker #0: PLAB: 2048K, waste: 100K, refills: 3]\n[GC Worker #1: PLAB: 2048K, waste: 50K, refills: 2]\n[GC Worker #2: PLAB: 2048K, waste: 80K, refills: 4]\n\n# waste: PLAB\u6D6A\u8D39\u7684\u7A7A\u95F4\n# refills: PLAB\u91CD\u65B0\u5206\u914D\u6B21\u6570\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"10. \u4F18\u5316\u5EFA\u8BAE"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// 1. \u51CF\u5C11\u664B\u5347\u9891\u7387\n// \u589E\u5927\u65B0\u751F\u4EE3\uFF0C\u51CF\u5C11Young GC\u9891\u7387\n-Xmn2g\n\n// 2. \u63D0\u9AD8\u664B\u5347\u9608\u503C\n// \u8BA9\u5BF9\u8C61\u5728\u65B0\u751F\u4EE3\u591A\u505C\u7559\u51E0\u6B21\n-XX:MaxTenuringThreshold=15\n\n// 3. \u907F\u514D\u5927\u5BF9\u8C61\u664B\u5347\n// \u5927\u5BF9\u8C61\u76F4\u63A5\u8FDB\u8001\u5E74\u4EE3\uFF0C\u4E0D\u4F7F\u7528PLAB\n-XX:PretenureSizeThreshold=1048576  // 1MB\n\n// 4. \u5408\u7406\u8BBE\u7F6E\u8001\u5E74\u4EE3\u5927\u5C0F\n// \u786E\u4FDD\u6709\u8DB3\u591F\u7A7A\u95F4\u5206\u914DPLAB\n-Xmx4g\n"})}),"\n",(0,l.jsx)(e.h3,{id:"26-jvm-\u5783\u573E\u56DE\u6536\u65F6\u4EA7\u751F\u7684-concurrent-mode-failure-\u7684\u539F\u56E0\u662F\u4EC0\u4E48",children:"26. JVM \u5783\u573E\u56DE\u6536\u65F6\u4EA7\u751F\u7684 concurrent mode failure \u7684\u539F\u56E0\u662F\u4EC0\u4E48\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"Concurrent Mode Failure\u662FCMS\u5E76\u53D1\u6536\u96C6\u671F\u95F4\u8001\u5E74\u4EE3\u7A7A\u95F4\u4E0D\u8DB3\u5BFC\u81F4\u7684\u5931\u8D25\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4E3B\u8981\u539F\u56E0\uFF1A"})}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u5E76\u53D1\u671F\u95F4\u664B\u5347\u8FC7\u5FEB"}),"\uFF1AYoung GC\u9891\u7E41\uFF0C\u5BF9\u8C61\u5FEB\u901F\u664B\u5347\u5230\u8001\u5E74\u4EE3"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u89E6\u53D1\u65F6\u673A\u8FC7\u665A"}),"\uFF1ACMSInitiatingOccupancyFraction\u8BBE\u7F6E\u8FC7\u9AD8"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u5185\u5B58\u788E\u7247"}),"\uFF1ACMS\u4F7F\u7528\u6807\u8BB0-\u6E05\u9664\uFF0C\u4EA7\u751F\u788E\u7247\u5BFC\u81F4\u5206\u914D\u5931\u8D25"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u540E\u679C\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u964D\u7EA7\u4E3ASerial Old\u5355\u7EBF\u7A0BFull GC"}),"\n",(0,l.jsx)(e.li,{children:"\u5E94\u7528\u6682\u505C\u65F6\u95F4\u957F\uFF08\u51E0\u79D2\uFF09"}),"\n",(0,l.jsx)(e.li,{children:"\u4E25\u91CD\u5F71\u54CD\u6027\u80FD"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u89E3\u51B3\u65B9\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u63D0\u524D\u89E6\u53D1CMS\n-XX:CMSInitiatingOccupancyFraction=70\n\n# \u589E\u5927\u5806\n-Xmx4g\n\n# \u6216\u5207\u6362\u5230G1\n-XX:+UseG1GC\n"})}),"\n",(0,l.jsx)(e.h3,{id:"27-\u4E3A\u4EC0\u4E48-java-\u4E2D-cms-\u5783\u573E\u6536\u96C6\u5668\u5728\u53D1\u751F-concurrent-mode-failure-\u65F6\u7684-full-gc-\u662F\u5355\u7EBF\u7A0B\u7684",children:"27. \u4E3A\u4EC0\u4E48 Java \u4E2D CMS \u5783\u573E\u6536\u96C6\u5668\u5728\u53D1\u751F Concurrent Mode Failure \u65F6\u7684 Full GC \u662F\u5355\u7EBF\u7A0B\u7684\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"CMS\u5931\u8D25\u65F6\u964D\u7EA7\u4E3ASerial Old\u6536\u96C6\u5668\uFF0C\u8FD9\u662F\u5386\u53F2\u8BBE\u8BA1\u51B3\u5B9A\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u539F\u56E0\uFF1A"})}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u5386\u53F2\u8BBE\u8BA1"}),"\uFF1ACMS\u8BBE\u8BA1\u65F6\u9009\u62E9Serial Old\u4F5C\u4E3A\u540E\u5907"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u6570\u636E\u7ED3\u6784\u4E0D\u517C\u5BB9"}),"\uFF1ACMS\u4E0EParallel Old\u6570\u636E\u7ED3\u6784\u4E0D\u540C"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u5B9E\u73B0\u7B80\u5355"}),"\uFF1ASerial Old\u7A33\u5B9A\u53EF\u9760"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6027\u80FD\u5F71\u54CD\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u6B63\u5E38CMS\uFF1A\u6682\u505C50ms\nSerial Old Full GC\uFF1A\u6682\u505C5000ms\uFF08100\u500D\u5DEE\u8DDD\uFF09\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u89E3\u51B3\u65B9\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u5207\u6362\u5230G1\uFF08\u591A\u7EBF\u7A0BFull GC\uFF09\n-XX:+UseG1GC\n"})}),"\n",(0,l.jsx)(e.h3,{id:"28-\u4E3A\u4EC0\u4E48-java-\u4E2D\u67D0\u4E9B\u65B0\u751F\u4EE3\u548C\u8001\u5E74\u4EE3\u7684\u5783\u573E\u6536\u96C6\u5668\u4E0D\u80FD\u7EC4\u5408\u4F7F\u7528\u6BD4\u5982-parnew-\u548C-parallel-old",children:"28. \u4E3A\u4EC0\u4E48 Java \u4E2D\u67D0\u4E9B\u65B0\u751F\u4EE3\u548C\u8001\u5E74\u4EE3\u7684\u5783\u573E\u6536\u96C6\u5668\u4E0D\u80FD\u7EC4\u5408\u4F7F\u7528\uFF1F\u6BD4\u5982 ParNew \u548C Parallel Old"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"\u6536\u96C6\u5668\u7EC4\u5408\u9650\u5236\u6E90\u4E8E\u6846\u67B6\u3001\u6570\u636E\u7ED3\u6784\u548C\u8BBE\u8BA1\u76EE\u6807\u7684\u4E0D\u517C\u5BB9\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u53EF\u7528\u7EC4\u5408\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"Serial -> Serial Old\nParNew -> CMS\nParallel -> Parallel Old\nG1 -> G1\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4E0D\u517C\u5BB9\u539F\u56E0\uFF1A"})}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u6846\u67B6\u4E0D\u540C"}),"\uFF1AParNew\u57FA\u4E8ECMS\u6846\u67B6\uFF0CParallel Old\u57FA\u4E8EParallel\u6846\u67B6"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u6570\u636E\u7ED3\u6784\u4E0D\u540C"}),"\uFF1ACard Table vs Region-based"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u8BBE\u8BA1\u76EE\u6807\u4E0D\u540C"}),"\uFF1A\u4F4E\u5EF6\u8FDF vs \u9AD8\u541E\u5410\u91CF"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u63A8\u8350\u914D\u7F6E\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u4F4E\u5EF6\u8FDF\n-XX:+UseG1GC\n\n# \u9AD8\u541E\u5410\n-XX:+UseParallelGC\n"})}),"\n",(0,l.jsx)(e.h3,{id:"29-jvm-\u65B0\u751F\u4EE3\u5783\u573E\u56DE\u6536\u5982\u4F55\u907F\u514D\u5168\u5806\u626B\u63CF",children:"29. JVM \u65B0\u751F\u4EE3\u5783\u573E\u56DE\u6536\u5982\u4F55\u907F\u514D\u5168\u5806\u626B\u63CF\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"\u901A\u8FC7Card Table\u548C\u5199\u5C4F\u969C\u6280\u672F\u907F\u514D\u626B\u63CF\u6574\u4E2A\u8001\u5E74\u4EE3\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Card Table\u539F\u7406\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u5C06\u8001\u5E74\u4EE3\u5212\u5206\u4E3A512\u5B57\u8282\u7684Card\n// \u7528\u5B57\u8282\u6570\u7EC4\u8BB0\u5F55\u54EA\u4E9BCard\u6709\u8DE8\u4EE3\u5F15\u7528\nbyte[] cardTable;\n\n// \u5199\u5C4F\u969C\u81EA\u52A8\u6807\u8BB0\nvoid writeBarrier(Object obj, Object ref) {\n    obj.field = ref;\n    if (isOld(obj) && isYoung(ref)) {\n        cardTable.markDirty(obj);\n    }\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Young GC\u6D41\u7A0B\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u53EA\u626B\u63CF\u810FCard\uFF0C\u4E0D\u626B\u63CF\u6574\u4E2A\u8001\u5E74\u4EE3\nfor (Card card : dirtyCards) {\n    scanCard(card);\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6027\u80FD\u63D0\u5347\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4ECE\u626B\u63CF\u51E0GB\u964D\u5230\u51E0MB"}),"\n",(0,l.jsx)(e.li,{children:"\u6027\u80FD\u63D0\u5347100\u500D\u4EE5\u4E0A"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"30-java-\u7684-cms-\u5783\u573E\u56DE\u6536\u5668\u548C-g1-\u5783\u573E\u56DE\u6536\u5668\u5728\u8BB0\u5FC6\u96C6\u7684\u7EF4\u62A4\u4E0A\u6709\u4EC0\u4E48\u4E0D\u540C",children:"30. Java \u7684 CMS \u5783\u573E\u56DE\u6536\u5668\u548C G1 \u5783\u573E\u56DE\u6536\u5668\u5728\u8BB0\u5FC6\u96C6\u7684\u7EF4\u62A4\u4E0A\u6709\u4EC0\u4E48\u4E0D\u540C\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"CMS\u4F7F\u7528Card Table\uFF0CG1\u4F7F\u7528Remembered Set\uFF0C\u7C92\u5EA6\u548C\u7CBE\u5EA6\u4E0D\u540C\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5BF9\u6BD4\uFF1A"})}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u7279\u6027"}),(0,l.jsx)(e.th,{children:"CMS Card Table"}),(0,l.jsx)(e.th,{children:"G1 Remembered Set"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u7C92\u5EA6"}),(0,l.jsx)(e.td,{children:"512\u5B57\u8282"}),(0,l.jsx)(e.td,{children:"Region\uFF081-32MB\uFF09"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u8BB0\u5F55\u5185\u5BB9"}),(0,l.jsx)(e.td,{children:"\u662F\u5426\u6709\u5F15\u7528"}),(0,l.jsx)(e.td,{children:"\u7CBE\u786E\u5F15\u7528\u6765\u6E90"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u7A7A\u95F4\u5F00\u9500"}),(0,l.jsx)(e.td,{children:"0.2%"}),(0,l.jsx)(e.td,{children:"5-10%"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u626B\u63CF\u6548\u7387"}),(0,l.jsx)(e.td,{children:"\u4E2D\u7B49"}),(0,l.jsx)(e.td,{children:"\u9AD8"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u9002\u7528\u573A\u666F"}),(0,l.jsx)(e.td,{children:"\u5C0F\u5806"}),(0,l.jsx)(e.td,{children:"\u5927\u5806"})]})]})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"CMS\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u7B80\u5355\u6807\u8BB0Card\u4E3A\u810F\ncardTable[index] = DIRTY;\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"G1\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u7CBE\u786E\u8BB0\u5F55\u5F15\u7528\u6765\u6E90\nregion.rset.addReference(fromRegion, card);\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u9009\u62E9\u5EFA\u8BAE\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5C0F\u5806\uFF08\u5C0F\u4E8E4GB\uFF09\uFF1ACMS"}),"\n",(0,l.jsx)(e.li,{children:"\u5927\u5806\uFF08\u5927\u4E8E4GB\uFF09\uFF1AG1"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"31-\u4E3A\u4EC0\u4E48-g1-\u5783\u573E\u6536\u96C6\u5668\u4E0D\u7EF4\u62A4\u5E74\u8F7B\u4EE3\u5230\u8001\u5E74\u4EE3\u7684\u8BB0\u5FC6\u96C6",children:"31. \u4E3A\u4EC0\u4E48 G1 \u5783\u573E\u6536\u96C6\u5668\u4E0D\u7EF4\u62A4\u5E74\u8F7B\u4EE3\u5230\u8001\u5E74\u4EE3\u7684\u8BB0\u5FC6\u96C6\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"G1\u53EA\u7EF4\u62A4\u8001\u5E74\u4EE3\u5230\u5E74\u8F7B\u4EE3\u7684\u8BB0\u5FC6\u96C6\uFF0C\u56E0\u4E3A\u5E74\u8F7B\u4EE3\u603B\u662F\u4F1A\u88AB\u5B8C\u6574\u6536\u96C6\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u539F\u56E0\u5206\u6790\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. \u5E74\u8F7B\u4EE3\u603B\u662F\u5168\u90E8\u6536\u96C6"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// G1\u7684Young GC\n// \u603B\u662F\u6536\u96C6\u6240\u6709\u5E74\u8F7B\u4EE3Region\nvoid youngGC() {\n    // \u6536\u96C6\u6240\u6709Eden Region\n    collectAllEdenRegions();\n    \n    // \u6536\u96C6\u6240\u6709Survivor Region\n    collectAllSurvivorRegions();\n    \n    // \u65E0\u9700\u8BB0\u5FC6\u96C6\uFF0C\u56E0\u4E3A\u5168\u90E8\u626B\u63CF\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u8001\u5E74\u4EE3\u90E8\u5206\u6536\u96C6"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// G1\u7684Mixed GC\n// \u53EA\u6536\u96C6\u90E8\u5206\u8001\u5E74\u4EE3Region\nvoid mixedGC() {\n    // \u6536\u96C6\u6240\u6709\u5E74\u8F7B\u4EE3\n    collectYoungRegions();\n    \n    // \u53EA\u6536\u96C6\u90E8\u5206\u8001\u5E74\u4EE3\n    collectSelectedOldRegions();\n    \n    // \u9700\u8981RSet\u8BB0\u5F55\u5176\u4ED6\u8001\u5E74\u4EE3Region\u7684\u5F15\u7528\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. \u8BB0\u5FC6\u96C6\u7684\u4F5C\u7528"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u8BB0\u5FC6\u96C6\u7528\u4E8E\uFF1A\n- \u907F\u514D\u626B\u63CF\u6574\u4E2A\u5806\n- \u53EA\u626B\u63CF\u53EF\u80FD\u5305\u542B\u5F15\u7528\u7684\u533A\u57DF\n\n\u5E74\u8F7B\u4EE3\u2192\u8001\u5E74\u4EE3\uFF1A\n- \u4E0D\u9700\u8981RSet\n- \u56E0\u4E3A\u5E74\u8F7B\u4EE3\u603B\u662F\u5168\u90E8\u6536\u96C6\n- \u6240\u6709\u5F15\u7528\u90FD\u4F1A\u88AB\u626B\u63CF\u5230\n\n\u8001\u5E74\u4EE3\u2192\u5E74\u8F7B\u4EE3\uFF1A\n- \u9700\u8981RSet\n- \u56E0\u4E3A\u53EA\u6536\u96C6\u90E8\u5206\u8001\u5E74\u4EE3\n- \u9700\u8981\u77E5\u9053\u54EA\u4E9B\u8001\u5E74\u4EE3Region\u5F15\u7528\u4E86\u5E74\u8F7B\u4EE3\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. \u5185\u5B58\u5F00\u9500\u8003\u8651"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u5982\u679C\u7EF4\u62A4\u5E74\u8F7B\u4EE3\u2192\u8001\u5E74\u4EE3RSet\uFF1A\n- \u989D\u5916\u7684\u5185\u5B58\u5F00\u9500\n- \u989D\u5916\u7684\u7EF4\u62A4\u6210\u672C\n- \u6CA1\u6709\u5B9E\u9645\u6536\u76CA\uFF08\u56E0\u4E3A\u5E74\u8F7B\u4EE3\u603B\u662F\u5168\u6536\u96C6\uFF09\n"})}),"\n",(0,l.jsx)(e.h3,{id:"32-java-\u4E2D\u7684-cms-\u548C-g1-\u5783\u573E\u6536\u96C6\u5668\u5982\u4F55\u7EF4\u6301\u5E76\u53D1\u7684\u6B63\u786E\u6027",children:"32. Java \u4E2D\u7684 CMS \u548C G1 \u5783\u573E\u6536\u96C6\u5668\u5982\u4F55\u7EF4\u6301\u5E76\u53D1\u7684\u6B63\u786E\u6027\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"CMS\u4F7F\u7528\u589E\u91CF\u66F4\u65B0\uFF0CG1\u4F7F\u7528SATB\uFF08\u539F\u59CB\u5FEB\u7167\uFF09\uFF0C\u90FD\u901A\u8FC7\u5199\u5C4F\u969C\u7EF4\u6301\u5E76\u53D1\u6B63\u786E\u6027\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"CMS\u589E\u91CF\u66F4\u65B0\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u5F53\u9ED1\u8272\u5BF9\u8C61\u5F15\u7528\u767D\u8272\u5BF9\u8C61\u65F6\nvoid cmsWriteBarrier(Object obj, Object ref) {\n    if (obj.isBlack() && ref.isWhite()) {\n        // \u5C06\u9ED1\u8272\u5BF9\u8C61\u91CD\u65B0\u6807\u8BB0\u4E3A\u7070\u8272\n        obj.setGray();\n    }\n    obj.field = ref;\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"G1 SATB\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u8BB0\u5F55\u5220\u9664\u7684\u5F15\u7528\nvoid g1WriteBarrier(Object obj, Object newRef) {\n    Object oldRef = obj.field;\n    \n    // \u8BB0\u5F55\u65E7\u5F15\u7528\n    if (oldRef != null && isMarking) {\n        satbQueue.enqueue(oldRef);\n    }\n    \n    obj.field = newRef;\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5BF9\u6BD4\uFF1A"})}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u7279\u6027"}),(0,l.jsx)(e.th,{children:"CMS\u589E\u91CF\u66F4\u65B0"}),(0,l.jsx)(e.th,{children:"G1 SATB"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u7B56\u7565"}),(0,l.jsx)(e.td,{children:"\u8BB0\u5F55\u65B0\u589E\u5F15\u7528"}),(0,l.jsx)(e.td,{children:"\u8BB0\u5F55\u5220\u9664\u5F15\u7528"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u91CD\u65B0\u6807\u8BB0\u5DE5\u4F5C\u91CF"}),(0,l.jsx)(e.td,{children:"\u8F83\u5927"}),(0,l.jsx)(e.td,{children:"\u8F83\u5C0F"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u6D6E\u52A8\u5783\u573E"}),(0,l.jsx)(e.td,{children:"\u8F83\u5C11"}),(0,l.jsx)(e.td,{children:"\u8F83\u591A"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u5B9E\u73B0\u590D\u6742\u5EA6"}),(0,l.jsx)(e.td,{children:"\u7B80\u5355"}),(0,l.jsx)(e.td,{children:"\u590D\u6742"})]})]})]}),"\n",(0,l.jsx)(e.h3,{id:"33-java-g1-\u76F8\u5BF9\u4E8E-cms-\u6709\u54EA\u4E9B\u8FDB\u6B65\u7684\u5730\u65B9",children:"33. Java G1 \u76F8\u5BF9\u4E8E CMS \u6709\u54EA\u4E9B\u8FDB\u6B65\u7684\u5730\u65B9?"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"G1\u5728\u53EF\u9884\u6D4B\u6027\u3001\u5185\u5B58\u788E\u7247\u3001\u5927\u5806\u652F\u6301\u7B49\u65B9\u9762\u90FD\u4F18\u4E8ECMS\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4E3B\u8981\u8FDB\u6B65\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. \u53EF\u9884\u6D4B\u7684\u505C\u987F\u65F6\u95F4"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# G1\u53EF\u4EE5\u8BBE\u7F6E\u505C\u987F\u65F6\u95F4\u76EE\u6807\n-XX:MaxGCPauseMillis=200\n\n# CMS\u65E0\u6CD5\u7CBE\u786E\u63A7\u5236\u505C\u987F\u65F6\u95F4\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u65E0\u5185\u5B58\u788E\u7247"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"CMS\uFF1A\u6807\u8BB0-\u6E05\u9664\uFF0C\u4EA7\u751F\u788E\u7247\nG1\uFF1A\u6807\u8BB0-\u6574\u7406\uFF0C\u65E0\u788E\u7247\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. \u5927\u5806\u652F\u6301\u66F4\u597D"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"CMS\uFF1A\u9002\u5408\u5C0F\u4E8E8GB\nG1\uFF1A\u9002\u54088-64GB\nZGC\uFF1A\u5927\u4E8E64GB\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. \u5206\u4EE3\u6536\u96C6\u66F4\u7075\u6D3B"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"CMS\uFF1A\u56FA\u5B9A\u7684\u65B0\u751F\u4EE3\u548C\u8001\u5E74\u4EE3\nG1\uFF1A\u52A8\u6001\u8C03\u6574Region\u89D2\u8272\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"5. \u907F\u514DConcurrent Mode Failure"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"CMS\uFF1A\u53EF\u80FD\u964D\u7EA7\u4E3ASerial Old\nG1\uFF1A\u4F7F\u7528Evacuation Failure\u673A\u5236\uFF0C\u6027\u80FD\u5F71\u54CD\u5C0F\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"6. \u6574\u4F53\u541E\u5410\u91CF\u66F4\u9AD8"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"CMS\uFF1A\u5E76\u53D1\u6536\u96C6\uFF0C\u4F46\u788E\u7247\u5F71\u54CD\u6027\u80FD\nG1\uFF1A\u6574\u7406\u5185\u5B58\uFF0C\u957F\u671F\u6027\u80FD\u66F4\u7A33\u5B9A\n"})}),"\n",(0,l.jsx)(e.h3,{id:"34-\u4EC0\u4E48\u662F-java-\u4E2D\u7684-logging-write-barrier",children:"34. \u4EC0\u4E48\u662F Java \u4E2D\u7684 logging write barrier\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"Logging Write Barrier\u662FG1\u7528\u4E8E\u7EF4\u62A4Remembered Set\u7684\u5199\u5C4F\u969C\u673A\u5236\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5DE5\u4F5C\u539F\u7406\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// G1\u7684\u5199\u5C4F\u969C\nvoid g1WriteBarrier(Object obj, Object newRef) {\n    // 1. SATB\u5199\u5C4F\u969C\uFF08\u5E76\u53D1\u6807\u8BB0\u671F\u95F4\uFF09\n    if (isMarking) {\n        Object oldRef = obj.field;\n        if (oldRef != null) {\n            satbQueue.enqueue(oldRef);\n        }\n    }\n    \n    // 2. \u5B9E\u9645\u8D4B\u503C\n    obj.field = newRef;\n    \n    // 3. RSet\u7EF4\u62A4\u5199\u5C4F\u969C\n    if (newRef != null) {\n        Region fromRegion = getRegion(obj);\n        Region toRegion = getRegion(newRef);\n        \n        if (fromRegion != toRegion) {\n            // \u8BB0\u5F55\u5230\u65E5\u5FD7\u7F13\u51B2\u533A\n            logBuffer.add(fromRegion, toRegion, getCard(obj));\n        }\n    }\n}\n\n// \u540E\u53F0\u7EBF\u7A0B\u5904\u7406\u65E5\u5FD7\nvoid processLogBuffer() {\n    for (LogEntry entry : logBuffer) {\n        entry.toRegion.rset.add(entry.fromRegion, entry.card);\n    }\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4F18\u52BF\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5E94\u7528\u7EBF\u7A0B\u53EA\u8BB0\u5F55\u65E5\u5FD7\uFF0C\u5F00\u9500\u5C0F"}),"\n",(0,l.jsx)(e.li,{children:"\u540E\u53F0\u7EBF\u7A0B\u5F02\u6B65\u66F4\u65B0RSet"}),"\n",(0,l.jsx)(e.li,{children:"\u51CF\u5C11\u5E94\u7528\u7EBF\u7A0B\u505C\u987F"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"35-java-\u7684-g1-\u5783\u573E\u56DE\u6536\u6D41\u7A0B\u662F\u600E\u6837\u7684",children:"35. Java \u7684 G1 \u5783\u573E\u56DE\u6536\u6D41\u7A0B\u662F\u600E\u6837\u7684\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"G1\u5305\u62ECYoung GC\u3001\u5E76\u53D1\u6807\u8BB0\u548CMixed GC\u4E09\u4E2A\u4E3B\u8981\u9636\u6BB5\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. Young GC\uFF08\u9891\u7E41\uFF09"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"1. \u9009\u62E9\u6240\u6709\u5E74\u8F7B\u4EE3Region\n2. STW\uFF0C\u590D\u5236\u5B58\u6D3B\u5BF9\u8C61\n3. \u90E8\u5206\u5BF9\u8C61\u664B\u5347\u5230\u8001\u5E74\u4EE3\n4. \u65F6\u95F4\uFF1A10-50ms\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u5E76\u53D1\u6807\u8BB0\u5468\u671F"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u9636\u6BB51\uFF1A\u521D\u59CB\u6807\u8BB0\uFF08STW\uFF09\n- \u6807\u8BB0GC Roots\n- \u65F6\u95F4\uFF1A\u51E0\u6BEB\u79D2\n\n\u9636\u6BB52\uFF1A\u5E76\u53D1\u6807\u8BB0\n- \u5E76\u53D1\u904D\u5386\u5BF9\u8C61\u56FE\n- \u4F7F\u7528SATB\n- \u65F6\u95F4\uFF1A\u51E0\u767E\u6BEB\u79D2\n\n\u9636\u6BB53\uFF1A\u6700\u7EC8\u6807\u8BB0\uFF08STW\uFF09\n- \u5904\u7406SATB\u961F\u5217\n- \u65F6\u95F4\uFF1A\u51E0\u5341\u6BEB\u79D2\n\n\u9636\u6BB54\uFF1A\u6E05\u7406\uFF08\u90E8\u5206STW\uFF09\n- \u7EDF\u8BA1Region\u5B58\u6D3B\u7387\n- \u9009\u62E9\u56DE\u6536\u96C6\u5408\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. Mixed GC"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"1. \u6536\u96C6\u6240\u6709\u5E74\u8F7B\u4EE3Region\n2. \u6536\u96C6\u90E8\u5206\u8001\u5E74\u4EE3Region\uFF08\u5783\u573E\u6700\u591A\u7684\uFF09\n3. \u6839\u636E\u505C\u987F\u65F6\u95F4\u76EE\u6807\u9009\u62E9Region\u6570\u91CF\n4. \u65F6\u95F4\uFF1A\u53EF\u63A7\u5236\u5728MaxGCPauseMillis\u5185\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5B8C\u6574\u6D41\u7A0B\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"Young GC \u2192 Young GC \u2192 ... \n    \u2193\uFF08\u8001\u5E74\u4EE3\u5360\u7528\u8FBE\u523045%\uFF09\n\u5E76\u53D1\u6807\u8BB0\u5468\u671F\n    \u2193\nMixed GC \u2192 Mixed GC \u2192 ...\n    \u2193\nYoung GC \u2192 ...\n"})}),"\n",(0,l.jsx)(e.h3,{id:"36-java-\u7684-cms-\u5783\u573E\u56DE\u6536\u6D41\u7A0B\u662F\u600E\u6837\u7684",children:"36. Java \u7684 CMS \u5783\u573E\u56DE\u6536\u6D41\u7A0B\u662F\u600E\u6837\u7684\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"CMS\u5206\u4E3A4\u4E2A\u9636\u6BB5\uFF1A\u521D\u59CB\u6807\u8BB0\u3001\u5E76\u53D1\u6807\u8BB0\u3001\u91CD\u65B0\u6807\u8BB0\u3001\u5E76\u53D1\u6E05\u9664\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5B8C\u6574\u6D41\u7A0B\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u9636\u6BB51\uFF1A\u521D\u59CB\u6807\u8BB0\uFF08STW\uFF09"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"- \u6807\u8BB0GC Roots\u76F4\u63A5\u5F15\u7528\u7684\u5BF9\u8C61\n- \u65F6\u95F4\u77ED\uFF1A\u51E0\u6BEB\u79D2\n- \u591A\u7EBF\u7A0B\u6267\u884C\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u9636\u6BB52\uFF1A\u5E76\u53D1\u6807\u8BB0"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"- \u4E0E\u5E94\u7528\u7EBF\u7A0B\u5E76\u53D1\u6267\u884C\n- \u904D\u5386\u5BF9\u8C61\u56FE\uFF0C\u6807\u8BB0\u53EF\u8FBE\u5BF9\u8C61\n- \u4F7F\u7528\u589E\u91CF\u66F4\u65B0\n- \u65F6\u95F4\u957F\uFF1A\u51E0\u767E\u6BEB\u79D2\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u9636\u6BB53\uFF1A\u91CD\u65B0\u6807\u8BB0\uFF08STW\uFF09"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"- \u5904\u7406\u5E76\u53D1\u6807\u8BB0\u671F\u95F4\u7684\u53D8\u5316\n- \u626B\u63CFCard Table\n- \u65F6\u95F4\uFF1A\u51E0\u5341\u6BEB\u79D2\n- \u591A\u7EBF\u7A0B\u6267\u884C\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u9636\u6BB54\uFF1A\u5E76\u53D1\u6E05\u9664"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"- \u4E0E\u5E94\u7528\u7EBF\u7A0B\u5E76\u53D1\u6267\u884C\n- \u6E05\u9664\u672A\u6807\u8BB0\u7684\u5BF9\u8C61\n- \u4E0D\u79FB\u52A8\u5BF9\u8C61\uFF0C\u4EA7\u751F\u788E\u7247\n- \u65F6\u95F4\uFF1A\u51E0\u767E\u6BEB\u79D2\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u65F6\u95F4\u7EBF\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u521D\u59CB\u6807\u8BB0(STW 5ms) \u2192 \u5E76\u53D1\u6807\u8BB0(300ms) \u2192 \u91CD\u65B0\u6807\u8BB0(STW 50ms) \u2192 \u5E76\u53D1\u6E05\u9664(200ms)\n"})}),"\n",(0,l.jsx)(e.h3,{id:"37-\u4F60\u4E86\u89E3-java-\u7684-zgcz-garbage-collector\u5417",children:"37. \u4F60\u4E86\u89E3 Java \u7684 ZGC\uFF08Z Garbage Collector\uFF09\u5417\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"ZGC\u662FJDK 11\u5F15\u5165\u7684\u4F4E\u5EF6\u8FDF\u5783\u573E\u6536\u96C6\u5668\uFF0C\u505C\u987F\u65F6\u95F4\u5C0F\u4E8E10ms\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6838\u5FC3\u7279\u6027\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. \u8D85\u4F4E\u5EF6\u8FDF"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u505C\u987F\u65F6\u95F4\uFF1A\u5C0F\u4E8E10ms\n\u4E0E\u5806\u5927\u5C0F\u65E0\u5173\n\u9002\u7528\u4E8E\u5927\u5806\uFF08\u5927\u4E8E64GB\uFF09\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. Colored Pointer"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// 64\u4F4D\u6307\u9488\u5E03\u5C40\n[unused 16bit][Finalizable 1bit][Remapped 1bit][Marked1 1bit][Marked0 1bit][address 44bit]\n\n// \u901A\u8FC7\u6307\u9488\u989C\u8272\u8BB0\u5F55\u5BF9\u8C61\u72B6\u6001\n// \u65E0\u9700\u989D\u5916\u5185\u5B58\u5F00\u9500\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. Load Barrier"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u8BFB\u5C4F\u969C\uFF0C\u5728\u8BFB\u53D6\u5BF9\u8C61\u65F6\u89E6\u53D1\nvoid loadBarrier(Object obj) {\n    if (needsBarrier(obj)) {\n        // \u91CD\u5B9A\u4F4D\u5BF9\u8C61\n        obj = relocate(obj);\n    }\n    return obj;\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. \u5E76\u53D1\u6536\u96C6"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u6240\u6709\u9636\u6BB5\u51E0\u4E4E\u90FD\u662F\u5E76\u53D1\u7684\uFF1A\n- \u5E76\u53D1\u6807\u8BB0\n- \u5E76\u53D1\u91CD\u5B9A\u4F4D\n- \u5E76\u53D1\u5F15\u7528\u5904\u7406\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4F7F\u7528\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"-XX:+UseZGC\n-Xmx16g\n"})}),"\n",(0,l.jsx)(e.h3,{id:"38-jvm-\u5783\u573E\u56DE\u6536\u8C03\u4F18\u7684\u4E3B\u8981\u76EE\u6807\u662F\u4EC0\u4E48",children:"38. JVM \u5783\u573E\u56DE\u6536\u8C03\u4F18\u7684\u4E3B\u8981\u76EE\u6807\u662F\u4EC0\u4E48\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"GC\u8C03\u4F18\u76EE\u6807\u662F\u5E73\u8861\u5EF6\u8FDF\u3001\u541E\u5410\u91CF\u548C\u5185\u5B58\u5360\u7528\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4E09\u5927\u76EE\u6807\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. \u964D\u4F4E\u5EF6\u8FDF"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"- \u51CF\u5C11GC\u505C\u987F\u65F6\u95F4\n- \u51CF\u5C11GC\u9891\u7387\n- \u76EE\u6807\uFF1AGC\u505C\u987F\u5C0F\u4E8E100ms\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u63D0\u9AD8\u541E\u5410\u91CF"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"- \u589E\u52A0\u5E94\u7528\u8FD0\u884C\u65F6\u95F4\u5360\u6BD4\n- \u51CF\u5C11GC\u65F6\u95F4\u5360\u6BD4\n- \u76EE\u6807\uFF1AGC\u65F6\u95F4\u5C0F\u4E8E5%\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. \u63A7\u5236\u5185\u5B58\u5360\u7528"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"- \u5408\u7406\u8BBE\u7F6E\u5806\u5927\u5C0F\n- \u907F\u514D\u5185\u5B58\u6D6A\u8D39\n- \u76EE\u6807\uFF1A\u5185\u5B58\u5229\u7528\u7387>70%\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4E0D\u53EF\u80FD\u4E09\u89D2\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u4F4E\u5EF6\u8FDF \u2190\u2192 \u9AD8\u541E\u5410\u91CF\n    \u2191\n \u4F4E\u5185\u5B58\n\n\u53EA\u80FD\u540C\u65F6\u6EE1\u8DB3\u4E24\u4E2A\u76EE\u6807\n"})}),"\n",(0,l.jsx)(e.h3,{id:"39-\u5982\u4F55\u5BF9-java-\u7684\u5783\u573E\u56DE\u6536\u8FDB\u884C\u8C03\u4F18",children:"39. \u5982\u4F55\u5BF9 Java \u7684\u5783\u573E\u56DE\u6536\u8FDB\u884C\u8C03\u4F18\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"GC\u8C03\u4F18\u9700\u8981\u5206\u6790\u95EE\u9898\u3001\u8BBE\u7F6E\u53C2\u6570\u3001\u6D4B\u8BD5\u9A8C\u8BC1\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u8C03\u4F18\u6B65\u9AA4\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. \u6536\u96C6GC\u65E5\u5FD7"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"-XX:+PrintGCDetails\n-XX:+PrintGCDateStamps\n-Xloggc:gc.log\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u5206\u6790GC\u95EE\u9898"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"- Young GC\u9891\u7E41\uFF1F\u589E\u5927\u65B0\u751F\u4EE3\n- Full GC\u9891\u7E41\uFF1F\u589E\u5927\u8001\u5E74\u4EE3\n- GC\u65F6\u95F4\u957F\uFF1F\u5207\u6362\u6536\u96C6\u5668\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. \u8C03\u6574\u53C2\u6570"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u5806\u5927\u5C0F\n-Xms4g -Xmx4g\n\n# \u65B0\u751F\u4EE3\u5927\u5C0F\n-Xmn1g\n\n# \u6536\u96C6\u5668\n-XX:+UseG1GC\n-XX:MaxGCPauseMillis=200\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. \u9A8C\u8BC1\u6548\u679C"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u76D1\u63A7\u6307\u6807\njstat -gcutil <pid> 1000\n"})}),"\n",(0,l.jsx)(e.h3,{id:"40-\u5E38\u7528\u7684-jvm-\u914D\u7F6E\u53C2\u6570\u6709\u54EA\u4E9B",children:"40. \u5E38\u7528\u7684 JVM \u914D\u7F6E\u53C2\u6570\u6709\u54EA\u4E9B\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5185\u5B58\u914D\u7F6E\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"-Xms4g                    # \u521D\u59CB\u5806\u5927\u5C0F\n-Xmx4g                    # \u6700\u5927\u5806\u5927\u5C0F\n-Xmn1g                    # \u65B0\u751F\u4EE3\u5927\u5C0F\n-Xss1m                    # \u7EBF\u7A0B\u6808\u5927\u5C0F\n-XX:MetaspaceSize=256m   # \u5143\u7A7A\u95F4\u521D\u59CB\u5927\u5C0F\n-XX:MaxMetaspaceSize=512m # \u5143\u7A7A\u95F4\u6700\u5927\u5927\u5C0F\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6536\u96C6\u5668\u9009\u62E9\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"-XX:+UseG1GC              # \u4F7F\u7528G1\n-XX:+UseZGC               # \u4F7F\u7528ZGC\n-XX:+UseConcMarkSweepGC  # \u4F7F\u7528CMS\n-XX:MaxGCPauseMillis=200 # \u6700\u5927\u505C\u987F\u65F6\u95F4\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"GC\u65E5\u5FD7\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"-XX:+PrintGCDetails\n-XX:+PrintGCDateStamps\n-Xloggc:gc.log\n-XX:+UseGCLogFileRotation\n-XX:NumberOfGCLogFiles=10\n-XX:GCLogFileSize=100M\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"OOM\u5904\u7406\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'-XX:+HeapDumpOnOutOfMemoryError\n-XX:HeapDumpPath=/logs/heapdump.hprof\n-XX:OnOutOfMemoryError="sh /scripts/restart.sh"\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6027\u80FD\u8C03\u4F18\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"-XX:+UseStringDeduplication  # \u5B57\u7B26\u4E32\u53BB\u91CD\n-XX:+UseTLAB                  # \u7EBF\u7A0B\u672C\u5730\u5206\u914D\u7F13\u51B2\n"})}),"\n",(0,l.jsx)(e.h3,{id:"41-\u4F60\u5E38\u7528\u54EA\u4E9B\u5DE5\u5177\u6765\u5206\u6790-jvm-\u6027\u80FD",children:"41. \u4F60\u5E38\u7528\u54EA\u4E9B\u5DE5\u5177\u6765\u5206\u6790 JVM \u6027\u80FD\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u547D\u4EE4\u884C\u5DE5\u5177\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# jps - \u67E5\u770BJava\u8FDB\u7A0B\njps -lvm\n\n# jstat - GC\u7EDF\u8BA1\njstat -gcutil <pid> 1000\n\n# jmap - \u5806\u8F6C\u50A8\njmap -dump:live,format=b,file=heap.bin <pid>\n\n# jstack - \u7EBF\u7A0B\u5806\u6808\njstack <pid> > thread.txt\n\n# jinfo - JVM\u53C2\u6570\njinfo -flags <pid>\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u56FE\u5F62\u5316\u5DE5\u5177\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"- JConsole\uFF1A\u5B9E\u65F6\u76D1\u63A7\n- VisualVM\uFF1A\u5168\u9762\u5206\u6790\n- JProfiler\uFF1A\u6027\u80FD\u5206\u6790\n- MAT\uFF1A\u5185\u5B58\u5206\u6790\n- GCViewer\uFF1AGC\u65E5\u5FD7\u5206\u6790\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5728\u7EBF\u5DE5\u5177\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"- Arthas\uFF1A\u963F\u91CC\u5F00\u6E90\u8BCA\u65AD\u5DE5\u5177\n- Async-profiler\uFF1ACPU/\u5185\u5B58\u5206\u6790\n"})}),"\n",(0,l.jsx)(e.h3,{id:"42-\u5982\u4F55\u5728-java-\u4E2D\u8FDB\u884C\u5185\u5B58\u6CC4\u6F0F\u5206\u6790",children:"42. \u5982\u4F55\u5728 Java \u4E2D\u8FDB\u884C\u5185\u5B58\u6CC4\u6F0F\u5206\u6790\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5206\u6790\u6B65\u9AA4\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. \u83B7\u53D6\u5806\u8F6C\u50A8"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u624B\u52A8\u8F6C\u50A8\njmap -dump:live,format=b,file=heap.bin <pid>\n\n# \u81EA\u52A8\u8F6C\u50A8\uFF08OOM\u65F6\uFF09\n-XX:+HeapDumpOnOutOfMemoryError\n-XX:HeapDumpPath=/logs/heapdump.hprof\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u4F7F\u7528MAT\u5206\u6790"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"1. \u6253\u5F00heap.bin\n2. \u67E5\u770BDominator Tree\n3. \u627E\u5230\u5360\u7528\u5185\u5B58\u6700\u591A\u7684\u5BF9\u8C61\n4. \u5206\u6790GC Roots\u5F15\u7528\u94FE\n5. \u5B9A\u4F4D\u6CC4\u6F0F\u4EE3\u7801\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. \u5E38\u89C1\u6CC4\u6F0F\u573A\u666F"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u573A\u666F1\uFF1A\u9759\u6001\u96C6\u5408\npublic class Leak {\n    private static List<Object> list = new ArrayList<>();\n    public void add() {\n        list.add(new Object());  // \u6C38\u4E0D\u6E05\u7406\n    }\n}\n\n// \u573A\u666F2\uFF1AThreadLocal\u672A\u6E05\u7406\nThreadLocal<byte[]> local = new ThreadLocal<>();\nlocal.set(new byte[1024 * 1024]);\n// \u5FD8\u8BB0local.remove()\n\n// \u573A\u666F3\uFF1A\u76D1\u542C\u5668\u672A\u79FB\u9664\nbutton.addListener(listener);\n// \u5FD8\u8BB0button.removeListener(listener)\n"})}),"\n",(0,l.jsx)(e.h3,{id:"43-java-\u91CC\u7684\u5BF9\u8C61\u5728\u865A\u62DF\u673A\u91CC\u9762\u662F\u600E\u4E48\u5B58\u50A8\u7684",children:"43. Java \u91CC\u7684\u5BF9\u8C61\u5728\u865A\u62DF\u673A\u91CC\u9762\u662F\u600E\u4E48\u5B58\u50A8\u7684\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"Java\u5BF9\u8C61\u5728\u5185\u5B58\u4E2D\u5206\u4E3A\u5BF9\u8C61\u5934\u3001\u5B9E\u4F8B\u6570\u636E\u548C\u5BF9\u9F50\u586B\u5145\u4E09\u90E8\u5206\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5BF9\u8C61\u7ED3\u6784\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"[\u5BF9\u8C61\u5934][\u5B9E\u4F8B\u6570\u636E][\u5BF9\u9F50\u586B\u5145]\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. \u5BF9\u8C61\u5934\uFF08Object Header\uFF09"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"Mark Word\uFF088\u5B57\u8282\uFF09\uFF1A\n- \u54C8\u5E0C\u7801\n- GC\u5206\u4EE3\u5E74\u9F84\n- \u9501\u72B6\u6001\u6807\u5FD7\n- \u7EBF\u7A0BID\n\nClass Pointer\uFF084/8\u5B57\u8282\uFF09\uFF1A\n- \u6307\u5411\u7C7B\u5143\u6570\u636E\n- \u5F00\u542F\u6307\u9488\u538B\u7F29\u4E3A4\u5B57\u8282\n\nArray Length\uFF084\u5B57\u8282\uFF0C\u4EC5\u6570\u7EC4\uFF09\uFF1A\n- \u6570\u7EC4\u957F\u5EA6\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u5B9E\u4F8B\u6570\u636E"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"public class User {\n    private int age;      // 4\u5B57\u8282\n    private String name;  // 4/8\u5B57\u8282\uFF08\u5F15\u7528\uFF09\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. \u5BF9\u9F50\u586B\u5145"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u5BF9\u8C61\u5927\u5C0F\u5FC5\u987B\u662F8\u5B57\u8282\u7684\u500D\u6570\n\u4E0D\u8DB3\u90E8\u5206\u7528\u586B\u5145\u8865\u9F50\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u793A\u4F8B\u8BA1\u7B97\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"public class Point {\n    private int x;  // 4\u5B57\u8282\n    private int y;  // 4\u5B57\u8282\n}\n\n// \u5BF9\u8C61\u5927\u5C0F\uFF1A\n// Mark Word: 8\u5B57\u8282\n// Class Pointer: 4\u5B57\u8282\uFF08\u538B\u7F29\uFF09\n// x: 4\u5B57\u8282\n// y: 4\u5B57\u8282\n// \u603B\u8BA1: 20\u5B57\u8282\n// \u5BF9\u9F50\u540E: 24\u5B57\u8282\n"})}),"\n",(0,l.jsx)(e.h3,{id:"44-\u8BF4\u8BF4-java-\u7684\u6267\u884C\u6D41\u7A0B",children:"44. \u8BF4\u8BF4 Java \u7684\u6267\u884C\u6D41\u7A0B?"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B54\u6848\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:"Java\u4EE3\u7801\u7ECF\u8FC7\u7F16\u8BD1\u3001\u52A0\u8F7D\u3001\u9A8C\u8BC1\u3001\u6267\u884C\u591A\u4E2A\u9636\u6BB5\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5B8C\u6574\u6D41\u7A0B\uFF1A"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. \u7F16\u8BD1\u9636\u6BB5"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:".java\u6E90\u6587\u4EF6\n    \u2193 javac\u7F16\u8BD1\n.class\u5B57\u8282\u7801\u6587\u4EF6\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. \u7C7B\u52A0\u8F7D\u9636\u6BB5"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u52A0\u8F7D\uFF08Loading\uFF09\n    \u2193\n\u9A8C\u8BC1\uFF08Verification\uFF09\n    \u2193\n\u51C6\u5907\uFF08Preparation\uFF09\n    \u2193\n\u89E3\u6790\uFF08Resolution\uFF09\n    \u2193\n\u521D\u59CB\u5316\uFF08Initialization\uFF09\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. \u6267\u884C\u9636\u6BB5"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u5B57\u8282\u7801\n    \u2193\n\u89E3\u91CA\u6267\u884C / JIT\u7F16\u8BD1\n    \u2193\n\u672C\u5730\u673A\u5668\u7801\n    \u2193\nCPU\u6267\u884C\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u8BE6\u7EC6\u6D41\u7A0B\uFF1A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'// 1. \u7F16\u5199\u4EE3\u7801\npublic class Hello {\n    public static void main(String[] args) {\n        System.out.println("Hello");\n    }\n}\n\n// 2. javac\u7F16\u8BD1\njavac Hello.java  // \u751F\u6210Hello.class\n\n// 3. java\u8FD0\u884C\njava Hello\n\n// 4. JVM\u6267\u884C\n// - \u7C7B\u52A0\u8F7D\u5668\u52A0\u8F7DHello.class\n// - \u9A8C\u8BC1\u5B57\u8282\u7801\u5408\u6CD5\u6027\n// - \u5206\u914D\u5185\u5B58\uFF0C\u521D\u59CB\u5316\u9759\u6001\u53D8\u91CF\n// - \u6267\u884Cmain\u65B9\u6CD5\n// - \u89E3\u91CA\u6267\u884C\u6216JIT\u7F16\u8BD1\n// - \u8F93\u51FAHello\n'})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"\u5B66\u4E60\u6307\u5357",children:"\u5B66\u4E60\u6307\u5357"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6838\u5FC3\u8981\u70B9\uFF1A"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"JVM \u5185\u5B58\u6A21\u578B\u548C\u5783\u573E\u56DE\u6536\u673A\u5236"}),"\n",(0,l.jsx)(e.li,{children:"\u7C7B\u52A0\u8F7D\u8FC7\u7A0B\u548C\u53CC\u4EB2\u59D4\u6D3E\u6A21\u578B"}),"\n",(0,l.jsx)(e.li,{children:"\u6027\u80FD\u76D1\u63A7\u548C\u8C03\u4F18\u65B9\u6CD5"}),"\n",(0,l.jsx)(e.li,{children:"\u5E38\u89C1\u5185\u5B58\u95EE\u9898\u6392\u67E5"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5B66\u4E60\u8DEF\u5F84\u5EFA\u8BAE\uFF1A"})}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u638C\u63E1 JVM \u5185\u5B58\u7ED3\u6784\u548C\u5BF9\u8C61\u751F\u547D\u5468\u671F"}),"\n",(0,l.jsx)(e.li,{children:"\u6DF1\u5165\u7406\u89E3\u5783\u573E\u56DE\u6536\u7B97\u6CD5\u548C\u6536\u96C6\u5668"}),"\n",(0,l.jsx)(e.li,{children:"\u5B66\u4E60 JVM \u8C03\u4F18\u53C2\u6570\u548C\u76D1\u63A7\u5DE5\u5177"}),"\n",(0,l.jsx)(e.li,{children:"\u638C\u63E1\u5185\u5B58\u6CC4\u6F0F\u5206\u6790\u548C\u6027\u80FD\u4F18\u5316"}),"\n"]})]})}function x(n={}){let{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(a,{...n})}):a(n)}},28453:function(n,e,r){r.d(e,{R:()=>c,x:()=>d});var s=r(96540);let l={},i=s.createContext(l);function c(n){let e=s.useContext(i);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:c(n.components),s.createElement(i.Provider,{value:e},n.children)}}}]);