"use strict";(self.webpackChunkfullstack_dev_blog=self.webpackChunkfullstack_dev_blog||[]).push([["3922"],{39539:function(e,n,t){t.r(n),t.d(n,{metadata:()=>r,default:()=>p,frontMatter:()=>c,contentTitle:()=>o,toc:()=>h,assets:()=>d});var r=JSON.parse('{"id":"backend/network-programming/socket","title":"Socket\u7F51\u7EDC\u7F16\u7A0B\u8BE6\u89E3","description":"\u6DF1\u5165\u7406\u89E3Java Socket\u7F16\u7A0B\u3001BIO/NIO/AIO\u6A21\u578B\u3001\u591A\u8DEF\u590D\u7528\u4E0E\u9AD8\u5E76\u53D1\u7F51\u7EDC\u7F16\u7A0B\u5B9E\u8DF5","source":"@site/docs/backend/network-programming/socket.mdx","sourceDirName":"backend/network-programming","slug":"/backend/network-programming/socket","permalink":"/docs/backend/network-programming/socket","draft":false,"unlisted":false,"editUrl":"https://github.com/MasterLiu93/blog-web/tree/main/docs/backend/network-programming/socket.mdx","tags":[{"inline":true,"label":"Socket","permalink":"/docs/tags/socket"},{"inline":true,"label":"BIO","permalink":"/docs/tags/bio"},{"inline":true,"label":"NIO","permalink":"/docs/tags/nio"},{"inline":true,"label":"AIO","permalink":"/docs/tags/aio"},{"inline":true,"label":"\u7F51\u7EDC\u7F16\u7A0B","permalink":"/docs/tags/\u7F51\u7EDC\u7F16\u7A0B"},{"inline":true,"label":"\u591A\u8DEF\u590D\u7528","permalink":"/docs/tags/\u591A\u8DEF\u590D\u7528"},{"inline":true,"label":"\u9AD8\u5E76\u53D1","permalink":"/docs/tags/\u9AD8\u5E76\u53D1"}],"version":"current","lastUpdatedBy":"Laby","lastUpdatedAt":1755216000000,"sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Socket\u7F51\u7EDC\u7F16\u7A0B\u8BE6\u89E3","description":"\u6DF1\u5165\u7406\u89E3Java Socket\u7F16\u7A0B\u3001BIO/NIO/AIO\u6A21\u578B\u3001\u591A\u8DEF\u590D\u7528\u4E0E\u9AD8\u5E76\u53D1\u7F51\u7EDC\u7F16\u7A0B\u5B9E\u8DF5","authors":["Laby"],"tags":["Socket","BIO","NIO","AIO","\u7F51\u7EDC\u7F16\u7A0B","\u591A\u8DEF\u590D\u7528","\u9AD8\u5E76\u53D1"],"last_update":{"date":"2025-08-15T00:00:00.000Z","author":"Laby"}},"sidebar":"tutorialSidebar","previous":{"title":"HTTP/HTTPS\u534F\u8BAE\u8BE6\u89E3","permalink":"/docs/backend/network-programming/http-https"},"next":{"title":"Netty\u7F51\u7EDC\u7F16\u7A0B\u6846\u67B6\u8BE6\u89E3","permalink":"/docs/backend/network-programming/netty"}}'),i=t(74848),l=t(28453),s=t(78010),a=t(57250);let c={sidebar_position:4,title:"Socket\u7F51\u7EDC\u7F16\u7A0B\u8BE6\u89E3",description:"\u6DF1\u5165\u7406\u89E3Java Socket\u7F16\u7A0B\u3001BIO/NIO/AIO\u6A21\u578B\u3001\u591A\u8DEF\u590D\u7528\u4E0E\u9AD8\u5E76\u53D1\u7F51\u7EDC\u7F16\u7A0B\u5B9E\u8DF5",authors:["Laby"],tags:["Socket","BIO","NIO","AIO","\u7F51\u7EDC\u7F16\u7A0B","\u591A\u8DEF\u590D\u7528","\u9AD8\u5E76\u53D1"],last_update:{date:new Date("2025-08-15T00:00:00.000Z"),author:"Laby"}},o="Socket\u7F51\u7EDC\u7F16\u7A0B\u8BE6\u89E3",d={},h=[{value:"1. Socket\u7F16\u7A0B\u57FA\u7840",id:"1-socket\u7F16\u7A0B\u57FA\u7840",level:2},{value:"1.1 Socket\u6982\u5FF5\u4E0E\u5206\u7C7B",id:"11-socket\u6982\u5FF5\u4E0E\u5206\u7C7B",level:3},{value:"1.2 TCP Socket\u901A\u4FE1\u6D41\u7A0B",id:"12-tcp-socket\u901A\u4FE1\u6D41\u7A0B",level:3},{value:"2. Java IO\u6A21\u578B\u8BE6\u89E3",id:"2-java-io\u6A21\u578B\u8BE6\u89E3",level:2},{value:"2.1 IO\u6A21\u578B\u5BF9\u6BD4",id:"21-io\u6A21\u578B\u5BF9\u6BD4",level:3},{value:"2.2 BIO\uFF08\u963B\u585EIO\uFF09\u7F16\u7A0B",id:"22-bio\u963B\u585Eio\u7F16\u7A0B",level:3},{value:"2.3 NIO\uFF08\u975E\u963B\u585EIO\uFF09\u7F16\u7A0B",id:"23-nio\u975E\u963B\u585Eio\u7F16\u7A0B",level:3},{value:"2.4 AIO\uFF08\u5F02\u6B65IO\uFF09\u7F16\u7A0B",id:"24-aio\u5F02\u6B65io\u7F16\u7A0B",level:3},{value:"3. \u9AD8\u7EA7\u7F51\u7EDC\u7F16\u7A0B\u6280\u672F",id:"3-\u9AD8\u7EA7\u7F51\u7EDC\u7F16\u7A0B\u6280\u672F",level:2},{value:"3.1 \u96F6\u62F7\u8D1D\u6280\u672F",id:"31-\u96F6\u62F7\u8D1D\u6280\u672F",level:3},{value:"3.2 \u7C98\u5305\u62C6\u5305\u5904\u7406",id:"32-\u7C98\u5305\u62C6\u5305\u5904\u7406",level:3},{value:"4. \u5E38\u89C1\u9762\u8BD5\u95EE\u9898\u4E0E\u89E3\u7B54",id:"4-\u5E38\u89C1\u9762\u8BD5\u95EE\u9898\u4E0E\u89E3\u7B54",level:2},{value:"4.1 \u57FA\u7840\u6982\u5FF5\u95EE\u9898",id:"41-\u57FA\u7840\u6982\u5FF5\u95EE\u9898",level:3},{value:"4.2 \u5B9E\u9645\u5E94\u7528\u95EE\u9898",id:"42-\u5B9E\u9645\u5E94\u7528\u95EE\u9898",level:3}];function u(e){let n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"socket\u7F51\u7EDC\u7F16\u7A0B\u8BE6\u89E3",children:"Socket\u7F51\u7EDC\u7F16\u7A0B\u8BE6\u89E3"})}),"\n",(0,i.jsx)(n.p,{children:"Socket\u662F\u7F51\u7EDC\u7F16\u7A0B\u7684\u57FA\u7840\uFF0C\u63D0\u4F9B\u4E86\u8FDB\u7A0B\u95F4\u7F51\u7EDC\u901A\u4FE1\u7684\u63A5\u53E3\u3002\u7406\u89E3\u4E0D\u540C\u7684IO\u6A21\u578B\u5BF9\u4E8E\u6784\u5EFA\u9AD8\u6027\u80FD\u7F51\u7EDC\u5E94\u7528\u81F3\u5173\u91CD\u8981\u3002"}),"\n",(0,i.jsxs)(n.admonition,{title:"\u6838\u5FC3\u4EF7\u503C",type:"tip",children:[(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Socket\u7F16\u7A0B = \u7F51\u7EDC\u901A\u4FE1\u57FA\u7840 + IO\u6A21\u578B\u9009\u62E9 + \u6027\u80FD\u4F18\u5316 + \u5E76\u53D1\u5904\u7406"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u{1F50C} ",(0,i.jsx)(n.strong,{children:"\u901A\u4FE1\u57FA\u7840"}),"\uFF1ATCP/UDP Socket\u63D0\u4F9B\u7F51\u7EDC\u901A\u4FE1\u80FD\u529B"]}),"\n",(0,i.jsxs)(n.li,{children:["\u26A1 ",(0,i.jsx)(n.strong,{children:"IO\u6A21\u578B"}),"\uFF1ABIO\u3001NIO\u3001AIO\u9002\u5E94\u4E0D\u540C\u5E76\u53D1\u9700\u6C42"]}),"\n",(0,i.jsxs)(n.li,{children:["\u{1F680} ",(0,i.jsx)(n.strong,{children:"\u9AD8\u6027\u80FD"}),"\uFF1A\u591A\u8DEF\u590D\u7528\u3001\u96F6\u62F7\u8D1D\u3001\u76F4\u63A5\u5185\u5B58\u4F18\u5316"]}),"\n",(0,i.jsxs)(n.li,{children:["\u{1F3AF} ",(0,i.jsx)(n.strong,{children:"\u5E76\u53D1\u5904\u7406"}),"\uFF1A\u7EBF\u7A0B\u6A21\u578B\u3001\u4E8B\u4EF6\u9A71\u52A8\u3001\u5F02\u6B65\u56DE\u8C03"]}),"\n",(0,i.jsxs)(n.li,{children:["\u{1F6E0}\uFE0F ",(0,i.jsx)(n.strong,{children:"\u5B9E\u7528\u6280\u5DE7"}),"\uFF1A\u7C98\u5305\u62C6\u5305\u3001\u8FDE\u63A5\u7BA1\u7406\u3001\u5F02\u5E38\u5904\u7406"]}),"\n"]})]}),"\n",(0,i.jsx)(n.h2,{id:"1-socket\u7F16\u7A0B\u57FA\u7840",children:"1. Socket\u7F16\u7A0B\u57FA\u7840"}),"\n",(0,i.jsx)(n.h3,{id:"11-socket\u6982\u5FF5\u4E0E\u5206\u7C7B",children:"1.1 Socket\u6982\u5FF5\u4E0E\u5206\u7C7B"}),"\n",(0,i.jsx)(n.mermaid,{value:"graph TB\n    A[Socket\u5957\u63A5\u5B57] --\x3e B[TCP Socket]\n    A --\x3e C[UDP Socket]\n    \n    B --\x3e B1[\u9762\u5411\u8FDE\u63A5]\n    B --\x3e B2[\u53EF\u9760\u4F20\u8F93]\n    B --\x3e B3[\u6D41\u5F0F\u6570\u636E]\n    \n    C --\x3e C1[\u65E0\u8FDE\u63A5]\n    C --\x3e C2[\u4E0D\u53EF\u9760\u4F20\u8F93]\n    C --\x3e C3[\u6570\u636E\u62A5]\n    \n    D[Socket API] --\x3e E[\u670D\u52A1\u7AEFAPI]\n    D --\x3e F[\u5BA2\u6237\u7AEFAPI]\n    \n    E --\x3e E1[socket()]\n    E --\x3e E2[bind()]\n    E --\x3e E3[listen()]\n    E --\x3e E4[accept()]\n    \n    F --\x3e F1[socket()]\n    F --\x3e F2[connect()]\n    F --\x3e F3[send()/recv()]\n    F --\x3e F4[close()]"}),"\n",(0,i.jsx)(n.h3,{id:"12-tcp-socket\u901A\u4FE1\u6D41\u7A0B",children:"1.2 TCP Socket\u901A\u4FE1\u6D41\u7A0B"}),"\n",(0,i.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant S as \u670D\u52A1\u7AEF\n    participant C as \u5BA2\u6237\u7AEF\n    \n    Note over S: socket() \u521B\u5EFA\u5957\u63A5\u5B57\n    Note over S: bind() \u7ED1\u5B9A\u5730\u5740\n    Note over S: listen() \u76D1\u542C\u8FDE\u63A5\n    \n    Note over C: socket() \u521B\u5EFA\u5957\u63A5\u5B57\n    C->>S: connect() \u8FDE\u63A5\u8BF7\u6C42\n    S->>C: accept() \u63A5\u53D7\u8FDE\u63A5\n    \n    Note over S,C: \u8FDE\u63A5\u5EFA\u7ACB\u6210\u529F\n    \n    C->>S: send() \u53D1\u9001\u6570\u636E\n    S->>C: recv() \u63A5\u6536\u6570\u636E\n    S->>C: send() \u53D1\u9001\u54CD\u5E94\n    C->>S: recv() \u63A5\u6536\u54CD\u5E94\n    \n    Note over S,C: \u6570\u636E\u4F20\u8F93\n    \n    C->>S: close() \u5173\u95ED\u8FDE\u63A5\n    Note over S: close() \u5173\u95ED\u8FDE\u63A5"}),"\n",(0,i.jsx)(n.h2,{id:"2-java-io\u6A21\u578B\u8BE6\u89E3",children:"2. Java IO\u6A21\u578B\u8BE6\u89E3"}),"\n",(0,i.jsx)(n.h3,{id:"21-io\u6A21\u578B\u5BF9\u6BD4",children:"2.1 IO\u6A21\u578B\u5BF9\u6BD4"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u7279\u6027"}),(0,i.jsx)(n.th,{children:"BIO"}),(0,i.jsx)(n.th,{children:"NIO"}),(0,i.jsx)(n.th,{children:"AIO"}),(0,i.jsx)(n.th,{children:"\u9002\u7528\u573A\u666F"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u963B\u585E\u6027"}),(0,i.jsx)(n.td,{children:"\u963B\u585E"}),(0,i.jsx)(n.td,{children:"\u975E\u963B\u585E"}),(0,i.jsx)(n.td,{children:"\u5F02\u6B65"}),(0,i.jsx)(n.td,{children:"BIO\u9002\u5408\u8FDE\u63A5\u6570\u5C11\uFF0CNIO\u9002\u5408\u9AD8\u5E76\u53D1\uFF0CAIO\u9002\u5408\u5F02\u6B65\u5904\u7406"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u7EBF\u7A0B\u6A21\u578B"}),(0,i.jsx)(n.td,{children:"\u4E00\u8FDE\u63A5\u4E00\u7EBF\u7A0B"}),(0,i.jsx)(n.td,{children:"\u4E00\u7EBF\u7A0B\u591A\u8FDE\u63A5"}),(0,i.jsx)(n.td,{children:"\u56DE\u8C03\u5904\u7406"}),(0,i.jsx)(n.td,{children:"BIO\u7B80\u5355\u4F46\u8D44\u6E90\u6D88\u8017\u5927"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u5185\u5B58\u62F7\u8D1D"}),(0,i.jsx)(n.td,{children:"\u591A\u6B21\u62F7\u8D1D"}),(0,i.jsx)(n.td,{children:"\u96F6\u62F7\u8D1D"}),(0,i.jsx)(n.td,{children:"\u96F6\u62F7\u8D1D"}),(0,i.jsx)(n.td,{children:"NIO/AIO\u6027\u80FD\u66F4\u597D"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u7F16\u7A0B\u590D\u6742\u5EA6"}),(0,i.jsx)(n.td,{children:"\u7B80\u5355"}),(0,i.jsx)(n.td,{children:"\u590D\u6742"}),(0,i.jsx)(n.td,{children:"\u4E2D\u7B49"}),(0,i.jsx)(n.td,{children:"BIO\u6700\u7B80\u5355\uFF0CNIO\u6700\u590D\u6742"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u541E\u5410\u91CF"}),(0,i.jsx)(n.td,{children:"\u4F4E"}),(0,i.jsx)(n.td,{children:"\u9AD8"}),(0,i.jsx)(n.td,{children:"\u9AD8"}),(0,i.jsx)(n.td,{children:"NIO/AIO\u9002\u5408\u9AD8\u541E\u5410\u573A\u666F"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u5EF6\u8FDF"}),(0,i.jsx)(n.td,{children:"\u9AD8"}),(0,i.jsx)(n.td,{children:"\u4F4E"}),(0,i.jsx)(n.td,{children:"\u4F4E"}),(0,i.jsx)(n.td,{children:"NIO/AIO\u5EF6\u8FDF\u66F4\u4F4E"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"22-bio\u963B\u585Eio\u7F16\u7A0B",children:"2.2 BIO\uFF08\u963B\u585EIO\uFF09\u7F16\u7A0B"}),"\n",(0,i.jsxs)(s.A,{children:[(0,i.jsxs)(a.A,{value:"bio-server",label:"BIO\u670D\u52A1\u7AEF",children:[(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",metastring:'title="BIO\u670D\u52A1\u7AEF\u5B9E\u73B0"',children:'import java.io.*;\nimport java.net.*;\nimport java.util.concurrent.*;\n\npublic class BIOServer {\n    private final int port;\n    private final ExecutorService threadPool;\n    \n    public BIOServer(int port) {\n        this.port = port;\n        // \u4F7F\u7528\u7EBF\u7A0B\u6C60\u907F\u514D\u65E0\u9650\u521B\u5EFA\u7EBF\u7A0B\n        this.threadPool = Executors.newFixedThreadPool(100);\n    }\n    \n    public void start() throws IOException {\n        ServerSocket serverSocket = new ServerSocket(port);\n        System.out.println("BIO\u670D\u52A1\u5668\u542F\u52A8\uFF0C\u76D1\u542C\u7AEF\u53E3: " + port);\n        \n        try {\n            while (!Thread.currentThread().isInterrupted()) {\n                // accept()\u65B9\u6CD5\u963B\u585E\u7B49\u5F85\u5BA2\u6237\u7AEF\u8FDE\u63A5\n                Socket clientSocket = serverSocket.accept();\n                \n                // \u4E3A\u6BCF\u4E2A\u8FDE\u63A5\u5206\u914D\u7EBF\u7A0B\u5904\u7406\n                threadPool.submit(new ClientHandler(clientSocket));\n            }\n        } finally {\n            serverSocket.close();\n            threadPool.shutdown();\n        }\n    }\n    \n    /**\n     * \u5BA2\u6237\u7AEF\u8FDE\u63A5\u5904\u7406\u5668\n     */\n    private static class ClientHandler implements Runnable {\n        private final Socket socket;\n        \n        public ClientHandler(Socket socket) {\n            this.socket = socket;\n        }\n        \n        @Override\n        public void run() {\n            try (BufferedReader reader = new BufferedReader(\n                    new InputStreamReader(socket.getInputStream()));\n                 PrintWriter writer = new PrintWriter(\n                    socket.getOutputStream(), true)) {\n                \n                String inputLine;\n                // \u8BFB\u53D6\u5BA2\u6237\u7AEF\u6570\u636E\uFF08\u963B\u585E\u64CD\u4F5C\uFF09\n                while ((inputLine = reader.readLine()) != null) {\n                    System.out.println("\u6536\u5230\u6D88\u606F: " + inputLine);\n                    \n                    // \u56DE\u663E\u6D88\u606F\n                    writer.println("Echo: " + inputLine);\n                    \n                    // \u5982\u679C\u6536\u5230"bye"\u5219\u65AD\u5F00\u8FDE\u63A5\n                    if ("bye".equalsIgnoreCase(inputLine)) {\n                        break;\n                    }\n                }\n            } catch (IOException e) {\n                System.err.println("\u5904\u7406\u5BA2\u6237\u7AEF\u8FDE\u63A5\u5F02\u5E38: " + e.getMessage());\n            } finally {\n                try {\n                    socket.close();\n                } catch (IOException e) {\n                    System.err.println("\u5173\u95ED\u8FDE\u63A5\u5F02\u5E38: " + e.getMessage());\n                }\n            }\n        }\n    }\n    \n    public static void main(String[] args) throws IOException {\n        new BIOServer(8080).start();\n    }\n}\n'})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"BIO\u5BA2\u6237\u7AEF\u5B9E\u73B0"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",metastring:'title="BIO\u5BA2\u6237\u7AEF\u5B9E\u73B0"',children:'public class BIOClient {\n    public static void main(String[] args) {\n        try (Socket socket = new Socket("localhost", 8080);\n             BufferedReader reader = new BufferedReader(\n                new InputStreamReader(socket.getInputStream()));\n             PrintWriter writer = new PrintWriter(\n                socket.getOutputStream(), true);\n             Scanner scanner = new Scanner(System.in)) {\n            \n            System.out.println("\u8FDE\u63A5\u5230\u670D\u52A1\u5668\u6210\u529F\uFF01\u8F93\u5165\u6D88\u606F\uFF08\u8F93\u5165\'bye\'\u9000\u51FA\uFF09:");\n            \n            String userInput;\n            while ((userInput = scanner.nextLine()) != null) {\n                // \u53D1\u9001\u6D88\u606F\u5230\u670D\u52A1\u5668\n                writer.println(userInput);\n                \n                // \u8BFB\u53D6\u670D\u52A1\u5668\u54CD\u5E94\n                String response = reader.readLine();\n                System.out.println("\u670D\u52A1\u5668\u54CD\u5E94: " + response);\n                \n                if ("bye".equalsIgnoreCase(userInput)) {\n                    break;\n                }\n            }\n        } catch (IOException e) {\n            System.err.println("\u5BA2\u6237\u7AEF\u5F02\u5E38: " + e.getMessage());\n        }\n    }\n}\n'})})]}),(0,i.jsxs)(a.A,{value:"bio-analysis",label:"BIO\u7279\u70B9\u5206\u6790",children:[(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"BIO\u4F18\u70B9"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u7F16\u7A0B\u7B80\u5355"}),"\uFF1A\u540C\u6B65\u963B\u585E\u6A21\u578B\uFF0C\u903B\u8F91\u6E05\u6670"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u6613\u4E8E\u7406\u89E3"}),"\uFF1A\u4E00\u4E2A\u8FDE\u63A5\u4E00\u4E2A\u7EBF\u7A0B\uFF0C\u6982\u5FF5\u76F4\u89C2"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u8C03\u8BD5\u65B9\u4FBF"}),"\uFF1A\u7EBF\u6027\u6267\u884C\u6D41\u7A0B\uFF0C\u4FBF\u4E8E\u8C03\u8BD5"]}),"\n"]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"BIO\u7F3A\u70B9"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u8D44\u6E90\u6D88\u8017\u5927"}),"\uFF1A\u6BCF\u4E2A\u8FDE\u63A5\u9700\u8981\u4E00\u4E2A\u7EBF\u7A0B"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u6269\u5C55\u6027\u5DEE"}),"\uFF1A\u7EBF\u7A0B\u6570\u91CF\u9650\u5236\u4E86\u5E76\u53D1\u8FDE\u63A5\u6570"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u4E0A\u4E0B\u6587\u5207\u6362\u5F00\u9500"}),"\uFF1A\u5927\u91CF\u7EBF\u7A0B\u5BFC\u81F4\u9891\u7E41\u5207\u6362"]}),"\n"]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"BIO\u9002\u7528\u573A\u666F"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u8FDE\u63A5\u6570\u8F83\u5C11\uFF08< 1000\uFF09"}),"\n",(0,i.jsx)(n.li,{children:"\u8FDE\u63A5\u65F6\u95F4\u8F83\u957F"}),"\n",(0,i.jsx)(n.li,{children:"\u5BF9\u5B9E\u65F6\u6027\u8981\u6C42\u4E0D\u9AD8"}),"\n",(0,i.jsx)(n.li,{children:"\u7B80\u5355\u7684\u8BF7\u6C42-\u54CD\u5E94\u6A21\u5F0F"}),"\n"]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u6027\u80FD\u74F6\u9888\u5206\u6790"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'// \u7EBF\u7A0B\u8D44\u6E90\u8BA1\u7B97\nint maxConnections = 1000;           // \u6700\u5927\u8FDE\u63A5\u6570\nint threadStackSize = 1024 * 1024;  // \u6BCF\u4E2A\u7EBF\u7A0B\u6808\u5927\u5C0F 1MB\nlong totalMemory = maxConnections * threadStackSize; // \u603B\u5185\u5B58\u6D88\u8017\n\nSystem.out.println("1000\u4E2A\u8FDE\u63A5\u9700\u8981\u5185\u5B58: " + totalMemory / 1024 / 1024 + "MB");\n// \u8F93\u51FA: 1000\u4E2A\u8FDE\u63A5\u9700\u8981\u5185\u5B58: 1000MB\n'})})]})]}),"\n",(0,i.jsx)(n.h3,{id:"23-nio\u975E\u963B\u585Eio\u7F16\u7A0B",children:"2.3 NIO\uFF08\u975E\u963B\u585EIO\uFF09\u7F16\u7A0B"}),"\n",(0,i.jsxs)(s.A,{children:[(0,i.jsx)(a.A,{value:"nio-server",label:"NIO\u670D\u52A1\u7AEF",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",metastring:'title="NIO\u670D\u52A1\u7AEF\u5B9E\u73B0"',children:'import java.io.IOException;\nimport java.net.InetSocketAddress;\nimport java.nio.ByteBuffer;\nimport java.nio.channels.*;\nimport java.util.Iterator;\nimport java.util.Set;\n\npublic class NIOServer {\n    private final int port;\n    private Selector selector;\n    private ServerSocketChannel serverChannel;\n    \n    public NIOServer(int port) {\n        this.port = port;\n    }\n    \n    public void start() throws IOException {\n        // \u521B\u5EFA\u9009\u62E9\u5668\n        selector = Selector.open();\n        \n        // \u521B\u5EFA\u670D\u52A1\u7AEF\u901A\u9053\n        serverChannel = ServerSocketChannel.open();\n        serverChannel.configureBlocking(false); // \u8BBE\u7F6E\u975E\u963B\u585E\n        serverChannel.bind(new InetSocketAddress(port));\n        \n        // \u6CE8\u518C\u63A5\u53D7\u8FDE\u63A5\u4E8B\u4EF6\n        serverChannel.register(selector, SelectionKey.OP_ACCEPT);\n        \n        System.out.println("NIO\u670D\u52A1\u5668\u542F\u52A8\uFF0C\u76D1\u542C\u7AEF\u53E3: " + port);\n        \n        // \u4E8B\u4EF6\u5FAA\u73AF\n        while (true) {\n            // \u963B\u585E\u7B49\u5F85\u4E8B\u4EF6\u53D1\u751F\n            int readyChannels = selector.select();\n            \n            if (readyChannels == 0) {\n                continue;\n            }\n            \n            // \u83B7\u53D6\u5C31\u7EEA\u7684\u4E8B\u4EF6\u96C6\u5408\n            Set<SelectionKey> selectedKeys = selector.selectedKeys();\n            Iterator<SelectionKey> keyIterator = selectedKeys.iterator();\n            \n            while (keyIterator.hasNext()) {\n                SelectionKey key = keyIterator.next();\n                keyIterator.remove(); // \u5FC5\u987B\u624B\u52A8\u79FB\u9664\n                \n                try {\n                    handleKey(key);\n                } catch (IOException e) {\n                    System.err.println("\u5904\u7406\u4E8B\u4EF6\u5F02\u5E38: " + e.getMessage());\n                    closeChannel(key);\n                }\n            }\n        }\n    }\n    \n    /**\n     * \u5904\u7406\u9009\u62E9\u952E\u4E8B\u4EF6\n     */\n    private void handleKey(SelectionKey key) throws IOException {\n        if (key.isAcceptable()) {\n            // \u5904\u7406\u8FDE\u63A5\u4E8B\u4EF6\n            handleAccept(key);\n        } else if (key.isReadable()) {\n            // \u5904\u7406\u8BFB\u4E8B\u4EF6\n            handleRead(key);\n        } else if (key.isWritable()) {\n            // \u5904\u7406\u5199\u4E8B\u4EF6\n            handleWrite(key);\n        }\n    }\n    \n    /**\n     * \u5904\u7406\u5BA2\u6237\u7AEF\u8FDE\u63A5\n     */\n    private void handleAccept(SelectionKey key) throws IOException {\n        ServerSocketChannel serverChannel = (ServerSocketChannel) key.channel();\n        SocketChannel clientChannel = serverChannel.accept();\n        \n        if (clientChannel != null) {\n            clientChannel.configureBlocking(false);\n            \n            // \u6CE8\u518C\u8BFB\u4E8B\u4EF6\n            SelectionKey clientKey = clientChannel.register(\n                selector, SelectionKey.OP_READ);\n            \n            // \u4E3A\u6BCF\u4E2A\u5BA2\u6237\u7AEF\u5206\u914D\u7F13\u51B2\u533A\n            clientKey.attach(ByteBuffer.allocate(1024));\n            \n            System.out.println("\u65B0\u5BA2\u6237\u7AEF\u8FDE\u63A5: " + \n                clientChannel.getRemoteAddress());\n        }\n    }\n    \n    /**\n     * \u5904\u7406\u8BFB\u4E8B\u4EF6\n     */\n    private void handleRead(SelectionKey key) throws IOException {\n        SocketChannel clientChannel = (SocketChannel) key.channel();\n        ByteBuffer buffer = (ByteBuffer) key.attachment();\n        \n        int bytesRead = clientChannel.read(buffer);\n        \n        if (bytesRead > 0) {\n            buffer.flip(); // \u5207\u6362\u5230\u8BFB\u6A21\u5F0F\n            \n            byte[] data = new byte[buffer.remaining()];\n            buffer.get(data);\n            String message = new String(data, "UTF-8");\n            \n            System.out.println("\u6536\u5230\u6D88\u606F: " + message);\n            \n            // \u51C6\u5907\u56DE\u5199\u6570\u636E\n            String response = "Echo: " + message;\n            ByteBuffer writeBuffer = ByteBuffer.wrap(response.getBytes("UTF-8"));\n            key.attach(writeBuffer);\n            \n            // \u6CE8\u518C\u5199\u4E8B\u4EF6\n            key.interestOps(SelectionKey.OP_WRITE);\n            \n        } else if (bytesRead < 0) {\n            // \u5BA2\u6237\u7AEF\u65AD\u5F00\u8FDE\u63A5\n            System.out.println("\u5BA2\u6237\u7AEF\u65AD\u5F00\u8FDE\u63A5: " + \n                clientChannel.getRemoteAddress());\n            closeChannel(key);\n        }\n    }\n    \n    /**\n     * \u5904\u7406\u5199\u4E8B\u4EF6\n     */\n    private void handleWrite(SelectionKey key) throws IOException {\n        SocketChannel clientChannel = (SocketChannel) key.channel();\n        ByteBuffer buffer = (ByteBuffer) key.attachment();\n        \n        clientChannel.write(buffer);\n        \n        if (!buffer.hasRemaining()) {\n            // \u5199\u5B8C\u6210\uFF0C\u91CD\u65B0\u6CE8\u518C\u8BFB\u4E8B\u4EF6\n            key.attach(ByteBuffer.allocate(1024));\n            key.interestOps(SelectionKey.OP_READ);\n        }\n    }\n    \n    /**\n     * \u5173\u95ED\u901A\u9053\n     */\n    private void closeChannel(SelectionKey key) {\n        try {\n            key.channel().close();\n        } catch (IOException e) {\n            System.err.println("\u5173\u95ED\u901A\u9053\u5F02\u5E38: " + e.getMessage());\n        }\n        key.cancel();\n    }\n    \n    public static void main(String[] args) throws IOException {\n        new NIOServer(8080).start();\n    }\n}\n'})})}),(0,i.jsx)(a.A,{value:"nio-client",label:"NIO\u5BA2\u6237\u7AEF",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",metastring:'title="NIO\u5BA2\u6237\u7AEF\u5B9E\u73B0"',children:'import java.io.IOException;\nimport java.net.InetSocketAddress;\nimport java.nio.ByteBuffer;\nimport java.nio.channels.SocketChannel;\nimport java.util.Scanner;\n\npublic class NIOClient {\n    private SocketChannel socketChannel;\n    private ByteBuffer buffer = ByteBuffer.allocate(1024);\n    \n    public void connect(String host, int port) throws IOException {\n        socketChannel = SocketChannel.open();\n        socketChannel.connect(new InetSocketAddress(host, port));\n        \n        System.out.println("\u8FDE\u63A5\u5230\u670D\u52A1\u5668: " + host + ":" + port);\n    }\n    \n    public void sendMessage(String message) throws IOException {\n        buffer.clear();\n        buffer.put(message.getBytes("UTF-8"));\n        buffer.flip();\n        \n        while (buffer.hasRemaining()) {\n            socketChannel.write(buffer);\n        }\n    }\n    \n    public String receiveMessage() throws IOException {\n        buffer.clear();\n        int bytesRead = socketChannel.read(buffer);\n        \n        if (bytesRead > 0) {\n            buffer.flip();\n            byte[] data = new byte[buffer.remaining()];\n            buffer.get(data);\n            return new String(data, "UTF-8");\n        }\n        \n        return null;\n    }\n    \n    public void close() throws IOException {\n        if (socketChannel != null) {\n            socketChannel.close();\n        }\n    }\n    \n    public static void main(String[] args) {\n        NIOClient client = new NIOClient();\n        \n        try {\n            client.connect("localhost", 8080);\n            \n            Scanner scanner = new Scanner(System.in);\n            System.out.println("\u8F93\u5165\u6D88\u606F\uFF08\u8F93\u5165\'bye\'\u9000\u51FA\uFF09:");\n            \n            String userInput;\n            while ((userInput = scanner.nextLine()) != null) {\n                client.sendMessage(userInput);\n                \n                String response = client.receiveMessage();\n                System.out.println("\u670D\u52A1\u5668\u54CD\u5E94: " + response);\n                \n                if ("bye".equalsIgnoreCase(userInput)) {\n                    break;\n                }\n            }\n        } catch (IOException e) {\n            System.err.println("\u5BA2\u6237\u7AEF\u5F02\u5E38: " + e.getMessage());\n        } finally {\n            try {\n                client.close();\n            } catch (IOException e) {\n                System.err.println("\u5173\u95ED\u8FDE\u63A5\u5F02\u5E38: " + e.getMessage());\n            }\n        }\n    }\n}\n'})})}),(0,i.jsxs)(a.A,{value:"selector-principle",label:"Selector\u539F\u7406",children:[(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Selector\u5DE5\u4F5C\u539F\u7406"})}),(0,i.jsx)(n.mermaid,{value:"graph TB\n    A[Selector\u9009\u62E9\u5668] --\x3e B[Channel1]\n    A --\x3e C[Channel2]\n    A --\x3e D[Channel3]\n    A --\x3e E[ChannelN]\n    \n    B --\x3e B1[OP_READ]\n    B --\x3e B2[OP_WRITE]\n    C --\x3e C1[OP_ACCEPT]\n    D --\x3e D1[OP_CONNECT]\n    E --\x3e E1[OP_READ]\n    \n    F[select()\u65B9\u6CD5] --\x3e G[\u963B\u585E\u7B49\u5F85\u4E8B\u4EF6]\n    G --\x3e H[\u8FD4\u56DE\u5C31\u7EEA\u901A\u9053\u6570]\n    H --\x3e I[\u5904\u7406\u5C31\u7EEA\u4E8B\u4EF6]"}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Selector\u6838\u5FC3\u6982\u5FF5"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Channel\uFF08\u901A\u9053\uFF09"}),"\uFF1A\u6570\u636E\u4F20\u8F93\u7684\u7BA1\u9053"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Buffer\uFF08\u7F13\u51B2\u533A\uFF09"}),"\uFF1A\u6570\u636E\u8BFB\u5199\u7684\u5BB9\u5668"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Selector\uFF08\u9009\u62E9\u5668\uFF09"}),"\uFF1A\u76D1\u63A7\u591A\u4E2A\u901A\u9053\u7684\u4E8B\u4EF6"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"SelectionKey\uFF08\u9009\u62E9\u952E\uFF09"}),"\uFF1A\u901A\u9053\u548C\u9009\u62E9\u5668\u7684\u5173\u7CFB"]}),"\n"]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u4E8B\u4EF6\u7C7B\u578B"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// \u56DB\u79CD\u57FA\u672C\u4E8B\u4EF6\u7C7B\u578B\nSelectionKey.OP_READ     // \u8BFB\u4E8B\u4EF6\uFF1A\u901A\u9053\u6709\u6570\u636E\u53EF\u8BFB\nSelectionKey.OP_WRITE    // \u5199\u4E8B\u4EF6\uFF1A\u901A\u9053\u53EF\u4EE5\u5199\u5165\u6570\u636E\nSelectionKey.OP_ACCEPT   // \u63A5\u53D7\u4E8B\u4EF6\uFF1A\u670D\u52A1\u7AEF\u63A5\u53D7\u5BA2\u6237\u7AEF\u8FDE\u63A5\nSelectionKey.OP_CONNECT  // \u8FDE\u63A5\u4E8B\u4EF6\uFF1A\u5BA2\u6237\u7AEF\u8FDE\u63A5\u5B8C\u6210\n\n// \u7EC4\u5408\u4E8B\u4EF6\nint interestSet = SelectionKey.OP_READ | SelectionKey.OP_WRITE;\n"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"NIO\u4F18\u52BF"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u5355\u7EBF\u7A0B\u5904\u7406\u591A\u8FDE\u63A5"}),"\uFF1A\u4E00\u4E2A\u7EBF\u7A0B\u53EF\u4EE5\u5904\u7406\u6570\u5343\u4E2A\u8FDE\u63A5"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u5185\u5B58\u6548\u7387\u9AD8"}),"\uFF1A\u907F\u514D\u4E3A\u6BCF\u4E2A\u8FDE\u63A5\u521B\u5EFA\u7EBF\u7A0B"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u96F6\u62F7\u8D1D"}),"\uFF1ADirectByteBuffer\u51CF\u5C11\u5185\u5B58\u62F7\u8D1D"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u4E8B\u4EF6\u9A71\u52A8"}),"\uFF1A\u53EA\u5904\u7406\u5C31\u7EEA\u7684\u901A\u9053"]}),"\n"]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"24-aio\u5F02\u6B65io\u7F16\u7A0B",children:"2.4 AIO\uFF08\u5F02\u6B65IO\uFF09\u7F16\u7A0B"}),"\n",(0,i.jsxs)(s.A,{children:[(0,i.jsx)(a.A,{value:"aio-server",label:"AIO\u670D\u52A1\u7AEF",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",metastring:'title="AIO\u670D\u52A1\u7AEF\u5B9E\u73B0"',children:'import java.io.IOException;\nimport java.net.InetSocketAddress;\nimport java.nio.ByteBuffer;\nimport java.nio.channels.AsynchronousServerSocketChannel;\nimport java.nio.channels.AsynchronousSocketChannel;\nimport java.nio.channels.CompletionHandler;\nimport java.util.concurrent.CountDownLatch;\n\npublic class AIOServer {\n    private final int port;\n    private AsynchronousServerSocketChannel serverChannel;\n    \n    public AIOServer(int port) {\n        this.port = port;\n    }\n    \n    public void start() throws IOException, InterruptedException {\n        // \u521B\u5EFA\u5F02\u6B65\u670D\u52A1\u7AEF\u901A\u9053\n        serverChannel = AsynchronousServerSocketChannel.open();\n        serverChannel.bind(new InetSocketAddress(port));\n        \n        System.out.println("AIO\u670D\u52A1\u5668\u542F\u52A8\uFF0C\u76D1\u542C\u7AEF\u53E3: " + port);\n        \n        // \u5F00\u59CB\u63A5\u53D7\u8FDE\u63A5\n        serverChannel.accept(null, new AcceptHandler());\n        \n        // \u4FDD\u6301\u4E3B\u7EBF\u7A0B\u8FD0\u884C\n        CountDownLatch latch = new CountDownLatch(1);\n        latch.await();\n    }\n    \n    /**\n     * \u8FDE\u63A5\u63A5\u53D7\u5904\u7406\u5668\n     */\n    private class AcceptHandler implements \n            CompletionHandler<AsynchronousSocketChannel, Void> {\n        \n        @Override\n        public void completed(AsynchronousSocketChannel clientChannel, Void attachment) {\n            // \u7EE7\u7EED\u63A5\u53D7\u4E0B\u4E00\u4E2A\u8FDE\u63A5\n            serverChannel.accept(null, this);\n            \n            try {\n                System.out.println("\u65B0\u5BA2\u6237\u7AEF\u8FDE\u63A5: " + \n                    clientChannel.getRemoteAddress());\n                \n                // \u5F00\u59CB\u8BFB\u53D6\u5BA2\u6237\u7AEF\u6570\u636E\n                ByteBuffer buffer = ByteBuffer.allocate(1024);\n                clientChannel.read(buffer, buffer, new ReadHandler(clientChannel));\n                \n            } catch (IOException e) {\n                System.err.println("\u5904\u7406\u5BA2\u6237\u7AEF\u8FDE\u63A5\u5F02\u5E38: " + e.getMessage());\n            }\n        }\n        \n        @Override\n        public void failed(Throwable exc, Void attachment) {\n            System.err.println("\u63A5\u53D7\u8FDE\u63A5\u5931\u8D25: " + exc.getMessage());\n        }\n    }\n    \n    /**\n     * \u8BFB\u53D6\u6570\u636E\u5904\u7406\u5668\n     */\n    private class ReadHandler implements \n            CompletionHandler<Integer, ByteBuffer> {\n        \n        private final AsynchronousSocketChannel clientChannel;\n        \n        public ReadHandler(AsynchronousSocketChannel clientChannel) {\n            this.clientChannel = clientChannel;\n        }\n        \n        @Override\n        public void completed(Integer bytesRead, ByteBuffer buffer) {\n            if (bytesRead > 0) {\n                buffer.flip();\n                \n                byte[] data = new byte[buffer.remaining()];\n                buffer.get(data);\n                String message = new String(data);\n                \n                System.out.println("\u6536\u5230\u6D88\u606F: " + message);\n                \n                // \u56DE\u5199\u6570\u636E\n                String response = "Echo: " + message;\n                ByteBuffer writeBuffer = ByteBuffer.wrap(response.getBytes());\n                \n                clientChannel.write(writeBuffer, writeBuffer, \n                    new WriteHandler(clientChannel));\n                \n            } else if (bytesRead < 0) {\n                // \u5BA2\u6237\u7AEF\u65AD\u5F00\u8FDE\u63A5\n                try {\n                    System.out.println("\u5BA2\u6237\u7AEF\u65AD\u5F00\u8FDE\u63A5: " + \n                        clientChannel.getRemoteAddress());\n                    clientChannel.close();\n                } catch (IOException e) {\n                    System.err.println("\u5173\u95ED\u8FDE\u63A5\u5F02\u5E38: " + e.getMessage());\n                }\n            }\n        }\n        \n        @Override\n        public void failed(Throwable exc, ByteBuffer buffer) {\n            System.err.println("\u8BFB\u53D6\u6570\u636E\u5931\u8D25: " + exc.getMessage());\n            try {\n                clientChannel.close();\n            } catch (IOException e) {\n                System.err.println("\u5173\u95ED\u8FDE\u63A5\u5F02\u5E38: " + e.getMessage());\n            }\n        }\n    }\n    \n    /**\n     * \u5199\u5165\u6570\u636E\u5904\u7406\u5668\n     */\n    private class WriteHandler implements \n            CompletionHandler<Integer, ByteBuffer> {\n        \n        private final AsynchronousSocketChannel clientChannel;\n        \n        public WriteHandler(AsynchronousSocketChannel clientChannel) {\n            this.clientChannel = clientChannel;\n        }\n        \n        @Override\n        public void completed(Integer bytesWritten, ByteBuffer buffer) {\n            if (buffer.hasRemaining()) {\n                // \u7EE7\u7EED\u5199\u5165\u5269\u4F59\u6570\u636E\n                clientChannel.write(buffer, buffer, this);\n            } else {\n                // \u5199\u5165\u5B8C\u6210\uFF0C\u7EE7\u7EED\u8BFB\u53D6\n                ByteBuffer readBuffer = ByteBuffer.allocate(1024);\n                clientChannel.read(readBuffer, readBuffer, \n                    new ReadHandler(clientChannel));\n            }\n        }\n        \n        @Override\n        public void failed(Throwable exc, ByteBuffer buffer) {\n            System.err.println("\u5199\u5165\u6570\u636E\u5931\u8D25: " + exc.getMessage());\n            try {\n                clientChannel.close();\n            } catch (IOException e) {\n                System.err.println("\u5173\u95ED\u8FDE\u63A5\u5F02\u5E38: " + e.getMessage());\n            }\n        }\n    }\n    \n    public static void main(String[] args) throws IOException, InterruptedException {\n        new AIOServer(8080).start();\n    }\n}\n'})})}),(0,i.jsx)(a.A,{value:"aio-client",label:"AIO\u5BA2\u6237\u7AEF",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",metastring:'title="AIO\u5BA2\u6237\u7AEF\u5B9E\u73B0"',children:'import java.io.IOException;\nimport java.net.InetSocketAddress;\nimport java.nio.ByteBuffer;\nimport java.nio.channels.AsynchronousSocketChannel;\nimport java.nio.channels.CompletionHandler;\nimport java.util.Scanner;\nimport java.util.concurrent.CountDownLatch;\n\npublic class AIOClient {\n    private AsynchronousSocketChannel clientChannel;\n    private CountDownLatch latch;\n    \n    public void connect(String host, int port) throws IOException, InterruptedException {\n        clientChannel = AsynchronousSocketChannel.open();\n        latch = new CountDownLatch(1);\n        \n        clientChannel.connect(new InetSocketAddress(host, port), \n            null, new ConnectHandler());\n        \n        latch.await(); // \u7B49\u5F85\u8FDE\u63A5\u5B8C\u6210\n    }\n    \n    /**\n     * \u8FDE\u63A5\u5904\u7406\u5668\n     */\n    private class ConnectHandler implements CompletionHandler<Void, Void> {\n        @Override\n        public void completed(Void result, Void attachment) {\n            System.out.println("\u8FDE\u63A5\u670D\u52A1\u5668\u6210\u529F\uFF01");\n            latch.countDown();\n        }\n        \n        @Override\n        public void failed(Throwable exc, Void attachment) {\n            System.err.println("\u8FDE\u63A5\u670D\u52A1\u5668\u5931\u8D25: " + exc.getMessage());\n            latch.countDown();\n        }\n    }\n    \n    public void sendMessage(String message) {\n        ByteBuffer buffer = ByteBuffer.wrap(message.getBytes());\n        clientChannel.write(buffer, buffer, new WriteHandler());\n    }\n    \n    /**\n     * \u5199\u5165\u5904\u7406\u5668\n     */\n    private class WriteHandler implements CompletionHandler<Integer, ByteBuffer> {\n        @Override\n        public void completed(Integer bytesWritten, ByteBuffer buffer) {\n            if (buffer.hasRemaining()) {\n                clientChannel.write(buffer, buffer, this);\n            } else {\n                // \u5199\u5165\u5B8C\u6210\uFF0C\u5F00\u59CB\u8BFB\u53D6\u54CD\u5E94\n                ByteBuffer readBuffer = ByteBuffer.allocate(1024);\n                clientChannel.read(readBuffer, readBuffer, new ReadHandler());\n            }\n        }\n        \n        @Override\n        public void failed(Throwable exc, ByteBuffer buffer) {\n            System.err.println("\u53D1\u9001\u6D88\u606F\u5931\u8D25: " + exc.getMessage());\n        }\n    }\n    \n    /**\n     * \u8BFB\u53D6\u5904\u7406\u5668\n     */\n    private class ReadHandler implements CompletionHandler<Integer, ByteBuffer> {\n        @Override\n        public void completed(Integer bytesRead, ByteBuffer buffer) {\n            if (bytesRead > 0) {\n                buffer.flip();\n                byte[] data = new byte[buffer.remaining()];\n                buffer.get(data);\n                String response = new String(data);\n                System.out.println("\u670D\u52A1\u5668\u54CD\u5E94: " + response);\n            }\n        }\n        \n        @Override\n        public void failed(Throwable exc, ByteBuffer buffer) {\n            System.err.println("\u8BFB\u53D6\u54CD\u5E94\u5931\u8D25: " + exc.getMessage());\n        }\n    }\n    \n    public void close() throws IOException {\n        if (clientChannel != null) {\n            clientChannel.close();\n        }\n    }\n    \n    public static void main(String[] args) {\n        AIOClient client = new AIOClient();\n        \n        try {\n            client.connect("localhost", 8080);\n            \n            Scanner scanner = new Scanner(System.in);\n            System.out.println("\u8F93\u5165\u6D88\u606F\uFF08\u8F93\u5165\'bye\'\u9000\u51FA\uFF09:");\n            \n            String userInput;\n            while ((userInput = scanner.nextLine()) != null) {\n                client.sendMessage(userInput);\n                \n                // \u7ED9\u5F02\u6B65\u64CD\u4F5C\u4E00\u4E9B\u65F6\u95F4\n                Thread.sleep(1000);\n                \n                if ("bye".equalsIgnoreCase(userInput)) {\n                    break;\n                }\n            }\n        } catch (IOException | InterruptedException e) {\n            System.err.println("\u5BA2\u6237\u7AEF\u5F02\u5E38: " + e.getMessage());\n        } finally {\n            try {\n                client.close();\n            } catch (IOException e) {\n                System.err.println("\u5173\u95ED\u8FDE\u63A5\u5F02\u5E38: " + e.getMessage());\n            }\n        }\n    }\n}\n'})})}),(0,i.jsxs)(a.A,{value:"aio-features",label:"AIO\u7279\u6027\u5206\u6790",children:[(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"AIO\u6838\u5FC3\u7279\u6027"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u771F\u6B63\u5F02\u6B65"}),"\uFF1A\u64CD\u4F5C\u7ACB\u5373\u8FD4\u56DE\uFF0C\u901A\u8FC7\u56DE\u8C03\u5904\u7406\u7ED3\u679C"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u4E8B\u4EF6\u9A71\u52A8"}),"\uFF1A\u57FA\u4E8EProactor\u6A21\u5F0F"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u9AD8\u5E76\u53D1"}),"\uFF1A\u9002\u5408\u5904\u7406\u5927\u91CF\u5E76\u53D1\u8FDE\u63A5"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u96F6\u62F7\u8D1D"}),"\uFF1A\u652F\u6301DirectByteBuffer"]}),"\n"]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"AIO vs NIO"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// NIO - \u540C\u6B65\u975E\u963B\u585E\nint bytesRead = channel.read(buffer);  // \u7ACB\u5373\u8FD4\u56DE\nif (bytesRead > 0) {\n    // \u5904\u7406\u6570\u636E\n}\n\n// AIO - \u5F02\u6B65\u975E\u963B\u585E\nchannel.read(buffer, attachment, new CompletionHandler<Integer, Object>() {\n    @Override\n    public void completed(Integer result, Object attachment) {\n        // \u5F02\u6B65\u56DE\u8C03\u5904\u7406\u7ED3\u679C\n    }\n    \n    @Override\n    public void failed(Throwable exc, Object attachment) {\n        // \u5904\u7406\u5F02\u5E38\n    }\n});\n"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"AIO\u9002\u7528\u573A\u666F"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u9AD8\u5E76\u53D1\u957F\u8FDE\u63A5"}),"\n",(0,i.jsx)(n.li,{children:"\u5927\u91CF\u5F02\u6B65IO\u64CD\u4F5C"}),"\n",(0,i.jsx)(n.li,{children:"\u5BF9\u54CD\u5E94\u65F6\u95F4\u8981\u6C42\u9AD8"}),"\n",(0,i.jsx)(n.li,{children:"\u590D\u6742\u7684\u5F02\u6B65\u5904\u7406\u903B\u8F91"}),"\n"]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"AIO\u6CE8\u610F\u4E8B\u9879"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u56DE\u8C03\u5730\u72F1\u95EE\u9898"}),"\n",(0,i.jsx)(n.li,{children:"\u5F02\u5E38\u5904\u7406\u590D\u6742"}),"\n",(0,i.jsx)(n.li,{children:"\u8C03\u8BD5\u56F0\u96BE"}),"\n",(0,i.jsx)(n.li,{children:"\u9700\u8981\u5408\u7406\u7684\u7EBF\u7A0B\u6C60\u914D\u7F6E"}),"\n"]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"3-\u9AD8\u7EA7\u7F51\u7EDC\u7F16\u7A0B\u6280\u672F",children:"3. \u9AD8\u7EA7\u7F51\u7EDC\u7F16\u7A0B\u6280\u672F"}),"\n",(0,i.jsx)(n.h3,{id:"31-\u96F6\u62F7\u8D1D\u6280\u672F",children:"3.1 \u96F6\u62F7\u8D1D\u6280\u672F"}),"\n",(0,i.jsxs)(s.A,{children:[(0,i.jsxs)(a.A,{value:"zero-copy-concept",label:"\u96F6\u62F7\u8D1D\u6982\u5FF5",children:[(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u4F20\u7EDFIO\u6570\u636E\u62F7\u8D1D\u8FC7\u7A0B"})}),(0,i.jsx)(n.mermaid,{value:"graph TB\n    A[\u78C1\u76D8\u6587\u4EF6] --\x3e B[\u5185\u6838\u7F13\u51B2\u533A]\n    B --\x3e C[\u7528\u6237\u7A7A\u95F4\u7F13\u51B2\u533A]\n    C --\x3e D[Socket\u7F13\u51B2\u533A]\n    D --\x3e E[\u7F51\u5361\u7F13\u51B2\u533A]\n    \n    F[4\u6B21\u62F7\u8D1D] --\x3e G[2\u6B21\u7528\u6237\u6001/\u5185\u6838\u6001\u5207\u6362]"}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u96F6\u62F7\u8D1D\u4F18\u5316\u8FC7\u7A0B"})}),(0,i.jsx)(n.mermaid,{value:"graph TB\n    A[\u78C1\u76D8\u6587\u4EF6] --\x3e B[\u5185\u6838\u7F13\u51B2\u533A]\n    B --\x3e C[Socket\u7F13\u51B2\u533A]\n    C --\x3e D[\u7F51\u5361\u7F13\u51B2\u533A]\n    \n    E[2\u6B21\u62F7\u8D1D] --\x3e F[\u65E0\u7528\u6237\u6001/\u5185\u6838\u6001\u5207\u6362]"}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Java\u96F6\u62F7\u8D1D\u5B9E\u73B0"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",metastring:'title="\u96F6\u62F7\u8D1D\u6587\u4EF6\u4F20\u8F93"',children:'import java.io.FileInputStream;\nimport java.io.IOException;\nimport java.net.InetSocketAddress;\nimport java.nio.channels.FileChannel;\nimport java.nio.channels.ServerSocketChannel;\nimport java.nio.channels.SocketChannel;\n\npublic class ZeroCopyServer {\n    public static void main(String[] args) throws IOException {\n        ServerSocketChannel serverChannel = ServerSocketChannel.open();\n        serverChannel.bind(new InetSocketAddress(8080));\n        \n        while (true) {\n            SocketChannel clientChannel = serverChannel.accept();\n            \n            // \u4F7F\u7528transferTo\u5B9E\u73B0\u96F6\u62F7\u8D1D\n            FileInputStream fis = new FileInputStream("large-file.dat");\n            FileChannel fileChannel = fis.getChannel();\n            \n            // \u96F6\u62F7\u8D1D\u4F20\u8F93\u6587\u4EF6\n            long transferred = fileChannel.transferTo(\n                0, fileChannel.size(), clientChannel);\n            \n            System.out.println("\u4F20\u8F93\u5B57\u8282\u6570: " + transferred);\n            \n            fileChannel.close();\n            fis.close();\n            clientChannel.close();\n        }\n    }\n}\n'})})]}),(0,i.jsxs)(a.A,{value:"direct-buffer",label:"\u76F4\u63A5\u5185\u5B58",children:[(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"DirectByteBuffer\u4F18\u52BF"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",metastring:'title="\u76F4\u63A5\u5185\u5B58\u4F7F\u7528"',children:'import java.nio.ByteBuffer;\n\npublic class DirectBufferExample {\n    public static void main(String[] args) {\n        // \u5806\u5185\u5B58\u7F13\u51B2\u533A\n        ByteBuffer heapBuffer = ByteBuffer.allocate(1024);\n        \n        // \u76F4\u63A5\u5185\u5B58\u7F13\u51B2\u533A\uFF08\u96F6\u62F7\u8D1D\uFF09\n        ByteBuffer directBuffer = ByteBuffer.allocateDirect(1024);\n        \n        // \u6027\u80FD\u6D4B\u8BD5\n        long startTime = System.nanoTime();\n        \n        // \u76F4\u63A5\u5185\u5B58\u64CD\u4F5C\u66F4\u5FEB\uFF0C\u907F\u514DJVM\u5806\u5185\u5B58\u62F7\u8D1D\n        for (int i = 0; i < 1000000; i++) {\n            directBuffer.putInt(i);\n        }\n        \n        long endTime = System.nanoTime();\n        System.out.println("\u76F4\u63A5\u5185\u5B58\u64CD\u4F5C\u8017\u65F6: " + (endTime - startTime) + "ns");\n        \n        // \u6CE8\u610F\uFF1A\u76F4\u63A5\u5185\u5B58\u9700\u8981\u624B\u52A8\u91CA\u653E\n        // ((DirectBuffer) directBuffer).cleaner().clean();\n    }\n}\n'})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u5185\u5B58\u6620\u5C04\u6587\u4EF6"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",metastring:'title="\u5185\u5B58\u6620\u5C04\u6587\u4EF6"',children:'import java.io.RandomAccessFile;\nimport java.nio.MappedByteBuffer;\nimport java.nio.channels.FileChannel;\n\npublic class MemoryMappedFileExample {\n    public static void main(String[] args) throws Exception {\n        RandomAccessFile file = new RandomAccessFile("data.txt", "rw");\n        FileChannel channel = file.getChannel();\n        \n        // \u5185\u5B58\u6620\u5C04\u6587\u4EF6\n        MappedByteBuffer buffer = channel.map(\n            FileChannel.MapMode.READ_WRITE, 0, file.length());\n        \n        // \u76F4\u63A5\u64CD\u4F5C\u5185\u5B58\u6620\u5C04\u533A\u57DF\n        buffer.put("Hello Memory Mapped File".getBytes());\n        \n        channel.close();\n        file.close();\n    }\n}\n'})})]})]}),"\n",(0,i.jsx)(n.h3,{id:"32-\u7C98\u5305\u62C6\u5305\u5904\u7406",children:"3.2 \u7C98\u5305\u62C6\u5305\u5904\u7406"}),"\n",(0,i.jsxs)(s.A,{children:[(0,i.jsxs)(a.A,{value:"packet-problem",label:"\u7C98\u5305\u62C6\u5305\u95EE\u9898",children:[(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u7C98\u5305\u62C6\u5305\u73B0\u8C61"})}),(0,i.jsx)(n.mermaid,{value:"graph TB\n    A[\u53D1\u9001\u7AEF] --\x3e B[TCP\u7F13\u51B2\u533A]\n    B --\x3e C[\u7F51\u7EDC\u4F20\u8F93]\n    C --\x3e D[\u63A5\u6536\u7AEF\u7F13\u51B2\u533A]\n    D --\x3e E[\u5E94\u7528\u7A0B\u5E8F]\n    \n    F[\u6B63\u5E38\u60C5\u51B5] --\x3e F1[\u53051|\u53052|\u53053]\n    G[\u7C98\u5305\u60C5\u51B5] --\x3e G1[\u53051\u53052|\u53053]\n    H[\u62C6\u5305\u60C5\u51B5] --\x3e H1[\u53051\u7684\u4E00\u90E8\u5206|\u53051\u7684\u5269\u4F59\u90E8\u5206\u53052]"}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u4EA7\u751F\u539F\u56E0"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Nagle\u7B97\u6CD5"}),"\uFF1A\u4E3A\u63D0\u9AD8\u7F51\u7EDC\u6548\u7387\uFF0C\u5408\u5E76\u5C0F\u5305\u53D1\u9001"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"TCP\u7F13\u51B2\u533A"}),"\uFF1A\u53D1\u9001\u548C\u63A5\u6536\u7F13\u51B2\u533A\u5927\u5C0F\u9650\u5236"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u7F51\u7EDCMTU"}),"\uFF1A\u6700\u5927\u4F20\u8F93\u5355\u5143\u9650\u5236"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u5E94\u7528\u5C42\u8BFB\u53D6"}),"\uFF1A\u8BFB\u53D6\u6570\u636E\u7684\u65F6\u673A\u548C\u5927\u5C0F"]}),"\n"]})]}),(0,i.jsxs)(a.A,{value:"solution-methods",label:"\u89E3\u51B3\u65B9\u6848",children:[(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"1. \u56FA\u5B9A\u957F\u5EA6\u65B9\u6848"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",metastring:'title="\u56FA\u5B9A\u957F\u5EA6\u6D88\u606F\u5904\u7406"',children:"public class FixedLengthDecoder {\n    private static final int MESSAGE_LENGTH = 100;\n    private ByteBuffer buffer = ByteBuffer.allocate(MESSAGE_LENGTH * 10);\n    \n    public List<String> decode(ByteBuffer input) {\n        List<String> messages = new ArrayList<>();\n        \n        // \u5C06\u65B0\u6570\u636E\u8FFD\u52A0\u5230\u7F13\u51B2\u533A\n        buffer.put(input);\n        buffer.flip();\n        \n        // \u6309\u56FA\u5B9A\u957F\u5EA6\u89E3\u6790\u6D88\u606F\n        while (buffer.remaining() >= MESSAGE_LENGTH) {\n            byte[] messageBytes = new byte[MESSAGE_LENGTH];\n            buffer.get(messageBytes);\n            \n            String message = new String(messageBytes).trim();\n            messages.add(message);\n        }\n        \n        // \u4FDD\u7559\u672A\u5B8C\u6574\u7684\u6570\u636E\n        buffer.compact();\n        \n        return messages;\n    }\n}\n"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"2. \u5206\u9694\u7B26\u65B9\u6848"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",metastring:'title="\u5206\u9694\u7B26\u6D88\u606F\u5904\u7406"',children:"public class DelimiterDecoder {\n    private static final byte DELIMITER = '\\n';\n    private ByteBuffer buffer = ByteBuffer.allocate(8192);\n    \n    public List<String> decode(ByteBuffer input) {\n        List<String> messages = new ArrayList<>();\n        \n        buffer.put(input);\n        buffer.flip();\n        \n        int start = 0;\n        for (int i = 0; i < buffer.limit(); i++) {\n            if (buffer.get(i) == DELIMITER) {\n                // \u627E\u5230\u5B8C\u6574\u6D88\u606F\n                byte[] messageBytes = new byte[i - start];\n                buffer.position(start);\n                buffer.get(messageBytes);\n                \n                String message = new String(messageBytes);\n                messages.add(message);\n                \n                start = i + 1;\n            }\n        }\n        \n        // \u4FDD\u7559\u672A\u5B8C\u6574\u7684\u6570\u636E\n        if (start < buffer.limit()) {\n            buffer.position(start);\n            buffer.compact();\n        } else {\n            buffer.clear();\n        }\n        \n        return messages;\n    }\n}\n"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"3. \u957F\u5EA6\u5B57\u6BB5\u65B9\u6848"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",metastring:'title="\u957F\u5EA6\u5B57\u6BB5\u6D88\u606F\u5904\u7406"',children:"public class LengthFieldDecoder {\n    private ByteBuffer buffer = ByteBuffer.allocate(8192);\n    \n    public List<String> decode(ByteBuffer input) {\n        List<String> messages = new ArrayList<>();\n        \n        buffer.put(input);\n        buffer.flip();\n        \n        while (buffer.remaining() >= 4) { // \u81F3\u5C11\u6709\u957F\u5EA6\u5B57\u6BB5\n            buffer.mark(); // \u6807\u8BB0\u5F53\u524D\u4F4D\u7F6E\n            \n            int messageLength = buffer.getInt(); // \u8BFB\u53D6\u6D88\u606F\u957F\u5EA6\n            \n            if (buffer.remaining() >= messageLength) {\n                // \u6709\u5B8C\u6574\u6D88\u606F\n                byte[] messageBytes = new byte[messageLength];\n                buffer.get(messageBytes);\n                \n                String message = new String(messageBytes);\n                messages.add(message);\n            } else {\n                // \u6D88\u606F\u4E0D\u5B8C\u6574\uFF0C\u56DE\u9000\u5230\u6807\u8BB0\u4F4D\u7F6E\n                buffer.reset();\n                break;\n            }\n        }\n        \n        buffer.compact();\n        return messages;\n    }\n}\n"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"4. \u81EA\u5B9A\u4E49\u534F\u8BAE\u65B9\u6848"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",metastring:'title="\u81EA\u5B9A\u4E49\u534F\u8BAE\u6D88\u606F"',children:'public class CustomProtocolMessage {\n    private static final int MAGIC_NUMBER = 0xCAFEBABE;\n    private static final int HEADER_LENGTH = 16;\n    \n    private int magicNumber;    // 4\u5B57\u8282\u9B54\u6570\n    private int version;        // 4\u5B57\u8282\u7248\u672C\n    private int messageType;    // 4\u5B57\u8282\u6D88\u606F\u7C7B\u578B\n    private int bodyLength;     // 4\u5B57\u8282\u6D88\u606F\u4F53\u957F\u5EA6\n    private byte[] body;        // \u53D8\u957F\u6D88\u606F\u4F53\n    \n    public static CustomProtocolMessage decode(ByteBuffer buffer) {\n        if (buffer.remaining() < HEADER_LENGTH) {\n            return null; // \u5934\u90E8\u4E0D\u5B8C\u6574\n        }\n        \n        buffer.mark();\n        \n        int magic = buffer.getInt();\n        if (magic != MAGIC_NUMBER) {\n            throw new IllegalArgumentException("Invalid magic number");\n        }\n        \n        int version = buffer.getInt();\n        int messageType = buffer.getInt();\n        int bodyLength = buffer.getInt();\n        \n        if (buffer.remaining() < bodyLength) {\n            buffer.reset(); // \u6D88\u606F\u4F53\u4E0D\u5B8C\u6574\uFF0C\u56DE\u9000\n            return null;\n        }\n        \n        byte[] body = new byte[bodyLength];\n        buffer.get(body);\n        \n        CustomProtocolMessage message = new CustomProtocolMessage();\n        message.magicNumber = magic;\n        message.version = version;\n        message.messageType = messageType;\n        message.bodyLength = bodyLength;\n        message.body = body;\n        \n        return message;\n    }\n}\n'})})]})]}),"\n",(0,i.jsx)(n.h2,{id:"4-\u5E38\u89C1\u9762\u8BD5\u95EE\u9898\u4E0E\u89E3\u7B54",children:"4. \u5E38\u89C1\u9762\u8BD5\u95EE\u9898\u4E0E\u89E3\u7B54"}),"\n",(0,i.jsx)(n.h3,{id:"41-\u57FA\u7840\u6982\u5FF5\u95EE\u9898",children:"4.1 \u57FA\u7840\u6982\u5FF5\u95EE\u9898"}),"\n",(0,i.jsxs)(s.A,{children:[(0,i.jsxs)(a.A,{value:"basic-qa",label:"\u57FA\u7840\u95EE\u7B54",children:[(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Q1: BIO\u3001NIO\u3001AIO\u7684\u533A\u522B\u662F\u4EC0\u4E48\uFF1F"})}),(0,i.jsx)(n.p,{children:"A: \u4E09\u79CDIO\u6A21\u578B\u7684\u4E3B\u8981\u533A\u522B\uFF1A"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"BIO\uFF08\u963B\u585EIO\uFF09"}),"\uFF1A\u540C\u6B65\u963B\u585E\uFF0C\u4E00\u4E2A\u8FDE\u63A5\u4E00\u4E2A\u7EBF\u7A0B\uFF0C\u9002\u5408\u8FDE\u63A5\u6570\u5C11\u7684\u573A\u666F"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"NIO\uFF08\u975E\u963B\u585EIO\uFF09"}),"\uFF1A\u540C\u6B65\u975E\u963B\u585E\uFF0C\u4E00\u4E2A\u7EBF\u7A0B\u5904\u7406\u591A\u4E2A\u8FDE\u63A5\uFF0C\u4F7F\u7528Selector\u591A\u8DEF\u590D\u7528"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"AIO\uFF08\u5F02\u6B65IO\uFF09"}),"\uFF1A\u5F02\u6B65\u975E\u963B\u585E\uFF0C\u57FA\u4E8E\u4E8B\u4EF6\u548C\u56DE\u8C03\u673A\u5236\uFF0C\u9002\u5408\u9AD8\u5E76\u53D1\u573A\u666F"]}),"\n"]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Q2: Selector\u7684\u5DE5\u4F5C\u539F\u7406\u662F\u4EC0\u4E48\uFF1F"})}),(0,i.jsx)(n.p,{children:"A: Selector\u5DE5\u4F5C\u539F\u7406\uFF1A"}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u5C06Channel\u6CE8\u518C\u5230Selector\u4E0A\uFF0C\u6307\u5B9A\u611F\u5174\u8DA3\u7684\u4E8B\u4EF6"}),"\n",(0,i.jsx)(n.li,{children:"\u8C03\u7528select()\u65B9\u6CD5\u963B\u585E\u7B49\u5F85\u4E8B\u4EF6\u53D1\u751F"}),"\n",(0,i.jsx)(n.li,{children:"\u5F53\u6709\u4E8B\u4EF6\u5C31\u7EEA\u65F6\uFF0Cselect()\u8FD4\u56DE\u5C31\u7EEA\u901A\u9053\u6570\u91CF"}),"\n",(0,i.jsx)(n.li,{children:"\u901A\u8FC7selectedKeys()\u83B7\u53D6\u5C31\u7EEA\u7684SelectionKey\u96C6\u5408"}),"\n",(0,i.jsx)(n.li,{children:"\u904D\u5386\u5904\u7406\u6BCF\u4E2A\u5C31\u7EEA\u7684\u4E8B\u4EF6"}),"\n"]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Q3: \u4EC0\u4E48\u662F\u96F6\u62F7\u8D1D\uFF1F\u6709\u4EC0\u4E48\u4F18\u52BF\uFF1F"})}),(0,i.jsx)(n.p,{children:"A: \u96F6\u62F7\u8D1D\u662F\u6307\u6570\u636E\u5728\u4F20\u8F93\u8FC7\u7A0B\u4E2D\u907F\u514D\u5728\u7528\u6237\u7A7A\u95F4\u548C\u5185\u6838\u7A7A\u95F4\u4E4B\u95F4\u7684\u62F7\u8D1D\uFF1A"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u4F20\u7EDF\u65B9\u5F0F"}),"\uFF1A\u78C1\u76D8\u2192\u5185\u6838\u7F13\u51B2\u533A\u2192\u7528\u6237\u7F13\u51B2\u533A\u2192Socket\u7F13\u51B2\u533A\u2192\u7F51\u5361"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u96F6\u62F7\u8D1D"}),"\uFF1A\u78C1\u76D8\u2192\u5185\u6838\u7F13\u51B2\u533A\u2192Socket\u7F13\u51B2\u533A\u2192\u7F51\u5361"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u4F18\u52BF"}),"\uFF1A\u51CF\u5C11CPU\u5F00\u9500\u3001\u51CF\u5C11\u5185\u5B58\u62F7\u8D1D\u3001\u63D0\u9AD8\u4F20\u8F93\u6548\u7387"]}),"\n"]})]}),(0,i.jsxs)(a.A,{value:"advanced-qa",label:"\u6DF1\u5165\u95EE\u7B54",children:[(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Q4: \u5982\u4F55\u5904\u7406TCP\u7C98\u5305\u62C6\u5305\u95EE\u9898\uFF1F"})}),(0,i.jsx)(n.p,{children:"A: \u5E38\u89C1\u89E3\u51B3\u65B9\u6848\uFF1A"}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u56FA\u5B9A\u957F\u5EA6"}),"\uFF1A\u6BCF\u4E2A\u6D88\u606F\u56FA\u5B9A\u5B57\u8282\u6570\uFF0C\u7B80\u5355\u4F46\u6D6A\u8D39\u7A7A\u95F4"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u5206\u9694\u7B26"}),"\uFF1A\u4F7F\u7528\u7279\u6B8A\u5B57\u7B26\u5206\u9694\u6D88\u606F\uFF0C\u7075\u6D3B\u4F46\u9700\u8981\u8F6C\u4E49"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u957F\u5EA6\u5B57\u6BB5"}),"\uFF1A\u6D88\u606F\u5934\u5305\u542B\u957F\u5EA6\u4FE1\u606F\uFF0C\u6700\u5E38\u7528\u7684\u65B9\u6848"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u81EA\u5B9A\u4E49\u534F\u8BAE"}),"\uFF1A\u8BBE\u8BA1\u5B8C\u6574\u7684\u5E94\u7528\u5C42\u534F\u8BAE\uFF0C\u6700\u7075\u6D3B\u4F46\u590D\u6742"]}),"\n"]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Q5: \u9AD8\u5E76\u53D1\u7F51\u7EDC\u7F16\u7A0B\u7684\u7EBF\u7A0B\u6A21\u578B\u6709\u54EA\u4E9B\uFF1F"})}),(0,i.jsx)(n.p,{children:"A: \u5E38\u89C1\u7EBF\u7A0B\u6A21\u578B\uFF1A"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u5355\u7EBF\u7A0B\u6A21\u578B"}),"\uFF1A\u4E00\u4E2A\u7EBF\u7A0B\u5904\u7406\u6240\u6709IO\u4E8B\u4EF6\uFF0C\u7B80\u5355\u4F46\u6027\u80FD\u6709\u9650"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u591A\u7EBF\u7A0B\u6A21\u578B"}),"\uFF1A\u4E3A\u6BCF\u4E2A\u8FDE\u63A5\u5206\u914D\u7EBF\u7A0B\uFF0C\u8D44\u6E90\u6D88\u8017\u5927"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u7EBF\u7A0B\u6C60\u6A21\u578B"}),"\uFF1A\u4F7F\u7528\u56FA\u5B9A\u5927\u5C0F\u7EBF\u7A0B\u6C60\uFF0C\u63A7\u5236\u8D44\u6E90\u6D88\u8017"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reactor\u6A21\u578B"}),"\uFF1A\u4E8B\u4EF6\u9A71\u52A8\uFF0C\u5355\u7EBF\u7A0B\u6216\u591A\u7EBF\u7A0BReactor"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Proactor\u6A21\u578B"}),"\uFF1A\u5F02\u6B65IO\uFF0C\u57FA\u4E8E\u5B8C\u6210\u4E8B\u4EF6\u7684\u5904\u7406"]}),"\n"]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Q6: \u5982\u4F55\u4F18\u5316\u7F51\u7EDC\u7F16\u7A0B\u6027\u80FD\uFF1F"})}),(0,i.jsx)(n.p,{children:"A: \u6027\u80FD\u4F18\u5316\u7B56\u7565\uFF1A"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u9009\u62E9\u5408\u9002\u7684IO\u6A21\u578B"}),"\uFF1A\u6839\u636E\u5E76\u53D1\u91CF\u9009\u62E9BIO/NIO/AIO"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u4F7F\u7528\u96F6\u62F7\u8D1D\u6280\u672F"}),"\uFF1ADirectByteBuffer\u3001transferTo\u7B49"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u5408\u7406\u8BBE\u7F6E\u7F13\u51B2\u533A\u5927\u5C0F"}),"\uFF1A\u907F\u514D\u9891\u7E41\u7684\u7CFB\u7EDF\u8C03\u7528"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u8FDE\u63A5\u6C60\u590D\u7528"}),"\uFF1A\u51CF\u5C11\u8FDE\u63A5\u5EFA\u7ACB\u548C\u9500\u6BC1\u5F00\u9500"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u6279\u91CF\u5904\u7406"}),"\uFF1A\u5408\u5E76\u5C0F\u7684IO\u64CD\u4F5C"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u5F02\u6B65\u5904\u7406"}),"\uFF1A\u907F\u514D\u963B\u585E\u4E3B\u7EBF\u7A0B"]}),"\n"]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"42-\u5B9E\u9645\u5E94\u7528\u95EE\u9898",children:"4.2 \u5B9E\u9645\u5E94\u7528\u95EE\u9898"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u7F51\u7EDC\u7F16\u7A0B\u6700\u4F73\u5B9E\u8DF5"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u9009\u62E9\u5408\u9002\u7684IO\u6A21\u578B"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u8FDE\u63A5\u6570 < 1000\uFF1ABIO + \u7EBF\u7A0B\u6C60"}),"\n",(0,i.jsx)(n.li,{children:"\u8FDE\u63A5\u6570 1000-10000\uFF1ANIO + Reactor"}),"\n",(0,i.jsx)(n.li,{children:"\u8FDE\u63A5\u6570 > 10000\uFF1AAIO + Proactor"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u5F02\u5E38\u5904\u7406"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u7F51\u7EDC\u4E2D\u65AD\u5904\u7406"}),"\n",(0,i.jsx)(n.li,{children:"\u8D85\u65F6\u673A\u5236\u8BBE\u7F6E"}),"\n",(0,i.jsx)(n.li,{children:"\u8D44\u6E90\u6E05\u7406\u4FDD\u8BC1"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u6027\u80FD\u76D1\u63A7"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u8FDE\u63A5\u6570\u76D1\u63A7"}),"\n",(0,i.jsx)(n.li,{children:"\u541E\u5410\u91CF\u7EDF\u8BA1"}),"\n",(0,i.jsx)(n.li,{children:"\u5EF6\u8FDF\u5206\u6790"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u5B89\u5168\u8003\u8651"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u8F93\u5165\u9A8C\u8BC1"}),"\n",(0,i.jsx)(n.li,{children:"\u8FDE\u63A5\u6570\u9650\u5236"}),"\n",(0,i.jsx)(n.li,{children:"DDoS\u9632\u62A4"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u901A\u8FC7\u6DF1\u5165\u7406\u89E3Socket\u7F16\u7A0B\u548CIO\u6A21\u578B\uFF0C\u4F60\u5C06\u80FD\u591F\uFF1A"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u9009\u62E9\u5408\u9002\u7684IO\u6A21\u578B\u6784\u5EFA\u9AD8\u6027\u80FD\u7F51\u7EDC\u5E94\u7528"}),"\n",(0,i.jsx)(n.li,{children:"\u89E3\u51B3\u7F51\u7EDC\u7F16\u7A0B\u4E2D\u7684\u5E38\u89C1\u95EE\u9898"}),"\n",(0,i.jsx)(n.li,{children:"\u4F18\u5316\u7F51\u7EDC\u5E94\u7528\u7684\u6027\u80FD\u548C\u53EF\u6269\u5C55\u6027"}),"\n",(0,i.jsx)(n.li,{children:"\u5904\u7406\u590D\u6742\u7684\u5E76\u53D1\u548C\u5F02\u6B65\u7F16\u7A0B\u573A\u666F"}),"\n"]})]})}function p(e={}){let{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},57250:function(e,n,t){t.d(n,{A:()=>l});var r=t(74848);t(96540);var i=t(34164);function l({children:e,hidden:n,className:t}){return(0,r.jsx)("div",{role:"tabpanel",className:(0,i.A)("tabItem_Ymn6",t),hidden:n,children:e})}},78010:function(e,n,t){t.d(n,{A:()=>b});var r=t(74848),i=t(96540),l=t(34164),s=t(88287),a=t(28584),c=t(56347),o=t(99989),d=t(96629),h=t(80618),u=t(41367);function p(e){return i.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,i.isValidElement)(e)&&function(e){let{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function f({value:e,tabValues:n}){return n.some(n=>n.value===e)}var x=t(19863);function j({className:e,block:n,selectedValue:t,selectValue:i,tabValues:s}){let c=[],{blockElementScrollPositionUntilNextRender:o}=(0,a.a_)(),d=e=>{let n=e.currentTarget,r=s[c.indexOf(n)].value;r!==t&&(o(n),i(r))},h=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{let t=c.indexOf(e.currentTarget)+1;n=c[t]??c[0];break}case"ArrowLeft":{let t=c.indexOf(e.currentTarget)-1;n=c[t]??c[c.length-1]}}n?.focus()};return(0,r.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.A)("tabs",{"tabs--block":n},e),children:s.map(({value:e,label:n,attributes:i})=>(0,r.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{c.push(e)},onKeyDown:h,onClick:d,...i,className:(0,l.A)("tabs__item","tabItem_LNqP",i?.className,{"tabs__item--active":t===e}),children:n??e},e))})}function g({lazy:e,children:n,selectedValue:t}){let s=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){let e=s.find(e=>e.props.value===t);return e?(0,i.cloneElement)(e,{className:(0,l.A)("margin-top--md",e.props.className)}):null}return(0,r.jsx)("div",{className:"margin-top--md",children:s.map((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==t}))})}function m(e){let n=function(e){let n,{defaultValue:t,queryString:r=!1,groupId:l}=e,s=function(e){let{values:n,children:t}=e;return(0,i.useMemo)(()=>{let e=n??p(t).map(({props:{value:e,label:n,attributes:t,default:r}})=>({value:e,label:n,attributes:t,default:r})),r=(0,h.XI)(e,(e,n)=>e.value===n.value);if(r.length>0)throw Error(`Docusaurus error: Duplicate values "${r.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`);return e},[n,t])}(e),[a,x]=(0,i.useState)(()=>(function({defaultValue:e,tabValues:n}){if(0===n.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!f({value:e,tabValues:n}))throw Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}let t=n.find(e=>e.default)??n[0];if(!t)throw Error("Unexpected error: 0 tabValues");return t.value})({defaultValue:t,tabValues:s})),[j,g]=function({queryString:e=!1,groupId:n}){let t=(0,c.W6)(),r=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,d.aZ)(r),(0,i.useCallback)(e=>{if(!r)return;let n=new URLSearchParams(t.location.search);n.set(r,e),t.replace({...t.location,search:n.toString()})},[r,t])]}({queryString:r,groupId:l}),[m,b]=function({groupId:e}){let n=e?`docusaurus.tab.${e}`:null,[t,r]=(0,u.Dv)(n);return[t,(0,i.useCallback)(e=>{n&&r.set(e)},[n,r])]}({groupId:l}),v=f({value:n=j??m,tabValues:s})?n:null;return(0,o.A)(()=>{v&&x(v)},[v]),{selectedValue:a,selectValue:(0,i.useCallback)(e=>{if(!f({value:e,tabValues:s}))throw Error(`Can't select invalid tab value=${e}`);x(e),g(e),b(e)},[g,b,s]),tabValues:s}}(e);return(0,r.jsxs)("div",{className:(0,l.A)(s.G.tabs.container,"tabs-container","tabList__CuJ"),children:[(0,r.jsx)(j,{...n,...e}),(0,r.jsx)(g,{...n,...e})]})}function b(e){let n=(0,x.A)();return(0,r.jsx)(m,{...e,children:p(e.children)},String(n))}},28453:function(e,n,t){t.d(n,{R:()=>s,x:()=>a});var r=t(96540);let i={},l=r.createContext(i);function s(e){let n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);