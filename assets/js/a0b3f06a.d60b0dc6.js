"use strict";(self.webpackChunkfullstack_dev_blog=self.webpackChunkfullstack_dev_blog||[]).push([["97049"],{23724:function(n,e,r){r.r(e),r.d(e,{metadata:()=>s,default:()=>u,frontMatter:()=>a,contentTitle:()=>o,toc:()=>x,assets:()=>h});var s=JSON.parse('{"id":"backend/spring/transaction","title":"Spring\u4E8B\u52A1\u7BA1\u7406\u8BE6\u89E3","description":"\u6DF1\u5165\u7406\u89E3Spring\u4E8B\u52A1\u7BA1\u7406\u673A\u5236\u3001\u4F20\u64AD\u884C\u4E3A\u4E0E\u6700\u4F73\u5B9E\u8DF5","source":"@site/docs/backend/spring/transaction.mdx","sourceDirName":"backend/spring","slug":"/backend/spring/transaction","permalink":"/docs/backend/spring/transaction","draft":false,"unlisted":false,"editUrl":"https://github.com/MasterLiu93/blog-web/tree/main/docs/backend/spring/transaction.mdx","tags":[],"version":"current","lastUpdatedBy":"Laby","lastUpdatedAt":1754524800000,"sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Spring\u4E8B\u52A1\u7BA1\u7406\u8BE6\u89E3","description":"\u6DF1\u5165\u7406\u89E3Spring\u4E8B\u52A1\u7BA1\u7406\u673A\u5236\u3001\u4F20\u64AD\u884C\u4E3A\u4E0E\u6700\u4F73\u5B9E\u8DF5","authors":["Laby"],"last_update":{"date":"2025-08-07T00:00:00.000Z","author":"Laby"}},"sidebar":"tutorialSidebar","previous":{"title":"Spring Cloud\u8BE6\u89E3","permalink":"/docs/backend/spring/spring-cloud"},"next":{"title":"\u6570\u636E\u5E93\u8BBE\u8BA1\u4E0EORM\u6280\u672F\u8BE6\u89E3","permalink":"/docs/backend/database-orm/database-intro"}}'),i=r(74848),l=r(28453),c=r(78010),d=r(57250),t=r(19007);let a={sidebar_position:3,title:"Spring\u4E8B\u52A1\u7BA1\u7406\u8BE6\u89E3",description:"\u6DF1\u5165\u7406\u89E3Spring\u4E8B\u52A1\u7BA1\u7406\u673A\u5236\u3001\u4F20\u64AD\u884C\u4E3A\u4E0E\u6700\u4F73\u5B9E\u8DF5",authors:["Laby"],last_update:{date:new Date("2025-08-07T00:00:00.000Z"),author:"Laby"}},o="Spring \u4E8B\u52A1\u7BA1\u7406\u8BE6\u89E3",h={},x=[{value:"1. \u4E8B\u52A1\u57FA\u7840\u6982\u5FF5",id:"1-\u4E8B\u52A1\u57FA\u7840\u6982\u5FF5",level:2},{value:"1.1 \u4EC0\u4E48\u662F\u4E8B\u52A1\uFF1F",id:"11-\u4EC0\u4E48\u662F\u4E8B\u52A1",level:3},{value:"ACID\u7279\u6027",id:"acid\u7279\u6027",level:4},{value:"1.2 Spring\u4E8B\u52A1\u7BA1\u7406\u65B9\u5F0F",id:"12-spring\u4E8B\u52A1\u7BA1\u7406\u65B9\u5F0F",level:3},{value:"2. \u4E8B\u52A1\u4F20\u64AD\u884C\u4E3A",id:"2-\u4E8B\u52A1\u4F20\u64AD\u884C\u4E3A",level:2},{value:"2.1 \u4F20\u64AD\u884C\u4E3A\u7C7B\u578B",id:"21-\u4F20\u64AD\u884C\u4E3A\u7C7B\u578B",level:3},{value:"3. \u4E8B\u52A1\u9694\u79BB\u7EA7\u522B",id:"3-\u4E8B\u52A1\u9694\u79BB\u7EA7\u522B",level:2},{value:"3.1 \u9694\u79BB\u7EA7\u522B\u7C7B\u578B",id:"31-\u9694\u79BB\u7EA7\u522B\u7C7B\u578B",level:3},{value:"3.2 \u9694\u79BB\u7EA7\u522B\u8BE6\u89E3",id:"32-\u9694\u79BB\u7EA7\u522B\u8BE6\u89E3",level:3},{value:"\u5E76\u53D1\u95EE\u9898\u793A\u4F8B",id:"\u5E76\u53D1\u95EE\u9898\u793A\u4F8B",level:4},{value:"4. \u4E8B\u52A1\u56DE\u6EDA\u673A\u5236",id:"4-\u4E8B\u52A1\u56DE\u6EDA\u673A\u5236",level:2},{value:"4.1 \u81EA\u52A8\u56DE\u6EDA",id:"41-\u81EA\u52A8\u56DE\u6EDA",level:3},{value:"4.2 \u624B\u52A8\u56DE\u6EDA",id:"42-\u624B\u52A8\u56DE\u6EDA",level:3},{value:"5. \u4E8B\u52A1\u5931\u6548\u573A\u666F",id:"5-\u4E8B\u52A1\u5931\u6548\u573A\u666F",level:2},{value:"5.1 \u5E38\u89C1\u5931\u6548\u573A\u666F",id:"51-\u5E38\u89C1\u5931\u6548\u573A\u666F",level:3},{value:"5.2 \u89E3\u51B3\u65B9\u6848",id:"52-\u89E3\u51B3\u65B9\u6848",level:3},{value:"6. \u4E8B\u52A1\u6700\u4F73\u5B9E\u8DF5",id:"6-\u4E8B\u52A1\u6700\u4F73\u5B9E\u8DF5",level:2},{value:"6.1 \u4E8B\u52A1\u8BBE\u8BA1\u539F\u5219",id:"61-\u4E8B\u52A1\u8BBE\u8BA1\u539F\u5219",level:3},{value:"6.2 \u8BFB\u5199\u5206\u79BB",id:"62-\u8BFB\u5199\u5206\u79BB",level:3},{value:"7. \u9762\u8BD5\u9898\u7CBE\u9009",id:"7-\u9762\u8BD5\u9898\u7CBE\u9009",level:2},{value:"7.1 \u57FA\u7840\u6982\u5FF5\u9898",id:"71-\u57FA\u7840\u6982\u5FF5\u9898",level:3},{value:"7.2 \u5B9E\u8DF5\u9898",id:"72-\u5B9E\u8DF5\u9898",level:3},{value:"7.3 \u9AD8\u7EA7\u9898",id:"73-\u9AD8\u7EA7\u9898",level:3}];function j(n){let e={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...n.components},{Details:r}=e;return r||function(n,e){throw Error("Expected "+(e?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"spring-\u4E8B\u52A1\u7BA1\u7406\u8BE6\u89E3",children:"Spring \u4E8B\u52A1\u7BA1\u7406\u8BE6\u89E3"})}),"\n",(0,i.jsx)(e.p,{children:"Spring\u4E8B\u52A1\u7BA1\u7406\u662FSpring\u6846\u67B6\u7684\u91CD\u8981\u7279\u6027\uFF0C\u5B83\u63D0\u4F9B\u4E86\u58F0\u660E\u5F0F\u548C\u7F16\u7A0B\u5F0F\u4E24\u79CD\u4E8B\u52A1\u7BA1\u7406\u65B9\u5F0F\uFF0C\u7B80\u5316\u4E86\u6570\u636E\u5E93\u4E8B\u52A1\u7684\u5904\u7406\uFF0C\u786E\u4FDD\u6570\u636E\u7684\u4E00\u81F4\u6027\u548C\u5B8C\u6574\u6027\u3002"}),"\n",(0,i.jsx)(e.admonition,{title:"\u672C\u6587\u5185\u5BB9\u6982\u89C8",type:"info",children:(0,i.jsx)(t.A,{toc:x})}),"\n",(0,i.jsxs)(e.admonition,{title:"\u6838\u5FC3\u4EF7\u503C",type:"tip",children:[(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Spring\u4E8B\u52A1 = \u58F0\u660E\u5F0F\u4E8B\u52A1 + \u7F16\u7A0B\u5F0F\u4E8B\u52A1 + \u4F20\u64AD\u884C\u4E3A + \u9694\u79BB\u7EA7\u522B + \u56DE\u6EDA\u673A\u5236"})}),(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u{1F4CC} ",(0,i.jsx)(e.strong,{children:"\u58F0\u660E\u5F0F\u4E8B\u52A1"}),"\uFF1A\u901A\u8FC7\u6CE8\u89E3\u8F7B\u677E\u7BA1\u7406\u4E8B\u52A1\uFF0C\u65E0\u9700\u7F16\u5199\u6A21\u677F\u4EE3\u7801"]}),"\n",(0,i.jsxs)(e.li,{children:["\u{1F504} ",(0,i.jsx)(e.strong,{children:"\u7F16\u7A0B\u5F0F\u4E8B\u52A1"}),"\uFF1A\u7075\u6D3B\u63A7\u5236\u4E8B\u52A1\u8FB9\u754C\uFF0C\u6EE1\u8DB3\u590D\u6742\u573A\u666F\u9700\u6C42"]}),"\n",(0,i.jsxs)(e.li,{children:["\u{1F500} ",(0,i.jsx)(e.strong,{children:"\u4F20\u64AD\u884C\u4E3A"}),"\uFF1A\u5B9A\u4E49\u4E8B\u52A1\u65B9\u6CD5\u95F4\u7684\u534F\u4F5C\u65B9\u5F0F\uFF0C\u4F18\u5316\u4E8B\u52A1\u8FB9\u754C"]}),"\n",(0,i.jsxs)(e.li,{children:["\u{1F6E1}\uFE0F ",(0,i.jsx)(e.strong,{children:"\u9694\u79BB\u7EA7\u522B"}),"\uFF1A\u89E3\u51B3\u5E76\u53D1\u4E8B\u52A1\u95EE\u9898\uFF0C\u4FDD\u969C\u6570\u636E\u4E00\u81F4\u6027"]}),"\n",(0,i.jsxs)(e.li,{children:["\u23EA ",(0,i.jsx)(e.strong,{children:"\u56DE\u6EDA\u673A\u5236"}),"\uFF1A\u7CBE\u786E\u63A7\u5236\u5F02\u5E38\u56DE\u6EDA\u7B56\u7565\uFF0C\u63D0\u5347\u7CFB\u7EDF\u5065\u58EE\u6027"]}),"\n"]})]}),"\n",(0,i.jsx)(e.h2,{id:"1-\u4E8B\u52A1\u57FA\u7840\u6982\u5FF5",children:"1. \u4E8B\u52A1\u57FA\u7840\u6982\u5FF5"}),"\n",(0,i.jsx)(e.h3,{id:"11-\u4EC0\u4E48\u662F\u4E8B\u52A1",children:"1.1 \u4EC0\u4E48\u662F\u4E8B\u52A1\uFF1F"}),"\n",(0,i.jsx)(e.p,{children:"\u4E8B\u52A1\u662F\u6570\u636E\u5E93\u64CD\u4F5C\u7684\u4E00\u4E2A\u903B\u8F91\u5355\u5143\uFF0C\u5B83\u8981\u4E48\u5168\u90E8\u6210\u529F\u6267\u884C\uFF0C\u8981\u4E48\u5168\u90E8\u56DE\u6EDA\u3002\u4E8B\u52A1\u786E\u4FDD\u6570\u636E\u7684\u4E00\u81F4\u6027\u548C\u5B8C\u6574\u6027\u3002"}),"\n",(0,i.jsx)(e.mermaid,{value:'graph TD\n    A[\u4E8B\u52A1] --\x3e B[\u539F\u5B50\u6027]\n    A --\x3e C[\u4E00\u81F4\u6027]\n    A --\x3e D[\u9694\u79BB\u6027]\n    A --\x3e E[\u6301\u4E45\u6027]\n    \n    B --\x3e B1["\u4E00\u4E2A\u4E0D\u53EF\u5206\u5272\u7684\u5DE5\u4F5C\u5355\u4F4D"]\n    C --\x3e C1["\u4E8B\u52A1\u524D\u540E\u6570\u636E\u4FDD\u6301\u4E00\u81F4\u72B6\u6001"]\n    D --\x3e D1["\u4E8B\u52A1\u6267\u884C\u76F8\u4E92\u9694\u79BB"]\n    E --\x3e E1["\u4E8B\u52A1\u4E00\u65E6\u63D0\u4EA4\uFF0C\u6C38\u4E45\u4FDD\u5B58"]\n    \n    F[\u8F6C\u8D26\u793A\u4F8B] --\x3e F1["1. \u8D26\u6237A\u6263\u6B3E"]\n    F1 --\x3e F2["2. \u8D26\u6237B\u52A0\u6B3E"]\n    F --\x3e|"\u539F\u5B50\u6027"| F3["\u8981\u4E48\u5168\u90E8\u6210\u529F\uFF0C\u8981\u4E48\u5168\u90E8\u56DE\u6EDA"]\n    F --\x3e|"\u4E00\u81F4\u6027"| F4["\u603B\u91D1\u989D\u5728\u8F6C\u8D26\u524D\u540E\u4FDD\u6301\u4E0D\u53D8"]\n    F --\x3e|"\u9694\u79BB\u6027"| F5["\u5E76\u53D1\u8F6C\u8D26\u4E92\u4E0D\u5F71\u54CD"]\n    F --\x3e|"\u6301\u4E45\u6027"| F6["\u8F6C\u8D26\u6210\u529F\u540E\u7ED3\u679C\u6C38\u4E45\u4FDD\u5B58"]'}),"\n",(0,i.jsx)(e.h4,{id:"acid\u7279\u6027",children:"ACID\u7279\u6027"}),"\n",(0,i.jsx)("div",{className:"card",children:(0,i.jsx)("div",{className:"card__body",children:(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u7279\u6027"}),(0,i.jsx)(e.th,{children:"\u8BF4\u660E"}),(0,i.jsx)(e.th,{children:"\u793A\u4F8B"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u539F\u5B50\u6027\uFF08Atomicity\uFF09"})}),(0,i.jsx)(e.td,{children:"\u4E8B\u52A1\u662F\u4E0D\u53EF\u5206\u5272\u7684\u5DE5\u4F5C\u5355\u4F4D"}),(0,i.jsx)(e.td,{children:"\u8F6C\u8D26\u64CD\u4F5C\u8981\u4E48\u6210\u529F\u8981\u4E48\u5931\u8D25"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u4E00\u81F4\u6027\uFF08Consistency\uFF09"})}),(0,i.jsx)(e.td,{children:"\u4E8B\u52A1\u6267\u884C\u524D\u540E\u6570\u636E\u72B6\u6001\u4E00\u81F4"}),(0,i.jsx)(e.td,{children:"\u8F6C\u8D26\u524D\u540E\u603B\u91D1\u989D\u4E0D\u53D8"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u9694\u79BB\u6027\uFF08Isolation\uFF09"})}),(0,i.jsx)(e.td,{children:"\u5E76\u53D1\u4E8B\u52A1\u4E4B\u95F4\u76F8\u4E92\u9694\u79BB"}),(0,i.jsx)(e.td,{children:"\u4E8B\u52A1A\u770B\u4E0D\u5230\u4E8B\u52A1B\u7684\u672A\u63D0\u4EA4\u6570\u636E"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u6301\u4E45\u6027\uFF08Durability\uFF09"})}),(0,i.jsx)(e.td,{children:"\u4E8B\u52A1\u63D0\u4EA4\u540E\u6570\u636E\u6C38\u4E45\u4FDD\u5B58"}),(0,i.jsx)(e.td,{children:"\u63D0\u4EA4\u540E\u6570\u636E\u4E0D\u4F1A\u4E22\u5931"})]})]})]})})}),"\n",(0,i.jsx)(e.h3,{id:"12-spring\u4E8B\u52A1\u7BA1\u7406\u65B9\u5F0F",children:"1.2 Spring\u4E8B\u52A1\u7BA1\u7406\u65B9\u5F0F"}),"\n",(0,i.jsx)(e.p,{children:"Spring\u63D0\u4F9B\u4E86\u4E24\u79CD\u4E8B\u52A1\u7BA1\u7406\u65B9\u5F0F\uFF1A\u58F0\u660E\u5F0F\u4E8B\u52A1\u548C\u7F16\u7A0B\u5F0F\u4E8B\u52A1\u3002"}),"\n",(0,i.jsxs)(c.A,{children:[(0,i.jsx)(d.A,{value:"declarative",label:"\u58F0\u660E\u5F0F\u4E8B\u52A1",default:!0,children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",metastring:'title="\u58F0\u660E\u5F0F\u4E8B\u52A1"',children:"@Service\n@Transactional\npublic class UserService {\n    \n    @Autowired\n    private UserRepository userRepository;\n    \n    @Autowired\n    private AccountRepository accountRepository;\n    \n    @Transactional\n    public void transferMoney(Long fromUserId, Long toUserId, BigDecimal amount) {\n        // \u6263\u6B3E\n        Account fromAccount = accountRepository.findByUserId(fromUserId);\n        fromAccount.setBalance(fromAccount.getBalance().subtract(amount));\n        accountRepository.save(fromAccount);\n        \n        // \u52A0\u6B3E\n        Account toAccount = accountRepository.findByUserId(toUserId);\n        toAccount.setBalance(toAccount.getBalance().add(amount));\n        accountRepository.save(toAccount);\n    }\n}\n"})})}),(0,i.jsx)(d.A,{value:"programmatic",label:"\u7F16\u7A0B\u5F0F\u4E8B\u52A1",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",metastring:'title="\u7F16\u7A0B\u5F0F\u4E8B\u52A1"',children:"@Service\npublic class UserService {\n    \n    @Autowired\n    private TransactionTemplate transactionTemplate;\n    \n    @Autowired\n    private UserRepository userRepository;\n    \n    public void createUser(User user) {\n        transactionTemplate.execute(new TransactionCallbackWithoutResult() {\n            @Override\n            protected void doInTransactionWithoutResult(TransactionStatus status) {\n                try {\n                    userRepository.save(user);\n                    // \u5176\u4ED6\u4E1A\u52A1\u903B\u8F91\n                } catch (Exception e) {\n                    status.setRollbackOnly();\n                    throw e;\n                }\n            }\n        });\n    }\n}\n"})})}),(0,i.jsx)(d.A,{value:"comparison",label:"\u5BF9\u6BD4\u5206\u6790",children:(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("div",{className:"card__header",children:(0,i.jsx)("h4",{children:"\u58F0\u660E\u5F0F\u4E8B\u52A1 vs \u7F16\u7A0B\u5F0F\u4E8B\u52A1"})}),(0,i.jsx)("div",{className:"card__body",children:(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u7279\u6027"}),(0,i.jsx)(e.th,{children:"\u58F0\u660E\u5F0F\u4E8B\u52A1"}),(0,i.jsx)(e.th,{children:"\u7F16\u7A0B\u5F0F\u4E8B\u52A1"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u4F7F\u7528\u65B9\u5F0F"})}),(0,i.jsx)(e.td,{children:"\u6CE8\u89E3\u914D\u7F6E"}),(0,i.jsx)(e.td,{children:"\u4EE3\u7801\u63A7\u5236"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u4EE3\u7801\u4FB5\u5165\u6027"})}),(0,i.jsx)(e.td,{children:"\u4F4E"}),(0,i.jsx)(e.td,{children:"\u9AD8"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u7075\u6D3B\u6027"})}),(0,i.jsx)(e.td,{children:"\u8F83\u4F4E"}),(0,i.jsx)(e.td,{children:"\u5F88\u9AD8"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u9002\u7528\u573A\u666F"})}),(0,i.jsx)(e.td,{children:"\u5927\u591A\u6570\u4E1A\u52A1\u573A\u666F"}),(0,i.jsx)(e.td,{children:"\u590D\u6742\u4E8B\u52A1\u63A7\u5236"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u5B66\u4E60\u66F2\u7EBF"})}),(0,i.jsx)(e.td,{children:"\u5E73\u7F13"}),(0,i.jsx)(e.td,{children:"\u8F83\u9661"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u7EF4\u62A4\u6210\u672C"})}),(0,i.jsx)(e.td,{children:"\u4F4E"}),(0,i.jsx)(e.td,{children:"\u9AD8"})]})]})]})})]})})]}),"\n",(0,i.jsx)(e.h2,{id:"2-\u4E8B\u52A1\u4F20\u64AD\u884C\u4E3A",children:"2. \u4E8B\u52A1\u4F20\u64AD\u884C\u4E3A"}),"\n",(0,i.jsx)(e.h3,{id:"21-\u4F20\u64AD\u884C\u4E3A\u7C7B\u578B",children:"2.1 \u4F20\u64AD\u884C\u4E3A\u7C7B\u578B"}),"\n",(0,i.jsx)(e.p,{children:"Spring\u5B9A\u4E49\u4E867\u79CD\u4E8B\u52A1\u4F20\u64AD\u884C\u4E3A\uFF0C\u7528\u4E8E\u63A7\u5236\u4E8B\u52A1\u65B9\u6CD5\u4E4B\u95F4\u7684\u8C03\u7528\u5173\u7CFB\uFF1A"}),"\n",(0,i.jsx)(e.mermaid,{value:'flowchart LR\n    A[\u4F20\u64AD\u884C\u4E3A] --\x3e B[REQUIRED]\n    A --\x3e C[SUPPORTS]\n    A --\x3e D[MANDATORY]\n    A --\x3e E[REQUIRES_NEW]\n    A --\x3e F[NOT_SUPPORTED]\n    A --\x3e G[NEVER]\n    A --\x3e H[NESTED]\n    \n    B --\x3e|"\u9ED8\u8BA4\u884C\u4E3A"| B1["\u52A0\u5165\u73B0\u6709\u4E8B\u52A1\uFF0C\u5426\u5219\u521B\u5EFA\u65B0\u4E8B\u52A1"]\n    C --\x3e C1["\u6709\u4E8B\u52A1\u5219\u52A0\u5165\uFF0C\u65E0\u4E8B\u52A1\u5219\u4E0D\u5F00\u542F"]\n    D --\x3e D1["\u5FC5\u987B\u5728\u4E8B\u52A1\u4E2D\u8FD0\u884C\uFF0C\u5426\u5219\u5F02\u5E38"]\n    E --\x3e E1["\u521B\u5EFA\u65B0\u4E8B\u52A1\uFF0C\u6302\u8D77\u5F53\u524D\u4E8B\u52A1"]\n    F --\x3e F1["\u4E0D\u652F\u6301\u4E8B\u52A1\uFF0C\u6302\u8D77\u5F53\u524D\u4E8B\u52A1"]\n    G --\x3e G1["\u4E0D\u80FD\u5728\u4E8B\u52A1\u4E2D\u8FD0\u884C\uFF0C\u5426\u5219\u5F02\u5E38"]\n    H --\x3e H2["\u5D4C\u5957\u4E8B\u52A1\uFF0C\u53EF\u72EC\u7ACB\u56DE\u6EDA"]'}),"\n",(0,i.jsx)("div",{className:"card",children:(0,i.jsx)("div",{className:"card__body",children:(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u4F20\u64AD\u884C\u4E3A"}),(0,i.jsx)(e.th,{children:"\u8BF4\u660E"}),(0,i.jsx)(e.th,{children:"\u4F7F\u7528\u573A\u666F"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"REQUIRED"})}),(0,i.jsx)(e.td,{children:"\u5982\u679C\u5B58\u5728\u4E8B\u52A1\u5219\u52A0\u5165\uFF0C\u5426\u5219\u521B\u5EFA\u65B0\u4E8B\u52A1"}),(0,i.jsx)(e.td,{children:"\u5927\u591A\u6570\u4E1A\u52A1\u65B9\u6CD5"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"SUPPORTS"})}),(0,i.jsx)(e.td,{children:"\u5982\u679C\u5B58\u5728\u4E8B\u52A1\u5219\u52A0\u5165\uFF0C\u5426\u5219\u4EE5\u975E\u4E8B\u52A1\u65B9\u5F0F\u6267\u884C"}),(0,i.jsx)(e.td,{children:"\u67E5\u8BE2\u65B9\u6CD5"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"MANDATORY"})}),(0,i.jsx)(e.td,{children:"\u5FC5\u987B\u5728\u5DF2\u5B58\u5728\u4E8B\u52A1\u4E2D\u6267\u884C\uFF0C\u5426\u5219\u629B\u51FA\u5F02\u5E38"}),(0,i.jsx)(e.td,{children:"\u4E1A\u52A1\u65B9\u6CD5\u5FC5\u987B\u5728\u4E8B\u52A1\u4E2D\u6267\u884C"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"REQUIRES_NEW"})}),(0,i.jsx)(e.td,{children:"\u521B\u5EFA\u65B0\u4E8B\u52A1\uFF0C\u6302\u8D77\u5F53\u524D\u4E8B\u52A1"}),(0,i.jsx)(e.td,{children:"\u65E5\u5FD7\u8BB0\u5F55\u3001\u72EC\u7ACB\u7EDF\u8BA1"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"NOT_SUPPORTED"})}),(0,i.jsx)(e.td,{children:"\u4EE5\u975E\u4E8B\u52A1\u65B9\u5F0F\u6267\u884C\uFF0C\u6302\u8D77\u5F53\u524D\u4E8B\u52A1"}),(0,i.jsx)(e.td,{children:"\u8017\u65F6\u67E5\u8BE2"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"NEVER"})}),(0,i.jsx)(e.td,{children:"\u4EE5\u975E\u4E8B\u52A1\u65B9\u5F0F\u6267\u884C\uFF0C\u5982\u679C\u5B58\u5728\u4E8B\u52A1\u5219\u629B\u51FA\u5F02\u5E38"}),(0,i.jsx)(e.td,{children:"\u786E\u4FDD\u65B9\u6CD5\u5728\u975E\u4E8B\u52A1\u73AF\u5883\u6267\u884C"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"NESTED"})}),(0,i.jsx)(e.td,{children:"\u5D4C\u5957\u4E8B\u52A1\uFF0C\u53EF\u72EC\u7ACB\u56DE\u6EDA"}),(0,i.jsx)(e.td,{children:"\u6279\u91CF\u64CD\u4F5C\u4E2D\u7684\u5355\u6761\u4FDD\u5B58"})]})]})]})})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",metastring:'title="\u4E8B\u52A1\u4F20\u64AD\u884C\u4E3A\u793A\u4F8B"',children:'@Service\npublic class UserService {\n    \n    @Autowired\n    private OrderService orderService;\n    \n    @Transactional\n    public void createUserWithOrders(User user) {\n        userRepository.save(user);\n        \n        // REQUIRED: \u548C\u5F53\u524D\u4E8B\u52A1\u5728\u540C\u4E00\u4E2A\u4E8B\u52A1\u4E2D\n        orderService.createOrder(user);\n        \n        // REQUIRES_NEW: \u72EC\u7ACB\u7684\u65B0\u4E8B\u52A1\n        orderService.createUserLog(user);\n    }\n}\n\n@Service\npublic class OrderService {\n    \n    @Autowired\n    private OrderRepository orderRepository;\n    \n    @Autowired\n    private LogService logService;\n    \n    @Transactional(propagation = Propagation.REQUIRED)\n    public void createOrder(User user) {\n        Order order = new Order();\n        order.setUserId(user.getId());\n        orderRepository.save(order);\n    }\n    \n    @Transactional(propagation = Propagation.REQUIRES_NEW)\n    public void createUserLog(User user) {\n        UserLog log = new UserLog();\n        log.setUserId(user.getId());\n        log.setOperation("CREATE_USER");\n        logService.save(log);\n    }\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"3-\u4E8B\u52A1\u9694\u79BB\u7EA7\u522B",children:"3. \u4E8B\u52A1\u9694\u79BB\u7EA7\u522B"}),"\n",(0,i.jsx)(e.h3,{id:"31-\u9694\u79BB\u7EA7\u522B\u7C7B\u578B",children:"3.1 \u9694\u79BB\u7EA7\u522B\u7C7B\u578B"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",metastring:'title="\u4E8B\u52A1\u9694\u79BB\u7EA7\u522B\u793A\u4F8B"',children:"@Service\npublic class UserService {\n    \n    // 1. READ_UNCOMMITTED - \u8BFB\u672A\u63D0\u4EA4\n    @Transactional(isolation = Isolation.READ_UNCOMMITTED)\n    public User getUserWithDirtyRead(Long id) {\n        return userRepository.findById(id).orElse(null);\n    }\n    \n    // 2. READ_COMMITTED - \u8BFB\u5DF2\u63D0\u4EA4\uFF08\u9ED8\u8BA4\uFF09\n    @Transactional(isolation = Isolation.READ_COMMITTED)\n    public User getUserWithReadCommitted(Long id) {\n        return userRepository.findById(id).orElse(null);\n    }\n    \n    // 3. REPEATABLE_READ - \u53EF\u91CD\u590D\u8BFB\n    @Transactional(isolation = Isolation.REPEATABLE_READ)\n    public User getUserWithRepeatableRead(Long id) {\n        return userRepository.findById(id).orElse(null);\n    }\n    \n    // 4. SERIALIZABLE - \u4E32\u884C\u5316\n    @Transactional(isolation = Isolation.SERIALIZABLE)\n    public User getUserWithSerializable(Long id) {\n        return userRepository.findById(id).orElse(null);\n    }\n}\n"})}),"\n",(0,i.jsx)(e.h3,{id:"32-\u9694\u79BB\u7EA7\u522B\u8BE6\u89E3",children:"3.2 \u9694\u79BB\u7EA7\u522B\u8BE6\u89E3"}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u9694\u79BB\u7EA7\u522B"}),(0,i.jsx)(e.th,{children:"\u8BF4\u660E"}),(0,i.jsx)(e.th,{children:"\u95EE\u9898"}),(0,i.jsx)(e.th,{children:"\u6027\u80FD"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"READ_UNCOMMITTED"})}),(0,i.jsx)(e.td,{children:"\u8BFB\u672A\u63D0\u4EA4"}),(0,i.jsx)(e.td,{children:"\u810F\u8BFB\u3001\u4E0D\u53EF\u91CD\u590D\u8BFB\u3001\u5E7B\u8BFB"}),(0,i.jsx)(e.td,{children:"\u6700\u9AD8"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"READ_COMMITTED"})}),(0,i.jsx)(e.td,{children:"\u8BFB\u5DF2\u63D0\u4EA4"}),(0,i.jsx)(e.td,{children:"\u4E0D\u53EF\u91CD\u590D\u8BFB\u3001\u5E7B\u8BFB"}),(0,i.jsx)(e.td,{children:"\u9AD8"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"REPEATABLE_READ"})}),(0,i.jsx)(e.td,{children:"\u53EF\u91CD\u590D\u8BFB"}),(0,i.jsx)(e.td,{children:"\u5E7B\u8BFB"}),(0,i.jsx)(e.td,{children:"\u4E2D\u7B49"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"SERIALIZABLE"})}),(0,i.jsx)(e.td,{children:"\u4E32\u884C\u5316"}),(0,i.jsx)(e.td,{children:"\u65E0"}),(0,i.jsx)(e.td,{children:"\u6700\u4F4E"})]})]})]}),"\n",(0,i.jsx)(e.h4,{id:"\u5E76\u53D1\u95EE\u9898\u793A\u4F8B",children:"\u5E76\u53D1\u95EE\u9898\u793A\u4F8B"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",metastring:'title="\u5E76\u53D1\u95EE\u9898\u793A\u4F8B"',children:"// 1. \u810F\u8BFB\u95EE\u9898\n@Service\npublic class DirtyReadExample {\n    \n    @Transactional(isolation = Isolation.READ_UNCOMMITTED)\n    public void updateUserBalance(Long userId, BigDecimal amount) {\n        // \u4E8B\u52A1A\uFF1A\u66F4\u65B0\u4F59\u989D\u4F46\u672A\u63D0\u4EA4\n        Account account = accountRepository.findByUserId(userId);\n        account.setBalance(account.getBalance().add(amount));\n        accountRepository.save(account);\n        // \u6B64\u65F6\u4E8B\u52A1B\u53EF\u4EE5\u8BFB\u5230\u672A\u63D0\u4EA4\u7684\u6570\u636E\n    }\n    \n    @Transactional(isolation = Isolation.READ_UNCOMMITTED)\n    public BigDecimal getUserBalance(Long userId) {\n        // \u4E8B\u52A1B\uFF1A\u53EF\u80FD\u8BFB\u5230\u4E8B\u52A1A\u672A\u63D0\u4EA4\u7684\u6570\u636E\n        Account account = accountRepository.findByUserId(userId);\n        return account.getBalance();\n    }\n}\n\n// 2. \u4E0D\u53EF\u91CD\u590D\u8BFB\u95EE\u9898\n@Service\npublic class NonRepeatableReadExample {\n    \n    @Transactional(isolation = Isolation.READ_COMMITTED)\n    public void updateUser(Long userId, String name) {\n        // \u4E8B\u52A1A\uFF1A\u66F4\u65B0\u7528\u6237\u540D\n        User user = userRepository.findById(userId).orElse(null);\n        user.setName(name);\n        userRepository.save(user);\n    }\n    \n    @Transactional(isolation = Isolation.READ_COMMITTED)\n    public void readUserTwice(Long userId) {\n        // \u4E8B\u52A1B\uFF1A\u4E24\u6B21\u8BFB\u53D6\u53EF\u80FD\u5F97\u5230\u4E0D\u540C\u7ED3\u679C\n        User user1 = userRepository.findById(userId).orElse(null);\n        // \u4E8B\u52A1A\u63D0\u4EA4\n        User user2 = userRepository.findById(userId).orElse(null);\n        // user1.getName() != user2.getName()\n    }\n}\n"})}),"\n",(0,i.jsx)(e.h2,{id:"4-\u4E8B\u52A1\u56DE\u6EDA\u673A\u5236",children:"4. \u4E8B\u52A1\u56DE\u6EDA\u673A\u5236"}),"\n",(0,i.jsx)(e.h3,{id:"41-\u81EA\u52A8\u56DE\u6EDA",children:"4.1 \u81EA\u52A8\u56DE\u6EDA"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",metastring:'title="\u81EA\u52A8\u56DE\u6EDA\u793A\u4F8B"',children:'@Service\npublic class UserService {\n    \n    @Transactional\n    public void createUser(User user) {\n        try {\n            userRepository.save(user);\n            // \u5982\u679C\u8FD9\u91CC\u629B\u51FA\u5F02\u5E38\uFF0C\u4E8B\u52A1\u4F1A\u81EA\u52A8\u56DE\u6EDA\n            if (user.getAge() < 0) {\n                throw new IllegalArgumentException("\u5E74\u9F84\u4E0D\u80FD\u4E3A\u8D1F\u6570");\n            }\n        } catch (Exception e) {\n            // \u5F02\u5E38\u4F1A\u88AB\u91CD\u65B0\u629B\u51FA\uFF0C\u89E6\u53D1\u4E8B\u52A1\u56DE\u6EDA\n            throw e;\n        }\n    }\n    \n    // \u6307\u5B9A\u56DE\u6EDA\u5F02\u5E38\n    @Transactional(rollbackFor = {IllegalArgumentException.class, SQLException.class})\n    public void createUserWithCustomRollback(User user) {\n        userRepository.save(user);\n        if (user.getAge() < 0) {\n            throw new IllegalArgumentException("\u5E74\u9F84\u4E0D\u80FD\u4E3A\u8D1F\u6570");\n        }\n    }\n    \n    // \u6307\u5B9A\u4E0D\u56DE\u6EDA\u5F02\u5E38\n    @Transactional(noRollbackFor = {BusinessException.class})\n    public void createUserWithNoRollback(User user) {\n        userRepository.save(user);\n        if (user.getName().isEmpty()) {\n            throw new BusinessException("\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A");\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"42-\u624B\u52A8\u56DE\u6EDA",children:"4.2 \u624B\u52A8\u56DE\u6EDA"}),"\n",(0,i.jsx)("div",{className:"card",children:(0,i.jsx)("div",{className:"card__body",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",metastring:'title="\u624B\u52A8\u56DE\u6EDA\u793A\u4F8B"',children:"@Service\npublic class UserService {\n    \n    @Autowired\n    private TransactionTemplate transactionTemplate;\n    \n    public void createUserWithManualRollback(User user) {\n        transactionTemplate.execute(new TransactionCallbackWithoutResult() {\n            @Override\n            protected void doInTransactionWithoutResult(TransactionStatus status) {\n                try {\n                    userRepository.save(user);\n                    \n                    // \u4E1A\u52A1\u903B\u8F91\u68C0\u67E5\n                    if (user.getAge() < 0) {\n                        // \u624B\u52A8\u8BBE\u7F6E\u56DE\u6EDA\n                        status.setRollbackOnly();\n                        return;\n                    }\n                    \n                    // \u5176\u4ED6\u4E1A\u52A1\u903B\u8F91\n                } catch (Exception e) {\n                    // \u5F02\u5E38\u65F6\u81EA\u52A8\u56DE\u6EDA\n                    status.setRollbackOnly();\n                    throw e;\n                }\n            }\n        });\n    }\n}\n"})})})}),"\n",(0,i.jsxs)(r,{children:[(0,i.jsx)("summary",{children:"\u5F02\u5E38\u56DE\u6EDA\u89C4\u5219\u603B\u7ED3"}),(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0CSpring\u53EA\u5BF9\u8FD0\u884C\u65F6\u5F02\u5E38\uFF08RuntimeException\u53CA\u5176\u5B50\u7C7B\uFF09\u548CError\u8FDB\u884C\u56DE\u6EDA"}),"\n",(0,i.jsx)(e.li,{children:"\u53D7\u68C0\u5F02\u5E38\uFF08checked exception\uFF09\u4E0D\u4F1A\u89E6\u53D1\u56DE\u6EDA"}),"\n",(0,i.jsxs)(e.li,{children:["\u53EF\u4EE5\u901A\u8FC7",(0,i.jsx)(e.code,{children:"rollbackFor"}),"\u6307\u5B9A\u9700\u8981\u56DE\u6EDA\u7684\u5F02\u5E38\u7C7B\u578B"]}),"\n",(0,i.jsxs)(e.li,{children:["\u53EF\u4EE5\u901A\u8FC7",(0,i.jsx)(e.code,{children:"noRollbackFor"}),"\u6307\u5B9A\u4E0D\u9700\u8981\u56DE\u6EDA\u7684\u5F02\u5E38\u7C7B\u578B"]}),"\n",(0,i.jsxs)(e.li,{children:["\u7F16\u7A0B\u5F0F\u4E8B\u52A1\u4E2D\u53EF\u4EE5\u901A\u8FC7",(0,i.jsx)(e.code,{children:"status.setRollbackOnly()"}),"\u624B\u52A8\u6807\u8BB0\u4E8B\u52A1\u56DE\u6EDA"]}),"\n"]})]}),"\n",(0,i.jsx)(e.mermaid,{value:"flowchart TD\n    A[\u5F02\u5E38\u53D1\u751F] --\x3e B{\u662F\u5426\u4E3ARuntimeException<br>\u6216Error?}\n    B --\x3e|\u662F| C[\u9ED8\u8BA4\u56DE\u6EDA]\n    B --\x3e|\u5426| D[\u9ED8\u8BA4\u4E0D\u56DE\u6EDA]\n    \n    D --\x3e E{\u662F\u5426\u914D\u7F6ErollbackFor<br>\u5305\u542B\u8BE5\u5F02\u5E38?}\n    E --\x3e|\u662F| F[\u89E6\u53D1\u56DE\u6EDA]\n    E --\x3e|\u5426| G[\u4E0D\u89E6\u53D1\u56DE\u6EDA]\n    \n    C --\x3e H{\u662F\u5426\u914D\u7F6EnoRollbackFor<br>\u5305\u542B\u8BE5\u5F02\u5E38?}\n    H --\x3e|\u662F| I[\u4E0D\u89E6\u53D1\u56DE\u6EDA]\n    H --\x3e|\u5426| J[\u89E6\u53D1\u56DE\u6EDA]"}),"\n",(0,i.jsx)(e.h2,{id:"5-\u4E8B\u52A1\u5931\u6548\u573A\u666F",children:"5. \u4E8B\u52A1\u5931\u6548\u573A\u666F"}),"\n",(0,i.jsx)(e.h3,{id:"51-\u5E38\u89C1\u5931\u6548\u573A\u666F",children:"5.1 \u5E38\u89C1\u5931\u6548\u573A\u666F"}),"\n",(0,i.jsxs)(c.A,{children:[(0,i.jsxs)(d.A,{value:"case1",label:"\u975Epublic\u65B9\u6CD5",default:!0,children:[(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Service\npublic class TransactionFailureExample {\n    // 1. \u975Epublic\u65B9\u6CD5\n    @Transactional\n    private void privateMethod() {\n        // \u4E8B\u52A1\u4E0D\u4F1A\u751F\u6548\n        userRepository.save(new User());\n    }\n}\n"})}),(0,i.jsx)("div",{className:"card",children:(0,i.jsxs)("div",{className:"card__body",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"\u539F\u56E0\uFF1A"})," Spring AOP\u4EE3\u7406\u53EA\u62E6\u622Apublic\u65B9\u6CD5\u8C03\u7528\uFF0C\u975Epublic\u65B9\u6CD5\u4E0D\u4F1A\u521B\u5EFA\u4EE3\u7406"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"\u89E3\u51B3\u65B9\u6CD5\uFF1A"})," \u786E\u4FDD\u4E8B\u52A1\u65B9\u6CD5\u662Fpublic\u7684"]})]})})]}),(0,i.jsxs)(d.A,{value:"case2",label:"\u81EA\u8C03\u7528\u95EE\u9898",children:[(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Service\npublic class TransactionFailureExample {\n    // 2. \u81EA\u8C03\u7528\u95EE\u9898\n    @Transactional\n    public void methodA() {\n        // \u4E8B\u52A1\u751F\u6548\n        userRepository.save(new User());\n        \n        // \u81EA\u8C03\u7528\uFF0C\u4E8B\u52A1\u4E0D\u4F1A\u751F\u6548\n        this.methodB();\n    }\n    \n    @Transactional\n    public void methodB() {\n        // \u8FD9\u4E2A\u65B9\u6CD5\u7684\u4E8B\u52A1\u4E0D\u4F1A\u751F\u6548\n        userRepository.save(new User());\n    }\n}\n"})}),(0,i.jsx)("div",{className:"card",children:(0,i.jsxs)("div",{className:"card__body",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"\u539F\u56E0\uFF1A"})," Spring AOP\u4EE3\u7406\u57FA\u4E8E\u4EE3\u7406\u6A21\u5F0F\uFF0C\u53EA\u6709\u901A\u8FC7\u4EE3\u7406\u5BF9\u8C61\u8C03\u7528\u65B9\u6CD5\u65F6\u624D\u4F1A\u521B\u5EFA\u4E8B\u52A1"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"\u89E3\u51B3\u65B9\u6CD5\uFF1A"})," \u901A\u8FC7\u4EE3\u7406\u5BF9\u8C61\u8C03\u7528\u65B9\u6CD5\uFF08\u4F7F\u7528AopContext\u6216\u6CE8\u5165\u81EA\u8EAB\uFF09"]})]})})]}),(0,i.jsxs)(d.A,{value:"case3",label:"\u5F02\u5E38\u88AB\u6355\u83B7",children:[(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Transactional\npublic void methodWithCaughtException() {\n    try {\n        userRepository.save(new User());\n        throw new RuntimeException("\u6D4B\u8BD5\u5F02\u5E38");\n    } catch (Exception e) {\n        // \u5F02\u5E38\u88AB\u6355\u83B7\uFF0C\u4E8B\u52A1\u4E0D\u4F1A\u56DE\u6EDA\n        log.error("\u5F02\u5E38\u88AB\u6355\u83B7", e);\n    }\n}\n'})}),(0,i.jsx)("div",{className:"card",children:(0,i.jsxs)("div",{className:"card__body",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"\u539F\u56E0\uFF1A"})," Spring\u4E8B\u52A1\u5728\u65B9\u6CD5\u8FD4\u56DE\u65F6\u68C0\u67E5\u662F\u5426\u6709\u672A\u5904\u7406\u7684\u5F02\u5E38\uFF0C\u5982\u679C\u5F02\u5E38\u88AB\u6355\u83B7\uFF0C\u4E8B\u52A1\u4E0D\u4F1A\u56DE\u6EDA"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"\u89E3\u51B3\u65B9\u6CD5\uFF1A"})," \u6355\u83B7\u5F02\u5E38\u540E\u91CD\u65B0\u629B\u51FA\u6216\u8BBE\u7F6E\u4E8B\u52A1\u72B6\u6001\u4E3A\u56DE\u6EDA"]})]})})]}),(0,i.jsxs)(d.A,{value:"case4",label:"\u5F02\u5E38\u7C7B\u578B\u4E0D\u5339\u914D",children:[(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Transactional(rollbackFor = SQLException.class)\npublic void methodWithWrongException() {\n    userRepository.save(new User());\n    throw new RuntimeException("\u8FD0\u884C\u65F6\u5F02\u5E38"); // \u6B64\u5904\u629B\u51FA\u7684\u662FRuntimeException\n}\n'})}),(0,i.jsx)("div",{className:"card",children:(0,i.jsxs)("div",{className:"card__body",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"\u539F\u56E0\uFF1A"})," \u6307\u5B9A\u4E86\u7279\u5B9A\u7C7B\u578B\u7684\u5F02\u5E38\u624D\u4F1A\u56DE\u6EDA\uFF0C\u4F46\u629B\u51FA\u4E86\u4E0D\u540C\u7C7B\u578B\u7684\u5F02\u5E38"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"\u89E3\u51B3\u65B9\u6CD5\uFF1A"})," \u786E\u4FDDrollbackFor\u5305\u542B\u53EF\u80FD\u629B\u51FA\u7684\u5F02\u5E38\u7C7B\u578B"]})]})})]})]}),"\n",(0,i.jsx)(e.h3,{id:"52-\u89E3\u51B3\u65B9\u6848",children:"5.2 \u89E3\u51B3\u65B9\u6848"}),"\n",(0,i.jsx)(e.mermaid,{value:'flowchart TD\n    A[\u4E8B\u52A1\u5931\u6548] --\x3e B[\u975Epublic\u65B9\u6CD5]\n    A --\x3e C[\u81EA\u8C03\u7528\u95EE\u9898]\n    A --\x3e D[\u5F02\u5E38\u88AB\u6355\u83B7]\n    A --\x3e E[\u5F02\u5E38\u7C7B\u578B\u4E0D\u5339\u914D]\n    A --\x3e F[\u5176\u4ED6\u5931\u6548\u573A\u666F]\n    \n    B --\x3e B1["\u5C06\u65B9\u6CD5\u6539\u4E3Apublic"]\n    \n    C --\x3e C1["\u4F7F\u7528AopContext.currentProxy()"]\n    C --\x3e C2["@Autowired\u6CE8\u5165\u81EA\u8EAB"]\n    \n    D --\x3e D1["\u91CD\u65B0\u629B\u51FA\u5F02\u5E38"]\n    D --\x3e D2["\u624B\u52A8\u8BBE\u7F6E\u56DE\u6EDA\u72B6\u6001"]\n    \n    E --\x3e E1["\u4F7F\u7528\u6B63\u786E\u7684\u5F02\u5E38\u7C7B\u578B"]\n    E --\x3e E2["\u914D\u7F6E\u5408\u9002\u7684rollbackFor"]\n    \n    F --\x3e F1["\u786E\u4FDD\u7C7B\u88ABSpring\u7BA1\u7406"]\n    F --\x3e F2["\u68C0\u67E5\u4E8B\u52A1\u7BA1\u7406\u5668\u914D\u7F6E"]'}),"\n",(0,i.jsx)("div",{className:"card",children:(0,i.jsx)("div",{className:"card__body",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",metastring:'title="\u4E8B\u52A1\u5931\u6548\u89E3\u51B3\u65B9\u6848"',children:'@Service\npublic class TransactionSolutionExample {\n    \n    @Autowired\n    private ApplicationContext applicationContext;\n    \n    // 1. \u89E3\u51B3\u81EA\u8C03\u7528\u95EE\u9898 - \u4F7F\u7528AopContext\n    @Transactional\n    public void methodA() {\n        userRepository.save(new User());\n        \n        // \u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61\n        UserService proxy = (UserService) AopContext.currentProxy();\n        proxy.methodB(); // \u4E8B\u52A1\u751F\u6548\n    }\n    \n    // 2. \u89E3\u51B3\u81EA\u8C03\u7528\u95EE\u9898 - \u6CE8\u5165\u81EA\u8EAB\n    @Autowired\n    private UserService self;\n    \n    @Transactional\n    public void methodAWithSelf() {\n        userRepository.save(new User());\n        self.methodB(); // \u4E8B\u52A1\u751F\u6548\n    }\n    \n    // 3. \u89E3\u51B3\u5F02\u5E38\u6355\u83B7\u95EE\u9898\n    @Transactional\n    public void methodWithProperException() {\n        try {\n            userRepository.save(new User());\n            throw new RuntimeException("\u6D4B\u8BD5\u5F02\u5E38");\n        } catch (Exception e) {\n            log.error("\u5F02\u5E38\u88AB\u6355\u83B7", e);\n            // \u91CD\u65B0\u629B\u51FA\u5F02\u5E38\uFF0C\u89E6\u53D1\u56DE\u6EDA\n            throw new RuntimeException("\u91CD\u65B0\u629B\u51FA\u5F02\u5E38", e);\n        }\n    }\n}\n'})})})}),"\n",(0,i.jsx)(e.admonition,{title:"\u6CE8\u610F\u4E8B\u9879",type:"caution",children:(0,i.jsxs)(e.p,{children:["\u4F7F\u7528AopContext\u9700\u8981\u5728\u914D\u7F6E\u7C7B\u4E0A\u6DFB\u52A0",(0,i.jsx)(e.code,{children:"@EnableAspectJAutoProxy(exposeProxy = true)"}),"\u6CE8\u89E3"]})}),"\n",(0,i.jsx)(e.h2,{id:"6-\u4E8B\u52A1\u6700\u4F73\u5B9E\u8DF5",children:"6. \u4E8B\u52A1\u6700\u4F73\u5B9E\u8DF5"}),"\n",(0,i.jsx)(e.h3,{id:"61-\u4E8B\u52A1\u8BBE\u8BA1\u539F\u5219",children:"6.1 \u4E8B\u52A1\u8BBE\u8BA1\u539F\u5219"}),"\n",(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("div",{className:"card__header",children:(0,i.jsx)("h4",{children:"\u4E8B\u52A1\u8BBE\u8BA1\u7684\u4E94\u9879\u539F\u5219"})}),(0,i.jsx)("div",{className:"card__body",children:(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u539F\u5B50\u6027\u539F\u5219"}),"\uFF1A\u4E8B\u52A1\u65B9\u6CD5\u5E94\u8BE5\u5C3D\u53EF\u80FD\u5C0F\uFF0C\u53EA\u5305\u542B\u5FC5\u8981\u7684\u6570\u636E\u5E93\u64CD\u4F5C"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6027\u80FD\u539F\u5219"}),"\uFF1A\u907F\u514D\u5728\u4E8B\u52A1\u4E2D\u8FDB\u884C\u8017\u65F6\u64CD\u4F5C\uFF0C\u5982\u8FDC\u7A0B\u8C03\u7528\u3001\u6587\u4EF6IO\u7B49"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u9694\u79BB\u539F\u5219"}),"\uFF1A\u9009\u62E9\u5408\u9002\u7684\u9694\u79BB\u7EA7\u522B\uFF0C\u907F\u514D\u5E76\u53D1\u95EE\u9898"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u4F20\u64AD\u539F\u5219"}),"\uFF1A\u5408\u7406\u4F7F\u7528\u4E8B\u52A1\u4F20\u64AD\u884C\u4E3A\uFF0C\u907F\u514D\u4E8B\u52A1\u5D4C\u5957\u8FC7\u6DF1"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5F02\u5E38\u5904\u7406\u539F\u5219"}),"\uFF1A\u660E\u786E\u5B9A\u4E49\u56DE\u6EDA\u89C4\u5219\uFF0C\u4E0D\u6355\u83B7\u5F02\u5E38\u6216\u91CD\u65B0\u629B\u51FA\u5F02\u5E38"]}),"\n"]})})]}),"\n",(0,i.jsxs)(c.A,{children:[(0,i.jsx)(d.A,{value:"bp1",label:"\u4E8B\u52A1\u65B9\u6CD5\u8981\u5C0F",default:!0,children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Service\npublic class TransactionBestPractice {\n    // 1. \u4E8B\u52A1\u65B9\u6CD5\u8981\u5C3D\u53EF\u80FD\u5C0F\n    @Transactional\n    public void createUser(User user) {\n        // \u53EA\u5305\u542B\u5FC5\u8981\u7684\u6570\u636E\u5E93\u64CD\u4F5C\n        validateUser(user); // \u9A8C\u8BC1\u903B\u8F91\u5E94\u5C3D\u91CF\u653E\u5728\u4E8B\u52A1\u5916\n        userRepository.save(user);\n    }\n    \n    // \u975E\u4E8B\u52A1\u65B9\u6CD5\n    private void validateUser(User user) {\n        // \u9A8C\u8BC1\u903B\u8F91\n    }\n}\n"})})}),(0,i.jsx)(d.A,{value:"bp2",label:"\u907F\u514D\u8017\u65F6\u64CD\u4F5C",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Service\npublic class TransactionBestPractice {\n    // 2. \u907F\u514D\u5728\u4E8B\u52A1\u4E2D\u8FDB\u884C\u8017\u65F6\u64CD\u4F5C\n    @Transactional\n    public void createUserWithAsyncOperation(User user) {\n        userRepository.save(user);\n        \n        // \u5F02\u6B65\u5904\u7406\u8017\u65F6\u64CD\u4F5C\n        CompletableFuture.runAsync(() -> {\n            sendWelcomeEmail(user.getEmail());\n            updateUserStatistics();\n        });\n    }\n}\n"})})}),(0,i.jsx)(d.A,{value:"bp3",label:"\u5408\u7406\u4F7F\u7528\u4F20\u64AD\u884C\u4E3A",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Service\npublic class TransactionBestPractice {\n    // 3. \u5408\u7406\u4F7F\u7528\u4E8B\u52A1\u4F20\u64AD\u884C\u4E3A\n    @Transactional(propagation = Propagation.REQUIRED)\n    public void createUserWithOrder(User user, Order order) {\n        userRepository.save(user);\n        \n        // \u8BA2\u5355\u521B\u5EFA\u4F7F\u7528\u72EC\u7ACB\u4E8B\u52A1\n        orderService.createOrderWithNewTransaction(order);\n    }\n    \n    // \u8BA2\u5355\u670D\u52A1\n    @Service\n    public class OrderService {\n        @Transactional(propagation = Propagation.REQUIRES_NEW)\n        public void createOrderWithNewTransaction(Order order) {\n            // \u72EC\u7ACB\u4E8B\u52A1\uFF0C\u5373\u4F7F\u7528\u6237\u521B\u5EFA\u5931\u8D25\uFF0C\u8BA2\u5355\u4E5F\u53EF\u4EE5\u63D0\u4EA4\n            orderRepository.save(order);\n        }\n    }\n}\n"})})}),(0,i.jsx)(d.A,{value:"bp4",label:"\u5B8C\u6574\u914D\u7F6E",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"// 4. \u4F7F\u7528@Transactional\u6CE8\u89E3\u7684\u5B8C\u6574\u914D\u7F6E\n@Transactional(\n    propagation = Propagation.REQUIRED,\n    isolation = Isolation.READ_COMMITTED,\n    timeout = 30,\n    rollbackFor = {Exception.class},\n    readOnly = false\n)\npublic void completeTransactionExample(User user) {\n    // \u5B8C\u6574\u7684\u4E8B\u52A1\u914D\u7F6E\u793A\u4F8B\n    userRepository.save(user);\n}\n"})})})]}),"\n",(0,i.jsx)(e.h3,{id:"62-\u8BFB\u5199\u5206\u79BB",children:"6.2 \u8BFB\u5199\u5206\u79BB"}),"\n",(0,i.jsx)(e.mermaid,{value:'flowchart LR\n    A[Service\u65B9\u6CD5] --\x3e B{\u662F\u5426\u53EA\u8BFB?}\n    B --\x3e|\u662F| C[\u8BFB\u5E93]\n    B --\x3e|\u5426| D[\u5199\u5E93]\n    \n    C --\x3e C1["@Transactional(readOnly=true)"]\n    D --\x3e D1["@Transactional"]'}),"\n",(0,i.jsx)("div",{className:"card",children:(0,i.jsx)("div",{className:"card__body",children:(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",metastring:'title="\u8BFB\u5199\u5206\u79BB\u793A\u4F8B"',children:"@Service\npublic class UserReadWriteService {\n    \n    @Autowired\n    private UserRepository userRepository;\n    \n    // \u5199\u64CD\u4F5C\n    @Transactional\n    public User createUser(User user) {\n        return userRepository.save(user);\n    }\n    \n    // \u8BFB\u64CD\u4F5C\n    @Transactional(readOnly = true)\n    public User findUserById(Long id) {\n        return userRepository.findById(id).orElse(null);\n    }\n    \n    // \u6279\u91CF\u8BFB\u53D6\u64CD\u4F5C\n    @Transactional(readOnly = true)\n    public List<User> findAllUsers() {\n        return userRepository.findAll();\n    }\n}\n"})})})}),"\n",(0,i.jsx)(e.h2,{id:"7-\u9762\u8BD5\u9898\u7CBE\u9009",children:"7. \u9762\u8BD5\u9898\u7CBE\u9009"}),"\n",(0,i.jsx)(e.h3,{id:"71-\u57FA\u7840\u6982\u5FF5\u9898",children:"7.1 \u57FA\u7840\u6982\u5FF5\u9898"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Q: \u4EC0\u4E48\u662F\u4E8B\u52A1\uFF1FSpring\u4E8B\u52A1\u7BA1\u7406\u7684\u4F18\u52BF\u662F\u4EC0\u4E48\uFF1F"})}),"\n",(0,i.jsx)(e.p,{children:"A: \u4E8B\u52A1\u662F\u6570\u636E\u5E93\u64CD\u4F5C\u7684\u4E00\u4E2A\u903B\u8F91\u5355\u5143\uFF0C\u5177\u6709ACID\u7279\u6027\u3002Spring\u4E8B\u52A1\u7BA1\u7406\u7684\u4F18\u52BF\u5305\u62EC\uFF1A"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u58F0\u660E\u5F0F\u4E8B\u52A1"}),"\uFF1A\u901A\u8FC7\u6CE8\u89E3\u7B80\u5316\u4E8B\u52A1\u914D\u7F6E"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7F16\u7A0B\u5F0F\u4E8B\u52A1"}),"\uFF1A\u63D0\u4F9B\u7075\u6D3B\u7684\u4E8B\u52A1\u63A7\u5236"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u4F20\u64AD\u884C\u4E3A"}),"\uFF1A\u652F\u6301\u590D\u6742\u7684\u4E8B\u52A1\u5D4C\u5957"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u9694\u79BB\u7EA7\u522B"}),"\uFF1A\u63D0\u4F9B\u4E0D\u540C\u7684\u4E8B\u52A1\u9694\u79BB\u7EA7\u522B"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u81EA\u52A8\u56DE\u6EDA"}),"\uFF1A\u5F02\u5E38\u65F6\u81EA\u52A8\u56DE\u6EDA\u4E8B\u52A1"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Q: Spring\u4E8B\u52A1\u7684\u4F20\u64AD\u884C\u4E3A\u6709\u54EA\u4E9B\uFF1F"})}),"\n",(0,i.jsx)(e.p,{children:"A: Spring\u5B9A\u4E49\u4E867\u79CD\u4E8B\u52A1\u4F20\u64AD\u884C\u4E3A\uFF1A"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"REQUIRED"}),"\uFF1A\u652F\u6301\u5F53\u524D\u4E8B\u52A1\uFF0C\u4E0D\u5B58\u5728\u5219\u521B\u5EFA\u65B0\u4E8B\u52A1"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"REQUIRES_NEW"}),"\uFF1A\u521B\u5EFA\u65B0\u4E8B\u52A1\uFF0C\u6302\u8D77\u5F53\u524D\u4E8B\u52A1"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"SUPPORTS"}),"\uFF1A\u652F\u6301\u5F53\u524D\u4E8B\u52A1\uFF0C\u4E0D\u5B58\u5728\u5219\u4EE5\u975E\u4E8B\u52A1\u6267\u884C"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"NOT_SUPPORTED"}),"\uFF1A\u4EE5\u975E\u4E8B\u52A1\u6267\u884C\uFF0C\u6302\u8D77\u5F53\u524D\u4E8B\u52A1"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"MANDATORY"}),"\uFF1A\u5FC5\u987B\u5728\u4E8B\u52A1\u4E2D\u6267\u884C\uFF0C\u5426\u5219\u629B\u51FA\u5F02\u5E38"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"NEVER"}),"\uFF1A\u4E0D\u80FD\u5728\u4E8B\u52A1\u4E2D\u6267\u884C\uFF0C\u5426\u5219\u629B\u51FA\u5F02\u5E38"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"NESTED"}),"\uFF1A\u5D4C\u5957\u4E8B\u52A1\uFF0C\u53EF\u4EE5\u72EC\u7ACB\u56DE\u6EDA"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"72-\u5B9E\u8DF5\u9898",children:"7.2 \u5B9E\u8DF5\u9898"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Q: \u4E8B\u52A1\u7684\u9694\u79BB\u7EA7\u522B\u6709\u54EA\u4E9B\uFF1F\u5404\u6709\u4EC0\u4E48\u7279\u70B9\uFF1F"})}),"\n",(0,i.jsx)(e.p,{children:"A: \u4E8B\u52A1\u9694\u79BB\u7EA7\u522B\u5305\u62EC\uFF1A"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"READ_UNCOMMITTED"}),"\uFF1A\u8BFB\u672A\u63D0\u4EA4\uFF0C\u6027\u80FD\u6700\u9AD8\u4F46\u5B58\u5728\u810F\u8BFB\u95EE\u9898"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"READ_COMMITTED"}),"\uFF1A\u8BFB\u5DF2\u63D0\u4EA4\uFF0C\u907F\u514D\u810F\u8BFB\u4F46\u5B58\u5728\u4E0D\u53EF\u91CD\u590D\u8BFB"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"REPEATABLE_READ"}),"\uFF1A\u53EF\u91CD\u590D\u8BFB\uFF0C\u907F\u514D\u4E0D\u53EF\u91CD\u590D\u8BFB\u4F46\u5B58\u5728\u5E7B\u8BFB"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"SERIALIZABLE"}),"\uFF1A\u4E32\u884C\u5316\uFF0C\u907F\u514D\u6240\u6709\u5E76\u53D1\u95EE\u9898\u4F46\u6027\u80FD\u6700\u4F4E"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Q: \u4EC0\u4E48\u60C5\u51B5\u4E0BSpring\u4E8B\u52A1\u4F1A\u5931\u6548\uFF1F"})}),"\n",(0,i.jsx)(e.p,{children:"A: Spring\u4E8B\u52A1\u5931\u6548\u7684\u5E38\u89C1\u60C5\u51B5\uFF1A"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u975Epublic\u65B9\u6CD5"}),"\uFF1A@Transactional\u6CE8\u89E3\u5728\u975Epublic\u65B9\u6CD5\u4E0A\u4E0D\u751F\u6548"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u81EA\u8C03\u7528\u95EE\u9898"}),"\uFF1A\u540C\u4E00\u4E2A\u7C7B\u4E2D\u7684\u65B9\u6CD5\u8C03\u7528\u4E0D\u4F1A\u7ECF\u8FC7\u4EE3\u7406"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5F02\u5E38\u88AB\u6355\u83B7"}),"\uFF1A\u5F02\u5E38\u88ABcatch\u6355\u83B7\u540E\u4E0D\u4F1A\u89E6\u53D1\u56DE\u6EDA"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5F02\u5E38\u7C7B\u578B\u4E0D\u5339\u914D"}),"\uFF1A\u629B\u51FA\u7684\u5F02\u5E38\u7C7B\u578B\u4E0D\u5728rollbackFor\u4E2D"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6570\u636E\u5E93\u4E0D\u652F\u6301"}),"\uFF1A\u4F7F\u7528\u7684\u6570\u636E\u5E93\u4E0D\u652F\u6301\u4E8B\u52A1"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"73-\u9AD8\u7EA7\u9898",children:"7.3 \u9AD8\u7EA7\u9898"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Q: \u5982\u4F55\u89E3\u51B3Spring\u4E8B\u52A1\u7684\u81EA\u8C03\u7528\u95EE\u9898\uFF1F"})}),"\n",(0,i.jsx)(e.p,{children:"A: \u89E3\u51B3\u81EA\u8C03\u7528\u95EE\u9898\u7684\u65B9\u6CD5\uFF1A"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u4F7F\u7528AopContext"}),"\uFF1A\u901A\u8FC7AopContext.currentProxy()\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6CE8\u5165\u81EA\u8EAB"}),"\uFF1A\u4F7F\u7528@Autowired\u6CE8\u5165\u81EA\u8EAB\u7684\u4EE3\u7406\u5BF9\u8C61"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u63D0\u53D6\u65B9\u6CD5"}),"\uFF1A\u5C06\u9700\u8981\u4E8B\u52A1\u7684\u65B9\u6CD5\u63D0\u53D6\u5230\u53E6\u4E00\u4E2A\u7C7B\u4E2D"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u4F7F\u7528AspectJ"}),"\uFF1A\u4F7F\u7528AspectJ\u7F16\u8BD1\u65F6\u7EC7\u5165"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Q: \u5982\u4F55\u8BBE\u8BA1\u4E00\u4E2A\u5206\u5E03\u5F0F\u4E8B\u52A1\uFF1F"})}),"\n",(0,i.jsx)(e.p,{children:"A: \u5206\u5E03\u5F0F\u4E8B\u52A1\u8BBE\u8BA1\u8003\u8651\uFF1A"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"2PC/3PC\u534F\u8BAE"}),"\uFF1A\u4E24\u9636\u6BB5/\u4E09\u9636\u6BB5\u63D0\u4EA4\u534F\u8BAE"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"TCC\u6A21\u5F0F"}),"\uFF1ATry-Confirm-Cancel\u6A21\u5F0F"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Saga\u6A21\u5F0F"}),"\uFF1A\u957F\u4E8B\u52A1\u7684\u8865\u507F\u6A21\u5F0F"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6D88\u606F\u4E8B\u52A1"}),"\uFF1A\u57FA\u4E8E\u6D88\u606F\u7684\u6700\u7EC8\u4E00\u81F4\u6027"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u672C\u5730\u6D88\u606F\u8868"}),"\uFF1A\u7ED3\u5408\u672C\u5730\u4E8B\u52A1\u548C\u6D88\u606F\u961F\u5217"]}),"\n"]}),"\n",(0,i.jsx)(e.admonition,{title:"\u4E8B\u52A1\u7BA1\u7406\u5B66\u4E60\u8981\u70B9",type:"tip",children:(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7406\u89E3ACID\u7279\u6027"}),"\uFF1A\u638C\u63E1\u4E8B\u52A1\u7684\u539F\u5B50\u6027\u3001\u4E00\u81F4\u6027\u3001\u9694\u79BB\u6027\u3001\u6301\u4E45\u6027"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u719F\u6089\u4F20\u64AD\u884C\u4E3A"}),"\uFF1A\u4E86\u89E37\u79CD\u4E8B\u52A1\u4F20\u64AD\u884C\u4E3A\u7684\u4F7F\u7528\u573A\u666F"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u638C\u63E1\u9694\u79BB\u7EA7\u522B"}),"\uFF1A\u7406\u89E3\u4E0D\u540C\u9694\u79BB\u7EA7\u522B\u7684\u7279\u70B9\u548C\u9002\u7528\u573A\u666F"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5B66\u4F1A\u5F02\u5E38\u5904\u7406"}),"\uFF1A\u638C\u63E1\u4E8B\u52A1\u56DE\u6EDA\u548C\u5F02\u5E38\u5904\u7406\u673A\u5236"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u907F\u514D\u5931\u6548\u573A\u666F"}),"\uFF1A\u4E86\u89E3\u4E8B\u52A1\u5931\u6548\u7684\u539F\u56E0\u548C\u89E3\u51B3\u65B9\u6848"]}),"\n"]})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.p,{children:"\u901A\u8FC7\u672C\u7AE0\u7684\u5B66\u4E60\uFF0C\u4F60\u5E94\u8BE5\u5DF2\u7ECF\u638C\u63E1\u4E86Spring\u4E8B\u52A1\u7BA1\u7406\u7684\u6838\u5FC3\u6982\u5FF5\u3001\u4F20\u64AD\u884C\u4E3A\u3001\u9694\u79BB\u7EA7\u522B\u548C\u6700\u4F73\u5B9E\u8DF5\u3002\u4E8B\u52A1\u7BA1\u7406\u662F\u4FDD\u8BC1\u6570\u636E\u4E00\u81F4\u6027\u7684\u91CD\u8981\u6280\u672F\uFF0C\u5728\u5B9E\u9645\u9879\u76EE\u4E2D\u5408\u7406\u4F7F\u7528Spring\u4E8B\u52A1\u53EF\u4EE5\u786E\u4FDD\u4E1A\u52A1\u6570\u636E\u7684\u5B8C\u6574\u6027\u548C\u53EF\u9760\u6027\u3002"})]})}function u(n={}){let{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(j,{...n})}):j(n)}}}]);