"use strict";(self.webpackChunkfullstack_dev_blog=self.webpackChunkfullstack_dev_blog||[]).push([["52984"],{31076:function(e,n,t){t.r(n),t.d(n,{metadata:()=>i,default:()=>p,frontMatter:()=>d,contentTitle:()=>o,toc:()=>h,assets:()=>u});var i=JSON.parse('{"id":"backend/system-design/rate-limiting","title":"\u9650\u6D41\u7CFB\u7EDF\u8BBE\u8BA1","description":"\u6DF1\u5165\u7406\u89E3\u9650\u6D41\u7B97\u6CD5\u3001\u5B9E\u73B0\u7B56\u7565\u4E0E\u6700\u4F73\u5B9E\u8DF5","source":"@site/docs/backend/system-design/rate-limiting.mdx","sourceDirName":"backend/system-design","slug":"/backend/system-design/rate-limiting","permalink":"/docs/backend/system-design/rate-limiting","draft":false,"unlisted":false,"editUrl":"https://github.com/MasterLiu93/blog-web/tree/main/docs/backend/system-design/rate-limiting.mdx","tags":[],"version":"current","lastUpdatedBy":"Laby","lastUpdatedAt":1754524800000,"sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"\u9650\u6D41\u7CFB\u7EDF\u8BBE\u8BA1","description":"\u6DF1\u5165\u7406\u89E3\u9650\u6D41\u7B97\u6CD5\u3001\u5B9E\u73B0\u7B56\u7565\u4E0E\u6700\u4F73\u5B9E\u8DF5","authors":["Laby"],"last_update":{"date":"2025-08-07T00:00:00.000Z","author":"Laby"}},"sidebar":"tutorialSidebar","previous":{"title":"\u964D\u7EA7\u7B56\u7565\u8BBE\u8BA1","permalink":"/docs/backend/system-design/fallback"},"next":{"title":"\u6570\u5B57\u5B6A\u751F\u6280\u672F\u6982\u8FF0","permalink":"/docs/digital-twin/digital-twin-intro"}}'),r=t(74848),s=t(28453),l=t(78010),a=t(57250),c=t(19007);let d={sidebar_position:4,title:"\u9650\u6D41\u7CFB\u7EDF\u8BBE\u8BA1",description:"\u6DF1\u5165\u7406\u89E3\u9650\u6D41\u7B97\u6CD5\u3001\u5B9E\u73B0\u7B56\u7565\u4E0E\u6700\u4F73\u5B9E\u8DF5",authors:["Laby"],last_update:{date:new Date("2025-08-07T00:00:00.000Z"),author:"Laby"}},o="\u9650\u6D41\u7CFB\u7EDF\u8BBE\u8BA1",u={},h=[{value:"1. \u9650\u6D41\u57FA\u7840\u6982\u5FF5",id:"1-\u9650\u6D41\u57FA\u7840\u6982\u5FF5",level:2},{value:"1.1 \u9650\u6D41\u76EE\u7684",id:"11-\u9650\u6D41\u76EE\u7684",level:3},{value:"1.2 \u9650\u6D41\u7EF4\u5EA6",id:"12-\u9650\u6D41\u7EF4\u5EA6",level:3},{value:"2. \u9650\u6D41\u7B97\u6CD5",id:"2-\u9650\u6D41\u7B97\u6CD5",level:2},{value:"2.1 \u56FA\u5B9A\u7A97\u53E3\u7B97\u6CD5",id:"21-\u56FA\u5B9A\u7A97\u53E3\u7B97\u6CD5",level:3},{value:"2.2 \u6ED1\u52A8\u7A97\u53E3\u7B97\u6CD5",id:"22-\u6ED1\u52A8\u7A97\u53E3\u7B97\u6CD5",level:3},{value:"2.3 \u4EE4\u724C\u6876\u7B97\u6CD5",id:"23-\u4EE4\u724C\u6876\u7B97\u6CD5",level:3},{value:"2.4 \u6F0F\u6876\u7B97\u6CD5",id:"24-\u6F0F\u6876\u7B97\u6CD5",level:3},{value:"3. \u9650\u6D41\u7B56\u7565",id:"3-\u9650\u6D41\u7B56\u7565",level:2},{value:"3.1 \u5206\u7EA7\u9650\u6D41",id:"31-\u5206\u7EA7\u9650\u6D41",level:3},{value:"3.2 \u52A8\u6001\u9650\u6D41",id:"32-\u52A8\u6001\u9650\u6D41",level:3},{value:"4. \u9650\u6D41\u5B9E\u73B0",id:"4-\u9650\u6D41\u5B9E\u73B0",level:2},{value:"4.1 \u6CE8\u89E3\u5F0F\u9650\u6D41",id:"41-\u6CE8\u89E3\u5F0F\u9650\u6D41",level:3},{value:"4.2 \u8FC7\u6EE4\u5668\u9650\u6D41",id:"42-\u8FC7\u6EE4\u5668\u9650\u6D41",level:3},{value:"5. \u9650\u6D41\u76D1\u63A7",id:"5-\u9650\u6D41\u76D1\u63A7",level:2},{value:"5.1 \u9650\u6D41\u7EDF\u8BA1",id:"51-\u9650\u6D41\u7EDF\u8BA1",level:3},{value:"5.2 \u9650\u6D41\u544A\u8B66",id:"52-\u9650\u6D41\u544A\u8B66",level:3},{value:"6. \u9762\u8BD5\u9898\u7CBE\u9009",id:"6-\u9762\u8BD5\u9898\u7CBE\u9009",level:2},{value:"6.1 \u57FA\u7840\u6982\u5FF5\u9898",id:"61-\u57FA\u7840\u6982\u5FF5\u9898",level:3},{value:"6.2 \u7B97\u6CD5\u5B9E\u73B0\u9898",id:"62-\u7B97\u6CD5\u5B9E\u73B0\u9898",level:3},{value:"6.3 \u5B9E\u9645\u5E94\u7528\u9898",id:"63-\u5B9E\u9645\u5E94\u7528\u9898",level:3}];function m(e){let n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"\u9650\u6D41\u7CFB\u7EDF\u8BBE\u8BA1",children:"\u9650\u6D41\u7CFB\u7EDF\u8BBE\u8BA1"})}),"\n",(0,r.jsx)(n.p,{children:"\u9650\u6D41\u7CFB\u7EDF\u8BBE\u8BA1\u662F\u4FDD\u62A4\u7CFB\u7EDF\u514D\u53D7\u6D41\u91CF\u51B2\u51FB\u3001\u786E\u4FDD\u7CFB\u7EDF\u7A33\u5B9A\u8FD0\u884C\u7684\u91CD\u8981\u6280\u672F\u3002\u901A\u8FC7\u5408\u7406\u7684\u9650\u6D41\u7B97\u6CD5\u548C\u7B56\u7565\uFF0C\u53EF\u4EE5\u6709\u6548\u63A7\u5236\u8BF7\u6C42\u6D41\u91CF\uFF0C\u9632\u6B62\u7CFB\u7EDF\u8FC7\u8F7D\u3002"}),"\n",(0,r.jsx)(n.admonition,{title:"\u672C\u6587\u5185\u5BB9\u6982\u89C8",type:"info",children:(0,r.jsx)(c.A,{toc:h})}),"\n",(0,r.jsxs)(n.admonition,{title:"\u6838\u5FC3\u4EF7\u503C",type:"tip",children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u9650\u6D41 = \u6D41\u91CF\u63A7\u5236 + \u7CFB\u7EDF\u4FDD\u62A4 + \u8D44\u6E90\u7BA1\u7406 + \u7528\u6237\u4F53\u9A8C + \u6210\u672C\u63A7\u5236"})}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u{1F6A6} ",(0,r.jsx)(n.strong,{children:"\u6D41\u91CF\u63A7\u5236"}),"\uFF1A\u8C03\u8282\u8BF7\u6C42\u6D41\u91CF\uFF0C\u907F\u514D\u7CFB\u7EDF\u8FC7\u8F7D"]}),"\n",(0,r.jsxs)(n.li,{children:["\u{1F6E1}\uFE0F ",(0,r.jsx)(n.strong,{children:"\u7CFB\u7EDF\u4FDD\u62A4"}),"\uFF1A\u9632\u6B62\u7CFB\u7EDF\u5D29\u6E83\uFF0C\u4FDD\u8BC1\u7CFB\u7EDF\u7A33\u5B9A\u6027"]}),"\n",(0,r.jsxs)(n.li,{children:["\u{1F4CA} ",(0,r.jsx)(n.strong,{children:"\u8D44\u6E90\u7BA1\u7406"}),"\uFF1A\u5408\u7406\u5206\u914D\u7CFB\u7EDF\u8D44\u6E90\uFF0C\u63D0\u9AD8\u8D44\u6E90\u5229\u7528\u7387"]}),"\n",(0,r.jsxs)(n.li,{children:["\u{1F464} ",(0,r.jsx)(n.strong,{children:"\u7528\u6237\u4F53\u9A8C"}),"\uFF1A\u4FDD\u8BC1\u6838\u5FC3\u529F\u80FD\u53EF\u7528\uFF0C\u63D0\u5347\u7528\u6237\u6EE1\u610F\u5EA6"]}),"\n",(0,r.jsxs)(n.li,{children:["\u{1F4B0} ",(0,r.jsx)(n.strong,{children:"\u6210\u672C\u63A7\u5236"}),"\uFF1A\u964D\u4F4E\u8D44\u6E90\u6210\u672C\uFF0C\u63D0\u9AD8\u7CFB\u7EDF\u7ECF\u6D4E\u6027"]}),"\n"]})]}),"\n",(0,r.jsx)(n.h2,{id:"1-\u9650\u6D41\u57FA\u7840\u6982\u5FF5",children:"1. \u9650\u6D41\u57FA\u7840\u6982\u5FF5"}),"\n",(0,r.jsx)(n.h3,{id:"11-\u9650\u6D41\u76EE\u7684",children:"1.1 \u9650\u6D41\u76EE\u7684"}),"\n",(0,r.jsx)(n.mermaid,{value:"mindmap\n  root((\u9650\u6D41\u76EE\u7684))\n    \u4FDD\u62A4\u7CFB\u7EDF\n      \u9632\u6B62\u8FC7\u8F7D\n      \u8D44\u6E90\u8017\u5C3D\u4FDD\u62A4\n      \u5D29\u6E83\u9884\u9632\n    \u8D44\u6E90\u7BA1\u7406\n      \u5408\u7406\u5206\u914D\n      \u4F18\u5148\u7EA7\u5904\u7406\n      \u5173\u952E\u8D44\u6E90\u4FDD\u62A4\n    \u6210\u672C\u63A7\u5236\n      API\u8C03\u7528\u6210\u672C\n      \u8BA1\u7B97\u8D44\u6E90\u6210\u672C\n      \u5B58\u50A8\u8D44\u6E90\u6210\u672C\n    \u7528\u6237\u4F53\u9A8C\n      \u4FDD\u8BC1\u6838\u5FC3\u529F\u80FD\n      \u964D\u7EA7\u975E\u6838\u5FC3\u529F\u80FD\n      \u54CD\u5E94\u65F6\u95F4\u4FDD\u969C\n    \u5B89\u5168\u9632\u62A4\n      \u9632\u6B62DDoS\u653B\u51FB\n      \u6076\u610F\u8BF7\u6C42\u62E6\u622A\n      \u5F02\u5E38\u6D41\u91CF\u68C0\u6D4B"}),"\n",(0,r.jsx)(n.p,{children:"\u9650\u6D41\u7CFB\u7EDF\u7684\u4E3B\u8981\u76EE\u7684\uFF1A"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u76EE\u7684"}),(0,r.jsx)(n.th,{children:"\u8BF4\u660E"}),(0,r.jsx)(n.th,{children:"\u5B9E\u73B0\u65B9\u5F0F"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"\u4FDD\u62A4\u7CFB\u7EDF"})}),(0,r.jsx)(n.td,{children:"\u9632\u6B62\u7CFB\u7EDF\u8FC7\u8F7D\u5D29\u6E83"}),(0,r.jsx)(n.td,{children:"\u9650\u5236\u8BF7\u6C42\u6570\u91CF"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"\u8D44\u6E90\u7BA1\u7406"})}),(0,r.jsx)(n.td,{children:"\u5408\u7406\u5206\u914D\u7CFB\u7EDF\u8D44\u6E90"}),(0,r.jsx)(n.td,{children:"\u6309\u4F18\u5148\u7EA7\u5206\u914D"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"\u6210\u672C\u63A7\u5236"})}),(0,r.jsx)(n.td,{children:"\u63A7\u5236API\u8C03\u7528\u6210\u672C"}),(0,r.jsx)(n.td,{children:"\u9650\u5236\u8C03\u7528\u9891\u7387"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"\u7528\u6237\u4F53\u9A8C"})}),(0,r.jsx)(n.td,{children:"\u4FDD\u8BC1\u6838\u5FC3\u529F\u80FD\u53EF\u7528"}),(0,r.jsx)(n.td,{children:"\u964D\u7EA7\u975E\u6838\u5FC3\u529F\u80FD"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"\u5B89\u5168\u9632\u62A4"})}),(0,r.jsx)(n.td,{children:"\u9632\u6B62\u6076\u610F\u653B\u51FB"}),(0,r.jsx)(n.td,{children:"\u5F02\u5E38\u6D41\u91CF\u68C0\u6D4B"})]})]})]}),"\n",(0,r.jsxs)(l.A,{children:[(0,r.jsx)(a.A,{value:"config",label:"\u9650\u6D41\u914D\u7F6E",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Configuration\npublic class RateLimitConfig {\n    \n    @Value("${rate.limit.enabled:true}")\n    private boolean rateLimitEnabled;\n    \n    @Value("${rate.limit.default.qps:100}")\n    private int defaultQps;\n    \n    @Value("${rate.limit.default.burst:200}")\n    private int defaultBurst;\n    \n    @Bean\n    public RateLimiter rateLimiter() {\n        return RateLimiter.create(defaultQps);\n    }\n    \n    @Bean\n    public RateLimitProperties rateLimitProperties() {\n        RateLimitProperties properties = new RateLimitProperties();\n        properties.setEnabled(rateLimitEnabled);\n        properties.setDefaultQps(defaultQps);\n        properties.setDefaultBurst(defaultBurst);\n        return properties;\n    }\n}\n'})})}),(0,r.jsx)(a.A,{value:"properties",label:"\u5C5E\u6027\u914D\u7F6E",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"@Component\npublic class RateLimitProperties {\n    private boolean enabled;\n    private int defaultQps;\n    private int defaultBurst;\n    private Map<String, Integer> userLimits = new HashMap<>();\n    private Map<String, Integer> apiLimits = new HashMap<>();\n    \n    // getter\u548Csetter\u65B9\u6CD5\n}\n"})})})]}),"\n",(0,r.jsx)(n.h3,{id:"12-\u9650\u6D41\u7EF4\u5EA6",children:"1.2 \u9650\u6D41\u7EF4\u5EA6"}),"\n",(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("div",{className:"card__body",children:[(0,r.jsx)(n.p,{children:"\u9650\u6D41\u53EF\u4EE5\u4ECE\u4E0D\u540C\u7EF4\u5EA6\u8FDB\u884C\uFF1A"}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u5168\u5C40\u9650\u6D41"}),"\uFF1A\u5BF9\u6574\u4E2A\u7CFB\u7EDF\u8FDB\u884C\u603B\u4F53\u6D41\u91CF\u63A7\u5236"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u7528\u6237\u9650\u6D41"}),"\uFF1A\u5BF9\u5355\u4E2A\u7528\u6237\u7684\u8BF7\u6C42\u9891\u7387\u8FDB\u884C\u9650\u5236"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"IP\u9650\u6D41"}),"\uFF1A\u5BF9\u6765\u81EA\u7279\u5B9AIP\u5730\u5740\u7684\u8BF7\u6C42\u8FDB\u884C\u9650\u5236"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"API\u9650\u6D41"}),"\uFF1A\u5BF9\u7279\u5B9AAPI\u63A5\u53E3\u7684\u8C03\u7528\u9891\u7387\u8FDB\u884C\u9650\u5236"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u63A5\u53E3\u9650\u6D41"}),"\uFF1A\u5BF9\u7279\u5B9A\u63A5\u53E3\u65B9\u6CD5\u7684\u8C03\u7528\u9891\u7387\u8FDB\u884C\u9650\u5236"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u8D44\u6E90\u9650\u6D41"}),"\uFF1A\u5BF9\u7279\u5B9A\u8D44\u6E90\u7684\u8BBF\u95EE\u9891\u7387\u8FDB\u884C\u9650\u5236"]}),"\n"]})]})}),"\n",(0,r.jsx)(n.mermaid,{value:"graph TD\n    A[\u9650\u6D41\u7EF4\u5EA6] --\x3e B[\u5168\u5C40\u9650\u6D41]\n    A --\x3e C[\u7528\u6237\u9650\u6D41]\n    A --\x3e D[IP\u9650\u6D41]\n    A --\x3e E[API\u9650\u6D41]\n    A --\x3e F[\u63A5\u53E3\u9650\u6D41]\n    A --\x3e G[\u8D44\u6E90\u9650\u6D41]\n    \n    B --\x3e B1[\u7CFB\u7EDF\u6574\u4F53QPS]\n    C --\x3e C1[\u5355\u7528\u6237\u8BF7\u6C42\u9891\u7387]\n    D --\x3e D1[\u5355IP\u8BF7\u6C42\u9891\u7387]\n    E --\x3e E1[\u5355API\u8BF7\u6C42\u9891\u7387]\n    F --\x3e F1[\u5355\u65B9\u6CD5\u8C03\u7528\u9891\u7387]\n    G --\x3e G1[\u5355\u8D44\u6E90\u8BBF\u95EE\u9891\u7387]"}),"\n",(0,r.jsxs)(l.A,{children:[(0,r.jsx)(a.A,{value:"enum",label:"\u7EF4\u5EA6\u5B9A\u4E49",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'public enum RateLimitDimension {\n    // \u5168\u5C40\u9650\u6D41\n    GLOBAL("\u5168\u5C40\u9650\u6D41", "\u5BF9\u6574\u4E2A\u7CFB\u7EDF\u8FDB\u884C\u9650\u6D41"),\n    \n    // \u7528\u6237\u9650\u6D41\n    USER("\u7528\u6237\u9650\u6D41", "\u5BF9\u5355\u4E2A\u7528\u6237\u8FDB\u884C\u9650\u6D41"),\n    \n    // IP\u9650\u6D41\n    IP("IP\u9650\u6D41", "\u5BF9\u5355\u4E2AIP\u5730\u5740\u8FDB\u884C\u9650\u6D41"),\n    \n    // API\u9650\u6D41\n    API("API\u9650\u6D41", "\u5BF9\u7279\u5B9AAPI\u63A5\u53E3\u8FDB\u884C\u9650\u6D41"),\n    \n    // \u63A5\u53E3\u9650\u6D41\n    INTERFACE("\u63A5\u53E3\u9650\u6D41", "\u5BF9\u7279\u5B9A\u63A5\u53E3\u65B9\u6CD5\u8FDB\u884C\u9650\u6D41"),\n    \n    // \u8D44\u6E90\u9650\u6D41\n    RESOURCE("\u8D44\u6E90\u9650\u6D41", "\u5BF9\u7279\u5B9A\u8D44\u6E90\u8FDB\u884C\u9650\u6D41");\n    \n    private final String name;\n    private final String description;\n    \n    RateLimitDimension(String name, String description) {\n        this.name = name;\n        this.description = description;\n    }\n}\n'})})}),(0,r.jsx)(a.A,{value:"manager",label:"\u9650\u6D41\u7BA1\u7406\u5668",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Component\npublic class RateLimitManager {\n    \n    private final Map<RateLimitDimension, RateLimiter> limiters = new ConcurrentHashMap<>();\n    \n    public boolean isAllowed(RateLimitDimension dimension, String key) {\n        RateLimiter limiter = getOrCreateLimiter(dimension, key);\n        return limiter.tryAcquire();\n    }\n    \n    private RateLimiter getOrCreateLimiter(RateLimitDimension dimension, String key) {\n        String limiterKey = dimension.name() + ":" + key;\n        return limiters.computeIfAbsent(dimension, k -> RateLimiter.create(100.0));\n    }\n}\n'})})})]}),"\n",(0,r.jsx)(n.h2,{id:"2-\u9650\u6D41\u7B97\u6CD5",children:"2. \u9650\u6D41\u7B97\u6CD5"}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsx)(n.p,{children:"\u9650\u6D41\u7B97\u6CD5\u662F\u9650\u6D41\u7CFB\u7EDF\u7684\u6838\u5FC3\uFF0C\u4E0D\u540C\u7B97\u6CD5\u6709\u4E0D\u540C\u7684\u7279\u70B9\u548C\u9002\u7528\u573A\u666F\u3002\u5E38\u89C1\u7684\u9650\u6D41\u7B97\u6CD5\u5305\u62EC\u56FA\u5B9A\u7A97\u53E3\u3001\u6ED1\u52A8\u7A97\u53E3\u3001\u4EE4\u724C\u6876\u548C\u6F0F\u6876\u7B97\u6CD5\u3002"})}),"\n",(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"card__header",children:(0,r.jsx)("h4",{children:"\u9650\u6D41\u7B97\u6CD5\u5BF9\u6BD4"})}),(0,r.jsx)("div",{className:"card__body",children:(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u7B97\u6CD5"}),(0,r.jsx)(n.th,{children:"\u4F18\u70B9"}),(0,r.jsx)(n.th,{children:"\u7F3A\u70B9"}),(0,r.jsx)(n.th,{children:"\u9002\u7528\u573A\u666F"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"\u56FA\u5B9A\u7A97\u53E3"})}),(0,r.jsx)(n.td,{children:"\u7B80\u5355\u6613\u5B9E\u73B0\u3001\u5185\u5B58\u6D88\u8017\u5C11"}),(0,r.jsx)(n.td,{children:"\u8FB9\u754C\u7A81\u53D1\u6D41\u91CF\u95EE\u9898"}),(0,r.jsx)(n.td,{children:"\u7B80\u5355\u573A\u666F\u3001\u4F4E\u7CBE\u5EA6\u8981\u6C42"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"\u6ED1\u52A8\u7A97\u53E3"})}),(0,r.jsx)(n.td,{children:"\u5E73\u6ED1\u9650\u6D41\u6548\u679C\u3001\u907F\u514D\u8FB9\u754C\u95EE\u9898"}),(0,r.jsx)(n.td,{children:"\u5B9E\u73B0\u590D\u6742\u3001\u5185\u5B58\u6D88\u8017\u5927"}),(0,r.jsx)(n.td,{children:"\u9700\u8981\u7CBE\u786E\u9650\u6D41\u7684\u573A\u666F"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"\u4EE4\u724C\u6876"})}),(0,r.jsx)(n.td,{children:"\u5141\u8BB8\u7A81\u53D1\u6D41\u91CF\u3001\u7075\u6D3B\u914D\u7F6E"}),(0,r.jsx)(n.td,{children:"\u5B9E\u73B0\u8F83\u590D\u6742"}),(0,r.jsx)(n.td,{children:"\u5141\u8BB8\u7A81\u53D1\u6D41\u91CF\u7684\u573A\u666F"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"\u6F0F\u6876"})}),(0,r.jsx)(n.td,{children:"\u56FA\u5B9A\u901F\u7387\u5904\u7406\u3001\u6D41\u91CF\u6574\u5F62"}),(0,r.jsx)(n.td,{children:"\u65E0\u6CD5\u5E94\u5BF9\u7A81\u53D1\u6D41\u91CF"}),(0,r.jsx)(n.td,{children:"\u9700\u8981\u56FA\u5B9A\u5904\u7406\u901F\u7387\u7684\u573A\u666F"})]})]})]})})]}),"\n",(0,r.jsx)(n.h3,{id:"21-\u56FA\u5B9A\u7A97\u53E3\u7B97\u6CD5",children:"2.1 \u56FA\u5B9A\u7A97\u53E3\u7B97\u6CD5"}),"\n",(0,r.jsx)(n.p,{children:"\u56FA\u5B9A\u7A97\u53E3\u7B97\u6CD5\u5C06\u65F6\u95F4\u5206\u4E3A\u56FA\u5B9A\u957F\u5EA6\u7684\u7A97\u53E3\uFF0C\u5728\u6BCF\u4E2A\u7A97\u53E3\u5185\u9650\u5236\u8BF7\u6C42\u6570\u91CF\u3002"}),"\n",(0,r.jsx)(n.mermaid,{value:"graph LR\n    A[\u8BF7\u6C42] --\x3e B{\u5F53\u524D\u7A97\u53E3\u8BF7\u6C42\u6570<\u9608\u503C?}\n    B -- \u662F --\x3e C[\u5141\u8BB8\u8BF7\u6C42]\n    B -- \u5426 --\x3e D[\u62D2\u7EDD\u8BF7\u6C42]\n    \n    subgraph \u65F6\u95F4\u8F74\n    E[\u7A97\u53E31] --\x3e F[\u7A97\u53E32] --\x3e G[\u7A97\u53E33]\n    end"}),"\n",(0,r.jsxs)(l.A,{children:[(0,r.jsx)(a.A,{value:"fixed",label:"\u56FA\u5B9A\u7A97\u53E3\u5B9E\u73B0",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"@Component\npublic class FixedWindowRateLimiter {\n    \n    private final Map<String, WindowInfo> windows = new ConcurrentHashMap<>();\n    private final int limit;\n    private final long windowSize;\n    \n    public FixedWindowRateLimiter(int limit, long windowSize) {\n        this.limit = limit;\n        this.windowSize = windowSize;\n    }\n    \n    public boolean isAllowed(String key) {\n        long currentTime = System.currentTimeMillis();\n        long windowStart = currentTime - (currentTime % windowSize);\n        \n        WindowInfo window = windows.compute(key, (k, v) -> {\n            if (v == null || v.getWindowStart() != windowStart) {\n                return new WindowInfo(windowStart, 1);\n            } else {\n                v.incrementCount();\n                return v;\n            }\n        });\n        \n        return window.getCount() <= limit;\n    }\n    \n    public void reset(String key) {\n        windows.remove(key);\n    }\n}\n"})})}),(0,r.jsx)(a.A,{value:"window",label:"\u7A97\u53E3\u4FE1\u606F\u7C7B",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"class WindowInfo {\n    private final long windowStart;\n    private final AtomicInteger count;\n    \n    public WindowInfo(long windowStart, int initialCount) {\n        this.windowStart = windowStart;\n        this.count = new AtomicInteger(initialCount);\n    }\n    \n    public long getWindowStart() { return windowStart; }\n    public int getCount() { return count.get(); }\n    public void incrementCount() { count.incrementAndGet(); }\n}\n"})})})]}),"\n",(0,r.jsx)(n.admonition,{title:"\u56FA\u5B9A\u7A97\u53E3\u7B97\u6CD5\u7684\u5C40\u9650\u6027",type:"caution",children:(0,r.jsx)(n.p,{children:"\u56FA\u5B9A\u7A97\u53E3\u7B97\u6CD5\u5728\u7A97\u53E3\u8FB9\u754C\u53EF\u80FD\u5BFC\u81F4\u7A81\u53D1\u6D41\u91CF\u95EE\u9898\u3002\u4F8B\u5982\uFF0C\u5728\u4E00\u4E2A\u7A97\u53E3\u7684\u672B\u5C3E\u548C\u4E0B\u4E00\u4E2A\u7A97\u53E3\u7684\u5F00\u5934\uFF0C\u53EF\u80FD\u5728\u77ED\u65F6\u95F4\u5185\u901A\u8FC7\u4E24\u500D\u4E8E\u9608\u503C\u7684\u8BF7\u6C42\u3002"})}),"\n",(0,r.jsx)(n.h3,{id:"22-\u6ED1\u52A8\u7A97\u53E3\u7B97\u6CD5",children:"2.2 \u6ED1\u52A8\u7A97\u53E3\u7B97\u6CD5"}),"\n",(0,r.jsx)(n.p,{children:"\u6ED1\u52A8\u7A97\u53E3\u7B97\u6CD5\u901A\u8FC7\u5C06\u65F6\u95F4\u7A97\u53E3\u5206\u4E3A\u591A\u4E2A\u5C0F\u5757\uFF0C\u5E76\u968F\u7740\u65F6\u95F4\u63A8\u79FB\u6ED1\u52A8\uFF0C\u63D0\u4F9B\u66F4\u5E73\u6ED1\u7684\u9650\u6D41\u6548\u679C\u3002"}),"\n",(0,r.jsx)(n.mermaid,{value:"graph TD\n    A[\u8BF7\u6C42] --\x3e B[\u8BA1\u7B97\u5F53\u524D\u7A97\u53E3\u8BF7\u6C42\u603B\u6570]\n    B --\x3e C{\u603B\u6570<\u9608\u503C?}\n    C -- \u662F --\x3e D[\u5141\u8BB8\u8BF7\u6C42]\n    C -- \u5426 --\x3e E[\u62D2\u7EDD\u8BF7\u6C42]\n    \n    subgraph \u6ED1\u52A8\u7A97\u53E3\n    F[\u68761] --- G[\u68762] --- H[\u68763] --- I[\u68764]\n    end"}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"\u6ED1\u52A8\u7A97\u53E3\u5DE5\u4F5C\u539F\u7406"}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u7A97\u53E3\u5206\u5272"}),"\uFF1A\u5C06\u65F6\u95F4\u7A97\u53E3\u5206\u4E3A\u591A\u4E2A\u5C0F\u6876"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u8BF7\u6C42\u8BA1\u6570"}),"\uFF1A\u6BCF\u4E2A\u8BF7\u6C42\u843D\u5165\u5BF9\u5E94\u7684\u65F6\u95F4\u6876"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u7A97\u53E3\u6ED1\u52A8"}),"\uFF1A\u968F\u7740\u65F6\u95F4\u63A8\u79FB\uFF0C\u65E7\u6876\u6DD8\u6C70\uFF0C\u65B0\u6876\u52A0\u5165"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u6D41\u91CF\u63A7\u5236"}),"\uFF1A\u6839\u636E\u6240\u6709\u6876\u7684\u8BF7\u6C42\u603B\u6570\u51B3\u5B9A\u662F\u5426\u5141\u8BB8\u8BF7\u6C42"]}),"\n"]}),(0,r.jsx)(n.p,{children:"\u4F18\u70B9\uFF1A"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5E73\u6ED1\u5904\u7406\u8BF7\u6C42\uFF0C\u907F\u514D\u8FB9\u754C\u7A81\u53D1\u95EE\u9898"}),"\n",(0,r.jsx)(n.li,{children:"\u63D0\u4F9B\u66F4\u7CBE\u786E\u7684\u6D41\u91CF\u63A7\u5236"}),"\n",(0,r.jsx)(n.li,{children:"\u9002\u5E94\u6027\u5F3A\uFF0C\u53EF\u6839\u636E\u9700\u6C42\u8C03\u6574\u6876\u7684\u6570\u91CF\u548C\u5927\u5C0F"}),"\n"]})]}),"\n",(0,r.jsxs)(l.A,{children:[(0,r.jsx)(a.A,{value:"sliding",label:"\u6ED1\u52A8\u7A97\u53E3\u5B9E\u73B0",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"@Component\npublic class SlidingWindowRateLimiter {\n    \n    private final Map<String, SlidingWindow> windows = new ConcurrentHashMap<>();\n    private final int limit;\n    private final long windowSize;\n    private final int bucketCount;\n    \n    public SlidingWindowRateLimiter(int limit, long windowSize, int bucketCount) {\n        this.limit = limit;\n        this.windowSize = windowSize;\n        this.bucketCount = bucketCount;\n    }\n    \n    public boolean isAllowed(String key) {\n        long currentTime = System.currentTimeMillis();\n        SlidingWindow window = windows.computeIfAbsent(key, k -> \n            new SlidingWindow(windowSize, bucketCount));\n        \n        return window.isAllowed(currentTime, limit);\n    }\n    \n    public void reset(String key) {\n        windows.remove(key);\n    }\n}\n"})})}),(0,r.jsx)(a.A,{value:"window-class",label:"\u6ED1\u52A8\u7A97\u53E3\u7C7B",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"class SlidingWindow {\n    private final long windowSize;\n    private final int bucketCount;\n    private final long bucketSize;\n    private final AtomicLong[] buckets;\n    private final AtomicLong lastUpdateTime;\n    \n    public SlidingWindow(long windowSize, int bucketCount) {\n        this.windowSize = windowSize;\n        this.bucketCount = bucketCount;\n        this.bucketSize = windowSize / bucketCount;\n        this.buckets = new AtomicLong[bucketCount];\n        this.lastUpdateTime = new AtomicLong(System.currentTimeMillis());\n        \n        for (int i = 0; i < bucketCount; i++) {\n            buckets[i] = new AtomicLong(0);\n        }\n    }\n    \n    public boolean isAllowed(long currentTime, int limit) {\n        updateBuckets(currentTime);\n        \n        long totalCount = 0;\n        for (AtomicLong bucket : buckets) {\n            totalCount += bucket.get();\n        }\n        \n        if (totalCount < limit) {\n            int bucketIndex = (int) ((currentTime / bucketSize) % bucketCount);\n            buckets[bucketIndex].incrementAndGet();\n            return true;\n        }\n        \n        return false;\n    }\n    \n    private void updateBuckets(long currentTime) {\n        long lastTime = lastUpdateTime.get();\n        if (currentTime - lastTime >= bucketSize) {\n            long bucketIndex = (currentTime / bucketSize) % bucketCount;\n            long lastBucketIndex = (lastTime / bucketSize) % bucketCount;\n            \n            // \u6E05\u7A7A\u8FC7\u671F\u7684\u6876\n            for (long i = (lastBucketIndex + 1) % bucketCount; i != bucketIndex; \n                 i = (i + 1) % bucketCount) {\n                buckets[(int) i].set(0);\n            }\n            \n            lastUpdateTime.set(currentTime);\n        }\n    }\n}\n"})})})]}),"\n",(0,r.jsx)(n.h3,{id:"23-\u4EE4\u724C\u6876\u7B97\u6CD5",children:"2.3 \u4EE4\u724C\u6876\u7B97\u6CD5"}),"\n",(0,r.jsx)(n.p,{children:"\u4EE4\u724C\u6876\u7B97\u6CD5\u901A\u8FC7\u4EE5\u56FA\u5B9A\u901F\u7387\u5411\u6876\u4E2D\u6DFB\u52A0\u4EE4\u724C\uFF0C\u8BF7\u6C42\u5230\u8FBE\u65F6\u9700\u8981\u83B7\u53D6\u4EE4\u724C\u624D\u80FD\u88AB\u5904\u7406\u3002"}),"\n",(0,r.jsx)(n.mermaid,{value:"graph TD\n    A[\u8BF7\u6C42] --\x3e B{\u6876\u4E2D\u6709\u8DB3\u591F\u4EE4\u724C?}\n    B -- \u662F --\x3e C[\u83B7\u53D6\u4EE4\u724C]\n    B -- \u5426 --\x3e D[\u62D2\u7EDD\u8BF7\u6C42]\n    C --\x3e E[\u5904\u7406\u8BF7\u6C42]\n    F[\u56FA\u5B9A\u901F\u7387\u4EA7\u751F\u4EE4\u724C] --\x3e G[\u4EE4\u724C\u6876]\n    G --\x3e B"}),"\n",(0,r.jsxs)(l.A,{children:[(0,r.jsx)(a.A,{value:"token",label:"\u4EE4\u724C\u6876\u5B9E\u73B0",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"@Component\npublic class TokenBucketRateLimiter {\n    \n    private final Map<String, TokenBucket> buckets = new ConcurrentHashMap<>();\n    private final double rate;\n    private final int capacity;\n    \n    public TokenBucketRateLimiter(double rate, int capacity) {\n        this.rate = rate;\n        this.capacity = capacity;\n    }\n    \n    public boolean isAllowed(String key) {\n        TokenBucket bucket = buckets.computeIfAbsent(key, k -> new TokenBucket(rate, capacity));\n        return bucket.tryConsume(1);\n    }\n    \n    public boolean isAllowed(String key, int tokens) {\n        TokenBucket bucket = buckets.computeIfAbsent(key, k -> new TokenBucket(rate, capacity));\n        return bucket.tryConsume(tokens);\n    }\n    \n    public void reset(String key) {\n        buckets.remove(key);\n    }\n}\n"})})}),(0,r.jsx)(a.A,{value:"bucket",label:"\u4EE4\u724C\u6876\u7C7B",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"class TokenBucket {\n    private final double rate;\n    private final int capacity;\n    private final AtomicInteger tokens;\n    private final AtomicLong lastRefillTime;\n    \n    public TokenBucket(double rate, int capacity) {\n        this.rate = rate;\n        this.capacity = capacity;\n        this.tokens = new AtomicInteger(capacity);\n        this.lastRefillTime = new AtomicLong(System.currentTimeMillis());\n    }\n    \n    public boolean tryConsume(int requestedTokens) {\n        refill();\n        \n        while (true) {\n            int currentTokens = tokens.get();\n            if (currentTokens < requestedTokens) {\n                return false;\n            }\n            \n            if (tokens.compareAndSet(currentTokens, currentTokens - requestedTokens)) {\n                return true;\n            }\n        }\n    }\n    \n    private void refill() {\n        long now = System.currentTimeMillis();\n        long lastRefill = lastRefillTime.get();\n        long timePassed = now - lastRefill;\n        \n        if (timePassed > 0) {\n            int newTokens = (int) (timePassed * rate / 1000);\n            if (newTokens > 0) {\n                while (true) {\n                    int currentTokens = tokens.get();\n                    int newTotal = Math.min(currentTokens + newTokens, capacity);\n                    \n                    if (tokens.compareAndSet(currentTokens, newTotal)) {\n                        lastRefillTime.addAndGet(timePassed);\n                        break;\n                    }\n                }\n            }\n        }\n    }\n}\n"})})})]}),"\n",(0,r.jsx)(n.admonition,{title:"\u4EE4\u724C\u6876\u7279\u70B9",type:"tip",children:(0,r.jsx)(n.p,{children:"\u4EE4\u724C\u6876\u7B97\u6CD5\u7684\u5173\u952E\u7279\u70B9\u662F\u80FD\u591F\u5904\u7406\u7A81\u53D1\u6D41\u91CF\u3002\u901A\u8FC7\u9884\u5148\u5B58\u50A8\u7684\u4EE4\u724C\uFF0C\u53EF\u4EE5\u5141\u8BB8\u77ED\u65F6\u95F4\u5185\u7684\u8BF7\u6C42\u7A81\u53D1\uFF0C\u540C\u65F6\u901A\u8FC7\u56FA\u5B9A\u901F\u7387\u7684\u4EE4\u724C\u4EA7\u751F\u6765\u9650\u5236\u957F\u671F\u7684\u8BF7\u6C42\u901F\u7387\u3002"})}),"\n",(0,r.jsx)(n.h3,{id:"24-\u6F0F\u6876\u7B97\u6CD5",children:"2.4 \u6F0F\u6876\u7B97\u6CD5"}),"\n",(0,r.jsx)(n.p,{children:"\u6F0F\u6876\u7B97\u6CD5\u4EE5\u56FA\u5B9A\u901F\u7387\u5904\u7406\u8BF7\u6C42\uFF0C\u591A\u4F59\u7684\u8BF7\u6C42\u5B58\u50A8\u5728\u6876\u4E2D\uFF0C\u5982\u679C\u6876\u6EE1\u5219\u62D2\u7EDD\u65B0\u8BF7\u6C42\u3002"}),"\n",(0,r.jsx)(n.mermaid,{value:"graph TD\n    A[\u8BF7\u6C42] --\x3e B[\u6F0F\u6876]\n    B --\x3e C{\u6876\u5DF2\u6EE1?}\n    C -- \u662F --\x3e D[\u62D2\u7EDD\u8BF7\u6C42]\n    C -- \u5426 --\x3e E[\u52A0\u5165\u6876]\n    B --\x3e F[\u56FA\u5B9A\u901F\u7387\u5904\u7406\u8BF7\u6C42]"}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"\u6F0F\u6876\u4E0E\u4EE4\u724C\u6876\u7684\u533A\u522B"}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u6F0F\u6876\u7B97\u6CD5"}),"\uFF1A"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u8BF7\u6C42\u4EE5\u56FA\u5B9A\u901F\u7387\u5904\u7406"}),"\n",(0,r.jsx)(n.li,{children:"\u4E0D\u5141\u8BB8\u7A81\u53D1\u6D41\u91CF"}),"\n",(0,r.jsx)(n.li,{children:"\u8D77\u5230\u6D41\u91CF\u6574\u5F62(Traffic Shaping)\u4F5C\u7528"}),"\n",(0,r.jsx)(n.li,{children:"\u786E\u4FDD\u7CFB\u7EDF\u4EE5\u7A33\u5B9A\u7684\u901F\u7387\u5904\u7406\u8BF7\u6C42"}),"\n"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u4EE4\u724C\u6876\u7B97\u6CD5"}),"\uFF1A"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u53EF\u4EE5\u5904\u7406\u77ED\u65F6\u95F4\u7684\u7A81\u53D1\u6D41\u91CF"}),"\n",(0,r.jsx)(n.li,{children:"\u957F\u671F\u5E73\u5747\u901F\u7387\u53D7\u4EE4\u724C\u4EA7\u751F\u901F\u7387\u9650\u5236"}),"\n",(0,r.jsx)(n.li,{children:"\u66F4\u52A0\u7075\u6D3B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u53C2\u6570\u8C03\u6574\u5E94\u5BF9\u4E0D\u540C\u573A\u666F"}),"\n",(0,r.jsx)(n.li,{children:"\u9002\u7528\u4E8E\u9700\u8981\u5904\u7406\u7A81\u53D1\u6D41\u91CF\u7684\u573A\u666F"}),"\n"]})]}),"\n",(0,r.jsxs)(l.A,{children:[(0,r.jsx)(a.A,{value:"leaky",label:"\u6F0F\u6876\u5B9E\u73B0",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"@Component\npublic class LeakyBucketRateLimiter {\n    \n    private final Map<String, LeakyBucket> buckets = new ConcurrentHashMap<>();\n    private final double rate;\n    private final int capacity;\n    \n    public LeakyBucketRateLimiter(double rate, int capacity) {\n        this.rate = rate;\n        this.capacity = capacity;\n    }\n    \n    public boolean isAllowed(String key) {\n        LeakyBucket bucket = buckets.computeIfAbsent(key, k -> new LeakyBucket(rate, capacity));\n        return bucket.tryConsume();\n    }\n    \n    public void reset(String key) {\n        buckets.remove(key);\n    }\n}\n"})})}),(0,r.jsx)(a.A,{value:"leaky-bucket",label:"\u6F0F\u6876\u7C7B",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"class LeakyBucket {\n    private final double rate;\n    private final int capacity;\n    private final AtomicInteger water;\n    private final AtomicLong lastLeakTime;\n    \n    public LeakyBucket(double rate, int capacity) {\n        this.rate = rate;\n        this.capacity = capacity;\n        this.water = new AtomicInteger(0);\n        this.lastLeakTime = new AtomicLong(System.currentTimeMillis());\n    }\n    \n    public boolean tryConsume() {\n        leak();\n        \n        while (true) {\n            int currentWater = water.get();\n            if (currentWater >= capacity) {\n                return false;\n            }\n            \n            if (water.compareAndSet(currentWater, currentWater + 1)) {\n                return true;\n            }\n        }\n    }\n    \n    private void leak() {\n        long now = System.currentTimeMillis();\n        long lastLeak = lastLeakTime.get();\n        long timePassed = now - lastLeak;\n        \n        if (timePassed > 0) {\n            int leakedWater = (int) (timePassed * rate / 1000);\n            if (leakedWater > 0) {\n                while (true) {\n                    int currentWater = water.get();\n                    int newWater = Math.max(0, currentWater - leakedWater);\n                    \n                    if (water.compareAndSet(currentWater, newWater)) {\n                        lastLeakTime.set(now);\n                        break;\n                    }\n                }\n            }\n        }\n    }\n}\n"})})})]}),"\n",(0,r.jsx)(n.h2,{id:"3-\u9650\u6D41\u7B56\u7565",children:"3. \u9650\u6D41\u7B56\u7565"}),"\n",(0,r.jsx)(n.h3,{id:"31-\u5206\u7EA7\u9650\u6D41",children:"3.1 \u5206\u7EA7\u9650\u6D41"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",metastring:'title="\u5206\u7EA7\u9650\u6D41\u5B9E\u73B0"',children:'@Component\npublic class TieredRateLimiter {\n    \n    private final Map<String, RateLimiter> limiters = new ConcurrentHashMap<>();\n    private final RateLimitProperties properties;\n    \n    public TieredRateLimiter(RateLimitProperties properties) {\n        this.properties = properties;\n    }\n    \n    public boolean isAllowed(String key, RateLimitTier tier) {\n        RateLimiter limiter = getOrCreateLimiter(key, tier);\n        return limiter.tryAcquire();\n    }\n    \n    private RateLimiter getOrCreateLimiter(String key, RateLimitTier tier) {\n        String limiterKey = key + ":" + tier.name();\n        return limiters.computeIfAbsent(limiterKey, k -> {\n            double rate = getRateForTier(tier);\n            return RateLimiter.create(rate);\n        });\n    }\n    \n    private double getRateForTier(RateLimitTier tier) {\n        switch (tier) {\n            case VIP:\n                return 1000.0; // VIP\u7528\u6237\uFF1A1000 QPS\n            case PREMIUM:\n                return 500.0;  // \u9AD8\u7EA7\u7528\u6237\uFF1A500 QPS\n            case STANDARD:\n                return 100.0;  // \u666E\u901A\u7528\u6237\uFF1A100 QPS\n            case FREE:\n                return 10.0;   // \u514D\u8D39\u7528\u6237\uFF1A10 QPS\n            default:\n                return 10.0;\n        }\n    }\n}\n\nenum RateLimitTier {\n    VIP,      // VIP\u7528\u6237\n    PREMIUM,  // \u9AD8\u7EA7\u7528\u6237\n    STANDARD, // \u666E\u901A\u7528\u6237\n    FREE      // \u514D\u8D39\u7528\u6237\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"32-\u52A8\u6001\u9650\u6D41",children:"3.2 \u52A8\u6001\u9650\u6D41"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",metastring:'title="\u52A8\u6001\u9650\u6D41\u5B9E\u73B0"',children:"@Component\npublic class DynamicRateLimiter {\n    \n    private final Map<String, RateLimiter> limiters = new ConcurrentHashMap<>();\n    private final AtomicReference<Double> globalRate = new AtomicReference<>(100.0);\n    \n    @Scheduled(fixedRate = 5000)\n    public void updateRateLimits() {\n        // \u6839\u636E\u7CFB\u7EDF\u8D1F\u8F7D\u52A8\u6001\u8C03\u6574\u9650\u6D41\n        double cpuUsage = getCpuUsage();\n        double memoryUsage = getMemoryUsage();\n        \n        double newRate = calculateNewRate(cpuUsage, memoryUsage);\n        globalRate.set(newRate);\n        \n        // \u66F4\u65B0\u6240\u6709\u9650\u6D41\u5668\n        limiters.values().forEach(limiter -> {\n            // \u6CE8\u610F\uFF1AGuava\u7684RateLimiter\u4E0D\u652F\u6301\u52A8\u6001\u4FEE\u6539\u901F\u7387\n            // \u8FD9\u91CC\u9700\u8981\u91CD\u65B0\u521B\u5EFA\u9650\u6D41\u5668\n        });\n    }\n    \n    private double calculateNewRate(double cpuUsage, double memoryUsage) {\n        double baseRate = 100.0;\n        \n        // CPU\u4F7F\u7528\u7387\u8D85\u8FC780%\uFF0C\u964D\u4F4E\u9650\u6D41\n        if (cpuUsage > 80) {\n            baseRate *= 0.5;\n        }\n        \n        // \u5185\u5B58\u4F7F\u7528\u7387\u8D85\u8FC780%\uFF0C\u964D\u4F4E\u9650\u6D41\n        if (memoryUsage > 80) {\n            baseRate *= 0.5;\n        }\n        \n        return Math.max(baseRate, 10.0); // \u6700\u4F4E10 QPS\n    }\n    \n    private double getCpuUsage() {\n        OperatingSystemMXBean osBean = ManagementFactory.getOperatingSystemMXBean();\n        if (osBean instanceof com.sun.management.OperatingSystemMXBean) {\n            return ((com.sun.management.OperatingSystemMXBean) osBean).getCpuLoad() * 100;\n        }\n        return 0.0;\n    }\n    \n    private double getMemoryUsage() {\n        Runtime runtime = Runtime.getRuntime();\n        long maxMemory = runtime.maxMemory();\n        long usedMemory = runtime.totalMemory() - runtime.freeMemory();\n        return (double) usedMemory / maxMemory * 100;\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"4-\u9650\u6D41\u5B9E\u73B0",children:"4. \u9650\u6D41\u5B9E\u73B0"}),"\n",(0,r.jsx)(n.h3,{id:"41-\u6CE8\u89E3\u5F0F\u9650\u6D41",children:"4.1 \u6CE8\u89E3\u5F0F\u9650\u6D41"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",metastring:'title="\u9650\u6D41\u6CE8\u89E3\u5B9E\u73B0"',children:'@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface RateLimit {\n    String key() default "";           // \u9650\u6D41\u952E\n    double qps() default 100.0;        // QPS\u9650\u5236\n    int burst() default 200;           // \u7A81\u53D1\u6D41\u91CF\u9650\u5236\n    RateLimitDimension dimension() default RateLimitDimension.API;\n    String fallback() default "";      // \u964D\u7EA7\u65B9\u6CD5\n}\n\n@Aspect\n@Component\npublic class RateLimitAspect {\n    \n    private final Map<String, RateLimiter> limiters = new ConcurrentHashMap<>();\n    \n    @Around("@annotation(rateLimit)")\n    public Object around(ProceedingJoinPoint point, RateLimit rateLimit) throws Throwable {\n        String key = getRateLimitKey(point, rateLimit);\n        RateLimiter limiter = getOrCreateLimiter(key, rateLimit.qps());\n        \n        if (limiter.tryAcquire()) {\n            return point.proceed();\n        } else {\n            // \u9650\u6D41\u89E6\u53D1\uFF0C\u6267\u884C\u964D\u7EA7\u903B\u8F91\n            return executeFallback(point, rateLimit);\n        }\n    }\n    \n    private String getRateLimitKey(ProceedingJoinPoint point, RateLimit rateLimit) {\n        if (!rateLimit.key().isEmpty()) {\n            return rateLimit.key();\n        }\n        \n        // \u81EA\u52A8\u751F\u6210key\n        String methodName = point.getSignature().getName();\n        String className = point.getTarget().getClass().getSimpleName();\n        return className + ":" + methodName;\n    }\n    \n    private RateLimiter getOrCreateLimiter(String key, double qps) {\n        return limiters.computeIfAbsent(key, k -> RateLimiter.create(qps));\n    }\n    \n    private Object executeFallback(ProceedingJoinPoint point, RateLimit rateLimit) throws Throwable {\n        if (!rateLimit.fallback().isEmpty()) {\n            // \u8C03\u7528\u964D\u7EA7\u65B9\u6CD5\n            Method fallbackMethod = findFallbackMethod(point, rateLimit.fallback());\n            if (fallbackMethod != null) {\n                return fallbackMethod.invoke(point.getTarget(), point.getArgs());\n            }\n        }\n        \n        // \u9ED8\u8BA4\u964D\u7EA7\uFF1A\u629B\u51FA\u9650\u6D41\u5F02\u5E38\n        throw new RateLimitExceededException("\u8BF7\u6C42\u9891\u7387\u8D85\u9650");\n    }\n    \n    private Method findFallbackMethod(ProceedingJoinPoint point, String fallbackMethodName) {\n        try {\n            return point.getTarget().getClass().getMethod(fallbackMethodName);\n        } catch (NoSuchMethodException e) {\n            return null;\n        }\n    }\n}\n\n// \u4F7F\u7528\u793A\u4F8B\n@RestController\npublic class UserController {\n    \n    @RateLimit(qps = 100, dimension = RateLimitDimension.USER)\n    @GetMapping("/users/{id}")\n    public User getUser(@PathVariable Long id) {\n        return userService.getUserById(id);\n    }\n    \n    @RateLimit(qps = 10, fallback = "getUserFallback")\n    @GetMapping("/users/{id}/detail")\n    public UserDetail getUserDetail(@PathVariable Long id) {\n        return userService.getUserDetail(id);\n    }\n    \n    public UserDetail getUserFallback(Long id) {\n        // \u964D\u7EA7\u903B\u8F91\uFF1A\u8FD4\u56DE\u57FA\u672C\u4FE1\u606F\n        return new UserDetail(id, "\u7528\u6237" + id, "\u57FA\u672C\u4FE1\u606F");\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"42-\u8FC7\u6EE4\u5668\u9650\u6D41",children:"4.2 \u8FC7\u6EE4\u5668\u9650\u6D41"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",metastring:'title="\u8FC7\u6EE4\u5668\u9650\u6D41\u5B9E\u73B0"',children:'@Component\npublic class RateLimitFilter implements Filter {\n    \n    private final RateLimiter rateLimiter;\n    private final ObjectMapper objectMapper;\n    \n    public RateLimitFilter() {\n        this.rateLimiter = RateLimiter.create(100.0); // 100 QPS\n        this.objectMapper = new ObjectMapper();\n    }\n    \n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\n            throws IOException, ServletException {\n        \n        HttpServletRequest httpRequest = (HttpServletRequest) request;\n        HttpServletResponse httpResponse = (HttpServletResponse) response;\n        \n        // \u83B7\u53D6\u9650\u6D41\u952E\n        String key = getRateLimitKey(httpRequest);\n        \n        if (rateLimiter.tryAcquire()) {\n            chain.doFilter(request, response);\n        } else {\n            // \u9650\u6D41\u54CD\u5E94\n            sendRateLimitResponse(httpResponse);\n        }\n    }\n    \n    private String getRateLimitKey(HttpServletRequest request) {\n        // \u57FA\u4E8EIP\u7684\u9650\u6D41\n        String ip = getClientIp(request);\n        \n        // \u57FA\u4E8E\u7528\u6237\u7684\u9650\u6D41\n        String userId = getUserId(request);\n        \n        // \u57FA\u4E8EAPI\u7684\u9650\u6D41\n        String api = request.getRequestURI();\n        \n        return String.format("%s:%s:%s", ip, userId, api);\n    }\n    \n    private String getClientIp(HttpServletRequest request) {\n        String xForwardedFor = request.getHeader("X-Forwarded-For");\n        if (xForwardedFor != null && !xForwardedFor.isEmpty()) {\n            return xForwardedFor.split(",")[0].trim();\n        }\n        return request.getRemoteAddr();\n    }\n    \n    private String getUserId(HttpServletRequest request) {\n        // \u4ECE\u8BF7\u6C42\u5934\u6216\u53C2\u6570\u4E2D\u83B7\u53D6\u7528\u6237ID\n        String userId = request.getHeader("X-User-ID");\n        if (userId == null) {\n            userId = request.getParameter("userId");\n        }\n        return userId != null ? userId : "anonymous";\n    }\n    \n    private void sendRateLimitResponse(HttpServletResponse response) throws IOException {\n        response.setStatus(HttpStatus.TOO_MANY_REQUESTS.value());\n        response.setContentType("application/json");\n        \n        Map<String, Object> result = new HashMap<>();\n        result.put("code", 429);\n        result.put("message", "\u8BF7\u6C42\u9891\u7387\u8D85\u9650\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5");\n        result.put("timestamp", System.currentTimeMillis());\n        \n        response.getWriter().write(objectMapper.writeValueAsString(result));\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"5-\u9650\u6D41\u76D1\u63A7",children:"5. \u9650\u6D41\u76D1\u63A7"}),"\n",(0,r.jsx)(n.h3,{id:"51-\u9650\u6D41\u7EDF\u8BA1",children:"5.1 \u9650\u6D41\u7EDF\u8BA1"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",metastring:'title="\u9650\u6D41\u7EDF\u8BA1\u5B9E\u73B0"',children:"@Component\npublic class RateLimitStatistics {\n    \n    private final Map<String, AtomicLong> requestCounts = new ConcurrentHashMap<>();\n    private final Map<String, AtomicLong> limitCounts = new ConcurrentHashMap<>();\n    private final Map<String, AtomicLong> totalCounts = new ConcurrentHashMap<>();\n    \n    public void recordRequest(String key, boolean limited) {\n        requestCounts.computeIfAbsent(key, k -> new AtomicLong()).incrementAndGet();\n        totalCounts.computeIfAbsent(key, k -> new AtomicLong()).incrementAndGet();\n        \n        if (limited) {\n            limitCounts.computeIfAbsent(key, k -> new AtomicLong()).incrementAndGet();\n        }\n    }\n    \n    public RateLimitStats getStats(String key) {\n        long requests = requestCounts.getOrDefault(key, new AtomicLong()).get();\n        long limits = limitCounts.getOrDefault(key, new AtomicLong()).get();\n        long total = totalCounts.getOrDefault(key, new AtomicLong()).get();\n        \n        double limitRate = total > 0 ? (double) limits / total * 100 : 0;\n        \n        return new RateLimitStats(key, requests, limits, total, limitRate);\n    }\n    \n    public Map<String, RateLimitStats> getAllStats() {\n        Map<String, RateLimitStats> stats = new HashMap<>();\n        \n        for (String key : totalCounts.keySet()) {\n            stats.put(key, getStats(key));\n        }\n        \n        return stats;\n    }\n    \n    @Scheduled(fixedRate = 60000) // \u6BCF\u5206\u949F\u91CD\u7F6E\u8BA1\u6570\u5668\n    public void resetCounters() {\n        requestCounts.clear();\n        limitCounts.clear();\n    }\n}\n\nclass RateLimitStats {\n    private final String key;\n    private final long requests;\n    private final long limits;\n    private final long total;\n    private final double limitRate;\n    \n    // \u6784\u9020\u51FD\u6570\u548Cgetter\u65B9\u6CD5\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"52-\u9650\u6D41\u544A\u8B66",children:"5.2 \u9650\u6D41\u544A\u8B66"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",metastring:'title="\u9650\u6D41\u544A\u8B66\u5B9E\u73B0"',children:'@Component\npublic class RateLimitAlert {\n    \n    @Autowired\n    private RateLimitStatistics statistics;\n    \n    @Autowired\n    private EmailService emailService;\n    \n    @Value("${rate.limit.alert.threshold:80}")\n    private double alertThreshold;\n    \n    @Scheduled(fixedRate = 30000) // \u6BCF30\u79D2\u68C0\u67E5\u4E00\u6B21\n    public void checkRateLimitAlert() {\n        Map<String, RateLimitStats> stats = statistics.getAllStats();\n        \n        for (RateLimitStats stat : stats.values()) {\n            if (stat.getLimitRate() > alertThreshold) {\n                sendAlert(stat);\n            }\n        }\n    }\n    \n    private void sendAlert(RateLimitStats stat) {\n        String subject = "\u9650\u6D41\u544A\u8B66";\n        String message = String.format(\n            "\u9650\u6D41\u952E: %s\\n" +\n            "\u8BF7\u6C42\u603B\u6570: %d\\n" +\n            "\u9650\u6D41\u6B21\u6570: %d\\n" +\n            "\u9650\u6D41\u7387: %.2f%%\\n" +\n            "\u65F6\u95F4: %s",\n            stat.getKey(),\n            stat.getTotal(),\n            stat.getLimits(),\n            stat.getLimitRate(),\n            new Date()\n        );\n        \n        try {\n            emailService.sendAlertEmail(subject, message);\n        } catch (Exception e) {\n            log.error("\u53D1\u9001\u9650\u6D41\u544A\u8B66\u5931\u8D25", e);\n        }\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"6-\u9762\u8BD5\u9898\u7CBE\u9009",children:"6. \u9762\u8BD5\u9898\u7CBE\u9009"}),"\n",(0,r.jsx)(n.h3,{id:"61-\u57FA\u7840\u6982\u5FF5\u9898",children:"6.1 \u57FA\u7840\u6982\u5FF5\u9898"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Q: \u4EC0\u4E48\u662F\u9650\u6D41\uFF1F\u4E3A\u4EC0\u4E48\u9700\u8981\u9650\u6D41\uFF1F"})}),"\n",(0,r.jsx)(n.p,{children:"A: \u9650\u6D41\u662F\u6307\u63A7\u5236\u7CFB\u7EDF\u8BBF\u95EE\u9891\u7387\u7684\u6280\u672F\u3002\u9700\u8981\u9650\u6D41\u7684\u539F\u56E0\uFF1A"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u4FDD\u62A4\u7CFB\u7EDF"}),"\uFF1A\u9632\u6B62\u7CFB\u7EDF\u8FC7\u8F7D\u5D29\u6E83"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u8D44\u6E90\u7BA1\u7406"}),"\uFF1A\u5408\u7406\u5206\u914D\u7CFB\u7EDF\u8D44\u6E90"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u6210\u672C\u63A7\u5236"}),"\uFF1A\u63A7\u5236API\u8C03\u7528\u6210\u672C"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u7528\u6237\u4F53\u9A8C"}),"\uFF1A\u4FDD\u8BC1\u6838\u5FC3\u529F\u80FD\u53EF\u7528"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u5B89\u5168\u9632\u62A4"}),"\uFF1A\u9632\u6B62\u6076\u610F\u653B\u51FB"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Q: \u5E38\u89C1\u7684\u9650\u6D41\u7B97\u6CD5\u6709\u54EA\u4E9B\uFF1F\u5404\u6709\u4EC0\u4E48\u7279\u70B9\uFF1F"})}),"\n",(0,r.jsx)(n.p,{children:"A: \u5E38\u89C1\u7684\u9650\u6D41\u7B97\u6CD5\uFF1A"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u56FA\u5B9A\u7A97\u53E3"}),"\uFF1A\u7B80\u5355\u6613\u5B9E\u73B0\uFF0C\u4F46\u5B58\u5728\u4E34\u754C\u95EE\u9898"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u6ED1\u52A8\u7A97\u53E3"}),"\uFF1A\u89E3\u51B3\u4E34\u754C\u95EE\u9898\uFF0C\u4F46\u5B9E\u73B0\u590D\u6742"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u4EE4\u724C\u6876"}),"\uFF1A\u652F\u6301\u7A81\u53D1\u6D41\u91CF\uFF0C\u9002\u5408\u6D41\u91CF\u6574\u5F62"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u6F0F\u6876"}),"\uFF1A\u5E73\u6ED1\u6D41\u91CF\uFF0C\u4F46\u4E0D\u652F\u6301\u7A81\u53D1\u6D41\u91CF"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"62-\u7B97\u6CD5\u5B9E\u73B0\u9898",children:"6.2 \u7B97\u6CD5\u5B9E\u73B0\u9898"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Q: \u5982\u4F55\u5B9E\u73B0\u4EE4\u724C\u6876\u7B97\u6CD5\uFF1F"})}),"\n",(0,r.jsx)(n.p,{children:"A: \u4EE4\u724C\u6876\u7B97\u6CD5\u5B9E\u73B0\u6B65\u9AA4\uFF1A"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u521D\u59CB\u5316"}),"\uFF1A\u8BBE\u7F6E\u4EE4\u724C\u751F\u6210\u901F\u7387\u548C\u6876\u5BB9\u91CF"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u4EE4\u724C\u751F\u6210"}),"\uFF1A\u6309\u901F\u7387\u5411\u6876\u4E2D\u6DFB\u52A0\u4EE4\u724C"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u8BF7\u6C42\u5904\u7406"}),"\uFF1A\u4ECE\u6876\u4E2D\u53D6\u51FA\u4EE4\u724C\u5904\u7406\u8BF7\u6C42"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u9650\u6D41\u5224\u65AD"}),"\uFF1A\u6876\u4E2D\u4EE4\u724C\u4E0D\u8DB3\u65F6\u62D2\u7EDD\u8BF7\u6C42"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Q: \u5982\u4F55\u5B9E\u73B0\u6ED1\u52A8\u7A97\u53E3\u7B97\u6CD5\uFF1F"})}),"\n",(0,r.jsx)(n.p,{children:"A: \u6ED1\u52A8\u7A97\u53E3\u7B97\u6CD5\u5B9E\u73B0\u6B65\u9AA4\uFF1A"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u5206\u6876"}),"\uFF1A\u5C06\u65F6\u95F4\u7A97\u53E3\u5206\u4E3A\u591A\u4E2A\u5C0F\u6876"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u8BA1\u6570"}),"\uFF1A\u5728\u6BCF\u4E2A\u6876\u4E2D\u8BB0\u5F55\u8BF7\u6C42\u6570\u91CF"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u6ED1\u52A8"}),"\uFF1A\u6839\u636E\u5F53\u524D\u65F6\u95F4\u66F4\u65B0\u7A97\u53E3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u7EDF\u8BA1"}),"\uFF1A\u7EDF\u8BA1\u7A97\u53E3\u5185\u6240\u6709\u6876\u7684\u8BF7\u6C42\u603B\u6570"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"63-\u5B9E\u9645\u5E94\u7528\u9898",children:"6.3 \u5B9E\u9645\u5E94\u7528\u9898"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Q: \u5982\u4F55\u8BBE\u8BA1\u4E00\u4E2A\u5206\u5E03\u5F0F\u9650\u6D41\u7CFB\u7EDF\uFF1F"})}),"\n",(0,r.jsx)(n.p,{children:"A: \u5206\u5E03\u5F0F\u9650\u6D41\u7CFB\u7EDF\u8BBE\u8BA1\uFF1A"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u96C6\u4E2D\u5F0F\u5B58\u50A8"}),"\uFF1A\u4F7F\u7528Redis\u5B58\u50A8\u9650\u6D41\u72B6\u6001"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u5206\u5E03\u5F0F\u534F\u8C03"}),"\uFF1A\u4F7F\u7528Zookeeper\u6216Consul"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u4E00\u81F4\u6027\u4FDD\u8BC1"}),"\uFF1A\u4F7F\u7528\u5206\u5E03\u5F0F\u9501\u6216\u539F\u5B50\u64CD\u4F5C"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u6545\u969C\u5904\u7406"}),"\uFF1A\u964D\u7EA7\u5230\u672C\u5730\u9650\u6D41"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u76D1\u63A7\u544A\u8B66"}),"\uFF1A\u5B9E\u65F6\u76D1\u63A7\u9650\u6D41\u72B6\u6001"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Q: \u5982\u4F55\u5B9E\u73B0\u52A8\u6001\u9650\u6D41\uFF1F"})}),"\n",(0,r.jsx)(n.p,{children:"A: \u52A8\u6001\u9650\u6D41\u5B9E\u73B0\u65B9\u6CD5\uFF1A"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u7CFB\u7EDF\u76D1\u63A7"}),"\uFF1A\u76D1\u63A7CPU\u3001\u5185\u5B58\u3001\u7F51\u7EDC\u7B49\u6307\u6807"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u52A8\u6001\u8C03\u6574"}),"\uFF1A\u6839\u636E\u7CFB\u7EDF\u8D1F\u8F7D\u8C03\u6574\u9650\u6D41\u53C2\u6570"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u914D\u7F6E\u4E2D\u5FC3"}),"\uFF1A\u4F7F\u7528\u914D\u7F6E\u4E2D\u5FC3\u52A8\u6001\u4FEE\u6539\u9650\u6D41\u89C4\u5219"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u673A\u5668\u5B66\u4E60"}),"\uFF1A\u4F7F\u7528ML\u7B97\u6CD5\u9884\u6D4B\u548C\u8C03\u6574\u9650\u6D41"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{title:"\u9650\u6D41\u5B66\u4E60\u8981\u70B9",type:"tip",children:(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u7406\u89E3\u9650\u6D41\u6982\u5FF5"}),"\uFF1A\u638C\u63E1\u9650\u6D41\u7684\u76EE\u7684\u3001\u7EF4\u5EA6\u548C\u7B56\u7565"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u638C\u63E1\u9650\u6D41\u7B97\u6CD5"}),"\uFF1A\u5B66\u4F1A\u56FA\u5B9A\u7A97\u53E3\u3001\u6ED1\u52A8\u7A97\u53E3\u3001\u4EE4\u724C\u6876\u3001\u6F0F\u6876\u7B97\u6CD5"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u719F\u6089\u5B9E\u73B0\u65B9\u5F0F"}),"\uFF1A\u4E86\u89E3\u6CE8\u89E3\u5F0F\u3001\u8FC7\u6EE4\u5668\u5F0F\u3001\u4E2D\u95F4\u4EF6\u5F0F\u9650\u6D41"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u5B66\u4F1A\u76D1\u63A7\u544A\u8B66"}),"\uFF1A\u638C\u63E1\u9650\u6D41\u7EDF\u8BA1\u3001\u76D1\u63A7\u3001\u544A\u8B66\u673A\u5236"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u4E86\u89E3\u6700\u4F73\u5B9E\u8DF5"}),"\uFF1A\u5B66\u4E60\u4E1A\u754C\u6210\u719F\u7684\u9650\u6D41\u65B9\u6848"]}),"\n"]})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:"\u901A\u8FC7\u672C\u7AE0\u7684\u5B66\u4E60\uFF0C\u4F60\u5E94\u8BE5\u5DF2\u7ECF\u638C\u63E1\u4E86\u9650\u6D41\u7CFB\u7EDF\u8BBE\u8BA1\u7684\u6838\u5FC3\u6982\u5FF5\u3001\u7B97\u6CD5\u5B9E\u73B0\u548C\u6700\u4F73\u5B9E\u8DF5\u3002\u9650\u6D41\u7CFB\u7EDF\u8BBE\u8BA1\u662F\u4FDD\u62A4\u7CFB\u7EDF\u7A33\u5B9A\u8FD0\u884C\u7684\u91CD\u8981\u6280\u672F\uFF0C\u638C\u63E1\u8FD9\u4E9B\u6280\u672F\u53EF\u4EE5\u5E2E\u52A9\u4F60\u6784\u5EFA\u51FA\u5065\u58EE\u7684\u7CFB\u7EDF\u3002\u5728\u5B9E\u9645\u9879\u76EE\u4E2D\uFF0C\u5408\u7406\u8FD0\u7528\u9650\u6D41\u6280\u672F\u53EF\u4EE5\u6709\u6548\u9632\u6B62\u7CFB\u7EDF\u8FC7\u8F7D\uFF0C\u4FDD\u8BC1\u670D\u52A1\u8D28\u91CF\u3002"})]})}function p(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}}}]);